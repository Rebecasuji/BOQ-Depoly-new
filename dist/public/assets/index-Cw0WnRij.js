function v3(t,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const c=Object.getOwnPropertyDescriptor(r,i);c&&Object.defineProperty(t,i,c.get?c:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const A of c.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&r(A)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();var Lw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function o1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function b3(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var s=t.default;if(typeof s=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};n.prototype=s.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var v0={exports:{}},Op={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw;function j3(){if(Dw)return Op;Dw=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function n(r,i,c){var A=null;if(c!==void 0&&(A=""+c),i.key!==void 0&&(A=""+i.key),"key"in i){c={};for(var u in i)u!=="key"&&(c[u]=i[u])}else c=i;return i=c.ref,{$$typeof:t,type:r,key:A,ref:i!==void 0?i:null,props:c}}return Op.Fragment=s,Op.jsx=n,Op.jsxs=n,Op}var Qw;function w3(){return Qw||(Qw=1,v0.exports=j3()),v0.exports}var e=w3(),b0={exports:{}},Up={},j0={exports:{}},w0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _w;function S3(){return _w||(_w=1,(function(t){function s(ne,oe){var se=ne.length;ne.push(oe);e:for(;0<se;){var xe=se-1>>>1,Me=ne[xe];if(0<i(Me,oe))ne[xe]=oe,ne[se]=Me,se=xe;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var oe=ne[0],se=ne.pop();if(se!==oe){ne[0]=se;e:for(var xe=0,Me=ne.length,me=Me>>>1;xe<me;){var Z=2*(xe+1)-1,ge=ne[Z],we=Z+1,pe=ne[we];if(0>i(ge,se))we<Me&&0>i(pe,ge)?(ne[xe]=pe,ne[we]=se,xe=we):(ne[xe]=ge,ne[Z]=se,xe=Z);else if(we<Me&&0>i(pe,se))ne[xe]=pe,ne[we]=se,xe=we;else break e}}return oe}function i(ne,oe){var se=ne.sortIndex-oe.sortIndex;return se!==0?se:ne.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var A=Date,u=A.now();t.unstable_now=function(){return A.now()-u}}var d=[],h=[],o=1,m=null,y=3,p=!1,j=!1,b=!1,w=!1,B=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function k(ne){for(var oe=n(h);oe!==null;){if(oe.callback===null)r(h);else if(oe.startTime<=ne)r(h),oe.sortIndex=oe.expirationTime,s(d,oe);else break;oe=n(h)}}function z(ne){if(b=!1,k(ne),!j)if(n(d)!==null)j=!0,J||(J=!0,le());else{var oe=n(h);oe!==null&&re(z,oe.startTime-ne)}}var J=!1,$=-1,q=5,X=-1;function fe(){return w?!0:!(t.unstable_now()-X<q)}function ee(){if(w=!1,J){var ne=t.unstable_now();X=ne;var oe=!0;try{e:{j=!1,b&&(b=!1,L($),$=-1),p=!0;var se=y;try{t:{for(k(ne),m=n(d);m!==null&&!(m.expirationTime>ne&&fe());){var xe=m.callback;if(typeof xe=="function"){m.callback=null,y=m.priorityLevel;var Me=xe(m.expirationTime<=ne);if(ne=t.unstable_now(),typeof Me=="function"){m.callback=Me,k(ne),oe=!0;break t}m===n(d)&&r(d),k(ne)}else r(d);m=n(d)}if(m!==null)oe=!0;else{var me=n(h);me!==null&&re(z,me.startTime-ne),oe=!1}}break e}finally{m=null,y=se,p=!1}oe=void 0}}finally{oe?le():J=!1}}}var le;if(typeof Q=="function")le=function(){Q(ee)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,te=ue.port2;ue.port1.onmessage=ee,le=function(){te.postMessage(null)}}else le=function(){B(ee,0)};function re(ne,oe){$=B(function(){ne(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(ne){switch(y){case 1:case 2:case 3:var oe=3;break;default:oe=y}var se=y;y=oe;try{return ne()}finally{y=se}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(ne,oe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var se=y;y=ne;try{return oe()}finally{y=se}},t.unstable_scheduleCallback=function(ne,oe,se){var xe=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?xe+se:xe):se=xe,ne){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=se+Me,ne={id:o++,callback:oe,priorityLevel:ne,startTime:se,expirationTime:Me,sortIndex:-1},se>xe?(ne.sortIndex=se,s(h,ne),n(d)===null&&ne===n(h)&&(b?(L($),$=-1):b=!0,re(z,se-xe))):(ne.sortIndex=Me,s(d,ne),j||p||(j=!0,J||(J=!0,le()))),ne},t.unstable_shouldYield=fe,t.unstable_wrapCallback=function(ne){var oe=y;return function(){var se=y;y=oe;try{return ne.apply(this,arguments)}finally{y=se}}}})(w0)),w0}var Mw;function N3(){return Mw||(Mw=1,j0.exports=S3()),j0.exports}var S0={exports:{}},ir={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw;function B3(){if(Pw)return ir;Pw=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),A=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),o=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function p(me){return me===null||typeof me!="object"?null:(me=y&&me[y]||me["@@iterator"],typeof me=="function"?me:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function B(me,Z,ge){this.props=me,this.context=Z,this.refs=w,this.updater=ge||j}B.prototype.isReactComponent={},B.prototype.setState=function(me,Z){if(typeof me!="object"&&typeof me!="function"&&me!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,me,Z,"setState")},B.prototype.forceUpdate=function(me){this.updater.enqueueForceUpdate(this,me,"forceUpdate")};function L(){}L.prototype=B.prototype;function Q(me,Z,ge){this.props=me,this.context=Z,this.refs=w,this.updater=ge||j}var k=Q.prototype=new L;k.constructor=Q,b(k,B.prototype),k.isPureReactComponent=!0;var z=Array.isArray;function J(){}var $={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function X(me,Z,ge){var we=ge.ref;return{$$typeof:t,type:me,key:Z,ref:we!==void 0?we:null,props:ge}}function fe(me,Z){return X(me.type,Z,me.props)}function ee(me){return typeof me=="object"&&me!==null&&me.$$typeof===t}function le(me){var Z={"=":"=0",":":"=2"};return"$"+me.replace(/[=:]/g,function(ge){return Z[ge]})}var ue=/\/+/g;function te(me,Z){return typeof me=="object"&&me!==null&&me.key!=null?le(""+me.key):Z.toString(36)}function re(me){switch(me.status){case"fulfilled":return me.value;case"rejected":throw me.reason;default:switch(typeof me.status=="string"?me.then(J,J):(me.status="pending",me.then(function(Z){me.status==="pending"&&(me.status="fulfilled",me.value=Z)},function(Z){me.status==="pending"&&(me.status="rejected",me.reason=Z)})),me.status){case"fulfilled":return me.value;case"rejected":throw me.reason}}throw me}function ne(me,Z,ge,we,pe){var be=typeof me;(be==="undefined"||be==="boolean")&&(me=null);var je=!1;if(me===null)je=!0;else switch(be){case"bigint":case"string":case"number":je=!0;break;case"object":switch(me.$$typeof){case t:case s:je=!0;break;case o:return je=me._init,ne(je(me._payload),Z,ge,we,pe)}}if(je)return pe=pe(me),je=we===""?"."+te(me,0):we,z(pe)?(ge="",je!=null&&(ge=je.replace(ue,"$&/")+"/"),ne(pe,Z,ge,"",function(Qe){return Qe})):pe!=null&&(ee(pe)&&(pe=fe(pe,ge+(pe.key==null||me&&me.key===pe.key?"":(""+pe.key).replace(ue,"$&/")+"/")+je)),Z.push(pe)),1;je=0;var Ne=we===""?".":we+":";if(z(me))for(var Je=0;Je<me.length;Je++)we=me[Je],be=Ne+te(we,Je),je+=ne(we,Z,ge,be,pe);else if(Je=p(me),typeof Je=="function")for(me=Je.call(me),Je=0;!(we=me.next()).done;)we=we.value,be=Ne+te(we,Je++),je+=ne(we,Z,ge,be,pe);else if(be==="object"){if(typeof me.then=="function")return ne(re(me),Z,ge,we,pe);throw Z=String(me),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(me).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return je}function oe(me,Z,ge){if(me==null)return me;var we=[],pe=0;return ne(me,we,"","",function(be){return Z.call(ge,be,pe++)}),we}function se(me){if(me._status===-1){var Z=me._result;Z=Z(),Z.then(function(ge){(me._status===0||me._status===-1)&&(me._status=1,me._result=ge)},function(ge){(me._status===0||me._status===-1)&&(me._status=2,me._result=ge)}),me._status===-1&&(me._status=0,me._result=Z)}if(me._status===1)return me._result.default;throw me._result}var xe=typeof reportError=="function"?reportError:function(me){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof me=="object"&&me!==null&&typeof me.message=="string"?String(me.message):String(me),error:me});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",me);return}console.error(me)},Me={map:oe,forEach:function(me,Z,ge){oe(me,function(){Z.apply(this,arguments)},ge)},count:function(me){var Z=0;return oe(me,function(){Z++}),Z},toArray:function(me){return oe(me,function(Z){return Z})||[]},only:function(me){if(!ee(me))throw Error("React.Children.only expected to receive a single React element child.");return me}};return ir.Activity=m,ir.Children=Me,ir.Component=B,ir.Fragment=n,ir.Profiler=i,ir.PureComponent=Q,ir.StrictMode=r,ir.Suspense=d,ir.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,ir.__COMPILER_RUNTIME={__proto__:null,c:function(me){return $.H.useMemoCache(me)}},ir.cache=function(me){return function(){return me.apply(null,arguments)}},ir.cacheSignal=function(){return null},ir.cloneElement=function(me,Z,ge){if(me==null)throw Error("The argument must be a React element, but you passed "+me+".");var we=b({},me.props),pe=me.key;if(Z!=null)for(be in Z.key!==void 0&&(pe=""+Z.key),Z)!q.call(Z,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&Z.ref===void 0||(we[be]=Z[be]);var be=arguments.length-2;if(be===1)we.children=ge;else if(1<be){for(var je=Array(be),Ne=0;Ne<be;Ne++)je[Ne]=arguments[Ne+2];we.children=je}return X(me.type,pe,we)},ir.createContext=function(me){return me={$$typeof:A,_currentValue:me,_currentValue2:me,_threadCount:0,Provider:null,Consumer:null},me.Provider=me,me.Consumer={$$typeof:c,_context:me},me},ir.createElement=function(me,Z,ge){var we,pe={},be=null;if(Z!=null)for(we in Z.key!==void 0&&(be=""+Z.key),Z)q.call(Z,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(pe[we]=Z[we]);var je=arguments.length-2;if(je===1)pe.children=ge;else if(1<je){for(var Ne=Array(je),Je=0;Je<je;Je++)Ne[Je]=arguments[Je+2];pe.children=Ne}if(me&&me.defaultProps)for(we in je=me.defaultProps,je)pe[we]===void 0&&(pe[we]=je[we]);return X(me,be,pe)},ir.createRef=function(){return{current:null}},ir.forwardRef=function(me){return{$$typeof:u,render:me}},ir.isValidElement=ee,ir.lazy=function(me){return{$$typeof:o,_payload:{_status:-1,_result:me},_init:se}},ir.memo=function(me,Z){return{$$typeof:h,type:me,compare:Z===void 0?null:Z}},ir.startTransition=function(me){var Z=$.T,ge={};$.T=ge;try{var we=me(),pe=$.S;pe!==null&&pe(ge,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(J,xe)}catch(be){xe(be)}finally{Z!==null&&ge.types!==null&&(Z.types=ge.types),$.T=Z}},ir.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},ir.use=function(me){return $.H.use(me)},ir.useActionState=function(me,Z,ge){return $.H.useActionState(me,Z,ge)},ir.useCallback=function(me,Z){return $.H.useCallback(me,Z)},ir.useContext=function(me){return $.H.useContext(me)},ir.useDebugValue=function(){},ir.useDeferredValue=function(me,Z){return $.H.useDeferredValue(me,Z)},ir.useEffect=function(me,Z){return $.H.useEffect(me,Z)},ir.useEffectEvent=function(me){return $.H.useEffectEvent(me)},ir.useId=function(){return $.H.useId()},ir.useImperativeHandle=function(me,Z,ge){return $.H.useImperativeHandle(me,Z,ge)},ir.useInsertionEffect=function(me,Z){return $.H.useInsertionEffect(me,Z)},ir.useLayoutEffect=function(me,Z){return $.H.useLayoutEffect(me,Z)},ir.useMemo=function(me,Z){return $.H.useMemo(me,Z)},ir.useOptimistic=function(me,Z){return $.H.useOptimistic(me,Z)},ir.useReducer=function(me,Z,ge){return $.H.useReducer(me,Z,ge)},ir.useRef=function(me){return $.H.useRef(me)},ir.useState=function(me){return $.H.useState(me)},ir.useSyncExternalStore=function(me,Z,ge){return $.H.useSyncExternalStore(me,Z,ge)},ir.useTransition=function(){return $.H.useTransition()},ir.version="19.2.0",ir}var kw;function sx(){return kw||(kw=1,S0.exports=B3()),S0.exports}var N0={exports:{}},Mo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw;function C3(){if(Hw)return Mo;Hw=1;var t=sx();function s(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)h+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(s(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function c(d,h,o){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:h,implementation:o}}var A=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Mo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Mo.createPortal=function(d,h){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(s(299));return c(d,h,null,o)},Mo.flushSync=function(d){var h=A.T,o=r.p;try{if(A.T=null,r.p=2,d)return d()}finally{A.T=h,r.p=o,r.d.f()}},Mo.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},Mo.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Mo.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var o=h.as,m=u(o,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,p=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;o==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:p}):o==="script"&&r.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:p,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Mo.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var o=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:o,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},Mo.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var o=h.as,m=u(o,h.crossOrigin);r.d.L(d,o,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Mo.preloadModule=function(d,h){if(typeof d=="string")if(h){var o=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:o,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},Mo.requestFormReset=function(d){r.d.r(d)},Mo.unstable_batchedUpdates=function(d,h){return d(h)},Mo.useFormState=function(d,h,o){return A.H.useFormState(d,h,o)},Mo.useFormStatus=function(){return A.H.useHostTransitionStatus()},Mo.version="19.2.0",Mo}var Kw;function tC(){if(Kw)return N0.exports;Kw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),N0.exports=C3(),N0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw;function E3(){if(zw)return Up;zw=1;var t=N3(),s=sx(),n=tC();function r(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function c(a){var l=a,f=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(f=l.return),a=l.return;while(a)}return l.tag===3?f:null}function A(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function u(a){if(a.tag===31){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function d(a){if(c(a)!==a)throw Error(r(188))}function h(a){var l=a.alternate;if(!l){if(l=c(a),l===null)throw Error(r(188));return l!==a?null:a}for(var f=a,g=l;;){var D=f.return;if(D===null)break;var H=D.alternate;if(H===null){if(g=D.return,g!==null){f=g;continue}break}if(D.child===H.child){for(H=D.child;H;){if(H===f)return d(D),a;if(H===g)return d(D),l;H=H.sibling}throw Error(r(188))}if(f.return!==g.return)f=D,g=H;else{for(var Ae=!1,Oe=D.child;Oe;){if(Oe===f){Ae=!0,f=D,g=H;break}if(Oe===g){Ae=!0,g=D,f=H;break}Oe=Oe.sibling}if(!Ae){for(Oe=H.child;Oe;){if(Oe===f){Ae=!0,f=H,g=D;break}if(Oe===g){Ae=!0,g=H,f=D;break}Oe=Oe.sibling}if(!Ae)throw Error(r(189))}}if(f.alternate!==g)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?a:l}function o(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=o(a),l!==null)return l;a=a.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function le(a){return a===null||typeof a!="object"?null:(a=ee&&a[ee]||a["@@iterator"],typeof a=="function"?a:null)}var ue=Symbol.for("react.client.reference");function te(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ue?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case B:return"Profiler";case w:return"StrictMode";case z:return"Suspense";case J:return"SuspenseList";case X:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case j:return"Portal";case Q:return a.displayName||"Context";case L:return(a._context.displayName||"Context")+".Consumer";case k:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case $:return l=a.displayName||null,l!==null?l:te(a.type)||"Memo";case q:l=a._payload,a=a._init;try{return te(a(l))}catch{}}return null}var re=Array.isArray,ne=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},xe=[],Me=-1;function me(a){return{current:a}}function Z(a){0>Me||(a.current=xe[Me],xe[Me]=null,Me--)}function ge(a,l){Me++,xe[Me]=a.current,a.current=l}var we=me(null),pe=me(null),be=me(null),je=me(null);function Ne(a,l){switch(ge(be,l),ge(pe,a),ge(we,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?rw(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=rw(l),a=aw(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Z(we),ge(we,a)}function Je(){Z(we),Z(pe),Z(be)}function Qe(a){a.memoizedState!==null&&ge(je,a);var l=we.current,f=aw(l,a.type);l!==f&&(ge(pe,a),ge(we,f))}function pt(a){pe.current===a&&(Z(we),Z(pe)),je.current===a&&(Z(je),Tp._currentValue=se)}var Te,Ce;function _e(a){if(Te===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Te=l&&l[1]||"",Ce=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+a+Ce}var de=!1;function dt(a,l){if(!a||de)return"";de=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var As=function(){throw Error()};if(Object.defineProperty(As.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(As,[])}catch($t){var Qt=$t}Reflect.construct(a,[],As)}else{try{As.call()}catch($t){Qt=$t}a.call(As.prototype)}}else{try{throw Error()}catch($t){Qt=$t}(As=a())&&typeof As.catch=="function"&&As.catch(function(){})}}catch($t){if($t&&Qt&&typeof $t.stack=="string")return[$t.stack,Qt.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=g.DetermineComponentFrameRoot(),Ae=H[0],Oe=H[1];if(Ae&&Oe){var At=Ae.split(`
`),Ut=Oe.split(`
`);for(D=g=0;g<At.length&&!At[g].includes("DetermineComponentFrameRoot");)g++;for(;D<Ut.length&&!Ut[D].includes("DetermineComponentFrameRoot");)D++;if(g===At.length||D===Ut.length)for(g=At.length-1,D=Ut.length-1;1<=g&&0<=D&&At[g]!==Ut[D];)D--;for(;1<=g&&0<=D;g--,D--)if(At[g]!==Ut[D]){if(g!==1||D!==1)do if(g--,D--,0>D||At[g]!==Ut[D]){var ts=`
`+At[g].replace(" at new "," at ");return a.displayName&&ts.includes("<anonymous>")&&(ts=ts.replace("<anonymous>",a.displayName)),ts}while(1<=g&&0<=D);break}}}finally{de=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?_e(f):""}function st(a,l){switch(a.tag){case 26:case 27:case 5:return _e(a.type);case 16:return _e("Lazy");case 13:return a.child!==l&&l!==null?_e("Suspense Fallback"):_e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return dt(a.type,!1);case 11:return dt(a.type.render,!1);case 1:return dt(a.type,!0);case 31:return _e("Activity");default:return""}}function nt(a){try{var l="",f=null;do l+=st(a,f),f=a,a=a.return;while(a);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var at=Object.prototype.hasOwnProperty,Dt=t.unstable_scheduleCallback,yt=t.unstable_cancelCallback,qe=t.unstable_shouldYield,Tt=t.unstable_requestPaint,ns=t.unstable_now,Ts=t.unstable_getCurrentPriorityLevel,vs=t.unstable_ImmediatePriority,Ns=t.unstable_UserBlockingPriority,et=t.unstable_NormalPriority,De=t.unstable_LowPriority,rt=t.unstable_IdlePriority,mt=t.log,ls=t.unstable_setDisableYieldValue,Ht=null,Kt=null;function lt(a){if(typeof mt=="function"&&ls(a),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Ht,a)}catch{}}var Gt=Math.clz32?Math.clz32:rs,Yt=Math.log,Cs=Math.LN2;function rs(a){return a>>>=0,a===0?32:31-(Yt(a)/Cs|0)|0}var Is=256,on=262144,ws=4194304;function St(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function qt(a,l,f){var g=a.pendingLanes;if(g===0)return 0;var D=0,H=a.suspendedLanes,Ae=a.pingedLanes;a=a.warmLanes;var Oe=g&134217727;return Oe!==0?(g=Oe&~H,g!==0?D=St(g):(Ae&=Oe,Ae!==0?D=St(Ae):f||(f=Oe&~a,f!==0&&(D=St(f))))):(Oe=g&~H,Oe!==0?D=St(Oe):Ae!==0?D=St(Ae):f||(f=g&~a,f!==0&&(D=St(f)))),D===0?0:l!==0&&l!==D&&(l&H)===0&&(H=D&-D,f=l&-l,H>=f||H===32&&(f&4194048)!==0)?l:D}function Pt(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function gs(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rs(){var a=ws;return ws<<=1,(ws&62914560)===0&&(ws=4194304),a}function Nn(a){for(var l=[],f=0;31>f;f++)l.push(a);return l}function ys(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Ln(a,l,f,g,D,H){var Ae=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var Oe=a.entanglements,At=a.expirationTimes,Ut=a.hiddenUpdates;for(f=Ae&~f;0<f;){var ts=31-Gt(f),As=1<<ts;Oe[ts]=0,At[ts]=-1;var Qt=Ut[ts];if(Qt!==null)for(Ut[ts]=null,ts=0;ts<Qt.length;ts++){var $t=Qt[ts];$t!==null&&($t.lane&=-536870913)}f&=~As}g!==0&&Zs(a,g,0),H!==0&&D===0&&a.tag!==0&&(a.suspendedLanes|=H&~(Ae&~l))}function Zs(a,l,f){a.pendingLanes|=l,a.suspendedLanes&=~l;var g=31-Gt(l);a.entangledLanes|=l,a.entanglements[g]=a.entanglements[g]|1073741824|f&261930}function En(a,l){var f=a.entangledLanes|=l;for(a=a.entanglements;f;){var g=31-Gt(f),D=1<<g;D&l|a[g]&l&&(a[g]|=l),f&=~D}}function Ls(a,l){var f=l&-l;return f=(f&42)!==0?1:Bs(f),(f&(a.suspendedLanes|l))!==0?0:f}function Bs(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ms(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Os(){var a=oe.p;return a!==0?a:(a=window.event,a===void 0?32:Ew(a.type))}function ot(a,l){var f=oe.p;try{return oe.p=a,l()}finally{oe.p=f}}var Rt=Math.random().toString(36).slice(2),Mt="__reactFiber$"+Rt,kt="__reactProps$"+Rt,fs="__reactContainer$"+Rt,ms="__reactEvents$"+Rt,Ds="__reactListeners$"+Rt,js="__reactHandles$"+Rt,Lt="__reactResources$"+Rt,Hs="__reactMarker$"+Rt;function Wr(a){delete a[Mt],delete a[kt],delete a[ms],delete a[Ds],delete a[js]}function sr(a){var l=a[Mt];if(l)return l;for(var f=a.parentNode;f;){if(l=f[fs]||f[Mt]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(a=uw(a);a!==null;){if(f=a[Mt])return f;a=uw(a)}return l}a=f,f=a.parentNode}return null}function ds(a){if(a=a[Mt]||a[fs]){var l=a.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return a}return null}function mn(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(r(33))}function cr(a){var l=a[Lt];return l||(l=a[Lt]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function nr(a){a[Hs]=!0}var sn=new Set,gn={};function qn(a,l){Yr(a,l),Yr(a+"Capture",l)}function Yr(a,l){for(gn[a]=l,a=0;a<l.length;a++)sn.add(l[a])}var Gr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ra={},gr={};function Ks(a){return at.call(gr,a)?!0:at.call(ra,a)?!1:Gr.test(a)?gr[a]=!0:(ra[a]=!0,!1)}function en(a,l,f){if(Ks(l))if(f===null)a.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+f)}}function Es(a,l,f){if(f===null)a.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+f)}}function rn(a,l,f,g){if(g===null)a.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(l,f,""+g)}}function Ps(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function wr(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ze(a,l,f){var g=Object.getOwnPropertyDescriptor(a.constructor.prototype,l);if(!a.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var D=g.get,H=g.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return D.call(this)},set:function(Ae){f=""+Ae,H.call(this,Ae)}}),Object.defineProperty(a,l,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(Ae){f=""+Ae},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function us(a){if(!a._valueTracker){var l=wr(a)?"checked":"value";a._valueTracker=Ze(a,l,""+a[l])}}function is(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var f=l.getValue(),g="";return a&&(g=wr(a)?a.checked?"true":"false":a.value),a=g,a!==f?(l.setValue(a),!0):!1}function yn(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Jn=/[\n"\\]/g;function zn(a){return a.replace(Jn,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ua(a,l,f,g,D,H,Ae,Oe){a.name="",Ae!=null&&typeof Ae!="function"&&typeof Ae!="symbol"&&typeof Ae!="boolean"?a.type=Ae:a.removeAttribute("type"),l!=null?Ae==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Ps(l)):a.value!==""+Ps(l)&&(a.value=""+Ps(l)):Ae!=="submit"&&Ae!=="reset"||a.removeAttribute("value"),l!=null?ha(a,Ae,Ps(l)):f!=null?ha(a,Ae,Ps(f)):g!=null&&a.removeAttribute("value"),D==null&&H!=null&&(a.defaultChecked=!!H),D!=null&&(a.checked=D&&typeof D!="function"&&typeof D!="symbol"),Oe!=null&&typeof Oe!="function"&&typeof Oe!="symbol"&&typeof Oe!="boolean"?a.name=""+Ps(Oe):a.removeAttribute("name")}function ga(a,l,f,g,D,H,Ae,Oe){if(H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(a.type=H),l!=null||f!=null){if(!(H!=="submit"&&H!=="reset"||l!=null)){us(a);return}f=f!=null?""+Ps(f):"",l=l!=null?""+Ps(l):f,Oe||l===a.value||(a.value=l),a.defaultValue=l}g=g??D,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=Oe?a.checked:!!g,a.defaultChecked=!!g,Ae!=null&&typeof Ae!="function"&&typeof Ae!="symbol"&&typeof Ae!="boolean"&&(a.name=Ae),us(a)}function ha(a,l,f){l==="number"&&yn(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function Tr(a,l,f,g){if(a=a.options,l){l={};for(var D=0;D<f.length;D++)l["$"+f[D]]=!0;for(f=0;f<a.length;f++)D=l.hasOwnProperty("$"+a[f].value),a[f].selected!==D&&(a[f].selected=D),D&&g&&(a[f].defaultSelected=!0)}else{for(f=""+Ps(f),l=null,D=0;D<a.length;D++){if(a[D].value===f){a[D].selected=!0,g&&(a[D].defaultSelected=!0);return}l!==null||a[D].disabled||(l=a[D])}l!==null&&(l.selected=!0)}}function $a(a,l,f){if(l!=null&&(l=""+Ps(l),l!==a.value&&(a.value=l),f==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=f!=null?""+Ps(f):""}function ya(a,l,f,g){if(l==null){if(g!=null){if(f!=null)throw Error(r(92));if(re(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),l=f}f=Ps(l),a.defaultValue=f,g=a.textContent,g===f&&g!==""&&g!==null&&(a.value=g),us(a)}function rr(a,l){if(l){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=l;return}}a.textContent=l}var oa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ga(a,l,f){var g=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":g?a.setProperty(l,f):typeof f!="number"||f===0||oa.has(l)?l==="float"?a.cssFloat=f:a[l]=(""+f).trim():a[l]=f+"px"}function fi(a,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(a=a.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var D in l)g=l[D],l.hasOwnProperty(D)&&f[D]!==g&&Ga(a,D,g)}else for(var H in l)l.hasOwnProperty(H)&&Ga(a,H,l[H])}function xa(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ie=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),G=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ve(a){return G.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Le(){}var Xe=null;function vt(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ut=null,Pe=null;function Bt(a){var l=ds(a);if(l&&(a=l.stateNode)){var f=a[kt]||null;e:switch(a=l.stateNode,l.type){case"input":if(ua(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+zn(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var g=f[l];if(g!==a&&g.form===a.form){var D=g[kt]||null;if(!D)throw Error(r(90));ua(g,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(l=0;l<f.length;l++)g=f[l],g.form===a.form&&is(g)}break e;case"textarea":$a(a,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&Tr(a,!!f.multiple,l,!1)}}}var _t=!1;function xn(a,l,f){if(_t)return a(l,f);_t=!0;try{var g=a(l);return g}finally{if(_t=!1,(ut!==null||Pe!==null)&&(eo(),ut&&(l=ut,a=Pe,Pe=ut=null,Bt(l),a)))for(l=0;l<a.length;l++)Bt(a[l])}}function Dn(a,l){var f=a.stateNode;if(f===null)return null;var g=f[kt]||null;if(g===null)return null;f=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qs=!1;if(ps)try{var Qn={};Object.defineProperty(Qn,"passive",{get:function(){Qs=!0}}),window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch{Qs=!1}var kn=null,Wn=null,Xr=null;function v(){if(Xr)return Xr;var a,l=Wn,f=l.length,g,D="value"in kn?kn.value:kn.textContent,H=D.length;for(a=0;a<f&&l[a]===D[a];a++);var Ae=f-a;for(g=1;g<=Ae&&l[f-g]===D[H-g];g++);return Xr=D.slice(a,1<g?1-g:void 0)}function N(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function x(){return!0}function I(){return!1}function F(a){function l(f,g,D,H,Ae){this._reactName=f,this._targetInst=D,this.type=g,this.nativeEvent=H,this.target=Ae,this.currentTarget=null;for(var Oe in a)a.hasOwnProperty(Oe)&&(f=a[Oe],this[Oe]=f?f(H):H[Oe]);return this.isDefaultPrevented=(H.defaultPrevented!=null?H.defaultPrevented:H.returnValue===!1)?x:I,this.isPropagationStopped=I,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=x)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=x)},persist:function(){},isPersistent:x}),l}var _={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},U=F(_),P=m({},_,{view:0,detail:0}),K=F(P),ae,Fe,Ye,tt=m({},P,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ye&&(Ye&&a.type==="mousemove"?(ae=a.screenX-Ye.screenX,Fe=a.screenY-Ye.screenY):Fe=ae=0,Ye=a),ae)},movementY:function(a){return"movementY"in a?a.movementY:Fe}}),Ft=F(tt),Zt=m({},tt,{dataTransfer:0}),as=F(Zt),xs=m({},P,{relatedTarget:0}),Gs=F(xs),Rn=m({},_,{animationName:0,elapsedTime:0,pseudoElement:0}),V=F(Rn),ye=m({},_,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),He=F(ye),it=m({},_,{data:0}),bt=F(it),es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=nn[a])?!!l[a]:!1}function _n(){return hn}var Zn=m({},P,{key:function(a){if(a.key){var l=es[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=N(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?hs[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(a){return a.type==="keypress"?N(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?N(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Fr=F(Zn),Ra=m({},tt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qa=F(Ra),Jr=m({},P,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n}),pi=F(Jr),si=m({},_,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bi=F(si),Rl=m({},tt,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Yo=F(Rl),Ol=m({},_,{newState:0,oldState:0}),kd=F(Ol),rd=[9,13,27,32],jo=ps&&"CompositionEvent"in window,wo=null;ps&&"documentMode"in document&&(wo=document.documentMode);var Zl=ps&&"TextEvent"in window&&!wo,io=ps&&(!jo||wo&&8<wo&&11>=wo),Oa=" ",yr=!1;function ec(a,l){switch(a){case"keyup":return rd.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tc(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Xo=!1;function ni(a,l){switch(a){case"compositionend":return tc(l);case"keypress":return l.which!==32?null:(yr=!0,Oa);case"textInput":return a=l.data,a===Oa&&yr?null:a;default:return null}}function vi(a,l){if(Xo)return a==="compositionend"||!jo&&ec(a,l)?(a=v(),Xr=Wn=kn=null,Xo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return io&&l.locale!=="ko"?null:l.data;default:return null}}var ad={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function So(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!ad[a.type]:l==="textarea"}function Ur(a,l,f,g){ut?Pe?Pe.push(g):Pe=[g]:ut=g,l=pg(l,"onChange"),0<l.length&&(f=new U("onChange","change",null,f,g),a.push({event:f,listeners:l}))}var No=null,va=null;function Ec(a){Jj(a,0)}function bi(a){var l=mn(a);if(is(l))return a}function Bo(a,l){if(a==="change")return l}var lr=!1;if(ps){var _i;if(ps){var Jo="oninput"in document;if(!Jo){var Zo=document.createElement("div");Zo.setAttribute("oninput","return;"),Jo=typeof Zo.oninput=="function"}_i=Jo}else _i=!1;lr=_i&&(!document.documentMode||9<document.documentMode)}function cl(){No&&(No.detachEvent("onpropertychange",Ul),va=No=null)}function Ul(a){if(a.propertyName==="value"&&bi(va)){var l=[];Ur(l,va,a,vt(a)),xn(Ec,l)}}function Tc(a,l,f){a==="focusin"?(cl(),No=l,va=f,No.attachEvent("onpropertychange",Ul)):a==="focusout"&&cl()}function Ha(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return bi(va)}function qi(a,l){if(a==="click")return bi(l)}function Ci(a,l){if(a==="input"||a==="change")return bi(l)}function Ei(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Sr=typeof Object.is=="function"?Object.is:Ei;function Mi(a,l){if(Sr(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var f=Object.keys(a),g=Object.keys(l);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var D=f[g];if(!at.call(l,D)||!Sr(a[D],l[D]))return!1}return!0}function Fc(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ic(a,l){var f=Fc(a);a=0;for(var g;f;){if(f.nodeType===3){if(g=a+f.textContent.length,a<=l&&g>=l)return{node:f,offset:l-a};a=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Fc(f)}}function el(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?el(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function dl(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=yn(a.document);l instanceof a.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)a=l.contentWindow;else break;l=yn(a.document)}return l}function Al(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var tl=ps&&"documentMode"in document&&11>=document.documentMode,Wa=null,Ll=null,Pi=null,Wi=!1;function Lr(a,l,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Wi||Wa==null||Wa!==yn(g)||(g=Wa,"selectionStart"in g&&Al(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Pi&&Mi(Pi,g)||(Pi=g,g=pg(Ll,"onSelect"),0<g.length&&(l=new U("onSelect","select",null,l,f),a.push({event:l,listeners:g}),l.target=Wa)))}function Ir(a,l){var f={};return f[a.toLowerCase()]=l.toLowerCase(),f["Webkit"+a]="webkit"+l,f["Moz"+a]="moz"+l,f}var fa={animationend:Ir("Animation","AnimationEnd"),animationiteration:Ir("Animation","AnimationIteration"),animationstart:Ir("Animation","AnimationStart"),transitionrun:Ir("Transition","TransitionRun"),transitionstart:Ir("Transition","TransitionStart"),transitioncancel:Ir("Transition","TransitionCancel"),transitionend:Ir("Transition","TransitionEnd")},Pr={},sl={};ps&&(sl=document.createElement("div").style,"AnimationEvent"in window||(delete fa.animationend.animation,delete fa.animationiteration.animation,delete fa.animationstart.animation),"TransitionEvent"in window||delete fa.transitionend.transition);function nl(a){if(Pr[a])return Pr[a];if(!fa[a])return a;var l=fa[a],f;for(f in l)if(l.hasOwnProperty(f)&&f in sl)return Pr[a]=l[f];return a}var Rc=nl("animationend"),sc=nl("animationiteration"),ju=nl("animationstart"),wu=nl("transitionrun"),Su=nl("transitionstart"),Nu=nl("transitioncancel"),yA=nl("transitionend"),xA=new Map,nc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nc.push("scrollEnd");function oo(a,l){xA.set(a,l),qn(l,[a])}var id=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},lo=[],ul=0,vA=0;function Hd(){for(var a=ul,l=vA=ul=0;l<a;){var f=lo[l];lo[l++]=null;var g=lo[l];lo[l++]=null;var D=lo[l];lo[l++]=null;var H=lo[l];if(lo[l++]=null,g!==null&&D!==null){var Ae=g.pending;Ae===null?D.next=D:(D.next=Ae.next,Ae.next=D),g.pending=D}H!==0&&Kd(f,D,H)}}function Oc(a,l,f,g){lo[ul++]=a,lo[ul++]=l,lo[ul++]=f,lo[ul++]=g,vA|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function bA(a,l,f,g){return Oc(a,l,f,g),ki(a)}function hl(a,l){return Oc(a,null,null,l),ki(a)}function Kd(a,l,f){a.lanes|=f;var g=a.alternate;g!==null&&(g.lanes|=f);for(var D=!1,H=a.return;H!==null;)H.childLanes|=f,g=H.alternate,g!==null&&(g.childLanes|=f),H.tag===22&&(a=H.stateNode,a===null||a._visibility&1||(D=!0)),a=H,H=H.return;return a.tag===3?(H=a.stateNode,D&&l!==null&&(D=31-Gt(f),a=H.hiddenUpdates,g=a[D],g===null?a[D]=[l]:g.push(l),l.lane=f|536870912),H):null}function ki(a){if(50<pr)throw pr=0,Er=null,Error(r(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var Ti={};function jA(a,l,f,g){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(a,l,f,g){return new jA(a,l,f,g)}function Dl(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Co(a,l){var f=a.alternate;return f===null?(f=Hi(a.tag,l,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=l,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,l=a.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function zd(a,l){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,l=f.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function Ql(a,l,f,g,D,H){var Ae=0;if(g=a,typeof a=="function")Dl(a)&&(Ae=1);else if(typeof a=="string")Ae=l3(a,f,we.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case X:return a=Hi(31,f,l,D),a.elementType=X,a.lanes=H,a;case b:return rc(f.children,D,H,l);case w:Ae=8,D|=24;break;case B:return a=Hi(12,f,l,D|2),a.elementType=B,a.lanes=H,a;case z:return a=Hi(13,f,l,D),a.elementType=z,a.lanes=H,a;case J:return a=Hi(19,f,l,D),a.elementType=J,a.lanes=H,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Q:Ae=10;break e;case L:Ae=9;break e;case k:Ae=11;break e;case $:Ae=14;break e;case q:Ae=16,g=null;break e}Ae=29,f=Error(r(130,a===null?"null":typeof a,"")),g=null}return l=Hi(Ae,f,l,D),l.elementType=a,l.type=g,l.lanes=H,l}function rc(a,l,f,g){return a=Hi(7,a,g,l),a.lanes=f,a}function Vd(a,l,f){return a=Hi(6,a,null,l),a.lanes=f,a}function wA(a){var l=Hi(18,null,null,0);return l.stateNode=a,l}function od(a,l,f){return l=Hi(4,a.children!==null?a.children:[],a.key,l),l.lanes=f,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var Uc=new WeakMap;function Eo(a,l){if(typeof a=="object"&&a!==null){var f=Uc.get(a);return f!==void 0?f:(l={value:a,source:l,stack:nt(l)},Uc.set(a,l),l)}return{value:a,source:l,stack:nt(l)}}var ld=[],Lc=0,SA=null,ac=0,To=[],Fo=0,ic=null,Io=1,Yi="";function co(a,l){ld[Lc++]=ac,ld[Lc++]=SA,SA=a,ac=l}function Fh(a,l,f){To[Fo++]=Io,To[Fo++]=Yi,To[Fo++]=ic,ic=a;var g=Io;a=Yi;var D=32-Gt(g)-1;g&=~(1<<D),f+=1;var H=32-Gt(l)+D;if(30<H){var Ae=D-D%5;H=(g&(1<<Ae)-1).toString(32),g>>=Ae,D-=Ae,Io=1<<32-Gt(l)+D|f<<D|g,Yi=H+a}else Io=1<<H|f<<D|g,Yi=a}function Bu(a){a.return!==null&&(co(a,1),Fh(a,1,0))}function NA(a){for(;a===SA;)SA=ld[--Lc],ld[Lc]=null,ac=ld[--Lc],ld[Lc]=null;for(;a===ic;)ic=To[--Fo],To[Fo]=null,Yi=To[--Fo],To[Fo]=null,Io=To[--Fo],To[Fo]=null}function Ih(a,l){To[Fo++]=Io,To[Fo++]=Yi,To[Fo++]=ic,Io=l.id,Yi=l.overflow,ic=a}var Fi=null,ba=null,xr=!1,Xi=null,Ka=!1,no=Error(r(519));function oc(a){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l(Eo(l,a)),no}function Cu(a){var l=a.stateNode,f=a.type,g=a.memoizedProps;switch(l[Mt]=a,l[kt]=g,f){case"dialog":Or("cancel",l),Or("close",l);break;case"iframe":case"object":case"embed":Or("load",l);break;case"video":case"audio":for(f=0;f<Sp.length;f++)Or(Sp[f],l);break;case"source":Or("error",l);break;case"img":case"image":case"link":Or("error",l),Or("load",l);break;case"details":Or("toggle",l);break;case"input":Or("invalid",l),ga(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Or("invalid",l);break;case"textarea":Or("invalid",l),ya(l,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||g.suppressHydrationWarning===!0||sw(l.textContent,f)?(g.popover!=null&&(Or("beforetoggle",l),Or("toggle",l)),g.onScroll!=null&&Or("scroll",l),g.onScrollEnd!=null&&Or("scrollend",l),g.onClick!=null&&(l.onclick=Le),l=!0):l=!1,l||oc(a,!0)}function fl(a){for(Fi=a.return;Fi;)switch(Fi.tag){case 5:case 31:case 13:Ka=!1;return;case 27:case 3:Ka=!0;return;default:Fi=Fi.return}}function Ii(a){if(a!==Fi)return!1;if(!xr)return fl(a),xr=!0,!1;var l=a.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||a0(a.type,a.memoizedProps)),f=!f),f&&ba&&oc(a),fl(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));ba=Aw(a)}else if(l===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));ba=Aw(a)}else l===27?(l=ba,GA(a.type)?(a=d0,d0=null,ba=a):ba=l):ba=Fi?gc(a.stateNode.nextSibling):null;return!0}function Dc(){ba=Fi=null,xr=!1}function $d(){var a=Xi;return a!==null&&(ht===null?ht=a:ht.push.apply(ht,a),Xi=null),a}function _l(a){Xi===null?Xi=[a]:Xi.push(a)}var BA=me(null),lc=null,pl=null;function cc(a,l,f){ge(BA,l._currentValue),l._currentValue=f}function Ro(a){a._currentValue=BA.current,Z(BA)}function cd(a,l,f){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===f)break;a=a.return}}function ml(a,l,f,g){var D=a.child;for(D!==null&&(D.return=a);D!==null;){var H=D.dependencies;if(H!==null){var Ae=D.child;H=H.firstContext;e:for(;H!==null;){var Oe=H;H=D;for(var At=0;At<l.length;At++)if(Oe.context===l[At]){H.lanes|=f,Oe=H.alternate,Oe!==null&&(Oe.lanes|=f),cd(H.return,f,a),g||(Ae=null);break e}H=Oe.next}}else if(D.tag===18){if(Ae=D.return,Ae===null)throw Error(r(341));Ae.lanes|=f,H=Ae.alternate,H!==null&&(H.lanes|=f),cd(Ae,f,a),Ae=null}else Ae=D.child;if(Ae!==null)Ae.return=D;else for(Ae=D;Ae!==null;){if(Ae===a){Ae=null;break}if(D=Ae.sibling,D!==null){D.return=Ae.return,Ae=D;break}Ae=Ae.return}D=Ae}}function dc(a,l,f,g){a=null;for(var D=l,H=!1;D!==null;){if(!H){if((D.flags&524288)!==0)H=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var Ae=D.alternate;if(Ae===null)throw Error(r(387));if(Ae=Ae.memoizedProps,Ae!==null){var Oe=D.type;Sr(D.pendingProps.value,Ae.value)||(a!==null?a.push(Oe):a=[Oe])}}else if(D===je.current){if(Ae=D.alternate,Ae===null)throw Error(r(387));Ae.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(a!==null?a.push(Tp):a=[Tp])}D=D.return}a!==null&&ml(l,a,f,g),l.flags|=262144}function CA(a){for(a=a.firstContext;a!==null;){if(!Sr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ac(a){lc=a,pl=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Ri(a){return Rh(lc,a)}function EA(a,l){return lc===null&&Ac(a),Rh(a,l)}function Rh(a,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},pl===null){if(a===null)throw Error(r(308));pl=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else pl=pl.next=l;return f}var Vf=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(f,g){a.push(g)}};this.abort=function(){l.aborted=!0,a.forEach(function(f){return f()})}},$f=t.unstable_scheduleCallback,Gf=t.unstable_NormalPriority,Ya={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dd(){return{controller:new Vf,data:new Map,refCount:0}}function Gd(a){a.refCount--,a.refCount===0&&$f(Gf,function(){a.controller.abort()})}var Ad=null,TA=0,E=0,M=null;function W(a,l){if(Ad===null){var f=Ad=[];TA=0,E=Yx(),M={status:"pending",value:void 0,then:function(g){f.push(g)}}}return TA++,l.then(ce,ce),l}function ce(){if(--TA===0&&Ad!==null){M!==null&&(M.status="fulfilled");var a=Ad;Ad=null,E=0,M=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function Se(a,l){var f=[],g={status:"pending",value:null,reason:null,then:function(D){f.push(D)}};return a.then(function(){g.status="fulfilled",g.value=l;for(var D=0;D<f.length;D++)(0,f[D])(l)},function(D){for(g.status="rejected",g.reason=D,D=0;D<f.length;D++)(0,f[D])(void 0)}),g}var Ie=ne.S;ne.S=function(a,l){Jt=ns(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&W(a,l),Ie!==null&&Ie(a,l)};var Re=me(null);function Ue(){var a=Re.current;return a!==null?a:Sa.pooledCache}function ke(a,l){l===null?ge(Re,Re.current):ge(Re,l.pool)}function We(){var a=Ue();return a===null?null:{parent:Ya._currentValue,pool:a}}var ft=Error(r(460)),It=Error(r(474)),Ge=Error(r(542)),xt={then:function(){}};function jt(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Xt(a,l,f){switch(f=a[f],f===void 0?a.push(l):f!==l&&(l.then(Le,Le),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,bs(a),a;default:if(typeof l.status=="string")l.then(Le,Le);else{if(a=Sa,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=l,a.status="pending",a.then(function(g){if(l.status==="pending"){var D=l;D.status="fulfilled",D.value=g}},function(g){if(l.status==="pending"){var D=l;D.status="rejected",D.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,bs(a),a}throw Wt=l,ft}}function Et(a){try{var l=a._init;return l(a._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Wt=f,ft):f}}var Wt=null;function ss(){if(Wt===null)throw Error(r(459));var a=Wt;return Wt=null,a}function bs(a){if(a===ft||a===Ge)throw Error(r(483))}var cs=null,an=0;function Ys(a){var l=an;return an+=1,cs===null&&(cs=[]),Xt(cs,a,l)}function Hn(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function tn(a,l){throw l.$$typeof===y?Error(r(525)):(a=Object.prototype.toString.call(l),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function fr(a){function l(Nt,gt){if(a){var Ot=Nt.deletions;Ot===null?(Nt.deletions=[gt],Nt.flags|=16):Ot.push(gt)}}function f(Nt,gt){if(!a)return null;for(;gt!==null;)l(Nt,gt),gt=gt.sibling;return null}function g(Nt){for(var gt=new Map;Nt!==null;)Nt.key!==null?gt.set(Nt.key,Nt):gt.set(Nt.index,Nt),Nt=Nt.sibling;return gt}function D(Nt,gt){return Nt=Co(Nt,gt),Nt.index=0,Nt.sibling=null,Nt}function H(Nt,gt,Ot){return Nt.index=Ot,a?(Ot=Nt.alternate,Ot!==null?(Ot=Ot.index,Ot<gt?(Nt.flags|=67108866,gt):Ot):(Nt.flags|=67108866,gt)):(Nt.flags|=1048576,gt)}function Ae(Nt){return a&&Nt.alternate===null&&(Nt.flags|=67108866),Nt}function Oe(Nt,gt,Ot,os){return gt===null||gt.tag!==6?(gt=Vd(Ot,Nt.mode,os),gt.return=Nt,gt):(gt=D(gt,Ot),gt.return=Nt,gt)}function At(Nt,gt,Ot,os){var On=Ot.type;return On===b?ts(Nt,gt,Ot.props.children,os,Ot.key):gt!==null&&(gt.elementType===On||typeof On=="object"&&On!==null&&On.$$typeof===q&&Et(On)===gt.type)?(gt=D(gt,Ot.props),Hn(gt,Ot),gt.return=Nt,gt):(gt=Ql(Ot.type,Ot.key,Ot.props,null,Nt.mode,os),Hn(gt,Ot),gt.return=Nt,gt)}function Ut(Nt,gt,Ot,os){return gt===null||gt.tag!==4||gt.stateNode.containerInfo!==Ot.containerInfo||gt.stateNode.implementation!==Ot.implementation?(gt=od(Ot,Nt.mode,os),gt.return=Nt,gt):(gt=D(gt,Ot.children||[]),gt.return=Nt,gt)}function ts(Nt,gt,Ot,os,On){return gt===null||gt.tag!==7?(gt=rc(Ot,Nt.mode,os,On),gt.return=Nt,gt):(gt=D(gt,Ot),gt.return=Nt,gt)}function As(Nt,gt,Ot){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return gt=Vd(""+gt,Nt.mode,Ot),gt.return=Nt,gt;if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case p:return Ot=Ql(gt.type,gt.key,gt.props,null,Nt.mode,Ot),Hn(Ot,gt),Ot.return=Nt,Ot;case j:return gt=od(gt,Nt.mode,Ot),gt.return=Nt,gt;case q:return gt=Et(gt),As(Nt,gt,Ot)}if(re(gt)||le(gt))return gt=rc(gt,Nt.mode,Ot,null),gt.return=Nt,gt;if(typeof gt.then=="function")return As(Nt,Ys(gt),Ot);if(gt.$$typeof===Q)return As(Nt,EA(Nt,gt),Ot);tn(Nt,gt)}return null}function Qt(Nt,gt,Ot,os){var On=gt!==null?gt.key:null;if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint")return On!==null?null:Oe(Nt,gt,""+Ot,os);if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case p:return Ot.key===On?At(Nt,gt,Ot,os):null;case j:return Ot.key===On?Ut(Nt,gt,Ot,os):null;case q:return Ot=Et(Ot),Qt(Nt,gt,Ot,os)}if(re(Ot)||le(Ot))return On!==null?null:ts(Nt,gt,Ot,os,null);if(typeof Ot.then=="function")return Qt(Nt,gt,Ys(Ot),os);if(Ot.$$typeof===Q)return Qt(Nt,gt,EA(Nt,Ot),os);tn(Nt,Ot)}return null}function $t(Nt,gt,Ot,os,On){if(typeof os=="string"&&os!==""||typeof os=="number"||typeof os=="bigint")return Nt=Nt.get(Ot)||null,Oe(gt,Nt,""+os,On);if(typeof os=="object"&&os!==null){switch(os.$$typeof){case p:return Nt=Nt.get(os.key===null?Ot:os.key)||null,At(gt,Nt,os,On);case j:return Nt=Nt.get(os.key===null?Ot:os.key)||null,Ut(gt,Nt,os,On);case q:return os=Et(os),$t(Nt,gt,Ot,os,On)}if(re(os)||le(os))return Nt=Nt.get(Ot)||null,ts(gt,Nt,os,On,null);if(typeof os.then=="function")return $t(Nt,gt,Ot,Ys(os),On);if(os.$$typeof===Q)return $t(Nt,gt,Ot,EA(gt,os),On);tn(gt,os)}return null}function ln(Nt,gt,Ot,os){for(var On=null,aa=null,pn=gt,Ar=gt=0,Qr=null;pn!==null&&Ar<Ot.length;Ar++){pn.index>Ar?(Qr=pn,pn=null):Qr=pn.sibling;var ia=Qt(Nt,pn,Ot[Ar],os);if(ia===null){pn===null&&(pn=Qr);break}a&&pn&&ia.alternate===null&&l(Nt,pn),gt=H(ia,gt,Ar),aa===null?On=ia:aa.sibling=ia,aa=ia,pn=Qr}if(Ar===Ot.length)return f(Nt,pn),xr&&co(Nt,Ar),On;if(pn===null){for(;Ar<Ot.length;Ar++)pn=As(Nt,Ot[Ar],os),pn!==null&&(gt=H(pn,gt,Ar),aa===null?On=pn:aa.sibling=pn,aa=pn);return xr&&co(Nt,Ar),On}for(pn=g(pn);Ar<Ot.length;Ar++)Qr=$t(pn,Nt,Ar,Ot[Ar],os),Qr!==null&&(a&&Qr.alternate!==null&&pn.delete(Qr.key===null?Ar:Qr.key),gt=H(Qr,gt,Ar),aa===null?On=Qr:aa.sibling=Qr,aa=Qr);return a&&pn.forEach(function(JA){return l(Nt,JA)}),xr&&co(Nt,Ar),On}function Pn(Nt,gt,Ot,os){if(Ot==null)throw Error(r(151));for(var On=null,aa=null,pn=gt,Ar=gt=0,Qr=null,ia=Ot.next();pn!==null&&!ia.done;Ar++,ia=Ot.next()){pn.index>Ar?(Qr=pn,pn=null):Qr=pn.sibling;var JA=Qt(Nt,pn,ia.value,os);if(JA===null){pn===null&&(pn=Qr);break}a&&pn&&JA.alternate===null&&l(Nt,pn),gt=H(JA,gt,Ar),aa===null?On=JA:aa.sibling=JA,aa=JA,pn=Qr}if(ia.done)return f(Nt,pn),xr&&co(Nt,Ar),On;if(pn===null){for(;!ia.done;Ar++,ia=Ot.next())ia=As(Nt,ia.value,os),ia!==null&&(gt=H(ia,gt,Ar),aa===null?On=ia:aa.sibling=ia,aa=ia);return xr&&co(Nt,Ar),On}for(pn=g(pn);!ia.done;Ar++,ia=Ot.next())ia=$t(pn,Nt,Ar,ia.value,os),ia!==null&&(a&&ia.alternate!==null&&pn.delete(ia.key===null?Ar:ia.key),gt=H(ia,gt,Ar),aa===null?On=ia:aa.sibling=ia,aa=ia);return a&&pn.forEach(function(x3){return l(Nt,x3)}),xr&&co(Nt,Ar),On}function Ia(Nt,gt,Ot,os){if(typeof Ot=="object"&&Ot!==null&&Ot.type===b&&Ot.key===null&&(Ot=Ot.props.children),typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case p:e:{for(var On=Ot.key;gt!==null;){if(gt.key===On){if(On=Ot.type,On===b){if(gt.tag===7){f(Nt,gt.sibling),os=D(gt,Ot.props.children),os.return=Nt,Nt=os;break e}}else if(gt.elementType===On||typeof On=="object"&&On!==null&&On.$$typeof===q&&Et(On)===gt.type){f(Nt,gt.sibling),os=D(gt,Ot.props),Hn(os,Ot),os.return=Nt,Nt=os;break e}f(Nt,gt);break}else l(Nt,gt);gt=gt.sibling}Ot.type===b?(os=rc(Ot.props.children,Nt.mode,os,Ot.key),os.return=Nt,Nt=os):(os=Ql(Ot.type,Ot.key,Ot.props,null,Nt.mode,os),Hn(os,Ot),os.return=Nt,Nt=os)}return Ae(Nt);case j:e:{for(On=Ot.key;gt!==null;){if(gt.key===On)if(gt.tag===4&&gt.stateNode.containerInfo===Ot.containerInfo&&gt.stateNode.implementation===Ot.implementation){f(Nt,gt.sibling),os=D(gt,Ot.children||[]),os.return=Nt,Nt=os;break e}else{f(Nt,gt);break}else l(Nt,gt);gt=gt.sibling}os=od(Ot,Nt.mode,os),os.return=Nt,Nt=os}return Ae(Nt);case q:return Ot=Et(Ot),Ia(Nt,gt,Ot,os)}if(re(Ot))return ln(Nt,gt,Ot,os);if(le(Ot)){if(On=le(Ot),typeof On!="function")throw Error(r(150));return Ot=On.call(Ot),Pn(Nt,gt,Ot,os)}if(typeof Ot.then=="function")return Ia(Nt,gt,Ys(Ot),os);if(Ot.$$typeof===Q)return Ia(Nt,gt,EA(Nt,Ot),os);tn(Nt,Ot)}return typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint"?(Ot=""+Ot,gt!==null&&gt.tag===6?(f(Nt,gt.sibling),os=D(gt,Ot),os.return=Nt,Nt=os):(f(Nt,gt),os=Vd(Ot,Nt.mode,os),os.return=Nt,Nt=os),Ae(Nt)):f(Nt,gt)}return function(Nt,gt,Ot,os){try{an=0;var On=Ia(Nt,gt,Ot,os);return cs=null,On}catch(pn){if(pn===ft||pn===Ge)throw pn;var aa=Hi(29,pn,null,Nt.mode);return aa.lanes=os,aa.return=Nt,aa}finally{}}}var ja=fr(!0),Yn=fr(!1),Vt=!1;function Us(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ua(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function In(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Un(a,l,f){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(sa&2)!==0){var D=g.pending;return D===null?l.next=l:(l.next=D.next,D.next=l),g.pending=l,l=ki(a),Kd(a,null,f),l}return Oc(a,g,l,f),ki(a)}function Zr(a,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var g=l.lanes;g&=a.pendingLanes,f|=g,l.lanes=f,En(a,f)}}function ri(a,l){var f=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var D=null,H=null;if(f=f.firstBaseUpdate,f!==null){do{var Ae={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};H===null?D=H=Ae:H=H.next=Ae,f=f.next}while(f!==null);H===null?D=H=l:H=H.next=l}else D=H=l;f={baseState:g.baseState,firstBaseUpdate:D,lastBaseUpdate:H,shared:g.shared,callbacks:g.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=l:a.next=l,f.lastBaseUpdate=l}var Xa=!1;function ea(){if(Xa){var a=M;if(a!==null)throw a}}function ai(a,l,f,g){Xa=!1;var D=a.updateQueue;Vt=!1;var H=D.firstBaseUpdate,Ae=D.lastBaseUpdate,Oe=D.shared.pending;if(Oe!==null){D.shared.pending=null;var At=Oe,Ut=At.next;At.next=null,Ae===null?H=Ut:Ae.next=Ut,Ae=At;var ts=a.alternate;ts!==null&&(ts=ts.updateQueue,Oe=ts.lastBaseUpdate,Oe!==Ae&&(Oe===null?ts.firstBaseUpdate=Ut:Oe.next=Ut,ts.lastBaseUpdate=At))}if(H!==null){var As=D.baseState;Ae=0,ts=Ut=At=null,Oe=H;do{var Qt=Oe.lane&-536870913,$t=Qt!==Oe.lane;if($t?(Cr&Qt)===Qt:(g&Qt)===Qt){Qt!==0&&Qt===E&&(Xa=!0),ts!==null&&(ts=ts.next={lane:0,tag:Oe.tag,payload:Oe.payload,callback:null,next:null});e:{var ln=a,Pn=Oe;Qt=l;var Ia=f;switch(Pn.tag){case 1:if(ln=Pn.payload,typeof ln=="function"){As=ln.call(Ia,As,Qt);break e}As=ln;break e;case 3:ln.flags=ln.flags&-65537|128;case 0:if(ln=Pn.payload,Qt=typeof ln=="function"?ln.call(Ia,As,Qt):ln,Qt==null)break e;As=m({},As,Qt);break e;case 2:Vt=!0}}Qt=Oe.callback,Qt!==null&&(a.flags|=64,$t&&(a.flags|=8192),$t=D.callbacks,$t===null?D.callbacks=[Qt]:$t.push(Qt))}else $t={lane:Qt,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null},ts===null?(Ut=ts=$t,At=As):ts=ts.next=$t,Ae|=Qt;if(Oe=Oe.next,Oe===null){if(Oe=D.shared.pending,Oe===null)break;$t=Oe,Oe=$t.next,$t.next=null,D.lastBaseUpdate=$t,D.shared.pending=null}}while(!0);ts===null&&(At=As),D.baseState=At,D.firstBaseUpdate=Ut,D.lastBaseUpdate=ts,H===null&&(D.shared.lanes=0),R|=Ae,a.lanes=Ae,a.memoizedState=As}}function Ki(a,l){if(typeof a!="function")throw Error(r(191,a));a.call(l)}function ii(a,l){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)Ki(f[a],l)}var Vn=me(null),Nr=me(0);function wa(a,l){a=C,ge(Nr,a),ge(Vn,l),C=a|l.baseLanes}function kr(){ge(Nr,C),ge(Vn,Vn.current)}function oi(){C=Nr.current,Z(Vn),Z(Nr)}var La=me(null),Br=null;function Ja(a){var l=a.alternate;ge(Rr,Rr.current&1),ge(La,a),Br===null&&(l===null||Vn.current!==null||l.memoizedState!==null)&&(Br=a)}function ta(a){ge(Rr,Rr.current),ge(La,a),Br===null&&(Br=a)}function li(a){a.tag===22?(ge(Rr,Rr.current),ge(La,a),Br===null&&(Br=a)):ci()}function ci(){ge(Rr,Rr.current),ge(La,La.current)}function la(a){Z(La),Br===a&&(Br=null),Z(Rr)}var Rr=me(0);function zi(a){for(var l=a;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||l0(f)||c0(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var za=0,jn=null,Tn=null,Dr=null,ro=!1,Ao=!1,Ji=!1,Da=0,uc=0,gl=null,ud=0;function ca(){throw Error(r(321))}function FA(a,l){if(l===null)return!1;for(var f=0;f<l.length&&f<a.length;f++)if(!Sr(a[f],l[f]))return!1;return!0}function Eu(a,l,f,g,D,H){return za=H,jn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ne.H=a===null||a.memoizedState===null?zm:Ph,Ji=!1,H=f(g,D),Ji=!1,Ao&&(H=rl(l,f,g,D)),qd(a),H}function qd(a){ne.H=Qu;var l=Tn!==null&&Tn.next!==null;if(za=0,Dr=Tn=jn=null,ro=!1,uc=0,gl=null,l)throw Error(r(300));a===null||Qa||(a=a.dependencies,a!==null&&CA(a)&&(Qa=!0))}function rl(a,l,f,g){jn=a;var D=0;do{if(Ao&&(gl=null),uc=0,Ao=!1,25<=D)throw Error(r(301));if(D+=1,Dr=Tn=null,a.updateQueue!=null){var H=a.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}ne.H=kh,H=l(f,g)}while(Ao);return H}function Tu(){var a=ne.H,l=a.useState()[0];return l=typeof l.then=="function"?hc(l):l,a=a.useState()[0],(Tn!==null?Tn.memoizedState:null)!==a&&(jn.flags|=1024),l}function IA(){var a=Da!==0;return Da=0,a}function RA(a,l,f){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~f}function Wd(a){if(ro){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}ro=!1}za=0,Dr=Tn=jn=null,Ao=!1,uc=Da=0,gl=null}function mi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dr===null?jn.memoizedState=Dr=a:Dr=Dr.next=a,Dr}function Ea(){if(Tn===null){var a=jn.alternate;a=a!==null?a.memoizedState:null}else a=Tn.next;var l=Dr===null?jn.memoizedState:Dr.next;if(l!==null)Dr=l,Tn=a;else{if(a===null)throw jn.alternate===null?Error(r(467)):Error(r(310));Tn=a,a={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},Dr===null?jn.memoizedState=Dr=a:Dr=Dr.next=a}return Dr}function Yd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hc(a){var l=uc;return uc+=1,gl===null&&(gl=[]),a=Xt(gl,a,l),l=jn,(Dr===null?l.memoizedState:Dr.next)===null&&(l=l.alternate,ne.H=l===null||l.memoizedState===null?zm:Ph),a}function hd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return hc(a);if(a.$$typeof===Q)return Ri(a)}throw Error(r(438,String(a)))}function ji(a){var l=null,f=jn.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var g=jn.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(D){return D.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Yd(),jn.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(a),g=0;g<a;g++)f[g]=fe;return l.index++,f}function Oo(a,l){return typeof l=="function"?l(a):l}function OA(a){var l=Ea();return fd(l,Tn,a)}function fd(a,l,f){var g=a.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=f;var D=a.baseQueue,H=g.pending;if(H!==null){if(D!==null){var Ae=D.next;D.next=H.next,H.next=Ae}l.baseQueue=D=H,g.pending=null}if(H=a.baseState,D===null)a.memoizedState=H;else{l=D.next;var Oe=Ae=null,At=null,Ut=l,ts=!1;do{var As=Ut.lane&-536870913;if(As!==Ut.lane?(Cr&As)===As:(za&As)===As){var Qt=Ut.revertLane;if(Qt===0)At!==null&&(At=At.next={lane:0,revertLane:0,gesture:null,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null}),As===E&&(ts=!0);else if((za&Qt)===Qt){Ut=Ut.next,Qt===E&&(ts=!0);continue}else As={lane:0,revertLane:Ut.revertLane,gesture:null,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},At===null?(Oe=At=As,Ae=H):At=At.next=As,jn.lanes|=Qt,R|=Qt;As=Ut.action,Ji&&f(H,As),H=Ut.hasEagerState?Ut.eagerState:f(H,As)}else Qt={lane:As,revertLane:Ut.revertLane,gesture:Ut.gesture,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},At===null?(Oe=At=Qt,Ae=H):At=At.next=Qt,jn.lanes|=As,R|=As;Ut=Ut.next}while(Ut!==null&&Ut!==l);if(At===null?Ae=H:At.next=Oe,!Sr(H,a.memoizedState)&&(Qa=!0,ts&&(f=M,f!==null)))throw f;a.memoizedState=H,a.baseState=Ae,a.baseQueue=At,g.lastRenderedState=H}return D===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function UA(a){var l=Ea(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=a;var g=f.dispatch,D=f.pending,H=l.memoizedState;if(D!==null){f.pending=null;var Ae=D=D.next;do H=a(H,Ae.action),Ae=Ae.next;while(Ae!==D);Sr(H,l.memoizedState)||(Qa=!0),l.memoizedState=H,l.baseQueue===null&&(l.baseState=H),f.lastRenderedState=H}return[H,g]}function LA(a,l,f){var g=jn,D=Ea(),H=xr;if(H){if(f===void 0)throw Error(r(407));f=f()}else f=l();var Ae=!Sr((Tn||D).memoizedState,f);if(Ae&&(D.memoizedState=f,Qa=!0),D=D.queue,Dh(Iu.bind(null,g,D,a),[a]),D.getSnapshot!==l||Ae||Dr!==null&&Dr.memoizedState.tag&1){if(g.flags|=2048,_c(9,{destroy:void 0},Fu.bind(null,g,D,f,l),null),Sa===null)throw Error(r(349));H||(za&127)!==0||Ml(g,l,f)}return f}function Ml(a,l,f){a.flags|=16384,a={getSnapshot:l,value:f},l=jn.updateQueue,l===null?(l=Yd(),jn.updateQueue=l,l.stores=[a]):(f=l.stores,f===null?l.stores=[a]:f.push(a))}function Fu(a,l,f,g){l.value=f,l.getSnapshot=g,Oh(l)&&Ru(a)}function Iu(a,l,f){return f(function(){Oh(l)&&Ru(a)})}function Oh(a){var l=a.getSnapshot;a=a.value;try{var f=l();return!Sr(a,f)}catch{return!0}}function Ru(a){var l=hl(a,2);l!==null&&Na(l,a,2)}function Pl(a){var l=mi();if(typeof a=="function"){var f=a;if(a=f(),Ji){lt(!0);try{f()}finally{lt(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:a},l}function Uh(a,l,f,g){return a.baseState=f,fd(a,Tn,typeof g=="function"?g:Oo)}function DA(a,l,f,g,D){if(Xd(a))throw Error(r(485));if(a=l.action,a!==null){var H={payload:D,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ae){H.listeners.push(Ae)}};ne.T!==null?f(!0):H.isTransition=!1,g(H),f=l.pending,f===null?(H.next=l.pending=H,Ou(l,H)):(H.next=f.next,l.pending=f.next=H)}}function Ou(a,l){var f=l.action,g=l.payload,D=a.state;if(l.isTransition){var H=ne.T,Ae={};ne.T=Ae;try{var Oe=f(D,g),At=ne.S;At!==null&&At(Ae,Oe),gi(a,l,Oe)}catch(Ut){Qc(a,l,Ut)}finally{H!==null&&Ae.types!==null&&(H.types=Ae.types),ne.T=H}}else try{H=f(D,g),gi(a,l,H)}catch(Ut){Qc(a,l,Ut)}}function gi(a,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){pd(a,l,g)},function(g){return Qc(a,l,g)}):pd(a,l,f)}function pd(a,l,f){l.status="fulfilled",l.value=f,QA(l),a.state=f,l=a.pending,l!==null&&(f=l.next,f===l?a.pending=null:(f=f.next,l.next=f,Ou(a,f)))}function Qc(a,l,f){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=f,QA(l),l=l.next;while(l!==g)}a.action=null}function QA(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function md(a,l){return l}function Uo(a,l){if(xr){var f=Sa.formState;if(f!==null){e:{var g=jn;if(xr){if(ba){t:{for(var D=ba,H=Ka;D.nodeType!==8;){if(!H){D=null;break t}if(D=gc(D.nextSibling),D===null){D=null;break t}}H=D.data,D=H==="F!"||H==="F"?D:null}if(D){ba=gc(D.nextSibling),g=D.data==="F!";break e}}oc(g)}g=!1}g&&(l=f[0])}}return f=mi(),f.memoizedState=f.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:md,lastRenderedState:l},f.queue=g,f=sp.bind(null,jn,g),g.dispatch=f,g=Pl(!1),H=Du.bind(null,jn,!1,g.queue),g=mi(),D={state:l,dispatch:null,action:a,pending:null},g.queue=D,f=DA.bind(null,jn,D,H,f),D.dispatch=f,g.memoizedState=a,[l,f,!1]}function kl(a){var l=Ea();return Hl(l,Tn,a)}function Hl(a,l,f){if(l=fd(a,l,md)[0],a=OA(Oo)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=hc(l)}catch(Ae){throw Ae===ft?Ge:Ae}else g=l;l=Ea();var D=l.queue,H=D.dispatch;return f!==l.memoizedState&&(jn.flags|=2048,_c(9,{destroy:void 0},_A.bind(null,D,f),null)),[g,H,a]}function _A(a,l){a.action=l}function MA(a){var l=Ea(),f=Tn;if(f!==null)return Hl(l,f,a);Ea(),l=l.memoizedState,f=Ea();var g=f.queue.dispatch;return f.memoizedState=a,[l,g,!1]}function _c(a,l,f,g){return a={tag:a,create:f,deps:g,inst:l,next:null},l=jn.updateQueue,l===null&&(l=Yd(),jn.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=a.next=a:(g=f.next,f.next=a,a.next=g,l.lastEffect=a),a}function Lh(){return Ea().memoizedState}function gd(a,l,f,g){var D=mi();jn.flags|=a,D.memoizedState=_c(1|l,{destroy:void 0},f,g===void 0?null:g)}function yd(a,l,f,g){var D=Ea();g=g===void 0?null:g;var H=D.memoizedState.inst;Tn!==null&&g!==null&&FA(g,Tn.memoizedState.deps)?D.memoizedState=_c(l,H,f,g):(jn.flags|=a,D.memoizedState=_c(1|l,H,f,g))}function qf(a,l){gd(8390656,8,a,l)}function Dh(a,l){yd(2048,8,a,l)}function Dm(a){jn.flags|=4;var l=jn.updateQueue;if(l===null)l=Yd(),jn.updateQueue=l,l.events=[a];else{var f=l.events;f===null?l.events=[a]:f.push(a)}}function Wf(a){var l=Ea().memoizedState;return Dm({ref:l,nextImpl:a}),function(){if((sa&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function Qh(a,l){return yd(4,2,a,l)}function Qm(a,l){return yd(4,4,a,l)}function _m(a,l){if(typeof l=="function"){a=a();var f=l(a);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Mm(a,l,f){f=f!=null?f.concat([a]):null,yd(4,4,_m.bind(null,l,a),f)}function Yf(){}function Uu(a,l){var f=Ea();l=l===void 0?null:l;var g=f.memoizedState;return l!==null&&FA(l,g[1])?g[0]:(f.memoizedState=[a,l],a)}function Lu(a,l){var f=Ea();l=l===void 0?null:l;var g=f.memoizedState;if(l!==null&&FA(l,g[1]))return g[0];if(g=a(),Ji){lt(!0);try{a()}finally{lt(!1)}}return f.memoizedState=[g,l],g}function Xf(a,l,f){return f===void 0||(za&1073741824)!==0&&(Cr&261930)===0?a.memoizedState=l:(a.memoizedState=f,a=yi(),jn.lanes|=a,R|=a,f)}function Jf(a,l,f,g){return Sr(f,l)?f:Vn.current!==null?(a=Xf(a,f,g),Sr(a,l)||(Qa=!0),a):(za&42)===0||(za&1073741824)!==0&&(Cr&261930)===0?(Qa=!0,a.memoizedState=f):(a=yi(),jn.lanes|=a,R|=a,l)}function _h(a,l,f,g,D){var H=oe.p;oe.p=H!==0&&8>H?H:8;var Ae=ne.T,Oe={};ne.T=Oe,Du(a,!1,l,f);try{var At=D(),Ut=ne.S;if(Ut!==null&&Ut(Oe,At),At!==null&&typeof At=="object"&&typeof At.then=="function"){var ts=Se(At,g);fc(a,l,ts,vn(a))}else fc(a,l,g,vn(a))}catch(As){fc(a,l,{then:function(){},status:"rejected",reason:As},vn())}finally{oe.p=H,Ae!==null&&Oe.types!==null&&(Ae.types=Oe.types),ne.T=Ae}}function Pm(){}function Mh(a,l,f,g){if(a.tag!==5)throw Error(r(476));var D=Zf(a).queue;_h(a,D,l,se,f===null?Pm:function(){return km(a),f(g)})}function Zf(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:se},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:f},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function km(a){var l=Zf(a);l.next===null&&(l=a.alternate.memoizedState),fc(a,l.next.queue,{},vn())}function PA(){return Ri(Tp)}function ep(){return Ea().memoizedState}function tp(){return Ea().memoizedState}function Px(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var f=vn();a=In(f);var g=Un(l,a,f);g!==null&&(Na(g,l,f),Zr(g,l,f)),l={cache:dd()},a.payload=l;return}l=l.return}}function kx(a,l,f){var g=vn();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Xd(a)?Hm(l,f):(f=bA(a,l,f,g),f!==null&&(Na(f,a,g),Km(f,l,g)))}function sp(a,l,f){var g=vn();fc(a,l,f,g)}function fc(a,l,f,g){var D={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Xd(a))Hm(l,D);else{var H=a.alternate;if(a.lanes===0&&(H===null||H.lanes===0)&&(H=l.lastRenderedReducer,H!==null))try{var Ae=l.lastRenderedState,Oe=H(Ae,f);if(D.hasEagerState=!0,D.eagerState=Oe,Sr(Oe,Ae))return Oc(a,l,D,0),Sa===null&&Hd(),!1}catch{}finally{}if(f=bA(a,l,D,g),f!==null)return Na(f,a,g),Km(f,l,g),!0}return!1}function Du(a,l,f,g){if(g={lane:2,revertLane:Yx(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Xd(a)){if(l)throw Error(r(479))}else l=bA(a,f,g,2),l!==null&&Na(l,a,2)}function Xd(a){var l=a.alternate;return a===jn||l!==null&&l===jn}function Hm(a,l){Ao=ro=!0;var f=a.pending;f===null?l.next=l:(l.next=f.next,f.next=l),a.pending=l}function Km(a,l,f){if((f&4194048)!==0){var g=l.lanes;g&=a.pendingLanes,f|=g,l.lanes=f,En(a,f)}}var Qu={readContext:Ri,use:hd,useCallback:ca,useContext:ca,useEffect:ca,useImperativeHandle:ca,useLayoutEffect:ca,useInsertionEffect:ca,useMemo:ca,useReducer:ca,useRef:ca,useState:ca,useDebugValue:ca,useDeferredValue:ca,useTransition:ca,useSyncExternalStore:ca,useId:ca,useHostTransitionStatus:ca,useFormState:ca,useActionState:ca,useOptimistic:ca,useMemoCache:ca,useCacheRefresh:ca};Qu.useEffectEvent=ca;var zm={readContext:Ri,use:hd,useCallback:function(a,l){return mi().memoizedState=[a,l===void 0?null:l],a},useContext:Ri,useEffect:qf,useImperativeHandle:function(a,l,f){f=f!=null?f.concat([a]):null,gd(4194308,4,_m.bind(null,l,a),f)},useLayoutEffect:function(a,l){return gd(4194308,4,a,l)},useInsertionEffect:function(a,l){gd(4,2,a,l)},useMemo:function(a,l){var f=mi();l=l===void 0?null:l;var g=a();if(Ji){lt(!0);try{a()}finally{lt(!1)}}return f.memoizedState=[g,l],g},useReducer:function(a,l,f){var g=mi();if(f!==void 0){var D=f(l);if(Ji){lt(!0);try{f(l)}finally{lt(!1)}}}else D=l;return g.memoizedState=g.baseState=D,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:D},g.queue=a,a=a.dispatch=kx.bind(null,jn,a),[g.memoizedState,a]},useRef:function(a){var l=mi();return a={current:a},l.memoizedState=a},useState:function(a){a=Pl(a);var l=a.queue,f=sp.bind(null,jn,l);return l.dispatch=f,[a.memoizedState,f]},useDebugValue:Yf,useDeferredValue:function(a,l){var f=mi();return Xf(f,a,l)},useTransition:function(){var a=Pl(!1);return a=_h.bind(null,jn,a.queue,!0,!1),mi().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,f){var g=jn,D=mi();if(xr){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Sa===null)throw Error(r(349));(Cr&127)!==0||Ml(g,l,f)}D.memoizedState=f;var H={value:f,getSnapshot:l};return D.queue=H,qf(Iu.bind(null,g,H,a),[a]),g.flags|=2048,_c(9,{destroy:void 0},Fu.bind(null,g,H,f,l),null),f},useId:function(){var a=mi(),l=Sa.identifierPrefix;if(xr){var f=Yi,g=Io;f=(g&~(1<<32-Gt(g)-1)).toString(32)+f,l="_"+l+"R_"+f,f=Da++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=ud++,l="_"+l+"r_"+f.toString(32)+"_";return a.memoizedState=l},useHostTransitionStatus:PA,useFormState:Uo,useActionState:Uo,useOptimistic:function(a){var l=mi();l.memoizedState=l.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=Du.bind(null,jn,!0,f),f.dispatch=l,[a,l]},useMemoCache:ji,useCacheRefresh:function(){return mi().memoizedState=Px.bind(null,jn)},useEffectEvent:function(a){var l=mi(),f={impl:a};return l.memoizedState=f,function(){if((sa&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},Ph={readContext:Ri,use:hd,useCallback:Uu,useContext:Ri,useEffect:Dh,useImperativeHandle:Mm,useInsertionEffect:Qh,useLayoutEffect:Qm,useMemo:Lu,useReducer:OA,useRef:Lh,useState:function(){return OA(Oo)},useDebugValue:Yf,useDeferredValue:function(a,l){var f=Ea();return Jf(f,Tn.memoizedState,a,l)},useTransition:function(){var a=OA(Oo)[0],l=Ea().memoizedState;return[typeof a=="boolean"?a:hc(a),l]},useSyncExternalStore:LA,useId:ep,useHostTransitionStatus:PA,useFormState:kl,useActionState:kl,useOptimistic:function(a,l){var f=Ea();return Uh(f,Tn,a,l)},useMemoCache:ji,useCacheRefresh:tp};Ph.useEffectEvent=Wf;var kh={readContext:Ri,use:hd,useCallback:Uu,useContext:Ri,useEffect:Dh,useImperativeHandle:Mm,useInsertionEffect:Qh,useLayoutEffect:Qm,useMemo:Lu,useReducer:UA,useRef:Lh,useState:function(){return UA(Oo)},useDebugValue:Yf,useDeferredValue:function(a,l){var f=Ea();return Tn===null?Xf(f,a,l):Jf(f,Tn.memoizedState,a,l)},useTransition:function(){var a=UA(Oo)[0],l=Ea().memoizedState;return[typeof a=="boolean"?a:hc(a),l]},useSyncExternalStore:LA,useId:ep,useHostTransitionStatus:PA,useFormState:MA,useActionState:MA,useOptimistic:function(a,l){var f=Ea();return Tn!==null?Uh(f,Tn,a,l):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:ji,useCacheRefresh:tp};kh.useEffectEvent=Wf;function Hh(a,l,f,g){l=a.memoizedState,f=f(g,l),f=f==null?l:m({},l,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Kh={enqueueSetState:function(a,l,f){a=a._reactInternals;var g=vn(),D=In(g);D.payload=l,f!=null&&(D.callback=f),l=Un(a,D,g),l!==null&&(Na(l,a,g),Zr(l,a,g))},enqueueReplaceState:function(a,l,f){a=a._reactInternals;var g=vn(),D=In(g);D.tag=1,D.payload=l,f!=null&&(D.callback=f),l=Un(a,D,g),l!==null&&(Na(l,a,g),Zr(l,a,g))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var f=vn(),g=In(f);g.tag=2,l!=null&&(g.callback=l),l=Un(a,g,f),l!==null&&(Na(l,a,f),Zr(l,a,f))}};function zh(a,l,f,g,D,H,Ae){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,H,Ae):l.prototype&&l.prototype.isPureReactComponent?!Mi(f,g)||!Mi(D,H):!0}function np(a,l,f,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,g),l.state!==a&&Kh.enqueueReplaceState(l,l.state,null)}function xd(a,l){var f=l;if("ref"in l){f={};for(var g in l)g!=="ref"&&(f[g]=l[g])}if(a=a.defaultProps){f===l&&(f=m({},f));for(var D in a)f[D]===void 0&&(f[D]=a[D])}return f}function Vm(a){id(a)}function _u(a){console.error(a)}function Mu(a){id(a)}function Pu(a,l){try{var f=a.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function rp(a,l,f){try{var g=a.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function ap(a,l,f){return f=In(f),f.tag=3,f.payload={element:null},f.callback=function(){Pu(a,l)},f}function ip(a){return a=In(a),a.tag=3,a}function op(a,l,f,g){var D=f.type.getDerivedStateFromError;if(typeof D=="function"){var H=g.value;a.payload=function(){return D(H)},a.callback=function(){rp(l,f,g)}}var Ae=f.stateNode;Ae!==null&&typeof Ae.componentDidCatch=="function"&&(a.callback=function(){rp(l,f,g),typeof D!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var Oe=g.stack;this.componentDidCatch(g.value,{componentStack:Oe!==null?Oe:""})})}function Hx(a,l,f,g,D){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=f.alternate,l!==null&&dc(l,f,D,!0),f=La.current,f!==null){switch(f.tag){case 31:case 13:return Br===null?wl():f.alternate===null&&O===0&&(O=3),f.flags&=-257,f.flags|=65536,f.lanes=D,g===xt?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([g]):l.add(g),Gx(a,g,D)),!1;case 22:return f.flags|=65536,g===xt?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([g]):f.add(g)),Gx(a,g,D)),!1}throw Error(r(435,f.tag))}return Gx(a,g,D),wl(),!1}if(xr)return l=La.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=D,g!==no&&(a=Error(r(422),{cause:g}),_l(Eo(a,f)))):(g!==no&&(l=Error(r(423),{cause:g}),_l(Eo(l,f))),a=a.current.alternate,a.flags|=65536,D&=-D,a.lanes|=D,g=Eo(g,f),D=ap(a.stateNode,g,D),ri(a,D),O!==4&&(O=2)),!1;var H=Error(r(520),{cause:g});if(H=Eo(H,f),ze===null?ze=[H]:ze.push(H),O!==4&&(O=2),l===null)return!0;g=Eo(g,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,a=D&-D,f.lanes|=a,a=ap(f.stateNode,g,a),ri(f,a),!1;case 1:if(l=f.type,H=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(_s===null||!_s.has(H))))return f.flags|=65536,D&=-D,f.lanes|=D,D=ip(D),op(D,a,f,g),ri(f,D),!1}f=f.return}while(f!==null);return!1}var lp=Error(r(461)),Qa=!1;function Vi(a,l,f,g){l.child=a===null?Yn(l,null,f,g):ja(l,a.child,f,g)}function di(a,l,f,g,D){f=f.render;var H=l.ref;if("ref"in g){var Ae={};for(var Oe in g)Oe!=="ref"&&(Ae[Oe]=g[Oe])}else Ae=g;return Ac(l),g=Eu(a,l,f,Ae,H,D),Oe=IA(),a!==null&&!Qa?(RA(a,l,D),Pc(a,l,D)):(xr&&Oe&&Bu(l),l.flags|=1,Vi(a,l,g,D),l.child)}function vd(a,l,f,g,D){if(a===null){var H=f.type;return typeof H=="function"&&!Dl(H)&&H.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=H,Jd(a,l,H,g,D)):(a=Ql(f.type,null,g,l,l.mode,D),a.ref=l.ref,a.return=l,l.child=a)}if(H=a.child,!mp(a,D)){var Ae=H.memoizedProps;if(f=f.compare,f=f!==null?f:Mi,f(Ae,g)&&a.ref===l.ref)return Pc(a,l,D)}return l.flags|=1,a=Co(H,g),a.ref=l.ref,a.return=l,l.child=a}function Jd(a,l,f,g,D){if(a!==null){var H=a.memoizedProps;if(Mi(H,g)&&a.ref===l.ref)if(Qa=!1,l.pendingProps=g=H,mp(a,D))(a.flags&131072)!==0&&(Qa=!0);else return l.lanes=a.lanes,Pc(a,l,D)}return Hu(a,l,f,g,D)}function Mc(a,l,f,g){var D=g.children,H=a!==null?a.memoizedState:null;if(a===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(H=H!==null?H.baseLanes|f:f,a!==null){for(g=l.child=a.child,D=0;g!==null;)D=D|g.lanes|g.childLanes,g=g.sibling;g=D&~H}else g=0,l.child=null;return kA(a,l,H,f,g)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&ke(l,H!==null?H.cachePool:null),H!==null?wa(l,H):kr(),li(l);else return g=l.lanes=536870912,kA(a,l,H!==null?H.baseLanes|f:f,f,g)}else H!==null?(ke(l,H.cachePool),wa(l,H),ci(),l.memoizedState=null):(a!==null&&ke(l,null),kr(),ci());return Vi(a,l,D,f),l.child}function yl(a,l){return a!==null&&a.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function kA(a,l,f,g,D){var H=Ue();return H=H===null?null:{parent:Ya._currentValue,pool:H},l.memoizedState={baseLanes:f,cachePool:H},a!==null&&ke(l,null),kr(),li(l),a!==null&&dc(a,l,g,!0),l.childLanes=D,null}function xl(a,l){return l=Vh({mode:l.mode,children:l.children},a.mode),l.ref=a.ref,a.child=l,l.return=a,l}function cp(a,l,f){return ja(l,a.child,null,f),a=xl(l,l.pendingProps),a.flags|=2,la(l),l.memoizedState=null,a}function $m(a,l,f){var g=l.pendingProps,D=(l.flags&128)!==0;if(l.flags&=-129,a===null){if(xr){if(g.mode==="hidden")return a=xl(l,g),l.lanes=536870912,yl(null,a);if(ta(l),(a=ba)?(a=dw(a,Ka),a=a!==null&&a.data==="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:ic!==null?{id:Io,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},f=wA(a),f.return=l,l.child=f,Fi=l,ba=null)):a=null,a===null)throw oc(l);return l.lanes=536870912,null}return xl(l,g)}var H=a.memoizedState;if(H!==null){var Ae=H.dehydrated;if(ta(l),D)if(l.flags&256)l.flags&=-257,l=cp(a,l,f);else if(l.memoizedState!==null)l.child=a.child,l.flags|=128,l=null;else throw Error(r(558));else if(Qa||dc(a,l,f,!1),D=(f&a.childLanes)!==0,Qa||D){if(g=Sa,g!==null&&(Ae=Ls(g,f),Ae!==0&&Ae!==H.retryLane))throw H.retryLane=Ae,hl(a,Ae),Na(g,a,Ae),lp;wl(),l=cp(a,l,f)}else a=H.treeContext,ba=gc(Ae.nextSibling),Fi=l,xr=!0,Xi=null,Ka=!1,a!==null&&Ih(l,a),l=xl(l,g),l.flags|=4096;return l}return a=Co(a.child,{mode:g.mode,children:g.children}),a.ref=l.ref,l.child=a,a.return=l,a}function ku(a,l){var f=l.ref;if(f===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(a===null||a.ref!==f)&&(l.flags|=4194816)}}function Hu(a,l,f,g,D){return Ac(l),f=Eu(a,l,f,g,void 0,D),g=IA(),a!==null&&!Qa?(RA(a,l,D),Pc(a,l,D)):(xr&&g&&Bu(l),l.flags|=1,Vi(a,l,f,D),l.child)}function HA(a,l,f,g,D,H){return Ac(l),l.updateQueue=null,f=rl(l,g,f,D),qd(a),g=IA(),a!==null&&!Qa?(RA(a,l,H),Pc(a,l,H)):(xr&&g&&Bu(l),l.flags|=1,Vi(a,l,f,H),l.child)}function dp(a,l,f,g,D){if(Ac(l),l.stateNode===null){var H=Ti,Ae=f.contextType;typeof Ae=="object"&&Ae!==null&&(H=Ri(Ae)),H=new f(g,H),l.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=Kh,l.stateNode=H,H._reactInternals=l,H=l.stateNode,H.props=g,H.state=l.memoizedState,H.refs={},Us(l),Ae=f.contextType,H.context=typeof Ae=="object"&&Ae!==null?Ri(Ae):Ti,H.state=l.memoizedState,Ae=f.getDerivedStateFromProps,typeof Ae=="function"&&(Hh(l,f,Ae,g),H.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(Ae=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),Ae!==H.state&&Kh.enqueueReplaceState(H,H.state,null),ai(l,g,H,D),ea(),H.state=l.memoizedState),typeof H.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(a===null){H=l.stateNode;var Oe=l.memoizedProps,At=xd(f,Oe);H.props=At;var Ut=H.context,ts=f.contextType;Ae=Ti,typeof ts=="object"&&ts!==null&&(Ae=Ri(ts));var As=f.getDerivedStateFromProps;ts=typeof As=="function"||typeof H.getSnapshotBeforeUpdate=="function",Oe=l.pendingProps!==Oe,ts||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(Oe||Ut!==Ae)&&np(l,H,g,Ae),Vt=!1;var Qt=l.memoizedState;H.state=Qt,ai(l,g,H,D),ea(),Ut=l.memoizedState,Oe||Qt!==Ut||Vt?(typeof As=="function"&&(Hh(l,f,As,g),Ut=l.memoizedState),(At=Vt||zh(l,f,At,g,Qt,Ut,Ae))?(ts||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(l.flags|=4194308)):(typeof H.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Ut),H.props=g,H.state=Ut,H.context=Ae,g=At):(typeof H.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{H=l.stateNode,Ua(a,l),Ae=l.memoizedProps,ts=xd(f,Ae),H.props=ts,As=l.pendingProps,Qt=H.context,Ut=f.contextType,At=Ti,typeof Ut=="object"&&Ut!==null&&(At=Ri(Ut)),Oe=f.getDerivedStateFromProps,(Ut=typeof Oe=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(Ae!==As||Qt!==At)&&np(l,H,g,At),Vt=!1,Qt=l.memoizedState,H.state=Qt,ai(l,g,H,D),ea();var $t=l.memoizedState;Ae!==As||Qt!==$t||Vt||a!==null&&a.dependencies!==null&&CA(a.dependencies)?(typeof Oe=="function"&&(Hh(l,f,Oe,g),$t=l.memoizedState),(ts=Vt||zh(l,f,ts,g,Qt,$t,At)||a!==null&&a.dependencies!==null&&CA(a.dependencies))?(Ut||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(g,$t,At),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(g,$t,At)),typeof H.componentDidUpdate=="function"&&(l.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof H.componentDidUpdate!="function"||Ae===a.memoizedProps&&Qt===a.memoizedState||(l.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||Ae===a.memoizedProps&&Qt===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=$t),H.props=g,H.state=$t,H.context=At,g=ts):(typeof H.componentDidUpdate!="function"||Ae===a.memoizedProps&&Qt===a.memoizedState||(l.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||Ae===a.memoizedProps&&Qt===a.memoizedState||(l.flags|=1024),g=!1)}return H=g,ku(a,l),g=(l.flags&128)!==0,H||g?(H=l.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:H.render(),l.flags|=1,a!==null&&g?(l.child=ja(l,a.child,null,D),l.child=ja(l,null,f,D)):Vi(a,l,f,D),l.memoizedState=H.state,a=l.child):a=Pc(a,l,D),a}function Ap(a,l,f,g){return Dc(),l.flags|=256,Vi(a,l,f,g),l.child}var Zd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function up(a){return{baseLanes:a,cachePool:We()}}function hp(a,l,f){return a=a!==null?a.childLanes&~f:0,l&&(a|=Ee),a}function Gm(a,l,f){var g=l.pendingProps,D=!1,H=(l.flags&128)!==0,Ae;if((Ae=H)||(Ae=a!==null&&a.memoizedState===null?!1:(Rr.current&2)!==0),Ae&&(D=!0,l.flags&=-129),Ae=(l.flags&32)!==0,l.flags&=-33,a===null){if(xr){if(D?Ja(l):ci(),(a=ba)?(a=dw(a,Ka),a=a!==null&&a.data!=="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:ic!==null?{id:Io,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},f=wA(a),f.return=l,l.child=f,Fi=l,ba=null)):a=null,a===null)throw oc(l);return c0(a)?l.lanes=32:l.lanes=536870912,null}var Oe=g.children;return g=g.fallback,D?(ci(),D=l.mode,Oe=Vh({mode:"hidden",children:Oe},D),g=rc(g,D,f,null),Oe.return=l,g.return=l,Oe.sibling=g,l.child=Oe,g=l.child,g.memoizedState=up(f),g.childLanes=hp(a,Ae,f),l.memoizedState=Zd,yl(null,g)):(Ja(l),fp(l,Oe))}var At=a.memoizedState;if(At!==null&&(Oe=At.dehydrated,Oe!==null)){if(H)l.flags&256?(Ja(l),l.flags&=-257,l=Ku(a,l,f)):l.memoizedState!==null?(ci(),l.child=a.child,l.flags|=128,l=null):(ci(),Oe=g.fallback,D=l.mode,g=Vh({mode:"visible",children:g.children},D),Oe=rc(Oe,D,f,null),Oe.flags|=2,g.return=l,Oe.return=l,g.sibling=Oe,l.child=g,ja(l,a.child,null,f),g=l.child,g.memoizedState=up(f),g.childLanes=hp(a,Ae,f),l.memoizedState=Zd,l=yl(null,g));else if(Ja(l),c0(Oe)){if(Ae=Oe.nextSibling&&Oe.nextSibling.dataset,Ae)var Ut=Ae.dgst;Ae=Ut,g=Error(r(419)),g.stack="",g.digest=Ae,_l({value:g,source:null,stack:null}),l=Ku(a,l,f)}else if(Qa||dc(a,l,f,!1),Ae=(f&a.childLanes)!==0,Qa||Ae){if(Ae=Sa,Ae!==null&&(g=Ls(Ae,f),g!==0&&g!==At.retryLane))throw At.retryLane=g,hl(a,g),Na(Ae,a,g),lp;l0(Oe)||wl(),l=Ku(a,l,f)}else l0(Oe)?(l.flags|=192,l.child=a.child,l=null):(a=At.treeContext,ba=gc(Oe.nextSibling),Fi=l,xr=!0,Xi=null,Ka=!1,a!==null&&Ih(l,a),l=fp(l,g.children),l.flags|=4096);return l}return D?(ci(),Oe=g.fallback,D=l.mode,At=a.child,Ut=At.sibling,g=Co(At,{mode:"hidden",children:g.children}),g.subtreeFlags=At.subtreeFlags&65011712,Ut!==null?Oe=Co(Ut,Oe):(Oe=rc(Oe,D,f,null),Oe.flags|=2),Oe.return=l,g.return=l,g.sibling=Oe,l.child=g,yl(null,g),g=l.child,Oe=a.child.memoizedState,Oe===null?Oe=up(f):(D=Oe.cachePool,D!==null?(At=Ya._currentValue,D=D.parent!==At?{parent:At,pool:At}:D):D=We(),Oe={baseLanes:Oe.baseLanes|f,cachePool:D}),g.memoizedState=Oe,g.childLanes=hp(a,Ae,f),l.memoizedState=Zd,yl(a.child,g)):(Ja(l),f=a.child,a=f.sibling,f=Co(f,{mode:"visible",children:g.children}),f.return=l,f.sibling=null,a!==null&&(Ae=l.deletions,Ae===null?(l.deletions=[a],l.flags|=16):Ae.push(a)),l.child=f,l.memoizedState=null,f)}function fp(a,l){return l=Vh({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function Vh(a,l){return a=Hi(22,a,null,l),a.lanes=0,a}function Ku(a,l,f){return ja(l,a.child,null,f),a=fp(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function qm(a,l,f){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),cd(a.return,l,f)}function pp(a,l,f,g,D,H){var Ae=a.memoizedState;Ae===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:D,treeForkCount:H}:(Ae.isBackwards=l,Ae.rendering=null,Ae.renderingStartTime=0,Ae.last=g,Ae.tail=f,Ae.tailMode=D,Ae.treeForkCount=H)}function Wm(a,l,f){var g=l.pendingProps,D=g.revealOrder,H=g.tail;g=g.children;var Ae=Rr.current,Oe=(Ae&2)!==0;if(Oe?(Ae=Ae&1|2,l.flags|=128):Ae&=1,ge(Rr,Ae),Vi(a,l,g,f),g=xr?ac:0,!Oe&&a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&qm(a,f,l);else if(a.tag===19)qm(a,f,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(D){case"forwards":for(f=l.child,D=null;f!==null;)a=f.alternate,a!==null&&zi(a)===null&&(D=f),f=f.sibling;f=D,f===null?(D=l.child,l.child=null):(D=f.sibling,f.sibling=null),pp(l,!1,D,f,H,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,D=l.child,l.child=null;D!==null;){if(a=D.alternate,a!==null&&zi(a)===null){l.child=D;break}a=D.sibling,D.sibling=f,f=D,D=a}pp(l,!0,f,null,H,g);break;case"together":pp(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function Pc(a,l,f){if(a!==null&&(l.dependencies=a.dependencies),R|=l.lanes,(f&l.childLanes)===0)if(a!==null){if(dc(a,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(r(153));if(l.child!==null){for(a=l.child,f=Co(a,a.pendingProps),l.child=f,f.return=l;a.sibling!==null;)a=a.sibling,f=f.sibling=Co(a,a.pendingProps),f.return=l;f.sibling=null}return l.child}function mp(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&CA(a)))}function gp(a,l,f){switch(l.tag){case 3:Ne(l,l.stateNode.containerInfo),cc(l,Ya,a.memoizedState.cache),Dc();break;case 27:case 5:Qe(l);break;case 4:Ne(l,l.stateNode.containerInfo);break;case 10:cc(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,ta(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(Ja(l),l.flags|=128,null):(f&l.child.childLanes)!==0?Gm(a,l,f):(Ja(l),a=Pc(a,l,f),a!==null?a.sibling:null);Ja(l);break;case 19:var D=(a.flags&128)!==0;if(g=(f&l.childLanes)!==0,g||(dc(a,l,f,!1),g=(f&l.childLanes)!==0),D){if(g)return Wm(a,l,f);l.flags|=128}if(D=l.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),ge(Rr,Rr.current),g)break;return null;case 22:return l.lanes=0,Mc(a,l,f,l.pendingProps);case 24:cc(l,Ya,a.memoizedState.cache)}return Pc(a,l,f)}function $h(a,l,f){if(a!==null)if(a.memoizedProps!==l.pendingProps)Qa=!0;else{if(!mp(a,f)&&(l.flags&128)===0)return Qa=!1,gp(a,l,f);Qa=(a.flags&131072)!==0}else Qa=!1,xr&&(l.flags&1048576)!==0&&Fh(l,ac,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(a=Et(l.elementType),l.type=a,typeof a=="function")Dl(a)?(g=xd(a,g),l.tag=1,l=dp(null,l,a,g,f)):(l.tag=0,l=Hu(null,l,a,g,f));else{if(a!=null){var D=a.$$typeof;if(D===k){l.tag=11,l=di(null,l,a,g,f);break e}else if(D===$){l.tag=14,l=vd(null,l,a,g,f);break e}}throw l=te(a)||a,Error(r(306,l,""))}}return l;case 0:return Hu(a,l,l.type,l.pendingProps,f);case 1:return g=l.type,D=xd(g,l.pendingProps),dp(a,l,g,D,f);case 3:e:{if(Ne(l,l.stateNode.containerInfo),a===null)throw Error(r(387));g=l.pendingProps;var H=l.memoizedState;D=H.element,Ua(a,l),ai(l,g,null,f);var Ae=l.memoizedState;if(g=Ae.cache,cc(l,Ya,g),g!==H.cache&&ml(l,[Ya],f,!0),ea(),g=Ae.element,H.isDehydrated)if(H={element:g,isDehydrated:!1,cache:Ae.cache},l.updateQueue.baseState=H,l.memoizedState=H,l.flags&256){l=Ap(a,l,g,f);break e}else if(g!==D){D=Eo(Error(r(424)),l),_l(D),l=Ap(a,l,g,f);break e}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(ba=gc(a.firstChild),Fi=l,xr=!0,Xi=null,Ka=!0,f=Yn(l,null,g,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Dc(),g===D){l=Pc(a,l,f);break e}Vi(a,l,g,f)}l=l.child}return l;case 26:return ku(a,l),a===null?(f=mw(l.type,null,l.pendingProps,null))?l.memoizedState=f:xr||(f=l.type,a=l.pendingProps,g=mg(be.current).createElement(f),g[Mt]=l,g[kt]=a,po(g,f,a),nr(g),l.stateNode=g):l.memoizedState=mw(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return Qe(l),a===null&&xr&&(g=l.stateNode=hw(l.type,l.pendingProps,be.current),Fi=l,Ka=!0,D=ba,GA(l.type)?(d0=D,ba=gc(g.firstChild)):ba=D),Vi(a,l,l.pendingProps.children,f),ku(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&xr&&((D=g=ba)&&(g=WR(g,l.type,l.pendingProps,Ka),g!==null?(l.stateNode=g,Fi=l,ba=gc(g.firstChild),Ka=!1,D=!0):D=!1),D||oc(l)),Qe(l),D=l.type,H=l.pendingProps,Ae=a!==null?a.memoizedProps:null,g=H.children,a0(D,H)?g=null:Ae!==null&&a0(D,Ae)&&(l.flags|=32),l.memoizedState!==null&&(D=Eu(a,l,Tu,null,null,f),Tp._currentValue=D),ku(a,l),Vi(a,l,g,f),l.child;case 6:return a===null&&xr&&((a=f=ba)&&(f=YR(f,l.pendingProps,Ka),f!==null?(l.stateNode=f,Fi=l,ba=null,a=!0):a=!1),a||oc(l)),null;case 13:return Gm(a,l,f);case 4:return Ne(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=ja(l,null,g,f):Vi(a,l,g,f),l.child;case 11:return di(a,l,l.type,l.pendingProps,f);case 7:return Vi(a,l,l.pendingProps,f),l.child;case 8:return Vi(a,l,l.pendingProps.children,f),l.child;case 12:return Vi(a,l,l.pendingProps.children,f),l.child;case 10:return g=l.pendingProps,cc(l,l.type,g.value),Vi(a,l,g.children,f),l.child;case 9:return D=l.type._context,g=l.pendingProps.children,Ac(l),D=Ri(D),g=g(D),l.flags|=1,Vi(a,l,g,f),l.child;case 14:return vd(a,l,l.type,l.pendingProps,f);case 15:return Jd(a,l,l.type,l.pendingProps,f);case 19:return Wm(a,l,f);case 31:return $m(a,l,f);case 22:return Mc(a,l,f,l.pendingProps);case 24:return Ac(l),g=Ri(Ya),a===null?(D=Ue(),D===null&&(D=Sa,H=dd(),D.pooledCache=H,H.refCount++,H!==null&&(D.pooledCacheLanes|=f),D=H),l.memoizedState={parent:g,cache:D},Us(l),cc(l,Ya,D)):((a.lanes&f)!==0&&(Ua(a,l),ai(l,null,null,f),ea()),D=a.memoizedState,H=l.memoizedState,D.parent!==g?(D={parent:g,cache:g},l.memoizedState=D,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=D),cc(l,Ya,g)):(g=H.cache,cc(l,Ya,g),g!==D.cache&&ml(l,[Ya],f,!0))),Vi(a,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function pc(a){a.flags|=4}function yp(a,l,f,g,D){if((l=(a.mode&32)!==0)&&(l=!1),l){if(a.flags|=16777216,(D&335544128)===D)if(a.stateNode.complete)a.flags|=8192;else if(Hc())a.flags|=8192;else throw Wt=xt,It}else a.flags&=-16777217}function Ym(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!bw(l))if(Hc())a.flags|=8192;else throw Wt=xt,It}function zu(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Rs():536870912,a.lanes|=l,Ke|=l)}function Vu(a,l){if(!xr)switch(a.tailMode){case"hidden":l=a.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function _a(a){var l=a.alternate!==null&&a.alternate.child===a.child,f=0,g=0;if(l)for(var D=a.child;D!==null;)f|=D.lanes|D.childLanes,g|=D.subtreeFlags&65011712,g|=D.flags&65011712,D.return=a,D=D.sibling;else for(D=a.child;D!==null;)f|=D.lanes|D.childLanes,g|=D.subtreeFlags,g|=D.flags,D.return=a,D=D.sibling;return a.subtreeFlags|=g,a.childLanes=f,l}function Kx(a,l,f){var g=l.pendingProps;switch(NA(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _a(l),null;case 1:return _a(l),null;case 3:return f=l.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),Ro(Ya),Je(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(Ii(l)?pc(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,$d())),_a(l),null;case 26:var D=l.type,H=l.memoizedState;return a===null?(pc(l),H!==null?(_a(l),Ym(l,H)):(_a(l),yp(l,D,null,g,f))):H?H!==a.memoizedState?(pc(l),_a(l),Ym(l,H)):(_a(l),l.flags&=-16777217):(a=a.memoizedProps,a!==g&&pc(l),_a(l),yp(l,D,a,g,f)),null;case 27:if(pt(l),f=be.current,D=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&pc(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return _a(l),null}a=we.current,Ii(l)?Cu(l):(a=hw(D,g,f),l.stateNode=a,pc(l))}return _a(l),null;case 5:if(pt(l),D=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&pc(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return _a(l),null}if(H=we.current,Ii(l))Cu(l);else{var Ae=mg(be.current);switch(H){case 1:H=Ae.createElementNS("http://www.w3.org/2000/svg",D);break;case 2:H=Ae.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;default:switch(D){case"svg":H=Ae.createElementNS("http://www.w3.org/2000/svg",D);break;case"math":H=Ae.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;case"script":H=Ae.createElement("div"),H.innerHTML="<script><\/script>",H=H.removeChild(H.firstChild);break;case"select":H=typeof g.is=="string"?Ae.createElement("select",{is:g.is}):Ae.createElement("select"),g.multiple?H.multiple=!0:g.size&&(H.size=g.size);break;default:H=typeof g.is=="string"?Ae.createElement(D,{is:g.is}):Ae.createElement(D)}}H[Mt]=l,H[kt]=g;e:for(Ae=l.child;Ae!==null;){if(Ae.tag===5||Ae.tag===6)H.appendChild(Ae.stateNode);else if(Ae.tag!==4&&Ae.tag!==27&&Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}if(Ae===l)break e;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===l)break e;Ae=Ae.return}Ae.sibling.return=Ae.return,Ae=Ae.sibling}l.stateNode=H;e:switch(po(H,D,g),D){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&pc(l)}}return _a(l),yp(l,l.type,a===null?null:a.memoizedProps,l.pendingProps,f),null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==g&&pc(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(r(166));if(a=be.current,Ii(l)){if(a=l.stateNode,f=l.memoizedProps,g=null,D=Fi,D!==null)switch(D.tag){case 27:case 5:g=D.memoizedProps}a[Mt]=l,a=!!(a.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||sw(a.nodeValue,f)),a||oc(l,!0)}else a=mg(a).createTextNode(g),a[Mt]=l,l.stateNode=a}return _a(l),null;case 31:if(f=l.memoizedState,a===null||a.memoizedState!==null){if(g=Ii(l),f!==null){if(a===null){if(!g)throw Error(r(318));if(a=l.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[Mt]=l}else Dc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;_a(l),a=!1}else f=$d(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=f),a=!0;if(!a)return l.flags&256?(la(l),l):(la(l),null);if((l.flags&128)!==0)throw Error(r(558))}return _a(l),null;case 13:if(g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(D=Ii(l),g!==null&&g.dehydrated!==null){if(a===null){if(!D)throw Error(r(318));if(D=l.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));D[Mt]=l}else Dc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;_a(l),D=!1}else D=$d(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=D),D=!0;if(!D)return l.flags&256?(la(l),l):(la(l),null)}return la(l),(l.flags&128)!==0?(l.lanes=f,l):(f=g!==null,a=a!==null&&a.memoizedState!==null,f&&(g=l.child,D=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(D=g.alternate.memoizedState.cachePool.pool),H=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(H=g.memoizedState.cachePool.pool),H!==D&&(g.flags|=2048)),f!==a&&f&&(l.child.flags|=8192),zu(l,l.updateQueue),_a(l),null);case 4:return Je(),a===null&&e0(l.stateNode.containerInfo),_a(l),null;case 10:return Ro(l.type),_a(l),null;case 19:if(Z(Rr),g=l.memoizedState,g===null)return _a(l),null;if(D=(l.flags&128)!==0,H=g.rendering,H===null)if(D)Vu(g,!1);else{if(O!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(H=zi(a),H!==null){for(l.flags|=128,Vu(g,!1),a=H.updateQueue,l.updateQueue=a,zu(l,a),l.subtreeFlags=0,a=f,f=l.child;f!==null;)zd(f,a),f=f.sibling;return ge(Rr,Rr.current&1|2),xr&&co(l,g.treeForkCount),l.child}a=a.sibling}g.tail!==null&&ns()>$s&&(l.flags|=128,D=!0,Vu(g,!1),l.lanes=4194304)}else{if(!D)if(a=zi(H),a!==null){if(l.flags|=128,D=!0,a=a.updateQueue,l.updateQueue=a,zu(l,a),Vu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!H.alternate&&!xr)return _a(l),null}else 2*ns()-g.renderingStartTime>$s&&f!==536870912&&(l.flags|=128,D=!0,Vu(g,!1),l.lanes=4194304);g.isBackwards?(H.sibling=l.child,l.child=H):(a=g.last,a!==null?a.sibling=H:l.child=H,g.last=H)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=ns(),a.sibling=null,f=Rr.current,ge(Rr,D?f&1|2:f&1),xr&&co(l,g.treeForkCount),a):(_a(l),null);case 22:case 23:return la(l),oi(),g=l.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(f&536870912)!==0&&(l.flags&128)===0&&(_a(l),l.subtreeFlags&6&&(l.flags|=8192)):_a(l),f=l.updateQueue,f!==null&&zu(l,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==f&&(l.flags|=2048),a!==null&&Z(Re),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Ro(Ya),_a(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function zx(a,l){switch(NA(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Ro(Ya),Je(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return pt(l),null;case 31:if(l.memoizedState!==null){if(la(l),l.alternate===null)throw Error(r(340));Dc()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 13:if(la(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Dc()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Z(Rr),null;case 4:return Je(),null;case 10:return Ro(l.type),null;case 22:case 23:return la(l),oi(),a!==null&&Z(Re),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return Ro(Ya),null;case 25:return null;default:return null}}function Xm(a,l){switch(NA(l),l.tag){case 3:Ro(Ya),Je();break;case 26:case 27:case 5:pt(l);break;case 4:Je();break;case 31:l.memoizedState!==null&&la(l);break;case 13:la(l);break;case 19:Z(Rr);break;case 10:Ro(l.type);break;case 22:case 23:la(l),oi(),a!==null&&Z(Re);break;case 24:Ro(Ya)}}function eA(a,l){try{var f=l.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var D=g.next;f=D;do{if((f.tag&a)===a){g=void 0;var H=f.create,Ae=f.inst;g=H(),Ae.destroy=g}f=f.next}while(f!==D)}}catch(Oe){Ba(l,l.return,Oe)}}function bd(a,l,f){try{var g=l.updateQueue,D=g!==null?g.lastEffect:null;if(D!==null){var H=D.next;g=H;do{if((g.tag&a)===a){var Ae=g.inst,Oe=Ae.destroy;if(Oe!==void 0){Ae.destroy=void 0,D=l;var At=f,Ut=Oe;try{Ut()}catch(ts){Ba(D,At,ts)}}}g=g.next}while(g!==H)}}catch(ts){Ba(l,l.return,ts)}}function Gh(a){var l=a.updateQueue;if(l!==null){var f=a.stateNode;try{ii(l,f)}catch(g){Ba(a,a.return,g)}}}function Jm(a,l,f){f.props=xd(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(g){Ba(a,l,g)}}function zs(a,l){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof f=="function"?a.refCleanup=f(g):f.current=g}}catch(D){Ba(a,l,D)}}function uo(a,l){var f=a.ref,g=a.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(D){Ba(a,l,D)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(D){Ba(a,l,D)}else f.current=null}function $u(a){var l=a.type,f=a.memoizedProps,g=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(D){Ba(a,a.return,D)}}function Lo(a,l,f){try{var g=a.stateNode;KR(g,a.type,f,l),g[kt]=l}catch(D){Ba(a,a.return,D)}}function Zm(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&GA(a.type)||a.tag===4}function qr(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Zm(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&GA(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Ta(a,l,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(a),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Le));else if(g!==4&&(g===27&&GA(a.type)&&(f=a.stateNode,l=null),a=a.child,a!==null))for(Ta(a,l,f),a=a.sibling;a!==null;)Ta(a,l,f),a=a.sibling}function tA(a,l,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?f.insertBefore(a,l):f.appendChild(a);else if(g!==4&&(g===27&&GA(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(tA(a,l,f),a=a.sibling;a!==null;)tA(a,l,f),a=a.sibling}function eg(a){var l=a.stateNode,f=a.memoizedProps;try{for(var g=a.type,D=l.attributes;D.length;)l.removeAttributeNode(D[0]);po(l,g,f),l[Mt]=a,l[kt]=f}catch(H){Ba(a,a.return,H)}}var vl=!1,wi=!1,KA=!1,tg=typeof WeakSet=="function"?WeakSet:Set,$i=null;function sg(a,l){if(a=a.containerInfo,n0=wg,a=dl(a),Al(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var D=g.anchorOffset,H=g.focusNode;g=g.focusOffset;try{f.nodeType,H.nodeType}catch{f=null;break e}var Ae=0,Oe=-1,At=-1,Ut=0,ts=0,As=a,Qt=null;t:for(;;){for(var $t;As!==f||D!==0&&As.nodeType!==3||(Oe=Ae+D),As!==H||g!==0&&As.nodeType!==3||(At=Ae+g),As.nodeType===3&&(Ae+=As.nodeValue.length),($t=As.firstChild)!==null;)Qt=As,As=$t;for(;;){if(As===a)break t;if(Qt===f&&++Ut===D&&(Oe=Ae),Qt===H&&++ts===g&&(At=Ae),($t=As.nextSibling)!==null)break;As=Qt,Qt=As.parentNode}As=$t}f=Oe===-1||At===-1?null:{start:Oe,end:At}}else f=null}f=f||{start:0,end:0}}else f=null;for(r0={focusedElem:a,selectionRange:f},wg=!1,$i=l;$i!==null;)if(l=$i,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,$i=a;else for(;$i!==null;){switch(l=$i,H=l.alternate,a=l.flags,l.tag){case 0:if((a&4)!==0&&(a=l.updateQueue,a=a!==null?a.events:null,a!==null))for(f=0;f<a.length;f++)D=a[f],D.ref.impl=D.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&H!==null){a=void 0,f=l,D=H.memoizedProps,H=H.memoizedState,g=f.stateNode;try{var ln=xd(f.type,D);a=g.getSnapshotBeforeUpdate(ln,H),g.__reactInternalSnapshotBeforeUpdate=a}catch(Pn){Ba(f,f.return,Pn)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,f=a.nodeType,f===9)o0(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":o0(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=l.sibling,a!==null){a.return=l.return,$i=a;break}$i=l.return}}function ng(a,l,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:bl(a,f),g&4&&eA(5,f);break;case 1:if(bl(a,f),g&4)if(a=f.stateNode,l===null)try{a.componentDidMount()}catch(Ae){Ba(f,f.return,Ae)}else{var D=xd(f.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(D,l,a.__reactInternalSnapshotBeforeUpdate)}catch(Ae){Ba(f,f.return,Ae)}}g&64&&Gh(f),g&512&&zs(f,f.return);break;case 3:if(bl(a,f),g&64&&(a=f.updateQueue,a!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{ii(a,l)}catch(Ae){Ba(f,f.return,Ae)}}break;case 27:l===null&&g&4&&eg(f);case 26:case 5:bl(a,f),l===null&&g&4&&$u(f),g&512&&zs(f,f.return);break;case 12:bl(a,f);break;case 31:bl(a,f),g&4&&vp(a,f);break;case 13:bl(a,f),g&4&&rg(a,f),g&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=IR.bind(null,f),XR(a,f))));break;case 22:if(g=f.memoizedState!==null||vl,!g){l=l!==null&&l.memoizedState!==null||wi,D=vl;var H=wi;vl=g,(wi=l)&&!H?kc(a,f,(f.subtreeFlags&8772)!==0):bl(a,f),vl=D,wi=H}break;case 30:break;default:bl(a,f)}}function xp(a){var l=a.alternate;l!==null&&(a.alternate=null,xp(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Wr(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Va=null,ho=!1;function mc(a,l,f){for(f=f.child;f!==null;)qh(a,l,f),f=f.sibling}function qh(a,l,f){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Ht,f)}catch{}switch(f.tag){case 26:wi||uo(f,l),mc(a,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:wi||uo(f,l);var g=Va,D=ho;GA(f.type)&&(Va=f.stateNode,ho=!1),mc(a,l,f),Bp(f.stateNode),Va=g,ho=D;break;case 5:wi||uo(f,l);case 6:if(g=Va,D=ho,Va=null,mc(a,l,f),Va=g,ho=D,Va!==null)if(ho)try{(Va.nodeType===9?Va.body:Va.nodeName==="HTML"?Va.ownerDocument.body:Va).removeChild(f.stateNode)}catch(H){Ba(f,l,H)}else try{Va.removeChild(f.stateNode)}catch(H){Ba(f,l,H)}break;case 18:Va!==null&&(ho?(a=Va,lw(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),sf(a)):lw(Va,f.stateNode));break;case 4:g=Va,D=ho,Va=f.stateNode.containerInfo,ho=!0,mc(a,l,f),Va=g,ho=D;break;case 0:case 11:case 14:case 15:bd(2,f,l),wi||bd(4,f,l),mc(a,l,f);break;case 1:wi||(uo(f,l),g=f.stateNode,typeof g.componentWillUnmount=="function"&&Jm(f,l,g)),mc(a,l,f);break;case 21:mc(a,l,f);break;case 22:wi=(g=wi)||f.memoizedState!==null,mc(a,l,f),wi=g;break;default:mc(a,l,f)}}function vp(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{sf(a)}catch(f){Ba(l,l.return,f)}}}function rg(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{sf(a)}catch(f){Ba(l,l.return,f)}}function ag(a){switch(a.tag){case 31:case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new tg),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new tg),l;default:throw Error(r(435,a.tag))}}function Wh(a,l){var f=ag(a);l.forEach(function(g){if(!f.has(g)){f.add(g);var D=RR.bind(null,a,g);g.then(D,D)}})}function Do(a,l){var f=l.deletions;if(f!==null)for(var g=0;g<f.length;g++){var D=f[g],H=a,Ae=l,Oe=Ae;e:for(;Oe!==null;){switch(Oe.tag){case 27:if(GA(Oe.type)){Va=Oe.stateNode,ho=!1;break e}break;case 5:Va=Oe.stateNode,ho=!1;break e;case 3:case 4:Va=Oe.stateNode.containerInfo,ho=!0;break e}Oe=Oe.return}if(Va===null)throw Error(r(160));qh(H,Ae,D),Va=null,ho=!1,H=D.alternate,H!==null&&(H.return=null),D.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Gu(l,a),l=l.sibling}var Kl=null;function Gu(a,l){var f=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Do(l,a),Ma(a),g&4&&(bd(3,a,a.return),eA(3,a),bd(5,a,a.return));break;case 1:Do(l,a),Ma(a),g&512&&(wi||f===null||uo(f,f.return)),g&64&&vl&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var D=Kl;if(Do(l,a),Ma(a),g&512&&(wi||f===null||uo(f,f.return)),g&4){var H=f!==null?f.memoizedState:null;if(g=a.memoizedState,f===null)if(g===null)if(a.stateNode===null){e:{g=a.type,f=a.memoizedProps,D=D.ownerDocument||D;t:switch(g){case"title":H=D.getElementsByTagName("title")[0],(!H||H[Hs]||H[Mt]||H.namespaceURI==="http://www.w3.org/2000/svg"||H.hasAttribute("itemprop"))&&(H=D.createElement(g),D.head.insertBefore(H,D.querySelector("head > title"))),po(H,g,f),H[Mt]=a,nr(H),g=H;break e;case"link":var Ae=xw("link","href",D).get(g+(f.href||""));if(Ae){for(var Oe=0;Oe<Ae.length;Oe++)if(H=Ae[Oe],H.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&H.getAttribute("rel")===(f.rel==null?null:f.rel)&&H.getAttribute("title")===(f.title==null?null:f.title)&&H.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){Ae.splice(Oe,1);break t}}H=D.createElement(g),po(H,g,f),D.head.appendChild(H);break;case"meta":if(Ae=xw("meta","content",D).get(g+(f.content||""))){for(Oe=0;Oe<Ae.length;Oe++)if(H=Ae[Oe],H.getAttribute("content")===(f.content==null?null:""+f.content)&&H.getAttribute("name")===(f.name==null?null:f.name)&&H.getAttribute("property")===(f.property==null?null:f.property)&&H.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&H.getAttribute("charset")===(f.charSet==null?null:f.charSet)){Ae.splice(Oe,1);break t}}H=D.createElement(g),po(H,g,f),D.head.appendChild(H);break;default:throw Error(r(468,g))}H[Mt]=a,nr(H),g=H}a.stateNode=g}else vw(D,a.type,a.stateNode);else a.stateNode=yw(D,g,a.memoizedProps);else H!==g?(H===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):H.count--,g===null?vw(D,a.type,a.stateNode):yw(D,g,a.memoizedProps)):g===null&&a.stateNode!==null&&Lo(a,a.memoizedProps,f.memoizedProps)}break;case 27:Do(l,a),Ma(a),g&512&&(wi||f===null||uo(f,f.return)),f!==null&&g&4&&Lo(a,a.memoizedProps,f.memoizedProps);break;case 5:if(Do(l,a),Ma(a),g&512&&(wi||f===null||uo(f,f.return)),a.flags&32){D=a.stateNode;try{rr(D,"")}catch(ln){Ba(a,a.return,ln)}}g&4&&a.stateNode!=null&&(D=a.memoizedProps,Lo(a,D,f!==null?f.memoizedProps:D)),g&1024&&(KA=!0);break;case 6:if(Do(l,a),Ma(a),g&4){if(a.stateNode===null)throw Error(r(162));g=a.memoizedProps,f=a.stateNode;try{f.nodeValue=g}catch(ln){Ba(a,a.return,ln)}}break;case 3:if(xg=null,D=Kl,Kl=gg(l.containerInfo),Do(l,a),Kl=D,Ma(a),g&4&&f!==null&&f.memoizedState.isDehydrated)try{sf(l.containerInfo)}catch(ln){Ba(a,a.return,ln)}KA&&(KA=!1,bp(a));break;case 4:g=Kl,Kl=gg(a.stateNode.containerInfo),Do(l,a),Ma(a),Kl=g;break;case 12:Do(l,a),Ma(a);break;case 31:Do(l,a),Ma(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Wh(a,g)));break;case 13:Do(l,a),Ma(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Ct=ns()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Wh(a,g)));break;case 22:D=a.memoizedState!==null;var At=f!==null&&f.memoizedState!==null,Ut=vl,ts=wi;if(vl=Ut||D,wi=ts||At,Do(l,a),wi=ts,vl=Ut,Ma(a),g&8192)e:for(l=a.stateNode,l._visibility=D?l._visibility&-2:l._visibility|1,D&&(f===null||At||vl||wi||sA(a)),f=null,l=a;;){if(l.tag===5||l.tag===26){if(f===null){At=f=l;try{if(H=At.stateNode,D)Ae=H.style,typeof Ae.setProperty=="function"?Ae.setProperty("display","none","important"):Ae.display="none";else{Oe=At.stateNode;var As=At.memoizedProps.style,Qt=As!=null&&As.hasOwnProperty("display")?As.display:null;Oe.style.display=Qt==null||typeof Qt=="boolean"?"":(""+Qt).trim()}}catch(ln){Ba(At,At.return,ln)}}}else if(l.tag===6){if(f===null){At=l;try{At.stateNode.nodeValue=D?"":At.memoizedProps}catch(ln){Ba(At,At.return,ln)}}}else if(l.tag===18){if(f===null){At=l;try{var $t=At.stateNode;D?cw($t,!0):cw(At.stateNode,!1)}catch(ln){Ba(At,At.return,ln)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=a.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Wh(a,f))));break;case 19:Do(l,a),Ma(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Wh(a,g)));break;case 30:break;case 21:break;default:Do(l,a),Ma(a)}}function Ma(a){var l=a.flags;if(l&2){try{for(var f,g=a.return;g!==null;){if(Zm(g)){f=g;break}g=g.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var D=f.stateNode,H=qr(a);tA(a,H,D);break;case 5:var Ae=f.stateNode;f.flags&32&&(rr(Ae,""),f.flags&=-33);var Oe=qr(a);tA(a,Oe,Ae);break;case 3:case 4:var At=f.stateNode.containerInfo,Ut=qr(a);Ta(a,Ut,At);break;default:throw Error(r(161))}}catch(ts){Ba(a,a.return,ts)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function bp(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;bp(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function bl(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)ng(a,l.alternate,l),l=l.sibling}function sA(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:bd(4,l,l.return),sA(l);break;case 1:uo(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&Jm(l,l.return,f),sA(l);break;case 27:Bp(l.stateNode);case 26:case 5:uo(l,l.return),sA(l);break;case 22:l.memoizedState===null&&sA(l);break;case 30:sA(l);break;default:sA(l)}a=a.sibling}}function kc(a,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,D=a,H=l,Ae=H.flags;switch(H.tag){case 0:case 11:case 15:kc(D,H,f),eA(4,H);break;case 1:if(kc(D,H,f),g=H,D=g.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(Ut){Ba(g,g.return,Ut)}if(g=H,D=g.updateQueue,D!==null){var Oe=g.stateNode;try{var At=D.shared.hiddenCallbacks;if(At!==null)for(D.shared.hiddenCallbacks=null,D=0;D<At.length;D++)Ki(At[D],Oe)}catch(Ut){Ba(g,g.return,Ut)}}f&&Ae&64&&Gh(H),zs(H,H.return);break;case 27:eg(H);case 26:case 5:kc(D,H,f),f&&g===null&&Ae&4&&$u(H),zs(H,H.return);break;case 12:kc(D,H,f);break;case 31:kc(D,H,f),f&&Ae&4&&vp(D,H);break;case 13:kc(D,H,f),f&&Ae&4&&rg(D,H);break;case 22:H.memoizedState===null&&kc(D,H,f),zs(H,H.return);break;case 30:break;default:kc(D,H,f)}l=l.sibling}}function qu(a,l){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&Gd(f))}function jd(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Gd(a))}function Qo(a,l,f,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)ig(a,l,f,g),l=l.sibling}function ig(a,l,f,g){var D=l.flags;switch(l.tag){case 0:case 11:case 15:Qo(a,l,f,g),D&2048&&eA(9,l);break;case 1:Qo(a,l,f,g);break;case 3:Qo(a,l,f,g),D&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Gd(a)));break;case 12:if(D&2048){Qo(a,l,f,g),a=l.stateNode;try{var H=l.memoizedProps,Ae=H.id,Oe=H.onPostCommit;typeof Oe=="function"&&Oe(Ae,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(At){Ba(l,l.return,At)}}else Qo(a,l,f,g);break;case 31:Qo(a,l,f,g);break;case 13:Qo(a,l,f,g);break;case 23:break;case 22:H=l.stateNode,Ae=l.alternate,l.memoizedState!==null?H._visibility&2?Qo(a,l,f,g):Wu(a,l):H._visibility&2?Qo(a,l,f,g):(H._visibility|=2,zl(a,l,f,g,(l.subtreeFlags&10256)!==0||!1)),D&2048&&qu(Ae,l);break;case 24:Qo(a,l,f,g),D&2048&&jd(l.alternate,l);break;default:Qo(a,l,f,g)}}function zl(a,l,f,g,D){for(D=D&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var H=a,Ae=l,Oe=f,At=g,Ut=Ae.flags;switch(Ae.tag){case 0:case 11:case 15:zl(H,Ae,Oe,At,D),eA(8,Ae);break;case 23:break;case 22:var ts=Ae.stateNode;Ae.memoizedState!==null?ts._visibility&2?zl(H,Ae,Oe,At,D):Wu(H,Ae):(ts._visibility|=2,zl(H,Ae,Oe,At,D)),D&&Ut&2048&&qu(Ae.alternate,Ae);break;case 24:zl(H,Ae,Oe,At,D),D&&Ut&2048&&jd(Ae.alternate,Ae);break;default:zl(H,Ae,Oe,At,D)}l=l.sibling}}function Wu(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=a,g=l,D=g.flags;switch(g.tag){case 22:Wu(f,g),D&2048&&qu(g.alternate,g);break;case 24:Wu(f,g),D&2048&&jd(g.alternate,g);break;default:Wu(f,g)}l=l.sibling}}var Yu=8192;function nA(a,l,f){if(a.subtreeFlags&Yu)for(a=a.child;a!==null;)og(a,l,f),a=a.sibling}function og(a,l,f){switch(a.tag){case 26:nA(a,l,f),a.flags&Yu&&a.memoizedState!==null&&c3(f,Kl,a.memoizedState,a.memoizedProps);break;case 5:nA(a,l,f);break;case 3:case 4:var g=Kl;Kl=gg(a.stateNode.containerInfo),nA(a,l,f),Kl=g;break;case 22:a.memoizedState===null&&(g=a.alternate,g!==null&&g.memoizedState!==null?(g=Yu,Yu=16777216,nA(a,l,f),Yu=g):nA(a,l,f));break;default:nA(a,l,f)}}function jp(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function Xu(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];$i=g,cg(g,a)}jp(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)lg(a),a=a.sibling}function lg(a){switch(a.tag){case 0:case 11:case 15:Xu(a),a.flags&2048&&bd(9,a,a.return);break;case 3:Xu(a);break;case 12:Xu(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,Yh(a)):Xu(a);break;default:Xu(a)}}function Yh(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];$i=g,cg(g,a)}jp(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:bd(8,l,l.return),Yh(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Yh(l));break;default:Yh(l)}a=a.sibling}}function cg(a,l){for(;$i!==null;){var f=$i;switch(f.tag){case 0:case 11:case 15:bd(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Gd(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,$i=g;else e:for(f=a;$i!==null;){g=$i;var D=g.sibling,H=g.return;if(xp(g),g===f){$i=null;break e}if(D!==null){D.return=H,$i=D;break e}$i=H}}}var Vx={getCacheForType:function(a){var l=Ri(Ya),f=l.data.get(a);return f===void 0&&(f=a(),l.data.set(a,f)),f},cacheSignal:function(){return Ri(Ya).controller.signal}},$x=typeof WeakMap=="function"?WeakMap:Map,sa=0,Sa=null,vr=null,Cr=0,da=0,al=null,wd=!1,zA=!1,T=!1,C=0,O=0,R=0,Y=0,he=0,Ee=0,Ke=0,ze=null,ht=null,wt=!1,Ct=0,Jt=0,$s=1/0,Fs=null,_s=null,fn=0,Js=null,Xs=null,dr=0,ar=0,Mn=null,qs=null,pr=0,Er=null;function vn(){return(sa&2)!==0&&Cr!==0?Cr&-Cr:ne.T!==null?Yx():Os()}function yi(){if(Ee===0)if((Cr&536870912)===0||xr){var a=on;on<<=1,(on&3932160)===0&&(on=262144),Ee=a}else Ee=536870912;return a=La.current,a!==null&&(a.flags|=32),Ee}function Na(a,l,f){(a===Sa&&(da===2||da===9)||a.cancelPendingCommit!==null)&&(jl(a,0),fo(a,Cr,Ee,!1)),ys(a,f),((sa&2)===0||a!==Sa)&&(a===Sa&&((sa&2)===0&&(Y|=f),O===4&&fo(a,Cr,Ee,!1)),Bd(a))}function _o(a,l,f){if((sa&6)!==0)throw Error(r(327));var g=!f&&(l&127)===0&&(l&a.expiredLanes)===0||Pt(a,l),D=g?VA(a,l):Kc(a,l,!0),H=g;do{if(D===0){zA&&!g&&fo(a,l,0,!1);break}else{if(f=a.current.alternate,H&&!Zi(f)){D=Kc(a,l,!1),H=!1;continue}if(D===2){if(H=l,a.errorRecoveryDisabledLanes&H)var Ae=0;else Ae=a.pendingLanes&-536870913,Ae=Ae!==0?Ae:Ae&536870912?536870912:0;if(Ae!==0){l=Ae;e:{var Oe=a;D=ze;var At=Oe.current.memoizedState.isDehydrated;if(At&&(jl(Oe,Ae).flags|=256),Ae=Kc(Oe,Ae,!1),Ae!==2){if(T&&!At){Oe.errorRecoveryDisabledLanes|=H,Y|=H,D=4;break e}H=ht,ht=D,H!==null&&(ht===null?ht=H:ht.push.apply(ht,H))}D=Ae}if(H=!1,D!==2)continue}}if(D===1){jl(a,0),fo(a,l,0,!0);break}e:{switch(g=a,H=D,H){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:fo(g,l,Ee,!wd);break e;case 2:ht=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(D=Ct+300-ns(),10<D)){if(fo(g,l,Ee,!wd),qt(g,0,!0)!==0)break e;dr=l,g.timeoutHandle=iw(Aa.bind(null,g,f,ht,Fs,wt,l,Ee,Y,Ke,wd,H,"Throttled",-0,0),D);break e}Aa(g,f,ht,Fs,wt,l,Ee,Y,Ke,wd,H,null,-0,0)}}break}while(!0);Bd(a)}function Aa(a,l,f,g,D,H,Ae,Oe,At,Ut,ts,As,Qt,$t){if(a.timeoutHandle=-1,As=l.subtreeFlags,As&8192||(As&16785408)===16785408){As={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Le},og(l,H,As);var ln=(H&62914560)===H?Ct-ns():(H&4194048)===H?Jt-ns():0;if(ln=d3(As,ln),ln!==null){dr=H,a.cancelPendingCommit=ln(_j.bind(null,a,l,H,f,g,D,Ae,Oe,At,ts,As,null,Qt,$t)),fo(a,H,Ae,!Ut);return}}_j(a,l,H,f,g,D,Ae,Oe,At)}function Zi(a){for(var l=a;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var D=f[g],H=D.getSnapshot;D=D.value;try{if(!Sr(H(),D))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function fo(a,l,f,g){l&=~he,l&=~Y,a.suspendedLanes|=l,a.pingedLanes&=~l,g&&(a.warmLanes|=l),g=a.expirationTimes;for(var D=l;0<D;){var H=31-Gt(D),Ae=1<<H;g[H]=-1,D&=~Ae}f!==0&&Zs(a,f,l)}function eo(){return(sa&6)===0?(wp(0),!1):!0}function ao(){if(vr!==null){if(da===0)var a=vr.return;else a=vr,pl=lc=null,Wd(a),cs=null,an=0,a=vr;for(;a!==null;)Xm(a.alternate,a),a=a.return;vr=null}}function jl(a,l){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,$R(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),dr=0,ao(),Sa=a,vr=f=Co(a.current,null),Cr=l,da=0,al=null,wd=!1,zA=Pt(a,l),T=!1,Ke=Ee=he=Y=R=O=0,ht=ze=null,wt=!1,(l&8)!==0&&(l|=l&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=l;0<g;){var D=31-Gt(g),H=1<<D;l|=a[D],g&=~H}return C=l,Hd(),f}function Vl(a,l){jn=null,ne.H=Qu,l===ft||l===Ge?(l=ss(),da=3):l===It?(l=ss(),da=4):da=l===lp?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,al=l,vr===null&&(O=1,Pu(a,Eo(l,a.current)))}function Hc(){var a=La.current;return a===null?!0:(Cr&4194048)===Cr?Br===null:(Cr&62914560)===Cr||(Cr&536870912)!==0?a===Br:!1}function Sd(){var a=ne.H;return ne.H=Qu,a===null?Qu:a}function Nd(){var a=ne.A;return ne.A=Vx,a}function wl(){O=4,wd||(Cr&4194048)!==Cr&&La.current!==null||(zA=!0),(R&134217727)===0&&(Y&134217727)===0||Sa===null||fo(Sa,Cr,Ee,!1)}function Kc(a,l,f){var g=sa;sa|=2;var D=Sd(),H=Nd();(Sa!==a||Cr!==l)&&(Fs=null,jl(a,l)),l=!1;var Ae=O;e:do try{if(da!==0&&vr!==null){var Oe=vr,At=al;switch(da){case 8:ao(),Ae=6;break e;case 3:case 2:case 9:case 6:La.current===null&&(l=!0);var Ut=da;if(da=0,al=null,Xh(a,Oe,At,Ut),f&&zA){Ae=0;break e}break;default:Ut=da,da=0,al=null,Xh(a,Oe,At,Ut)}}zc(),Ae=O;break}catch(ts){Vl(a,ts)}while(!0);return l&&a.shellSuspendCounter++,pl=lc=null,sa=g,ne.H=D,ne.A=H,vr===null&&(Sa=null,Cr=0,Hd()),Ae}function zc(){for(;vr!==null;)Lj(vr)}function VA(a,l){var f=sa;sa|=2;var g=Sd(),D=Nd();Sa!==a||Cr!==l?(Fs=null,$s=ns()+500,jl(a,l)):zA=Pt(a,l);e:do try{if(da!==0&&vr!==null){l=vr;var H=al;t:switch(da){case 1:da=0,al=null,Xh(a,l,H,1);break;case 2:case 9:if(jt(H)){da=0,al=null,Dj(l);break}l=function(){da!==2&&da!==9||Sa!==a||(da=7),Bd(a)},H.then(l,l);break e;case 3:da=7;break e;case 4:da=5;break e;case 7:jt(H)?(da=0,al=null,Dj(l)):(da=0,al=null,Xh(a,l,H,7));break;case 5:var Ae=null;switch(vr.tag){case 26:Ae=vr.memoizedState;case 5:case 27:var Oe=vr;if(Ae?bw(Ae):Oe.stateNode.complete){da=0,al=null;var At=Oe.sibling;if(At!==null)vr=At;else{var Ut=Oe.return;Ut!==null?(vr=Ut,dg(Ut)):vr=null}break t}}da=0,al=null,Xh(a,l,H,5);break;case 6:da=0,al=null,Xh(a,l,H,6);break;case 8:ao(),O=6;break e;default:throw Error(r(462))}}Ju();break}catch(ts){Vl(a,ts)}while(!0);return pl=lc=null,ne.H=g,ne.A=D,sa=f,vr!==null?0:(Sa=null,Cr=0,Hd(),O)}function Ju(){for(;vr!==null&&!qe();)Lj(vr)}function Lj(a){var l=$h(a.alternate,a,C);a.memoizedProps=a.pendingProps,l===null?dg(a):vr=l}function Dj(a){var l=a,f=l.alternate;switch(l.tag){case 15:case 0:l=HA(f,l,l.pendingProps,l.type,void 0,Cr);break;case 11:l=HA(f,l,l.pendingProps,l.type.render,l.ref,Cr);break;case 5:Wd(l);default:Xm(f,l),l=vr=zd(l,C),l=$h(f,l,C)}a.memoizedProps=a.pendingProps,l===null?dg(a):vr=l}function Xh(a,l,f,g){pl=lc=null,Wd(l),cs=null,an=0;var D=l.return;try{if(Hx(a,D,l,f,Cr)){O=1,Pu(a,Eo(f,a.current)),vr=null;return}}catch(H){if(D!==null)throw vr=D,H;O=1,Pu(a,Eo(f,a.current)),vr=null;return}l.flags&32768?(xr||g===1?a=!0:zA||(Cr&536870912)!==0?a=!1:(wd=a=!0,(g===2||g===9||g===3||g===6)&&(g=La.current,g!==null&&g.tag===13&&(g.flags|=16384))),Qj(l,a)):dg(l)}function dg(a){var l=a;do{if((l.flags&32768)!==0){Qj(l,wd);return}a=l.return;var f=Kx(l.alternate,l,C);if(f!==null){vr=f;return}if(l=l.sibling,l!==null){vr=l;return}vr=l=a}while(l!==null);O===0&&(O=5)}function Qj(a,l){do{var f=zx(a.alternate,a);if(f!==null){f.flags&=32767,vr=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(a=a.sibling,a!==null)){vr=a;return}vr=a=f}while(a!==null);O=6,vr=null}function _j(a,l,f,g,D,H,Ae,Oe,At){a.cancelPendingCommit=null;do Ag();while(fn!==0);if((sa&6)!==0)throw Error(r(327));if(l!==null){if(l===a.current)throw Error(r(177));if(H=l.lanes|l.childLanes,H|=vA,Ln(a,f,H,Ae,Oe,At),a===Sa&&(vr=Sa=null,Cr=0),Xs=l,Js=a,dr=f,ar=H,Mn=D,qs=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,OR(et,function(){return Kj(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=ne.T,ne.T=null,D=oe.p,oe.p=2,Ae=sa,sa|=4;try{sg(a,l,f)}finally{sa=Ae,oe.p=D,ne.T=g}}fn=1,Mj(),Pj(),kj()}}function Mj(){if(fn===1){fn=0;var a=Js,l=Xs,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=ne.T,ne.T=null;var g=oe.p;oe.p=2;var D=sa;sa|=4;try{Gu(l,a);var H=r0,Ae=dl(a.containerInfo),Oe=H.focusedElem,At=H.selectionRange;if(Ae!==Oe&&Oe&&Oe.ownerDocument&&el(Oe.ownerDocument.documentElement,Oe)){if(At!==null&&Al(Oe)){var Ut=At.start,ts=At.end;if(ts===void 0&&(ts=Ut),"selectionStart"in Oe)Oe.selectionStart=Ut,Oe.selectionEnd=Math.min(ts,Oe.value.length);else{var As=Oe.ownerDocument||document,Qt=As&&As.defaultView||window;if(Qt.getSelection){var $t=Qt.getSelection(),ln=Oe.textContent.length,Pn=Math.min(At.start,ln),Ia=At.end===void 0?Pn:Math.min(At.end,ln);!$t.extend&&Pn>Ia&&(Ae=Ia,Ia=Pn,Pn=Ae);var Nt=Ic(Oe,Pn),gt=Ic(Oe,Ia);if(Nt&&gt&&($t.rangeCount!==1||$t.anchorNode!==Nt.node||$t.anchorOffset!==Nt.offset||$t.focusNode!==gt.node||$t.focusOffset!==gt.offset)){var Ot=As.createRange();Ot.setStart(Nt.node,Nt.offset),$t.removeAllRanges(),Pn>Ia?($t.addRange(Ot),$t.extend(gt.node,gt.offset)):(Ot.setEnd(gt.node,gt.offset),$t.addRange(Ot))}}}}for(As=[],$t=Oe;$t=$t.parentNode;)$t.nodeType===1&&As.push({element:$t,left:$t.scrollLeft,top:$t.scrollTop});for(typeof Oe.focus=="function"&&Oe.focus(),Oe=0;Oe<As.length;Oe++){var os=As[Oe];os.element.scrollLeft=os.left,os.element.scrollTop=os.top}}wg=!!n0,r0=n0=null}finally{sa=D,oe.p=g,ne.T=f}}a.current=l,fn=2}}function Pj(){if(fn===2){fn=0;var a=Js,l=Xs,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=ne.T,ne.T=null;var g=oe.p;oe.p=2;var D=sa;sa|=4;try{ng(a,l.alternate,l)}finally{sa=D,oe.p=g,ne.T=f}}fn=3}}function kj(){if(fn===4||fn===3){fn=0,Tt();var a=Js,l=Xs,f=dr,g=qs;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?fn=5:(fn=0,Xs=Js=null,Hj(a,a.pendingLanes));var D=a.pendingLanes;if(D===0&&(_s=null),Ms(f),l=l.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Ht,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=ne.T,D=oe.p,oe.p=2,ne.T=null;try{for(var H=a.onRecoverableError,Ae=0;Ae<g.length;Ae++){var Oe=g[Ae];H(Oe.value,{componentStack:Oe.stack})}}finally{ne.T=l,oe.p=D}}(dr&3)!==0&&Ag(),Bd(a),D=a.pendingLanes,(f&261930)!==0&&(D&42)!==0?a===Er?pr++:(pr=0,Er=a):pr=0,wp(0)}}function Hj(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,Gd(l)))}function Ag(){return Mj(),Pj(),kj(),Kj()}function Kj(){if(fn!==5)return!1;var a=Js,l=ar;ar=0;var f=Ms(dr),g=ne.T,D=oe.p;try{oe.p=32>f?32:f,ne.T=null,f=Mn,Mn=null;var H=Js,Ae=dr;if(fn=0,Xs=Js=null,dr=0,(sa&6)!==0)throw Error(r(331));var Oe=sa;if(sa|=4,lg(H.current),ig(H,H.current,Ae,f),sa=Oe,wp(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Ht,H)}catch{}return!0}finally{oe.p=D,ne.T=g,Hj(a,l)}}function zj(a,l,f){l=Eo(f,l),l=ap(a.stateNode,l,2),a=Un(a,l,2),a!==null&&(ys(a,2),Bd(a))}function Ba(a,l,f){if(a.tag===3)zj(a,a,f);else for(;l!==null;){if(l.tag===3){zj(l,a,f);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(_s===null||!_s.has(g))){a=Eo(f,a),f=ip(2),g=Un(l,f,2),g!==null&&(op(f,g,l,a),ys(g,2),Bd(g));break}}l=l.return}}function Gx(a,l,f){var g=a.pingCache;if(g===null){g=a.pingCache=new $x;var D=new Set;g.set(l,D)}else D=g.get(l),D===void 0&&(D=new Set,g.set(l,D));D.has(f)||(T=!0,D.add(f),a=FR.bind(null,a,l,f),l.then(a,a))}function FR(a,l,f){var g=a.pingCache;g!==null&&g.delete(l),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,Sa===a&&(Cr&f)===f&&(O===4||O===3&&(Cr&62914560)===Cr&&300>ns()-Ct?(sa&2)===0&&jl(a,0):he|=f,Ke===Cr&&(Ke=0)),Bd(a)}function Vj(a,l){l===0&&(l=Rs()),a=hl(a,l),a!==null&&(ys(a,l),Bd(a))}function IR(a){var l=a.memoizedState,f=0;l!==null&&(f=l.retryLane),Vj(a,f)}function RR(a,l){var f=0;switch(a.tag){case 31:case 13:var g=a.stateNode,D=a.memoizedState;D!==null&&(f=D.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(l),Vj(a,f)}function OR(a,l){return Dt(a,l)}var ug=null,Jh=null,qx=!1,hg=!1,Wx=!1,$A=0;function Bd(a){a!==Jh&&a.next===null&&(Jh===null?ug=Jh=a:Jh=Jh.next=a),hg=!0,qx||(qx=!0,LR())}function wp(a,l){if(!Wx&&hg){Wx=!0;do for(var f=!1,g=ug;g!==null;){if(a!==0){var D=g.pendingLanes;if(D===0)var H=0;else{var Ae=g.suspendedLanes,Oe=g.pingedLanes;H=(1<<31-Gt(42|a)+1)-1,H&=D&~(Ae&~Oe),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(f=!0,Wj(g,H))}else H=Cr,H=qt(g,g===Sa?H:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(H&3)===0||Pt(g,H)||(f=!0,Wj(g,H));g=g.next}while(f);Wx=!1}}function UR(){$j()}function $j(){hg=qx=!1;var a=0;$A!==0&&VR()&&(a=$A);for(var l=ns(),f=null,g=ug;g!==null;){var D=g.next,H=Gj(g,l);H===0?(g.next=null,f===null?ug=D:f.next=D,D===null&&(Jh=f)):(f=g,(a!==0||(H&3)!==0)&&(hg=!0)),g=D}fn!==0&&fn!==5||wp(a),$A!==0&&($A=0)}function Gj(a,l){for(var f=a.suspendedLanes,g=a.pingedLanes,D=a.expirationTimes,H=a.pendingLanes&-62914561;0<H;){var Ae=31-Gt(H),Oe=1<<Ae,At=D[Ae];At===-1?((Oe&f)===0||(Oe&g)!==0)&&(D[Ae]=gs(Oe,l)):At<=l&&(a.expiredLanes|=Oe),H&=~Oe}if(l=Sa,f=Cr,f=qt(a,a===l?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,f===0||a===l&&(da===2||da===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&yt(g),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||Pt(a,f)){if(l=f&-f,l===a.callbackPriority)return l;switch(g!==null&&yt(g),Ms(f)){case 2:case 8:f=Ns;break;case 32:f=et;break;case 268435456:f=rt;break;default:f=et}return g=qj.bind(null,a),f=Dt(f,g),a.callbackPriority=l,a.callbackNode=f,l}return g!==null&&g!==null&&yt(g),a.callbackPriority=2,a.callbackNode=null,2}function qj(a,l){if(fn!==0&&fn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(Ag()&&a.callbackNode!==f)return null;var g=Cr;return g=qt(a,a===Sa?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(_o(a,g,l),Gj(a,ns()),a.callbackNode!=null&&a.callbackNode===f?qj.bind(null,a):null)}function Wj(a,l){if(Ag())return null;_o(a,l,!0)}function LR(){GR(function(){(sa&6)!==0?Dt(vs,UR):$j()})}function Yx(){if($A===0){var a=E;a===0&&(a=Is,Is<<=1,(Is&261888)===0&&(Is=256)),$A=a}return $A}function Yj(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ve(""+a)}function Xj(a,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,a.id&&f.setAttribute("form",a.id),l.parentNode.insertBefore(f,l),a=new FormData(a),f.parentNode.removeChild(f),a}function DR(a,l,f,g,D){if(l==="submit"&&f&&f.stateNode===D){var H=Yj((D[kt]||null).action),Ae=g.submitter;Ae&&(l=(l=Ae[kt]||null)?Yj(l.formAction):Ae.getAttribute("formAction"),l!==null&&(H=l,Ae=null));var Oe=new U("action","action",null,g,D);a.push({event:Oe,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if($A!==0){var At=Ae?Xj(D,Ae):new FormData(D);Mh(f,{pending:!0,data:At,method:D.method,action:H},null,At)}}else typeof H=="function"&&(Oe.preventDefault(),At=Ae?Xj(D,Ae):new FormData(D),Mh(f,{pending:!0,data:At,method:D.method,action:H},H,At))},currentTarget:D}]})}}for(var Xx=0;Xx<nc.length;Xx++){var Jx=nc[Xx],QR=Jx.toLowerCase(),_R=Jx[0].toUpperCase()+Jx.slice(1);oo(QR,"on"+_R)}oo(Rc,"onAnimationEnd"),oo(sc,"onAnimationIteration"),oo(ju,"onAnimationStart"),oo("dblclick","onDoubleClick"),oo("focusin","onFocus"),oo("focusout","onBlur"),oo(wu,"onTransitionRun"),oo(Su,"onTransitionStart"),oo(Nu,"onTransitionCancel"),oo(yA,"onTransitionEnd"),Yr("onMouseEnter",["mouseout","mouseover"]),Yr("onMouseLeave",["mouseout","mouseover"]),Yr("onPointerEnter",["pointerout","pointerover"]),Yr("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sp));function Jj(a,l){l=(l&4)!==0;for(var f=0;f<a.length;f++){var g=a[f],D=g.event;g=g.listeners;e:{var H=void 0;if(l)for(var Ae=g.length-1;0<=Ae;Ae--){var Oe=g[Ae],At=Oe.instance,Ut=Oe.currentTarget;if(Oe=Oe.listener,At!==H&&D.isPropagationStopped())break e;H=Oe,D.currentTarget=Ut;try{H(D)}catch(ts){id(ts)}D.currentTarget=null,H=At}else for(Ae=0;Ae<g.length;Ae++){if(Oe=g[Ae],At=Oe.instance,Ut=Oe.currentTarget,Oe=Oe.listener,At!==H&&D.isPropagationStopped())break e;H=Oe,D.currentTarget=Ut;try{H(D)}catch(ts){id(ts)}D.currentTarget=null,H=At}}}}function Or(a,l){var f=l[ms];f===void 0&&(f=l[ms]=new Set);var g=a+"__bubble";f.has(g)||(Zj(l,a,2,!1),f.add(g))}function Zx(a,l,f){var g=0;l&&(g|=4),Zj(f,a,g,l)}var fg="_reactListening"+Math.random().toString(36).slice(2);function e0(a){if(!a[fg]){a[fg]=!0,sn.forEach(function(f){f!=="selectionchange"&&(MR.has(f)||Zx(f,!1,a),Zx(f,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[fg]||(l[fg]=!0,Zx("selectionchange",!1,l))}}function Zj(a,l,f,g){switch(Ew(l)){case 2:var D=h3;break;case 8:D=f3;break;default:D=p0}f=D.bind(null,l,f,a),D=void 0,!Qs||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(D=!0),g?D!==void 0?a.addEventListener(l,f,{capture:!0,passive:D}):a.addEventListener(l,f,!0):D!==void 0?a.addEventListener(l,f,{passive:D}):a.addEventListener(l,f,!1)}function t0(a,l,f,g,D){var H=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var Ae=g.tag;if(Ae===3||Ae===4){var Oe=g.stateNode.containerInfo;if(Oe===D)break;if(Ae===4)for(Ae=g.return;Ae!==null;){var At=Ae.tag;if((At===3||At===4)&&Ae.stateNode.containerInfo===D)return;Ae=Ae.return}for(;Oe!==null;){if(Ae=sr(Oe),Ae===null)return;if(At=Ae.tag,At===5||At===6||At===26||At===27){g=H=Ae;continue e}Oe=Oe.parentNode}}g=g.return}xn(function(){var Ut=H,ts=vt(f),As=[];e:{var Qt=xA.get(a);if(Qt!==void 0){var $t=U,ln=a;switch(a){case"keypress":if(N(f)===0)break e;case"keydown":case"keyup":$t=Fr;break;case"focusin":ln="focus",$t=Gs;break;case"focusout":ln="blur",$t=Gs;break;case"beforeblur":case"afterblur":$t=Gs;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$t=Ft;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$t=as;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$t=pi;break;case Rc:case sc:case ju:$t=V;break;case yA:$t=Bi;break;case"scroll":case"scrollend":$t=K;break;case"wheel":$t=Yo;break;case"copy":case"cut":case"paste":$t=He;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$t=qa;break;case"toggle":case"beforetoggle":$t=kd}var Pn=(l&4)!==0,Ia=!Pn&&(a==="scroll"||a==="scrollend"),Nt=Pn?Qt!==null?Qt+"Capture":null:Qt;Pn=[];for(var gt=Ut,Ot;gt!==null;){var os=gt;if(Ot=os.stateNode,os=os.tag,os!==5&&os!==26&&os!==27||Ot===null||Nt===null||(os=Dn(gt,Nt),os!=null&&Pn.push(Np(gt,os,Ot))),Ia)break;gt=gt.return}0<Pn.length&&(Qt=new $t(Qt,ln,null,f,ts),As.push({event:Qt,listeners:Pn}))}}if((l&7)===0){e:{if(Qt=a==="mouseover"||a==="pointerover",$t=a==="mouseout"||a==="pointerout",Qt&&f!==Xe&&(ln=f.relatedTarget||f.fromElement)&&(sr(ln)||ln[fs]))break e;if(($t||Qt)&&(Qt=ts.window===ts?ts:(Qt=ts.ownerDocument)?Qt.defaultView||Qt.parentWindow:window,$t?(ln=f.relatedTarget||f.toElement,$t=Ut,ln=ln?sr(ln):null,ln!==null&&(Ia=c(ln),Pn=ln.tag,ln!==Ia||Pn!==5&&Pn!==27&&Pn!==6)&&(ln=null)):($t=null,ln=Ut),$t!==ln)){if(Pn=Ft,os="onMouseLeave",Nt="onMouseEnter",gt="mouse",(a==="pointerout"||a==="pointerover")&&(Pn=qa,os="onPointerLeave",Nt="onPointerEnter",gt="pointer"),Ia=$t==null?Qt:mn($t),Ot=ln==null?Qt:mn(ln),Qt=new Pn(os,gt+"leave",$t,f,ts),Qt.target=Ia,Qt.relatedTarget=Ot,os=null,sr(ts)===Ut&&(Pn=new Pn(Nt,gt+"enter",ln,f,ts),Pn.target=Ot,Pn.relatedTarget=Ia,os=Pn),Ia=os,$t&&ln)t:{for(Pn=PR,Nt=$t,gt=ln,Ot=0,os=Nt;os;os=Pn(os))Ot++;os=0;for(var On=gt;On;On=Pn(On))os++;for(;0<Ot-os;)Nt=Pn(Nt),Ot--;for(;0<os-Ot;)gt=Pn(gt),os--;for(;Ot--;){if(Nt===gt||gt!==null&&Nt===gt.alternate){Pn=Nt;break t}Nt=Pn(Nt),gt=Pn(gt)}Pn=null}else Pn=null;$t!==null&&ew(As,Qt,$t,Pn,!1),ln!==null&&Ia!==null&&ew(As,Ia,ln,Pn,!0)}}e:{if(Qt=Ut?mn(Ut):window,$t=Qt.nodeName&&Qt.nodeName.toLowerCase(),$t==="select"||$t==="input"&&Qt.type==="file")var aa=Bo;else if(So(Qt))if(lr)aa=Ci;else{aa=Ha;var pn=Tc}else $t=Qt.nodeName,!$t||$t.toLowerCase()!=="input"||Qt.type!=="checkbox"&&Qt.type!=="radio"?Ut&&xa(Ut.elementType)&&(aa=Bo):aa=qi;if(aa&&(aa=aa(a,Ut))){Ur(As,aa,f,ts);break e}pn&&pn(a,Qt,Ut),a==="focusout"&&Ut&&Qt.type==="number"&&Ut.memoizedProps.value!=null&&ha(Qt,"number",Qt.value)}switch(pn=Ut?mn(Ut):window,a){case"focusin":(So(pn)||pn.contentEditable==="true")&&(Wa=pn,Ll=Ut,Pi=null);break;case"focusout":Pi=Ll=Wa=null;break;case"mousedown":Wi=!0;break;case"contextmenu":case"mouseup":case"dragend":Wi=!1,Lr(As,f,ts);break;case"selectionchange":if(tl)break;case"keydown":case"keyup":Lr(As,f,ts)}var Ar;if(jo)e:{switch(a){case"compositionstart":var Qr="onCompositionStart";break e;case"compositionend":Qr="onCompositionEnd";break e;case"compositionupdate":Qr="onCompositionUpdate";break e}Qr=void 0}else Xo?ec(a,f)&&(Qr="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Qr="onCompositionStart");Qr&&(io&&f.locale!=="ko"&&(Xo||Qr!=="onCompositionStart"?Qr==="onCompositionEnd"&&Xo&&(Ar=v()):(kn=ts,Wn="value"in kn?kn.value:kn.textContent,Xo=!0)),pn=pg(Ut,Qr),0<pn.length&&(Qr=new bt(Qr,a,null,f,ts),As.push({event:Qr,listeners:pn}),Ar?Qr.data=Ar:(Ar=tc(f),Ar!==null&&(Qr.data=Ar)))),(Ar=Zl?ni(a,f):vi(a,f))&&(Qr=pg(Ut,"onBeforeInput"),0<Qr.length&&(pn=new bt("onBeforeInput","beforeinput",null,f,ts),As.push({event:pn,listeners:Qr}),pn.data=Ar)),DR(As,a,Ut,f,ts)}Jj(As,l)})}function Np(a,l,f){return{instance:a,listener:l,currentTarget:f}}function pg(a,l){for(var f=l+"Capture",g=[];a!==null;){var D=a,H=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||H===null||(D=Dn(a,f),D!=null&&g.unshift(Np(a,D,H)),D=Dn(a,l),D!=null&&g.push(Np(a,D,H))),a.tag===3)return g;a=a.return}return[]}function PR(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function ew(a,l,f,g,D){for(var H=l._reactName,Ae=[];f!==null&&f!==g;){var Oe=f,At=Oe.alternate,Ut=Oe.stateNode;if(Oe=Oe.tag,At!==null&&At===g)break;Oe!==5&&Oe!==26&&Oe!==27||Ut===null||(At=Ut,D?(Ut=Dn(f,H),Ut!=null&&Ae.unshift(Np(f,Ut,At))):D||(Ut=Dn(f,H),Ut!=null&&Ae.push(Np(f,Ut,At)))),f=f.return}Ae.length!==0&&a.push({event:l,listeners:Ae})}var kR=/\r\n?/g,HR=/\u0000|\uFFFD/g;function tw(a){return(typeof a=="string"?a:""+a).replace(kR,`
`).replace(HR,"")}function sw(a,l){return l=tw(l),tw(a)===l}function Fa(a,l,f,g,D,H){switch(f){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||rr(a,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&rr(a,""+g);break;case"className":Es(a,"class",g);break;case"tabIndex":Es(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Es(a,f,g);break;case"style":fi(a,g,H);break;case"data":if(l!=="object"){Es(a,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||f!=="href")){a.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=ve(""+g),a.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof H=="function"&&(f==="formAction"?(l!=="input"&&Fa(a,l,"name",D.name,D,null),Fa(a,l,"formEncType",D.formEncType,D,null),Fa(a,l,"formMethod",D.formMethod,D,null),Fa(a,l,"formTarget",D.formTarget,D,null)):(Fa(a,l,"encType",D.encType,D,null),Fa(a,l,"method",D.method,D,null),Fa(a,l,"target",D.target,D,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=ve(""+g),a.setAttribute(f,g);break;case"onClick":g!=null&&(a.onclick=Le);break;case"onScroll":g!=null&&Or("scroll",a);break;case"onScrollEnd":g!=null&&Or("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(D.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}f=ve(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""+g):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":g===!0?a.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,g):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(f,g):a.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(f):a.setAttribute(f,g);break;case"popover":Or("beforetoggle",a),Or("toggle",a),en(a,"popover",g);break;case"xlinkActuate":rn(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":rn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":rn(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":rn(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":rn(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":rn(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":rn(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":rn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":rn(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":en(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=ie.get(f)||f,en(a,f,g))}}function s0(a,l,f,g,D,H){switch(f){case"style":fi(a,g,H);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(D.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"children":typeof g=="string"?rr(a,g):(typeof g=="number"||typeof g=="bigint")&&rr(a,""+g);break;case"onScroll":g!=null&&Or("scroll",a);break;case"onScrollEnd":g!=null&&Or("scrollend",a);break;case"onClick":g!=null&&(a.onclick=Le);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gn.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(D=f.endsWith("Capture"),l=f.slice(2,D?f.length-7:void 0),H=a[kt]||null,H=H!=null?H[f]:null,typeof H=="function"&&a.removeEventListener(l,H,D),typeof g=="function")){typeof H!="function"&&H!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(l,g,D);break e}f in a?a[f]=g:g===!0?a.setAttribute(f,""):en(a,f,g)}}}function po(a,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Or("error",a),Or("load",a);var g=!1,D=!1,H;for(H in f)if(f.hasOwnProperty(H)){var Ae=f[H];if(Ae!=null)switch(H){case"src":g=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Fa(a,l,H,Ae,f,null)}}D&&Fa(a,l,"srcSet",f.srcSet,f,null),g&&Fa(a,l,"src",f.src,f,null);return;case"input":Or("invalid",a);var Oe=H=Ae=D=null,At=null,Ut=null;for(g in f)if(f.hasOwnProperty(g)){var ts=f[g];if(ts!=null)switch(g){case"name":D=ts;break;case"type":Ae=ts;break;case"checked":At=ts;break;case"defaultChecked":Ut=ts;break;case"value":H=ts;break;case"defaultValue":Oe=ts;break;case"children":case"dangerouslySetInnerHTML":if(ts!=null)throw Error(r(137,l));break;default:Fa(a,l,g,ts,f,null)}}ga(a,H,Oe,At,Ut,Ae,D,!1);return;case"select":Or("invalid",a),g=Ae=H=null;for(D in f)if(f.hasOwnProperty(D)&&(Oe=f[D],Oe!=null))switch(D){case"value":H=Oe;break;case"defaultValue":Ae=Oe;break;case"multiple":g=Oe;default:Fa(a,l,D,Oe,f,null)}l=H,f=Ae,a.multiple=!!g,l!=null?Tr(a,!!g,l,!1):f!=null&&Tr(a,!!g,f,!0);return;case"textarea":Or("invalid",a),H=D=g=null;for(Ae in f)if(f.hasOwnProperty(Ae)&&(Oe=f[Ae],Oe!=null))switch(Ae){case"value":g=Oe;break;case"defaultValue":D=Oe;break;case"children":H=Oe;break;case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(r(91));break;default:Fa(a,l,Ae,Oe,f,null)}ya(a,g,D,H);return;case"option":for(At in f)if(f.hasOwnProperty(At)&&(g=f[At],g!=null))switch(At){case"selected":a.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Fa(a,l,At,g,f,null)}return;case"dialog":Or("beforetoggle",a),Or("toggle",a),Or("cancel",a),Or("close",a);break;case"iframe":case"object":Or("load",a);break;case"video":case"audio":for(g=0;g<Sp.length;g++)Or(Sp[g],a);break;case"image":Or("error",a),Or("load",a);break;case"details":Or("toggle",a);break;case"embed":case"source":case"link":Or("error",a),Or("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ut in f)if(f.hasOwnProperty(Ut)&&(g=f[Ut],g!=null))switch(Ut){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Fa(a,l,Ut,g,f,null)}return;default:if(xa(l)){for(ts in f)f.hasOwnProperty(ts)&&(g=f[ts],g!==void 0&&s0(a,l,ts,g,f,void 0));return}}for(Oe in f)f.hasOwnProperty(Oe)&&(g=f[Oe],g!=null&&Fa(a,l,Oe,g,f,null))}function KR(a,l,f,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,H=null,Ae=null,Oe=null,At=null,Ut=null,ts=null;for($t in f){var As=f[$t];if(f.hasOwnProperty($t)&&As!=null)switch($t){case"checked":break;case"value":break;case"defaultValue":At=As;default:g.hasOwnProperty($t)||Fa(a,l,$t,null,g,As)}}for(var Qt in g){var $t=g[Qt];if(As=f[Qt],g.hasOwnProperty(Qt)&&($t!=null||As!=null))switch(Qt){case"type":H=$t;break;case"name":D=$t;break;case"checked":Ut=$t;break;case"defaultChecked":ts=$t;break;case"value":Ae=$t;break;case"defaultValue":Oe=$t;break;case"children":case"dangerouslySetInnerHTML":if($t!=null)throw Error(r(137,l));break;default:$t!==As&&Fa(a,l,Qt,$t,g,As)}}ua(a,Ae,Oe,At,Ut,ts,H,D);return;case"select":$t=Ae=Oe=Qt=null;for(H in f)if(At=f[H],f.hasOwnProperty(H)&&At!=null)switch(H){case"value":break;case"multiple":$t=At;default:g.hasOwnProperty(H)||Fa(a,l,H,null,g,At)}for(D in g)if(H=g[D],At=f[D],g.hasOwnProperty(D)&&(H!=null||At!=null))switch(D){case"value":Qt=H;break;case"defaultValue":Oe=H;break;case"multiple":Ae=H;default:H!==At&&Fa(a,l,D,H,g,At)}l=Oe,f=Ae,g=$t,Qt!=null?Tr(a,!!f,Qt,!1):!!g!=!!f&&(l!=null?Tr(a,!!f,l,!0):Tr(a,!!f,f?[]:"",!1));return;case"textarea":$t=Qt=null;for(Oe in f)if(D=f[Oe],f.hasOwnProperty(Oe)&&D!=null&&!g.hasOwnProperty(Oe))switch(Oe){case"value":break;case"children":break;default:Fa(a,l,Oe,null,g,D)}for(Ae in g)if(D=g[Ae],H=f[Ae],g.hasOwnProperty(Ae)&&(D!=null||H!=null))switch(Ae){case"value":Qt=D;break;case"defaultValue":$t=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:D!==H&&Fa(a,l,Ae,D,g,H)}$a(a,Qt,$t);return;case"option":for(var ln in f)if(Qt=f[ln],f.hasOwnProperty(ln)&&Qt!=null&&!g.hasOwnProperty(ln))switch(ln){case"selected":a.selected=!1;break;default:Fa(a,l,ln,null,g,Qt)}for(At in g)if(Qt=g[At],$t=f[At],g.hasOwnProperty(At)&&Qt!==$t&&(Qt!=null||$t!=null))switch(At){case"selected":a.selected=Qt&&typeof Qt!="function"&&typeof Qt!="symbol";break;default:Fa(a,l,At,Qt,g,$t)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pn in f)Qt=f[Pn],f.hasOwnProperty(Pn)&&Qt!=null&&!g.hasOwnProperty(Pn)&&Fa(a,l,Pn,null,g,Qt);for(Ut in g)if(Qt=g[Ut],$t=f[Ut],g.hasOwnProperty(Ut)&&Qt!==$t&&(Qt!=null||$t!=null))switch(Ut){case"children":case"dangerouslySetInnerHTML":if(Qt!=null)throw Error(r(137,l));break;default:Fa(a,l,Ut,Qt,g,$t)}return;default:if(xa(l)){for(var Ia in f)Qt=f[Ia],f.hasOwnProperty(Ia)&&Qt!==void 0&&!g.hasOwnProperty(Ia)&&s0(a,l,Ia,void 0,g,Qt);for(ts in g)Qt=g[ts],$t=f[ts],!g.hasOwnProperty(ts)||Qt===$t||Qt===void 0&&$t===void 0||s0(a,l,ts,Qt,g,$t);return}}for(var Nt in f)Qt=f[Nt],f.hasOwnProperty(Nt)&&Qt!=null&&!g.hasOwnProperty(Nt)&&Fa(a,l,Nt,null,g,Qt);for(As in g)Qt=g[As],$t=f[As],!g.hasOwnProperty(As)||Qt===$t||Qt==null&&$t==null||Fa(a,l,As,Qt,g,$t)}function nw(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zR(){if(typeof performance.getEntriesByType=="function"){for(var a=0,l=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var D=f[g],H=D.transferSize,Ae=D.initiatorType,Oe=D.duration;if(H&&Oe&&nw(Ae)){for(Ae=0,Oe=D.responseEnd,g+=1;g<f.length;g++){var At=f[g],Ut=At.startTime;if(Ut>Oe)break;var ts=At.transferSize,As=At.initiatorType;ts&&nw(As)&&(At=At.responseEnd,Ae+=ts*(At<Oe?1:(Oe-Ut)/(At-Ut)))}if(--g,l+=8*(H+Ae)/(D.duration/1e3),a++,10<a)break}}if(0<a)return l/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var n0=null,r0=null;function mg(a){return a.nodeType===9?a:a.ownerDocument}function rw(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aw(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function a0(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var i0=null;function VR(){var a=window.event;return a&&a.type==="popstate"?a===i0?!1:(i0=a,!0):(i0=null,!1)}var iw=typeof setTimeout=="function"?setTimeout:void 0,$R=typeof clearTimeout=="function"?clearTimeout:void 0,ow=typeof Promise=="function"?Promise:void 0,GR=typeof queueMicrotask=="function"?queueMicrotask:typeof ow<"u"?function(a){return ow.resolve(null).then(a).catch(qR)}:iw;function qR(a){setTimeout(function(){throw a})}function GA(a){return a==="head"}function lw(a,l){var f=l,g=0;do{var D=f.nextSibling;if(a.removeChild(f),D&&D.nodeType===8)if(f=D.data,f==="/$"||f==="/&"){if(g===0){a.removeChild(D),sf(l);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Bp(a.ownerDocument.documentElement);else if(f==="head"){f=a.ownerDocument.head,Bp(f);for(var H=f.firstChild;H;){var Ae=H.nextSibling,Oe=H.nodeName;H[Hs]||Oe==="SCRIPT"||Oe==="STYLE"||Oe==="LINK"&&H.rel.toLowerCase()==="stylesheet"||f.removeChild(H),H=Ae}}else f==="body"&&Bp(a.ownerDocument.body);f=D}while(f);sf(l)}function cw(a,l){var f=a;a=0;do{var g=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(a===0)break;a--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||a++;f=g}while(f)}function o0(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":o0(f),Wr(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function WR(a,l,f,g){for(;a.nodeType===1;){var D=f;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[Hs])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(H=a.getAttribute("rel"),H==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(H!==D.rel||a.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||a.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||a.getAttribute("title")!==(D.title==null?null:D.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(H=a.getAttribute("src"),(H!==(D.src==null?null:D.src)||a.getAttribute("type")!==(D.type==null?null:D.type)||a.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&H&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var H=D.name==null?null:""+D.name;if(D.type==="hidden"&&a.getAttribute("name")===H)return a}else return a;if(a=gc(a.nextSibling),a===null)break}return null}function YR(a,l,f){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=gc(a.nextSibling),a===null))return null;return a}function dw(a,l){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=gc(a.nextSibling),a===null))return null;return a}function l0(a){return a.data==="$?"||a.data==="$~"}function c0(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function XR(a,l){var f=a.ownerDocument;if(a.data==="$~")a._reactRetry=l;else if(a.data!=="$?"||f.readyState!=="loading")l();else{var g=function(){l(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function gc(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return a}var d0=null;function Aw(a){a=a.nextSibling;for(var l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"||f==="/&"){if(l===0)return gc(a.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}a=a.nextSibling}return null}function uw(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return a;l--}else f!=="/$"&&f!=="/&"||l++}a=a.previousSibling}return null}function hw(a,l,f){switch(l=mg(f),a){case"html":if(a=l.documentElement,!a)throw Error(r(452));return a;case"head":if(a=l.head,!a)throw Error(r(453));return a;case"body":if(a=l.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Bp(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);Wr(a)}var yc=new Map,fw=new Set;function gg(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var rA=oe.d;oe.d={f:JR,r:ZR,D:e3,C:t3,L:s3,m:n3,X:a3,S:r3,M:i3};function JR(){var a=rA.f(),l=eo();return a||l}function ZR(a){var l=ds(a);l!==null&&l.tag===5&&l.type==="form"?km(l):rA.r(a)}var Zh=typeof document>"u"?null:document;function pw(a,l,f){var g=Zh;if(g&&typeof l=="string"&&l){var D=zn(l);D='link[rel="'+a+'"][href="'+D+'"]',typeof f=="string"&&(D+='[crossorigin="'+f+'"]'),fw.has(D)||(fw.add(D),a={rel:a,crossOrigin:f,href:l},g.querySelector(D)===null&&(l=g.createElement("link"),po(l,"link",a),nr(l),g.head.appendChild(l)))}}function e3(a){rA.D(a),pw("dns-prefetch",a,null)}function t3(a,l){rA.C(a,l),pw("preconnect",a,l)}function s3(a,l,f){rA.L(a,l,f);var g=Zh;if(g&&a&&l){var D='link[rel="preload"][as="'+zn(l)+'"]';l==="image"&&f&&f.imageSrcSet?(D+='[imagesrcset="'+zn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(D+='[imagesizes="'+zn(f.imageSizes)+'"]')):D+='[href="'+zn(a)+'"]';var H=D;switch(l){case"style":H=ef(a);break;case"script":H=tf(a)}yc.has(H)||(a=m({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:a,as:l},f),yc.set(H,a),g.querySelector(D)!==null||l==="style"&&g.querySelector(Cp(H))||l==="script"&&g.querySelector(Ep(H))||(l=g.createElement("link"),po(l,"link",a),nr(l),g.head.appendChild(l)))}}function n3(a,l){rA.m(a,l);var f=Zh;if(f&&a){var g=l&&typeof l.as=="string"?l.as:"script",D='link[rel="modulepreload"][as="'+zn(g)+'"][href="'+zn(a)+'"]',H=D;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":H=tf(a)}if(!yc.has(H)&&(a=m({rel:"modulepreload",href:a},l),yc.set(H,a),f.querySelector(D)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Ep(H)))return}g=f.createElement("link"),po(g,"link",a),nr(g),f.head.appendChild(g)}}}function r3(a,l,f){rA.S(a,l,f);var g=Zh;if(g&&a){var D=cr(g).hoistableStyles,H=ef(a);l=l||"default";var Ae=D.get(H);if(!Ae){var Oe={loading:0,preload:null};if(Ae=g.querySelector(Cp(H)))Oe.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":l},f),(f=yc.get(H))&&A0(a,f);var At=Ae=g.createElement("link");nr(At),po(At,"link",a),At._p=new Promise(function(Ut,ts){At.onload=Ut,At.onerror=ts}),At.addEventListener("load",function(){Oe.loading|=1}),At.addEventListener("error",function(){Oe.loading|=2}),Oe.loading|=4,yg(Ae,l,g)}Ae={type:"stylesheet",instance:Ae,count:1,state:Oe},D.set(H,Ae)}}}function a3(a,l){rA.X(a,l);var f=Zh;if(f&&a){var g=cr(f).hoistableScripts,D=tf(a),H=g.get(D);H||(H=f.querySelector(Ep(D)),H||(a=m({src:a,async:!0},l),(l=yc.get(D))&&u0(a,l),H=f.createElement("script"),nr(H),po(H,"link",a),f.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},g.set(D,H))}}function i3(a,l){rA.M(a,l);var f=Zh;if(f&&a){var g=cr(f).hoistableScripts,D=tf(a),H=g.get(D);H||(H=f.querySelector(Ep(D)),H||(a=m({src:a,async:!0,type:"module"},l),(l=yc.get(D))&&u0(a,l),H=f.createElement("script"),nr(H),po(H,"link",a),f.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},g.set(D,H))}}function mw(a,l,f,g){var D=(D=be.current)?gg(D):null;if(!D)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=ef(f.href),f=cr(D).hoistableStyles,g=f.get(l),g||(g={type:"style",instance:null,count:0,state:null},f.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=ef(f.href);var H=cr(D).hoistableStyles,Ae=H.get(a);if(Ae||(D=D.ownerDocument||D,Ae={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},H.set(a,Ae),(H=D.querySelector(Cp(a)))&&!H._p&&(Ae.instance=H,Ae.state.loading=5),yc.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},yc.set(a,f),H||o3(D,a,f,Ae.state))),l&&g===null)throw Error(r(528,""));return Ae}if(l&&g!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=tf(f),f=cr(D).hoistableScripts,g=f.get(l),g||(g={type:"script",instance:null,count:0,state:null},f.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function ef(a){return'href="'+zn(a)+'"'}function Cp(a){return'link[rel="stylesheet"]['+a+"]"}function gw(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function o3(a,l,f,g){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=a.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),po(l,"link",f),nr(l),a.head.appendChild(l))}function tf(a){return'[src="'+zn(a)+'"]'}function Ep(a){return"script[async]"+a}function yw(a,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var g=a.querySelector('style[data-href~="'+zn(f.href)+'"]');if(g)return l.instance=g,nr(g),g;var D=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),nr(g),po(g,"style",D),yg(g,f.precedence,a),l.instance=g;case"stylesheet":D=ef(f.href);var H=a.querySelector(Cp(D));if(H)return l.state.loading|=4,l.instance=H,nr(H),H;g=gw(f),(D=yc.get(D))&&A0(g,D),H=(a.ownerDocument||a).createElement("link"),nr(H);var Ae=H;return Ae._p=new Promise(function(Oe,At){Ae.onload=Oe,Ae.onerror=At}),po(H,"link",g),l.state.loading|=4,yg(H,f.precedence,a),l.instance=H;case"script":return H=tf(f.src),(D=a.querySelector(Ep(H)))?(l.instance=D,nr(D),D):(g=f,(D=yc.get(H))&&(g=m({},f),u0(g,D)),a=a.ownerDocument||a,D=a.createElement("script"),nr(D),po(D,"link",g),a.head.appendChild(D),l.instance=D);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,yg(g,f.precedence,a));return l.instance}function yg(a,l,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=g.length?g[g.length-1]:null,H=D,Ae=0;Ae<g.length;Ae++){var Oe=g[Ae];if(Oe.dataset.precedence===l)H=Oe;else if(H!==D)break}H?H.parentNode.insertBefore(a,H.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(a,l.firstChild))}function A0(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function u0(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var xg=null;function xw(a,l,f){if(xg===null){var g=new Map,D=xg=new Map;D.set(f,g)}else D=xg,g=D.get(f),g||(g=new Map,D.set(f,g));if(g.has(a))return g;for(g.set(a,null),f=f.getElementsByTagName(a),D=0;D<f.length;D++){var H=f[D];if(!(H[Hs]||H[Mt]||a==="link"&&H.getAttribute("rel")==="stylesheet")&&H.namespaceURI!=="http://www.w3.org/2000/svg"){var Ae=H.getAttribute(l)||"";Ae=a+Ae;var Oe=g.get(Ae);Oe?Oe.push(H):g.set(Ae,[H])}}return g}function vw(a,l,f){a=a.ownerDocument||a,a.head.insertBefore(f,l==="title"?a.querySelector("head > title"):null)}function l3(a,l,f){if(f===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function bw(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function c3(a,l,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var D=ef(g.href),H=l.querySelector(Cp(D));if(H){l=H._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(a.count++,a=vg.bind(a),l.then(a,a)),f.state.loading|=4,f.instance=H,nr(H);return}H=l.ownerDocument||l,g=gw(g),(D=yc.get(D))&&A0(g,D),H=H.createElement("link"),nr(H);var Ae=H;Ae._p=new Promise(function(Oe,At){Ae.onload=Oe,Ae.onerror=At}),po(H,"link",g),f.instance=H}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(a.count++,f=vg.bind(a),l.addEventListener("load",f),l.addEventListener("error",f))}}var h0=0;function d3(a,l){return a.stylesheets&&a.count===0&&jg(a,a.stylesheets),0<a.count||0<a.imgCount?function(f){var g=setTimeout(function(){if(a.stylesheets&&jg(a,a.stylesheets),a.unsuspend){var H=a.unsuspend;a.unsuspend=null,H()}},6e4+l);0<a.imgBytes&&h0===0&&(h0=62500*zR());var D=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&jg(a,a.stylesheets),a.unsuspend)){var H=a.unsuspend;a.unsuspend=null,H()}},(a.imgBytes>h0?50:800)+l);return a.unsuspend=f,function(){a.unsuspend=null,clearTimeout(g),clearTimeout(D)}}:null}function vg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jg(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var bg=null;function jg(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,bg=new Map,l.forEach(A3,a),bg=null,vg.call(a))}function A3(a,l){if(!(l.state.loading&4)){var f=bg.get(a);if(f)var g=f.get(null);else{f=new Map,bg.set(a,f);for(var D=a.querySelectorAll("link[data-precedence],style[data-precedence]"),H=0;H<D.length;H++){var Ae=D[H];(Ae.nodeName==="LINK"||Ae.getAttribute("media")!=="not all")&&(f.set(Ae.dataset.precedence,Ae),g=Ae)}g&&f.set(null,g)}D=l.instance,Ae=D.getAttribute("data-precedence"),H=f.get(Ae)||g,H===g&&f.set(null,D),f.set(Ae,D),this.count++,g=vg.bind(this),D.addEventListener("load",g),D.addEventListener("error",g),H?H.parentNode.insertBefore(D,H.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(D,a.firstChild)),l.state.loading|=4}}var Tp={$$typeof:Q,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function u3(a,l,f,g,D,H,Ae,Oe,At){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.hiddenUpdates=Nn(null),this.identifierPrefix=g,this.onUncaughtError=D,this.onCaughtError=H,this.onRecoverableError=Ae,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=At,this.incompleteTransitions=new Map}function jw(a,l,f,g,D,H,Ae,Oe,At,Ut,ts,As){return a=new u3(a,l,f,Ae,At,Ut,ts,As,Oe),l=1,H===!0&&(l|=24),H=Hi(3,null,null,l),a.current=H,H.stateNode=a,l=dd(),l.refCount++,a.pooledCache=l,l.refCount++,H.memoizedState={element:g,isDehydrated:f,cache:l},Us(H),a}function ww(a){return a?(a=Ti,a):Ti}function Sw(a,l,f,g,D,H){D=ww(D),g.context===null?g.context=D:g.pendingContext=D,g=In(l),g.payload={element:f},H=H===void 0?null:H,H!==null&&(g.callback=H),f=Un(a,g,l),f!==null&&(Na(f,a,l),Zr(f,a,l))}function Nw(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<l?f:l}}function f0(a,l){Nw(a,l),(a=a.alternate)&&Nw(a,l)}function Bw(a){if(a.tag===13||a.tag===31){var l=hl(a,67108864);l!==null&&Na(l,a,67108864),f0(a,67108864)}}function Cw(a){if(a.tag===13||a.tag===31){var l=vn();l=Bs(l);var f=hl(a,l);f!==null&&Na(f,a,l),f0(a,l)}}var wg=!0;function h3(a,l,f,g){var D=ne.T;ne.T=null;var H=oe.p;try{oe.p=2,p0(a,l,f,g)}finally{oe.p=H,ne.T=D}}function f3(a,l,f,g){var D=ne.T;ne.T=null;var H=oe.p;try{oe.p=8,p0(a,l,f,g)}finally{oe.p=H,ne.T=D}}function p0(a,l,f,g){if(wg){var D=m0(g);if(D===null)t0(a,l,g,Sg,f),Tw(a,g);else if(m3(D,a,l,f,g))g.stopPropagation();else if(Tw(a,g),l&4&&-1<p3.indexOf(a)){for(;D!==null;){var H=ds(D);if(H!==null)switch(H.tag){case 3:if(H=H.stateNode,H.current.memoizedState.isDehydrated){var Ae=St(H.pendingLanes);if(Ae!==0){var Oe=H;for(Oe.pendingLanes|=2,Oe.entangledLanes|=2;Ae;){var At=1<<31-Gt(Ae);Oe.entanglements[1]|=At,Ae&=~At}Bd(H),(sa&6)===0&&($s=ns()+500,wp(0))}}break;case 31:case 13:Oe=hl(H,2),Oe!==null&&Na(Oe,H,2),eo(),f0(H,2)}if(H=m0(g),H===null&&t0(a,l,g,Sg,f),H===D)break;D=H}D!==null&&g.stopPropagation()}else t0(a,l,g,null,f)}}function m0(a){return a=vt(a),g0(a)}var Sg=null;function g0(a){if(Sg=null,a=sr(a),a!==null){var l=c(a);if(l===null)a=null;else{var f=l.tag;if(f===13){if(a=A(l),a!==null)return a;a=null}else if(f===31){if(a=u(l),a!==null)return a;a=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return Sg=a,null}function Ew(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ts()){case vs:return 2;case Ns:return 8;case et:case De:return 32;case rt:return 268435456;default:return 32}default:return 32}}var y0=!1,qA=null,WA=null,YA=null,Fp=new Map,Ip=new Map,XA=[],p3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tw(a,l){switch(a){case"focusin":case"focusout":qA=null;break;case"dragenter":case"dragleave":WA=null;break;case"mouseover":case"mouseout":YA=null;break;case"pointerover":case"pointerout":Fp.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ip.delete(l.pointerId)}}function Rp(a,l,f,g,D,H){return a===null||a.nativeEvent!==H?(a={blockedOn:l,domEventName:f,eventSystemFlags:g,nativeEvent:H,targetContainers:[D]},l!==null&&(l=ds(l),l!==null&&Bw(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,D!==null&&l.indexOf(D)===-1&&l.push(D),a)}function m3(a,l,f,g,D){switch(l){case"focusin":return qA=Rp(qA,a,l,f,g,D),!0;case"dragenter":return WA=Rp(WA,a,l,f,g,D),!0;case"mouseover":return YA=Rp(YA,a,l,f,g,D),!0;case"pointerover":var H=D.pointerId;return Fp.set(H,Rp(Fp.get(H)||null,a,l,f,g,D)),!0;case"gotpointercapture":return H=D.pointerId,Ip.set(H,Rp(Ip.get(H)||null,a,l,f,g,D)),!0}return!1}function Fw(a){var l=sr(a.target);if(l!==null){var f=c(l);if(f!==null){if(l=f.tag,l===13){if(l=A(f),l!==null){a.blockedOn=l,ot(a.priority,function(){Cw(f)});return}}else if(l===31){if(l=u(f),l!==null){a.blockedOn=l,ot(a.priority,function(){Cw(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ng(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var f=m0(a.nativeEvent);if(f===null){f=a.nativeEvent;var g=new f.constructor(f.type,f);Xe=g,f.target.dispatchEvent(g),Xe=null}else return l=ds(f),l!==null&&Bw(l),a.blockedOn=f,!1;l.shift()}return!0}function Iw(a,l,f){Ng(a)&&f.delete(l)}function g3(){y0=!1,qA!==null&&Ng(qA)&&(qA=null),WA!==null&&Ng(WA)&&(WA=null),YA!==null&&Ng(YA)&&(YA=null),Fp.forEach(Iw),Ip.forEach(Iw)}function Bg(a,l){a.blockedOn===l&&(a.blockedOn=null,y0||(y0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,g3)))}var Cg=null;function Rw(a){Cg!==a&&(Cg=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Cg===a&&(Cg=null);for(var l=0;l<a.length;l+=3){var f=a[l],g=a[l+1],D=a[l+2];if(typeof g!="function"){if(g0(g||f)===null)continue;break}var H=ds(f);H!==null&&(a.splice(l,3),l-=3,Mh(H,{pending:!0,data:D,method:f.method,action:g},g,D))}}))}function sf(a){function l(At){return Bg(At,a)}qA!==null&&Bg(qA,a),WA!==null&&Bg(WA,a),YA!==null&&Bg(YA,a),Fp.forEach(l),Ip.forEach(l);for(var f=0;f<XA.length;f++){var g=XA[f];g.blockedOn===a&&(g.blockedOn=null)}for(;0<XA.length&&(f=XA[0],f.blockedOn===null);)Fw(f),f.blockedOn===null&&XA.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var D=f[g],H=f[g+1],Ae=D[kt]||null;if(typeof H=="function")Ae||Rw(f);else if(Ae){var Oe=null;if(H&&H.hasAttribute("formAction")){if(D=H,Ae=H[kt]||null)Oe=Ae.formAction;else if(g0(D)!==null)continue}else Oe=Ae.action;typeof Oe=="function"?f[g+1]=Oe:(f.splice(g,3),g-=3),Rw(f)}}}function Ow(){function a(H){H.canIntercept&&H.info==="react-transition"&&H.intercept({handler:function(){return new Promise(function(Ae){return D=Ae})},focusReset:"manual",scroll:"manual"})}function l(){D!==null&&(D(),D=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var H=navigation.currentEntry;H&&H.url!=null&&navigation.navigate(H.url,{state:H.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,D=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),D!==null&&(D(),D=null)}}}function x0(a){this._internalRoot=a}Eg.prototype.render=x0.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,g=vn();Sw(f,g,a,l,null,null)},Eg.prototype.unmount=x0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;Sw(a.current,2,null,a,null,null),eo(),l[fs]=null}};function Eg(a){this._internalRoot=a}Eg.prototype.unstable_scheduleHydration=function(a){if(a){var l=Os();a={blockedOn:null,target:a,priority:l};for(var f=0;f<XA.length&&l!==0&&l<XA[f].priority;f++);XA.splice(f,0,a),f===0&&Fw(a)}};var Uw=s.version;if(Uw!=="19.2.0")throw Error(r(527,Uw,"19.2.0"));oe.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=h(l),a=a!==null?o(a):null,a=a===null?null:a.stateNode,a};var y3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tg.isDisabled&&Tg.supportsFiber)try{Ht=Tg.inject(y3),Kt=Tg}catch{}}return Up.createRoot=function(a,l){if(!i(a))throw Error(r(299));var f=!1,g="",D=Vm,H=_u,Ae=Mu;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(D=l.onUncaughtError),l.onCaughtError!==void 0&&(H=l.onCaughtError),l.onRecoverableError!==void 0&&(Ae=l.onRecoverableError)),l=jw(a,1,!1,null,null,f,g,null,D,H,Ae,Ow),a[fs]=l.current,e0(a),new x0(l)},Up.hydrateRoot=function(a,l,f){if(!i(a))throw Error(r(299));var g=!1,D="",H=Vm,Ae=_u,Oe=Mu,At=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(D=f.identifierPrefix),f.onUncaughtError!==void 0&&(H=f.onUncaughtError),f.onCaughtError!==void 0&&(Ae=f.onCaughtError),f.onRecoverableError!==void 0&&(Oe=f.onRecoverableError),f.formState!==void 0&&(At=f.formState)),l=jw(a,1,!0,l,f??null,g,D,At,H,Ae,Oe,Ow),l.context=ww(null),f=l.current,g=vn(),g=Bs(g),D=In(g),D.callback=null,Un(f,D,g),f=g,l.current.lanes=f,ys(l,f),Bd(l),a[fs]=l.current,e0(a),new Eg(l)},Up.version="19.2.0",Up}var Vw;function T3(){if(Vw)return b0.exports;Vw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),b0.exports=E3(),b0.exports}var F3=T3();function I3(t,s){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,c,A=[],u="",d=t.split("/");for(d[0]||d.shift();i=d.shift();)n=i[0],n==="*"?(A.push(n),u+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=i.indexOf("?",1),c=i.indexOf(".",1),A.push(i.substring(1,~r?r:~c?c:i.length)),u+=~r&&!~c?"(?:/([^/]+?))?":"/([^/]+?)",~c&&(u+=(~r?"?":"")+"\\"+i.substring(c))):u+="/"+i;return{keys:A,pattern:new RegExp("^"+u+(s?"(?=$|/)":"/?$"),"i")}}var S=sx();const Vo=o1(S),mA=v3({__proto__:null,default:Vo},[S]);var B0={exports:{}},C0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w;function R3(){if($w)return C0;$w=1;var t=sx();function s(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var n=typeof Object.is=="function"?Object.is:s,r=t.useState,i=t.useEffect,c=t.useLayoutEffect,A=t.useDebugValue;function u(m,y){var p=y(),j=r({inst:{value:p,getSnapshot:y}}),b=j[0].inst,w=j[1];return c(function(){b.value=p,b.getSnapshot=y,d(b)&&w({inst:b})},[m,p,y]),i(function(){return d(b)&&w({inst:b}),m(function(){d(b)&&w({inst:b})})},[m]),A(p),p}function d(m){var y=m.getSnapshot;m=m.value;try{var p=y();return!n(m,p)}catch{return!0}}function h(m,y){return y()}var o=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return C0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:o,C0}var Gw;function O3(){return Gw||(Gw=1,B0.exports=R3()),B0.exports}var U3=O3();const L3=mA.useInsertionEffect,D3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q3=D3?S.useLayoutEffect:S.useEffect,_3=L3||Q3,sC=t=>{const s=S.useRef([t,(...n)=>s[0](...n)]).current;return _3(()=>{s[0]=t}),s[1]},M3="popstate",l1="pushState",c1="replaceState",P3="hashchange",qw=[M3,l1,c1,P3],k3=t=>{for(const s of qw)addEventListener(s,t);return()=>{for(const s of qw)removeEventListener(s,t)}},nC=(t,s)=>U3.useSyncExternalStore(k3,t,s),H3=()=>location.search,K3=({ssrSearch:t=""}={})=>nC(H3,()=>t),Ww=()=>location.pathname,z3=({ssrPath:t}={})=>nC(Ww,t?()=>t:Ww),V3=(t,{replace:s=!1,state:n=null}={})=>history[s?c1:l1](n,"",t),$3=(t={})=>[z3(t),V3],Yw=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Yw]>"u"){for(const t of[l1,c1]){const s=history[t];history[t]=function(){const n=s.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Yw,{value:!0})}const G3=(t,s)=>s.toLowerCase().indexOf(t.toLowerCase())?"~"+s:s.slice(t.length)||"/",rC=(t="")=>t==="/"?"":t,q3=(t,s)=>t[0]==="~"?t.slice(1):rC(s)+t,W3=(t="",s)=>G3(Xw(rC(t)),Xw(s)),Xw=t=>{try{return decodeURI(t)}catch{return t}},aC={hook:$3,searchHook:K3,parser:I3,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},iC=S.createContext(aC),Uf=()=>S.useContext(iC),oC={},lC=S.createContext(oC),Y3=()=>S.useContext(lC),nx=t=>{const[s,n]=t.hook(t);return[W3(t.base,s),sC((r,i)=>n(q3(r,t.base),i))]},bo=()=>nx(Uf()),d1=(t,s,n,r)=>{const{pattern:i,keys:c}=s instanceof RegExp?{keys:!1,pattern:s}:t(s||"*",r),A=i.exec(n)||[],[u,...d]=A;return u!==void 0?[!0,(()=>{const h=c!==!1?Object.fromEntries(c.map((m,y)=>[m,d[y]])):A.groups;let o={...d};return h&&Object.assign(o,h),o})(),...r?[u]:[]]:[!1,null]},X3=t=>d1(Uf().parser,t,bo()[0]),J3=({children:t,...s})=>{const n=Uf(),r=s.hook?aC:n;let i=r;const[c,A]=s.ssrPath?.split("?")??[];A&&(s.ssrSearch=A,s.ssrPath=c),s.hrefs=s.hrefs??s.hook?.hrefs;let u=S.useRef({}),d=u.current,h=d;for(let o in r){const m=o==="base"?r[o]+(s[o]||""):s[o]||r[o];d===h&&m!==h[o]&&(u.current=h={...h}),h[o]=m,m!==r[o]&&(i=h)}return S.createElement(iC.Provider,{value:i,children:t})},Jw=({children:t,component:s},n)=>s?S.createElement(s,{params:n}):typeof t=="function"?t(n):t,Z3=t=>{let s=S.useRef(oC),n=s.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),s.current=n},br=({path:t,nest:s,match:n,...r})=>{const i=Uf(),[c]=nx(i),[A,u,d]=n??d1(i.parser,t,c,s),h=Z3({...Y3(),...u});if(!A)return null;const o=d?S.createElement(J3,{base:d},Jw(r,h)):Jw(r,h);return S.createElement(lC.Provider,{value:h,children:o})},pa=S.forwardRef((t,s)=>{const n=Uf(),[r,i]=nx(n),{to:c="",href:A=c,onClick:u,asChild:d,children:h,className:o,replace:m,state:y,...p}=t,j=sC(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(u?.(w),w.defaultPrevented||(w.preventDefault(),i(A,t)))}),b=n.hrefs(A[0]==="~"?A.slice(1):n.base+A,n);return d&&S.isValidElement(h)?S.cloneElement(h,{onClick:j,href:b}):S.createElement("a",{...p,onClick:j,href:b,className:o?.call?o(r===A):o,children:h,ref:s})}),cC=t=>Array.isArray(t)?t.flatMap(s=>cC(s&&s.type===S.Fragment?s.props.children:s)):[t],eO=({children:t,location:s})=>{const n=Uf(),[r]=nx(n);for(const i of cC(t)){let c=0;if(S.isValidElement(i)&&(c=d1(n.parser,i.props.path,s||r,i.props.nest))[0])return S.cloneElement(i,{match:c})}return null};var vm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ph=typeof window>"u"||"Deno"in globalThis;function jc(){}function tO(t,s){return typeof t=="function"?t(s):t}function $v(t){return typeof t=="number"&&t>=0&&t!==1/0}function dC(t,s){return Math.max(t+(s||0)-Date.now(),0)}function bf(t,s){return typeof t=="function"?t(s):t}function Wc(t,s){return typeof t=="function"?t(s):t}function Zw(t,s){const{type:n="all",exact:r,fetchStatus:i,predicate:c,queryKey:A,stale:u}=t;if(A){if(r){if(s.queryHash!==A1(A,s.options))return!1}else if(!lm(s.queryKey,A))return!1}if(n!=="all"){const d=s.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof u=="boolean"&&s.isStale()!==u||i&&i!==s.state.fetchStatus||c&&!c(s))}function e2(t,s){const{exact:n,status:r,predicate:i,mutationKey:c}=t;if(c){if(!s.options.mutationKey)return!1;if(n){if(om(s.options.mutationKey)!==om(c))return!1}else if(!lm(s.options.mutationKey,c))return!1}return!(r&&s.state.status!==r||i&&!i(s))}function A1(t,s){return(s?.queryKeyHashFn||om)(t)}function om(t){return JSON.stringify(t,(s,n)=>qv(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function lm(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?!Object.keys(s).some(n=>!lm(t[n],s[n])):!1}function AC(t,s){if(t===s)return t;const n=t2(t)&&t2(s);if(n||qv(t)&&qv(s)){const r=n?t:Object.keys(t),i=r.length,c=n?s:Object.keys(s),A=c.length,u=n?[]:{};let d=0;for(let h=0;h<A;h++){const o=n?h:c[h];(!n&&r.includes(o)||n)&&t[o]===void 0&&s[o]===void 0?(u[o]=void 0,d++):(u[o]=AC(t[o],s[o]),u[o]===t[o]&&t[o]!==void 0&&d++)}return i===A&&d===i?t:u}return s}function Gv(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}function t2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function qv(t){if(!s2(t))return!1;const s=t.constructor;if(s===void 0)return!0;const n=s.prototype;return!(!s2(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function s2(t){return Object.prototype.toString.call(t)==="[object Object]"}function sO(t){return new Promise(s=>{setTimeout(s,t)})}function Wv(t,s,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,s):n.structuralSharing!==!1?AC(t,s):s}function nO(t,s,n=0){const r=[...t,s];return n&&r.length>n?r.slice(1):r}function rO(t,s,n=0){const r=[s,...t];return n&&r.length>n?r.slice(0,-1):r}var u1=Symbol();function uC(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===u1?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var aO=class extends vm{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!ph&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},h1=new aO,iO=class extends vm{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!ph&&window.addEventListener){const s=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Ry=new iO;function Yv(){let t,s;const n=new Promise((i,c)=>{t=i,s=c});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),s(i)},n}function oO(t){return Math.min(1e3*2**t,3e4)}function hC(t){return(t??"online")==="online"?Ry.isOnline():!0}var fC=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function E0(t){return t instanceof fC}function pC(t){let s=!1,n=0,r=!1,i;const c=Yv(),A=b=>{r||(y(new fC(b)),t.abort?.())},u=()=>{s=!0},d=()=>{s=!1},h=()=>h1.isFocused()&&(t.networkMode==="always"||Ry.isOnline())&&t.canRun(),o=()=>hC(t.networkMode)&&t.canRun(),m=b=>{r||(r=!0,t.onSuccess?.(b),i?.(),c.resolve(b))},y=b=>{r||(r=!0,t.onError?.(b),i?.(),c.reject(b))},p=()=>new Promise(b=>{i=w=>{(r||h())&&b(w)},t.onPause?.()}).then(()=>{i=void 0,r||t.onContinue?.()}),j=()=>{if(r)return;let b;const w=n===0?t.initialPromise:void 0;try{b=w??t.fn()}catch(B){b=Promise.reject(B)}Promise.resolve(b).then(m).catch(B=>{if(r)return;const L=t.retry??(ph?0:3),Q=t.retryDelay??oO,k=typeof Q=="function"?Q(n,B):Q,z=L===!0||typeof L=="number"&&n<L||typeof L=="function"&&L(n,B);if(s||!z){y(B);return}n++,t.onFail?.(n,B),sO(k).then(()=>h()?void 0:p()).then(()=>{s?y(B):j()})})};return{promise:c,cancel:A,continue:()=>(i?.(),c),cancelRetry:u,continueRetry:d,canStart:o,start:()=>(o()?j():p().then(j),c)}}function lO(){let t=[],s=0,n=u=>{u()},r=u=>{u()},i=u=>setTimeout(u,0);const c=u=>{s?t.push(u):i(()=>{n(u)})},A=()=>{const u=t;t=[],u.length&&i(()=>{r(()=>{u.forEach(d=>{n(d)})})})};return{batch:u=>{let d;s++;try{d=u()}finally{s--,s||A()}return d},batchCalls:u=>(...d)=>{c(()=>{u(...d)})},schedule:c,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{i=u}}}var vo=lO(),mC=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$v(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ph?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},cO=class extends mC{#e;#t;#n;#s;#i;#a;constructor(t){super(),this.#a=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=dO(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,s){const n=Wv(this.state.data,t,this.options);return this.#r({data:n,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),n}setState(t,s){this.#r({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#s?.promise;return this.#s?.cancel(t),s?s.then(jc).catch(jc):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Wc(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===u1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!dC(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}fetch(t,s){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(d=>d.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,r=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},i=()=>{const u=uC(this.options,s),d={queryKey:this.queryKey,meta:this.meta};return r(d),this.#a=!1,this.options.persister?this.options.persister(u,d,this):u(d)},c={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(c),this.options.behavior?.onFetch(c,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#r({type:"fetch",meta:c.fetchOptions?.meta});const A=u=>{E0(u)&&u.silent||this.#r({type:"error",error:u}),E0(u)||(this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this)),this.scheduleGc()};return this.#s=pC({initialPromise:s?.initialPromise,fn:c.fetchFn,abort:n.abort.bind(n),onSuccess:u=>{if(u===void 0){A(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(d){A(d);return}this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),this.scheduleGc()},onError:A,onFail:(u,d)=>{this.#r({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}),this.#s.start()}#r(t){const s=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...gC(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return E0(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=s(this.state),vo.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function gC(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:hC(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function dO(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,n=s!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var AO=class extends vm{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,s,n){const r=s.queryKey,i=s.queryHash??A1(r,s);let c=this.get(i);return c||(c=new cO({cache:this,queryKey:r,queryHash:i,options:t.defaultQueryOptions(s),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(c)),c}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#e.get(t.queryHash);s&&(t.destroy(),s===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){vo.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(n=>Zw(s,n))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(n=>Zw(t,n)):s}notify(t){vo.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){vo.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){vo.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},uO=class extends mC{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||hO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(s=>s!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=pC({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,i)=>{this.#s({type:"failed",failureCount:r,error:i})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const s=this.state.status==="pending",n=!this.#n.canStart();try{if(!s){this.#s({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#s({type:"pending",context:i,variables:t,isPaused:n})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#s({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#s({type:"error",error:r})}}finally{this.#t.runNext(this)}}#s(t){const s=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),vo.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function hO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fO=class extends vm{constructor(t={}){super(),this.config=t,this.#e=new Map,this.#t=Date.now()}#e;#t;build(t,s,n){const r=new uO({mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(s),state:n});return this.add(r),r}add(t){const s=Fg(t),n=this.#e.get(s)??[];n.push(t),this.#e.set(s,n),this.notify({type:"added",mutation:t})}remove(t){const s=Fg(t);if(this.#e.has(s)){const n=this.#e.get(s)?.filter(r=>r!==t);n&&(n.length===0?this.#e.delete(s):this.#e.set(s,n))}this.notify({type:"removed",mutation:t})}canRun(t){const s=this.#e.get(Fg(t))?.find(n=>n.state.status==="pending");return!s||s===t}runNext(t){return this.#e.get(Fg(t))?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){vo.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...this.#e.values()].flat()}find(t){const s={exact:!0,...t};return this.getAll().find(n=>e2(s,n))}findAll(t={}){return this.getAll().filter(s=>e2(t,s))}notify(t){vo.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return vo.batch(()=>Promise.all(t.map(s=>s.continue().catch(jc))))}};function Fg(t){return t.options.scope?.id??String(t.mutationId)}function n2(t){return{onFetch:(s,n)=>{const r=s.options,i=s.fetchOptions?.meta?.fetchMore?.direction,c=s.state.data?.pages||[],A=s.state.data?.pageParams||[];let u={pages:[],pageParams:[]},d=0;const h=async()=>{let o=!1;const m=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(s.signal.aborted?o=!0:s.signal.addEventListener("abort",()=>{o=!0}),s.signal)})},y=uC(s.options,s.fetchOptions),p=async(j,b,w)=>{if(o)return Promise.reject();if(b==null&&j.pages.length)return Promise.resolve(j);const B={queryKey:s.queryKey,pageParam:b,direction:w?"backward":"forward",meta:s.options.meta};m(B);const L=await y(B),{maxPages:Q}=s.options,k=w?rO:nO;return{pages:k(j.pages,L,Q),pageParams:k(j.pageParams,b,Q)}};if(i&&c.length){const j=i==="backward",b=j?pO:r2,w={pages:c,pageParams:A},B=b(r,w);u=await p(w,B,j)}else{const j=t??c.length;do{const b=d===0?A[0]??r.initialPageParam:r2(r,u);if(d>0&&b==null)break;u=await p(u,b),d++}while(d<j)}return u};s.options.persister?s.fetchFn=()=>s.options.persister?.(h,{queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},n):s.fetchFn=h}}}function r2(t,{pages:s,pageParams:n}){const r=s.length-1;return s.length>0?t.getNextPageParam(s[r],s,n[r],n):void 0}function pO(t,{pages:s,pageParams:n}){return s.length>0?t.getPreviousPageParam?.(s[0],s,n[0],n):void 0}var mO=class{#e;#t;#n;#s;#i;#a;#r;#o;constructor(t={}){this.#e=t.queryCache||new AO,this.#t=t.mutationCache||new fO,this.#n=t.defaultOptions||{},this.#s=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#r=h1.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=Ry.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#r?.(),this.#r=void 0,this.#o?.(),this.#o=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.getQueryData(t.queryKey);if(s===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=this.#e.build(this,n);return t.revalidateIfStale&&r.isStaleByTime(bf(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(s)}}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:s,state:n})=>{const r=n.data;return[s,r]})}setQueryData(t,s,n){const r=this.defaultQueryOptions({queryKey:t}),c=this.#e.get(r.queryHash)?.state.data,A=tO(s,c);if(A!==void 0)return this.#e.build(this,r).setData(A,{...n,manual:!0})}setQueriesData(t,s,n){return vo.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,s,n)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state}removeQueries(t){const s=this.#e;vo.batch(()=>{s.findAll(t).forEach(n=>{s.remove(n)})})}resetQueries(t,s){const n=this.#e,r={type:"active",...t};return vo.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,s)))}cancelQueries(t={},s={}){const n={revert:!0,...s},r=vo.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(jc).catch(jc)}invalidateQueries(t={},s={}){return vo.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,s)})}refetchQueries(t={},s){const n={...s,cancelRefetch:s?.cancelRefetch??!0},r=vo.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()).map(i=>{let c=i.fetch(void 0,n);return n.throwOnError||(c=c.catch(jc)),i.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(r).then(jc)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const n=this.#e.build(this,s);return n.isStaleByTime(bf(s.staleTime,n))?n.fetch(s):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(jc).catch(jc)}fetchInfiniteQuery(t){return t.behavior=n2(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(jc).catch(jc)}ensureInfiniteQueryData(t){return t.behavior=n2(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ry.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,s){this.#s.set(om(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#s.values()];let n={};return s.forEach(r=>{lm(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,s){this.#i.set(om(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#i.values()];let n={};return s.forEach(r=>{lm(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=A1(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.enabled!==!0&&s.queryFn===u1&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},gO=class extends vm{constructor(t,s){super(),this.options=s,this.#e=t,this.#o=null,this.#r=Yv(),this.options.experimental_prefetchInRender||this.#r.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}#e;#t=void 0;#n=void 0;#s=void 0;#i;#a;#r;#o;#p;#u;#h;#c;#d;#l;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),a2(this.#t,this.options)?this.#A():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xv(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xv(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#b(),this.#t.removeObserver(this)}setOptions(t,s){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wc(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),n._defaulted&&!Gv(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&i2(this.#t,r,this.options,n)&&this.#A(),this.updateResult(s),i&&(this.#t!==r||Wc(this.options.enabled,this.#t)!==Wc(n.enabled,this.#t)||bf(this.options.staleTime,this.#t)!==bf(n.staleTime,this.#t))&&this.#m();const c=this.#g();i&&(this.#t!==r||Wc(this.options.enabled,this.#t)!==Wc(n.enabled,this.#t)||c!==this.#l)&&this.#y(c)}getOptimisticResult(t){const s=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(s,t);return xO(this,n)&&(this.#s=n,this.#a=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#s}trackResult(t,s){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),s?.(r),t[r])})}),n}trackProp(t){this.#f.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,s);return n.fetch().then(()=>this.createResult(n,s))}fetch(t){return this.#A({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#A(t){this.#j();let s=this.#t.fetch(this.options,t);return t?.throwOnError||(s=s.catch(jc)),s}#m(){this.#v();const t=bf(this.options.staleTime,this.#t);if(ph||this.#s.isStale||!$v(t))return;const n=dC(this.#s.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#s.isStale||this.updateResult()},n)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#b(),this.#l=t,!(ph||Wc(this.options.enabled,this.#t)===!1||!$v(this.#l)||this.#l===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||h1.isFocused())&&this.#A()},this.#l))}#x(){this.#m(),this.#y(this.#g())}#v(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#b(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(t,s){const n=this.#t,r=this.options,i=this.#s,c=this.#i,A=this.#a,d=t!==n?t.state:this.#n,{state:h}=t;let o={...h},m=!1,y;if(s._optimisticResults){const $=this.hasListeners(),q=!$&&a2(t,s),X=$&&i2(t,n,s,r);(q||X)&&(o={...o,...gC(h.data,t.options)}),s._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:p,errorUpdatedAt:j,status:b}=o;if(s.select&&o.data!==void 0)if(i&&o.data===c?.data&&s.select===this.#p)y=this.#u;else try{this.#p=s.select,y=s.select(o.data),y=Wv(i?.data,y,s),this.#u=y,this.#o=null}catch($){this.#o=$}else y=o.data;if(s.placeholderData!==void 0&&y===void 0&&b==="pending"){let $;if(i?.isPlaceholderData&&s.placeholderData===A?.placeholderData)$=i.data;else if($=typeof s.placeholderData=="function"?s.placeholderData(this.#h?.state.data,this.#h):s.placeholderData,s.select&&$!==void 0)try{$=s.select($),this.#o=null}catch(q){this.#o=q}$!==void 0&&(b="success",y=Wv(i?.data,$,s),m=!0)}this.#o&&(p=this.#o,y=this.#u,j=Date.now(),b="error");const w=o.fetchStatus==="fetching",B=b==="pending",L=b==="error",Q=B&&w,k=y!==void 0,J={status:b,fetchStatus:o.fetchStatus,isPending:B,isSuccess:b==="success",isError:L,isInitialLoading:Q,isLoading:Q,data:y,dataUpdatedAt:o.dataUpdatedAt,error:p,errorUpdatedAt:j,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>d.dataUpdateCount||o.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&!B,isLoadingError:L&&!k,isPaused:o.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:L&&k,isStale:f1(t,s),refetch:this.refetch,promise:this.#r};if(this.options.experimental_prefetchInRender){const $=fe=>{J.status==="error"?fe.reject(J.error):J.data!==void 0&&fe.resolve(J.data)},q=()=>{const fe=this.#r=J.promise=Yv();$(fe)},X=this.#r;switch(X.status){case"pending":t.queryHash===n.queryHash&&$(X);break;case"fulfilled":(J.status==="error"||J.data!==X.value)&&q();break;case"rejected":(J.status!=="error"||J.error!==X.reason)&&q();break}}return J}updateResult(t){const s=this.#s,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#a=this.options,this.#i.data!==void 0&&(this.#h=this.#t),Gv(n,s))return;this.#s=n;const r={},i=()=>{if(!s)return!0;const{notifyOnChangeProps:c}=this.options,A=typeof c=="function"?c():c;if(A==="all"||!A&&!this.#f.size)return!0;const u=new Set(A??this.#f);return this.options.throwOnError&&u.add("error"),Object.keys(this.#s).some(d=>{const h=d;return this.#s[h]!==s[h]&&u.has(h)})};t?.listeners!==!1&&i()&&(r.listeners=!0),this.#w({...r,...t})}#j(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const s=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#w(t){vo.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function yO(t,s){return Wc(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function a2(t,s){return yO(t,s)||t.state.data!==void 0&&Xv(t,s,s.refetchOnMount)}function Xv(t,s,n){if(Wc(s.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&f1(t,s)}return!1}function i2(t,s,n,r){return(t!==s||Wc(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&f1(t,n)}function f1(t,s){return Wc(s.enabled,t)!==!1&&t.isStaleByTime(bf(s.staleTime,t))}function xO(t,s){return!Gv(t.getCurrentResult(),s)}var yC=S.createContext(void 0),vO=t=>{const s=S.useContext(yC);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},bO=({client:t,children:s})=>(S.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(yC.Provider,{value:t,children:s})),xC=S.createContext(!1),jO=()=>S.useContext(xC);xC.Provider;function wO(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var SO=S.createContext(wO()),NO=()=>S.useContext(SO);function BO(t,s){return typeof t=="function"?t(...s):!!t}function o2(){}var CO=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},EO=t=>{S.useEffect(()=>{t.clearReset()},[t])},TO=({result:t,errorResetBoundary:s,throwOnError:n,query:r})=>t.isError&&!s.isReset()&&!t.isFetching&&r&&BO(n,[t.error,r]),FO=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},IO=(t,s)=>t.isLoading&&t.isFetching&&!s,RO=(t,s)=>t?.suspense&&s.isPending,l2=(t,s,n)=>s.fetchOptimistic(t).catch(()=>{n.clearReset()});function OO(t,s,n){const r=vO(),i=jO(),c=NO(),A=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(A),A._optimisticResults=i?"isRestoring":"optimistic",FO(A),CO(A,c),EO(c);const u=!r.getQueryCache().get(A.queryHash),[d]=S.useState(()=>new s(r,A)),h=d.getOptimisticResult(A);if(S.useSyncExternalStore(S.useCallback(o=>{const m=i?o2:d.subscribe(vo.batchCalls(o));return d.updateResult(),m},[d,i]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),S.useEffect(()=>{d.setOptions(A,{listeners:!1})},[A,d]),RO(A,h))throw l2(A,d,c);if(TO({result:h,errorResetBoundary:c,throwOnError:A.throwOnError,query:r.getQueryCache().get(A.queryHash)}))throw h.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(A,h),A.experimental_prefetchInRender&&!ph&&IO(h,i)&&(u?l2(A,d,c):r.getQueryCache().get(A.queryHash)?.promise)?.catch(o2).finally(()=>{d.updateResult()}),A.notifyOnChangeProps?h:d.trackResult(h)}function Ig(t,s){return OO(t,gO)}async function UO(t){if(!t.ok){const s=await t.text()||t.statusText;throw new Error(`${t.status}: ${s}`)}}const LO=({on401:t})=>async({queryKey:s})=>{const n=await fetch(s.join("/"),{credentials:"include"});return await UO(n),await n.json()},DO=new mO({defaultOptions:{queries:{queryFn:LO({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),QO={},_O=QO?.VITE_API_BASE_URL?.replace(/\/+$/,"")||"/api";let oy=null;function c2(t){oy=t}function MO(t){return t.startsWith("/")||(t=`/${t}`),t.startsWith("/api/")?t.replace(/^\/api/,""):t==="/api"?"":t}async function vC(t){const s=t.headers.get("content-type")||"",n=await t.text();if(!t.ok)throw new Error(`HTTP ${t.status} ${t.statusText}
Content-Type: ${s}
Body (first 300 chars):
${n.slice(0,300)}`);if(!s.toLowerCase().includes("application/json"))throw new Error(`Expected JSON but got "${s}".
Body (first 300 chars):
${n.slice(0,300)}

Hint: You're likely hitting the FRONTEND (index.html) instead of the BACKEND API.
Set VITE_API_BASE_URL to your backend '/api' or configure a proxy.`);try{return JSON.parse(n)}catch(r){throw new Error(`JSON parse failed: ${r?.message||r}
Body (first 300 chars):
${n.slice(0,300)}`)}}async function ct(t,s){const n=typeof localStorage<"u"?localStorage.getItem("authToken"):null,r=oy||n,i=r?`${r.slice(0,8)}...${r.slice(-8)}`:null,c=new Headers(s?.headers||{});if(!c.has("Content-Type")&&s?.body&&c.set("Content-Type","application/json"),r){c.set("Authorization",`Bearer ${r}`);try{c.set("authorization",`Bearer ${r}`)}catch{}}const A=MO(t),u=`${_O}${A}`;console.log("[apiFetch]","url:",u,"globalToken?",!!oy,"fallbackToken?",!!n,"token:",i);const d=await fetch(u,{...s||{},headers:c});return d.status===401&&(console.log("[apiFetch] 401 received, clearing globalToken"),oy=null),d}async function zo(t){const s=await ct(t,{method:"GET"});return vC(s)}async function yo(t,s){const n=await ct(t,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});return vC(n)}const bC=S.createContext(void 0),T0="/api";function PO({children:t}){const[s,n]=S.useState(null),[r,i]=S.useState(null),[c,A]=S.useState(!1),[u,d]=S.useState(null);S.useEffect(()=>{const y=localStorage.getItem("authToken");y&&(i(y),c2(y))},[]),S.useEffect(()=>{(async()=>{if(r)try{const p=await fetch(`${T0}/auth/me`,{headers:{Authorization:`Bearer ${r}`}});if(p.ok){const j=await p.json();n(j)}else i(null),localStorage.removeItem("authToken")}catch(p){console.warn("Failed to restore user from token",p)}})()},[r]),S.useEffect(()=>{c2(r),r&&localStorage.setItem("authToken",r)},[r]);const h=async(y,p)=>{A(!0),d(null);try{const j=await fetch(`${T0}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:y,password:p})});if(!j.ok){let L="Login failed";try{L=(await j.json())?.message||L}catch{}throw new Error(L)}const b=await j.json(),w=b.user,B=b.token;return n(w),i(B),{user:w,token:B}}catch(j){throw d(j?.message||"Login failed"),j}finally{A(!1)}},o=async(y,p,j,b,w,B,L,Q,k,z)=>{A(!0),d(null);try{const J=await fetch(`${T0}/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:y,password:p,role:j||"user",fullName:b||"",mobileNumber:w||"",department:B||"",employeeCode:L||"",companyName:Q||"",gstNumber:k||"",businessAddress:z||""})});if(!J.ok){let $="Signup failed";try{$=(await J.json())?.message||$}catch{}throw new Error($)}await J.json()}catch(J){throw d(J?.message||"Signup failed"),J}finally{A(!1)}},m=()=>{n(null),i(null);try{localStorage.removeItem("authToken")}catch{}};return e.jsx(bC.Provider,{value:{user:s,token:r,login:h,signup:o,logout:m,isLoading:c,error:u},children:t})}function rx(){const t=S.useContext(bC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const jC=S.createContext(void 0);function kO({children:t}){const s=rx(),[n,r]=S.useState(null),[i,c]=S.useState([]),[A,u]=S.useState([]),[d,h]=S.useState([]),[o,m]=S.useState([]),[y,p]=S.useState([]),[j,b]=S.useState(()=>{try{return JSON.parse(localStorage.getItem("pendingShopRequests")||"[]")}catch{return[]}}),[w,B]=S.useState(()=>{try{return JSON.parse(localStorage.getItem("pendingMaterialRequests")||"[]")}catch{return[]}}),[L,Q]=S.useState([]),[k,z]=S.useState(0),[J,$]=S.useState(0);S.useEffect(()=>{s?.user&&r(s.user)},[s?.user]);const q=pe=>({id:pe.id,name:pe.name,code:pe.code,rate:pe.rate,shopId:pe.shop_id||pe.shopId||null,unit:pe.unit,category:pe.category,brandName:pe.brandname||pe.brandName||"",modelNumber:pe.modelnumber||pe.modelNumber||"",subCategory:pe.subcategory||pe.subCategory||"",product:pe.product||"",technicalSpecification:pe.technicalspecification||pe.technicalSpecification||"",image:pe.image,attributes:pe.attributes||{},disabled:pe.disabled||!1,vendorCategory:pe.vendor_category||pe.vendorCategory||"",taxCodeType:pe.tax_code_type||pe.taxCodeType||null,taxCodeValue:pe.tax_code_value||pe.taxCodeValue||""});S.useEffect(()=>{let pe=!0;return(async()=>{try{const be=await zo("/shops");pe&&be?.shops&&c(be.shops)}catch(be){console.warn("load shops failed",be)}try{const be=await zo("/materials");pe&&be?.materials&&u(be.materials.map(q))}catch(be){console.warn("load materials failed",be)}try{const be=await zo("/products");pe&&be?.products&&h(be.products)}catch(be){console.warn("load products failed",be)}try{const be=await zo("/shops-pending-approval");pe&&be?.shops&&m(be.shops)}catch(be){console.warn("load pending shops failed",be)}try{const be=await zo("/materials-pending-approval");pe&&be?.materials&&Q(be.materials)}catch(be){console.warn("load pending materials failed",be)}try{const be=await zo("/messages");pe&&be?.messages&&p(be.messages)}catch(be){console.warn("load support messages failed",be)}})(),()=>{pe=!1}},[]),S.useEffect(()=>{try{localStorage.setItem("pendingShopRequests",JSON.stringify(j))}catch{}},[j]),S.useEffect(()=>{try{localStorage.setItem("pendingMaterialRequests",JSON.stringify(w))}catch{}},[w]);const X=async()=>{const pe=Date.now();if(!(pe-J<5e3||k>=10||!(typeof localStorage<"u"&&localStorage.getItem("authToken")))){if(z(je=>je+1),$(pe),j.length>0){const je=[];for(const Ne of j){try{const Je=await te(Ne.shop);if(Je&&Je.id){try{const Qe=await zo("/shops-pending-approval");Qe?.shops&&m(Qe.shops)}catch(Qe){console.warn("refresh pending shops failed",Qe)}continue}}catch(Je){console.warn("flush pending shop failed",Je)}je.push(Ne)}b(je)}if(w.length>0){const je=[];for(const Ne of w){try{const Je=await re(Ne.material);if(Je&&Je.id){try{const Qe=await zo("/materials-pending-approval");Qe?.materials&&Q(Qe.materials)}catch(Qe){console.warn("refresh pending materials failed",Qe)}continue}}catch(Je){console.warn("flush pending material failed",Je)}je.push(Ne)}B(je)}}};S.useEffect(()=>{const pe=be=>{be.key==="authToken"&&be.newValue&&X().catch(je=>console.warn("flush failed",je))};return window.addEventListener("storage",pe),()=>window.removeEventListener("storage",pe)},[]),S.useEffect(()=>{n&&j.length+w.length>0&&X().catch(()=>{})},[n]);const fe=pe=>r(pe),ee=()=>r(null),le=async pe=>{const be=await yo("/shops",pe);if(be?.shop)return c(je=>[be.shop,...je]),be.shop;throw new Error("addShop: server did not return created shop")},ue=async pe=>{const be=await yo("/materials",pe);if(be?.material){const je=q(be.material);return u(Ne=>[je,...Ne]),be.material}throw new Error("addMaterial: server did not return created material")},te=async pe=>{try{return(await yo("/shops",pe))?.shop||null}catch(be){console.warn("[submitShopForApproval] server submit failed, enqueueing locally",be?.message||be);const je={id:Math.random().toString(),shop:pe};return b(Ne=>[je,...Ne]),null}},re=async pe=>{try{return(await yo("/materials",pe))?.material||null}catch(be){console.warn("[submitMaterialForApproval] server submit failed, enqueueing locally",be?.message||be);const je={id:Math.random().toString(),material:pe};return B(Ne=>[je,...Ne]),null}},we={user:n,login:fe,logout:ee,shops:i,materials:A,products:d,approvalRequests:o,supportMessages:y,pendingShops:j,pendingMaterials:w,materialApprovalRequests:L,addShop:le,addMaterial:ue,deleteShop:async pe=>{console.log("[deleteShop] attempting to delete shop",pe);try{const be=await ct(`/shops/${pe}`,{method:"DELETE"});if(console.log("[deleteShop] response status:",be.status),be.ok){console.log("[deleteShop] delete successful, removing from local list"),c(je=>je.filter(Ne=>Ne.id!==pe));return}try{const je=await be.text();console.warn("[deleteShop] failed:",be.status,je)}catch{console.warn("[deleteShop] failed:",be.status)}}catch(be){console.warn("[deleteShop] exception:",be)}console.log("[deleteShop] re-syncing from server");try{const be=await zo("/shops");be?.shops&&c(be.shops)}catch(be){console.warn("refresh shops failed",be)}},deleteMaterial:async pe=>{console.log("[deleteMaterial] attempting to delete material",pe);try{const be=await ct(`/materials/${pe}`,{method:"DELETE"});if(console.log("[deleteMaterial] response status:",be.status),be.ok){console.log("[deleteMaterial] delete successful, removing from local list"),u(je=>je.filter(Ne=>Ne.id!==pe));return}try{const je=await be.text();console.warn("[deleteMaterial] failed:",be.status,je)}catch{console.warn("[deleteMaterial] failed:",be.status)}}catch(be){console.warn("[deleteMaterial] exception:",be)}console.log("[deleteMaterial] re-syncing from server");try{const be=await zo("/materials");be?.materials&&u(be.materials.map(q))}catch(be){console.warn("refresh materials failed",be)}},approveShop:async pe=>{const be=await yo(`/shops/${pe}/approve`,{});try{const je=await zo("/shops");je?.shops&&c(je.shops)}catch(je){console.warn("approveShop refresh failed",je)}return be?.shop},rejectShop:async(pe,be)=>{const je=await yo(`/shops/${pe}/reject`,{reason:be});try{const Ne=await zo("/shops");Ne?.shops&&c(Ne.shops)}catch(Ne){console.warn("rejectShop refresh failed",Ne)}return je?.shop},approveMaterial:async pe=>{const be=await yo(`/materials/${pe}/approve`,{});try{const je=await zo("/materials");je?.materials&&u(je.materials.map(q))}catch(je){console.warn("approveMaterial refresh failed",je)}return be?.material},rejectMaterial:async(pe,be)=>{const je=await yo(`/materials/${pe}/reject`,{reason:be});try{const Ne=await zo("/materials");Ne?.materials&&u(Ne.materials.map(q))}catch(Ne){console.warn("rejectMaterial refresh failed",Ne)}return je?.material},submitShopForApproval:te,submitMaterialForApproval:re,addSupportMessage:async(pe,be,je)=>{try{const Ne=await yo("/messages",{senderName:pe,message:be,info:je||null});Ne?.message&&p(Je=>[Ne.message,...Je])}catch(Ne){throw console.warn("addSupportMessage failed",Ne),Ne}},deleteMessage:async pe=>{try{if((await ct(`/messages/${pe}`,{method:"DELETE"})).ok){p(je=>je.filter(Ne=>Ne.id!==pe));return}throw new Error("Failed to delete message")}catch(be){throw console.warn("deleteMessage failed",be),be}}};return e.jsx(jC.Provider,{value:we,children:t})}function ei(){const t=S.useContext(jC);if(!t)throw new Error("useData must be used inside DataProvider");return t}const HO=1,KO=1e6;let F0=0;function zO(){return F0=(F0+1)%Number.MAX_SAFE_INTEGER,F0.toString()}const I0=new Map,d2=t=>{if(I0.has(t))return;const s=setTimeout(()=>{I0.delete(t),Gp({type:"REMOVE_TOAST",toastId:t})},KO);I0.set(t,s)},VO=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,HO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===s.toast.id?{...n,...s.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=s;return n?d2(n):t.toasts.forEach(r=>{d2(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==s.toastId)}}},ly=[];let cy={toasts:[]};function Gp(t){cy=VO(cy,t),ly.forEach(s=>{s(cy)})}function $O({...t}){const s=zO(),n=i=>Gp({type:"UPDATE_TOAST",toast:{...i,id:s}}),r=()=>Gp({type:"DISMISS_TOAST",toastId:s});return Gp({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:i=>{i||r()}}}),{id:s,dismiss:r,update:n}}function ma(){const[t,s]=S.useState(cy);return S.useEffect(()=>(ly.push(s),()=>{const n=ly.indexOf(s);n>-1&&ly.splice(n,1)}),[t]),{...t,toast:$O,dismiss:n=>Gp({type:"DISMISS_TOAST",toastId:n})}}var Nh=tC();const wC=o1(Nh);function Wl(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}function A2(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Bh(...t){return s=>{let n=!1;const r=t.map(i=>{const c=A2(i,s);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let i=0;i<r.length;i++){const c=r[i];typeof c=="function"?c():A2(t[i],null)}}}}function Mr(...t){return S.useCallback(Bh(...t),t)}function GO(t,s){const n=S.createContext(s),r=c=>{const{children:A,...u}=c,d=S.useMemo(()=>u,Object.values(u));return e.jsx(n.Provider,{value:d,children:A})};r.displayName=t+"Provider";function i(c){const A=S.useContext(n);if(A)return A;if(s!==void 0)return s;throw new Error(`\`${c}\` must be used within \`${t}\``)}return[r,i]}function Cc(t,s=[]){let n=[];function r(c,A){const u=S.createContext(A),d=n.length;n=[...n,A];const h=m=>{const{scope:y,children:p,...j}=m,b=y?.[t]?.[d]||u,w=S.useMemo(()=>j,Object.values(j));return e.jsx(b.Provider,{value:w,children:p})};h.displayName=c+"Provider";function o(m,y){const p=y?.[t]?.[d]||u,j=S.useContext(p);if(j)return j;if(A!==void 0)return A;throw new Error(`\`${m}\` must be used within \`${c}\``)}return[h,o]}const i=()=>{const c=n.map(A=>S.createContext(A));return function(u){const d=u?.[t]||c;return S.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return i.scopeName=t,[r,qO(i,...s)]}function qO(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(c){const A=r.reduce((u,{useScope:d,scopeName:h})=>{const m=d(c)[`__scope${h}`];return{...u,...m}},{});return S.useMemo(()=>({[`__scope${s.scopeName}`]:A}),[A])}};return n.scopeName=s.scopeName,n}function Jv(t){const s=WO(t),n=S.forwardRef((r,i)=>{const{children:c,...A}=r,u=S.Children.toArray(c),d=u.find(XO);if(d){const h=d.props.children,o=u.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return e.jsx(s,{...A,ref:i,children:S.isValidElement(h)?S.cloneElement(h,void 0,o):null})}return e.jsx(s,{...A,ref:i,children:c})});return n.displayName=`${t}.Slot`,n}function WO(t){const s=S.forwardRef((n,r)=>{const{children:i,...c}=n;if(S.isValidElement(i)){const A=ZO(i),u=JO(c,i.props);return i.type!==S.Fragment&&(u.ref=r?Bh(r,A):A),S.cloneElement(i,u)}return S.Children.count(i)>1?S.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var YO=Symbol("radix.slottable");function XO(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===YO}function JO(t,s){const n={...s};for(const r in s){const i=t[r],c=s[r];/^on[A-Z]/.test(r)?i&&c?n[r]=(...u)=>{c(...u),i(...u)}:i&&(n[r]=i):r==="style"?n[r]={...i,...c}:r==="className"&&(n[r]=[i,c].filter(Boolean).join(" "))}return{...t,...n}}function ZO(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function eU(t){const s=t+"CollectionProvider",[n,r]=Cc(s),[i,c]=n(s,{collectionRef:{current:null},itemMap:new Map}),A=b=>{const{scope:w,children:B}=b,L=Vo.useRef(null),Q=Vo.useRef(new Map).current;return e.jsx(i,{scope:w,itemMap:Q,collectionRef:L,children:B})};A.displayName=s;const u=t+"CollectionSlot",d=Jv(u),h=Vo.forwardRef((b,w)=>{const{scope:B,children:L}=b,Q=c(u,B),k=Mr(w,Q.collectionRef);return e.jsx(d,{ref:k,children:L})});h.displayName=u;const o=t+"CollectionItemSlot",m="data-radix-collection-item",y=Jv(o),p=Vo.forwardRef((b,w)=>{const{scope:B,children:L,...Q}=b,k=Vo.useRef(null),z=Mr(w,k),J=c(o,B);return Vo.useEffect(()=>(J.itemMap.set(k,{ref:k,...Q}),()=>void J.itemMap.delete(k))),e.jsx(y,{[m]:"",ref:z,children:L})});p.displayName=o;function j(b){const w=c(t+"CollectionConsumer",b);return Vo.useCallback(()=>{const L=w.collectionRef.current;if(!L)return[];const Q=Array.from(L.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((J,$)=>Q.indexOf(J.ref.current)-Q.indexOf($.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:A,Slot:h,ItemSlot:p},j,r]}var tU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_d=tU.reduce((t,s)=>{const n=Jv(`Primitive.${s}`),r=S.forwardRef((i,c)=>{const{asChild:A,...u}=i,d=A?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...u,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function SC(t,s){t&&Nh.flushSync(()=>t.dispatchEvent(s))}function qo(t){const s=S.useRef(t);return S.useEffect(()=>{s.current=t}),S.useMemo(()=>(...n)=>s.current?.(...n),[])}function NC(t,s=globalThis?.document){const n=qo(t);S.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return s.addEventListener("keydown",r,{capture:!0}),()=>s.removeEventListener("keydown",r,{capture:!0})},[n,s])}var sU="DismissableLayer",Zv="dismissableLayer.update",nU="dismissableLayer.pointerDownOutside",rU="dismissableLayer.focusOutside",u2,BC=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),CC=S.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:c,onInteractOutside:A,onDismiss:u,...d}=t,h=S.useContext(BC),[o,m]=S.useState(null),y=o?.ownerDocument??globalThis?.document,[,p]=S.useState({}),j=Mr(s,$=>m($)),b=Array.from(h.layers),[w]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),B=b.indexOf(w),L=o?b.indexOf(o):-1,Q=h.layersWithOutsidePointerEventsDisabled.size>0,k=L>=B,z=iU($=>{const q=$.target,X=[...h.branches].some(fe=>fe.contains(q));!k||X||(i?.($),A?.($),$.defaultPrevented||u?.())},y),J=oU($=>{const q=$.target;[...h.branches].some(fe=>fe.contains(q))||(c?.($),A?.($),$.defaultPrevented||u?.())},y);return NC($=>{L===h.layers.size-1&&(r?.($),!$.defaultPrevented&&u&&($.preventDefault(),u()))},y),S.useEffect(()=>{if(o)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(u2=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(o)),h.layers.add(o),h2(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=u2)}},[o,y,n,h]),S.useEffect(()=>()=>{o&&(h.layers.delete(o),h.layersWithOutsidePointerEventsDisabled.delete(o),h2())},[o,h]),S.useEffect(()=>{const $=()=>p({});return document.addEventListener(Zv,$),()=>document.removeEventListener(Zv,$)},[]),e.jsx(_d.div,{...d,ref:j,style:{pointerEvents:Q?k?"auto":"none":void 0,...t.style},onFocusCapture:Wl(t.onFocusCapture,J.onFocusCapture),onBlurCapture:Wl(t.onBlurCapture,J.onBlurCapture),onPointerDownCapture:Wl(t.onPointerDownCapture,z.onPointerDownCapture)})});CC.displayName=sU;var aU="DismissableLayerBranch",EC=S.forwardRef((t,s)=>{const n=S.useContext(BC),r=S.useRef(null),i=Mr(s,r);return S.useEffect(()=>{const c=r.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),e.jsx(_d.div,{...t,ref:i})});EC.displayName=aU;function iU(t,s=globalThis?.document){const n=qo(t),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const c=u=>{if(u.target&&!r.current){let d=function(){TC(nU,n,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(s.removeEventListener("click",i.current),i.current=d,s.addEventListener("click",i.current,{once:!0})):d()}else s.removeEventListener("click",i.current);r.current=!1},A=window.setTimeout(()=>{s.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(A),s.removeEventListener("pointerdown",c),s.removeEventListener("click",i.current)}},[s,n]),{onPointerDownCapture:()=>r.current=!0}}function oU(t,s=globalThis?.document){const n=qo(t),r=S.useRef(!1);return S.useEffect(()=>{const i=c=>{c.target&&!r.current&&TC(rU,n,{originalEvent:c},{discrete:!1})};return s.addEventListener("focusin",i),()=>s.removeEventListener("focusin",i)},[s,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function h2(){const t=new CustomEvent(Zv);document.dispatchEvent(t)}function TC(t,s,n,{discrete:r}){const i=n.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&i.addEventListener(t,s,{once:!0}),r?SC(i,c):i.dispatchEvent(c)}var lU=CC,cU=EC,ti=globalThis?.document?S.useLayoutEffect:()=>{},dU="Portal",FC=S.forwardRef((t,s)=>{const{container:n,...r}=t,[i,c]=S.useState(!1);ti(()=>c(!0),[]);const A=n||i&&globalThis?.document?.body;return A?wC.createPortal(e.jsx(_d.div,{...r,ref:s}),A):null});FC.displayName=dU;function AU(t,s){return S.useReducer((n,r)=>s[n][r]??n,t)}var IC=t=>{const{present:s,children:n}=t,r=uU(s),i=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),c=Mr(r.ref,hU(i));return typeof n=="function"||r.isPresent?S.cloneElement(i,{ref:c}):null};IC.displayName="Presence";function uU(t){const[s,n]=S.useState(),r=S.useRef({}),i=S.useRef(t),c=S.useRef("none"),A=t?"mounted":"unmounted",[u,d]=AU(A,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const h=Rg(r.current);c.current=u==="mounted"?h:"none"},[u]),ti(()=>{const h=r.current,o=i.current;if(o!==t){const y=c.current,p=Rg(h);t?d("MOUNT"):p==="none"||h?.display==="none"?d("UNMOUNT"):d(o&&y!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,d]),ti(()=>{if(s){let h;const o=s.ownerDocument.defaultView??window,m=p=>{const b=Rg(r.current).includes(p.animationName);if(p.target===s&&b&&(d("ANIMATION_END"),!i.current)){const w=s.style.animationFillMode;s.style.animationFillMode="forwards",h=o.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=w)})}},y=p=>{p.target===s&&(c.current=Rg(r.current))};return s.addEventListener("animationstart",y),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{o.clearTimeout(h),s.removeEventListener("animationstart",y),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:S.useCallback(h=>{h&&(r.current=getComputedStyle(h)),n(h)},[])}}function Rg(t){return t?.animationName||"none"}function hU(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function fU({prop:t,defaultProp:s,onChange:n=()=>{}}){const[r,i]=pU({defaultProp:s,onChange:n}),c=t!==void 0,A=c?t:r,u=qo(n),d=S.useCallback(h=>{if(c){const m=typeof h=="function"?h(t):h;m!==t&&u(m)}else i(h)},[c,t,i,u]);return[A,d]}function pU({defaultProp:t,onChange:s}){const n=S.useState(t),[r]=n,i=S.useRef(r),c=qo(s);return S.useEffect(()=>{i.current!==r&&(c(r),i.current=r)},[r,i,c]),n}var mU="VisuallyHidden",p1=S.forwardRef((t,s)=>e.jsx(_d.span,{...t,ref:s,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));p1.displayName=mU;var m1="ToastProvider",[g1,gU,yU]=eU("Toast"),[RC]=Cc("Toast",[yU]),[xU,ax]=RC(m1),OC=t=>{const{__scopeToast:s,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:c=50,children:A}=t,[u,d]=S.useState(null),[h,o]=S.useState(0),m=S.useRef(!1),y=S.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${m1}\`. Expected non-empty \`string\`.`),e.jsx(g1.Provider,{scope:s,children:e.jsx(xU,{scope:s,label:n,duration:r,swipeDirection:i,swipeThreshold:c,toastCount:h,viewport:u,onViewportChange:d,onToastAdd:S.useCallback(()=>o(p=>p+1),[]),onToastRemove:S.useCallback(()=>o(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:y,children:A})})};OC.displayName=m1;var UC="ToastViewport",vU=["F8"],eb="toast.viewportPause",tb="toast.viewportResume",LC=S.forwardRef((t,s)=>{const{__scopeToast:n,hotkey:r=vU,label:i="Notifications ({hotkey})",...c}=t,A=ax(UC,n),u=gU(n),d=S.useRef(null),h=S.useRef(null),o=S.useRef(null),m=S.useRef(null),y=Mr(s,m,A.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=A.toastCount>0;S.useEffect(()=>{const w=B=>{r.length!==0&&r.every(Q=>B[Q]||B.code===Q)&&m.current?.focus()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),S.useEffect(()=>{const w=d.current,B=m.current;if(j&&w&&B){const L=()=>{if(!A.isClosePausedRef.current){const J=new CustomEvent(eb);B.dispatchEvent(J),A.isClosePausedRef.current=!0}},Q=()=>{if(A.isClosePausedRef.current){const J=new CustomEvent(tb);B.dispatchEvent(J),A.isClosePausedRef.current=!1}},k=J=>{!w.contains(J.relatedTarget)&&Q()},z=()=>{w.contains(document.activeElement)||Q()};return w.addEventListener("focusin",L),w.addEventListener("focusout",k),w.addEventListener("pointermove",L),w.addEventListener("pointerleave",z),window.addEventListener("blur",L),window.addEventListener("focus",Q),()=>{w.removeEventListener("focusin",L),w.removeEventListener("focusout",k),w.removeEventListener("pointermove",L),w.removeEventListener("pointerleave",z),window.removeEventListener("blur",L),window.removeEventListener("focus",Q)}}},[j,A.isClosePausedRef]);const b=S.useCallback(({tabbingDirection:w})=>{const L=u().map(Q=>{const k=Q.ref.current,z=[k,...OU(k)];return w==="forwards"?z:z.reverse()});return(w==="forwards"?L.reverse():L).flat()},[u]);return S.useEffect(()=>{const w=m.current;if(w){const B=L=>{const Q=L.altKey||L.ctrlKey||L.metaKey;if(L.key==="Tab"&&!Q){const z=document.activeElement,J=L.shiftKey;if(L.target===w&&J){h.current?.focus();return}const X=b({tabbingDirection:J?"backwards":"forwards"}),fe=X.findIndex(ee=>ee===z);R0(X.slice(fe+1))?L.preventDefault():J?h.current?.focus():o.current?.focus()}};return w.addEventListener("keydown",B),()=>w.removeEventListener("keydown",B)}},[u,b]),e.jsxs(cU,{ref:d,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&e.jsx(sb,{ref:h,onFocusFromOutsideViewport:()=>{const w=b({tabbingDirection:"forwards"});R0(w)}}),e.jsx(g1.Slot,{scope:n,children:e.jsx(_d.ol,{tabIndex:-1,...c,ref:y})}),j&&e.jsx(sb,{ref:o,onFocusFromOutsideViewport:()=>{const w=b({tabbingDirection:"backwards"});R0(w)}})]})});LC.displayName=UC;var DC="ToastFocusProxy",sb=S.forwardRef((t,s)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,c=ax(DC,n);return e.jsx(p1,{"aria-hidden":!0,tabIndex:0,...i,ref:s,style:{position:"fixed"},onFocus:A=>{const u=A.relatedTarget;!c.viewport?.contains(u)&&r()}})});sb.displayName=DC;var ix="Toast",bU="toast.swipeStart",jU="toast.swipeMove",wU="toast.swipeCancel",SU="toast.swipeEnd",QC=S.forwardRef((t,s)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:c,...A}=t,[u=!0,d]=fU({prop:r,defaultProp:i,onChange:c});return e.jsx(IC,{present:n||u,children:e.jsx(CU,{open:u,...A,ref:s,onClose:()=>d(!1),onPause:qo(t.onPause),onResume:qo(t.onResume),onSwipeStart:Wl(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Wl(t.onSwipeMove,h=>{const{x:o,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${o}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:Wl(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Wl(t.onSwipeEnd,h=>{const{x:o,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${o}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),d(!1)})})})});QC.displayName=ix;var[NU,BU]=RC(ix,{onClose(){}}),CU=S.forwardRef((t,s)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:c,onClose:A,onEscapeKeyDown:u,onPause:d,onResume:h,onSwipeStart:o,onSwipeMove:m,onSwipeCancel:y,onSwipeEnd:p,...j}=t,b=ax(ix,n),[w,B]=S.useState(null),L=Mr(s,te=>B(te)),Q=S.useRef(null),k=S.useRef(null),z=i||b.duration,J=S.useRef(0),$=S.useRef(z),q=S.useRef(0),{onToastAdd:X,onToastRemove:fe}=b,ee=qo(()=>{w?.contains(document.activeElement)&&b.viewport?.focus(),A()}),le=S.useCallback(te=>{!te||te===1/0||(window.clearTimeout(q.current),J.current=new Date().getTime(),q.current=window.setTimeout(ee,te))},[ee]);S.useEffect(()=>{const te=b.viewport;if(te){const re=()=>{le($.current),h?.()},ne=()=>{const oe=new Date().getTime()-J.current;$.current=$.current-oe,window.clearTimeout(q.current),d?.()};return te.addEventListener(eb,ne),te.addEventListener(tb,re),()=>{te.removeEventListener(eb,ne),te.removeEventListener(tb,re)}}},[b.viewport,z,d,h,le]),S.useEffect(()=>{c&&!b.isClosePausedRef.current&&le(z)},[c,z,b.isClosePausedRef,le]),S.useEffect(()=>(X(),()=>fe()),[X,fe]);const ue=S.useMemo(()=>w?zC(w):null,[w]);return b.viewport?e.jsxs(e.Fragment,{children:[ue&&e.jsx(EU,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:ue}),e.jsx(NU,{scope:n,onClose:ee,children:Nh.createPortal(e.jsx(g1.ItemSlot,{scope:n,children:e.jsx(lU,{asChild:!0,onEscapeKeyDown:Wl(u,()=>{b.isFocusedToastEscapeKeyDownRef.current||ee(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(_d.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":c?"open":"closed","data-swipe-direction":b.swipeDirection,...j,ref:L,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Wl(t.onKeyDown,te=>{te.key==="Escape"&&(u?.(te.nativeEvent),te.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,ee()))}),onPointerDown:Wl(t.onPointerDown,te=>{te.button===0&&(Q.current={x:te.clientX,y:te.clientY})}),onPointerMove:Wl(t.onPointerMove,te=>{if(!Q.current)return;const re=te.clientX-Q.current.x,ne=te.clientY-Q.current.y,oe=!!k.current,se=["left","right"].includes(b.swipeDirection),xe=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,Me=se?xe(0,re):0,me=se?0:xe(0,ne),Z=te.pointerType==="touch"?10:2,ge={x:Me,y:me},we={originalEvent:te,delta:ge};oe?(k.current=ge,Og(jU,m,we,{discrete:!1})):f2(ge,b.swipeDirection,Z)?(k.current=ge,Og(bU,o,we,{discrete:!1}),te.target.setPointerCapture(te.pointerId)):(Math.abs(re)>Z||Math.abs(ne)>Z)&&(Q.current=null)}),onPointerUp:Wl(t.onPointerUp,te=>{const re=k.current,ne=te.target;if(ne.hasPointerCapture(te.pointerId)&&ne.releasePointerCapture(te.pointerId),k.current=null,Q.current=null,re){const oe=te.currentTarget,se={originalEvent:te,delta:re};f2(re,b.swipeDirection,b.swipeThreshold)?Og(SU,p,se,{discrete:!0}):Og(wU,y,se,{discrete:!0}),oe.addEventListener("click",xe=>xe.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),EU=t=>{const{__scopeToast:s,children:n,...r}=t,i=ax(ix,s),[c,A]=S.useState(!1),[u,d]=S.useState(!1);return IU(()=>A(!0)),S.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:e.jsx(FC,{asChild:!0,children:e.jsx(p1,{...r,children:c&&e.jsxs(e.Fragment,{children:[i.label," ",n]})})})},TU="ToastTitle",_C=S.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t;return e.jsx(_d.div,{...r,ref:s})});_C.displayName=TU;var FU="ToastDescription",MC=S.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t;return e.jsx(_d.div,{...r,ref:s})});MC.displayName=FU;var PC="ToastAction",kC=S.forwardRef((t,s)=>{const{altText:n,...r}=t;return n.trim()?e.jsx(KC,{altText:n,asChild:!0,children:e.jsx(y1,{...r,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${PC}\`. Expected non-empty \`string\`.`),null)});kC.displayName=PC;var HC="ToastClose",y1=S.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t,i=BU(HC,n);return e.jsx(KC,{asChild:!0,children:e.jsx(_d.button,{type:"button",...r,ref:s,onClick:Wl(t.onClick,i.onClose)})})});y1.displayName=HC;var KC=S.forwardRef((t,s)=>{const{__scopeToast:n,altText:r,...i}=t;return e.jsx(_d.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:s})});function zC(t){const s=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&s.push(r.textContent),RU(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",c=r.dataset.radixToastAnnounceExclude==="";if(!i)if(c){const A=r.dataset.radixToastAnnounceAlt;A&&s.push(A)}else s.push(...zC(r))}}),s}function Og(t,s,n,{discrete:r}){const i=n.originalEvent.currentTarget,c=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});s&&i.addEventListener(t,s,{once:!0}),r?SC(i,c):i.dispatchEvent(c)}var f2=(t,s,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),c=r>i;return s==="left"||s==="right"?c&&r>n:!c&&i>n};function IU(t=()=>{}){const s=qo(t);ti(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[s])}function RU(t){return t.nodeType===t.ELEMENT_NODE}function OU(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function R0(t){const s=document.activeElement;return t.some(n=>n===s?!0:(n.focus(),document.activeElement!==s))}var UU=OC,VC=LC,$C=QC,GC=_C,qC=MC,WC=kC,YC=y1;function XC(t){var s,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(s=0;s<i;s++)t[s]&&(n=XC(t[s]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function JC(){for(var t,s,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(s=XC(t))&&(r&&(r+=" "),r+=s);return r}const p2=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,m2=JC,ox=(t,s)=>n=>{var r;if(s?.variants==null)return m2(t,n?.class,n?.className);const{variants:i,defaultVariants:c}=s,A=Object.keys(i).map(h=>{const o=n?.[h],m=c?.[h];if(o===null)return null;const y=p2(o)||p2(m);return i[h][y]}),u=n&&Object.entries(n).reduce((h,o)=>{let[m,y]=o;return y===void 0||(h[m]=y),h},{}),d=s==null||(r=s.compoundVariants)===null||r===void 0?void 0:r.reduce((h,o)=>{let{class:m,className:y,...p}=o;return Object.entries(p).every(j=>{let[b,w]=j;return Array.isArray(w)?w.includes({...c,...u}[b]):{...c,...u}[b]===w})?[...h,m,y]:h},[]);return m2(t,A,d,n?.class,n?.className)};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),DU=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,n,r)=>r?r.toUpperCase():n.toLowerCase()),g2=t=>{const s=DU(t);return s.charAt(0).toUpperCase()+s.slice(1)},ZC=(...t)=>t.filter((s,n,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===n).join(" ").trim(),QU=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _U={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=S.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:c,iconNode:A,...u},d)=>S.createElement("svg",{ref:d,..._U,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:ZC("lucide",i),...!c&&!QU(u)&&{"aria-hidden":"true"},...u},[...A.map(([h,o])=>S.createElement(h,o)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=(t,s)=>{const n=S.forwardRef(({className:r,...i},c)=>S.createElement(MU,{ref:c,iconNode:s,className:ZC(`lucide-${LU(g2(t))}`,`lucide-${t}`,r),...i}));return n.displayName=g2(t),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],jf=Kn("arrow-left",PU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],dy=Kn("arrow-right",kU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M3 3h18",key:"o7r712"}],["path",{d:"M20 7H8",key:"gd2fo2"}],["path",{d:"M20 11H8",key:"1ynp89"}],["path",{d:"M10 19h10",key:"19hjk5"}],["path",{d:"M8 15h12",key:"1yqzne"}],["path",{d:"M4 3v14",key:"fggqzn"}],["circle",{cx:"4",cy:"19",r:"2",key:"p3m9r0"}]],e5=Kn("blinds",HU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 9v6",key:"199k2o"}],["path",{d:"M16 15v6",key:"8rj2es"}],["path",{d:"M16 3v6",key:"1j6rpj"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M8 15v6",key:"1stoo3"}],["path",{d:"M8 3v6",key:"vlvjmk"}]],t5=Kn("brick-wall",KU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Sl=Kn("building-2",zU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Ef=Kn("calculator",VU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],x1=Kn("check",$U);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Oy=Kn("chevron-down",GU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],er=Kn("chevron-left",qU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],tr=Kn("chevron-right",WU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],nb=Kn("chevron-up",YU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mh=Kn("circle-alert",XU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Wo=Kn("circle-check",JU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Uy=Kn("circle-x",ZU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],tL=Kn("circle",eL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],rb=Kn("clock",sL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],s5=Kn("cloud",nL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]],n5=Kn("door-open",rL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],hi=Kn("download",aL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],r5=Kn("droplets",iL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],lL=Kn("hammer",oL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],dL=Kn("key-round",cL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],a5=Kn("layout-dashboard",AL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],lx=Kn("layers",uL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Xl=Kn("loader-circle",hL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],i5=Kn("log-out",fL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],mL=Kn("map-pin",pL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],o5=Kn("menu",gL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],gh=Kn("message-square",yL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ol=Kn("package",xL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]],l5=Kn("paint-bucket",vL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],jL=Kn("paintbrush",bL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],SL=Kn("pencil",wL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],wc=Kn("plus",NL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ly=Kn("search",BL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],EL=Kn("send",CL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],y2=Kn("settings",TL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],c5=Kn("shield-alert",FL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Dy=Kn("shopping-cart",IL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],OL=Kn("star",RL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],x2=Kn("store",UL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],DL=Kn("tags",LL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],qc=Kn("trash-2",QL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ML=Kn("trending-up",_L);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kL=Kn("triangle-alert",PL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],d5=Kn("users",HL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],zL=Kn("user",KL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],cx=Kn("x",VL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Qy=Kn("zap",$L),v1="-",GL=t=>{const s=WL(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:A=>{const u=A.split(v1);return u[0]===""&&u.length!==1&&u.shift(),A5(u,s)||qL(A)},getConflictingClassGroupIds:(A,u)=>{const d=n[A]||[];return u&&r[A]?[...d,...r[A]]:d}}},A5=(t,s)=>{if(t.length===0)return s.classGroupId;const n=t[0],r=s.nextPart.get(n),i=r?A5(t.slice(1),r):void 0;if(i)return i;if(s.validators.length===0)return;const c=t.join(v1);return s.validators.find(({validator:A})=>A(c))?.classGroupId},v2=/^\[(.+)\]$/,qL=t=>{if(v2.test(t)){const s=v2.exec(t)[1],n=s?.substring(0,s.indexOf(":"));if(n)return"arbitrary.."+n}},WL=t=>{const{theme:s,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)ab(n[i],r,i,s);return r},ab=(t,s,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const c=i===""?s:b2(s,i);c.classGroupId=n;return}if(typeof i=="function"){if(YL(i)){ab(i(r),s,n,r);return}s.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([c,A])=>{ab(A,b2(s,c),n,r)})})},b2=(t,s)=>{let n=t;return s.split(v1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},YL=t=>t.isThemeGetter,XL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=new Map,r=new Map;const i=(c,A)=>{n.set(c,A),s++,s>t&&(s=0,r=n,n=new Map)};return{get(c){let A=n.get(c);if(A!==void 0)return A;if((A=r.get(c))!==void 0)return i(c,A),A},set(c,A){n.has(c)?n.set(c,A):i(c,A)}}},ib="!",ob=":",JL=ob.length,ZL=t=>{const{prefix:s,experimentalParseClassName:n}=t;let r=i=>{const c=[];let A=0,u=0,d=0,h;for(let j=0;j<i.length;j++){let b=i[j];if(A===0&&u===0){if(b===ob){c.push(i.slice(d,j)),d=j+JL;continue}if(b==="/"){h=j;continue}}b==="["?A++:b==="]"?A--:b==="("?u++:b===")"&&u--}const o=c.length===0?i:i.substring(d),m=eD(o),y=m!==o,p=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:m,maybePostfixModifierPosition:p}};if(s){const i=s+ob,c=r;r=A=>A.startsWith(i)?c(A.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:A,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=c=>n({className:c,parseClassName:i})}return r},eD=t=>t.endsWith(ib)?t.substring(0,t.length-1):t.startsWith(ib)?t.substring(1):t,tD=t=>{const s=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let c=[];return r.forEach(A=>{A[0]==="["||s[A]?(i.push(...c.sort(),A),c=[]):c.push(A)}),i.push(...c.sort()),i}},sD=t=>({cache:XL(t.cacheSize),parseClassName:ZL(t),sortModifiers:tD(t),...GL(t)}),nD=/\s+/,rD=(t,s)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:c}=s,A=[],u=t.trim().split(nD);let d="";for(let h=u.length-1;h>=0;h-=1){const o=u[h],{isExternal:m,modifiers:y,hasImportantModifier:p,baseClassName:j,maybePostfixModifierPosition:b}=n(o);if(m){d=o+(d.length>0?" "+d:d);continue}let w=!!b,B=r(w?j.substring(0,b):j);if(!B){if(!w){d=o+(d.length>0?" "+d:d);continue}if(B=r(j),!B){d=o+(d.length>0?" "+d:d);continue}w=!1}const L=c(y).join(":"),Q=p?L+ib:L,k=Q+B;if(A.includes(k))continue;A.push(k);const z=i(B,w);for(let J=0;J<z.length;++J){const $=z[J];A.push(Q+$)}d=o+(d.length>0?" "+d:d)}return d};function aD(){let t=0,s,n,r="";for(;t<arguments.length;)(s=arguments[t++])&&(n=u5(s))&&(r&&(r+=" "),r+=n);return r}const u5=t=>{if(typeof t=="string")return t;let s,n="";for(let r=0;r<t.length;r++)t[r]&&(s=u5(t[r]))&&(n&&(n+=" "),n+=s);return n};function iD(t,...s){let n,r,i,c=A;function A(d){const h=s.reduce((o,m)=>m(o),t());return n=sD(h),r=n.cache.get,i=n.cache.set,c=u,u(d)}function u(d){const h=r(d);if(h)return h;const o=rD(d,n);return i(d,o),o}return function(){return c(aD.apply(null,arguments))}}const to=t=>{const s=n=>n[t]||[];return s.isThemeGetter=!0,s},h5=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,f5=/^\((?:(\w[\w-]*):)?(.+)\)$/i,oD=/^\d+\/\d+$/,lD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,AD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nf=t=>oD.test(t),jr=t=>!!t&&!Number.isNaN(Number(t)),ZA=t=>!!t&&Number.isInteger(Number(t)),O0=t=>t.endsWith("%")&&jr(t.slice(0,-1)),aA=t=>lD.test(t),hD=()=>!0,fD=t=>cD.test(t)&&!dD.test(t),p5=()=>!1,pD=t=>AD.test(t),mD=t=>uD.test(t),gD=t=>!An(t)&&!un(t),yD=t=>Lf(t,y5,p5),An=t=>h5.test(t),Zu=t=>Lf(t,x5,fD),U0=t=>Lf(t,wD,jr),j2=t=>Lf(t,m5,p5),xD=t=>Lf(t,g5,mD),Ug=t=>Lf(t,v5,pD),un=t=>f5.test(t),Lp=t=>Df(t,x5),vD=t=>Df(t,SD),w2=t=>Df(t,m5),bD=t=>Df(t,y5),jD=t=>Df(t,g5),Lg=t=>Df(t,v5,!0),Lf=(t,s,n)=>{const r=h5.exec(t);return r?r[1]?s(r[1]):n(r[2]):!1},Df=(t,s,n=!1)=>{const r=f5.exec(t);return r?r[1]?s(r[1]):n:!1},m5=t=>t==="position"||t==="percentage",g5=t=>t==="image"||t==="url",y5=t=>t==="length"||t==="size"||t==="bg-size",x5=t=>t==="length",wD=t=>t==="number",SD=t=>t==="family-name",v5=t=>t==="shadow",ND=()=>{const t=to("color"),s=to("font"),n=to("text"),r=to("font-weight"),i=to("tracking"),c=to("leading"),A=to("breakpoint"),u=to("container"),d=to("spacing"),h=to("radius"),o=to("shadow"),m=to("inset-shadow"),y=to("text-shadow"),p=to("drop-shadow"),j=to("blur"),b=to("perspective"),w=to("aspect"),B=to("ease"),L=to("animate"),Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],z=()=>[...k(),un,An],J=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto","contain","none"],q=()=>[un,An,d],X=()=>[nf,"full","auto",...q()],fe=()=>[ZA,"none","subgrid",un,An],ee=()=>["auto",{span:["full",ZA,un,An]},ZA,un,An],le=()=>[ZA,"auto",un,An],ue=()=>["auto","min","max","fr",un,An],te=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],ne=()=>["auto",...q()],oe=()=>[nf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...q()],se=()=>[t,un,An],xe=()=>[...k(),w2,j2,{position:[un,An]}],Me=()=>["no-repeat",{repeat:["","x","y","space","round"]}],me=()=>["auto","cover","contain",bD,yD,{size:[un,An]}],Z=()=>[O0,Lp,Zu],ge=()=>["","none","full",h,un,An],we=()=>["",jr,Lp,Zu],pe=()=>["solid","dashed","dotted","double"],be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],je=()=>[jr,O0,w2,j2],Ne=()=>["","none",j,un,An],Je=()=>["none",jr,un,An],Qe=()=>["none",jr,un,An],pt=()=>[jr,un,An],Te=()=>[nf,"full",...q()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[aA],breakpoint:[aA],color:[hD],container:[aA],"drop-shadow":[aA],ease:["in","out","in-out"],font:[gD],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[aA],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[aA],shadow:[aA],spacing:["px",jr],text:[aA],"text-shadow":[aA],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",nf,An,un,w]}],container:["container"],columns:[{columns:[jr,An,un,u]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:z()}],overflow:[{overflow:J()}],"overflow-x":[{"overflow-x":J()}],"overflow-y":[{"overflow-y":J()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:X()}],"inset-x":[{"inset-x":X()}],"inset-y":[{"inset-y":X()}],start:[{start:X()}],end:[{end:X()}],top:[{top:X()}],right:[{right:X()}],bottom:[{bottom:X()}],left:[{left:X()}],visibility:["visible","invisible","collapse"],z:[{z:[ZA,"auto",un,An]}],basis:[{basis:[nf,"full","auto",u,...q()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[jr,nf,"auto","initial","none",An]}],grow:[{grow:["",jr,un,An]}],shrink:[{shrink:["",jr,un,An]}],order:[{order:[ZA,"first","last","none",un,An]}],"grid-cols":[{"grid-cols":fe()}],"col-start-end":[{col:ee()}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":fe()}],"row-start-end":[{row:ee()}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ue()}],"auto-rows":[{"auto-rows":ue()}],gap:[{gap:q()}],"gap-x":[{"gap-x":q()}],"gap-y":[{"gap-y":q()}],"justify-content":[{justify:[...te(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...te()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":te()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:q()}],px:[{px:q()}],py:[{py:q()}],ps:[{ps:q()}],pe:[{pe:q()}],pt:[{pt:q()}],pr:[{pr:q()}],pb:[{pb:q()}],pl:[{pl:q()}],m:[{m:ne()}],mx:[{mx:ne()}],my:[{my:ne()}],ms:[{ms:ne()}],me:[{me:ne()}],mt:[{mt:ne()}],mr:[{mr:ne()}],mb:[{mb:ne()}],ml:[{ml:ne()}],"space-x":[{"space-x":q()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":q()}],"space-y-reverse":["space-y-reverse"],size:[{size:oe()}],w:[{w:[u,"screen",...oe()]}],"min-w":[{"min-w":[u,"screen","none",...oe()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[A]},...oe()]}],h:[{h:["screen","lh",...oe()]}],"min-h":[{"min-h":["screen","lh","none",...oe()]}],"max-h":[{"max-h":["screen","lh",...oe()]}],"font-size":[{text:["base",n,Lp,Zu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,un,U0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",O0,An]}],"font-family":[{font:[vD,An,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,un,An]}],"line-clamp":[{"line-clamp":[jr,"none",un,U0]}],leading:[{leading:[c,...q()]}],"list-image":[{"list-image":["none",un,An]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",un,An]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:se()}],"text-color":[{text:se()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[jr,"from-font","auto",un,Zu]}],"text-decoration-color":[{decoration:se()}],"underline-offset":[{"underline-offset":[jr,"auto",un,An]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",un,An]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",un,An]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:xe()}],"bg-repeat":[{bg:Me()}],"bg-size":[{bg:me()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ZA,un,An],radial:["",un,An],conic:[ZA,un,An]},jD,xD]}],"bg-color":[{bg:se()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:se()}],"gradient-via":[{via:se()}],"gradient-to":[{to:se()}],rounded:[{rounded:ge()}],"rounded-s":[{"rounded-s":ge()}],"rounded-e":[{"rounded-e":ge()}],"rounded-t":[{"rounded-t":ge()}],"rounded-r":[{"rounded-r":ge()}],"rounded-b":[{"rounded-b":ge()}],"rounded-l":[{"rounded-l":ge()}],"rounded-ss":[{"rounded-ss":ge()}],"rounded-se":[{"rounded-se":ge()}],"rounded-ee":[{"rounded-ee":ge()}],"rounded-es":[{"rounded-es":ge()}],"rounded-tl":[{"rounded-tl":ge()}],"rounded-tr":[{"rounded-tr":ge()}],"rounded-br":[{"rounded-br":ge()}],"rounded-bl":[{"rounded-bl":ge()}],"border-w":[{border:we()}],"border-w-x":[{"border-x":we()}],"border-w-y":[{"border-y":we()}],"border-w-s":[{"border-s":we()}],"border-w-e":[{"border-e":we()}],"border-w-t":[{"border-t":we()}],"border-w-r":[{"border-r":we()}],"border-w-b":[{"border-b":we()}],"border-w-l":[{"border-l":we()}],"divide-x":[{"divide-x":we()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":we()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pe(),"hidden","none"]}],"divide-style":[{divide:[...pe(),"hidden","none"]}],"border-color":[{border:se()}],"border-color-x":[{"border-x":se()}],"border-color-y":[{"border-y":se()}],"border-color-s":[{"border-s":se()}],"border-color-e":[{"border-e":se()}],"border-color-t":[{"border-t":se()}],"border-color-r":[{"border-r":se()}],"border-color-b":[{"border-b":se()}],"border-color-l":[{"border-l":se()}],"divide-color":[{divide:se()}],"outline-style":[{outline:[...pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[jr,un,An]}],"outline-w":[{outline:["",jr,Lp,Zu]}],"outline-color":[{outline:se()}],shadow:[{shadow:["","none",o,Lg,Ug]}],"shadow-color":[{shadow:se()}],"inset-shadow":[{"inset-shadow":["none",m,Lg,Ug]}],"inset-shadow-color":[{"inset-shadow":se()}],"ring-w":[{ring:we()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:se()}],"ring-offset-w":[{"ring-offset":[jr,Zu]}],"ring-offset-color":[{"ring-offset":se()}],"inset-ring-w":[{"inset-ring":we()}],"inset-ring-color":[{"inset-ring":se()}],"text-shadow":[{"text-shadow":["none",y,Lg,Ug]}],"text-shadow-color":[{"text-shadow":se()}],opacity:[{opacity:[jr,un,An]}],"mix-blend":[{"mix-blend":[...be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[jr]}],"mask-image-linear-from-pos":[{"mask-linear-from":je()}],"mask-image-linear-to-pos":[{"mask-linear-to":je()}],"mask-image-linear-from-color":[{"mask-linear-from":se()}],"mask-image-linear-to-color":[{"mask-linear-to":se()}],"mask-image-t-from-pos":[{"mask-t-from":je()}],"mask-image-t-to-pos":[{"mask-t-to":je()}],"mask-image-t-from-color":[{"mask-t-from":se()}],"mask-image-t-to-color":[{"mask-t-to":se()}],"mask-image-r-from-pos":[{"mask-r-from":je()}],"mask-image-r-to-pos":[{"mask-r-to":je()}],"mask-image-r-from-color":[{"mask-r-from":se()}],"mask-image-r-to-color":[{"mask-r-to":se()}],"mask-image-b-from-pos":[{"mask-b-from":je()}],"mask-image-b-to-pos":[{"mask-b-to":je()}],"mask-image-b-from-color":[{"mask-b-from":se()}],"mask-image-b-to-color":[{"mask-b-to":se()}],"mask-image-l-from-pos":[{"mask-l-from":je()}],"mask-image-l-to-pos":[{"mask-l-to":je()}],"mask-image-l-from-color":[{"mask-l-from":se()}],"mask-image-l-to-color":[{"mask-l-to":se()}],"mask-image-x-from-pos":[{"mask-x-from":je()}],"mask-image-x-to-pos":[{"mask-x-to":je()}],"mask-image-x-from-color":[{"mask-x-from":se()}],"mask-image-x-to-color":[{"mask-x-to":se()}],"mask-image-y-from-pos":[{"mask-y-from":je()}],"mask-image-y-to-pos":[{"mask-y-to":je()}],"mask-image-y-from-color":[{"mask-y-from":se()}],"mask-image-y-to-color":[{"mask-y-to":se()}],"mask-image-radial":[{"mask-radial":[un,An]}],"mask-image-radial-from-pos":[{"mask-radial-from":je()}],"mask-image-radial-to-pos":[{"mask-radial-to":je()}],"mask-image-radial-from-color":[{"mask-radial-from":se()}],"mask-image-radial-to-color":[{"mask-radial-to":se()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[jr]}],"mask-image-conic-from-pos":[{"mask-conic-from":je()}],"mask-image-conic-to-pos":[{"mask-conic-to":je()}],"mask-image-conic-from-color":[{"mask-conic-from":se()}],"mask-image-conic-to-color":[{"mask-conic-to":se()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:xe()}],"mask-repeat":[{mask:Me()}],"mask-size":[{mask:me()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",un,An]}],filter:[{filter:["","none",un,An]}],blur:[{blur:Ne()}],brightness:[{brightness:[jr,un,An]}],contrast:[{contrast:[jr,un,An]}],"drop-shadow":[{"drop-shadow":["","none",p,Lg,Ug]}],"drop-shadow-color":[{"drop-shadow":se()}],grayscale:[{grayscale:["",jr,un,An]}],"hue-rotate":[{"hue-rotate":[jr,un,An]}],invert:[{invert:["",jr,un,An]}],saturate:[{saturate:[jr,un,An]}],sepia:[{sepia:["",jr,un,An]}],"backdrop-filter":[{"backdrop-filter":["","none",un,An]}],"backdrop-blur":[{"backdrop-blur":Ne()}],"backdrop-brightness":[{"backdrop-brightness":[jr,un,An]}],"backdrop-contrast":[{"backdrop-contrast":[jr,un,An]}],"backdrop-grayscale":[{"backdrop-grayscale":["",jr,un,An]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[jr,un,An]}],"backdrop-invert":[{"backdrop-invert":["",jr,un,An]}],"backdrop-opacity":[{"backdrop-opacity":[jr,un,An]}],"backdrop-saturate":[{"backdrop-saturate":[jr,un,An]}],"backdrop-sepia":[{"backdrop-sepia":["",jr,un,An]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":q()}],"border-spacing-x":[{"border-spacing-x":q()}],"border-spacing-y":[{"border-spacing-y":q()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",un,An]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[jr,"initial",un,An]}],ease:[{ease:["linear","initial",B,un,An]}],delay:[{delay:[jr,un,An]}],animate:[{animate:["none",L,un,An]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,un,An]}],"perspective-origin":[{"perspective-origin":z()}],rotate:[{rotate:Je()}],"rotate-x":[{"rotate-x":Je()}],"rotate-y":[{"rotate-y":Je()}],"rotate-z":[{"rotate-z":Je()}],scale:[{scale:Qe()}],"scale-x":[{"scale-x":Qe()}],"scale-y":[{"scale-y":Qe()}],"scale-z":[{"scale-z":Qe()}],"scale-3d":["scale-3d"],skew:[{skew:pt()}],"skew-x":[{"skew-x":pt()}],"skew-y":[{"skew-y":pt()}],transform:[{transform:[un,An,"","none","gpu","cpu"]}],"transform-origin":[{origin:z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Te()}],"translate-x":[{"translate-x":Te()}],"translate-y":[{"translate-y":Te()}],"translate-z":[{"translate-z":Te()}],"translate-none":["translate-none"],accent:[{accent:se()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:se()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",un,An]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",un,An]}],fill:[{fill:["none",...se()]}],"stroke-w":[{stroke:[jr,Lp,Zu,U0]}],stroke:[{stroke:["none",...se()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},BD=iD(ND);function Vs(...t){return BD(JC(t))}const CD=UU,b5=S.forwardRef(({className:t,...s},n)=>e.jsx(VC,{ref:n,className:Vs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));b5.displayName=VC.displayName;const ED=ox("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),j5=S.forwardRef(({className:t,variant:s,...n},r)=>e.jsx($C,{ref:r,className:Vs(ED({variant:s}),t),...n}));j5.displayName=$C.displayName;const TD=S.forwardRef(({className:t,...s},n)=>e.jsx(WC,{ref:n,className:Vs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));TD.displayName=WC.displayName;const w5=S.forwardRef(({className:t,...s},n)=>e.jsx(YC,{ref:n,className:Vs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(cx,{className:"h-4 w-4"})}));w5.displayName=YC.displayName;const S5=S.forwardRef(({className:t,...s},n)=>e.jsx(GC,{ref:n,className:Vs("text-sm font-semibold",t),...s}));S5.displayName=GC.displayName;const N5=S.forwardRef(({className:t,...s},n)=>e.jsx(qC,{ref:n,className:Vs("text-sm opacity-90",t),...s}));N5.displayName=qC.displayName;function FD(){const{toasts:t}=ma();return e.jsxs(CD,{children:[t.map(function({id:s,title:n,description:r,action:i,...c}){return e.jsxs(j5,{...c,children:[e.jsxs("div",{className:"grid gap-1",children:[n&&e.jsx(S5,{children:n}),r&&e.jsx(N5,{children:r})]}),i,e.jsx(w5,{})]},s)}),e.jsx(b5,{})]})}function rf(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}function L0(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}function ID(t){const s=RD(t),n=S.forwardRef((r,i)=>{const{children:c,...A}=r,u=S.Children.toArray(c),d=u.find(UD);if(d){const h=d.props.children,o=u.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return e.jsx(s,{...A,ref:i,children:S.isValidElement(h)?S.cloneElement(h,void 0,o):null})}return e.jsx(s,{...A,ref:i,children:c})});return n.displayName=`${t}.Slot`,n}function RD(t){const s=S.forwardRef((n,r)=>{const{children:i,...c}=n;if(S.isValidElement(i)){const A=DD(i),u=LD(c,i.props);return i.type!==S.Fragment&&(u.ref=r?Bh(r,A):A),S.cloneElement(i,u)}return S.Children.count(i)>1?S.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var OD=Symbol("radix.slottable");function UD(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===OD}function LD(t,s){const n={...s};for(const r in s){const i=t[r],c=s[r];/^on[A-Z]/.test(r)?i&&c?n[r]=(...u)=>{const d=c(...u);return i(...u),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...c}:r==="className"&&(n[r]=[i,c].filter(Boolean).join(" "))}return{...t,...n}}function DD(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var QD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],mr=QD.reduce((t,s)=>{const n=ID(`Primitive.${s}`),r=S.forwardRef((i,c)=>{const{asChild:A,...u}=i,d=A?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...u,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function _D(t,s){t&&Nh.flushSync(()=>t.dispatchEvent(s))}var MD="DismissableLayer",lb="dismissableLayer.update",PD="dismissableLayer.pointerDownOutside",kD="dismissableLayer.focusOutside",S2,B5=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dx=S.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:c,onInteractOutside:A,onDismiss:u,...d}=t,h=S.useContext(B5),[o,m]=S.useState(null),y=o?.ownerDocument??globalThis?.document,[,p]=S.useState({}),j=Mr(s,$=>m($)),b=Array.from(h.layers),[w]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),B=b.indexOf(w),L=o?b.indexOf(o):-1,Q=h.layersWithOutsidePointerEventsDisabled.size>0,k=L>=B,z=zD($=>{const q=$.target,X=[...h.branches].some(fe=>fe.contains(q));!k||X||(i?.($),A?.($),$.defaultPrevented||u?.())},y),J=VD($=>{const q=$.target;[...h.branches].some(fe=>fe.contains(q))||(c?.($),A?.($),$.defaultPrevented||u?.())},y);return NC($=>{L===h.layers.size-1&&(r?.($),!$.defaultPrevented&&u&&($.preventDefault(),u()))},y),S.useEffect(()=>{if(o)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(S2=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(o)),h.layers.add(o),N2(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=S2)}},[o,y,n,h]),S.useEffect(()=>()=>{o&&(h.layers.delete(o),h.layersWithOutsidePointerEventsDisabled.delete(o),N2())},[o,h]),S.useEffect(()=>{const $=()=>p({});return document.addEventListener(lb,$),()=>document.removeEventListener(lb,$)},[]),e.jsx(mr.div,{...d,ref:j,style:{pointerEvents:Q?k?"auto":"none":void 0,...t.style},onFocusCapture:L0(t.onFocusCapture,J.onFocusCapture),onBlurCapture:L0(t.onBlurCapture,J.onBlurCapture),onPointerDownCapture:L0(t.onPointerDownCapture,z.onPointerDownCapture)})});dx.displayName=MD;var HD="DismissableLayerBranch",KD=S.forwardRef((t,s)=>{const n=S.useContext(B5),r=S.useRef(null),i=Mr(s,r);return S.useEffect(()=>{const c=r.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),e.jsx(mr.div,{...t,ref:i})});KD.displayName=HD;function zD(t,s=globalThis?.document){const n=qo(t),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const c=u=>{if(u.target&&!r.current){let d=function(){C5(PD,n,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(s.removeEventListener("click",i.current),i.current=d,s.addEventListener("click",i.current,{once:!0})):d()}else s.removeEventListener("click",i.current);r.current=!1},A=window.setTimeout(()=>{s.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(A),s.removeEventListener("pointerdown",c),s.removeEventListener("click",i.current)}},[s,n]),{onPointerDownCapture:()=>r.current=!0}}function VD(t,s=globalThis?.document){const n=qo(t),r=S.useRef(!1);return S.useEffect(()=>{const i=c=>{c.target&&!r.current&&C5(kD,n,{originalEvent:c},{discrete:!1})};return s.addEventListener("focusin",i),()=>s.removeEventListener("focusin",i)},[s,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function N2(){const t=new CustomEvent(lb);document.dispatchEvent(t)}function C5(t,s,n,{discrete:r}){const i=n.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&i.addEventListener(t,s,{once:!0}),r?_D(i,c):i.dispatchEvent(c)}var $D=mA[" useId ".trim().toString()]||(()=>{}),GD=0;function du(t){const[s,n]=S.useState($D());return ti(()=>{n(r=>r??String(GD++))},[t]),s?`radix-${s}`:""}const qD=["top","right","bottom","left"],hu=Math.min,ql=Math.max,_y=Math.round,Dg=Math.floor,Rd=t=>({x:t,y:t}),WD={left:"right",right:"left",bottom:"top",top:"bottom"},YD={start:"end",end:"start"};function cb(t,s,n){return ql(t,hu(s,n))}function AA(t,s){return typeof t=="function"?t(s):t}function uA(t){return t.split("-")[0]}function Qf(t){return t.split("-")[1]}function b1(t){return t==="x"?"y":"x"}function j1(t){return t==="y"?"height":"width"}const XD=new Set(["top","bottom"]);function Fd(t){return XD.has(uA(t))?"y":"x"}function w1(t){return b1(Fd(t))}function JD(t,s,n){n===void 0&&(n=!1);const r=Qf(t),i=w1(t),c=j1(i);let A=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return s.reference[c]>s.floating[c]&&(A=My(A)),[A,My(A)]}function ZD(t){const s=My(t);return[db(t),s,db(s)]}function db(t){return t.replace(/start|end/g,s=>YD[s])}const B2=["left","right"],C2=["right","left"],eQ=["top","bottom"],tQ=["bottom","top"];function sQ(t,s,n){switch(t){case"top":case"bottom":return n?s?C2:B2:s?B2:C2;case"left":case"right":return s?eQ:tQ;default:return[]}}function nQ(t,s,n,r){const i=Qf(t);let c=sQ(uA(t),n==="start",r);return i&&(c=c.map(A=>A+"-"+i),s&&(c=c.concat(c.map(db)))),c}function My(t){return t.replace(/left|right|bottom|top/g,s=>WD[s])}function rQ(t){return{top:0,right:0,bottom:0,left:0,...t}}function E5(t){return typeof t!="number"?rQ(t):{top:t,right:t,bottom:t,left:t}}function Py(t){const{x:s,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:s,right:s+r,bottom:n+i,x:s,y:n}}function E2(t,s,n){let{reference:r,floating:i}=t;const c=Fd(s),A=w1(s),u=j1(A),d=uA(s),h=c==="y",o=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,y=r[u]/2-i[u]/2;let p;switch(d){case"top":p={x:o,y:r.y-i.height};break;case"bottom":p={x:o,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:m};break;case"left":p={x:r.x-i.width,y:m};break;default:p={x:r.x,y:r.y}}switch(Qf(s)){case"start":p[A]-=y*(n&&h?-1:1);break;case"end":p[A]+=y*(n&&h?-1:1);break}return p}const aQ=async(t,s,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:c=[],platform:A}=n,u=c.filter(Boolean),d=await(A.isRTL==null?void 0:A.isRTL(s));let h=await A.getElementRects({reference:t,floating:s,strategy:i}),{x:o,y:m}=E2(h,r,d),y=r,p={},j=0;for(let b=0;b<u.length;b++){const{name:w,fn:B}=u[b],{x:L,y:Q,data:k,reset:z}=await B({x:o,y:m,initialPlacement:r,placement:y,strategy:i,middlewareData:p,rects:h,platform:A,elements:{reference:t,floating:s}});o=L??o,m=Q??m,p={...p,[w]:{...p[w],...k}},z&&j<=50&&(j++,typeof z=="object"&&(z.placement&&(y=z.placement),z.rects&&(h=z.rects===!0?await A.getElementRects({reference:t,floating:s,strategy:i}):z.rects),{x:o,y:m}=E2(h,y,d)),b=-1)}return{x:o,y:m,placement:y,strategy:i,middlewareData:p}};async function cm(t,s){var n;s===void 0&&(s={});const{x:r,y:i,platform:c,rects:A,elements:u,strategy:d}=t,{boundary:h="clippingAncestors",rootBoundary:o="viewport",elementContext:m="floating",altBoundary:y=!1,padding:p=0}=AA(s,t),j=E5(p),w=u[y?m==="floating"?"reference":"floating":m],B=Py(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(w)))==null||n?w:w.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(u.floating)),boundary:h,rootBoundary:o,strategy:d})),L=m==="floating"?{x:r,y:i,width:A.floating.width,height:A.floating.height}:A.reference,Q=await(c.getOffsetParent==null?void 0:c.getOffsetParent(u.floating)),k=await(c.isElement==null?void 0:c.isElement(Q))?await(c.getScale==null?void 0:c.getScale(Q))||{x:1,y:1}:{x:1,y:1},z=Py(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:L,offsetParent:Q,strategy:d}):L);return{top:(B.top-z.top+j.top)/k.y,bottom:(z.bottom-B.bottom+j.bottom)/k.y,left:(B.left-z.left+j.left)/k.x,right:(z.right-B.right+j.right)/k.x}}const iQ=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:r,placement:i,rects:c,platform:A,elements:u,middlewareData:d}=s,{element:h,padding:o=0}=AA(t,s)||{};if(h==null)return{};const m=E5(o),y={x:n,y:r},p=w1(i),j=j1(p),b=await A.getDimensions(h),w=p==="y",B=w?"top":"left",L=w?"bottom":"right",Q=w?"clientHeight":"clientWidth",k=c.reference[j]+c.reference[p]-y[p]-c.floating[j],z=y[p]-c.reference[p],J=await(A.getOffsetParent==null?void 0:A.getOffsetParent(h));let $=J?J[Q]:0;(!$||!await(A.isElement==null?void 0:A.isElement(J)))&&($=u.floating[Q]||c.floating[j]);const q=k/2-z/2,X=$/2-b[j]/2-1,fe=hu(m[B],X),ee=hu(m[L],X),le=fe,ue=$-b[j]-ee,te=$/2-b[j]/2+q,re=cb(le,te,ue),ne=!d.arrow&&Qf(i)!=null&&te!==re&&c.reference[j]/2-(te<le?fe:ee)-b[j]/2<0,oe=ne?te<le?te-le:te-ue:0;return{[p]:y[p]+oe,data:{[p]:re,centerOffset:te-re-oe,...ne&&{alignmentOffset:oe}},reset:ne}}}),oQ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,r;const{placement:i,middlewareData:c,rects:A,initialPlacement:u,platform:d,elements:h}=s,{mainAxis:o=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:b=!0,...w}=AA(t,s);if((n=c.arrow)!=null&&n.alignmentOffset)return{};const B=uA(i),L=Fd(u),Q=uA(u)===u,k=await(d.isRTL==null?void 0:d.isRTL(h.floating)),z=y||(Q||!b?[My(u)]:ZD(u)),J=j!=="none";!y&&J&&z.push(...nQ(u,b,j,k));const $=[u,...z],q=await cm(s,w),X=[];let fe=((r=c.flip)==null?void 0:r.overflows)||[];if(o&&X.push(q[B]),m){const te=JD(i,A,k);X.push(q[te[0]],q[te[1]])}if(fe=[...fe,{placement:i,overflows:X}],!X.every(te=>te<=0)){var ee,le;const te=(((ee=c.flip)==null?void 0:ee.index)||0)+1,re=$[te];if(re&&(!(m==="alignment"?L!==Fd(re):!1)||fe.every(se=>Fd(se.placement)===L?se.overflows[0]>0:!0)))return{data:{index:te,overflows:fe},reset:{placement:re}};let ne=(le=fe.filter(oe=>oe.overflows[0]<=0).sort((oe,se)=>oe.overflows[1]-se.overflows[1])[0])==null?void 0:le.placement;if(!ne)switch(p){case"bestFit":{var ue;const oe=(ue=fe.filter(se=>{if(J){const xe=Fd(se.placement);return xe===L||xe==="y"}return!0}).map(se=>[se.placement,se.overflows.filter(xe=>xe>0).reduce((xe,Me)=>xe+Me,0)]).sort((se,xe)=>se[1]-xe[1])[0])==null?void 0:ue[0];oe&&(ne=oe);break}case"initialPlacement":ne=u;break}if(i!==ne)return{reset:{placement:ne}}}return{}}}};function T2(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function F2(t){return qD.some(s=>t[s]>=0)}const lQ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n}=s,{strategy:r="referenceHidden",...i}=AA(t,s);switch(r){case"referenceHidden":{const c=await cm(s,{...i,elementContext:"reference"}),A=T2(c,n.reference);return{data:{referenceHiddenOffsets:A,referenceHidden:F2(A)}}}case"escaped":{const c=await cm(s,{...i,altBoundary:!0}),A=T2(c,n.floating);return{data:{escapedOffsets:A,escaped:F2(A)}}}default:return{}}}}},T5=new Set(["left","top"]);async function cQ(t,s){const{placement:n,platform:r,elements:i}=t,c=await(r.isRTL==null?void 0:r.isRTL(i.floating)),A=uA(n),u=Qf(n),d=Fd(n)==="y",h=T5.has(A)?-1:1,o=c&&d?-1:1,m=AA(s,t);let{mainAxis:y,crossAxis:p,alignmentAxis:j}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return u&&typeof j=="number"&&(p=u==="end"?j*-1:j),d?{x:p*o,y:y*h}:{x:y*h,y:p*o}}const dQ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,r;const{x:i,y:c,placement:A,middlewareData:u}=s,d=await cQ(s,t);return A===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:c+d.y,data:{...d,placement:A}}}}},AQ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:r,placement:i}=s,{mainAxis:c=!0,crossAxis:A=!1,limiter:u={fn:w=>{let{x:B,y:L}=w;return{x:B,y:L}}},...d}=AA(t,s),h={x:n,y:r},o=await cm(s,d),m=Fd(uA(i)),y=b1(m);let p=h[y],j=h[m];if(c){const w=y==="y"?"top":"left",B=y==="y"?"bottom":"right",L=p+o[w],Q=p-o[B];p=cb(L,p,Q)}if(A){const w=m==="y"?"top":"left",B=m==="y"?"bottom":"right",L=j+o[w],Q=j-o[B];j=cb(L,j,Q)}const b=u.fn({...s,[y]:p,[m]:j});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[y]:c,[m]:A}}}}}},uQ=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:r,placement:i,rects:c,middlewareData:A}=s,{offset:u=0,mainAxis:d=!0,crossAxis:h=!0}=AA(t,s),o={x:n,y:r},m=Fd(i),y=b1(m);let p=o[y],j=o[m];const b=AA(u,s),w=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(d){const Q=y==="y"?"height":"width",k=c.reference[y]-c.floating[Q]+w.mainAxis,z=c.reference[y]+c.reference[Q]-w.mainAxis;p<k?p=k:p>z&&(p=z)}if(h){var B,L;const Q=y==="y"?"width":"height",k=T5.has(uA(i)),z=c.reference[m]-c.floating[Q]+(k&&((B=A.offset)==null?void 0:B[m])||0)+(k?0:w.crossAxis),J=c.reference[m]+c.reference[Q]+(k?0:((L=A.offset)==null?void 0:L[m])||0)-(k?w.crossAxis:0);j<z?j=z:j>J&&(j=J)}return{[y]:p,[m]:j}}}},hQ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,r;const{placement:i,rects:c,platform:A,elements:u}=s,{apply:d=()=>{},...h}=AA(t,s),o=await cm(s,h),m=uA(i),y=Qf(i),p=Fd(i)==="y",{width:j,height:b}=c.floating;let w,B;m==="top"||m==="bottom"?(w=m,B=y===(await(A.isRTL==null?void 0:A.isRTL(u.floating))?"start":"end")?"left":"right"):(B=m,w=y==="end"?"top":"bottom");const L=b-o.top-o.bottom,Q=j-o.left-o.right,k=hu(b-o[w],L),z=hu(j-o[B],Q),J=!s.middlewareData.shift;let $=k,q=z;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&(q=Q),(r=s.middlewareData.shift)!=null&&r.enabled.y&&($=L),J&&!y){const fe=ql(o.left,0),ee=ql(o.right,0),le=ql(o.top,0),ue=ql(o.bottom,0);p?q=j-2*(fe!==0||ee!==0?fe+ee:ql(o.left,o.right)):$=b-2*(le!==0||ue!==0?le+ue:ql(o.top,o.bottom))}await d({...s,availableWidth:q,availableHeight:$});const X=await A.getDimensions(u.floating);return j!==X.width||b!==X.height?{reset:{rects:!0}}:{}}}};function Ax(){return typeof window<"u"}function _f(t){return F5(t)?(t.nodeName||"").toLowerCase():"#document"}function Jl(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function Md(t){var s;return(s=(F5(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function F5(t){return Ax()?t instanceof Node||t instanceof Jl(t).Node:!1}function Xc(t){return Ax()?t instanceof Element||t instanceof Jl(t).Element:!1}function Ld(t){return Ax()?t instanceof HTMLElement||t instanceof Jl(t).HTMLElement:!1}function I2(t){return!Ax()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Jl(t).ShadowRoot}const fQ=new Set(["inline","contents"]);function bm(t){const{overflow:s,overflowX:n,overflowY:r,display:i}=Jc(t);return/auto|scroll|overlay|hidden|clip/.test(s+r+n)&&!fQ.has(i)}const pQ=new Set(["table","td","th"]);function mQ(t){return pQ.has(_f(t))}const gQ=[":popover-open",":modal"];function ux(t){return gQ.some(s=>{try{return t.matches(s)}catch{return!1}})}const yQ=["transform","translate","scale","rotate","perspective"],xQ=["transform","translate","scale","rotate","perspective","filter"],vQ=["paint","layout","strict","content"];function S1(t){const s=N1(),n=Xc(t)?Jc(t):t;return yQ.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||xQ.some(r=>(n.willChange||"").includes(r))||vQ.some(r=>(n.contain||"").includes(r))}function bQ(t){let s=fu(t);for(;Ld(s)&&!Tf(s);){if(S1(s))return s;if(ux(s))return null;s=fu(s)}return null}function N1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const jQ=new Set(["html","body","#document"]);function Tf(t){return jQ.has(_f(t))}function Jc(t){return Jl(t).getComputedStyle(t)}function hx(t){return Xc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function fu(t){if(_f(t)==="html")return t;const s=t.assignedSlot||t.parentNode||I2(t)&&t.host||Md(t);return I2(s)?s.host:s}function I5(t){const s=fu(t);return Tf(s)?t.ownerDocument?t.ownerDocument.body:t.body:Ld(s)&&bm(s)?s:I5(s)}function dm(t,s,n){var r;s===void 0&&(s=[]),n===void 0&&(n=!0);const i=I5(t),c=i===((r=t.ownerDocument)==null?void 0:r.body),A=Jl(i);if(c){const u=Ab(A);return s.concat(A,A.visualViewport||[],bm(i)?i:[],u&&n?dm(u):[])}return s.concat(i,dm(i,[],n))}function Ab(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function R5(t){const s=Jc(t);let n=parseFloat(s.width)||0,r=parseFloat(s.height)||0;const i=Ld(t),c=i?t.offsetWidth:n,A=i?t.offsetHeight:r,u=_y(n)!==c||_y(r)!==A;return u&&(n=c,r=A),{width:n,height:r,$:u}}function B1(t){return Xc(t)?t:t.contextElement}function wf(t){const s=B1(t);if(!Ld(s))return Rd(1);const n=s.getBoundingClientRect(),{width:r,height:i,$:c}=R5(s);let A=(c?_y(n.width):n.width)/r,u=(c?_y(n.height):n.height)/i;return(!A||!Number.isFinite(A))&&(A=1),(!u||!Number.isFinite(u))&&(u=1),{x:A,y:u}}const wQ=Rd(0);function O5(t){const s=Jl(t);return!N1()||!s.visualViewport?wQ:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function SQ(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==Jl(t)?!1:s}function yh(t,s,n,r){s===void 0&&(s=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),c=B1(t);let A=Rd(1);s&&(r?Xc(r)&&(A=wf(r)):A=wf(t));const u=SQ(c,n,r)?O5(c):Rd(0);let d=(i.left+u.x)/A.x,h=(i.top+u.y)/A.y,o=i.width/A.x,m=i.height/A.y;if(c){const y=Jl(c),p=r&&Xc(r)?Jl(r):r;let j=y,b=Ab(j);for(;b&&r&&p!==j;){const w=wf(b),B=b.getBoundingClientRect(),L=Jc(b),Q=B.left+(b.clientLeft+parseFloat(L.paddingLeft))*w.x,k=B.top+(b.clientTop+parseFloat(L.paddingTop))*w.y;d*=w.x,h*=w.y,o*=w.x,m*=w.y,d+=Q,h+=k,j=Jl(b),b=Ab(j)}}return Py({width:o,height:m,x:d,y:h})}function fx(t,s){const n=hx(t).scrollLeft;return s?s.left+n:yh(Md(t)).left+n}function U5(t,s){const n=t.getBoundingClientRect(),r=n.left+s.scrollLeft-fx(t,n),i=n.top+s.scrollTop;return{x:r,y:i}}function NQ(t){let{elements:s,rect:n,offsetParent:r,strategy:i}=t;const c=i==="fixed",A=Md(r),u=s?ux(s.floating):!1;if(r===A||u&&c)return n;let d={scrollLeft:0,scrollTop:0},h=Rd(1);const o=Rd(0),m=Ld(r);if((m||!m&&!c)&&((_f(r)!=="body"||bm(A))&&(d=hx(r)),Ld(r))){const p=yh(r);h=wf(r),o.x=p.x+r.clientLeft,o.y=p.y+r.clientTop}const y=A&&!m&&!c?U5(A,d):Rd(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+o.x+y.x,y:n.y*h.y-d.scrollTop*h.y+o.y+y.y}}function BQ(t){return Array.from(t.getClientRects())}function CQ(t){const s=Md(t),n=hx(t),r=t.ownerDocument.body,i=ql(s.scrollWidth,s.clientWidth,r.scrollWidth,r.clientWidth),c=ql(s.scrollHeight,s.clientHeight,r.scrollHeight,r.clientHeight);let A=-n.scrollLeft+fx(t);const u=-n.scrollTop;return Jc(r).direction==="rtl"&&(A+=ql(s.clientWidth,r.clientWidth)-i),{width:i,height:c,x:A,y:u}}const R2=25;function EQ(t,s){const n=Jl(t),r=Md(t),i=n.visualViewport;let c=r.clientWidth,A=r.clientHeight,u=0,d=0;if(i){c=i.width,A=i.height;const o=N1();(!o||o&&s==="fixed")&&(u=i.offsetLeft,d=i.offsetTop)}const h=fx(r);if(h<=0){const o=r.ownerDocument,m=o.body,y=getComputedStyle(m),p=o.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,j=Math.abs(r.clientWidth-m.clientWidth-p);j<=R2&&(c-=j)}else h<=R2&&(c+=h);return{width:c,height:A,x:u,y:d}}const TQ=new Set(["absolute","fixed"]);function FQ(t,s){const n=yh(t,!0,s==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,c=Ld(t)?wf(t):Rd(1),A=t.clientWidth*c.x,u=t.clientHeight*c.y,d=i*c.x,h=r*c.y;return{width:A,height:u,x:d,y:h}}function O2(t,s,n){let r;if(s==="viewport")r=EQ(t,n);else if(s==="document")r=CQ(Md(t));else if(Xc(s))r=FQ(s,n);else{const i=O5(t);r={x:s.x-i.x,y:s.y-i.y,width:s.width,height:s.height}}return Py(r)}function L5(t,s){const n=fu(t);return n===s||!Xc(n)||Tf(n)?!1:Jc(n).position==="fixed"||L5(n,s)}function IQ(t,s){const n=s.get(t);if(n)return n;let r=dm(t,[],!1).filter(u=>Xc(u)&&_f(u)!=="body"),i=null;const c=Jc(t).position==="fixed";let A=c?fu(t):t;for(;Xc(A)&&!Tf(A);){const u=Jc(A),d=S1(A);!d&&u.position==="fixed"&&(i=null),(c?!d&&!i:!d&&u.position==="static"&&!!i&&TQ.has(i.position)||bm(A)&&!d&&L5(t,A))?r=r.filter(o=>o!==A):i=u,A=fu(A)}return s.set(t,r),r}function RQ(t){let{element:s,boundary:n,rootBoundary:r,strategy:i}=t;const A=[...n==="clippingAncestors"?ux(s)?[]:IQ(s,this._c):[].concat(n),r],u=A[0],d=A.reduce((h,o)=>{const m=O2(s,o,i);return h.top=ql(m.top,h.top),h.right=hu(m.right,h.right),h.bottom=hu(m.bottom,h.bottom),h.left=ql(m.left,h.left),h},O2(s,u,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function OQ(t){const{width:s,height:n}=R5(t);return{width:s,height:n}}function UQ(t,s,n){const r=Ld(s),i=Md(s),c=n==="fixed",A=yh(t,!0,c,s);let u={scrollLeft:0,scrollTop:0};const d=Rd(0);function h(){d.x=fx(i)}if(r||!r&&!c)if((_f(s)!=="body"||bm(i))&&(u=hx(s)),r){const p=yh(s,!0,c,s);d.x=p.x+s.clientLeft,d.y=p.y+s.clientTop}else i&&h();c&&!r&&i&&h();const o=i&&!r&&!c?U5(i,u):Rd(0),m=A.left+u.scrollLeft-d.x-o.x,y=A.top+u.scrollTop-d.y-o.y;return{x:m,y,width:A.width,height:A.height}}function D0(t){return Jc(t).position==="static"}function U2(t,s){if(!Ld(t)||Jc(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return Md(t)===n&&(n=n.ownerDocument.body),n}function D5(t,s){const n=Jl(t);if(ux(t))return n;if(!Ld(t)){let i=fu(t);for(;i&&!Tf(i);){if(Xc(i)&&!D0(i))return i;i=fu(i)}return n}let r=U2(t,s);for(;r&&mQ(r)&&D0(r);)r=U2(r,s);return r&&Tf(r)&&D0(r)&&!S1(r)?n:r||bQ(t)||n}const LQ=async function(t){const s=this.getOffsetParent||D5,n=this.getDimensions,r=await n(t.floating);return{reference:UQ(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function DQ(t){return Jc(t).direction==="rtl"}const QQ={convertOffsetParentRelativeRectToViewportRelativeRect:NQ,getDocumentElement:Md,getClippingRect:RQ,getOffsetParent:D5,getElementRects:LQ,getClientRects:BQ,getDimensions:OQ,getScale:wf,isElement:Xc,isRTL:DQ};function Q5(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function _Q(t,s){let n=null,r;const i=Md(t);function c(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function A(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),c();const h=t.getBoundingClientRect(),{left:o,top:m,width:y,height:p}=h;if(u||s(),!y||!p)return;const j=Dg(m),b=Dg(i.clientWidth-(o+y)),w=Dg(i.clientHeight-(m+p)),B=Dg(o),Q={rootMargin:-j+"px "+-b+"px "+-w+"px "+-B+"px",threshold:ql(0,hu(1,d))||1};let k=!0;function z(J){const $=J[0].intersectionRatio;if($!==d){if(!k)return A();$?A(!1,$):r=setTimeout(()=>{A(!1,1e-7)},1e3)}$===1&&!Q5(h,t.getBoundingClientRect())&&A(),k=!1}try{n=new IntersectionObserver(z,{...Q,root:i.ownerDocument})}catch{n=new IntersectionObserver(z,Q)}n.observe(t)}return A(!0),c}function MQ(t,s,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:c=!0,elementResize:A=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=B1(t),o=i||c?[...h?dm(h):[],...dm(s)]:[];o.forEach(B=>{i&&B.addEventListener("scroll",n,{passive:!0}),c&&B.addEventListener("resize",n)});const m=h&&u?_Q(h,n):null;let y=-1,p=null;A&&(p=new ResizeObserver(B=>{let[L]=B;L&&L.target===h&&p&&(p.unobserve(s),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var Q;(Q=p)==null||Q.observe(s)})),n()}),h&&!d&&p.observe(h),p.observe(s));let j,b=d?yh(t):null;d&&w();function w(){const B=yh(t);b&&!Q5(b,B)&&n(),b=B,j=requestAnimationFrame(w)}return n(),()=>{var B;o.forEach(L=>{i&&L.removeEventListener("scroll",n),c&&L.removeEventListener("resize",n)}),m?.(),(B=p)==null||B.disconnect(),p=null,d&&cancelAnimationFrame(j)}}const PQ=dQ,kQ=AQ,HQ=oQ,KQ=hQ,zQ=lQ,L2=iQ,VQ=uQ,$Q=(t,s,n)=>{const r=new Map,i={platform:QQ,...n},c={...i.platform,_c:r};return aQ(t,s,{...i,platform:c})};var GQ=typeof document<"u",qQ=function(){},Ay=GQ?S.useLayoutEffect:qQ;function ky(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,r,i;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(r=n;r--!==0;)if(!ky(t[r],s[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(s).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(s,i[r]))return!1;for(r=n;r--!==0;){const c=i[r];if(!(c==="_owner"&&t.$$typeof)&&!ky(t[c],s[c]))return!1}return!0}return t!==t&&s!==s}function _5(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function D2(t,s){const n=_5(t);return Math.round(s*n)/n}function Q0(t){const s=S.useRef(t);return Ay(()=>{s.current=t}),s}function WQ(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:c,floating:A}={},transform:u=!0,whileElementsMounted:d,open:h}=t,[o,m]=S.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[y,p]=S.useState(r);ky(y,r)||p(r);const[j,b]=S.useState(null),[w,B]=S.useState(null),L=S.useCallback(se=>{se!==J.current&&(J.current=se,b(se))},[]),Q=S.useCallback(se=>{se!==$.current&&($.current=se,B(se))},[]),k=c||j,z=A||w,J=S.useRef(null),$=S.useRef(null),q=S.useRef(o),X=d!=null,fe=Q0(d),ee=Q0(i),le=Q0(h),ue=S.useCallback(()=>{if(!J.current||!$.current)return;const se={placement:s,strategy:n,middleware:y};ee.current&&(se.platform=ee.current),$Q(J.current,$.current,se).then(xe=>{const Me={...xe,isPositioned:le.current!==!1};te.current&&!ky(q.current,Me)&&(q.current=Me,Nh.flushSync(()=>{m(Me)}))})},[y,s,n,ee,le]);Ay(()=>{h===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,m(se=>({...se,isPositioned:!1})))},[h]);const te=S.useRef(!1);Ay(()=>(te.current=!0,()=>{te.current=!1}),[]),Ay(()=>{if(k&&(J.current=k),z&&($.current=z),k&&z){if(fe.current)return fe.current(k,z,ue);ue()}},[k,z,ue,fe,X]);const re=S.useMemo(()=>({reference:J,floating:$,setReference:L,setFloating:Q}),[L,Q]),ne=S.useMemo(()=>({reference:k,floating:z}),[k,z]),oe=S.useMemo(()=>{const se={position:n,left:0,top:0};if(!ne.floating)return se;const xe=D2(ne.floating,o.x),Me=D2(ne.floating,o.y);return u?{...se,transform:"translate("+xe+"px, "+Me+"px)",..._5(ne.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:xe,top:Me}},[n,u,ne.floating,o.x,o.y]);return S.useMemo(()=>({...o,update:ue,refs:re,elements:ne,floatingStyles:oe}),[o,ue,re,ne,oe])}const YQ=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&s(r)?r.current!=null?L2({element:r.current,padding:i}).fn(n):{}:r?L2({element:r,padding:i}).fn(n):{}}}},XQ=(t,s)=>({...PQ(t),options:[t,s]}),JQ=(t,s)=>({...kQ(t),options:[t,s]}),ZQ=(t,s)=>({...VQ(t),options:[t,s]}),e6=(t,s)=>({...HQ(t),options:[t,s]}),t6=(t,s)=>({...KQ(t),options:[t,s]}),s6=(t,s)=>({...zQ(t),options:[t,s]}),n6=(t,s)=>({...YQ(t),options:[t,s]});var r6="Arrow",M5=S.forwardRef((t,s)=>{const{children:n,width:r=10,height:i=5,...c}=t;return e.jsx(mr.svg,{...c,ref:s,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});M5.displayName=r6;var a6=M5;function C1(t){const[s,n]=S.useState(void 0);return ti(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const c=i[0];let A,u;if("borderBoxSize"in c){const d=c.borderBoxSize,h=Array.isArray(d)?d[0]:d;A=h.inlineSize,u=h.blockSize}else A=t.offsetWidth,u=t.offsetHeight;n({width:A,height:u})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),s}var E1="Popper",[P5,px]=Cc(E1),[i6,k5]=P5(E1),H5=t=>{const{__scopePopper:s,children:n}=t,[r,i]=S.useState(null);return e.jsx(i6,{scope:s,anchor:r,onAnchorChange:i,children:n})};H5.displayName=E1;var K5="PopperAnchor",z5=S.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:r,...i}=t,c=k5(K5,n),A=S.useRef(null),u=Mr(s,A),d=S.useRef(null);return S.useEffect(()=>{const h=d.current;d.current=r?.current||A.current,h!==d.current&&c.onAnchorChange(d.current)}),r?null:e.jsx(mr.div,{...i,ref:u})});z5.displayName=K5;var T1="PopperContent",[o6,l6]=P5(T1),V5=S.forwardRef((t,s)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:c="center",alignOffset:A=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:o=0,sticky:m="partial",hideWhenDetached:y=!1,updatePositionStrategy:p="optimized",onPlaced:j,...b}=t,w=k5(T1,n),[B,L]=S.useState(null),Q=Mr(s,je=>L(je)),[k,z]=S.useState(null),J=C1(k),$=J?.width??0,q=J?.height??0,X=r+(c!=="center"?"-"+c:""),fe=typeof o=="number"?o:{top:0,right:0,bottom:0,left:0,...o},ee=Array.isArray(h)?h:[h],le=ee.length>0,ue={padding:fe,boundary:ee.filter(d6),altBoundary:le},{refs:te,floatingStyles:re,placement:ne,isPositioned:oe,middlewareData:se}=WQ({strategy:"fixed",placement:X,whileElementsMounted:(...je)=>MQ(...je,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[XQ({mainAxis:i+q,alignmentAxis:A}),d&&JQ({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?ZQ():void 0,...ue}),d&&e6({...ue}),t6({...ue,apply:({elements:je,rects:Ne,availableWidth:Je,availableHeight:Qe})=>{const{width:pt,height:Te}=Ne.reference,Ce=je.floating.style;Ce.setProperty("--radix-popper-available-width",`${Je}px`),Ce.setProperty("--radix-popper-available-height",`${Qe}px`),Ce.setProperty("--radix-popper-anchor-width",`${pt}px`),Ce.setProperty("--radix-popper-anchor-height",`${Te}px`)}}),k&&n6({element:k,padding:u}),A6({arrowWidth:$,arrowHeight:q}),y&&s6({strategy:"referenceHidden",...ue})]}),[xe,Me]=q5(ne),me=qo(j);ti(()=>{oe&&me?.()},[oe,me]);const Z=se.arrow?.x,ge=se.arrow?.y,we=se.arrow?.centerOffset!==0,[pe,be]=S.useState();return ti(()=>{B&&be(window.getComputedStyle(B).zIndex)},[B]),e.jsx("div",{ref:te.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:oe?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pe,"--radix-popper-transform-origin":[se.transformOrigin?.x,se.transformOrigin?.y].join(" "),...se.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(o6,{scope:n,placedSide:xe,onArrowChange:z,arrowX:Z,arrowY:ge,shouldHideArrow:we,children:e.jsx(mr.div,{"data-side":xe,"data-align":Me,...b,ref:Q,style:{...b.style,animation:oe?void 0:"none"}})})})});V5.displayName=T1;var $5="PopperArrow",c6={top:"bottom",right:"left",bottom:"top",left:"right"},G5=S.forwardRef(function(s,n){const{__scopePopper:r,...i}=s,c=l6($5,r),A=c6[c.placedSide];return e.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[A]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:e.jsx(a6,{...i,ref:n,style:{...i.style,display:"block"}})})});G5.displayName=$5;function d6(t){return t!==null}var A6=t=>({name:"transformOrigin",options:t,fn(s){const{placement:n,rects:r,middlewareData:i}=s,A=i.arrow?.centerOffset!==0,u=A?0:t.arrowWidth,d=A?0:t.arrowHeight,[h,o]=q5(n),m={start:"0%",center:"50%",end:"100%"}[o],y=(i.arrow?.x??0)+u/2,p=(i.arrow?.y??0)+d/2;let j="",b="";return h==="bottom"?(j=A?m:`${y}px`,b=`${-d}px`):h==="top"?(j=A?m:`${y}px`,b=`${r.floating.height+d}px`):h==="right"?(j=`${-d}px`,b=A?m:`${p}px`):h==="left"&&(j=`${r.floating.width+d}px`,b=A?m:`${p}px`),{data:{x:j,y:b}}}});function q5(t){const[s,n="center"]=t.split("-");return[s,n]}var u6=H5,W5=z5,Y5=V5,X5=G5,h6="Portal",mx=S.forwardRef((t,s)=>{const{container:n,...r}=t,[i,c]=S.useState(!1);ti(()=>c(!0),[]);const A=n||i&&globalThis?.document?.body;return A?wC.createPortal(e.jsx(mr.div,{...r,ref:s}),A):null});mx.displayName=h6;function f6(t,s){return S.useReducer((n,r)=>s[n][r]??n,t)}var gA=t=>{const{present:s,children:n}=t,r=p6(s),i=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),c=Mr(r.ref,m6(i));return typeof n=="function"||r.isPresent?S.cloneElement(i,{ref:c}):null};gA.displayName="Presence";function p6(t){const[s,n]=S.useState(),r=S.useRef(null),i=S.useRef(t),c=S.useRef("none"),A=t?"mounted":"unmounted",[u,d]=f6(A,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const h=Qg(r.current);c.current=u==="mounted"?h:"none"},[u]),ti(()=>{const h=r.current,o=i.current;if(o!==t){const y=c.current,p=Qg(h);t?d("MOUNT"):p==="none"||h?.display==="none"?d("UNMOUNT"):d(o&&y!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,d]),ti(()=>{if(s){let h;const o=s.ownerDocument.defaultView??window,m=p=>{const b=Qg(r.current).includes(CSS.escape(p.animationName));if(p.target===s&&b&&(d("ANIMATION_END"),!i.current)){const w=s.style.animationFillMode;s.style.animationFillMode="forwards",h=o.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=w)})}},y=p=>{p.target===s&&(c.current=Qg(r.current))};return s.addEventListener("animationstart",y),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{o.clearTimeout(h),s.removeEventListener("animationstart",y),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:S.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function Qg(t){return t?.animationName||"none"}function m6(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var g6=Symbol("radix.slottable");function y6(t){const s=({children:n})=>e.jsx(e.Fragment,{children:n});return s.displayName=`${t}.Slottable`,s.__radixId=g6,s}var J5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),x6="VisuallyHidden",Z5=S.forwardRef((t,s)=>e.jsx(mr.span,{...t,ref:s,style:{...J5,...t.style}}));Z5.displayName=x6;var v6=Z5,[gx]=Cc("Tooltip",[px]),F1=px(),eE="TooltipProvider",b6=700,Q2="tooltip.open",[j6,tE]=gx(eE),sE=t=>{const{__scopeTooltip:s,delayDuration:n=b6,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:c}=t,A=S.useRef(!0),u=S.useRef(!1),d=S.useRef(0);return S.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),e.jsx(j6,{scope:s,isOpenDelayedRef:A,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(d.current),A.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>A.current=!0,r)},[r]),isPointerInTransitRef:u,onPointerInTransitChange:S.useCallback(h=>{u.current=h},[]),disableHoverableContent:i,children:c})};sE.displayName=eE;var nE="Tooltip",[oW,jm]=gx(nE),ub="TooltipTrigger",w6=S.forwardRef((t,s)=>{const{__scopeTooltip:n,...r}=t,i=jm(ub,n),c=tE(ub,n),A=F1(n),u=S.useRef(null),d=Mr(s,u,i.onTriggerChange),h=S.useRef(!1),o=S.useRef(!1),m=S.useCallback(()=>h.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),e.jsx(W5,{asChild:!0,...A,children:e.jsx(mr.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:d,onPointerMove:rf(t.onPointerMove,y=>{y.pointerType!=="touch"&&!o.current&&!c.isPointerInTransitRef.current&&(i.onTriggerEnter(),o.current=!0)}),onPointerLeave:rf(t.onPointerLeave,()=>{i.onTriggerLeave(),o.current=!1}),onPointerDown:rf(t.onPointerDown,()=>{i.open&&i.onClose(),h.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:rf(t.onFocus,()=>{h.current||i.onOpen()}),onBlur:rf(t.onBlur,i.onClose),onClick:rf(t.onClick,i.onClose)})})});w6.displayName=ub;var I1="TooltipPortal",[S6,N6]=gx(I1,{forceMount:void 0}),rE=t=>{const{__scopeTooltip:s,forceMount:n,children:r,container:i}=t,c=jm(I1,s);return e.jsx(S6,{scope:s,forceMount:n,children:e.jsx(gA,{present:n||c.open,children:e.jsx(mx,{asChild:!0,container:i,children:r})})})};rE.displayName=I1;var Ff="TooltipContent",aE=S.forwardRef((t,s)=>{const n=N6(Ff,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...c}=t,A=jm(Ff,t.__scopeTooltip);return e.jsx(gA,{present:r||A.open,children:A.disableHoverableContent?e.jsx(iE,{side:i,...c,ref:s}):e.jsx(B6,{side:i,...c,ref:s})})}),B6=S.forwardRef((t,s)=>{const n=jm(Ff,t.__scopeTooltip),r=tE(Ff,t.__scopeTooltip),i=S.useRef(null),c=Mr(s,i),[A,u]=S.useState(null),{trigger:d,onClose:h}=n,o=i.current,{onPointerInTransitChange:m}=r,y=S.useCallback(()=>{u(null),m(!1)},[m]),p=S.useCallback((j,b)=>{const w=j.currentTarget,B={x:j.clientX,y:j.clientY},L=I6(B,w.getBoundingClientRect()),Q=R6(B,L),k=O6(b.getBoundingClientRect()),z=L6([...Q,...k]);u(z),m(!0)},[m]);return S.useEffect(()=>()=>y(),[y]),S.useEffect(()=>{if(d&&o){const j=w=>p(w,o),b=w=>p(w,d);return d.addEventListener("pointerleave",j),o.addEventListener("pointerleave",b),()=>{d.removeEventListener("pointerleave",j),o.removeEventListener("pointerleave",b)}}},[d,o,p,y]),S.useEffect(()=>{if(A){const j=b=>{const w=b.target,B={x:b.clientX,y:b.clientY},L=d?.contains(w)||o?.contains(w),Q=!U6(B,A);L?y():Q&&(y(),h())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[d,o,A,h,y]),e.jsx(iE,{...t,ref:c})}),[C6,E6]=gx(nE,{isInside:!1}),T6=y6("TooltipContent"),iE=S.forwardRef((t,s)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:c,onPointerDownOutside:A,...u}=t,d=jm(Ff,n),h=F1(n),{onClose:o}=d;return S.useEffect(()=>(document.addEventListener(Q2,o),()=>document.removeEventListener(Q2,o)),[o]),S.useEffect(()=>{if(d.trigger){const m=y=>{y.target?.contains(d.trigger)&&o()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[d.trigger,o]),e.jsx(dx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:A,onFocusOutside:m=>m.preventDefault(),onDismiss:o,children:e.jsxs(Y5,{"data-state":d.stateAttribute,...h,...u,ref:s,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(T6,{children:r}),e.jsx(C6,{scope:n,isInside:!0,children:e.jsx(v6,{id:d.contentId,role:"tooltip",children:i||r})})]})})});aE.displayName=Ff;var oE="TooltipArrow",F6=S.forwardRef((t,s)=>{const{__scopeTooltip:n,...r}=t,i=F1(n);return E6(oE,n).isInside?null:e.jsx(X5,{...i,...r,ref:s})});F6.displayName=oE;function I6(t,s){const n=Math.abs(s.top-t.y),r=Math.abs(s.bottom-t.y),i=Math.abs(s.right-t.x),c=Math.abs(s.left-t.x);switch(Math.min(n,r,i,c)){case c:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function R6(t,s,n=5){const r=[];switch(s){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function O6(t){const{top:s,right:n,bottom:r,left:i}=t;return[{x:i,y:s},{x:n,y:s},{x:n,y:r},{x:i,y:r}]}function U6(t,s){const{x:n,y:r}=t;let i=!1;for(let c=0,A=s.length-1;c<s.length;A=c++){const u=s[c],d=s[A],h=u.x,o=u.y,m=d.x,y=d.y;o>r!=y>r&&n<(m-h)*(r-o)/(y-o)+h&&(i=!i)}return i}function L6(t){const s=t.slice();return s.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),D6(s)}function D6(t){if(t.length<=1)return t.slice();const s=[];for(let r=0;r<t.length;r++){const i=t[r];for(;s.length>=2;){const c=s[s.length-1],A=s[s.length-2];if((c.x-A.x)*(i.y-A.y)>=(c.y-A.y)*(i.x-A.x))s.pop();else break}s.push(i)}s.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const c=n[n.length-1],A=n[n.length-2];if((c.x-A.x)*(i.y-A.y)>=(c.y-A.y)*(i.x-A.x))n.pop();else break}n.push(i)}return n.pop(),s.length===1&&n.length===1&&s[0].x===n[0].x&&s[0].y===n[0].y?s:s.concat(n)}var Q6=sE,_6=rE,lE=aE;const M6=Q6,P6=S.forwardRef(({className:t,sideOffset:s=4,...n},r)=>e.jsx(_6,{children:e.jsx(lE,{ref:r,sideOffset:s,className:Vs("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n})}));P6.displayName=lE.displayName;const ks=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Vs("rounded-xl border bg-card text-card-foreground shadow",t),...s}));ks.displayName="Card";const ur=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Vs("flex flex-col space-y-1.5 p-6",t),...s}));ur.displayName="CardHeader";const hr=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Vs("font-semibold leading-none tracking-tight",t),...s}));hr.displayName="CardTitle";const na=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Vs("text-sm text-muted-foreground",t),...s}));na.displayName="CardDescription";const Ws=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Vs("p-6 pt-0",t),...s}));Ws.displayName="CardContent";const Ch=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Vs("flex items-center p-6 pt-0",t),...s}));Ch.displayName="CardFooter";function k6(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(ks,{className:"w-full max-w-md mx-4",children:e.jsxs(Ws,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(mh,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const R1=S.createContext({});function O1(t){const s=S.useRef(null);return s.current===null&&(s.current=t()),s.current}const U1=typeof window<"u",cE=U1?S.useLayoutEffect:S.useEffect,yx=S.createContext(null);function L1(t,s){t.indexOf(s)===-1&&t.push(s)}function D1(t,s){const n=t.indexOf(s);n>-1&&t.splice(n,1)}const hA=(t,s,n)=>n>s?s:n<t?t:n;let Q1=()=>{};const fA={},dE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function AE(t){return typeof t=="object"&&t!==null}const uE=t=>/^0[^.\s]+$/u.test(t);function _1(t){let s;return()=>(s===void 0&&(s=t()),s)}const Nc=t=>t,H6=(t,s)=>n=>s(t(n)),wm=(...t)=>t.reduce(H6),Am=(t,s,n)=>{const r=s-t;return r===0?1:(n-t)/r};class M1{constructor(){this.subscriptions=[]}add(s){return L1(this.subscriptions,s),()=>D1(this.subscriptions,s)}notify(s,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](s,n,r);else for(let c=0;c<i;c++){const A=this.subscriptions[c];A&&A(s,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Od=t=>t*1e3,Sc=t=>t/1e3;function hE(t,s){return s?t*(1e3/s):0}const fE=(t,s,n)=>(((1-3*n+3*s)*t+(3*n-6*s))*t+3*s)*t,K6=1e-7,z6=12;function V6(t,s,n,r,i){let c,A,u=0;do A=s+(n-s)/2,c=fE(A,r,i)-t,c>0?n=A:s=A;while(Math.abs(c)>K6&&++u<z6);return A}function Sm(t,s,n,r){if(t===s&&n===r)return Nc;const i=c=>V6(c,0,1,t,n);return c=>c===0||c===1?c:fE(i(c),s,r)}const pE=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,mE=t=>s=>1-t(1-s),gE=Sm(.33,1.53,.69,.99),P1=mE(gE),yE=pE(P1),xE=t=>(t*=2)<1?.5*P1(t):.5*(2-Math.pow(2,-10*(t-1))),k1=t=>1-Math.sin(Math.acos(t)),vE=mE(k1),bE=pE(k1),$6=Sm(.42,0,1,1),G6=Sm(0,0,.58,1),jE=Sm(.42,0,.58,1),q6=t=>Array.isArray(t)&&typeof t[0]!="number",wE=t=>Array.isArray(t)&&typeof t[0]=="number",W6={linear:Nc,easeIn:$6,easeInOut:jE,easeOut:G6,circIn:k1,circInOut:bE,circOut:vE,backIn:P1,backInOut:yE,backOut:gE,anticipate:xE},Y6=t=>typeof t=="string",_2=t=>{if(wE(t)){Q1(t.length===4);const[s,n,r,i]=t;return Sm(s,n,r,i)}else if(Y6(t))return W6[t];return t},_g=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function X6(t,s){let n=new Set,r=new Set,i=!1,c=!1;const A=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(o){A.has(o)&&(h.schedule(o),t()),o(u)}const h={schedule:(o,m=!1,y=!1)=>{const j=y&&i?n:r;return m&&A.add(o),j.has(o)||j.add(o),o},cancel:o=>{r.delete(o),A.delete(o)},process:o=>{if(u=o,i){c=!0;return}i=!0,[n,r]=[r,n],n.forEach(d),n.clear(),i=!1,c&&(c=!1,h.process(o))}};return h}const J6=40;function SE(t,s){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},c=()=>n=!0,A=_g.reduce((Q,k)=>(Q[k]=X6(c),Q),{}),{setup:u,read:d,resolveKeyframes:h,preUpdate:o,update:m,preRender:y,render:p,postRender:j}=A,b=()=>{const Q=fA.useManualTiming?i.timestamp:performance.now();n=!1,fA.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(Q-i.timestamp,J6),1)),i.timestamp=Q,i.isProcessing=!0,u.process(i),d.process(i),h.process(i),o.process(i),m.process(i),y.process(i),p.process(i),j.process(i),i.isProcessing=!1,n&&s&&(r=!1,t(b))},w=()=>{n=!0,r=!0,i.isProcessing||t(b)};return{schedule:_g.reduce((Q,k)=>{const z=A[k];return Q[k]=(J,$=!1,q=!1)=>(n||w(),z.schedule(J,$,q)),Q},{}),cancel:Q=>{for(let k=0;k<_g.length;k++)A[_g[k]].cancel(Q)},state:i,steps:A}}const{schedule:ui,cancel:pu,state:go,steps:_0}=SE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nc,!0);let uy;function Z6(){uy=void 0}const Nl={now:()=>(uy===void 0&&Nl.set(go.isProcessing||fA.useManualTiming?go.timestamp:performance.now()),uy),set:t=>{uy=t,queueMicrotask(Z6)}},NE=t=>s=>typeof s=="string"&&s.startsWith(t),H1=NE("--"),e_=NE("var(--"),K1=t=>e_(t)?t_.test(t.split("/*")[0].trim()):!1,t_=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Mf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},um={...Mf,transform:t=>hA(0,1,t)},Mg={...Mf,default:1},qp=t=>Math.round(t*1e5)/1e5,z1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function s_(t){return t==null}const n_=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,V1=(t,s)=>n=>!!(typeof n=="string"&&n_.test(n)&&n.startsWith(t)||s&&!s_(n)&&Object.prototype.hasOwnProperty.call(n,s)),BE=(t,s,n)=>r=>{if(typeof r!="string")return r;const[i,c,A,u]=r.match(z1);return{[t]:parseFloat(i),[s]:parseFloat(c),[n]:parseFloat(A),alpha:u!==void 0?parseFloat(u):1}},r_=t=>hA(0,255,t),M0={...Mf,transform:t=>Math.round(r_(t))},nh={test:V1("rgb","red"),parse:BE("red","green","blue"),transform:({red:t,green:s,blue:n,alpha:r=1})=>"rgba("+M0.transform(t)+", "+M0.transform(s)+", "+M0.transform(n)+", "+qp(um.transform(r))+")"};function a_(t){let s="",n="",r="",i="";return t.length>5?(s=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(s=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),s+=s,n+=n,r+=r,i+=i),{red:parseInt(s,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const hb={test:V1("#"),parse:a_,transform:nh.transform},Nm=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),su=Nm("deg"),Ud=Nm("%"),$n=Nm("px"),i_=Nm("vh"),o_=Nm("vw"),M2={...Ud,parse:t=>Ud.parse(t)/100,transform:t=>Ud.transform(t*100)},mf={test:V1("hsl","hue"),parse:BE("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ud.transform(qp(s))+", "+Ud.transform(qp(n))+", "+qp(um.transform(r))+")"},Gi={test:t=>nh.test(t)||hb.test(t)||mf.test(t),parse:t=>nh.test(t)?nh.parse(t):mf.test(t)?mf.parse(t):hb.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?nh.transform(t):mf.transform(t),getAnimatableNone:t=>{const s=Gi.parse(t);return s.alpha=0,Gi.transform(s)}},l_=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function c_(t){return isNaN(t)&&typeof t=="string"&&(t.match(z1)?.length||0)+(t.match(l_)?.length||0)>0}const CE="number",EE="color",d_="var",A_="var(",P2="${}",u_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hm(t){const s=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let c=0;const u=s.replace(u_,d=>(Gi.test(d)?(r.color.push(c),i.push(EE),n.push(Gi.parse(d))):d.startsWith(A_)?(r.var.push(c),i.push(d_),n.push(d)):(r.number.push(c),i.push(CE),n.push(parseFloat(d))),++c,P2)).split(P2);return{values:n,split:u,indexes:r,types:i}}function TE(t){return hm(t).values}function FE(t){const{split:s,types:n}=hm(t),r=s.length;return i=>{let c="";for(let A=0;A<r;A++)if(c+=s[A],i[A]!==void 0){const u=n[A];u===CE?c+=qp(i[A]):u===EE?c+=Gi.transform(i[A]):c+=i[A]}return c}}const h_=t=>typeof t=="number"?0:Gi.test(t)?Gi.getAnimatableNone(t):t;function f_(t){const s=TE(t);return FE(t)(s.map(h_))}const mu={test:c_,parse:TE,createTransformer:FE,getAnimatableNone:f_};function P0(t,s,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(s-t)*6*n:n<1/2?s:n<2/3?t+(s-t)*(2/3-n)*6:t}function p_({hue:t,saturation:s,lightness:n,alpha:r}){t/=360,s/=100,n/=100;let i=0,c=0,A=0;if(!s)i=c=A=n;else{const u=n<.5?n*(1+s):n+s-n*s,d=2*n-u;i=P0(d,u,t+1/3),c=P0(d,u,t),A=P0(d,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(c*255),blue:Math.round(A*255),alpha:r}}function Hy(t,s){return n=>n>0?s:t}const xi=(t,s,n)=>t+(s-t)*n,k0=(t,s,n)=>{const r=t*t,i=n*(s*s-r)+r;return i<0?0:Math.sqrt(i)},m_=[hb,nh,mf],g_=t=>m_.find(s=>s.test(t));function k2(t){const s=g_(t);if(!s)return!1;let n=s.parse(t);return s===mf&&(n=p_(n)),n}const H2=(t,s)=>{const n=k2(t),r=k2(s);if(!n||!r)return Hy(t,s);const i={...n};return c=>(i.red=k0(n.red,r.red,c),i.green=k0(n.green,r.green,c),i.blue=k0(n.blue,r.blue,c),i.alpha=xi(n.alpha,r.alpha,c),nh.transform(i))},fb=new Set(["none","hidden"]);function y_(t,s){return fb.has(t)?n=>n<=0?t:s:n=>n>=1?s:t}function x_(t,s){return n=>xi(t,s,n)}function $1(t){return typeof t=="number"?x_:typeof t=="string"?K1(t)?Hy:Gi.test(t)?H2:j_:Array.isArray(t)?IE:typeof t=="object"?Gi.test(t)?H2:v_:Hy}function IE(t,s){const n=[...t],r=n.length,i=t.map((c,A)=>$1(c)(c,s[A]));return c=>{for(let A=0;A<r;A++)n[A]=i[A](c);return n}}function v_(t,s){const n={...t,...s},r={};for(const i in n)t[i]!==void 0&&s[i]!==void 0&&(r[i]=$1(t[i])(t[i],s[i]));return i=>{for(const c in r)n[c]=r[c](i);return n}}function b_(t,s){const n=[],r={color:0,var:0,number:0};for(let i=0;i<s.values.length;i++){const c=s.types[i],A=t.indexes[c][r[c]],u=t.values[A]??0;n[i]=u,r[c]++}return n}const j_=(t,s)=>{const n=mu.createTransformer(s),r=hm(t),i=hm(s);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?fb.has(t)&&!i.values.length||fb.has(s)&&!r.values.length?y_(t,s):wm(IE(b_(r,i),i.values),n):Hy(t,s)};function RE(t,s,n){return typeof t=="number"&&typeof s=="number"&&typeof n=="number"?xi(t,s,n):$1(t)(t,s)}const w_=t=>{const s=({timestamp:n})=>t(n);return{start:(n=!0)=>ui.update(s,n),stop:()=>pu(s),now:()=>go.isProcessing?go.timestamp:Nl.now()}},OE=(t,s,n=10)=>{let r="";const i=Math.max(Math.round(s/n),2);for(let c=0;c<i;c++)r+=Math.round(t(c/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ky=2e4;function G1(t){let s=0;const n=50;let r=t.next(s);for(;!r.done&&s<Ky;)s+=n,r=t.next(s);return s>=Ky?1/0:s}function S_(t,s=100,n){const r=n({...t,keyframes:[0,s]}),i=Math.min(G1(r),Ky);return{type:"keyframes",ease:c=>r.next(i*c).value/s,duration:Sc(i)}}const N_=5;function UE(t,s,n){const r=Math.max(s-N_,0);return hE(n-t(r),s-r)}const Ni={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},H0=.001;function B_({duration:t=Ni.duration,bounce:s=Ni.bounce,velocity:n=Ni.velocity,mass:r=Ni.mass}){let i,c,A=1-s;A=hA(Ni.minDamping,Ni.maxDamping,A),t=hA(Ni.minDuration,Ni.maxDuration,Sc(t)),A<1?(i=h=>{const o=h*A,m=o*t,y=o-n,p=pb(h,A),j=Math.exp(-m);return H0-y/p*j},c=h=>{const m=h*A*t,y=m*n+n,p=Math.pow(A,2)*Math.pow(h,2)*t,j=Math.exp(-m),b=pb(Math.pow(h,2),A);return(-i(h)+H0>0?-1:1)*((y-p)*j)/b}):(i=h=>{const o=Math.exp(-h*t),m=(h-n)*t+1;return-H0+o*m},c=h=>{const o=Math.exp(-h*t),m=(n-h)*(t*t);return o*m});const u=5/t,d=E_(i,c,u);if(t=Od(t),isNaN(d))return{stiffness:Ni.stiffness,damping:Ni.damping,duration:t};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:A*2*Math.sqrt(r*h),duration:t}}}const C_=12;function E_(t,s,n){let r=n;for(let i=1;i<C_;i++)r=r-t(r)/s(r);return r}function pb(t,s){return t*Math.sqrt(1-s*s)}const T_=["duration","bounce"],F_=["stiffness","damping","mass"];function K2(t,s){return s.some(n=>t[n]!==void 0)}function I_(t){let s={velocity:Ni.velocity,stiffness:Ni.stiffness,damping:Ni.damping,mass:Ni.mass,isResolvedFromDuration:!1,...t};if(!K2(t,F_)&&K2(t,T_))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,c=2*hA(.05,1,1-(t.bounce||0))*Math.sqrt(i);s={...s,mass:Ni.mass,stiffness:i,damping:c}}else{const n=B_(t);s={...s,...n,mass:Ni.mass},s.isResolvedFromDuration=!0}return s}function zy(t=Ni.visualDuration,s=Ni.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:r,restDelta:i}=n;const c=n.keyframes[0],A=n.keyframes[n.keyframes.length-1],u={done:!1,value:c},{stiffness:d,damping:h,mass:o,duration:m,velocity:y,isResolvedFromDuration:p}=I_({...n,velocity:-Sc(n.velocity||0)}),j=y||0,b=h/(2*Math.sqrt(d*o)),w=A-c,B=Sc(Math.sqrt(d/o)),L=Math.abs(w)<5;r||(r=L?Ni.restSpeed.granular:Ni.restSpeed.default),i||(i=L?Ni.restDelta.granular:Ni.restDelta.default);let Q;if(b<1){const z=pb(B,b);Q=J=>{const $=Math.exp(-b*B*J);return A-$*((j+b*B*w)/z*Math.sin(z*J)+w*Math.cos(z*J))}}else if(b===1)Q=z=>A-Math.exp(-B*z)*(w+(j+B*w)*z);else{const z=B*Math.sqrt(b*b-1);Q=J=>{const $=Math.exp(-b*B*J),q=Math.min(z*J,300);return A-$*((j+b*B*w)*Math.sinh(q)+z*w*Math.cosh(q))/z}}const k={calculatedDuration:p&&m||null,next:z=>{const J=Q(z);if(p)u.done=z>=m;else{let $=z===0?j:0;b<1&&($=z===0?Od(j):UE(Q,z,J));const q=Math.abs($)<=r,X=Math.abs(A-J)<=i;u.done=q&&X}return u.value=u.done?A:J,u},toString:()=>{const z=Math.min(G1(k),Ky),J=OE($=>k.next(z*$).value,z,30);return z+"ms "+J},toTransition:()=>{}};return k}zy.applyToOptions=t=>{const s=S_(t,100,zy);return t.ease=s.ease,t.duration=Od(s.duration),t.type="keyframes",t};function mb({keyframes:t,velocity:s=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:c=500,modifyTarget:A,min:u,max:d,restDelta:h=.5,restSpeed:o}){const m=t[0],y={done:!1,value:m},p=q=>u!==void 0&&q<u||d!==void 0&&q>d,j=q=>u===void 0?d:d===void 0||Math.abs(u-q)<Math.abs(d-q)?u:d;let b=n*s;const w=m+b,B=A===void 0?w:A(w);B!==w&&(b=B-m);const L=q=>-b*Math.exp(-q/r),Q=q=>B+L(q),k=q=>{const X=L(q),fe=Q(q);y.done=Math.abs(X)<=h,y.value=y.done?B:fe};let z,J;const $=q=>{p(y.value)&&(z=q,J=zy({keyframes:[y.value,j(y.value)],velocity:UE(Q,q,y.value),damping:i,stiffness:c,restDelta:h,restSpeed:o}))};return $(0),{calculatedDuration:null,next:q=>{let X=!1;return!J&&z===void 0&&(X=!0,k(q),$(q)),z!==void 0&&q>=z?J.next(q-z):(!X&&k(q),y)}}}function R_(t,s,n){const r=[],i=n||fA.mix||RE,c=t.length-1;for(let A=0;A<c;A++){let u=i(t[A],t[A+1]);if(s){const d=Array.isArray(s)?s[A]||Nc:s;u=wm(d,u)}r.push(u)}return r}function O_(t,s,{clamp:n=!0,ease:r,mixer:i}={}){const c=t.length;if(Q1(c===s.length),c===1)return()=>s[0];if(c===2&&s[0]===s[1])return()=>s[1];const A=t[0]===t[1];t[0]>t[c-1]&&(t=[...t].reverse(),s=[...s].reverse());const u=R_(s,r,i),d=u.length,h=o=>{if(A&&o<t[0])return s[0];let m=0;if(d>1)for(;m<t.length-2&&!(o<t[m+1]);m++);const y=Am(t[m],t[m+1],o);return u[m](y)};return n?o=>h(hA(t[0],t[c-1],o)):h}function U_(t,s){const n=t[t.length-1];for(let r=1;r<=s;r++){const i=Am(0,s,r);t.push(xi(n,1,i))}}function L_(t){const s=[0];return U_(s,t.length-1),s}function D_(t,s){return t.map(n=>n*s)}function Q_(t,s){return t.map(()=>s||jE).splice(0,t.length-1)}function Wp({duration:t=300,keyframes:s,times:n,ease:r="easeInOut"}){const i=q6(r)?r.map(_2):_2(r),c={done:!1,value:s[0]},A=D_(n&&n.length===s.length?n:L_(s),t),u=O_(A,s,{ease:Array.isArray(i)?i:Q_(s,i)});return{calculatedDuration:t,next:d=>(c.value=u(d),c.done=d>=t,c)}}const __=t=>t!==null;function q1(t,{repeat:s,repeatType:n="loop"},r,i=1){const c=t.filter(__),u=i<0||s&&n!=="loop"&&s%2===1?0:c.length-1;return!u||r===void 0?c[u]:r}const M_={decay:mb,inertia:mb,tween:Wp,keyframes:Wp,spring:zy};function LE(t){typeof t.type=="string"&&(t.type=M_[t.type])}class W1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,n){return this.finished.then(s,n)}}const P_=t=>t/100;class Y1 extends W1{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Nl.now()&&this.tick(Nl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;LE(s);const{type:n=Wp,repeat:r=0,repeatDelay:i=0,repeatType:c,velocity:A=0}=s;let{keyframes:u}=s;const d=n||Wp;d!==Wp&&typeof u[0]!="number"&&(this.mixKeyframes=wm(P_,RE(u[0],u[1])),u=[0,100]);const h=d({...s,keyframes:u});c==="mirror"&&(this.mirroredGenerator=d({...s,keyframes:[...u].reverse(),velocity:-A})),h.calculatedDuration===null&&(h.calculatedDuration=G1(h));const{calculatedDuration:o}=h;this.calculatedDuration=o,this.resolvedDuration=o+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(s){const n=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(s,n=!1){const{generator:r,totalDuration:i,mixKeyframes:c,mirroredGenerator:A,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:o,repeat:m,repeatType:y,repeatDelay:p,type:j,onUpdate:b,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-i/this.speed,this.startTime)),n?this.currentTime=s:this.updateTime(s);const B=this.currentTime-h*(this.playbackSpeed>=0?1:-1),L=this.playbackSpeed>=0?B<0:B>i;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let Q=this.currentTime,k=r;if(m){const q=Math.min(this.currentTime,i)/u;let X=Math.floor(q),fe=q%1;!fe&&q>=1&&(fe=1),fe===1&&X--,X=Math.min(X,m+1),!!(X%2)&&(y==="reverse"?(fe=1-fe,p&&(fe-=p/u)):y==="mirror"&&(k=A)),Q=hA(0,1,fe)*u}const z=L?{done:!1,value:o[0]}:k.next(Q);c&&(z.value=c(z.value));let{done:J}=z;!L&&d!==null&&(J=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&J);return $&&j!==mb&&(z.value=q1(o,this.options,w,this.speed)),b&&b(z.value),$&&this.finish(),z}then(s,n){return this.finished.then(s,n)}get duration(){return Sc(this.calculatedDuration)}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Sc(s)}get time(){return Sc(this.currentTime)}set time(s){s=Od(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(Nl.now());const n=this.playbackSpeed!==s;this.playbackSpeed=s,n&&(this.time=Sc(this.currentTime))}play(){if(this.isStopped)return;const{driver:s=w_,startTime:n}=this.options;this.driver||(this.driver=s(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Nl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),s.observe(this)}}function k_(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const rh=t=>t*180/Math.PI,gb=t=>{const s=rh(Math.atan2(t[1],t[0]));return yb(s)},H_={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:gb,rotateZ:gb,skewX:t=>rh(Math.atan(t[1])),skewY:t=>rh(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},yb=t=>(t=t%360,t<0&&(t+=360),t),z2=gb,V2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),$2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),K_={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:V2,scaleY:$2,scale:t=>(V2(t)+$2(t))/2,rotateX:t=>yb(rh(Math.atan2(t[6],t[5]))),rotateY:t=>yb(rh(Math.atan2(-t[2],t[0]))),rotateZ:z2,rotate:z2,skewX:t=>rh(Math.atan(t[4])),skewY:t=>rh(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function xb(t){return t.includes("scale")?1:0}function vb(t,s){if(!t||t==="none")return xb(s);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=K_,i=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=H_,i=u}if(!i)return xb(s);const c=r[s],A=i[1].split(",").map(V_);return typeof c=="function"?c(A):A[c]}const z_=(t,s)=>{const{transform:n="none"}=getComputedStyle(t);return vb(n,s)};function V_(t){return parseFloat(t.trim())}const Pf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kf=new Set(Pf),G2=t=>t===Mf||t===$n,$_=new Set(["x","y","z"]),G_=Pf.filter(t=>!$_.has(t));function q_(t){const s=[];return G_.forEach(n=>{const r=t.getValue(n);r!==void 0&&(s.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),s}const lh={width:({x:t},{paddingLeft:s="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),height:({y:t},{paddingTop:s="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>vb(s,"x"),y:(t,{transform:s})=>vb(s,"y")};lh.translateX=lh.x;lh.translateY=lh.y;const ch=new Set;let bb=!1,jb=!1,wb=!1;function DE(){if(jb){const t=Array.from(ch).filter(r=>r.needsMeasurement),s=new Set(t.map(r=>r.element)),n=new Map;s.forEach(r=>{const i=q_(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),s.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([c,A])=>{r.getValue(c)?.set(A)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}jb=!1,bb=!1,ch.forEach(t=>t.complete(wb)),ch.clear()}function QE(){ch.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(jb=!0)})}function W_(){wb=!0,QE(),DE(),wb=!1}class X1{constructor(s,n,r,i,c,A=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=n,this.name=r,this.motionValue=i,this.element=c,this.isAsync=A}scheduleResolve(){this.state="scheduled",this.isAsync?(ch.add(this),bb||(bb=!0,ui.read(QE),ui.resolveKeyframes(DE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:n,element:r,motionValue:i}=this;if(s[0]===null){const c=i?.get(),A=s[s.length-1];if(c!==void 0)s[0]=c;else if(r&&n){const u=r.readValue(n,A);u!=null&&(s[0]=u)}s[0]===void 0&&(s[0]=A),i&&c===void 0&&i.set(s[0])}k_(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),ch.delete(this)}cancel(){this.state==="scheduled"&&(ch.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Y_=t=>t.startsWith("--");function X_(t,s,n){Y_(s)?t.style.setProperty(s,n):t.style[s]=n}const J_=_1(()=>window.ScrollTimeline!==void 0),Z_={};function eM(t,s){const n=_1(t);return()=>Z_[s]??n()}const _E=eM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Vp=([t,s,n,r])=>`cubic-bezier(${t}, ${s}, ${n}, ${r})`,q2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vp([0,.65,.55,1]),circOut:Vp([.55,0,1,.45]),backIn:Vp([.31,.01,.66,-.59]),backOut:Vp([.33,1.53,.69,.99])};function ME(t,s){if(t)return typeof t=="function"?_E()?OE(t,s):"ease-out":wE(t)?Vp(t):Array.isArray(t)?t.map(n=>ME(n,s)||q2.easeOut):q2[t]}function tM(t,s,n,{delay:r=0,duration:i=300,repeat:c=0,repeatType:A="loop",ease:u="easeOut",times:d}={},h=void 0){const o={[s]:n};d&&(o.offset=d);const m=ME(u,i);Array.isArray(m)&&(o.easing=m);const y={delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:c+1,direction:A==="reverse"?"alternate":"normal"};return h&&(y.pseudoElement=h),t.animate(o,y)}function PE(t){return typeof t=="function"&&"applyToOptions"in t}function sM({type:t,...s}){return PE(t)&&_E()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class nM extends W1{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:n,name:r,keyframes:i,pseudoElement:c,allowFlatten:A=!1,finalKeyframe:u,onComplete:d}=s;this.isPseudoElement=!!c,this.allowFlatten=A,this.options=s,Q1(typeof s.type!="string");const h=sM(s);this.animation=tM(n,r,i,h,c),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const o=q1(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(o):X_(n,r,o),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const s=this.animation.effect?.getComputedTiming?.().duration||0;return Sc(Number(s))}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Sc(s)}get time(){return Sc(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=Od(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,s&&J_()?(this.animation.timeline=s,Nc):n(this)}}const kE={anticipate:xE,backInOut:yE,circInOut:bE};function rM(t){return t in kE}function aM(t){typeof t.ease=="string"&&rM(t.ease)&&(t.ease=kE[t.ease])}const W2=10;class iM extends nM{constructor(s){aM(s),LE(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:n,onUpdate:r,onComplete:i,element:c,...A}=this.options;if(!n)return;if(s!==void 0){n.set(s);return}const u=new Y1({...A,autoplay:!1}),d=Od(this.finishedTime??this.time);n.setWithVelocity(u.sample(d-W2).value,u.sample(d).value,W2),u.stop()}}const Y2=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(mu.test(t)||t==="0")&&!t.startsWith("url("));function oM(t){const s=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==s)return!0}function lM(t,s,n,r){const i=t[0];if(i===null)return!1;if(s==="display"||s==="visibility")return!0;const c=t[t.length-1],A=Y2(i,s),u=Y2(c,s);return!A||!u?!1:oM(t)||(n==="spring"||PE(n))&&r}function Sb(t){t.duration=0,t.type="keyframes"}const cM=new Set(["opacity","clipPath","filter","transform"]),dM=_1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function AM(t){const{motionValue:s,name:n,repeatDelay:r,repeatType:i,damping:c,type:A}=t;if(!(s?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=s.owner.getProps();return dM()&&n&&cM.has(n)&&(n!=="transform"||!h)&&!d&&!r&&i!=="mirror"&&c!==0&&A!=="inertia"}const uM=40;class hM extends W1{constructor({autoplay:s=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:c=0,repeatType:A="loop",keyframes:u,name:d,motionValue:h,element:o,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Nl.now();const y={autoplay:s,delay:n,type:r,repeat:i,repeatDelay:c,repeatType:A,name:d,motionValue:h,element:o,...m},p=o?.KeyframeResolver||X1;this.keyframeResolver=new p(u,(j,b,w)=>this.onKeyframesResolved(j,b,y,!w),d,h,o),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(s,n,r,i){this.keyframeResolver=void 0;const{name:c,type:A,velocity:u,delay:d,isHandoff:h,onUpdate:o}=r;this.resolvedAt=Nl.now(),lM(s,c,A,u)||((fA.instantAnimations||!d)&&o?.(q1(s,r,n)),s[0]=s[s.length-1],Sb(r),r.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>uM?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:s},p=!h&&AM(y)?new iM({...y,element:y.motionValue.owner.current}):new Y1(y);p.finished.then(()=>this.notifyFinished()).catch(Nc),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(s,n){return this.finished.finally(s).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),W_()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const fM=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pM(t){const s=fM.exec(t);if(!s)return[,];const[,n,r,i]=s;return[`--${n??r}`,i]}function HE(t,s,n=1){const[r,i]=pM(t);if(!r)return;const c=window.getComputedStyle(s).getPropertyValue(r);if(c){const A=c.trim();return dE(A)?parseFloat(A):A}return K1(i)?HE(i,s,n+1):i}function J1(t,s){return t?.[s]??t?.default??t}const KE=new Set(["width","height","top","left","right","bottom",...Pf]),mM={test:t=>t==="auto",parse:t=>t},zE=t=>s=>s.test(t),VE=[Mf,$n,Ud,su,o_,i_,mM],X2=t=>VE.find(zE(t));function gM(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||uE(t):!0}const yM=new Set(["brightness","contrast","saturate","opacity"]);function xM(t){const[s,n]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[r]=n.match(z1)||[];if(!r)return t;const i=n.replace(r,"");let c=yM.has(s)?1:0;return r!==n&&(c*=100),s+"("+c+i+")"}const vM=/\b([a-z-]*)\(.*?\)/gu,Nb={...mu,getAnimatableNone:t=>{const s=t.match(vM);return s?s.map(xM).join(" "):t}},J2={...Mf,transform:Math.round},bM={rotate:su,rotateX:su,rotateY:su,rotateZ:su,scale:Mg,scaleX:Mg,scaleY:Mg,scaleZ:Mg,skew:su,skewX:su,skewY:su,distance:$n,translateX:$n,translateY:$n,translateZ:$n,x:$n,y:$n,z:$n,perspective:$n,transformPerspective:$n,opacity:um,originX:M2,originY:M2,originZ:$n},Z1={borderWidth:$n,borderTopWidth:$n,borderRightWidth:$n,borderBottomWidth:$n,borderLeftWidth:$n,borderRadius:$n,radius:$n,borderTopLeftRadius:$n,borderTopRightRadius:$n,borderBottomRightRadius:$n,borderBottomLeftRadius:$n,width:$n,maxWidth:$n,height:$n,maxHeight:$n,top:$n,right:$n,bottom:$n,left:$n,padding:$n,paddingTop:$n,paddingRight:$n,paddingBottom:$n,paddingLeft:$n,margin:$n,marginTop:$n,marginRight:$n,marginBottom:$n,marginLeft:$n,backgroundPositionX:$n,backgroundPositionY:$n,...bM,zIndex:J2,fillOpacity:um,strokeOpacity:um,numOctaves:J2},jM={...Z1,color:Gi,backgroundColor:Gi,outlineColor:Gi,fill:Gi,stroke:Gi,borderColor:Gi,borderTopColor:Gi,borderRightColor:Gi,borderBottomColor:Gi,borderLeftColor:Gi,filter:Nb,WebkitFilter:Nb},$E=t=>jM[t];function GE(t,s){let n=$E(t);return n!==Nb&&(n=mu),n.getAnimatableNone?n.getAnimatableNone(s):void 0}const wM=new Set(["auto","none","0"]);function SM(t,s,n){let r=0,i;for(;r<t.length&&!i;){const c=t[r];typeof c=="string"&&!wM.has(c)&&hm(c).values.length&&(i=t[r]),r++}if(i&&n)for(const c of s)t[c]=GE(n,i)}class NM extends X1{constructor(s,n,r,i,c){super(s,n,r,i,c,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<s.length;d++){let h=s[d];if(typeof h=="string"&&(h=h.trim(),K1(h))){const o=HE(h,n.current);o!==void 0&&(s[d]=o),d===s.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!KE.has(r)||s.length!==2)return;const[i,c]=s,A=X2(i),u=X2(c);if(A!==u)if(G2(A)&&G2(u))for(let d=0;d<s.length;d++){const h=s[d];typeof h=="string"&&(s[d]=parseFloat(h))}else lh[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:n}=this,r=[];for(let i=0;i<s.length;i++)(s[i]===null||gM(s[i]))&&r.push(i);r.length&&SM(s,r,n)}measureInitialState(){const{element:s,unresolvedKeyframes:n,name:r}=this;if(!s||!s.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=lh[r](s.measureViewportBox(),window.getComputedStyle(s.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&s.getValue(r,i).jump(i,!1)}measureEndState(){const{element:s,name:n,unresolvedKeyframes:r}=this;if(!s||!s.current)return;const i=s.getValue(n);i&&i.jump(this.measuredOrigin,!1);const c=r.length-1,A=r[c];r[c]=lh[n](s.measureViewportBox(),window.getComputedStyle(s.current)),A!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=A),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{s.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function BM(t,s,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const qE=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function WE(t){return AE(t)&&"offsetHeight"in t}const Z2=30,CM=t=>!isNaN(parseFloat(t));class EM{constructor(s,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Nl.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=n.owner}setCurrent(s){this.current=s,this.updatedAt=Nl.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=CM(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,n){this.events[s]||(this.events[s]=new M1);const r=this.events[s].add(n);return s==="change"?()=>{r(),ui.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,n){this.passiveEffect=s,this.stopPassiveEffect=n}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-r}jump(s,n=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=Nl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>Z2)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Z2);return hE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(s){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=s(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function If(t,s){return new EM(t,s)}const{schedule:ej}=SE(queueMicrotask,!1),$c={x:!1,y:!1};function YE(){return $c.x||$c.y}function TM(t){return t==="x"||t==="y"?$c[t]?null:($c[t]=!0,()=>{$c[t]=!1}):$c.x||$c.y?null:($c.x=$c.y=!0,()=>{$c.x=$c.y=!1})}function XE(t,s){const n=BM(t),r=new AbortController,i={passive:!0,...s,signal:r.signal};return[n,i,()=>r.abort()]}function eS(t){return!(t.pointerType==="touch"||YE())}function FM(t,s,n={}){const[r,i,c]=XE(t,n),A=u=>{if(!eS(u))return;const{target:d}=u,h=s(d,u);if(typeof h!="function"||!d)return;const o=m=>{eS(m)&&(h(m),d.removeEventListener("pointerleave",o))};d.addEventListener("pointerleave",o,i)};return r.forEach(u=>{u.addEventListener("pointerenter",A,i)}),c}const JE=(t,s)=>s?t===s?!0:JE(t,s.parentElement):!1,tj=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,IM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function RM(t){return IM.has(t.tagName)||t.tabIndex!==-1}const hy=new WeakSet;function tS(t){return s=>{s.key==="Enter"&&t(s)}}function K0(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const OM=(t,s)=>{const n=t.currentTarget;if(!n)return;const r=tS(()=>{if(hy.has(n))return;K0(n,"down");const i=tS(()=>{K0(n,"up")}),c=()=>K0(n,"cancel");n.addEventListener("keyup",i,s),n.addEventListener("blur",c,s)});n.addEventListener("keydown",r,s),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),s)};function sS(t){return tj(t)&&!YE()}function UM(t,s,n={}){const[r,i,c]=XE(t,n),A=u=>{const d=u.currentTarget;if(!sS(u))return;hy.add(d);const h=s(d,u),o=(p,j)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),hy.has(d)&&hy.delete(d),sS(p)&&typeof h=="function"&&h(p,{success:j})},m=p=>{o(p,d===window||d===document||n.useGlobalTarget||JE(d,p.target))},y=p=>{o(p,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",y,i)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",A,i),WE(u)&&(u.addEventListener("focus",h=>OM(h,i)),!RM(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),c}function ZE(t){return AE(t)&&"ownerSVGElement"in t}function LM(t){return ZE(t)&&t.tagName==="svg"}const Go=t=>!!(t&&t.getVelocity),DM=[...VE,Gi,mu],QM=t=>DM.find(zE(t)),sj=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function nS(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function _M(...t){return s=>{let n=!1;const r=t.map(i=>{const c=nS(i,s);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let i=0;i<r.length;i++){const c=r[i];typeof c=="function"?c():nS(t[i],null)}}}}function MM(...t){return S.useCallback(_M(...t),t)}class PM extends S.Component{getSnapshotBeforeUpdate(s){const n=this.props.childRef.current;if(n&&s.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=WE(r)&&r.offsetWidth||0,c=this.props.sizeRef.current;c.height=n.offsetHeight||0,c.width=n.offsetWidth||0,c.top=n.offsetTop,c.left=n.offsetLeft,c.right=i-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function kM({children:t,isPresent:s,anchorX:n,root:r}){const i=S.useId(),c=S.useRef(null),A=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=S.useContext(sj),d=MM(c,t?.ref);return S.useInsertionEffect(()=>{const{width:h,height:o,top:m,left:y,right:p}=A.current;if(s||!c.current||!h||!o)return;const j=n==="left"?`left: ${y}`:`right: ${p}`;c.current.dataset.motionPopId=i;const b=document.createElement("style");u&&(b.nonce=u);const w=r??document.head;return w.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${o}px !important;
            ${j}px !important;
            top: ${m}px !important;
          }
        `),()=>{w.contains(b)&&w.removeChild(b)}},[s]),e.jsx(PM,{isPresent:s,childRef:c,sizeRef:A,children:S.cloneElement(t,{ref:d})})}const HM=({children:t,initial:s,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:c,mode:A,anchorX:u,root:d})=>{const h=O1(KM),o=S.useId();let m=!0,y=S.useMemo(()=>(m=!1,{id:o,initial:s,isPresent:n,custom:i,onExitComplete:p=>{h.set(p,!0);for(const j of h.values())if(!j)return;r&&r()},register:p=>(h.set(p,!1),()=>h.delete(p))}),[n,h,r]);return c&&m&&(y={...y}),S.useMemo(()=>{h.forEach((p,j)=>h.set(j,!1))},[n]),S.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),A==="popLayout"&&(t=e.jsx(kM,{isPresent:n,anchorX:u,root:d,children:t})),e.jsx(yx.Provider,{value:y,children:t})};function KM(){return new Map}function e4(t=!0){const s=S.useContext(yx);if(s===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=s,c=S.useId();S.useEffect(()=>{if(t)return i(c)},[t]);const A=S.useCallback(()=>t&&r&&r(c),[c,r,t]);return!n&&r?[!1,A]:[!0]}const Pg=t=>t.key||"";function rS(t){const s=[];return S.Children.forEach(t,n=>{S.isValidElement(n)&&s.push(n)}),s}const Fl=({children:t,custom:s,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:c="sync",propagate:A=!1,anchorX:u="left",root:d})=>{const[h,o]=e4(A),m=S.useMemo(()=>rS(t),[t]),y=A&&!h?[]:m.map(Pg),p=S.useRef(!0),j=S.useRef(m),b=O1(()=>new Map),[w,B]=S.useState(m),[L,Q]=S.useState(m);cE(()=>{p.current=!1,j.current=m;for(let J=0;J<L.length;J++){const $=Pg(L[J]);y.includes($)?b.delete($):b.get($)!==!0&&b.set($,!1)}},[L,y.length,y.join("-")]);const k=[];if(m!==w){let J=[...m];for(let $=0;$<L.length;$++){const q=L[$],X=Pg(q);y.includes(X)||(J.splice($,0,q),k.push(q))}return c==="wait"&&k.length&&(J=k),Q(rS(J)),B(m),null}const{forceRender:z}=S.useContext(R1);return e.jsx(e.Fragment,{children:L.map(J=>{const $=Pg(J),q=A&&!h?!1:m===L||y.includes($),X=()=>{if(b.has($))b.set($,!0);else return;let fe=!0;b.forEach(ee=>{ee||(fe=!1)}),fe&&(z?.(),Q(j.current),A&&o?.(),r&&r())};return e.jsx(HM,{isPresent:q,initial:!p.current||n?void 0:!1,custom:s,presenceAffectsLayout:i,mode:c,root:d,onExitComplete:q?void 0:X,anchorX:u,children:J},$)})})},t4=S.createContext({strict:!1}),aS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Rf={};for(const t in aS)Rf[t]={isEnabled:s=>aS[t].some(n=>!!s[n])};function zM(t){for(const s in t)Rf[s]={...Rf[s],...t[s]}}const VM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vy(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||VM.has(t)}let s4=t=>!Vy(t);function $M(t){typeof t=="function"&&(s4=s=>s.startsWith("on")?!Vy(s):t(s))}try{$M(require("@emotion/is-prop-valid").default)}catch{}function GM(t,s,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(s4(i)||n===!0&&Vy(i)||!s&&!Vy(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const xx=S.createContext({});function vx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function fm(t){return typeof t=="string"||Array.isArray(t)}const nj=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rj=["initial",...nj];function bx(t){return vx(t.animate)||rj.some(s=>fm(t[s]))}function n4(t){return!!(bx(t)||t.variants)}function qM(t,s){if(bx(t)){const{initial:n,animate:r}=t;return{initial:n===!1||fm(n)?n:void 0,animate:fm(r)?r:void 0}}return t.inherit!==!1?s:{}}function WM(t){const{initial:s,animate:n}=qM(t,S.useContext(xx));return S.useMemo(()=>({initial:s,animate:n}),[iS(s),iS(n)])}function iS(t){return Array.isArray(t)?t.join(" "):t}const pm={};function YM(t){for(const s in t)pm[s]=t[s],H1(s)&&(pm[s].isCSSVariable=!0)}function r4(t,{layout:s,layoutId:n}){return kf.has(t)||t.startsWith("origin")||(s||n!==void 0)&&(!!pm[t]||t==="opacity")}const XM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},JM=Pf.length;function ZM(t,s,n){let r="",i=!0;for(let c=0;c<JM;c++){const A=Pf[c],u=t[A];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(A.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const h=qE(u,Z1[A]);if(!d){i=!1;const o=XM[A]||A;r+=`${o}(${h}) `}n&&(s[A]=h)}}return r=r.trim(),n?r=n(s,i?"":r):i&&(r="none"),r}function aj(t,s,n){const{style:r,vars:i,transformOrigin:c}=t;let A=!1,u=!1;for(const d in s){const h=s[d];if(kf.has(d)){A=!0;continue}else if(H1(d)){i[d]=h;continue}else{const o=qE(h,Z1[d]);d.startsWith("origin")?(u=!0,c[d]=o):r[d]=o}}if(s.transform||(A||n?r.transform=ZM(s,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:h="50%",originZ:o=0}=c;r.transformOrigin=`${d} ${h} ${o}`}}const ij=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function a4(t,s,n){for(const r in s)!Go(s[r])&&!r4(r,n)&&(t[r]=s[r])}function eP({transformTemplate:t},s){return S.useMemo(()=>{const n=ij();return aj(n,s,t),Object.assign({},n.vars,n.style)},[s])}function tP(t,s){const n=t.style||{},r={};return a4(r,n,t),Object.assign(r,eP(t,s)),r}function sP(t,s){const n={},r=tP(t,s);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const nP={offset:"stroke-dashoffset",array:"stroke-dasharray"},rP={offset:"strokeDashoffset",array:"strokeDasharray"};function aP(t,s,n=1,r=0,i=!0){t.pathLength=1;const c=i?nP:rP;t[c.offset]=$n.transform(-r);const A=$n.transform(s),u=$n.transform(n);t[c.array]=`${A} ${u}`}function i4(t,{attrX:s,attrY:n,attrScale:r,pathLength:i,pathSpacing:c=1,pathOffset:A=0,...u},d,h,o){if(aj(t,u,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:y}=t;m.transform&&(y.transform=m.transform,delete m.transform),(y.transform||m.transformOrigin)&&(y.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),y.transform&&(y.transformBox=o?.transformBox??"fill-box",delete m.transformBox),s!==void 0&&(m.x=s),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),i!==void 0&&aP(m,i,c,A,!1)}const o4=()=>({...ij(),attrs:{}}),l4=t=>typeof t=="string"&&t.toLowerCase()==="svg";function iP(t,s,n,r){const i=S.useMemo(()=>{const c=o4();return i4(c,s,l4(r),t.transformTemplate,t.style),{...c.attrs,style:{...c.style}}},[s]);if(t.style){const c={};a4(c,t.style,t),i.style={...c,...i.style}}return i}const oP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function oj(t){return typeof t!="string"||t.includes("-")?!1:!!(oP.indexOf(t)>-1||/[A-Z]/u.test(t))}function lP(t,s,n,{latestValues:r},i,c=!1){const u=(oj(t)?iP:sP)(s,r,i,t),d=GM(s,typeof t=="string",c),h=t!==S.Fragment?{...d,...u,ref:n}:{},{children:o}=s,m=S.useMemo(()=>Go(o)?o.get():o,[o]);return S.createElement(t,{...h,children:m})}function oS(t){const s=[{},{}];return t?.values.forEach((n,r)=>{s[0][r]=n.get(),s[1][r]=n.getVelocity()}),s}function lj(t,s,n,r){if(typeof s=="function"){const[i,c]=oS(r);s=s(n!==void 0?n:t.custom,i,c)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[i,c]=oS(r);s=s(n!==void 0?n:t.custom,i,c)}return s}function fy(t){return Go(t)?t.get():t}function cP({scrapeMotionValuesFromProps:t,createRenderState:s},n,r,i){return{latestValues:dP(n,r,i,t),renderState:s()}}function dP(t,s,n,r){const i={},c=r(t,{});for(const y in c)i[y]=fy(c[y]);let{initial:A,animate:u}=t;const d=bx(t),h=n4(t);s&&h&&!d&&t.inherit!==!1&&(A===void 0&&(A=s.initial),u===void 0&&(u=s.animate));let o=n?n.initial===!1:!1;o=o||A===!1;const m=o?u:A;if(m&&typeof m!="boolean"&&!vx(m)){const y=Array.isArray(m)?m:[m];for(let p=0;p<y.length;p++){const j=lj(t,y[p]);if(j){const{transitionEnd:b,transition:w,...B}=j;for(const L in B){let Q=B[L];if(Array.isArray(Q)){const k=o?Q.length-1:0;Q=Q[k]}Q!==null&&(i[L]=Q)}for(const L in b)i[L]=b[L]}}}return i}const c4=t=>(s,n)=>{const r=S.useContext(xx),i=S.useContext(yx),c=()=>cP(t,s,r,i);return n?c():O1(c)};function cj(t,s,n){const{style:r}=t,i={};for(const c in r)(Go(r[c])||s.style&&Go(s.style[c])||r4(c,t)||n?.getValue(c)?.liveStyle!==void 0)&&(i[c]=r[c]);return i}const AP=c4({scrapeMotionValuesFromProps:cj,createRenderState:ij});function d4(t,s,n){const r=cj(t,s,n);for(const i in t)if(Go(t[i])||Go(s[i])){const c=Pf.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[c]=t[i]}return r}const uP=c4({scrapeMotionValuesFromProps:d4,createRenderState:o4}),hP=Symbol.for("motionComponentSymbol");function gf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function fP(t,s,n){return S.useCallback(r=>{r&&t.onMount&&t.onMount(r),s&&(r?s.mount(r):s.unmount()),n&&(typeof n=="function"?n(r):gf(n)&&(n.current=r))},[s])}const dj=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pP="framerAppearId",A4="data-"+dj(pP),u4=S.createContext({});function mP(t,s,n,r,i){const{visualElement:c}=S.useContext(xx),A=S.useContext(t4),u=S.useContext(yx),d=S.useContext(sj).reducedMotion,h=S.useRef(null);r=r||A.renderer,!h.current&&r&&(h.current=r(t,{visualState:s,parent:c,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const o=h.current,m=S.useContext(u4);o&&!o.projection&&i&&(o.type==="html"||o.type==="svg")&&gP(h.current,n,i,m);const y=S.useRef(!1);S.useInsertionEffect(()=>{o&&y.current&&o.update(n,u)});const p=n[A4],j=S.useRef(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return cE(()=>{o&&(y.current=!0,window.MotionIsMounted=!0,o.updateFeatures(),o.scheduleRenderMicrotask(),j.current&&o.animationState&&o.animationState.animateChanges())}),S.useEffect(()=>{o&&(!j.current&&o.animationState&&o.animationState.animateChanges(),j.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),j.current=!1),o.enteringChildren=void 0)}),o}function gP(t,s,n,r){const{layoutId:i,layout:c,drag:A,dragConstraints:u,layoutScroll:d,layoutRoot:h,layoutCrossfade:o}=s;t.projection=new n(t.latestValues,s["data-framer-portal-id"]?void 0:h4(t.parent)),t.projection.setOptions({layoutId:i,layout:c,alwaysMeasureLayout:!!A||u&&gf(u),visualElement:t,animationType:typeof c=="string"?c:"both",initialPromotionConfig:r,crossfade:o,layoutScroll:d,layoutRoot:h})}function h4(t){if(t)return t.options.allowProjection!==!1?t.projection:h4(t.parent)}function z0(t,{forwardMotionProps:s=!1}={},n,r){n&&zM(n);const i=oj(t)?uP:AP;function c(u,d){let h;const o={...S.useContext(sj),...u,layoutId:yP(u)},{isStatic:m}=o,y=WM(u),p=i(u,m);if(!m&&U1){xP();const j=vP(o);h=j.MeasureLayout,y.visualElement=mP(t,p,o,r,j.ProjectionNode)}return e.jsxs(xx.Provider,{value:y,children:[h&&y.visualElement?e.jsx(h,{visualElement:y.visualElement,...o}):null,lP(t,u,fP(p,y.visualElement,d),p,m,s)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const A=S.forwardRef(c);return A[hP]=t,A}function yP({layoutId:t}){const s=S.useContext(R1).id;return s&&t!==void 0?s+"-"+t:t}function xP(t,s){S.useContext(t4).strict}function vP(t){const{drag:s,layout:n}=Rf;if(!s&&!n)return{};const r={...s,...n};return{MeasureLayout:s?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function bP(t,s){if(typeof Proxy>"u")return z0;const n=new Map,r=(c,A)=>z0(c,A,t,s),i=(c,A)=>r(c,A);return new Proxy(i,{get:(c,A)=>A==="create"?r:(n.has(A)||n.set(A,z0(A,void 0,t,s)),n.get(A))})}function f4({top:t,left:s,right:n,bottom:r}){return{x:{min:s,max:n},y:{min:t,max:r}}}function jP({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function wP(t,s){if(!s)return t;const n=s({x:t.left,y:t.top}),r=s({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function V0(t){return t===void 0||t===1}function Bb({scale:t,scaleX:s,scaleY:n}){return!V0(t)||!V0(s)||!V0(n)}function th(t){return Bb(t)||p4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function p4(t){return lS(t.x)||lS(t.y)}function lS(t){return t&&t!=="0%"}function $y(t,s,n){const r=t-n,i=s*r;return n+i}function cS(t,s,n,r,i){return i!==void 0&&(t=$y(t,i,r)),$y(t,n,r)+s}function Cb(t,s=0,n=1,r,i){t.min=cS(t.min,s,n,r,i),t.max=cS(t.max,s,n,r,i)}function m4(t,{x:s,y:n}){Cb(t.x,s.translate,s.scale,s.originPoint),Cb(t.y,n.translate,n.scale,n.originPoint)}const dS=.999999999999,AS=1.0000000000001;function SP(t,s,n,r=!1){const i=n.length;if(!i)return;s.x=s.y=1;let c,A;for(let u=0;u<i;u++){c=n[u],A=c.projectionDelta;const{visualElement:d}=c.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&c.options.layoutScroll&&c.scroll&&c!==c.root&&xf(t,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),A&&(s.x*=A.x.scale,s.y*=A.y.scale,m4(t,A)),r&&th(c.latestValues)&&xf(t,c.latestValues))}s.x<AS&&s.x>dS&&(s.x=1),s.y<AS&&s.y>dS&&(s.y=1)}function yf(t,s){t.min=t.min+s,t.max=t.max+s}function uS(t,s,n,r,i=.5){const c=xi(t.min,t.max,i);Cb(t,s,n,c,r)}function xf(t,s){uS(t.x,s.x,s.scaleX,s.scale,s.originX),uS(t.y,s.y,s.scaleY,s.scale,s.originY)}function g4(t,s){return f4(wP(t.getBoundingClientRect(),s))}function NP(t,s,n){const r=g4(t,n),{scroll:i}=s;return i&&(yf(r.x,i.offset.x),yf(r.y,i.offset.y)),r}const hS=()=>({translate:0,scale:1,origin:0,originPoint:0}),vf=()=>({x:hS(),y:hS()}),fS=()=>({min:0,max:0}),Oi=()=>({x:fS(),y:fS()}),Eb={current:null},y4={current:!1};function BP(){if(y4.current=!0,!!U1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>Eb.current=t.matches;t.addEventListener("change",s),s()}else Eb.current=!1}const CP=new WeakMap;function EP(t,s,n){for(const r in s){const i=s[r],c=n[r];if(Go(i))t.addValue(r,i);else if(Go(c))t.addValue(r,If(i,{owner:t}));else if(c!==i)if(t.hasValue(r)){const A=t.getValue(r);A.liveStyle===!0?A.jump(i):A.hasAnimated||A.set(i)}else{const A=t.getStaticValue(r);t.addValue(r,If(A!==void 0?A:i,{owner:t}))}}for(const r in n)s[r]===void 0&&t.removeValue(r);return s}const pS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class TP{scrapeMotionValuesFromProps(s,n,r){return{}}constructor({parent:s,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:c,visualState:A},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=X1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Nl.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,ui.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=A;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=h,this.parent=s,this.props=n,this.presenceContext=r,this.depth=s?s.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!c,this.isControllingVariants=bx(n),this.isVariantNode=n4(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:o,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in m){const p=m[y];d[y]!==void 0&&Go(p)&&p.set(d[y])}}mount(s){this.current=s,CP.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),y4.current||BP(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Eb.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),pu(this.notifyUpdate),pu(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const n=this.features[s];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,n){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const r=kf.has(s);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",A=>{this.latestValues[s]=A,this.props.onUpdate&&ui.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,s,n)),this.valueSubscriptions.set(s,()=>{i(),c&&c(),n.owner&&n.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in Rf){const n=Rf[s];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[s]&&i&&r(this.props)&&(this.features[s]=new i(this)),this.features[s]){const c=this.features[s];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Oi()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,n){this.latestValues[s]=n}update(s,n){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<pS.length;r++){const i=pS[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const c="on"+i,A=s[c];A&&(this.propEventSubscriptions[i]=this.on(i,A))}this.prevMotionValues=EP(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(s),()=>n.variantChildren.delete(s)}addValue(s,n){const r=this.values.get(s);n!==r&&(r&&this.removeValue(s),this.bindToMotionValue(s,n),this.values.set(s,n),this.latestValues[s]=n.get())}removeValue(s){this.values.delete(s);const n=this.valueSubscriptions.get(s);n&&(n(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,n){if(this.props.values&&this.props.values[s])return this.props.values[s];let r=this.values.get(s);return r===void 0&&n!==void 0&&(r=If(n===null?void 0:n,{owner:this}),this.addValue(s,r)),r}readValue(s,n){let r=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return r!=null&&(typeof r=="string"&&(dE(r)||uE(r))?r=parseFloat(r):!QM(r)&&mu.test(n)&&(r=GE(s,n)),this.setBaseTarget(s,Go(r)?r.get():r)),Go(r)?r.get():r}setBaseTarget(s,n){this.baseTarget[s]=n}getBaseTarget(s){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const c=lj(this.props,n,this.presenceContext?.custom);c&&(r=c[s])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,s);return i!==void 0&&!Go(i)?i:this.initialValues[s]!==void 0&&r===void 0?void 0:this.baseTarget[s]}on(s,n){return this.events[s]||(this.events[s]=new M1),this.events[s].add(n)}notify(s,...n){this.events[s]&&this.events[s].notify(...n)}scheduleRenderMicrotask(){ej.render(this.render)}}class x4 extends TP{constructor(){super(...arguments),this.KeyframeResolver=NM}sortInstanceNodePosition(s,n){return s.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(s,n){return s.style?s.style[n]:void 0}removeValueFromRenderState(s,{vars:n,style:r}){delete n[s],delete r[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;Go(s)&&(this.childSubscription=s.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function v4(t,{style:s,vars:n},r,i){const c=t.style;let A;for(A in s)c[A]=s[A];i?.applyProjectionStyles(c,r);for(A in n)c.setProperty(A,n[A])}function FP(t){return window.getComputedStyle(t)}class IP extends x4{constructor(){super(...arguments),this.type="html",this.renderInstance=v4}readValueFromInstance(s,n){if(kf.has(n))return this.projection?.isProjecting?xb(n):z_(s,n);{const r=FP(s),i=(H1(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(s,{transformPagePoint:n}){return g4(s,n)}build(s,n,r){aj(s,n,r.transformTemplate)}scrapeMotionValuesFromProps(s,n,r){return cj(s,n,r)}}const b4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function RP(t,s,n,r){v4(t,s,void 0,r);for(const i in s.attrs)t.setAttribute(b4.has(i)?i:dj(i),s.attrs[i])}class OP extends x4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Oi}getBaseTargetFromProps(s,n){return s[n]}readValueFromInstance(s,n){if(kf.has(n)){const r=$E(n);return r&&r.default||0}return n=b4.has(n)?n:dj(n),s.getAttribute(n)}scrapeMotionValuesFromProps(s,n,r){return d4(s,n,r)}build(s,n,r){i4(s,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(s,n,r,i){RP(s,n,r,i)}mount(s){this.isSVGTag=l4(s.tagName),super.mount(s)}}const UP=(t,s)=>oj(t)?new OP(s):new IP(s,{allowProjection:t!==S.Fragment});function Sf(t,s,n){const r=t.getProps();return lj(r,s,n!==void 0?n:r.custom,t)}const Tb=t=>Array.isArray(t);function LP(t,s,n){t.hasValue(s)?t.getValue(s).set(n):t.addValue(s,If(n))}function DP(t){return Tb(t)?t[t.length-1]||0:t}function QP(t,s){const n=Sf(t,s);let{transitionEnd:r={},transition:i={},...c}=n||{};c={...c,...r};for(const A in c){const u=DP(c[A]);LP(t,A,u)}}function _P(t){return!!(Go(t)&&t.add)}function Fb(t,s){const n=t.getValue("willChange");if(_P(n))return n.add(s);if(!n&&fA.WillChange){const r=new fA.WillChange("auto");t.addValue("willChange",r),r.add(s)}}function j4(t){return t.props[A4]}const MP=t=>t!==null;function PP(t,{repeat:s,repeatType:n="loop"},r){const i=t.filter(MP),c=s&&n!=="loop"&&s%2===1?0:i.length-1;return i[c]}const kP={type:"spring",stiffness:500,damping:25,restSpeed:10},HP=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),KP={type:"keyframes",duration:.8},zP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},VP=(t,{keyframes:s})=>s.length>2?KP:kf.has(t)?t.startsWith("scale")?HP(s[1]):kP:zP;function $P({when:t,delay:s,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:c,repeatType:A,repeatDelay:u,from:d,elapsed:h,...o}){return!!Object.keys(o).length}const Aj=(t,s,n,r={},i,c)=>A=>{const u=J1(r,t)||{},d=u.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Od(d);const o={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:s.getVelocity(),...u,delay:-h,onUpdate:y=>{s.set(y),u.onUpdate&&u.onUpdate(y)},onComplete:()=>{A(),u.onComplete&&u.onComplete()},name:t,motionValue:s,element:c?void 0:i};$P(u)||Object.assign(o,VP(t,o)),o.duration&&(o.duration=Od(o.duration)),o.repeatDelay&&(o.repeatDelay=Od(o.repeatDelay)),o.from!==void 0&&(o.keyframes[0]=o.from);let m=!1;if((o.type===!1||o.duration===0&&!o.repeatDelay)&&(Sb(o),o.delay===0&&(m=!0)),(fA.instantAnimations||fA.skipAnimations)&&(m=!0,Sb(o),o.delay=0),o.allowFlatten=!u.type&&!u.ease,m&&!c&&s.get()!==void 0){const y=PP(o.keyframes,u);if(y!==void 0){ui.update(()=>{o.onUpdate(y),o.onComplete()});return}}return u.isSync?new Y1(o):new hM(o)};function GP({protectedKeys:t,needsAnimating:s},n){const r=t.hasOwnProperty(n)&&s[n]!==!0;return s[n]=!1,r}function w4(t,s,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:c=t.getDefaultTransition(),transitionEnd:A,...u}=s;r&&(c=r);const d=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const o in u){const m=t.getValue(o,t.latestValues[o]??null),y=u[o];if(y===void 0||h&&GP(h,o))continue;const p={delay:n,...J1(c||{},o)},j=m.get();if(j!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===j&&!p.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const B=j4(t);if(B){const L=window.MotionHandoffAnimation(B,o,ui);L!==null&&(p.startTime=L,b=!0)}}Fb(t,o),m.start(Aj(o,m,y,t.shouldReduceMotion&&KE.has(o)?{type:!1}:p,t,b));const w=m.animation;w&&d.push(w)}return A&&Promise.all(d).then(()=>{ui.update(()=>{A&&QP(t,A)})}),d}function S4(t,s,n,r=0,i=1){const c=Array.from(t).sort((h,o)=>h.sortNodePosition(o)).indexOf(s),A=t.size,u=(A-1)*r;return typeof n=="function"?n(c,A):i===1?c*r:u-c*r}function Ib(t,s,n={}){const r=Sf(t,s,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const c=r?()=>Promise.all(w4(t,r,n)):()=>Promise.resolve(),A=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:o,staggerDirection:m}=i;return qP(t,s,d,h,o,m,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[d,h]=u==="beforeChildren"?[c,A]:[A,c];return d().then(()=>h())}else return Promise.all([c(),A(n.delay)])}function qP(t,s,n=0,r=0,i=0,c=1,A){const u=[];for(const d of t.variantChildren)d.notify("AnimationStart",s),u.push(Ib(d,s,{...A,delay:n+(typeof r=="function"?0:r)+S4(t.variantChildren,d,r,i,c)}).then(()=>d.notify("AnimationComplete",s)));return Promise.all(u)}function WP(t,s,n={}){t.notify("AnimationStart",s);let r;if(Array.isArray(s)){const i=s.map(c=>Ib(t,c,n));r=Promise.all(i)}else if(typeof s=="string")r=Ib(t,s,n);else{const i=typeof s=="function"?Sf(t,s,n.custom):s;r=Promise.all(w4(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",s)})}function N4(t,s){if(!Array.isArray(s))return!1;const n=s.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(s[r]!==t[r])return!1;return!0}const YP=rj.length;function B4(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?B4(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const s={};for(let n=0;n<YP;n++){const r=rj[n],i=t.props[r];(fm(i)||i===!1)&&(s[r]=i)}return s}const XP=[...nj].reverse(),JP=nj.length;function ZP(t){return s=>Promise.all(s.map(({animation:n,options:r})=>WP(t,n,r)))}function e8(t){let s=ZP(t),n=mS(),r=!0;const i=d=>(h,o)=>{const m=Sf(t,o,d==="exit"?t.presenceContext?.custom:void 0);if(m){const{transition:y,transitionEnd:p,...j}=m;h={...h,...j,...p}}return h};function c(d){s=d(t)}function A(d){const{props:h}=t,o=B4(t.parent)||{},m=[],y=new Set;let p={},j=1/0;for(let w=0;w<JP;w++){const B=XP[w],L=n[B],Q=h[B]!==void 0?h[B]:o[B],k=fm(Q),z=B===d?L.isActive:null;z===!1&&(j=w);let J=Q===o[B]&&Q!==h[B]&&k;if(J&&r&&t.manuallyAnimateOnMount&&(J=!1),L.protectedKeys={...p},!L.isActive&&z===null||!Q&&!L.prevProp||vx(Q)||typeof Q=="boolean")continue;const $=t8(L.prevProp,Q);let q=$||B===d&&L.isActive&&!J&&k||w>j&&k,X=!1;const fe=Array.isArray(Q)?Q:[Q];let ee=fe.reduce(i(B),{});z===!1&&(ee={});const{prevResolvedValues:le={}}=L,ue={...le,...ee},te=oe=>{q=!0,y.has(oe)&&(X=!0,y.delete(oe)),L.needsAnimating[oe]=!0;const se=t.getValue(oe);se&&(se.liveStyle=!1)};for(const oe in ue){const se=ee[oe],xe=le[oe];if(p.hasOwnProperty(oe))continue;let Me=!1;Tb(se)&&Tb(xe)?Me=!N4(se,xe):Me=se!==xe,Me?se!=null?te(oe):y.add(oe):se!==void 0&&y.has(oe)?te(oe):L.protectedKeys[oe]=!0}L.prevProp=Q,L.prevResolvedValues=ee,L.isActive&&(p={...p,...ee}),r&&t.blockInitialAnimation&&(q=!1);const re=J&&$;q&&(!re||X)&&m.push(...fe.map(oe=>{const se={type:B};if(typeof oe=="string"&&r&&!re&&t.manuallyAnimateOnMount&&t.parent){const{parent:xe}=t,Me=Sf(xe,oe);if(xe.enteringChildren&&Me){const{delayChildren:me}=Me.transition||{};se.delay=S4(xe.enteringChildren,t,me)}}return{animation:oe,options:se}}))}if(y.size){const w={};if(typeof h.initial!="boolean"){const B=Sf(t,Array.isArray(h.initial)?h.initial[0]:h.initial);B&&B.transition&&(w.transition=B.transition)}y.forEach(B=>{const L=t.getBaseTarget(B),Q=t.getValue(B);Q&&(Q.liveStyle=!0),w[B]=L??null}),m.push({animation:w})}let b=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?s(m):Promise.resolve()}function u(d,h){if(n[d].isActive===h)return Promise.resolve();t.variantChildren?.forEach(m=>m.animationState?.setActive(d,h)),n[d].isActive=h;const o=A(d);for(const m in n)n[m].protectedKeys={};return o}return{animateChanges:A,setActive:u,setAnimateFunction:c,getState:()=>n,reset:()=>{n=mS()}}}function t8(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!N4(s,t):!1}function eh(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mS(){return{animate:eh(!0),whileInView:eh(),whileHover:eh(),whileTap:eh(),whileDrag:eh(),whileFocus:eh(),exit:eh()}}class yu{constructor(s){this.isMounted=!1,this.node=s}update(){}}class s8 extends yu{constructor(s){super(s),s.animationState||(s.animationState=e8(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();vx(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:n}=this.node.prevProps||{};s!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let n8=0;class r8 extends yu{constructor(){super(...arguments),this.id=n8++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===r)return;const i=this.node.animationState.setActive("exit",!s);n&&!s&&i.then(()=>{n(this.id)})}mount(){const{register:s,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const a8={animation:{Feature:s8},exit:{Feature:r8}};function mm(t,s,n,r={passive:!0}){return t.addEventListener(s,n,r),()=>t.removeEventListener(s,n)}function Bm(t){return{point:{x:t.pageX,y:t.pageY}}}const i8=t=>s=>tj(s)&&t(s,Bm(s));function Yp(t,s,n,r){return mm(t,s,i8(n),r)}const C4=1e-4,o8=1-C4,l8=1+C4,E4=.01,c8=0-E4,d8=0+E4;function ll(t){return t.max-t.min}function A8(t,s,n){return Math.abs(t-s)<=n}function gS(t,s,n,r=.5){t.origin=r,t.originPoint=xi(s.min,s.max,t.origin),t.scale=ll(n)/ll(s),t.translate=xi(n.min,n.max,t.origin)-t.originPoint,(t.scale>=o8&&t.scale<=l8||isNaN(t.scale))&&(t.scale=1),(t.translate>=c8&&t.translate<=d8||isNaN(t.translate))&&(t.translate=0)}function Xp(t,s,n,r){gS(t.x,s.x,n.x,r?r.originX:void 0),gS(t.y,s.y,n.y,r?r.originY:void 0)}function yS(t,s,n){t.min=n.min+s.min,t.max=t.min+ll(s)}function u8(t,s,n){yS(t.x,s.x,n.x),yS(t.y,s.y,n.y)}function xS(t,s,n){t.min=s.min-n.min,t.max=t.min+ll(s)}function Jp(t,s,n){xS(t.x,s.x,n.x),xS(t.y,s.y,n.y)}function bc(t){return[t("x"),t("y")]}const T4=({current:t})=>t?t.ownerDocument.defaultView:null,vS=(t,s)=>Math.abs(t-s);function h8(t,s){const n=vS(t.x,s.x),r=vS(t.y,s.y);return Math.sqrt(n**2+r**2)}class F4{constructor(s,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:c=!1,distanceThreshold:A=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=G0(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,j=h8(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!j)return;const{point:b}=y,{timestamp:w}=go;this.history.push({...b,timestamp:w});const{onStart:B,onMove:L}=this.handlers;p||(B&&B(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,y)},this.handlePointerMove=(y,p)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=$0(p,this.transformPagePoint),ui.update(this.updatePoint,!0)},this.handlePointerUp=(y,p)=>{this.end();const{onEnd:j,onSessionEnd:b,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=G0(y.type==="pointercancel"?this.lastMoveEventInfo:$0(p,this.transformPagePoint),this.history);this.startEvent&&j&&j(y,B),b&&b(y,B)},!tj(s))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=A,this.contextWindow=i||window;const u=Bm(s),d=$0(u,this.transformPagePoint),{point:h}=d,{timestamp:o}=go;this.history=[{...h,timestamp:o}];const{onSessionStart:m}=n;m&&m(s,G0(d,this.history)),this.removeListeners=wm(Yp(this.contextWindow,"pointermove",this.handlePointerMove),Yp(this.contextWindow,"pointerup",this.handlePointerUp),Yp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),pu(this.updatePoint)}}function $0(t,s){return s?{point:s(t.point)}:t}function bS(t,s){return{x:t.x-s.x,y:t.y-s.y}}function G0({point:t},s){return{point:t,delta:bS(t,I4(s)),offset:bS(t,f8(s)),velocity:p8(s,.1)}}function f8(t){return t[0]}function I4(t){return t[t.length-1]}function p8(t,s){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=I4(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Od(s)));)n--;if(!r)return{x:0,y:0};const c=Sc(i.timestamp-r.timestamp);if(c===0)return{x:0,y:0};const A={x:(i.x-r.x)/c,y:(i.y-r.y)/c};return A.x===1/0&&(A.x=0),A.y===1/0&&(A.y=0),A}function m8(t,{min:s,max:n},r){return s!==void 0&&t<s?t=r?xi(s,t,r.min):Math.max(t,s):n!==void 0&&t>n&&(t=r?xi(n,t,r.max):Math.min(t,n)),t}function jS(t,s,n){return{min:s!==void 0?t.min+s:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function g8(t,{top:s,left:n,bottom:r,right:i}){return{x:jS(t.x,n,i),y:jS(t.y,s,r)}}function wS(t,s){let n=s.min-t.min,r=s.max-t.max;return s.max-s.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function y8(t,s){return{x:wS(t.x,s.x),y:wS(t.y,s.y)}}function x8(t,s){let n=.5;const r=ll(t),i=ll(s);return i>r?n=Am(s.min,s.max-r,t.min):r>i&&(n=Am(t.min,t.max-i,s.min)),hA(0,1,n)}function v8(t,s){const n={};return s.min!==void 0&&(n.min=s.min-t.min),s.max!==void 0&&(n.max=s.max-t.min),n}const Rb=.35;function b8(t=Rb){return t===!1?t=0:t===!0&&(t=Rb),{x:SS(t,"left","right"),y:SS(t,"top","bottom")}}function SS(t,s,n){return{min:NS(t,s),max:NS(t,n)}}function NS(t,s){return typeof t=="number"?t:t[s]||0}const j8=new WeakMap;class w8{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Oi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const c=m=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Bm(m).point)},A=(m,y)=>{const{drag:p,dragPropagation:j,onDragStart:b}=this.getProps();if(p&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=TM(p),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bc(B=>{let L=this.getAxisMotionValue(B).get()||0;if(Ud.test(L)){const{projection:Q}=this.visualElement;if(Q&&Q.layout){const k=Q.layout.layoutBox[B];k&&(L=ll(k)*(parseFloat(L)/100))}}this.originPoint[B]=L}),b&&ui.postRender(()=>b(m,y)),Fb(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},u=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y;const{dragPropagation:p,dragDirectionLock:j,onDirectionLock:b,onDrag:w}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:B}=y;if(j&&this.currentDirection===null){this.currentDirection=S8(B),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",y.point,B),this.updateAxis("y",y.point,B),this.visualElement.render(),w&&w(m,y)},d=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y,this.stop(m,y),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>bc(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:o}=this.getProps();this.panSession=new F4(s,{onSessionStart:c,onStart:A,onMove:u,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:o,distanceThreshold:r,contextWindow:T4(this.visualElement)})}stop(s,n){const r=s||this.latestPointerEvent,i=n||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!i||!r)return;const{velocity:A}=i;this.startAnimation(A);const{onDragEnd:u}=this.getProps();u&&ui.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:s,animationState:n}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(s,n,r){const{drag:i}=this.getProps();if(!r||!kg(s,i,this.currentDirection))return;const c=this.getAxisMotionValue(s);let A=this.originPoint[s]+r[s];this.constraints&&this.constraints[s]&&(A=m8(A,this.constraints[s],this.elastic[s])),c.set(A)}resolveConstraints(){const{dragConstraints:s,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;s&&gf(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&r?this.constraints=g8(r.layoutBox,s):this.constraints=!1,this.elastic=b8(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&bc(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=v8(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:n}=this.getProps();if(!s||!gf(s))return!1;const r=s.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const c=NP(r,i.root,this.visualElement.getTransformPagePoint());let A=y8(i.layout.layoutBox,c);if(n){const u=n(jP(A));this.hasMutatedConstraints=!!u,u&&(A=f4(u))}return A}startAnimation(s){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:c,dragSnapToOrigin:A,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},h=bc(o=>{if(!kg(o,n,this.currentDirection))return;let m=d&&d[o]||{};A&&(m={min:0,max:0});const y=i?200:1e6,p=i?40:1e7,j={type:"inertia",velocity:r?s[o]:0,bounceStiffness:y,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...c,...m};return this.startAxisValueAnimation(o,j)});return Promise.all(h).then(u)}startAxisValueAnimation(s,n){const r=this.getAxisMotionValue(s);return Fb(this.visualElement,s),r.start(Aj(s,r,0,n,this.visualElement,!1))}stopAnimation(){bc(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){bc(s=>this.getAxisMotionValue(s).animation?.pause())}getAnimationState(s){return this.getAxisMotionValue(s).animation?.state}getAxisMotionValue(s){const n=`_drag${s.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(s,(r.initial?r.initial[s]:void 0)||0)}snapToCursor(s){bc(n=>{const{drag:r}=this.getProps();if(!kg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,c=this.getAxisMotionValue(n);if(i&&i.layout){const{min:A,max:u}=i.layout.layoutBox[n];c.set(s[n]-xi(A,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!gf(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};bc(A=>{const u=this.getAxisMotionValue(A);if(u&&this.constraints!==!1){const d=u.get();i[A]=x8({min:d,max:d},this.constraints[A])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),bc(A=>{if(!kg(A,s,null))return;const u=this.getAxisMotionValue(A),{min:d,max:h}=this.constraints[A];u.set(xi(d,h,i[A]))})}addListeners(){if(!this.visualElement.current)return;j8.set(this.visualElement,this);const s=this.visualElement.current,n=Yp(s,"pointerdown",d=>{const{drag:h,dragListener:o=!0}=this.getProps();h&&o&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();gf(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,c=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ui.read(r);const A=mm(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(bc(o=>{const m=this.getAxisMotionValue(o);m&&(this.originPoint[o]+=d[o].translate,m.set(m.get()+d[o].translate))}),this.visualElement.render())}));return()=>{A(),n(),c(),u&&u()}}getProps(){const s=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:c=!1,dragElastic:A=Rb,dragMomentum:u=!0}=s;return{...s,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:c,dragElastic:A,dragMomentum:u}}}function kg(t,s,n){return(s===!0||s===t)&&(n===null||n===t)}function S8(t,s=10){let n=null;return Math.abs(t.y)>s?n="y":Math.abs(t.x)>s&&(n="x"),n}class N8 extends yu{constructor(s){super(s),this.removeGroupControls=Nc,this.removeListeners=Nc,this.controls=new w8(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nc}unmount(){this.removeGroupControls(),this.removeListeners()}}const BS=t=>(s,n)=>{t&&ui.postRender(()=>t(s,n))};class B8 extends yu{constructor(){super(...arguments),this.removePointerDownListener=Nc}onPointerDown(s){this.session=new F4(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:T4(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:BS(s),onStart:BS(n),onMove:r,onEnd:(c,A)=>{delete this.session,i&&ui.postRender(()=>i(c,A))}}}mount(){this.removePointerDownListener=Yp(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const py={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function CS(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const Dp={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if($n.test(t))t=parseFloat(t);else return t;const n=CS(t,s.target.x),r=CS(t,s.target.y);return`${n}% ${r}%`}},C8={correct:(t,{treeScale:s,projectionDelta:n})=>{const r=t,i=mu.parse(t);if(i.length>5)return r;const c=mu.createTransformer(t),A=typeof i[0]!="number"?1:0,u=n.x.scale*s.x,d=n.y.scale*s.y;i[0+A]/=u,i[1+A]/=d;const h=xi(u,d,.5);return typeof i[2+A]=="number"&&(i[2+A]/=h),typeof i[3+A]=="number"&&(i[3+A]/=h),c(i)}};let q0=!1;class E8 extends S.Component{componentDidMount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:c}=s;YM(T8),c&&(n.group&&n.group.add(c),r&&r.register&&i&&r.register(c),q0&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),py.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:n,visualElement:r,drag:i,isPresent:c}=this.props,{projection:A}=r;return A&&(A.isPresent=c,q0=!0,i||s.layoutDependency!==n||n===void 0||s.isPresent!==c?A.willUpdate():this.safeToRemove(),s.isPresent!==c&&(c?A.promote():A.relegate()||ui.postRender(()=>{const u=A.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),ej.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=s;q0=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function R4(t){const[s,n]=e4(),r=S.useContext(R1);return e.jsx(E8,{...t,layoutGroup:r,switchLayoutGroup:S.useContext(u4),isPresent:s,safeToRemove:n})}const T8={borderRadius:{...Dp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dp,borderTopRightRadius:Dp,borderBottomLeftRadius:Dp,borderBottomRightRadius:Dp,boxShadow:C8};function F8(t,s,n){const r=Go(t)?t:If(t);return r.start(Aj("",r,s,n)),r.animation}const I8=(t,s)=>t.depth-s.depth;class R8{constructor(){this.children=[],this.isDirty=!1}add(s){L1(this.children,s),this.isDirty=!0}remove(s){D1(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(I8),this.isDirty=!1,this.children.forEach(s)}}function O8(t,s){const n=Nl.now(),r=({timestamp:i})=>{const c=i-n;c>=s&&(pu(r),t(c-s))};return ui.setup(r,!0),()=>pu(r)}const O4=["TopLeft","TopRight","BottomLeft","BottomRight"],U8=O4.length,ES=t=>typeof t=="string"?parseFloat(t):t,TS=t=>typeof t=="number"||$n.test(t);function L8(t,s,n,r,i,c){i?(t.opacity=xi(0,n.opacity??1,D8(r)),t.opacityExit=xi(s.opacity??1,0,Q8(r))):c&&(t.opacity=xi(s.opacity??1,n.opacity??1,r));for(let A=0;A<U8;A++){const u=`border${O4[A]}Radius`;let d=FS(s,u),h=FS(n,u);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||TS(d)===TS(h)?(t[u]=Math.max(xi(ES(d),ES(h),r),0),(Ud.test(h)||Ud.test(d))&&(t[u]+="%")):t[u]=h}(s.rotate||n.rotate)&&(t.rotate=xi(s.rotate||0,n.rotate||0,r))}function FS(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const D8=U4(0,.5,vE),Q8=U4(.5,.95,Nc);function U4(t,s,n){return r=>r<t?0:r>s?1:n(Am(t,s,r))}function IS(t,s){t.min=s.min,t.max=s.max}function xc(t,s){IS(t.x,s.x),IS(t.y,s.y)}function RS(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function OS(t,s,n,r,i){return t-=s,t=$y(t,1/n,r),i!==void 0&&(t=$y(t,1/i,r)),t}function _8(t,s=0,n=1,r=.5,i,c=t,A=t){if(Ud.test(s)&&(s=parseFloat(s),s=xi(A.min,A.max,s/100)-A.min),typeof s!="number")return;let u=xi(c.min,c.max,r);t===c&&(u-=s),t.min=OS(t.min,s,n,u,i),t.max=OS(t.max,s,n,u,i)}function US(t,s,[n,r,i],c,A){_8(t,s[n],s[r],s[i],s.scale,c,A)}const M8=["x","scaleX","originX"],P8=["y","scaleY","originY"];function LS(t,s,n,r){US(t.x,s,M8,n?n.x:void 0,r?r.x:void 0),US(t.y,s,P8,n?n.y:void 0,r?r.y:void 0)}function DS(t){return t.translate===0&&t.scale===1}function L4(t){return DS(t.x)&&DS(t.y)}function QS(t,s){return t.min===s.min&&t.max===s.max}function k8(t,s){return QS(t.x,s.x)&&QS(t.y,s.y)}function _S(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function D4(t,s){return _S(t.x,s.x)&&_S(t.y,s.y)}function MS(t){return ll(t.x)/ll(t.y)}function PS(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class H8{constructor(){this.members=[]}add(s){L1(this.members,s),s.scheduleRender()}remove(s){if(D1(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(s){const n=this.members.findIndex(i=>s===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const c=this.members[i];if(c.isPresent!==!1){r=c;break}}return r?(this.promote(r),!0):!1}promote(s,n){const r=this.lead;if(s!==r&&(this.prevLead=r,this.lead=s,s.show(),r)){r.instance&&r.scheduleRender(),s.scheduleRender(),s.resumeFrom=r,n&&(s.resumeFrom.preserveOpacity=!0),r.snapshot&&(s.snapshot=r.snapshot,s.snapshot.latestValues=r.animationValues||r.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:i}=s.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:n,resumingFrom:r}=s;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function K8(t,s,n){let r="";const i=t.x.translate/s.x,c=t.y.translate/s.y,A=n?.z||0;if((i||c||A)&&(r=`translate3d(${i}px, ${c}px, ${A}px) `),(s.x!==1||s.y!==1)&&(r+=`scale(${1/s.x}, ${1/s.y}) `),n){const{transformPerspective:h,rotate:o,rotateX:m,rotateY:y,skewX:p,skewY:j}=n;h&&(r=`perspective(${h}px) ${r}`),o&&(r+=`rotate(${o}deg) `),m&&(r+=`rotateX(${m}deg) `),y&&(r+=`rotateY(${y}deg) `),p&&(r+=`skewX(${p}deg) `),j&&(r+=`skewY(${j}deg) `)}const u=t.x.scale*s.x,d=t.y.scale*s.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const W0=["","X","Y","Z"],z8=1e3;let V8=0;function Y0(t,s,n,r){const{latestValues:i}=s;i[t]&&(n[t]=i[t],s.setStaticValue(t,0),r&&(r[t]=0))}function Q4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const n=j4(s);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:c}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ui,!(i||c))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Q4(r)}function _4({attachResizeListener:t,defaultParent:s,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(A={},u=s?.()){this.id=V8++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(q8),this.nodes.forEach(J8),this.nodes.forEach(Z8),this.nodes.forEach(W8)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=A,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new R8)}addEventListener(A,u){return this.eventHandlers.has(A)||this.eventHandlers.set(A,new M1),this.eventHandlers.get(A).add(u)}notifyListeners(A,...u){const d=this.eventHandlers.get(A);d&&d.notify(...u)}hasListeners(A){return this.eventHandlers.has(A)}mount(A){if(this.instance)return;this.isSVG=ZE(A)&&!LM(A),this.instance=A;const{layoutId:u,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(A),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),t){let o,m=0;const y=()=>this.root.updateBlockedByResize=!1;ui.read(()=>{m=window.innerWidth}),t(A,()=>{const p=window.innerWidth;p!==m&&(m=p,this.root.updateBlockedByResize=!0,o&&o(),o=O8(y,250),py.hasAnimatedSinceResize&&(py.hasAnimatedSinceResize=!1,this.nodes.forEach(KS)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||d)&&this.addEventListener("didUpdate",({delta:o,hasLayoutChanged:m,hasRelativeLayoutChanged:y,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||h.getDefaultTransition()||rk,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=h.getProps(),B=!this.targetLayout||!D4(this.targetLayout,p),L=!m&&y;if(this.options.layoutRoot||this.resumeFrom||L||m&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Q={...J1(j,"layout"),onPlay:b,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(Q.delay=0,Q.type=!1),this.startAnimation(Q),this.setAnimationOrigin(o,L)}else m||KS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const A=this.getStack();A&&A.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),pu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ek),this.animationId++)}getTransformTemplate(){const{visualElement:A}=this.options;return A&&A.getProps().transformTemplate}willUpdate(A=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Q4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let o=0;o<this.path.length;o++){const m=this.path[o];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),A&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(HS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(X8),this.nodes.forEach($8),this.nodes.forEach(G8)):this.nodes.forEach(HS),this.clearAllSnapshots();const u=Nl.now();go.delta=hA(0,1e3/60,u-go.timestamp),go.timestamp=u,go.isProcessing=!0,_0.update.process(go),_0.preRender.process(go),_0.render.process(go),go.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ej.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Y8),this.sharedNodes.forEach(tk)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ui.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ui.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ll(this.snapshot.measuredBox.x)&&!ll(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const A=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Oi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,A?A.layoutBox:void 0)}updateScroll(A="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===A&&(u=!1),u&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:A,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const A=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!L4(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,o=h!==this.prevTransformTemplateValue;A&&this.instance&&(u||th(this.latestValues)||o)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(A=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return A&&(d=this.removeTransform(d)),ak(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:A}=this.options;if(!A)return Oi();const u=A.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(ik))){const{scroll:h}=this.root;h&&(yf(u.x,h.offset.x),yf(u.y,h.offset.y))}return u}removeElementScroll(A){const u=Oi();if(xc(u,A),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:o,options:m}=h;h!==this.root&&o&&m.layoutScroll&&(o.wasRoot&&xc(u,A),yf(u.x,o.offset.x),yf(u.y,o.offset.y))}return u}applyTransform(A,u=!1){const d=Oi();xc(d,A);for(let h=0;h<this.path.length;h++){const o=this.path[h];!u&&o.options.layoutScroll&&o.scroll&&o!==o.root&&xf(d,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),th(o.latestValues)&&xf(d,o.latestValues)}return th(this.latestValues)&&xf(d,this.latestValues),d}removeTransform(A){const u=Oi();xc(u,A);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!th(h.latestValues))continue;Bb(h.latestValues)&&h.updateSnapshot();const o=Oi(),m=h.measurePageBox();xc(o,m),LS(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,o)}return th(this.latestValues)&&LS(u,this.latestValues),u}setTargetDelta(A){this.targetDelta=A,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(A){this.options={...this.options,...A,crossfade:A.crossfade!==void 0?A.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==go.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(A=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(A||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:o,layoutId:m}=this.options;if(!(!this.layout||!(o||m))){if(this.resolvedRelativeTargetAt=go.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Oi(),this.relativeTargetOrigin=Oi(),Jp(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),xc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Oi(),this.targetWithTransforms=Oi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),u8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xc(this.target,this.layout.layoutBox),m4(this.target,this.targetDelta)):xc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Oi(),this.relativeTargetOrigin=Oi(),Jp(this.relativeTargetOrigin,this.target,y.target),xc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Bb(this.parent.latestValues)||p4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const A=this.getLead(),u=!!this.resumingFrom||this!==A;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===go.timestamp&&(d=!1),d)return;const{layout:h,layoutId:o}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||o))return;xc(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;SP(this.layoutCorrected,this.treeScale,this.path,u),A.layout&&!A.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(A.target=A.layout.layoutBox,A.targetWithTransforms=Oi());const{target:p}=A;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(RS(this.prevProjectionDelta.x,this.projectionDelta.x),RS(this.prevProjectionDelta.y,this.projectionDelta.y)),Xp(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!PS(this.projectionDelta.x,this.prevProjectionDelta.x)||!PS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(A=!0){if(this.options.visualElement?.scheduleRender(),A){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vf(),this.projectionDelta=vf(),this.projectionDeltaWithTransform=vf()}setAnimationOrigin(A,u=!1){const d=this.snapshot,h=d?d.latestValues:{},o={...this.latestValues},m=vf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const y=Oi(),p=d?d.source:void 0,j=this.layout?this.layout.source:void 0,b=p!==j,w=this.getStack(),B=!w||w.members.length<=1,L=!!(b&&!B&&this.options.crossfade===!0&&!this.path.some(nk));this.animationProgress=0;let Q;this.mixTargetDelta=k=>{const z=k/1e3;zS(m.x,A.x,z),zS(m.y,A.y,z),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jp(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sk(this.relativeTarget,this.relativeTargetOrigin,y,z),Q&&k8(this.relativeTarget,Q)&&(this.isProjectionDirty=!1),Q||(Q=Oi()),xc(Q,this.relativeTarget)),b&&(this.animationValues=o,L8(o,h,this.latestValues,z,L,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(A){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(pu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ui.update(()=>{py.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=If(0)),this.currentAnimation=F8(this.motionValue,[0,1e3],{...A,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),A.onUpdate&&A.onUpdate(u)},onStop:()=>{},onComplete:()=>{A.onComplete&&A.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const A=this.getStack();A&&A.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(z8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const A=this.getLead();let{targetWithTransforms:u,target:d,layout:h,latestValues:o}=A;if(!(!u||!d||!h)){if(this!==A&&this.layout&&h&&M4(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Oi();const m=ll(this.layout.layoutBox.x);d.x.min=A.target.x.min,d.x.max=d.x.min+m;const y=ll(this.layout.layoutBox.y);d.y.min=A.target.y.min,d.y.max=d.y.min+y}xc(u,d),xf(u,o),Xp(this.projectionDeltaWithTransform,this.layoutCorrected,u,o)}}registerSharedNode(A,u){this.sharedNodes.has(A)||this.sharedNodes.set(A,new H8),this.sharedNodes.get(A).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const A=this.getStack();return A?A.lead===this:!0}getLead(){const{layoutId:A}=this.options;return A?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:A}=this.options;return A?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:A}=this.options;if(A)return this.root.sharedNodes.get(A)}promote({needsReset:A,transition:u,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),A&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const A=this.getStack();return A?A.relegate(this):!1}resetSkewAndRotation(){const{visualElement:A}=this.options;if(!A)return;let u=!1;const{latestValues:d}=A;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const h={};d.z&&Y0("z",A,h,this.animationValues);for(let o=0;o<W0.length;o++)Y0(`rotate${W0[o]}`,A,h,this.animationValues),Y0(`skew${W0[o]}`,A,h,this.animationValues);A.render();for(const o in h)A.setStaticValue(o,h[o]),this.animationValues&&(this.animationValues[o]=h[o]);A.scheduleRender()}applyProjectionStyles(A,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){A.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,A.visibility="",A.opacity="",A.pointerEvents=fy(u?.pointerEvents)||"",A.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=fy(u?.pointerEvents)||""),this.hasProjected&&!th(this.latestValues)&&(A.transform=d?d({},""):"none",this.hasProjected=!1);return}A.visibility="";const o=h.animationValues||h.latestValues;this.applyTransformsToTarget();let m=K8(this.projectionDeltaWithTransform,this.treeScale,o);d&&(m=d(o,m)),A.transform=m;const{x:y,y:p}=this.projectionDelta;A.transformOrigin=`${y.origin*100}% ${p.origin*100}% 0`,h.animationValues?A.opacity=h===this?o.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:A.opacity=h===this?o.opacity!==void 0?o.opacity:"":o.opacityExit!==void 0?o.opacityExit:0;for(const j in pm){if(o[j]===void 0)continue;const{correct:b,applyTo:w,isCSSVariable:B}=pm[j],L=m==="none"?o[j]:b(o[j],h);if(w){const Q=w.length;for(let k=0;k<Q;k++)A[w[k]]=L}else B?this.options.visualElement.renderState.vars[j]=L:A[j]=L}this.options.layoutId&&(A.pointerEvents=h===this?fy(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(A=>A.currentAnimation?.stop()),this.root.nodes.forEach(kS),this.root.sharedNodes.clear()}}}function $8(t){t.updateLayout()}function G8(t){const s=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,c=s.source!==t.layout.source;i==="size"?bc(o=>{const m=c?s.measuredBox[o]:s.layoutBox[o],y=ll(m);m.min=n[o].min,m.max=m.min+y}):M4(i,s.layoutBox,n)&&bc(o=>{const m=c?s.measuredBox[o]:s.layoutBox[o],y=ll(n[o]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[o].max=t.relativeTarget[o].min+y)});const A=vf();Xp(A,n,s.layoutBox);const u=vf();c?Xp(u,t.applyTransform(r,!0),s.measuredBox):Xp(u,n,s.layoutBox);const d=!L4(A);let h=!1;if(!t.resumeFrom){const o=t.getClosestProjectingParent();if(o&&!o.resumeFrom){const{snapshot:m,layout:y}=o;if(m&&y){const p=Oi();Jp(p,s.layoutBox,m.layoutBox);const j=Oi();Jp(j,n,y.layoutBox),D4(p,j)||(h=!0),o.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=p,t.relativeParent=o)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:u,layoutDelta:A,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function q8(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function W8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Y8(t){t.clearSnapshot()}function kS(t){t.clearMeasurements()}function HS(t){t.isLayoutDirty=!1}function X8(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function KS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function J8(t){t.resolveTargetDelta()}function Z8(t){t.calcProjection()}function ek(t){t.resetSkewAndRotation()}function tk(t){t.removeLeadSnapshot()}function zS(t,s,n){t.translate=xi(s.translate,0,n),t.scale=xi(s.scale,1,n),t.origin=s.origin,t.originPoint=s.originPoint}function VS(t,s,n,r){t.min=xi(s.min,n.min,r),t.max=xi(s.max,n.max,r)}function sk(t,s,n,r){VS(t.x,s.x,n.x,r),VS(t.y,s.y,n.y,r)}function nk(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const rk={duration:.45,ease:[.4,0,.1,1]},$S=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),GS=$S("applewebkit/")&&!$S("chrome/")?Math.round:Nc;function qS(t){t.min=GS(t.min),t.max=GS(t.max)}function ak(t){qS(t.x),qS(t.y)}function M4(t,s,n){return t==="position"||t==="preserve-aspect"&&!A8(MS(s),MS(n),.2)}function ik(t){return t!==t.root&&t.scroll?.wasRoot}const ok=_4({attachResizeListener:(t,s)=>mm(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),X0={current:void 0},P4=_4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!X0.current){const t=new ok({});t.mount(window),t.setOptions({layoutScroll:!0}),X0.current=t}return X0.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),lk={pan:{Feature:B8},drag:{Feature:N8,ProjectionNode:P4,MeasureLayout:R4}};function WS(t,s,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,c=r[i];c&&ui.postRender(()=>c(s,Bm(s)))}class ck extends yu{mount(){const{current:s}=this.node;s&&(this.unmount=FM(s,(n,r)=>(WS(this.node,r,"Start"),i=>WS(this.node,i,"End"))))}unmount(){}}class dk extends yu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=wm(mm(this.node.current,"focus",()=>this.onFocus()),mm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function YS(t,s,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),c=r[i];c&&ui.postRender(()=>c(s,Bm(s)))}class Ak extends yu{mount(){const{current:s}=this.node;s&&(this.unmount=UM(s,(n,r)=>(YS(this.node,r,"Start"),(i,{success:c})=>YS(this.node,i,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ob=new WeakMap,J0=new WeakMap,uk=t=>{const s=Ob.get(t.target);s&&s(t)},hk=t=>{t.forEach(uk)};function fk({root:t,...s}){const n=t||document;J0.has(n)||J0.set(n,{});const r=J0.get(n),i=JSON.stringify(s);return r[i]||(r[i]=new IntersectionObserver(hk,{root:t,...s})),r[i]}function pk(t,s,n){const r=fk(s);return Ob.set(t,n),r.observe(t),()=>{Ob.delete(t),r.unobserve(t)}}const mk={some:0,all:1};class gk extends yu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:c}=s,A={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:mk[i]},u=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,c&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:o,onViewportLeave:m}=this.node.getProps(),y=h?o:m;y&&y(d)};return pk(this.node.current,A,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:n}=this.node;["amount","margin","root"].some(yk(s,n))&&this.startObserver()}unmount(){}}function yk({viewport:t={}},{viewport:s={}}={}){return n=>t[n]!==s[n]}const xk={inView:{Feature:gk},tap:{Feature:Ak},focus:{Feature:dk},hover:{Feature:ck}},vk={layout:{ProjectionNode:P4,MeasureLayout:R4}},bk={...a8,...xk,...lk,...vk},Ss=bP(bk,UP);var jk=Symbol.for("react.lazy"),Gy=mA[" use ".trim().toString()];function wk(t){return typeof t=="object"&&t!==null&&"then"in t}function k4(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===jk&&"_payload"in t&&wk(t._payload)}function H4(t){const s=Nk(t),n=S.forwardRef((r,i)=>{let{children:c,...A}=r;k4(c)&&typeof Gy=="function"&&(c=Gy(c._payload));const u=S.Children.toArray(c),d=u.find(Ck);if(d){const h=d.props.children,o=u.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return e.jsx(s,{...A,ref:i,children:S.isValidElement(h)?S.cloneElement(h,void 0,o):null})}return e.jsx(s,{...A,ref:i,children:c})});return n.displayName=`${t}.Slot`,n}var Sk=H4("Slot");function Nk(t){const s=S.forwardRef((n,r)=>{let{children:i,...c}=n;if(k4(i)&&typeof Gy=="function"&&(i=Gy(i._payload)),S.isValidElement(i)){const A=Tk(i),u=Ek(c,i.props);return i.type!==S.Fragment&&(u.ref=r?Bh(r,A):A),S.cloneElement(i,u)}return S.Children.count(i)>1?S.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Bk=Symbol("radix.slottable");function Ck(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Bk}function Ek(t,s){const n={...s};for(const r in s){const i=t[r],c=s[r];/^on[A-Z]/.test(r)?i&&c?n[r]=(...u)=>{const d=c(...u);return i(...u),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...c}:r==="className"&&(n[r]=[i,c].filter(Boolean).join(" "))}return{...t,...n}}function Tk(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const Fk=ox("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground shadow-sm border-destructive-border",outline:" border [border-color:var(--button-outline)] shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent",link:"text-primary underline-offset-4 hover:underline"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Be=S.forwardRef(({className:t,variant:s,size:n,asChild:r=!1,...i},c)=>{const A=r?Sk:"button";return e.jsx(A,{className:Vs(Fk({variant:s,size:n,className:t})),ref:c,...i})});Be.displayName="Button";const $e=S.forwardRef(({className:t,type:s,...n},r)=>e.jsx("input",{type:s,className:Vs("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));$e.displayName="Input";var Ik=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Rk=Ik.reduce((t,s)=>{const n=H4(`Primitive.${s}`),r=S.forwardRef((i,c)=>{const{asChild:A,...u}=i,d=A?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...u,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),Ok="Label",K4=S.forwardRef((t,s)=>e.jsx(Rk.label,{...t,ref:s,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));K4.displayName=Ok;var z4=K4;const Uk=ox("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ve=S.forwardRef(({className:t,...s},n)=>e.jsx(z4,{ref:n,className:Vs(Uk(),t),...s}));Ve.displayName=z4.displayName;function Lk(){const[,t]=bo(),{login:s}=ei(),{login:n}=rx(),{toast:r}=ma(),[i,c]=S.useState(!1),[A,u]=S.useState(""),[d,h]=S.useState(""),o=async m=>{m.preventDefault(),c(!0);try{const{user:y,token:p}=await n(A,d);switch(s({id:y.id,username:y.username,role:y.role,fullName:y.fullName,approved:y.approved,shopId:y.role==="supplier"?y.shopId:void 0}),y.role){case"admin":t("/admin/dashboard");break;case"software_team":t("/software/dashboard");break;case"purchase_team":t("/purchase/dashboard");break;case"supplier":t("/supplier/dashboard");break;case"pre_sales":t("/create-project");break;default:t("/dashboard")}}catch(y){const p=y?.message||"Invalid email or password. Account must exist.",j=String(p).toLowerCase();if(j.includes("under review")||j.includes("wait for approval")||j.includes("rejected")){t("/supplier-pending"),c(!1);return}r({title:"Login Failed",description:p,variant:"destructive"})}finally{c(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-100 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gray-100 rounded-full blur-3xl"}),e.jsx(Ss.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10",children:e.jsxs(ks,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(ur,{className:"space-y-2 pb-6 border-b border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-600 flex items-center justify-center text-white",children:e.jsx(Sl,{className:"h-6 w-6"})})}),e.jsx(hr,{className:"text-center text-2xl font-bold text-gray-900",children:"BOQ Management System"}),e.jsx(na,{className:"text-center text-gray-600",children:"Login to access your dashboard"})]}),e.jsx(Ws,{className:"pt-6",children:e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx($e,{type:"email",placeholder:"name@example.com",value:A,onChange:m=>u(m.target.value),required:!0,className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{className:"text-sm font-medium text-gray-700",children:"Password"}),e.jsx($e,{type:"password",placeholder:"",value:d,onChange:m=>h(m.target.value),required:!0,className:"h-11"})]}),e.jsx(Be,{type:"submit",className:"w-full h-11 text-base font-semibold bg-blue-600 hover:bg-blue-700",disabled:i,children:i?"Logging in...":"Login"})]})}),e.jsxs(Ch,{className:"flex flex-col gap-4 border-t border-gray-100 pt-6 bg-gray-50/50",children:[e.jsx("div",{className:"text-center text-sm text-gray-600",children:e.jsx(pa,{href:"/forgot-password",className:"text-blue-600 hover:underline font-medium",children:"Forgot Password?"})}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(pa,{href:"/signup",className:"text-blue-600 hover:underline font-medium",children:"Sign Up"})]})]})]})})]})}const Cl=S.forwardRef(({className:t,...s},n)=>e.jsx("textarea",{className:Vs("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...s}));Cl.displayName="Textarea";function Ub(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}function Nf(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}function XS(t){const s=Dk(t),n=S.forwardRef((r,i)=>{const{children:c,...A}=r,u=S.Children.toArray(c),d=u.find(_k);if(d){const h=d.props.children,o=u.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return e.jsx(s,{...A,ref:i,children:S.isValidElement(h)?S.cloneElement(h,void 0,o):null})}return e.jsx(s,{...A,ref:i,children:c})});return n.displayName=`${t}.Slot`,n}function Dk(t){const s=S.forwardRef((n,r)=>{const{children:i,...c}=n;if(S.isValidElement(i)){const A=Pk(i),u=Mk(c,i.props);return i.type!==S.Fragment&&(u.ref=r?Bh(r,A):A),S.cloneElement(i,u)}return S.Children.count(i)>1?S.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Qk=Symbol("radix.slottable");function _k(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Qk}function Mk(t,s){const n={...s};for(const r in s){const i=t[r],c=s[r];/^on[A-Z]/.test(r)?i&&c?n[r]=(...u)=>{const d=c(...u);return i(...u),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...c}:r==="className"&&(n[r]=[i,c].filter(Boolean).join(" "))}return{...t,...n}}function Pk(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function V4(t){const s=t+"CollectionProvider",[n,r]=Cc(s),[i,c]=n(s,{collectionRef:{current:null},itemMap:new Map}),A=b=>{const{scope:w,children:B}=b,L=Vo.useRef(null),Q=Vo.useRef(new Map).current;return e.jsx(i,{scope:w,itemMap:Q,collectionRef:L,children:B})};A.displayName=s;const u=t+"CollectionSlot",d=XS(u),h=Vo.forwardRef((b,w)=>{const{scope:B,children:L}=b,Q=c(u,B),k=Mr(w,Q.collectionRef);return e.jsx(d,{ref:k,children:L})});h.displayName=u;const o=t+"CollectionItemSlot",m="data-radix-collection-item",y=XS(o),p=Vo.forwardRef((b,w)=>{const{scope:B,children:L,...Q}=b,k=Vo.useRef(null),z=Mr(w,k),J=c(o,B);return Vo.useEffect(()=>(J.itemMap.set(k,{ref:k,...Q}),()=>void J.itemMap.delete(k))),e.jsx(y,{[m]:"",ref:z,children:L})});p.displayName=o;function j(b){const w=c(t+"CollectionConsumer",b);return Vo.useCallback(()=>{const L=w.collectionRef.current;if(!L)return[];const Q=Array.from(L.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((J,$)=>Q.indexOf(J.ref.current)-Q.indexOf($.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:A,Slot:h,ItemSlot:p},j,r]}var kk=mA[" useInsertionEffect ".trim().toString()]||ti;function Hk({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[i,c,A]=Kk({defaultProp:s,onChange:n}),u=t!==void 0,d=u?t:i;{const o=S.useRef(t!==void 0);S.useEffect(()=>{const m=o.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),o.current=u},[u,r])}const h=S.useCallback(o=>{if(u){const m=zk(o)?o(t):o;m!==t&&A.current?.(m)}else c(o)},[u,t,c,A]);return[d,h]}function Kk({defaultProp:t,onChange:s}){const[n,r]=S.useState(t),i=S.useRef(n),c=S.useRef(s);return kk(()=>{c.current=s},[s]),S.useEffect(()=>{i.current!==n&&(c.current?.(n),i.current=n)},[n,i]),[n,r,c]}function zk(t){return typeof t=="function"}var Vk=S.createContext(void 0);function jx(t){const s=S.useContext(Vk);return t||s||"ltr"}var Z0="rovingFocusGroup.onEntryFocus",$k={bubbles:!1,cancelable:!0},Cm="RovingFocusGroup",[Lb,$4,Gk]=V4(Cm),[qk,wx]=Cc(Cm,[Gk]),[Wk,Yk]=qk(Cm),G4=S.forwardRef((t,s)=>e.jsx(Lb.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Lb.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Xk,{...t,ref:s})})}));G4.displayName=Cm;var Xk=S.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:c,currentTabStopId:A,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:o=!1,...m}=t,y=S.useRef(null),p=Mr(s,y),j=jx(c),[b,w]=Hk({prop:A,defaultProp:u??null,onChange:d,caller:Cm}),[B,L]=S.useState(!1),Q=qo(h),k=$4(n),z=S.useRef(!1),[J,$]=S.useState(0);return S.useEffect(()=>{const q=y.current;if(q)return q.addEventListener(Z0,Q),()=>q.removeEventListener(Z0,Q)},[Q]),e.jsx(Wk,{scope:n,orientation:r,dir:j,loop:i,currentTabStopId:b,onItemFocus:S.useCallback(q=>w(q),[w]),onItemShiftTab:S.useCallback(()=>L(!0),[]),onFocusableItemAdd:S.useCallback(()=>$(q=>q+1),[]),onFocusableItemRemove:S.useCallback(()=>$(q=>q-1),[]),children:e.jsx(mr.div,{tabIndex:B||J===0?-1:0,"data-orientation":r,...m,ref:p,style:{outline:"none",...t.style},onMouseDown:Nf(t.onMouseDown,()=>{z.current=!0}),onFocus:Nf(t.onFocus,q=>{const X=!z.current;if(q.target===q.currentTarget&&X&&!B){const fe=new CustomEvent(Z0,$k);if(q.currentTarget.dispatchEvent(fe),!fe.defaultPrevented){const ee=k().filter(ne=>ne.focusable),le=ee.find(ne=>ne.active),ue=ee.find(ne=>ne.id===b),re=[le,ue,...ee].filter(Boolean).map(ne=>ne.ref.current);Y4(re,o)}}z.current=!1}),onBlur:Nf(t.onBlur,()=>L(!1))})})}),q4="RovingFocusGroupItem",W4=S.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:c,children:A,...u}=t,d=du(),h=c||d,o=Yk(q4,n),m=o.currentTabStopId===h,y=$4(n),{onFocusableItemAdd:p,onFocusableItemRemove:j,currentTabStopId:b}=o;return S.useEffect(()=>{if(r)return p(),()=>j()},[r,p,j]),e.jsx(Lb.ItemSlot,{scope:n,id:h,focusable:r,active:i,children:e.jsx(mr.span,{tabIndex:m?0:-1,"data-orientation":o.orientation,...u,ref:s,onMouseDown:Nf(t.onMouseDown,w=>{r?o.onItemFocus(h):w.preventDefault()}),onFocus:Nf(t.onFocus,()=>o.onItemFocus(h)),onKeyDown:Nf(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){o.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const B=eH(w,o.orientation,o.dir);if(B!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let Q=y().filter(k=>k.focusable).map(k=>k.ref.current);if(B==="last")Q.reverse();else if(B==="prev"||B==="next"){B==="prev"&&Q.reverse();const k=Q.indexOf(w.currentTarget);Q=o.loop?tH(Q,k+1):Q.slice(k+1)}setTimeout(()=>Y4(Q))}}),children:typeof A=="function"?A({isCurrentTabStop:m,hasTabStop:b!=null}):A})})});W4.displayName=q4;var Jk={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Zk(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function eH(t,s,n){const r=Zk(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Jk[r]}function Y4(t,s=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:s}),document.activeElement!==n))return}function tH(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var X4=G4,J4=W4,sH=mA[" useInsertionEffect ".trim().toString()]||ti;function nH({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[i,c,A]=rH({defaultProp:s,onChange:n}),u=t!==void 0,d=u?t:i;{const o=S.useRef(t!==void 0);S.useEffect(()=>{const m=o.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),o.current=u},[u,r])}const h=S.useCallback(o=>{if(u){const m=aH(o)?o(t):o;m!==t&&A.current?.(m)}else c(o)},[u,t,c,A]);return[d,h]}function rH({defaultProp:t,onChange:s}){const[n,r]=S.useState(t),i=S.useRef(n),c=S.useRef(s);return sH(()=>{c.current=s},[s]),S.useEffect(()=>{i.current!==n&&(c.current?.(n),i.current=n)},[n,i]),[n,r,c]}function aH(t){return typeof t=="function"}function uj(t){const s=S.useRef({value:t,previous:t});return S.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var hj="Radio",[iH,Z4]=Cc(hj),[oH,lH]=iH(hj),eT=S.forwardRef((t,s)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:c,disabled:A,value:u="on",onCheck:d,form:h,...o}=t,[m,y]=S.useState(null),p=Mr(s,w=>y(w)),j=S.useRef(!1),b=m?h||!!m.closest("form"):!0;return e.jsxs(oH,{scope:n,checked:i,disabled:A,children:[e.jsx(mr.button,{type:"button",role:"radio","aria-checked":i,"data-state":rT(i),"data-disabled":A?"":void 0,disabled:A,value:u,...o,ref:p,onClick:Ub(t.onClick,w=>{i||d?.(),b&&(j.current=w.isPropagationStopped(),j.current||w.stopPropagation())})}),b&&e.jsx(nT,{control:m,bubbles:!j.current,name:r,value:u,checked:i,required:c,disabled:A,form:h,style:{transform:"translateX(-100%)"}})]})});eT.displayName=hj;var tT="RadioIndicator",sT=S.forwardRef((t,s)=>{const{__scopeRadio:n,forceMount:r,...i}=t,c=lH(tT,n);return e.jsx(gA,{present:r||c.checked,children:e.jsx(mr.span,{"data-state":rT(c.checked),"data-disabled":c.disabled?"":void 0,...i,ref:s})})});sT.displayName=tT;var cH="RadioBubbleInput",nT=S.forwardRef(({__scopeRadio:t,control:s,checked:n,bubbles:r=!0,...i},c)=>{const A=S.useRef(null),u=Mr(A,c),d=uj(n),h=C1(s);return S.useEffect(()=>{const o=A.current;if(!o)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==n&&p){const j=new Event("click",{bubbles:r});p.call(o,n),o.dispatchEvent(j)}},[d,n,r]),e.jsx(mr.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:u,style:{...i.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});nT.displayName=cH;function rT(t){return t?"checked":"unchecked"}var dH=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Sx="RadioGroup",[AH]=Cc(Sx,[wx,Z4]),aT=wx(),iT=Z4(),[uH,hH]=AH(Sx),oT=S.forwardRef((t,s)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:c,required:A=!1,disabled:u=!1,orientation:d,dir:h,loop:o=!0,onValueChange:m,...y}=t,p=aT(n),j=jx(h),[b,w]=nH({prop:c,defaultProp:i??null,onChange:m,caller:Sx});return e.jsx(uH,{scope:n,name:r,required:A,disabled:u,value:b,onValueChange:w,children:e.jsx(X4,{asChild:!0,...p,orientation:d,dir:j,loop:o,children:e.jsx(mr.div,{role:"radiogroup","aria-required":A,"aria-orientation":d,"data-disabled":u?"":void 0,dir:j,...y,ref:s})})})});oT.displayName=Sx;var lT="RadioGroupItem",cT=S.forwardRef((t,s)=>{const{__scopeRadioGroup:n,disabled:r,...i}=t,c=hH(lT,n),A=c.disabled||r,u=aT(n),d=iT(n),h=S.useRef(null),o=Mr(s,h),m=c.value===i.value,y=S.useRef(!1);return S.useEffect(()=>{const p=b=>{dH.includes(b.key)&&(y.current=!0)},j=()=>y.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",j),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",j)}},[]),e.jsx(J4,{asChild:!0,...u,focusable:!A,active:m,children:e.jsx(eT,{disabled:A,required:c.required,checked:m,...d,...i,name:c.name,ref:o,onCheck:()=>c.onValueChange(i.value),onKeyDown:Ub(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:Ub(i.onFocus,()=>{y.current&&h.current?.click()})})})});cT.displayName=lT;var fH="RadioGroupIndicator",dT=S.forwardRef((t,s)=>{const{__scopeRadioGroup:n,...r}=t,i=iT(n);return e.jsx(sT,{...i,...r,ref:s})});dT.displayName=fH;var AT=oT,uT=cT,pH=dT;const hT=S.forwardRef(({className:t,...s},n)=>e.jsx(AT,{className:Vs("grid gap-2",t),...s,ref:n}));hT.displayName=AT.displayName;const fT=S.forwardRef(({className:t,...s},n)=>e.jsx(uT,{ref:n,className:Vs("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(pH,{className:"flex items-center justify-center",children:e.jsx(tL,{className:"h-3.5 w-3.5 fill-primary"})})}));fT.displayName=uT.displayName;function JS(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}var mH=mA[" useInsertionEffect ".trim().toString()]||ti;function gH({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[i,c,A]=yH({defaultProp:s,onChange:n}),u=t!==void 0,d=u?t:i;{const o=S.useRef(t!==void 0);S.useEffect(()=>{const m=o.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),o.current=u},[u,r])}const h=S.useCallback(o=>{if(u){const m=xH(o)?o(t):o;m!==t&&A.current?.(m)}else c(o)},[u,t,c,A]);return[d,h]}function yH({defaultProp:t,onChange:s}){const[n,r]=S.useState(t),i=S.useRef(n),c=S.useRef(s);return mH(()=>{c.current=s},[s]),S.useEffect(()=>{i.current!==n&&(c.current?.(n),i.current=n)},[n,i]),[n,r,c]}function xH(t){return typeof t=="function"}var Nx="Checkbox",[vH]=Cc(Nx),[bH,fj]=vH(Nx);function jH(t){const{__scopeCheckbox:s,checked:n,children:r,defaultChecked:i,disabled:c,form:A,name:u,onCheckedChange:d,required:h,value:o="on",internal_do_not_use_render:m}=t,[y,p]=gH({prop:n,defaultProp:i??!1,onChange:d,caller:Nx}),[j,b]=S.useState(null),[w,B]=S.useState(null),L=S.useRef(!1),Q=j?!!A||!!j.closest("form"):!0,k={checked:y,disabled:c,setChecked:p,control:j,setControl:b,name:u,form:A,value:o,hasConsumerStoppedPropagationRef:L,required:h,defaultChecked:Au(i)?!1:i,isFormControl:Q,bubbleInput:w,setBubbleInput:B};return e.jsx(bH,{scope:s,...k,children:wH(m)?m(k):r})}var pT="CheckboxTrigger",mT=S.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:n,...r},i)=>{const{control:c,value:A,disabled:u,checked:d,required:h,setControl:o,setChecked:m,hasConsumerStoppedPropagationRef:y,isFormControl:p,bubbleInput:j}=fj(pT,t),b=Mr(i,o),w=S.useRef(d);return S.useEffect(()=>{const B=c?.form;if(B){const L=()=>m(w.current);return B.addEventListener("reset",L),()=>B.removeEventListener("reset",L)}},[c,m]),e.jsx(mr.button,{type:"button",role:"checkbox","aria-checked":Au(d)?"mixed":d,"aria-required":h,"data-state":bT(d),"data-disabled":u?"":void 0,disabled:u,value:A,...r,ref:b,onKeyDown:JS(s,B=>{B.key==="Enter"&&B.preventDefault()}),onClick:JS(n,B=>{m(L=>Au(L)?!0:!L),j&&p&&(y.current=B.isPropagationStopped(),y.current||B.stopPropagation())})})});mT.displayName=pT;var pj=S.forwardRef((t,s)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:c,required:A,disabled:u,value:d,onCheckedChange:h,form:o,...m}=t;return e.jsx(jH,{__scopeCheckbox:n,checked:i,defaultChecked:c,disabled:u,required:A,onCheckedChange:h,name:r,form:o,value:d,internal_do_not_use_render:({isFormControl:y})=>e.jsxs(e.Fragment,{children:[e.jsx(mT,{...m,ref:s,__scopeCheckbox:n}),y&&e.jsx(vT,{__scopeCheckbox:n})]})})});pj.displayName=Nx;var gT="CheckboxIndicator",yT=S.forwardRef((t,s)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,c=fj(gT,n);return e.jsx(gA,{present:r||Au(c.checked)||c.checked===!0,children:e.jsx(mr.span,{"data-state":bT(c.checked),"data-disabled":c.disabled?"":void 0,...i,ref:s,style:{pointerEvents:"none",...t.style}})})});yT.displayName=gT;var xT="CheckboxBubbleInput",vT=S.forwardRef(({__scopeCheckbox:t,...s},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:c,defaultChecked:A,required:u,disabled:d,name:h,value:o,form:m,bubbleInput:y,setBubbleInput:p}=fj(xT,t),j=Mr(n,p),b=uj(c),w=C1(r);S.useEffect(()=>{const L=y;if(!L)return;const Q=window.HTMLInputElement.prototype,z=Object.getOwnPropertyDescriptor(Q,"checked").set,J=!i.current;if(b!==c&&z){const $=new Event("click",{bubbles:J});L.indeterminate=Au(c),z.call(L,Au(c)?!1:c),L.dispatchEvent($)}},[y,b,c,i]);const B=S.useRef(Au(c)?!1:c);return e.jsx(mr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:A??B.current,required:u,disabled:d,name:h,value:o,form:m,...s,tabIndex:-1,ref:j,style:{...s.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});vT.displayName=xT;function wH(t){return typeof t=="function"}function Au(t){return t==="indeterminate"}function bT(t){return Au(t)?"indeterminate":t?"checked":"unchecked"}const Fn=S.forwardRef(({className:t,...s},n)=>e.jsx(pj,{ref:n,className:Vs("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(yT,{className:Vs("grid place-content-center text-current"),children:e.jsx(x1,{className:"h-4 w-4"})})}));Fn.displayName=pj.displayName;function SH(){const[,t]=bo(),{signup:s}=rx(),{toast:n}=ma(),[r,i]=S.useState(!1),[c,A]=S.useState(null),[u,d]=S.useState({fullName:"",email:"",mobileNumber:"",password:"",confirmPassword:"",companyName:"",gstNumber:"",businessAddress:"",department:"",employeeCode:""}),[h,o]=S.useState(!1),m=[{value:"admin",label:"Admin",icon:y2,description:"Full system access"},{value:"software_team",label:"Software Team",icon:d5,description:"Technical management"},{value:"purchase_team",label:"Purchase Team",icon:Dy,description:"Procurement management"},{value:"user_client",label:"User / Client",icon:zL,description:"General system access"},{value:"pre_sales",label:"Pre-Sales",icon:Dy,description:"Create projects and BOQs"},{value:"contractor",label:"Contractor",icon:y2,description:"Access sub-categories and estimators"},{value:"supplier",label:"Supplier",icon:Sl,description:"Material supplier"}],y=()=>c?!u.fullName.trim()||!u.email.trim()||!u.mobileNumber.trim()?(n({title:"Error",description:"All basic fields are required",variant:"destructive"}),!1):!u.password||u.password!==u.confirmPassword?(n({title:"Error",description:"Passwords do not match",variant:"destructive"}),!1):c==="supplier"&&(!u.companyName||!u.gstNumber||!u.businessAddress)?(n({title:"Error",description:"Supplier details are required",variant:"destructive"}),!1):h?!0:(n({title:"Error",description:"Please confirm the information",variant:"destructive"}),!1):(n({title:"Error",description:"Please select a role",variant:"destructive"}),!1),p=async j=>{if(j.preventDefault(),!!y()){i(!0);try{if(await s(u.email,u.password,c,u.fullName,u.mobileNumber,u.department,u.employeeCode,u.companyName,u.gstNumber,u.businessAddress),c==="supplier"){n({title:"Request Submitted",description:"Your supplier account is waiting for admin approval."}),t("/pending-approval");return}n({title:"Account Created",description:"Please login using your email and password"}),t("/")}catch(b){const w=b?.message||"Create account failed";n({title:"Error",description:w,variant:"destructive"})}finally{i(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:e.jsx(Ss.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl",children:e.jsxs(ks,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(ur,{className:"text-center pb-6 border-b",children:[e.jsx(hr,{className:"text-3xl font-bold",children:"Create Your Account"}),e.jsx(na,{children:"Register to access the BOQ Management System"})]}),e.jsx(Ws,{className:"pt-6",children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsx(hT,{value:c||"",onValueChange:j=>A(j),className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(j=>e.jsxs("div",{children:[e.jsx(fT,{value:j.value,id:j.value,className:"peer sr-only"}),e.jsxs(Ve,{htmlFor:j.value,className:"flex flex-col items-center justify-center rounded-lg border-2 p-4 cursor-pointer peer-data-[state=checked]:border-blue-500",children:[e.jsx(j.icon,{className:"h-6 w-6 mb-2"}),e.jsx("div",{className:"font-medium",children:j.label}),e.jsx("div",{className:"text-xs text-gray-500",children:j.description})]})]},j.value))}),e.jsx($e,{placeholder:"Full Name",value:u.fullName,onChange:j=>d({...u,fullName:j.target.value})}),e.jsx($e,{placeholder:"Mobile Number",value:u.mobileNumber,onChange:j=>d({...u,mobileNumber:j.target.value})}),e.jsx($e,{type:"email",placeholder:"Email",value:u.email,onChange:j=>d({...u,email:j.target.value})}),e.jsx($e,{type:"password",placeholder:"Password",value:u.password,onChange:j=>d({...u,password:j.target.value})}),e.jsx($e,{type:"password",placeholder:"Confirm Password",value:u.confirmPassword,onChange:j=>d({...u,confirmPassword:j.target.value})}),c==="supplier"&&e.jsxs(e.Fragment,{children:[e.jsx($e,{placeholder:"Company Name",value:u.companyName,onChange:j=>d({...u,companyName:j.target.value})}),e.jsx($e,{placeholder:"GST Number",value:u.gstNumber,onChange:j=>d({...u,gstNumber:j.target.value})}),e.jsx(Cl,{placeholder:"Business Address",value:u.businessAddress,onChange:j=>d({...u,businessAddress:j.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fn,{checked:h,onCheckedChange:j=>o(j===!0)}),e.jsx(Ve,{children:"I confirm the above information is correct"})]}),e.jsx(Be,{type:"submit",disabled:r,className:"w-full",children:r?"Creating...":"Create Account"})]})}),e.jsx(Ch,{className:"justify-center",children:e.jsx(pa,{href:"/",className:"text-blue-600 hover:underline",children:"Already have an account? Login"})})]})})})}function NH(){const[,t]=bo(),{toast:s}=ma(),[n,r]=S.useState(!1),[i,c]=S.useState(""),A=async u=>{if(u.preventDefault(),!i.trim()){s({title:"Error",description:"Email address is required",variant:"destructive"});return}r(!0);try{if((await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})})).ok)s({title:"Success",description:"Password reset link sent to your email address"}),t("/");else throw new Error("Failed to send reset link")}catch{s({title:"Error",description:"Failed to send reset link. Please try again.",variant:"destructive"})}finally{r(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-100 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gray-100 rounded-full blur-3xl"}),e.jsx(Ss.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10",children:e.jsxs(ks,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(ur,{className:"space-y-2 pb-6 border-b border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-600 flex items-center justify-center text-white",children:e.jsx(Sl,{className:"h-6 w-6"})})}),e.jsx(hr,{className:"text-center text-2xl font-bold text-gray-900",children:"Forgot Password"}),e.jsx(na,{className:"text-center text-gray-600",children:"Enter your registered email address to receive a password reset link."})]}),e.jsx(Ws,{className:"pt-6",children:e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx($e,{type:"email",placeholder:"name@example.com",value:i,onChange:u=>c(u.target.value),required:!0,className:"h-11"})]}),e.jsx(Be,{type:"submit",className:"w-full h-11 text-base font-semibold bg-blue-600 hover:bg-blue-700",disabled:n,children:n?"Sending...":"Send Reset Link"})]})}),e.jsx(Ch,{className:"justify-center border-t border-gray-100 pt-6 bg-gray-50/50",children:e.jsxs(pa,{href:"/",className:"flex items-center gap-2 text-blue-600 hover:underline font-medium",children:[e.jsx(jf,{className:"h-4 w-4"}),"Back to Login"]})})]})})]})}function jT(t,s){return function(){return t.apply(s,arguments)}}const{toString:BH}=Object.prototype,{getPrototypeOf:mj}=Object,{iterator:Bx,toStringTag:wT}=Symbol,Cx=(t=>s=>{const n=BH.call(s);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ed=t=>(t=t.toLowerCase(),s=>Cx(s)===t),Ex=t=>s=>typeof s===t,{isArray:Hf}=Array,Of=Ex("undefined");function Em(t){return t!==null&&!Of(t)&&t.constructor!==null&&!Of(t.constructor)&&El(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ST=ed("ArrayBuffer");function CH(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&ST(t.buffer),s}const EH=Ex("string"),El=Ex("function"),NT=Ex("number"),Tm=t=>t!==null&&typeof t=="object",TH=t=>t===!0||t===!1,my=t=>{if(Cx(t)!=="object")return!1;const s=mj(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(wT in t)&&!(Bx in t)},FH=t=>{if(!Tm(t)||Em(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},IH=ed("Date"),RH=ed("File"),OH=ed("Blob"),UH=ed("FileList"),LH=t=>Tm(t)&&El(t.pipe),DH=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||El(t.append)&&((s=Cx(t))==="formdata"||s==="object"&&El(t.toString)&&t.toString()==="[object FormData]"))},QH=ed("URLSearchParams"),[_H,MH,PH,kH]=["ReadableStream","Request","Response","Headers"].map(ed),HH=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fm(t,s,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Hf(t))for(r=0,i=t.length;r<i;r++)s.call(null,t[r],r,t);else{if(Em(t))return;const c=n?Object.getOwnPropertyNames(t):Object.keys(t),A=c.length;let u;for(r=0;r<A;r++)u=c[r],s.call(null,t[u],u,t)}}function BT(t,s){if(Em(t))return null;s=s.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],s===i.toLowerCase())return i;return null}const ah=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,CT=t=>!Of(t)&&t!==ah;function Db(){const{caseless:t,skipUndefined:s}=CT(this)&&this||{},n={},r=(i,c)=>{if(c==="__proto__"||c==="constructor"||c==="prototype")return;const A=t&&BT(n,c)||c;my(n[A])&&my(i)?n[A]=Db(n[A],i):my(i)?n[A]=Db({},i):Hf(i)?n[A]=i.slice():(!s||!Of(i))&&(n[A]=i)};for(let i=0,c=arguments.length;i<c;i++)arguments[i]&&Fm(arguments[i],r);return n}const KH=(t,s,n,{allOwnKeys:r}={})=>(Fm(s,(i,c)=>{n&&El(i)?Object.defineProperty(t,c,{value:jT(i,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,c,{value:i,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),t),zH=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),VH=(t,s,n,r)=>{t.prototype=Object.create(s.prototype,r),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:s.prototype}),n&&Object.assign(t.prototype,n)},$H=(t,s,n,r)=>{let i,c,A;const u={};if(s=s||{},t==null)return s;do{for(i=Object.getOwnPropertyNames(t),c=i.length;c-- >0;)A=i[c],(!r||r(A,t,s))&&!u[A]&&(s[A]=t[A],u[A]=!0);t=n!==!1&&mj(t)}while(t&&(!n||n(t,s))&&t!==Object.prototype);return s},GH=(t,s,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=s.length;const r=t.indexOf(s,n);return r!==-1&&r===n},qH=t=>{if(!t)return null;if(Hf(t))return t;let s=t.length;if(!NT(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=t[s];return n},WH=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&mj(Uint8Array)),YH=(t,s)=>{const r=(t&&t[Bx]).call(t);let i;for(;(i=r.next())&&!i.done;){const c=i.value;s.call(t,c[0],c[1])}},XH=(t,s)=>{let n;const r=[];for(;(n=t.exec(s))!==null;)r.push(n);return r},JH=ed("HTMLFormElement"),ZH=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),ZS=(({hasOwnProperty:t})=>(s,n)=>t.call(s,n))(Object.prototype),e7=ed("RegExp"),ET=(t,s)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Fm(n,(i,c)=>{let A;(A=s(i,c,t))!==!1&&(r[c]=A||i)}),Object.defineProperties(t,r)},t7=t=>{ET(t,(s,n)=>{if(El(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(El(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},s7=(t,s)=>{const n={},r=i=>{i.forEach(c=>{n[c]=!0})};return Hf(t)?r(t):r(String(t).split(s)),n},n7=()=>{},r7=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function a7(t){return!!(t&&El(t.append)&&t[wT]==="FormData"&&t[Bx])}const i7=t=>{const s=new Array(10),n=(r,i)=>{if(Tm(r)){if(s.indexOf(r)>=0)return;if(Em(r))return r;if(!("toJSON"in r)){s[i]=r;const c=Hf(r)?[]:{};return Fm(r,(A,u)=>{const d=n(A,i+1);!Of(d)&&(c[u]=d)}),s[i]=void 0,c}}return r};return n(t,0)},o7=ed("AsyncFunction"),l7=t=>t&&(Tm(t)||El(t))&&El(t.then)&&El(t.catch),TT=((t,s)=>t?setImmediate:s?((n,r)=>(ah.addEventListener("message",({source:i,data:c})=>{i===ah&&c===n&&r.length&&r.shift()()},!1),i=>{r.push(i),ah.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",El(ah.postMessage)),c7=typeof queueMicrotask<"u"?queueMicrotask.bind(ah):typeof process<"u"&&process.nextTick||TT,d7=t=>t!=null&&El(t[Bx]),zt={isArray:Hf,isArrayBuffer:ST,isBuffer:Em,isFormData:DH,isArrayBufferView:CH,isString:EH,isNumber:NT,isBoolean:TH,isObject:Tm,isPlainObject:my,isEmptyObject:FH,isReadableStream:_H,isRequest:MH,isResponse:PH,isHeaders:kH,isUndefined:Of,isDate:IH,isFile:RH,isBlob:OH,isRegExp:e7,isFunction:El,isStream:LH,isURLSearchParams:QH,isTypedArray:WH,isFileList:UH,forEach:Fm,merge:Db,extend:KH,trim:HH,stripBOM:zH,inherits:VH,toFlatObject:$H,kindOf:Cx,kindOfTest:ed,endsWith:GH,toArray:qH,forEachEntry:YH,matchAll:XH,isHTMLForm:JH,hasOwnProperty:ZS,hasOwnProp:ZS,reduceDescriptors:ET,freezeMethods:t7,toObjectSet:s7,toCamelCase:ZH,noop:n7,toFiniteNumber:r7,findKey:BT,global:ah,isContextDefined:CT,isSpecCompliantForm:a7,toJSONObject:i7,isAsyncFn:o7,isThenable:l7,setImmediate:TT,asap:c7,isIterable:d7};let Gn=class FT extends Error{static from(s,n,r,i,c,A){const u=new FT(s.message,n||s.code,r,i,c);return u.cause=s,u.name=s.name,A&&Object.assign(u,A),u}constructor(s,n,r,i,c){super(s),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),r&&(this.config=r),i&&(this.request=i),c&&(this.response=c,this.status=c.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:zt.toJSONObject(this.config),code:this.code,status:this.status}}};Gn.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Gn.ERR_BAD_OPTION="ERR_BAD_OPTION";Gn.ECONNABORTED="ECONNABORTED";Gn.ETIMEDOUT="ETIMEDOUT";Gn.ERR_NETWORK="ERR_NETWORK";Gn.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Gn.ERR_DEPRECATED="ERR_DEPRECATED";Gn.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Gn.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Gn.ERR_CANCELED="ERR_CANCELED";Gn.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Gn.ERR_INVALID_URL="ERR_INVALID_URL";const A7=null;function Qb(t){return zt.isPlainObject(t)||zt.isArray(t)}function IT(t){return zt.endsWith(t,"[]")?t.slice(0,-2):t}function eN(t,s,n){return t?t.concat(s).map(function(i,c){return i=IT(i),!n&&c?"["+i+"]":i}).join(n?".":""):s}function u7(t){return zt.isArray(t)&&!t.some(Qb)}const h7=zt.toFlatObject(zt,{},null,function(s){return/^is[A-Z]/.test(s)});function Tx(t,s,n){if(!zt.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,n=zt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,w){return!zt.isUndefined(w[b])});const r=n.metaTokens,i=n.visitor||o,c=n.dots,A=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&zt.isSpecCompliantForm(s);if(!zt.isFunction(i))throw new TypeError("visitor must be a function");function h(j){if(j===null)return"";if(zt.isDate(j))return j.toISOString();if(zt.isBoolean(j))return j.toString();if(!d&&zt.isBlob(j))throw new Gn("Blob is not supported. Use a Buffer instead.");return zt.isArrayBuffer(j)||zt.isTypedArray(j)?d&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function o(j,b,w){let B=j;if(j&&!w&&typeof j=="object"){if(zt.endsWith(b,"{}"))b=r?b:b.slice(0,-2),j=JSON.stringify(j);else if(zt.isArray(j)&&u7(j)||(zt.isFileList(j)||zt.endsWith(b,"[]"))&&(B=zt.toArray(j)))return b=IT(b),B.forEach(function(Q,k){!(zt.isUndefined(Q)||Q===null)&&s.append(A===!0?eN([b],k,c):A===null?b:b+"[]",h(Q))}),!1}return Qb(j)?!0:(s.append(eN(w,b,c),h(j)),!1)}const m=[],y=Object.assign(h7,{defaultVisitor:o,convertValue:h,isVisitable:Qb});function p(j,b){if(!zt.isUndefined(j)){if(m.indexOf(j)!==-1)throw Error("Circular reference detected in "+b.join("."));m.push(j),zt.forEach(j,function(B,L){(!(zt.isUndefined(B)||B===null)&&i.call(s,B,zt.isString(L)?L.trim():L,b,y))===!0&&p(B,b?b.concat(L):[L])}),m.pop()}}if(!zt.isObject(t))throw new TypeError("data must be an object");return p(t),s}function tN(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function gj(t,s){this._pairs=[],t&&Tx(t,this,s)}const RT=gj.prototype;RT.append=function(s,n){this._pairs.push([s,n])};RT.toString=function(s){const n=s?function(r){return s.call(this,r,tN)}:tN;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function f7(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function OT(t,s,n){if(!s)return t;const r=n&&n.encode||f7,i=zt.isFunction(n)?{serialize:n}:n,c=i&&i.serialize;let A;if(c?A=c(s,i):A=zt.isURLSearchParams(s)?s.toString():new gj(s,i).toString(r),A){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+A}return t}class sN{constructor(){this.handlers=[]}use(s,n,r){return this.handlers.push({fulfilled:s,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){zt.forEach(this.handlers,function(r){r!==null&&s(r)})}}const yj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},p7=typeof URLSearchParams<"u"?URLSearchParams:gj,m7=typeof FormData<"u"?FormData:null,g7=typeof Blob<"u"?Blob:null,y7={isBrowser:!0,classes:{URLSearchParams:p7,FormData:m7,Blob:g7},protocols:["http","https","file","blob","url","data"]},xj=typeof window<"u"&&typeof document<"u",_b=typeof navigator=="object"&&navigator||void 0,x7=xj&&(!_b||["ReactNative","NativeScript","NS"].indexOf(_b.product)<0),v7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",b7=xj&&window.location.href||"http://localhost",j7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xj,hasStandardBrowserEnv:x7,hasStandardBrowserWebWorkerEnv:v7,navigator:_b,origin:b7},Symbol.toStringTag,{value:"Module"})),$o={...j7,...y7};function w7(t,s){return Tx(t,new $o.classes.URLSearchParams,{visitor:function(n,r,i,c){return $o.isNode&&zt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...s})}function S7(t){return zt.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function N7(t){const s={},n=Object.keys(t);let r;const i=n.length;let c;for(r=0;r<i;r++)c=n[r],s[c]=t[c];return s}function UT(t){function s(n,r,i,c){let A=n[c++];if(A==="__proto__")return!0;const u=Number.isFinite(+A),d=c>=n.length;return A=!A&&zt.isArray(i)?i.length:A,d?(zt.hasOwnProp(i,A)?i[A]=[i[A],r]:i[A]=r,!u):((!i[A]||!zt.isObject(i[A]))&&(i[A]=[]),s(n,r,i[A],c)&&zt.isArray(i[A])&&(i[A]=N7(i[A])),!u)}if(zt.isFormData(t)&&zt.isFunction(t.entries)){const n={};return zt.forEachEntry(t,(r,i)=>{s(S7(r),i,n,0)}),n}return null}function B7(t,s,n){if(zt.isString(t))try{return(s||JSON.parse)(t),zt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Im={transitional:yj,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,c=zt.isObject(s);if(c&&zt.isHTMLForm(s)&&(s=new FormData(s)),zt.isFormData(s))return i?JSON.stringify(UT(s)):s;if(zt.isArrayBuffer(s)||zt.isBuffer(s)||zt.isStream(s)||zt.isFile(s)||zt.isBlob(s)||zt.isReadableStream(s))return s;if(zt.isArrayBufferView(s))return s.buffer;if(zt.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let u;if(c){if(r.indexOf("application/x-www-form-urlencoded")>-1)return w7(s,this.formSerializer).toString();if((u=zt.isFileList(s))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Tx(u?{"files[]":s}:s,d&&new d,this.formSerializer)}}return c||i?(n.setContentType("application/json",!1),B7(s)):s}],transformResponse:[function(s){const n=this.transitional||Im.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(zt.isResponse(s)||zt.isReadableStream(s))return s;if(s&&zt.isString(s)&&(r&&!this.responseType||i)){const A=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(s,this.parseReviver)}catch(u){if(A)throw u.name==="SyntaxError"?Gn.from(u,Gn.ERR_BAD_RESPONSE,this,null,this.response):u}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$o.classes.FormData,Blob:$o.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};zt.forEach(["delete","get","head","post","put","patch"],t=>{Im.headers[t]={}});const C7=zt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),E7=t=>{const s={};let n,r,i;return t&&t.split(`
`).forEach(function(A){i=A.indexOf(":"),n=A.substring(0,i).trim().toLowerCase(),r=A.substring(i+1).trim(),!(!n||s[n]&&C7[n])&&(n==="set-cookie"?s[n]?s[n].push(r):s[n]=[r]:s[n]=s[n]?s[n]+", "+r:r)}),s},nN=Symbol("internals");function Qp(t){return t&&String(t).trim().toLowerCase()}function gy(t){return t===!1||t==null?t:zt.isArray(t)?t.map(gy):String(t)}function T7(t){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)s[r[1]]=r[2];return s}const F7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ev(t,s,n,r,i){if(zt.isFunction(r))return r.call(this,s,n);if(i&&(s=n),!!zt.isString(s)){if(zt.isString(r))return s.indexOf(r)!==-1;if(zt.isRegExp(r))return r.test(s)}}function I7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,r)=>n.toUpperCase()+r)}function R7(t,s){const n=zt.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,c,A){return this[r].call(this,s,i,c,A)},configurable:!0})})}let Tl=class{constructor(s){s&&this.set(s)}set(s,n,r){const i=this;function c(u,d,h){const o=Qp(d);if(!o)throw new Error("header name must be a non-empty string");const m=zt.findKey(i,o);(!m||i[m]===void 0||h===!0||h===void 0&&i[m]!==!1)&&(i[m||d]=gy(u))}const A=(u,d)=>zt.forEach(u,(h,o)=>c(h,o,d));if(zt.isPlainObject(s)||s instanceof this.constructor)A(s,n);else if(zt.isString(s)&&(s=s.trim())&&!F7(s))A(E7(s),n);else if(zt.isObject(s)&&zt.isIterable(s)){let u={},d,h;for(const o of s){if(!zt.isArray(o))throw TypeError("Object iterator must return a key-value pair");u[h=o[0]]=(d=u[h])?zt.isArray(d)?[...d,o[1]]:[d,o[1]]:o[1]}A(u,n)}else s!=null&&c(n,s,r);return this}get(s,n){if(s=Qp(s),s){const r=zt.findKey(this,s);if(r){const i=this[r];if(!n)return i;if(n===!0)return T7(i);if(zt.isFunction(n))return n.call(this,i,r);if(zt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=Qp(s),s){const r=zt.findKey(this,s);return!!(r&&this[r]!==void 0&&(!n||ev(this,this[r],r,n)))}return!1}delete(s,n){const r=this;let i=!1;function c(A){if(A=Qp(A),A){const u=zt.findKey(r,A);u&&(!n||ev(r,r[u],u,n))&&(delete r[u],i=!0)}}return zt.isArray(s)?s.forEach(c):c(s),i}clear(s){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const c=n[r];(!s||ev(this,this[c],c,s,!0))&&(delete this[c],i=!0)}return i}normalize(s){const n=this,r={};return zt.forEach(this,(i,c)=>{const A=zt.findKey(r,c);if(A){n[A]=gy(i),delete n[c];return}const u=s?I7(c):String(c).trim();u!==c&&delete n[c],n[u]=gy(i),r[u]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return zt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=s&&zt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const r=new this(s);return n.forEach(i=>r.set(i)),r}static accessor(s){const r=(this[nN]=this[nN]={accessors:{}}).accessors,i=this.prototype;function c(A){const u=Qp(A);r[u]||(R7(i,A),r[u]=!0)}return zt.isArray(s)?s.forEach(c):c(s),this}};Tl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);zt.reduceDescriptors(Tl.prototype,({value:t},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[n]=r}}});zt.freezeMethods(Tl);function tv(t,s){const n=this||Im,r=s||n,i=Tl.from(r.headers);let c=r.data;return zt.forEach(t,function(u){c=u.call(n,c,i.normalize(),s?s.status:void 0)}),i.normalize(),c}function LT(t){return!!(t&&t.__CANCEL__)}let Rm=class extends Gn{constructor(s,n,r){super(s??"canceled",Gn.ERR_CANCELED,n,r),this.name="CanceledError",this.__CANCEL__=!0}};function DT(t,s,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):s(new Gn("Request failed with status code "+n.status,[Gn.ERR_BAD_REQUEST,Gn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function O7(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function U7(t,s){t=t||10;const n=new Array(t),r=new Array(t);let i=0,c=0,A;return s=s!==void 0?s:1e3,function(d){const h=Date.now(),o=r[c];A||(A=h),n[i]=d,r[i]=h;let m=c,y=0;for(;m!==i;)y+=n[m++],m=m%t;if(i=(i+1)%t,i===c&&(c=(c+1)%t),h-A<s)return;const p=o&&h-o;return p?Math.round(y*1e3/p):void 0}}function L7(t,s){let n=0,r=1e3/s,i,c;const A=(h,o=Date.now())=>{n=o,i=null,c&&(clearTimeout(c),c=null),t(...h)};return[(...h)=>{const o=Date.now(),m=o-n;m>=r?A(h,o):(i=h,c||(c=setTimeout(()=>{c=null,A(i)},r-m)))},()=>i&&A(i)]}const qy=(t,s,n=3)=>{let r=0;const i=U7(50,250);return L7(c=>{const A=c.loaded,u=c.lengthComputable?c.total:void 0,d=A-r,h=i(d),o=A<=u;r=A;const m={loaded:A,total:u,progress:u?A/u:void 0,bytes:d,rate:h||void 0,estimated:h&&u&&o?(u-A)/h:void 0,event:c,lengthComputable:u!=null,[s?"download":"upload"]:!0};t(m)},n)},rN=(t,s)=>{const n=t!=null;return[r=>s[0]({lengthComputable:n,total:t,loaded:r}),s[1]]},aN=t=>(...s)=>zt.asap(()=>t(...s)),D7=$o.hasStandardBrowserEnv?((t,s)=>n=>(n=new URL(n,$o.origin),t.protocol===n.protocol&&t.host===n.host&&(s||t.port===n.port)))(new URL($o.origin),$o.navigator&&/(msie|trident)/i.test($o.navigator.userAgent)):()=>!0,Q7=$o.hasStandardBrowserEnv?{write(t,s,n,r,i,c,A){if(typeof document>"u")return;const u=[`${t}=${encodeURIComponent(s)}`];zt.isNumber(n)&&u.push(`expires=${new Date(n).toUTCString()}`),zt.isString(r)&&u.push(`path=${r}`),zt.isString(i)&&u.push(`domain=${i}`),c===!0&&u.push("secure"),zt.isString(A)&&u.push(`SameSite=${A}`),document.cookie=u.join("; ")},read(t){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function _7(t){return typeof t!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function M7(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function QT(t,s,n){let r=!_7(s);return t&&(r||n==!1)?M7(t,s):s}const iN=t=>t instanceof Tl?{...t}:t;function xh(t,s){s=s||{};const n={};function r(h,o,m,y){return zt.isPlainObject(h)&&zt.isPlainObject(o)?zt.merge.call({caseless:y},h,o):zt.isPlainObject(o)?zt.merge({},o):zt.isArray(o)?o.slice():o}function i(h,o,m,y){if(zt.isUndefined(o)){if(!zt.isUndefined(h))return r(void 0,h,m,y)}else return r(h,o,m,y)}function c(h,o){if(!zt.isUndefined(o))return r(void 0,o)}function A(h,o){if(zt.isUndefined(o)){if(!zt.isUndefined(h))return r(void 0,h)}else return r(void 0,o)}function u(h,o,m){if(m in s)return r(h,o);if(m in t)return r(void 0,h)}const d={url:c,method:c,data:c,baseURL:A,transformRequest:A,transformResponse:A,paramsSerializer:A,timeout:A,timeoutMessage:A,withCredentials:A,withXSRFToken:A,adapter:A,responseType:A,xsrfCookieName:A,xsrfHeaderName:A,onUploadProgress:A,onDownloadProgress:A,decompress:A,maxContentLength:A,maxBodyLength:A,beforeRedirect:A,transport:A,httpAgent:A,httpsAgent:A,cancelToken:A,socketPath:A,responseEncoding:A,validateStatus:u,headers:(h,o,m)=>i(iN(h),iN(o),m,!0)};return zt.forEach(Object.keys({...t,...s}),function(o){if(o==="__proto__"||o==="constructor"||o==="prototype")return;const m=zt.hasOwnProp(d,o)?d[o]:i,y=m(t[o],s[o],o);zt.isUndefined(y)&&m!==u||(n[o]=y)}),n}const _T=t=>{const s=xh({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:c,headers:A,auth:u}=s;if(s.headers=A=Tl.from(A),s.url=OT(QT(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&A.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),zt.isFormData(n)){if($o.hasStandardBrowserEnv||$o.hasStandardBrowserWebWorkerEnv)A.setContentType(void 0);else if(zt.isFunction(n.getHeaders)){const d=n.getHeaders(),h=["content-type","content-length"];Object.entries(d).forEach(([o,m])=>{h.includes(o.toLowerCase())&&A.set(o,m)})}}if($o.hasStandardBrowserEnv&&(r&&zt.isFunction(r)&&(r=r(s)),r||r!==!1&&D7(s.url))){const d=i&&c&&Q7.read(c);d&&A.set(i,d)}return s},P7=typeof XMLHttpRequest<"u",k7=P7&&function(t){return new Promise(function(n,r){const i=_T(t);let c=i.data;const A=Tl.from(i.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:h}=i,o,m,y,p,j;function b(){p&&p(),j&&j(),i.cancelToken&&i.cancelToken.unsubscribe(o),i.signal&&i.signal.removeEventListener("abort",o)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function B(){if(!w)return;const Q=Tl.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),z={data:!u||u==="text"||u==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:Q,config:t,request:w};DT(function($){n($),b()},function($){r($),b()},z),w=null}"onloadend"in w?w.onloadend=B:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(B)},w.onabort=function(){w&&(r(new Gn("Request aborted",Gn.ECONNABORTED,t,w)),w=null)},w.onerror=function(k){const z=k&&k.message?k.message:"Network Error",J=new Gn(z,Gn.ERR_NETWORK,t,w);J.event=k||null,r(J),w=null},w.ontimeout=function(){let k=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const z=i.transitional||yj;i.timeoutErrorMessage&&(k=i.timeoutErrorMessage),r(new Gn(k,z.clarifyTimeoutError?Gn.ETIMEDOUT:Gn.ECONNABORTED,t,w)),w=null},c===void 0&&A.setContentType(null),"setRequestHeader"in w&&zt.forEach(A.toJSON(),function(k,z){w.setRequestHeader(z,k)}),zt.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),u&&u!=="json"&&(w.responseType=i.responseType),h&&([y,j]=qy(h,!0),w.addEventListener("progress",y)),d&&w.upload&&([m,p]=qy(d),w.upload.addEventListener("progress",m),w.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(o=Q=>{w&&(r(!Q||Q.type?new Rm(null,t,w):Q),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(o),i.signal&&(i.signal.aborted?o():i.signal.addEventListener("abort",o)));const L=O7(i.url);if(L&&$o.protocols.indexOf(L)===-1){r(new Gn("Unsupported protocol "+L+":",Gn.ERR_BAD_REQUEST,t));return}w.send(c||null)})},H7=(t,s)=>{const{length:n}=t=t?t.filter(Boolean):[];if(s||n){let r=new AbortController,i;const c=function(h){if(!i){i=!0,u();const o=h instanceof Error?h:this.reason;r.abort(o instanceof Gn?o:new Rm(o instanceof Error?o.message:o))}};let A=s&&setTimeout(()=>{A=null,c(new Gn(`timeout of ${s}ms exceeded`,Gn.ETIMEDOUT))},s);const u=()=>{t&&(A&&clearTimeout(A),A=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(c):h.removeEventListener("abort",c)}),t=null)};t.forEach(h=>h.addEventListener("abort",c));const{signal:d}=r;return d.unsubscribe=()=>zt.asap(u),d}},K7=function*(t,s){let n=t.byteLength;if(n<s){yield t;return}let r=0,i;for(;r<n;)i=r+s,yield t.slice(r,i),r=i},z7=async function*(t,s){for await(const n of V7(t))yield*K7(n,s)},V7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:n,value:r}=await s.read();if(n)break;yield r}}finally{await s.cancel()}},oN=(t,s,n,r)=>{const i=z7(t,s);let c=0,A,u=d=>{A||(A=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:h,value:o}=await i.next();if(h){u(),d.close();return}let m=o.byteLength;if(n){let y=c+=m;n(y)}d.enqueue(new Uint8Array(o))}catch(h){throw u(h),h}},cancel(d){return u(d),i.return()}},{highWaterMark:2})},lN=64*1024,{isFunction:Hg}=zt,$7=(({Request:t,Response:s})=>({Request:t,Response:s}))(zt.global),{ReadableStream:cN,TextEncoder:dN}=zt.global,AN=(t,...s)=>{try{return!!t(...s)}catch{return!1}},G7=t=>{t=zt.merge.call({skipUndefined:!0},$7,t);const{fetch:s,Request:n,Response:r}=t,i=s?Hg(s):typeof fetch=="function",c=Hg(n),A=Hg(r);if(!i)return!1;const u=i&&Hg(cN),d=i&&(typeof dN=="function"?(j=>b=>j.encode(b))(new dN):async j=>new Uint8Array(await new n(j).arrayBuffer())),h=c&&u&&AN(()=>{let j=!1;const b=new n($o.origin,{body:new cN,method:"POST",get duplex(){return j=!0,"half"}}).headers.has("Content-Type");return j&&!b}),o=A&&u&&AN(()=>zt.isReadableStream(new r("").body)),m={stream:o&&(j=>j.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(j=>{!m[j]&&(m[j]=(b,w)=>{let B=b&&b[j];if(B)return B.call(b);throw new Gn(`Response type '${j}' is not supported`,Gn.ERR_NOT_SUPPORT,w)})});const y=async j=>{if(j==null)return 0;if(zt.isBlob(j))return j.size;if(zt.isSpecCompliantForm(j))return(await new n($o.origin,{method:"POST",body:j}).arrayBuffer()).byteLength;if(zt.isArrayBufferView(j)||zt.isArrayBuffer(j))return j.byteLength;if(zt.isURLSearchParams(j)&&(j=j+""),zt.isString(j))return(await d(j)).byteLength},p=async(j,b)=>{const w=zt.toFiniteNumber(j.getContentLength());return w??y(b)};return async j=>{let{url:b,method:w,data:B,signal:L,cancelToken:Q,timeout:k,onDownloadProgress:z,onUploadProgress:J,responseType:$,headers:q,withCredentials:X="same-origin",fetchOptions:fe}=_T(j),ee=s||fetch;$=$?($+"").toLowerCase():"text";let le=H7([L,Q&&Q.toAbortSignal()],k),ue=null;const te=le&&le.unsubscribe&&(()=>{le.unsubscribe()});let re;try{if(J&&h&&w!=="get"&&w!=="head"&&(re=await p(q,B))!==0){let me=new n(b,{method:"POST",body:B,duplex:"half"}),Z;if(zt.isFormData(B)&&(Z=me.headers.get("content-type"))&&q.setContentType(Z),me.body){const[ge,we]=rN(re,qy(aN(J)));B=oN(me.body,lN,ge,we)}}zt.isString(X)||(X=X?"include":"omit");const ne=c&&"credentials"in n.prototype,oe={...fe,signal:le,method:w.toUpperCase(),headers:q.normalize().toJSON(),body:B,duplex:"half",credentials:ne?X:void 0};ue=c&&new n(b,oe);let se=await(c?ee(ue,fe):ee(b,oe));const xe=o&&($==="stream"||$==="response");if(o&&(z||xe&&te)){const me={};["status","statusText","headers"].forEach(pe=>{me[pe]=se[pe]});const Z=zt.toFiniteNumber(se.headers.get("content-length")),[ge,we]=z&&rN(Z,qy(aN(z),!0))||[];se=new r(oN(se.body,lN,ge,()=>{we&&we(),te&&te()}),me)}$=$||"text";let Me=await m[zt.findKey(m,$)||"text"](se,j);return!xe&&te&&te(),await new Promise((me,Z)=>{DT(me,Z,{data:Me,headers:Tl.from(se.headers),status:se.status,statusText:se.statusText,config:j,request:ue})})}catch(ne){throw te&&te(),ne&&ne.name==="TypeError"&&/Load failed|fetch/i.test(ne.message)?Object.assign(new Gn("Network Error",Gn.ERR_NETWORK,j,ue,ne&&ne.response),{cause:ne.cause||ne}):Gn.from(ne,ne&&ne.code,j,ue,ne&&ne.response)}}},q7=new Map,MT=t=>{let s=t&&t.env||{};const{fetch:n,Request:r,Response:i}=s,c=[r,i,n];let A=c.length,u=A,d,h,o=q7;for(;u--;)d=c[u],h=o.get(d),h===void 0&&o.set(d,h=u?new Map:G7(s)),o=h;return h};MT();const vj={http:A7,xhr:k7,fetch:{get:MT}};zt.forEach(vj,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const uN=t=>`- ${t}`,W7=t=>zt.isFunction(t)||t===null||t===!1;function Y7(t,s){t=zt.isArray(t)?t:[t];const{length:n}=t;let r,i;const c={};for(let A=0;A<n;A++){r=t[A];let u;if(i=r,!W7(r)&&(i=vj[(u=String(r)).toLowerCase()],i===void 0))throw new Gn(`Unknown adapter '${u}'`);if(i&&(zt.isFunction(i)||(i=i.get(s))))break;c[u||"#"+A]=i}if(!i){const A=Object.entries(c).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let u=n?A.length>1?`since :
`+A.map(uN).join(`
`):" "+uN(A[0]):"as no adapter specified";throw new Gn("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i}const PT={getAdapter:Y7,adapters:vj};function sv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Rm(null,t)}function hN(t){return sv(t),t.headers=Tl.from(t.headers),t.data=tv.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),PT.getAdapter(t.adapter||Im.adapter,t)(t).then(function(r){return sv(t),r.data=tv.call(t,t.transformResponse,r),r.headers=Tl.from(r.headers),r},function(r){return LT(r)||(sv(t),r&&r.response&&(r.response.data=tv.call(t,t.transformResponse,r.response),r.response.headers=Tl.from(r.response.headers))),Promise.reject(r)})}const kT="1.13.5",Fx={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Fx[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const fN={};Fx.transitional=function(s,n,r){function i(c,A){return"[Axios v"+kT+"] Transitional option '"+c+"'"+A+(r?". "+r:"")}return(c,A,u)=>{if(s===!1)throw new Gn(i(A," has been removed"+(n?" in "+n:"")),Gn.ERR_DEPRECATED);return n&&!fN[A]&&(fN[A]=!0,console.warn(i(A," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(c,A,u):!0}};Fx.spelling=function(s){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function X7(t,s,n){if(typeof t!="object")throw new Gn("options must be an object",Gn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const c=r[i],A=s[c];if(A){const u=t[c],d=u===void 0||A(u,c,t);if(d!==!0)throw new Gn("option "+c+" must be "+d,Gn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Gn("Unknown option "+c,Gn.ERR_BAD_OPTION)}}const yy={assertOptions:X7,validators:Fx},vc=yy.validators;let dh=class{constructor(s){this.defaults=s||{},this.interceptors={request:new sN,response:new sN}}async request(s,n){try{return await this._request(s,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const c=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?c&&!String(r.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+c):r.stack=c}catch{}}throw r}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=xh(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:c}=n;r!==void 0&&yy.assertOptions(r,{silentJSONParsing:vc.transitional(vc.boolean),forcedJSONParsing:vc.transitional(vc.boolean),clarifyTimeoutError:vc.transitional(vc.boolean),legacyInterceptorReqResOrdering:vc.transitional(vc.boolean)},!1),i!=null&&(zt.isFunction(i)?n.paramsSerializer={serialize:i}:yy.assertOptions(i,{encode:vc.function,serialize:vc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),yy.assertOptions(n,{baseUrl:vc.spelling("baseURL"),withXsrfToken:vc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let A=c&&zt.merge(c.common,c[n.method]);c&&zt.forEach(["delete","get","head","post","put","patch","common"],j=>{delete c[j]}),n.headers=Tl.concat(A,c);const u=[];let d=!0;this.interceptors.request.forEach(function(b){if(typeof b.runWhen=="function"&&b.runWhen(n)===!1)return;d=d&&b.synchronous;const w=n.transitional||yj;w&&w.legacyInterceptorReqResOrdering?u.unshift(b.fulfilled,b.rejected):u.push(b.fulfilled,b.rejected)});const h=[];this.interceptors.response.forEach(function(b){h.push(b.fulfilled,b.rejected)});let o,m=0,y;if(!d){const j=[hN.bind(this),void 0];for(j.unshift(...u),j.push(...h),y=j.length,o=Promise.resolve(n);m<y;)o=o.then(j[m++],j[m++]);return o}y=u.length;let p=n;for(;m<y;){const j=u[m++],b=u[m++];try{p=j(p)}catch(w){b.call(this,w);break}}try{o=hN.call(this,p)}catch(j){return Promise.reject(j)}for(m=0,y=h.length;m<y;)o=o.then(h[m++],h[m++]);return o}getUri(s){s=xh(this.defaults,s);const n=QT(s.baseURL,s.url,s.allowAbsoluteUrls);return OT(n,s.params,s.paramsSerializer)}};zt.forEach(["delete","get","head","options"],function(s){dh.prototype[s]=function(n,r){return this.request(xh(r||{},{method:s,url:n,data:(r||{}).data}))}});zt.forEach(["post","put","patch"],function(s){function n(r){return function(c,A,u){return this.request(xh(u||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:c,data:A}))}}dh.prototype[s]=n(),dh.prototype[s+"Form"]=n(!0)});let J7=class HT{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const r=this;this.promise.then(i=>{if(!r._listeners)return;let c=r._listeners.length;for(;c-- >0;)r._listeners[c](i);r._listeners=null}),this.promise.then=i=>{let c;const A=new Promise(u=>{r.subscribe(u),c=u}).then(i);return A.cancel=function(){r.unsubscribe(c)},A},s(function(c,A,u){r.reason||(r.reason=new Rm(c,A,u),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=r=>{s.abort(r)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new HT(function(i){s=i}),cancel:s}}};function Z7(t){return function(n){return t.apply(null,n)}}function e9(t){return zt.isObject(t)&&t.isAxiosError===!0}const Mb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Mb).forEach(([t,s])=>{Mb[s]=t});function KT(t){const s=new dh(t),n=jT(dh.prototype.request,s);return zt.extend(n,dh.prototype,s,{allOwnKeys:!0}),zt.extend(n,s,null,{allOwnKeys:!0}),n.create=function(i){return KT(xh(t,i))},n}const Qi=KT(Im);Qi.Axios=dh;Qi.CanceledError=Rm;Qi.CancelToken=J7;Qi.isCancel=LT;Qi.VERSION=kT;Qi.toFormData=Tx;Qi.AxiosError=Gn;Qi.Cancel=Qi.CanceledError;Qi.all=function(s){return Promise.all(s)};Qi.spread=Z7;Qi.isAxiosError=e9;Qi.mergeConfig=xh;Qi.AxiosHeaders=Tl;Qi.formToJSON=t=>UT(zt.isHTMLForm(t)?new FormData(t):t);Qi.getAdapter=PT.getAdapter;Qi.HttpStatusCode=Mb;Qi.default=Qi;const{Axios:uW,AxiosError:hW,CanceledError:fW,isCancel:pW,CancelToken:mW,VERSION:gW,all:yW,Cancel:xW,isAxiosError:vW,spread:bW,toFormData:jW,AxiosHeaders:wW,HttpStatusCode:SW,formToJSON:NW,getAdapter:BW,mergeConfig:CW}=Qi;function t9(){const[,t]=bo(),{toast:s}=ma(),[n,r]=S.useState(!1),[i,c]=S.useState(null),[A,u]=S.useState(""),[d,h]=S.useState(""),[o,m]=S.useState(null),[y,p]=S.useState(!1);S.useEffect(()=>{const w=new URLSearchParams(window.location.search).get("token");w?c(w):m("Reset token is missing from the URL. Please use the link sent to your email.")},[]);const j=async b=>{if(b.preventDefault(),m(null),!i){m("Invalid or missing reset token.");return}if(A.length<6){m("Password must be at least 6 characters long.");return}if(A!==d){m("Passwords do not match.");return}r(!0);try{(await Qi.post("/api/auth/reset-password",{token:i,newPassword:A})).status===200&&(p(!0),s({title:"Success",description:"Your password has been reset successfully."}),setTimeout(()=>{t("/")},3e3))}catch(w){const B=w.response?.data?.message||"Failed to reset password. The link may have expired.";m(B),s({title:"Error",description:B,variant:"destructive"})}finally{r(!1)}};return y?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-100 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gray-100 rounded-full blur-3xl"}),e.jsx(Ss.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10 text-center",children:e.jsx(ks,{className:"border-2 border-green-200 shadow-2xl bg-white p-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center text-green-600 mb-2",children:e.jsx(Wo,{className:"h-10 w-10"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Password Reset Successful"}),e.jsx("p",{className:"text-gray-600",children:"Your password has been updated. You will be redirected to the login page in a few seconds..."}),e.jsx(Be,{onClick:()=>t("/"),className:"mt-4 bg-blue-600 hover:bg-blue-700",children:"Go to Login Now"})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-100 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gray-100 rounded-full blur-3xl"}),e.jsx(Ss.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10",children:e.jsxs(ks,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(ur,{className:"space-y-2 pb-6 border-b border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-600 flex items-center justify-center text-white",children:e.jsx(dL,{className:"h-6 w-6"})})}),e.jsx(hr,{className:"text-center text-2xl font-bold text-gray-900",children:"Reset Password"}),e.jsx(na,{className:"text-center text-gray-600",children:"Enter your new password below to regain access to your account."})]}),e.jsxs(Ws,{className:"pt-6",children:[o&&e.jsxs("div",{className:"mb-6 p-3 rounded-lg bg-red-50 border border-red-100 flex gap-3 text-red-700 text-sm animate-in fade-in slide-in-from-top-2",children:[e.jsx(mh,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{children:o})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{className:"text-sm font-medium text-gray-700",children:"New Password"}),e.jsx($e,{type:"password",placeholder:"",value:A,onChange:b=>u(b.target.value),required:!0,disabled:!i||n,className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{className:"text-sm font-medium text-gray-700",children:"Confirm New Password"}),e.jsx($e,{type:"password",placeholder:"",value:d,onChange:b=>h(b.target.value),required:!0,disabled:!i||n,className:"h-11"})]}),e.jsx(Be,{type:"submit",className:"w-full h-11 text-base font-semibold bg-blue-600 hover:bg-blue-700",disabled:!i||n,children:n?"Resetting Password...":"Update Password"})]})]}),e.jsx(Ch,{className:"justify-center border-t border-gray-100 pt-6 bg-gray-50/50",children:e.jsxs(Be,{variant:"link",onClick:()=>t("/"),className:"text-blue-600 hover:underline font-medium p-0 h-auto",children:[e.jsx(jf,{className:"h-4 w-4 mr-2"}),"Back to Login"]})})]})})]})}function pN(){return bo(),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-100 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gray-100 rounded-full blur-3xl"}),e.jsx(Ss.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10",children:e.jsxs(ks,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(ur,{className:"space-y-2 pb-6 border-b border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-yellow-500 flex items-center justify-center text-white",children:e.jsx(rb,{className:"h-6 w-6"})})}),e.jsx(hr,{className:"text-center text-2xl font-bold text-gray-900",children:"Account Under Verification"})]}),e.jsx(Ws,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(rb,{className:"h-8 w-8 text-yellow-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Your account is currently under review. You will be able to access the system once your account is approved by the BOQ team."}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"What happens next?"}),e.jsx("br",{})," Our team will review your application",e.jsx("br",{})," You will receive an email notification once approved",e.jsx("br",{})," Approval typically takes 1-2 business days"]})})]})]})}),e.jsx(Ch,{className:"justify-center border-t border-gray-100 pt-6 bg-gray-50/50",children:e.jsxs(pa,{href:"/",className:"flex items-center gap-2 text-blue-600 hover:underline font-medium",children:[e.jsx(jf,{className:"h-4 w-4"}),"Back to Login"]})})]})})]})}const s9=ox("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:"text-foreground border [border-color:var(--badge-outline)]"}},defaultVariants:{variant:"default"}});function Bl({className:t,variant:s,...n}){return e.jsx("div",{className:Vs(s9({variant:s}),t),...n})}const mN={BrickWall:t5,DoorOpen:n5,Cloud:s5,Layers:lx,PaintBucket:l5,Blinds:e5,Zap:Qy,Droplets:r5,Hammer:lL,ShieldAlert:c5},n9=[{icon:t5,label:"Civil ",href:"/estimators/civil-wall"},{icon:n5,label:"Doors",href:"/estimators/doors"},{icon:s5,label:"False Ceiling",href:"/estimators/false-ceiling"},{icon:lx,label:"Flooring",href:"/estimators/flooring"},{icon:l5,label:"Painting",href:"/estimators/painting"},{icon:e5,label:"Blinds",href:"/estimators/blinds"},{icon:Qy,label:"Electrical",href:"/estimators/electrical"},{icon:r5,label:"Plumbing",href:"/estimators/plumbing"}];function r9(){const[t,s]=bo(),[n,r]=S.useState(!0),[i,c]=S.useState(""),[A,u]=S.useState([]),[d,h]=S.useState(!0),{user:o,logout:m,supportMessages:y,materialApprovalRequests:p}=ei(),[j,b]=S.useState(0),[w,B]=S.useState(0),[L,Q]=S.useState(0);S.useEffect(()=>{const te=async()=>{try{h(!0);const ne=await ct("/api/sidebar-subcategories",{headers:{}});if(ne.ok){const xe=((await ne.json()).subcategories||[]).map(Me=>({...Me,icon:mN[Me.icon]||lx}));u(xe)}}catch(ne){console.warn("Failed to load subcategories:",ne),u(n9.map(oe=>({id:oe.label,name:oe.label,href:oe.href,icon:Object.entries(mN).find(([se,xe])=>xe===oe.icon)?.[0]||"Layers",category:"Estimators"})))}finally{h(!1)}};te();const re=setInterval(te,3e4);return()=>clearInterval(re)},[]),S.useEffect(()=>{(async()=>{try{const te=await fetch("/api/shops-pending-approval");if(te.ok){const re=await te.json();b((re?.shops||[]).filter(ne=>ne.status==="pending").length)}}catch(te){console.warn("load shop count failed",te)}})()},[]),S.useEffect(()=>{try{if(!p){B(0);return}B((p||[]).filter(te=>te.status==="pending").length)}catch(te){console.warn("compute material pending count failed",te),B(0)}},[p]),S.useEffect(()=>{try{if(!y){Q(0);return}const te=(y||[]).filter(re=>re.is_read===!1).length;Q(te||(y||[]).length)}catch(te){console.warn("compute message count failed",te),Q(0)}},[y]);const k=()=>{m(),s("/")},z=o?.role==="admin"||o?.role==="software_team",J=o?.role==="pre_sales",$=o?.role==="contractor",q=o?.role==="admin"||o?.role==="software_team"||o?.role==="purchase_team";o?.role==="supplier"||o?.role;const X=o?.role==="user",fe=o?.role==="admin";o?.role==="admin"||o?.role;const le=typeof window>"u"?null:new URL(window.location.href).searchParams.get("tab"),ue=i?A.filter(te=>(te.name||te.label).toLowerCase().includes(i.toLowerCase())):A;return e.jsxs(e.Fragment,{children:[e.jsx(Be,{variant:"ghost",size:"icon",className:"fixed top-4 left-4 z-50 md:hidden",onClick:()=>r(!n),children:n?e.jsx(cx,{className:"h-6 w-6"}):e.jsx(o5,{className:"h-6 w-6"})}),e.jsxs("aside",{className:Vs("fixed inset-y-0 left-0 z-40 w-64 transform bg-sidebar border-r border-sidebar-border transition-transform duration-200 ease-in-out md:translate-x-0 flex flex-col",n?"translate-x-0":"-translate-x-full"),children:[e.jsx("div",{className:"flex h-16 items-center justify-center border-b border-sidebar-border bg-sidebar-primary/10",children:e.jsxs("h1",{className:"text-xl font-bold tracking-tight text-sidebar-primary font-heading",children:["BUILD",e.jsx("span",{className:"text-foreground",children:"ESTIMATE"})]})}),e.jsxs("nav",{className:"flex-1 overflow-y-auto py-4 px-3 space-y-1",children:[!J&&!$&&o?.role!=="supplier"&&e.jsx(pa,{href:"/dashboard",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/dashboard"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),children:[e.jsx(a5,{className:"h-4 w-4"}),"Dashboard"]})}),J&&e.jsxs(e.Fragment,{children:[e.jsx(pa,{href:"/create-project",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-2 cursor-pointer",t==="/create-project"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(Sl,{className:"h-4 w-4"})," Create Project"]})}),e.jsx(pa,{href:"/create-boq",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/create-boq"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(Dy,{className:"h-4 w-4"})," Create BOQ"]})}),e.jsx(pa,{href:"/admin/dashboard?tab=create-product",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/admin/dashboard?tab=create-product"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(ol,{className:"h-4 w-4"})," Create Product"]})})]}),q&&!J&&!$&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Admin"}),e.jsx(pa,{href:"/admin/dashboard?tab=materials",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",le==="materials"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(ol,{className:"h-4 w-4"})," Create Item"]})}),e.jsx(pa,{href:"/admin/dashboard?tab=create-product",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",le==="create-product"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(ol,{className:"h-4 w-4"})," Create Product"]})}),e.jsx(pa,{href:"/admin/manage-product",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/admin/manage-product"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(ol,{className:"h-4 w-4"})," Manage Product"]})}),e.jsx(pa,{href:"/admin/manage-materials",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/admin/manage-materials"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(ol,{className:"h-4 w-4"})," Manage Materials"]})}),e.jsx(pa,{href:"/admin/vendor-categories",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/admin/vendor-categories"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(DL,{className:"h-4 w-4"})," Vendor Categories"]})}),e.jsx(pa,{href:"/admin/dashboard?tab=shops",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",le==="shops"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(Sl,{className:"h-4 w-4"})," Manage Shops"]})}),e.jsx(pa,{href:"/admin/dashboard?tab=approvals",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",le==="approvals"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(c5,{className:"h-4 w-4"})," Shop Approvals",j>0&&e.jsx(Bl,{variant:"destructive",className:"ml-auto",children:j})]})}),e.jsx(pa,{href:"/admin/dashboard?tab=material-approvals",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",le==="material-approvals"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(Wo,{className:"h-4 w-4"})," Material Approvals",w>0&&e.jsx(Bl,{variant:"destructive",className:"ml-auto",children:w})]})}),fe&&e.jsx(pa,{href:"/admin/suppliers",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/admin/suppliers"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(d5,{className:"h-4 w-4"})," Supplier Approvals"]})}),e.jsx(pa,{href:"/admin/dashboard?tab=messages",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",le==="messages"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(gh,{className:"h-4 w-4"})," Messages",L>0&&e.jsx(Bl,{variant:"secondary",className:"ml-auto",children:L})]})}),fe&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 mb-2 mt-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Projects"}),e.jsx(pa,{href:"/create-project",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/create-project"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(Sl,{className:"h-4 w-4"})," Create Project"]})}),e.jsx(pa,{href:"/create-boq",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/create-boq"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(Dy,{className:"h-4 w-4"})," Create BOQ"]})})]})]}),!J&&!$&&(o?.role==="supplier"||o?.role==="admin")?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:o?.role==="admin"?"Materials":"Supplier"}),o?.role==="supplier"&&e.jsx(pa,{href:"/supplier/shops",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/supplier/shops"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(Sl,{className:"h-4 w-4"})," Add Shop"]})}),o?.role==="supplier"&&e.jsx(pa,{href:"/supplier/materials",children:e.jsxs("span",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/supplier/materials"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(ol,{className:"h-4 w-4"})," Manage Materials"]})})]}):null,($||X||z||o?.role==="purchase_team")&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Sub-Categories"}),e.jsx("div",{className:"px-3 mb-2",children:e.jsx("input",{value:i,onChange:te=>c(te.target.value),placeholder:"Search Sub-Categories",className:"w-full rounded-md border px-2 py-1 text-sm bg-transparent text-sidebar-foreground placeholder:text-muted-foreground"})}),e.jsx("div",{className:"max-h-[260px] overflow-y-auto pr-1",children:ue.map(te=>{const re=te.href||`/estimators/${(te.name||te.label).toLowerCase().replace(/[\s/]+/g,"-")}`,ne=te.icon;return e.jsx(pa,{href:re,children:e.jsxs("div",{className:Vs("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t===re?"bg-sidebar-primary text-sidebar-primary-foreground shadow-md":"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"),onClick:()=>r(!1),children:[ne&&e.jsx(ne,{className:"h-4 w-4"}),te.name||te.label]})},te.id||re)})})]}),!J&&!$&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-6 px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Resources"}),e.jsx(pa,{href:"/subscription",children:e.jsxs("span",{className:"flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium text-sidebar-foreground hover:bg-sidebar-accent cursor-pointer",children:[e.jsx(ol,{className:"h-4 w-4"}),"Subscription"]})})]})]}),e.jsxs("div",{className:"border-t border-sidebar-border p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-sidebar-primary/20 flex items-center justify-center text-sidebar-primary font-bold",children:o?.fullName?.[0]?.toUpperCase()||o?.username?.[0]?.toUpperCase()||"U"}),e.jsxs("div",{className:"flex flex-col overflow-hidden",children:[e.jsx("span",{className:"text-sm font-medium text-sidebar-foreground truncate",children:o?.fullName||o?.username||"Guest"}),e.jsx("span",{className:"text-xs text-muted-foreground truncate capitalize",children:o?.role?.replace("_"," ")||"Visitor"})]})]}),e.jsxs(Be,{variant:"outline",className:"w-full justify-start text-destructive hover:text-destructive",onClick:k,children:[e.jsx(i5,{className:"mr-2 h-4 w-4"})," Log Out"]})]})]})]})}function ka({children:t}){return e.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[e.jsx(r9,{}),e.jsx("main",{className:"md:pl-64 min-h-screen transition-all duration-200",children:e.jsx("div",{className:"container mx-auto p-4 md:p-8 pt-16 md:pt-8 max-w-7xl",children:t})})]})}function nv(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}var a9=mA[" useInsertionEffect ".trim().toString()]||ti;function i9({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[i,c,A]=o9({defaultProp:s,onChange:n}),u=t!==void 0,d=u?t:i;{const o=S.useRef(t!==void 0);S.useEffect(()=>{const m=o.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),o.current=u},[u,r])}const h=S.useCallback(o=>{if(u){const m=l9(o)?o(t):o;m!==t&&A.current?.(m)}else c(o)},[u,t,c,A]);return[d,h]}function o9({defaultProp:t,onChange:s}){const[n,r]=S.useState(t),i=S.useRef(n),c=S.useRef(s);return a9(()=>{c.current=s},[s]),S.useEffect(()=>{i.current!==n&&(c.current?.(n),i.current=n)},[n,i]),[n,r,c]}function l9(t){return typeof t=="function"}var Ix="Tabs",[c9]=Cc(Ix,[wx]),zT=wx(),[d9,bj]=c9(Ix),VT=S.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:c,orientation:A="horizontal",dir:u,activationMode:d="automatic",...h}=t,o=jx(u),[m,y]=i9({prop:r,onChange:i,defaultProp:c??"",caller:Ix});return e.jsx(d9,{scope:n,baseId:du(),value:m,onValueChange:y,orientation:A,dir:o,activationMode:d,children:e.jsx(mr.div,{dir:o,"data-orientation":A,...h,ref:s})})});VT.displayName=Ix;var $T="TabsList",GT=S.forwardRef((t,s)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,c=bj($T,n),A=zT(n);return e.jsx(X4,{asChild:!0,...A,orientation:c.orientation,dir:c.dir,loop:r,children:e.jsx(mr.div,{role:"tablist","aria-orientation":c.orientation,...i,ref:s})})});GT.displayName=$T;var qT="TabsTrigger",WT=S.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...c}=t,A=bj(qT,n),u=zT(n),d=JT(A.baseId,r),h=ZT(A.baseId,r),o=r===A.value;return e.jsx(J4,{asChild:!0,...u,focusable:!i,active:o,children:e.jsx(mr.button,{type:"button",role:"tab","aria-selected":o,"aria-controls":h,"data-state":o?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...c,ref:s,onMouseDown:nv(t.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?A.onValueChange(r):m.preventDefault()}),onKeyDown:nv(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&A.onValueChange(r)}),onFocus:nv(t.onFocus,()=>{const m=A.activationMode!=="manual";!o&&!i&&m&&A.onValueChange(r)})})})});WT.displayName=qT;var YT="TabsContent",XT=S.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,forceMount:i,children:c,...A}=t,u=bj(YT,n),d=JT(u.baseId,r),h=ZT(u.baseId,r),o=r===u.value,m=S.useRef(o);return S.useEffect(()=>{const y=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(y)},[]),e.jsx(gA,{present:i||o,children:({present:y})=>e.jsx(mr.div,{"data-state":o?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!y,id:h,tabIndex:0,...A,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:y&&c})})});XT.displayName=YT;function JT(t,s){return`${t}-trigger-${s}`}function ZT(t,s){return`${t}-content-${s}`}var A9=VT,eF=GT,tF=WT,sF=XT;const u9=A9,h9=S.forwardRef(({className:t,...s},n)=>e.jsx(eF,{ref:n,className:Vs("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...s}));h9.displayName=eF.displayName;const f9=S.forwardRef(({className:t,...s},n)=>e.jsx(tF,{ref:n,className:Vs("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...s}));f9.displayName=tF.displayName;const nu=S.forwardRef(({className:t,...s},n)=>e.jsx(sF,{ref:n,className:Vs("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));nu.displayName=sF.displayName;function gN(t,[s,n]){return Math.min(n,Math.max(s,t))}function xo(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}var rv=0;function nF(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??yN()),document.body.insertAdjacentElement("beforeend",t[1]??yN()),rv++,()=>{rv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),rv--}},[])}function yN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var av="focusScope.autoFocusOnMount",iv="focusScope.autoFocusOnUnmount",xN={bubbles:!1,cancelable:!0},p9="FocusScope",jj=S.forwardRef((t,s)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:c,...A}=t,[u,d]=S.useState(null),h=qo(i),o=qo(c),m=S.useRef(null),y=Mr(s,b=>d(b)),p=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let b=function(Q){if(p.paused||!u)return;const k=Q.target;u.contains(k)?m.current=k:ru(m.current,{select:!0})},w=function(Q){if(p.paused||!u)return;const k=Q.relatedTarget;k!==null&&(u.contains(k)||ru(m.current,{select:!0}))},B=function(Q){if(document.activeElement===document.body)for(const z of Q)z.removedNodes.length>0&&ru(u)};document.addEventListener("focusin",b),document.addEventListener("focusout",w);const L=new MutationObserver(B);return u&&L.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",w),L.disconnect()}}},[r,u,p.paused]),S.useEffect(()=>{if(u){bN.add(p);const b=document.activeElement;if(!u.contains(b)){const B=new CustomEvent(av,xN);u.addEventListener(av,h),u.dispatchEvent(B),B.defaultPrevented||(m9(b9(rF(u)),{select:!0}),document.activeElement===b&&ru(u))}return()=>{u.removeEventListener(av,h),setTimeout(()=>{const B=new CustomEvent(iv,xN);u.addEventListener(iv,o),u.dispatchEvent(B),B.defaultPrevented||ru(b??document.body,{select:!0}),u.removeEventListener(iv,o),bN.remove(p)},0)}}},[u,h,o,p]);const j=S.useCallback(b=>{if(!n&&!r||p.paused)return;const w=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,B=document.activeElement;if(w&&B){const L=b.currentTarget,[Q,k]=g9(L);Q&&k?!b.shiftKey&&B===k?(b.preventDefault(),n&&ru(Q,{select:!0})):b.shiftKey&&B===Q&&(b.preventDefault(),n&&ru(k,{select:!0})):B===L&&b.preventDefault()}},[n,r,p.paused]);return e.jsx(mr.div,{tabIndex:-1,...A,ref:y,onKeyDown:j})});jj.displayName=p9;function m9(t,{select:s=!1}={}){const n=document.activeElement;for(const r of t)if(ru(r,{select:s}),document.activeElement!==n)return}function g9(t){const s=rF(t),n=vN(s,t),r=vN(s.reverse(),t);return[n,r]}function rF(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function vN(t,s){for(const n of t)if(!y9(n,{upTo:s}))return n}function y9(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function x9(t){return t instanceof HTMLInputElement&&"select"in t}function ru(t,{select:s=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&x9(t)&&s&&t.select()}}var bN=v9();function v9(){let t=[];return{add(s){const n=t[0];s!==n&&n?.pause(),t=jN(t,s),t.unshift(s)},remove(s){t=jN(t,s),t[0]?.resume()}}}function jN(t,s){const n=[...t],r=n.indexOf(s);return r!==-1&&n.splice(r,1),n}function b9(t){return t.filter(s=>s.tagName!=="A")}function j9(t){const s=w9(t),n=S.forwardRef((r,i)=>{const{children:c,...A}=r,u=S.Children.toArray(c),d=u.find(N9);if(d){const h=d.props.children,o=u.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return e.jsx(s,{...A,ref:i,children:S.isValidElement(h)?S.cloneElement(h,void 0,o):null})}return e.jsx(s,{...A,ref:i,children:c})});return n.displayName=`${t}.Slot`,n}function w9(t){const s=S.forwardRef((n,r)=>{const{children:i,...c}=n;if(S.isValidElement(i)){const A=C9(i),u=B9(c,i.props);return i.type!==S.Fragment&&(u.ref=r?Bh(r,A):A),S.cloneElement(i,u)}return S.Children.count(i)>1?S.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var S9=Symbol("radix.slottable");function N9(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===S9}function B9(t,s){const n={...s};for(const r in s){const i=t[r],c=s[r];/^on[A-Z]/.test(r)?i&&c?n[r]=(...u)=>{const d=c(...u);return i(...u),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...c}:r==="className"&&(n[r]=[i,c].filter(Boolean).join(" "))}return{...t,...n}}function C9(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var E9=mA[" useInsertionEffect ".trim().toString()]||ti;function wN({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[i,c,A]=T9({defaultProp:s,onChange:n}),u=t!==void 0,d=u?t:i;{const o=S.useRef(t!==void 0);S.useEffect(()=>{const m=o.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),o.current=u},[u,r])}const h=S.useCallback(o=>{if(u){const m=F9(o)?o(t):o;m!==t&&A.current?.(m)}else c(o)},[u,t,c,A]);return[d,h]}function T9({defaultProp:t,onChange:s}){const[n,r]=S.useState(t),i=S.useRef(n),c=S.useRef(s);return E9(()=>{c.current=s},[s]),S.useEffect(()=>{i.current!==n&&(c.current?.(n),i.current=n)},[n,i]),[n,r,c]}function F9(t){return typeof t=="function"}var I9=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},af=new WeakMap,Kg=new WeakMap,zg={},ov=0,aF=function(t){return t&&(t.host||aF(t.parentNode))},R9=function(t,s){return s.map(function(n){if(t.contains(n))return n;var r=aF(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},O9=function(t,s,n,r){var i=R9(s,Array.isArray(t)?t:[t]);zg[n]||(zg[n]=new WeakMap);var c=zg[n],A=[],u=new Set,d=new Set(i),h=function(m){!m||u.has(m)||(u.add(m),h(m.parentNode))};i.forEach(h);var o=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(y){if(u.has(y))o(y);else try{var p=y.getAttribute(r),j=p!==null&&p!=="false",b=(af.get(y)||0)+1,w=(c.get(y)||0)+1;af.set(y,b),c.set(y,w),A.push(y),b===1&&j&&Kg.set(y,!0),w===1&&y.setAttribute(n,"true"),j||y.setAttribute(r,"true")}catch(B){console.error("aria-hidden: cannot operate on ",y,B)}})};return o(s),u.clear(),ov++,function(){A.forEach(function(m){var y=af.get(m)-1,p=c.get(m)-1;af.set(m,y),c.set(m,p),y||(Kg.has(m)||m.removeAttribute(r),Kg.delete(m)),p||m.removeAttribute(n)}),ov--,ov||(af=new WeakMap,af=new WeakMap,Kg=new WeakMap,zg={})}},iF=function(t,s,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=I9(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),O9(r,i,n,"aria-hidden")):function(){return null}},Td=function(){return Td=Object.assign||function(s){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(s[c]=n[c])}return s},Td.apply(this,arguments)};function oF(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)s.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function U9(t,s,n){if(n||arguments.length===2)for(var r=0,i=s.length,c;r<i;r++)(c||!(r in s))&&(c||(c=Array.prototype.slice.call(s,0,r)),c[r]=s[r]);return t.concat(c||Array.prototype.slice.call(s))}var xy="right-scroll-bar-position",vy="width-before-scroll-bar",L9="with-scroll-bars-hidden",D9="--removed-body-scroll-bar-size";function lv(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function Q9(t,s){var n=S.useState(function(){return{value:t,callback:s,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=s,n.facade}var _9=typeof window<"u"?S.useLayoutEffect:S.useEffect,SN=new WeakMap;function M9(t,s){var n=Q9(null,function(r){return t.forEach(function(i){return lv(i,r)})});return _9(function(){var r=SN.get(n);if(r){var i=new Set(r),c=new Set(t),A=n.current;i.forEach(function(u){c.has(u)||lv(u,null)}),c.forEach(function(u){i.has(u)||lv(u,A)})}SN.set(n,t)},[t]),n}function P9(t){return t}function k9(t,s){s===void 0&&(s=P9);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(c){var A=s(c,r);return n.push(A),function(){n=n.filter(function(u){return u!==A})}},assignSyncMedium:function(c){for(r=!0;n.length;){var A=n;n=[],A.forEach(c)}n={push:function(u){return c(u)},filter:function(){return n}}},assignMedium:function(c){r=!0;var A=[];if(n.length){var u=n;n=[],u.forEach(c),A=n}var d=function(){var o=A;A=[],o.forEach(c)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(o){A.push(o),h()},filter:function(o){return A=A.filter(o),n}}}};return i}function H9(t){t===void 0&&(t={});var s=k9(null);return s.options=Td({async:!0,ssr:!1},t),s}var lF=function(t){var s=t.sideCar,n=oF(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=s.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Td({},n))};lF.isSideCarExport=!0;function K9(t,s){return t.useMedium(s),lF}var cF=H9(),cv=function(){},Rx=S.forwardRef(function(t,s){var n=S.useRef(null),r=S.useState({onScrollCapture:cv,onWheelCapture:cv,onTouchMoveCapture:cv}),i=r[0],c=r[1],A=t.forwardProps,u=t.children,d=t.className,h=t.removeScrollBar,o=t.enabled,m=t.shards,y=t.sideCar,p=t.noIsolation,j=t.inert,b=t.allowPinchZoom,w=t.as,B=w===void 0?"div":w,L=t.gapMode,Q=oF(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=y,z=M9([n,s]),J=Td(Td({},Q),i);return S.createElement(S.Fragment,null,o&&S.createElement(k,{sideCar:cF,removeScrollBar:h,shards:m,noIsolation:p,inert:j,setCallbacks:c,allowPinchZoom:!!b,lockRef:n,gapMode:L}),A?S.cloneElement(S.Children.only(u),Td(Td({},J),{ref:z})):S.createElement(B,Td({},J,{className:d,ref:z}),u))});Rx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rx.classNames={fullWidth:vy,zeroRight:xy};var z9=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function V9(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=z9();return s&&t.setAttribute("nonce",s),t}function $9(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function G9(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var q9=function(){var t=0,s=null;return{add:function(n){t==0&&(s=V9())&&($9(s,n),G9(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},W9=function(){var t=q9();return function(s,n){S.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&n])}},dF=function(){var t=W9(),s=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return s},Y9={left:0,top:0,right:0,gap:0},dv=function(t){return parseInt(t||"",10)||0},X9=function(t){var s=window.getComputedStyle(document.body),n=s[t==="padding"?"paddingLeft":"marginLeft"],r=s[t==="padding"?"paddingTop":"marginTop"],i=s[t==="padding"?"paddingRight":"marginRight"];return[dv(n),dv(r),dv(i)]},J9=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Y9;var s=X9(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,r-n+s[2]-s[0])}},Z9=dF(),Bf="data-scroll-locked",eK=function(t,s,n,r){var i=t.left,c=t.top,A=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(L9,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Bf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(A,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(xy,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(vy,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(xy," .").concat(xy,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(vy," .").concat(vy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Bf,`] {
    `).concat(D9,": ").concat(u,`px;
  }
`)},NN=function(){var t=parseInt(document.body.getAttribute(Bf)||"0",10);return isFinite(t)?t:0},tK=function(){S.useEffect(function(){return document.body.setAttribute(Bf,(NN()+1).toString()),function(){var t=NN()-1;t<=0?document.body.removeAttribute(Bf):document.body.setAttribute(Bf,t.toString())}},[])},sK=function(t){var s=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;tK();var c=S.useMemo(function(){return J9(i)},[i]);return S.createElement(Z9,{styles:eK(c,!s,i,n?"":"!important")})},Pb=!1;if(typeof window<"u")try{var Vg=Object.defineProperty({},"passive",{get:function(){return Pb=!0,!0}});window.addEventListener("test",Vg,Vg),window.removeEventListener("test",Vg,Vg)}catch{Pb=!1}var of=Pb?{passive:!1}:!1,nK=function(t){return t.tagName==="TEXTAREA"},AF=function(t,s){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!nK(t)&&n[s]==="visible")},rK=function(t){return AF(t,"overflowY")},aK=function(t){return AF(t,"overflowX")},BN=function(t,s){var n=s.ownerDocument,r=s;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=uF(t,r);if(i){var c=hF(t,r),A=c[1],u=c[2];if(A>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},iK=function(t){var s=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[s,n,r]},oK=function(t){var s=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[s,n,r]},uF=function(t,s){return t==="v"?rK(s):aK(s)},hF=function(t,s){return t==="v"?iK(s):oK(s)},lK=function(t,s){return t==="h"&&s==="rtl"?-1:1},cK=function(t,s,n,r,i){var c=lK(t,window.getComputedStyle(s).direction),A=c*r,u=n.target,d=s.contains(u),h=!1,o=A>0,m=0,y=0;do{var p=hF(t,u),j=p[0],b=p[1],w=p[2],B=b-w-c*j;(j||B)&&uF(t,u)&&(m+=B,y+=j),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!d&&u!==document.body||d&&(s.contains(u)||s===u));return(o&&Math.abs(m)<1||!o&&Math.abs(y)<1)&&(h=!0),h},$g=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},CN=function(t){return[t.deltaX,t.deltaY]},EN=function(t){return t&&"current"in t?t.current:t},dK=function(t,s){return t[0]===s[0]&&t[1]===s[1]},AK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},uK=0,lf=[];function hK(t){var s=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),i=S.useState(uK++)[0],c=S.useState(dF)[0],A=S.useRef(t);S.useEffect(function(){A.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var b=U9([t.lockRef.current],(t.shards||[]).map(EN),!0).filter(Boolean);return b.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),b.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var u=S.useCallback(function(b,w){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!A.current.allowPinchZoom;var B=$g(b),L=n.current,Q="deltaX"in b?b.deltaX:L[0]-B[0],k="deltaY"in b?b.deltaY:L[1]-B[1],z,J=b.target,$=Math.abs(Q)>Math.abs(k)?"h":"v";if("touches"in b&&$==="h"&&J.type==="range")return!1;var q=BN($,J);if(!q)return!0;if(q?z=$:(z=$==="v"?"h":"v",q=BN($,J)),!q)return!1;if(!r.current&&"changedTouches"in b&&(Q||k)&&(r.current=z),!z)return!0;var X=r.current||z;return cK(X,w,b,X==="h"?Q:k)},[]),d=S.useCallback(function(b){var w=b;if(!(!lf.length||lf[lf.length-1]!==c)){var B="deltaY"in w?CN(w):$g(w),L=s.current.filter(function(z){return z.name===w.type&&(z.target===w.target||w.target===z.shadowParent)&&dK(z.delta,B)})[0];if(L&&L.should){w.cancelable&&w.preventDefault();return}if(!L){var Q=(A.current.shards||[]).map(EN).filter(Boolean).filter(function(z){return z.contains(w.target)}),k=Q.length>0?u(w,Q[0]):!A.current.noIsolation;k&&w.cancelable&&w.preventDefault()}}},[]),h=S.useCallback(function(b,w,B,L){var Q={name:b,delta:w,target:B,should:L,shadowParent:fK(B)};s.current.push(Q),setTimeout(function(){s.current=s.current.filter(function(k){return k!==Q})},1)},[]),o=S.useCallback(function(b){n.current=$g(b),r.current=void 0},[]),m=S.useCallback(function(b){h(b.type,CN(b),b.target,u(b,t.lockRef.current))},[]),y=S.useCallback(function(b){h(b.type,$g(b),b.target,u(b,t.lockRef.current))},[]);S.useEffect(function(){return lf.push(c),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:y}),document.addEventListener("wheel",d,of),document.addEventListener("touchmove",d,of),document.addEventListener("touchstart",o,of),function(){lf=lf.filter(function(b){return b!==c}),document.removeEventListener("wheel",d,of),document.removeEventListener("touchmove",d,of),document.removeEventListener("touchstart",o,of)}},[]);var p=t.removeScrollBar,j=t.inert;return S.createElement(S.Fragment,null,j?S.createElement(c,{styles:AK(i)}):null,p?S.createElement(sK,{gapMode:t.gapMode}):null)}function fK(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const pK=K9(cF,hK);var wj=S.forwardRef(function(t,s){return S.createElement(Rx,Td({},t,{ref:s,sideCar:pK}))});wj.classNames=Rx.classNames;var mK=[" ","Enter","ArrowUp","ArrowDown"],gK=[" ","Enter"],vh="Select",[Ox,Ux,yK]=V4(vh),[Kf]=Cc(vh,[yK,px]),Lx=px(),[xK,xu]=Kf(vh),[vK,bK]=Kf(vh),fF=t=>{const{__scopeSelect:s,children:n,open:r,defaultOpen:i,onOpenChange:c,value:A,defaultValue:u,onValueChange:d,dir:h,name:o,autoComplete:m,disabled:y,required:p,form:j}=t,b=Lx(s),[w,B]=S.useState(null),[L,Q]=S.useState(null),[k,z]=S.useState(!1),J=jx(h),[$,q]=wN({prop:r,defaultProp:i??!1,onChange:c,caller:vh}),[X,fe]=wN({prop:A,defaultProp:u,onChange:d,caller:vh}),ee=S.useRef(null),le=w?j||!!w.closest("form"):!0,[ue,te]=S.useState(new Set),re=Array.from(ue).map(ne=>ne.props.value).join(";");return e.jsx(u6,{...b,children:e.jsxs(xK,{required:p,scope:s,trigger:w,onTriggerChange:B,valueNode:L,onValueNodeChange:Q,valueNodeHasChildren:k,onValueNodeHasChildrenChange:z,contentId:du(),value:X,onValueChange:fe,open:$,onOpenChange:q,dir:J,triggerPointerDownPosRef:ee,disabled:y,children:[e.jsx(Ox.Provider,{scope:s,children:e.jsx(vK,{scope:t.__scopeSelect,onNativeOptionAdd:S.useCallback(ne=>{te(oe=>new Set(oe).add(ne))},[]),onNativeOptionRemove:S.useCallback(ne=>{te(oe=>{const se=new Set(oe);return se.delete(ne),se})},[]),children:n})}),le?e.jsxs(_F,{"aria-hidden":!0,required:p,tabIndex:-1,name:o,autoComplete:m,value:X,onChange:ne=>fe(ne.target.value),disabled:y,form:j,children:[X===void 0?e.jsx("option",{value:""}):null,Array.from(ue)]},re):null]})})};fF.displayName=vh;var pF="SelectTrigger",mF=S.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,c=Lx(n),A=xu(pF,n),u=A.disabled||r,d=Mr(s,A.onTriggerChange),h=Ux(n),o=S.useRef("touch"),[m,y,p]=PF(b=>{const w=h().filter(Q=>!Q.disabled),B=w.find(Q=>Q.value===A.value),L=kF(w,b,B);L!==void 0&&A.onValueChange(L.value)}),j=b=>{u||(A.onOpenChange(!0),p()),b&&(A.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return e.jsx(W5,{asChild:!0,...c,children:e.jsx(mr.button,{type:"button",role:"combobox","aria-controls":A.contentId,"aria-expanded":A.open,"aria-required":A.required,"aria-autocomplete":"none",dir:A.dir,"data-state":A.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":MF(A.value)?"":void 0,...i,ref:d,onClick:xo(i.onClick,b=>{b.currentTarget.focus(),o.current!=="mouse"&&j(b)}),onPointerDown:xo(i.onPointerDown,b=>{o.current=b.pointerType;const w=b.target;w.hasPointerCapture(b.pointerId)&&w.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(j(b),b.preventDefault())}),onKeyDown:xo(i.onKeyDown,b=>{const w=m.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&y(b.key),!(w&&b.key===" ")&&mK.includes(b.key)&&(j(),b.preventDefault())})})})});mF.displayName=pF;var gF="SelectValue",yF=S.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:i,children:c,placeholder:A="",...u}=t,d=xu(gF,n),{onValueNodeHasChildrenChange:h}=d,o=c!==void 0,m=Mr(s,d.onValueNodeChange);return ti(()=>{h(o)},[h,o]),e.jsx(mr.span,{...u,ref:m,style:{pointerEvents:"none"},children:MF(d.value)?e.jsx(e.Fragment,{children:A}):c})});yF.displayName=gF;var jK="SelectIcon",xF=S.forwardRef((t,s)=>{const{__scopeSelect:n,children:r,...i}=t;return e.jsx(mr.span,{"aria-hidden":!0,...i,ref:s,children:r||""})});xF.displayName=jK;var wK="SelectPortal",vF=t=>e.jsx(mx,{asChild:!0,...t});vF.displayName=wK;var bh="SelectContent",bF=S.forwardRef((t,s)=>{const n=xu(bh,t.__scopeSelect),[r,i]=S.useState();if(ti(()=>{i(new DocumentFragment)},[]),!n.open){const c=r;return c?Nh.createPortal(e.jsx(jF,{scope:t.__scopeSelect,children:e.jsx(Ox.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),c):null}return e.jsx(wF,{...t,ref:s})});bF.displayName=bh;var Gc=10,[jF,vu]=Kf(bh),SK="SelectContentImpl",NK=j9("SelectContent.RemoveScroll"),wF=S.forwardRef((t,s)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:c,onPointerDownOutside:A,side:u,sideOffset:d,align:h,alignOffset:o,arrowPadding:m,collisionBoundary:y,collisionPadding:p,sticky:j,hideWhenDetached:b,avoidCollisions:w,...B}=t,L=xu(bh,n),[Q,k]=S.useState(null),[z,J]=S.useState(null),$=Mr(s,je=>k(je)),[q,X]=S.useState(null),[fe,ee]=S.useState(null),le=Ux(n),[ue,te]=S.useState(!1),re=S.useRef(!1);S.useEffect(()=>{if(Q)return iF(Q)},[Q]),nF();const ne=S.useCallback(je=>{const[Ne,...Je]=le().map(Te=>Te.ref.current),[Qe]=Je.slice(-1),pt=document.activeElement;for(const Te of je)if(Te===pt||(Te?.scrollIntoView({block:"nearest"}),Te===Ne&&z&&(z.scrollTop=0),Te===Qe&&z&&(z.scrollTop=z.scrollHeight),Te?.focus(),document.activeElement!==pt))return},[le,z]),oe=S.useCallback(()=>ne([q,Q]),[ne,q,Q]);S.useEffect(()=>{ue&&oe()},[ue,oe]);const{onOpenChange:se,triggerPointerDownPosRef:xe}=L;S.useEffect(()=>{if(Q){let je={x:0,y:0};const Ne=Qe=>{je={x:Math.abs(Math.round(Qe.pageX)-(xe.current?.x??0)),y:Math.abs(Math.round(Qe.pageY)-(xe.current?.y??0))}},Je=Qe=>{je.x<=10&&je.y<=10?Qe.preventDefault():Q.contains(Qe.target)||se(!1),document.removeEventListener("pointermove",Ne),xe.current=null};return xe.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",Je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",Je,{capture:!0})}}},[Q,se,xe]),S.useEffect(()=>{const je=()=>se(!1);return window.addEventListener("blur",je),window.addEventListener("resize",je),()=>{window.removeEventListener("blur",je),window.removeEventListener("resize",je)}},[se]);const[Me,me]=PF(je=>{const Ne=le().filter(pt=>!pt.disabled),Je=Ne.find(pt=>pt.ref.current===document.activeElement),Qe=kF(Ne,je,Je);Qe&&setTimeout(()=>Qe.ref.current.focus())}),Z=S.useCallback((je,Ne,Je)=>{const Qe=!re.current&&!Je;(L.value!==void 0&&L.value===Ne||Qe)&&(X(je),Qe&&(re.current=!0))},[L.value]),ge=S.useCallback(()=>Q?.focus(),[Q]),we=S.useCallback((je,Ne,Je)=>{const Qe=!re.current&&!Je;(L.value!==void 0&&L.value===Ne||Qe)&&ee(je)},[L.value]),pe=r==="popper"?kb:SF,be=pe===kb?{side:u,sideOffset:d,align:h,alignOffset:o,arrowPadding:m,collisionBoundary:y,collisionPadding:p,sticky:j,hideWhenDetached:b,avoidCollisions:w}:{};return e.jsx(jF,{scope:n,content:Q,viewport:z,onViewportChange:J,itemRefCallback:Z,selectedItem:q,onItemLeave:ge,itemTextRefCallback:we,focusSelectedItem:oe,selectedItemText:fe,position:r,isPositioned:ue,searchRef:Me,children:e.jsx(wj,{as:NK,allowPinchZoom:!0,children:e.jsx(jj,{asChild:!0,trapped:L.open,onMountAutoFocus:je=>{je.preventDefault()},onUnmountAutoFocus:xo(i,je=>{L.trigger?.focus({preventScroll:!0}),je.preventDefault()}),children:e.jsx(dx,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:A,onFocusOutside:je=>je.preventDefault(),onDismiss:()=>L.onOpenChange(!1),children:e.jsx(pe,{role:"listbox",id:L.contentId,"data-state":L.open?"open":"closed",dir:L.dir,onContextMenu:je=>je.preventDefault(),...B,...be,onPlaced:()=>te(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...B.style},onKeyDown:xo(B.onKeyDown,je=>{const Ne=je.ctrlKey||je.altKey||je.metaKey;if(je.key==="Tab"&&je.preventDefault(),!Ne&&je.key.length===1&&me(je.key),["ArrowUp","ArrowDown","Home","End"].includes(je.key)){let Qe=le().filter(pt=>!pt.disabled).map(pt=>pt.ref.current);if(["ArrowUp","End"].includes(je.key)&&(Qe=Qe.slice().reverse()),["ArrowUp","ArrowDown"].includes(je.key)){const pt=je.target,Te=Qe.indexOf(pt);Qe=Qe.slice(Te+1)}setTimeout(()=>ne(Qe)),je.preventDefault()}})})})})})})});wF.displayName=SK;var BK="SelectItemAlignedPosition",SF=S.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,c=xu(bh,n),A=vu(bh,n),[u,d]=S.useState(null),[h,o]=S.useState(null),m=Mr(s,$=>o($)),y=Ux(n),p=S.useRef(!1),j=S.useRef(!0),{viewport:b,selectedItem:w,selectedItemText:B,focusSelectedItem:L}=A,Q=S.useCallback(()=>{if(c.trigger&&c.valueNode&&u&&h&&b&&w&&B){const $=c.trigger.getBoundingClientRect(),q=h.getBoundingClientRect(),X=c.valueNode.getBoundingClientRect(),fe=B.getBoundingClientRect();if(c.dir!=="rtl"){const pt=fe.left-q.left,Te=X.left-pt,Ce=$.left-Te,_e=$.width+Ce,de=Math.max(_e,q.width),dt=window.innerWidth-Gc,st=gN(Te,[Gc,Math.max(Gc,dt-de)]);u.style.minWidth=_e+"px",u.style.left=st+"px"}else{const pt=q.right-fe.right,Te=window.innerWidth-X.right-pt,Ce=window.innerWidth-$.right-Te,_e=$.width+Ce,de=Math.max(_e,q.width),dt=window.innerWidth-Gc,st=gN(Te,[Gc,Math.max(Gc,dt-de)]);u.style.minWidth=_e+"px",u.style.right=st+"px"}const ee=y(),le=window.innerHeight-Gc*2,ue=b.scrollHeight,te=window.getComputedStyle(h),re=parseInt(te.borderTopWidth,10),ne=parseInt(te.paddingTop,10),oe=parseInt(te.borderBottomWidth,10),se=parseInt(te.paddingBottom,10),xe=re+ne+ue+se+oe,Me=Math.min(w.offsetHeight*5,xe),me=window.getComputedStyle(b),Z=parseInt(me.paddingTop,10),ge=parseInt(me.paddingBottom,10),we=$.top+$.height/2-Gc,pe=le-we,be=w.offsetHeight/2,je=w.offsetTop+be,Ne=re+ne+je,Je=xe-Ne;if(Ne<=we){const pt=ee.length>0&&w===ee[ee.length-1].ref.current;u.style.bottom="0px";const Te=h.clientHeight-b.offsetTop-b.offsetHeight,Ce=Math.max(pe,be+(pt?ge:0)+Te+oe),_e=Ne+Ce;u.style.height=_e+"px"}else{const pt=ee.length>0&&w===ee[0].ref.current;u.style.top="0px";const Ce=Math.max(we,re+b.offsetTop+(pt?Z:0)+be)+Je;u.style.height=Ce+"px",b.scrollTop=Ne-we+b.offsetTop}u.style.margin=`${Gc}px 0`,u.style.minHeight=Me+"px",u.style.maxHeight=le+"px",r?.(),requestAnimationFrame(()=>p.current=!0)}},[y,c.trigger,c.valueNode,u,h,b,w,B,c.dir,r]);ti(()=>Q(),[Q]);const[k,z]=S.useState();ti(()=>{h&&z(window.getComputedStyle(h).zIndex)},[h]);const J=S.useCallback($=>{$&&j.current===!0&&(Q(),L?.(),j.current=!1)},[Q,L]);return e.jsx(EK,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:p,onScrollButtonChange:J,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:e.jsx(mr.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});SF.displayName=BK;var CK="SelectPopperPosition",kb=S.forwardRef((t,s)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Gc,...c}=t,A=Lx(n);return e.jsx(Y5,{...A,...c,ref:s,align:r,collisionPadding:i,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});kb.displayName=CK;var[EK,Sj]=Kf(bh,{}),Hb="SelectViewport",NF=S.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:r,...i}=t,c=vu(Hb,n),A=Sj(Hb,n),u=Mr(s,c.onViewportChange),d=S.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(Ox.Slot,{scope:n,children:e.jsx(mr.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:xo(i.onScroll,h=>{const o=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:y}=A;if(y?.current&&m){const p=Math.abs(d.current-o.scrollTop);if(p>0){const j=window.innerHeight-Gc*2,b=parseFloat(m.style.minHeight),w=parseFloat(m.style.height),B=Math.max(b,w);if(B<j){const L=B+p,Q=Math.min(j,L),k=L-Q;m.style.height=Q+"px",m.style.bottom==="0px"&&(o.scrollTop=k>0?k:0,m.style.justifyContent="flex-end")}}}d.current=o.scrollTop})})})]})});NF.displayName=Hb;var BF="SelectGroup",[TK,FK]=Kf(BF),IK=S.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,i=du();return e.jsx(TK,{scope:n,id:i,children:e.jsx(mr.div,{role:"group","aria-labelledby":i,...r,ref:s})})});IK.displayName=BF;var CF="SelectLabel",EF=S.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,i=FK(CF,n);return e.jsx(mr.div,{id:i.id,...r,ref:s})});EF.displayName=CF;var Wy="SelectItem",[RK,TF]=Kf(Wy),FF=S.forwardRef((t,s)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:c,...A}=t,u=xu(Wy,n),d=vu(Wy,n),h=u.value===r,[o,m]=S.useState(c??""),[y,p]=S.useState(!1),j=Mr(s,L=>d.itemRefCallback?.(L,r,i)),b=du(),w=S.useRef("touch"),B=()=>{i||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(RK,{scope:n,value:r,disabled:i,textId:b,isSelected:h,onItemTextChange:S.useCallback(L=>{m(Q=>Q||(L?.textContent??"").trim())},[]),children:e.jsx(Ox.ItemSlot,{scope:n,value:r,disabled:i,textValue:o,children:e.jsx(mr.div,{role:"option","aria-labelledby":b,"data-highlighted":y?"":void 0,"aria-selected":h&&y,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...A,ref:j,onFocus:xo(A.onFocus,()=>p(!0)),onBlur:xo(A.onBlur,()=>p(!1)),onClick:xo(A.onClick,()=>{w.current!=="mouse"&&B()}),onPointerUp:xo(A.onPointerUp,()=>{w.current==="mouse"&&B()}),onPointerDown:xo(A.onPointerDown,L=>{w.current=L.pointerType}),onPointerMove:xo(A.onPointerMove,L=>{w.current=L.pointerType,i?d.onItemLeave?.():w.current==="mouse"&&L.currentTarget.focus({preventScroll:!0})}),onPointerLeave:xo(A.onPointerLeave,L=>{L.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:xo(A.onKeyDown,L=>{d.searchRef?.current!==""&&L.key===" "||(gK.includes(L.key)&&B(),L.key===" "&&L.preventDefault())})})})})});FF.displayName=Wy;var $p="SelectItemText",IF=S.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:i,...c}=t,A=xu($p,n),u=vu($p,n),d=TF($p,n),h=bK($p,n),[o,m]=S.useState(null),y=Mr(s,B=>m(B),d.onItemTextChange,B=>u.itemTextRefCallback?.(B,d.value,d.disabled)),p=o?.textContent,j=S.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:p},d.value),[d.disabled,d.value,p]),{onNativeOptionAdd:b,onNativeOptionRemove:w}=h;return ti(()=>(b(j),()=>w(j)),[b,w,j]),e.jsxs(e.Fragment,{children:[e.jsx(mr.span,{id:d.textId,...c,ref:y}),d.isSelected&&A.valueNode&&!A.valueNodeHasChildren?Nh.createPortal(c.children,A.valueNode):null]})});IF.displayName=$p;var RF="SelectItemIndicator",OF=S.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return TF(RF,n).isSelected?e.jsx(mr.span,{"aria-hidden":!0,...r,ref:s}):null});OF.displayName=RF;var Kb="SelectScrollUpButton",UF=S.forwardRef((t,s)=>{const n=vu(Kb,t.__scopeSelect),r=Sj(Kb,t.__scopeSelect),[i,c]=S.useState(!1),A=Mr(s,r.onScrollButtonChange);return ti(()=>{if(n.viewport&&n.isPositioned){let u=function(){const h=d.scrollTop>0;c(h)};const d=n.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),i?e.jsx(DF,{...t,ref:A,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=n;u&&d&&(u.scrollTop=u.scrollTop-d.offsetHeight)}}):null});UF.displayName=Kb;var zb="SelectScrollDownButton",LF=S.forwardRef((t,s)=>{const n=vu(zb,t.__scopeSelect),r=Sj(zb,t.__scopeSelect),[i,c]=S.useState(!1),A=Mr(s,r.onScrollButtonChange);return ti(()=>{if(n.viewport&&n.isPositioned){let u=function(){const h=d.scrollHeight-d.clientHeight,o=Math.ceil(d.scrollTop)<h;c(o)};const d=n.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),i?e.jsx(DF,{...t,ref:A,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=n;u&&d&&(u.scrollTop=u.scrollTop+d.offsetHeight)}}):null});LF.displayName=zb;var DF=S.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,c=vu("SelectScrollButton",n),A=S.useRef(null),u=Ux(n),d=S.useCallback(()=>{A.current!==null&&(window.clearInterval(A.current),A.current=null)},[]);return S.useEffect(()=>()=>d(),[d]),ti(()=>{u().find(o=>o.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),e.jsx(mr.div,{"aria-hidden":!0,...i,ref:s,style:{flexShrink:0,...i.style},onPointerDown:xo(i.onPointerDown,()=>{A.current===null&&(A.current=window.setInterval(r,50))}),onPointerMove:xo(i.onPointerMove,()=>{c.onItemLeave?.(),A.current===null&&(A.current=window.setInterval(r,50))}),onPointerLeave:xo(i.onPointerLeave,()=>{d()})})}),OK="SelectSeparator",QF=S.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return e.jsx(mr.div,{"aria-hidden":!0,...r,ref:s})});QF.displayName=OK;var Vb="SelectArrow",UK=S.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,i=Lx(n),c=xu(Vb,n),A=vu(Vb,n);return c.open&&A.position==="popper"?e.jsx(X5,{...i,...r,ref:s}):null});UK.displayName=Vb;var LK="SelectBubbleInput",_F=S.forwardRef(({__scopeSelect:t,value:s,...n},r)=>{const i=S.useRef(null),c=Mr(r,i),A=uj(s);return S.useEffect(()=>{const u=i.current;if(!u)return;const d=window.HTMLSelectElement.prototype,o=Object.getOwnPropertyDescriptor(d,"value").set;if(A!==s&&o){const m=new Event("change",{bubbles:!0});o.call(u,s),u.dispatchEvent(m)}},[A,s]),e.jsx(mr.select,{...n,style:{...J5,...n.style},ref:c,defaultValue:s})});_F.displayName=LK;function MF(t){return t===""||t===void 0}function PF(t){const s=qo(t),n=S.useRef(""),r=S.useRef(0),i=S.useCallback(A=>{const u=n.current+A;s(u),(function d(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(u)},[s]),c=S.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,c]}function kF(t,s,n){const i=s.length>1&&Array.from(s).every(h=>h===s[0])?s[0]:s,c=n?t.indexOf(n):-1;let A=DK(t,Math.max(c,0));i.length===1&&(A=A.filter(h=>h!==n));const d=A.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==n?d:void 0}function DK(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var QK=fF,HF=mF,_K=yF,MK=xF,PK=vF,KF=bF,kK=NF,zF=EF,VF=FF,HK=IF,KK=OF,$F=UF,GF=LF,qF=QF;const Bn=QK,Cn=_K,wn=S.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(HF,{ref:r,className:Vs("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[s,e.jsx(MK,{asChild:!0,children:e.jsx(Oy,{className:"h-4 w-4 opacity-50"})})]}));wn.displayName=HF.displayName;const WF=S.forwardRef(({className:t,...s},n)=>e.jsx($F,{ref:n,className:Vs("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(nb,{className:"h-4 w-4"})}));WF.displayName=$F.displayName;const YF=S.forwardRef(({className:t,...s},n)=>e.jsx(GF,{ref:n,className:Vs("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Oy,{className:"h-4 w-4"})}));YF.displayName=GF.displayName;const Sn=S.forwardRef(({className:t,children:s,position:n="popper",...r},i)=>e.jsx(PK,{children:e.jsxs(KF,{ref:i,className:Vs("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[e.jsx(WF,{}),e.jsx(kK,{className:Vs("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(YF,{})]})}));Sn.displayName=KF.displayName;const zK=S.forwardRef(({className:t,...s},n)=>e.jsx(zF,{ref:n,className:Vs("px-2 py-1.5 text-sm font-semibold",t),...s}));zK.displayName=zF.displayName;const dn=S.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(VF,{ref:r,className:Vs("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(KK,{children:e.jsx(x1,{className:"h-4 w-4"})})}),e.jsx(HK,{children:s})]}));dn.displayName=VF.displayName;const VK=S.forwardRef(({className:t,...s},n)=>e.jsx(qF,{ref:n,className:Vs("-mx-1 my-1 h-px bg-muted",t),...s}));VK.displayName=qF.displayName;function Zp(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}var $K=mA[" useInsertionEffect ".trim().toString()]||ti;function GK({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[i,c,A]=qK({defaultProp:s,onChange:n}),u=t!==void 0,d=u?t:i;{const o=S.useRef(t!==void 0);S.useEffect(()=>{const m=o.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),o.current=u},[u,r])}const h=S.useCallback(o=>{if(u){const m=WK(o)?o(t):o;m!==t&&A.current?.(m)}else c(o)},[u,t,c,A]);return[d,h]}function qK({defaultProp:t,onChange:s}){const[n,r]=S.useState(t),i=S.useRef(n),c=S.useRef(s);return $K(()=>{c.current=s},[s]),S.useEffect(()=>{i.current!==n&&(c.current?.(n),i.current=n)},[n,i]),[n,r,c]}function WK(t){return typeof t=="function"}function YK(t){const s=XK(t),n=S.forwardRef((r,i)=>{const{children:c,...A}=r,u=S.Children.toArray(c),d=u.find(ZK);if(d){const h=d.props.children,o=u.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return e.jsx(s,{...A,ref:i,children:S.isValidElement(h)?S.cloneElement(h,void 0,o):null})}return e.jsx(s,{...A,ref:i,children:c})});return n.displayName=`${t}.Slot`,n}function XK(t){const s=S.forwardRef((n,r)=>{const{children:i,...c}=n;if(S.isValidElement(i)){const A=tz(i),u=ez(c,i.props);return i.type!==S.Fragment&&(u.ref=r?Bh(r,A):A),S.cloneElement(i,u)}return S.Children.count(i)>1?S.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var JK=Symbol("radix.slottable");function ZK(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===JK}function ez(t,s){const n={...s};for(const r in s){const i=t[r],c=s[r];/^on[A-Z]/.test(r)?i&&c?n[r]=(...u)=>{const d=c(...u);return i(...u),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...c}:r==="className"&&(n[r]=[i,c].filter(Boolean).join(" "))}return{...t,...n}}function tz(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Dx="Dialog",[XF]=Cc(Dx),[sz,td]=XF(Dx),JF=t=>{const{__scopeDialog:s,children:n,open:r,defaultOpen:i,onOpenChange:c,modal:A=!0}=t,u=S.useRef(null),d=S.useRef(null),[h,o]=GK({prop:r,defaultProp:i??!1,onChange:c,caller:Dx});return e.jsx(sz,{scope:s,triggerRef:u,contentRef:d,contentId:du(),titleId:du(),descriptionId:du(),open:h,onOpenChange:o,onOpenToggle:S.useCallback(()=>o(m=>!m),[o]),modal:A,children:n})};JF.displayName=Dx;var ZF="DialogTrigger",eI=S.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,i=td(ZF,n),c=Mr(s,i.triggerRef);return e.jsx(mr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Cj(i.open),...r,ref:c,onClick:Zp(t.onClick,i.onOpenToggle)})});eI.displayName=ZF;var Nj="DialogPortal",[nz,tI]=XF(Nj,{forceMount:void 0}),sI=t=>{const{__scopeDialog:s,forceMount:n,children:r,container:i}=t,c=td(Nj,s);return e.jsx(nz,{scope:s,forceMount:n,children:S.Children.map(r,A=>e.jsx(gA,{present:n||c.open,children:e.jsx(mx,{asChild:!0,container:i,children:A})}))})};sI.displayName=Nj;var Yy="DialogOverlay",nI=S.forwardRef((t,s)=>{const n=tI(Yy,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,c=td(Yy,t.__scopeDialog);return c.modal?e.jsx(gA,{present:r||c.open,children:e.jsx(az,{...i,ref:s})}):null});nI.displayName=Yy;var rz=YK("DialogOverlay.RemoveScroll"),az=S.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,i=td(Yy,n);return e.jsx(wj,{as:rz,allowPinchZoom:!0,shards:[i.contentRef],children:e.jsx(mr.div,{"data-state":Cj(i.open),...r,ref:s,style:{pointerEvents:"auto",...r.style}})})}),jh="DialogContent",rI=S.forwardRef((t,s)=>{const n=tI(jh,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,c=td(jh,t.__scopeDialog);return e.jsx(gA,{present:r||c.open,children:c.modal?e.jsx(iz,{...i,ref:s}):e.jsx(oz,{...i,ref:s})})});rI.displayName=jh;var iz=S.forwardRef((t,s)=>{const n=td(jh,t.__scopeDialog),r=S.useRef(null),i=Mr(s,n.contentRef,r);return S.useEffect(()=>{const c=r.current;if(c)return iF(c)},[]),e.jsx(aI,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Zp(t.onCloseAutoFocus,c=>{c.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Zp(t.onPointerDownOutside,c=>{const A=c.detail.originalEvent,u=A.button===0&&A.ctrlKey===!0;(A.button===2||u)&&c.preventDefault()}),onFocusOutside:Zp(t.onFocusOutside,c=>c.preventDefault())})}),oz=S.forwardRef((t,s)=>{const n=td(jh,t.__scopeDialog),r=S.useRef(!1),i=S.useRef(!1);return e.jsx(aI,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{t.onCloseAutoFocus?.(c),c.defaultPrevented||(r.current||n.triggerRef.current?.focus(),c.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:c=>{t.onInteractOutside?.(c),c.defaultPrevented||(r.current=!0,c.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const A=c.target;n.triggerRef.current?.contains(A)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&i.current&&c.preventDefault()}})}),aI=S.forwardRef((t,s)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:c,...A}=t,u=td(jh,n),d=S.useRef(null),h=Mr(s,d);return nF(),e.jsxs(e.Fragment,{children:[e.jsx(jj,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:c,children:e.jsx(dx,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Cj(u.open),...A,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(lz,{titleId:u.titleId}),e.jsx(dz,{contentRef:d,descriptionId:u.descriptionId})]})]})}),Bj="DialogTitle",iI=S.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,i=td(Bj,n);return e.jsx(mr.h2,{id:i.titleId,...r,ref:s})});iI.displayName=Bj;var oI="DialogDescription",lI=S.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,i=td(oI,n);return e.jsx(mr.p,{id:i.descriptionId,...r,ref:s})});lI.displayName=oI;var cI="DialogClose",dI=S.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,i=td(cI,n);return e.jsx(mr.button,{type:"button",...r,ref:s,onClick:Zp(t.onClick,()=>i.onOpenChange(!1))})});dI.displayName=cI;function Cj(t){return t?"open":"closed"}var AI="DialogTitleWarning",[EW,uI]=GO(AI,{contentName:jh,titleName:Bj,docsSlug:"dialog"}),lz=({titleId:t})=>{const s=uI(AI),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},cz="DialogDescriptionWarning",dz=({contentRef:t,descriptionId:s})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${uI(cz).contentName}}.`;return S.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");s&&i&&(document.getElementById(s)||console.warn(r))},[r,t,s]),null},Az=JF,uz=eI,hz=sI,hI=nI,fI=rI,pI=iI,mI=lI,fz=dI;const ih=Az,Av=uz,pz=hz,gI=S.forwardRef(({className:t,...s},n)=>e.jsx(hI,{ref:n,className:Vs("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));gI.displayName=hI.displayName;const iu=S.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(pz,{children:[e.jsx(gI,{}),e.jsxs(fI,{ref:r,className:Vs("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[s,e.jsxs(fz,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(cx,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));iu.displayName=fI.displayName;const ou=({className:t,...s})=>e.jsx("div",{className:Vs("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});ou.displayName="DialogHeader";const lu=S.forwardRef(({className:t,...s},n)=>e.jsx(pI,{ref:n,className:Vs("text-lg font-semibold leading-none tracking-tight",t),...s}));lu.displayName=pI.displayName;const mz=S.forwardRef(({className:t,...s},n)=>e.jsx(mI,{ref:n,className:Vs("text-sm text-muted-foreground",t),...s}));mz.displayName=mI.displayName;const $l=()=>e.jsx("span",{className:"text-red-500 ml-1",children:"*"}),gz=["pcs","kg","meter","sqft","cum","litre","set","nos"],yz=[{code:"+91",country:"India"},{code:"+1",country:"USA"},{code:"+44",country:"UK"},{code:"+61",country:"Australia"},{code:"+971",country:"UAE"},{code:"+81",country:"Japan"},{code:"+49",country:"Germany"}];function $b(){const{toast:t}=ma(),{shops:s,materials:n,addShop:r,addMaterial:i,user:c,approvalRequests:A,supportMessages:u,submitShopForApproval:d,submitMaterialForApproval:h,approveShop:o,rejectShop:m,deleteShop:y,deleteMaterial:p,addSupportMessage:j,deleteMessage:b}=ei(),{materialApprovalRequests:w,approveMaterial:B,rejectMaterial:L}=ei(),[Q,k]=S.useState(""),[z,J]=S.useState(null),[$,q]=S.useState([]),[X,fe]=S.useState([]),[ee,le]=S.useState(null),[ue,te]=S.useState(""),[re,ne]=S.useState([]);S.useEffect(()=>{(async()=>{try{const ie=await fetch("/api/categories");if(ie.ok){const G=await ie.json();G?.categories&&q(G.categories)}}catch(ie){console.warn("load categories failed",ie)}})()},[]),S.useEffect(()=>{(async()=>{try{const ie=await fetch("/api/subcategories-admin");if(ie.ok){const G=await ie.json();G?.subcategories&&ne(G.subcategories)}}catch(ie){console.warn("load subcategories failed",ie)}})()},[]),S.useEffect(()=>{(async()=>{try{const ie=await fetch("/api/products");if(ie.ok){const G=await ie.json();if(G?.products){const ve=G.products.map(Le=>oe(Le));pt(ve)}}}catch(ie){console.warn("load products failed",ie)}})()},[]);const oe=ie=>({...ie,taxCodeType:ie.taxCodeType??ie.tax_code_type??null,taxCodeValue:ie.taxCodeValue??ie.tax_code_value??""}),[se,xe]=S.useState(""),[Me,me]=S.useState(""),[Z,ge]=S.useState(""),[we,pe]=S.useState(null),[be,je]=S.useState(""),[Ne,Je]=S.useState(""),[Qe,pt]=S.useState([]),[Te,Ce]=S.useState({name:"",subcategory:"",taxCodeType:null,taxCodeValue:"",hsnCode:"",sacCode:""}),[_e,de]=S.useState(!1),[dt,st]=S.useState(null),[nt,at]=S.useState(""),[Dt,yt]=S.useState(""),[qe,Tt]=S.useState(""),ns=async()=>{if(!se.trim()){t({title:"Error",description:"Category name is required",variant:"destructive"});return}if($.includes(se)){t({title:"Error",description:"This category already exists",variant:"destructive"});return}try{const ie=await yo("/categories",{name:se});q(G=>[...G,se]),t({title:"Success",description:`Category "${se}" created`}),xe("")}catch(ie){console.error("add category error",ie),t({title:"Error",description:ie?.message||"Failed to create category",variant:"destructive"})}},Ts=async()=>{if(!Me.trim()){t({title:"Error",description:"Sub-category name is required",variant:"destructive"});return}if(!Z){t({title:"Error",description:"Please select a category first",variant:"destructive"});return}try{const G={id:(await yo("/subcategories",{name:Me,category:Z})).subcategory.id,name:Me,category:Z,createdAt:new Date().toISOString()};ne(ve=>[...ve,G]),t({title:"Success",description:`Sub-category "${Me}" created under ${Z}`}),me("")}catch(ie){console.error("add subcategory error",ie),t({title:"Error",description:ie?.message||"Failed to create subcategory",variant:"destructive"})}},vs=ie=>re.filter(G=>G.category===ie),Ns=async()=>{if(!Te.name.trim()){t({title:"Error",description:"Product name is required",variant:"destructive"});return}if(!Te.subcategory){t({title:"Error",description:"Subcategory is required",variant:"destructive"});return}try{const ie={name:Te.name,subcategory:Te.subcategory};Te.hsnCode&&Te.hsnCode.trim()&&(ie.hsn_code=Te.hsnCode.trim()),Te.sacCode&&Te.sacCode.trim()&&(ie.sac_code=Te.sacCode.trim());const G=await yo("/products",ie),ve=G.product||G;pt(Le=>[...Le,oe(ve)]),t({title:"Success",description:`Product "${Te.name}" created`}),Ce({name:"",subcategory:"",taxCodeType:null,taxCodeValue:"",hsnCode:"",sacCode:""})}catch(ie){console.error("add product error",ie),t({title:"Error",description:ie?.message||"Failed to create product",variant:"destructive"})}},et=async()=>{if(!dt?.name?.trim()){t({title:"Error",description:"Product name is required",variant:"destructive"});return}if(!dt?.subcategory){t({title:"Error",description:"Subcategory is required",variant:"destructive"});return}if(dt.taxCodeType&&!dt.taxCodeValue?.trim()){t({title:"Error",description:"Tax code value is required",variant:"destructive"});return}try{const G=await(await ct(`/products/${dt.id}`,{method:"PUT",body:JSON.stringify(dt)})).json(),ve=oe(G.product||G);pt(Le=>Le.map(Xe=>Xe.id===dt.id?ve:Xe)),t({title:"Success",description:`Product "${dt.name}" updated`}),st(null)}catch(ie){console.error("update product error",ie),t({title:"Error",description:ie?.message||"Failed to update product",variant:"destructive"})}},De=async ie=>{if(window.confirm("Delete this product? This cannot be undone."))try{await ct(`/products/${ie}`,{method:"DELETE"}),pt(G=>G.filter(ve=>ve.id!==ie)),t({title:"Success",description:"Product deleted"})}catch(G){console.error("delete product error",G),t({title:"Error",description:G?.message||"Failed to delete product",variant:"destructive"})}},[rt,mt]=S.useState([]);S.useEffect(()=>{(async()=>{try{const ie=await fetch("/api/material-templates");if(ie.ok){const G=await ie.json();mt(G?.templates||[])}}catch(ie){console.warn("load master materials failed",ie),mt([])}})()},[]);const[ls,Ht]=S.useState(()=>[]),[Kt,lt]=S.useState(()=>[]),[Gt,Yt]=S.useState(""),[Cs,rs]=S.useState("grid"),[Is,on]=S.useState(""),[ws,St]=S.useState(""),[qt,Pt]=S.useState(!1),[gs,Rs]=S.useState(!1),Nn=Kt.filter(ie=>{if(!Is)return!0;const G=Is.toLowerCase();return(ie.name||"").toLowerCase().includes(G)||(ie.location||"").toLowerCase().includes(G)||(ie.city||"").toLowerCase().includes(G)}),ys=ls.filter(ie=>{if(!ws)return!0;const G=ws.toLowerCase();return(ie.name||"").toLowerCase().includes(G)||(ie.code||"").toLowerCase().includes(G)}),[Ln,Zs]=S.useState([]),[En,Ls]=S.useState([]),[Bs,Ms]=S.useState([]),[Os,ot]=S.useState([]);S.useEffect(()=>{(async()=>{try{const G=await ct("/material-submissions-pending-approval");if(G.ok){const Le=((await G.json()).submissions||[]).map(Xe=>({id:Xe.submission.id,status:"pending",source:"submission",material:{id:Xe.submission.id,name:Xe.submission.template_name||"Supplier Material",code:Xe.submission.template_code||"",rate:Xe.submission.rate,unit:Xe.submission.unit,category:Xe.submission.category||Xe.submission.template_category||Xe.submission.template_category_name||"",subCategory:Xe.submission.subcategory||Xe.submission.sub_category||"",brandName:Xe.submission.brandname||Xe.submission.brandName||Xe.submission.brand||Xe.submission.make||"",modelNumber:Xe.submission.modelnumber||Xe.submission.modelNumber||"",technicalSpecification:Xe.submission.technicalspecification||Xe.submission.technicalSpecification||""},submittedBy:Xe.submission.shop_name||"Supplier",submittedAt:Xe.submission.created_at,templateId:Xe.submission.template_id,shopId:Xe.submission.shop_id}));ot(Le)}}catch(G){console.warn("Failed to load supplier material submissions",G)}})()},[]),S.useEffect(()=>{Ls(A||[])},[A]),S.useEffect(()=>{(async()=>{try{const G=await fetch("/api/shops-pending-approval");if(G.ok){const ve=await G.json();if(ve?.shops){const Le=ve.shops.map(Xe=>({id:Xe.id,shop:Xe.shop||Xe,status:Xe.status||"pending",submittedBy:Xe.submittedBy||"Unknown",submittedAt:Xe.submittedAt||new Date().toISOString()}));Ls(Le)}}}catch(G){console.warn("Failed to load shop approvals from API",G)}})()},[]),S.useEffect(()=>{const ie=[...w||[],...Os];Zs(ie)},[w,Os]),S.useEffect(()=>{(async()=>{try{const G=await fetch("/api/materials-pending-approval");if(G.ok){const ve=await G.json();if(ve?.materials){const Xe=[...ve.materials.map(vt=>({id:vt.id,material:vt.material||vt,status:vt.status||"pending",submittedBy:vt.submittedBy||"Unknown",submittedAt:vt.submittedAt||new Date().toISOString()})),...Os];Zs(Xe)}}}catch(G){console.warn("Failed to load material approvals from API",G)}})()},[Os]),S.useEffect(()=>{Ht(n||[])},[n]),S.useEffect(()=>{lt(s||[])},[s]);const[Rt,Mt]=S.useState([]);S.useEffect(()=>{(async()=>{try{const G=await ct("/api/vendor-categories");if(G.ok){const ve=await G.json();Mt(ve.categories||[])}}catch(G){console.error("Failed to load vendor categories:",G)}})()},[]);const[kt,fs]=S.useState({name:"",code:"",vendorCategory:"",category:"",subCategory:"",taxCodeType:null,taxCodeValue:""});S.useEffect(()=>{if(kt.name){const ie=kt.name.substring(0,3).toUpperCase()+"-"+Math.floor(1e3+Math.random()*9e3);fs(G=>({...G,code:ie}))}},[kt.name]);const ms=async()=>{if(!kt.name.trim()){t({title:"Error",description:"Material Name is required",variant:"destructive"});return}if(!kt.category){t({title:"Error",description:"Category is required",variant:"destructive"});return}if(!kt.subCategory){t({title:"Error",description:"Subcategory is required",variant:"destructive"});return}try{const ie={name:kt.name.trim(),code:kt.code,vendorCategory:kt.vendorCategory.trim(),category:kt.category,subcategory:kt.subCategory,taxCodeType:kt.taxCodeType,taxCodeValue:kt.taxCodeValue.trim()},G=await yo("/material-templates",ie),ve=G.template||G;mt(Le=>[...Le,ve]),t({title:"Success",description:"Master material created. Suppliers can now use this."}),fs({name:"",code:"",vendorCategory:"",category:"",subCategory:"",taxCodeType:null,taxCodeValue:""})}catch(ie){console.error("create master material error",ie),t({title:"Error",description:ie?.message||"Failed to create master material",variant:"destructive"})}},[Ds,js]=S.useState(""),[Lt,Hs]=S.useState({name:"",code:"",rate:0,unit:"pcs",category:"",subCategory:"",product:"",brandName:"",modelNumber:"",technicalSpecification:"",dimensions:"",finish:"",metalType:"",vendorCategory:"",taxCodeType:void 0,taxCodeValue:""}),Wr=ie=>{gn(ie.id),Hs({name:ie.name,code:ie.code,rate:ie.rate,unit:ie.unit,category:ie.category||"",subCategory:ie.subCategory||ie.sub_category||ie.subcategory||"",product:ie.product||"",brandName:ie.brandName||ie.brand_name||ie.brandname||"",modelNumber:ie.modelNumber||ie.model_number||ie.modelnumber||"",technicalSpecification:ie.technicalSpecification||ie.technical_specification||ie.technicalspecification||"",dimensions:ie.dimensions||"",finish:ie.finish||"",metalType:ie.metalType||ie.metal_type||ie.metaltype||"",shopId:ie.shopId||ie.shop_id||""})},sr=async()=>{if(sn)try{try{const ie={};Lt.name!==void 0&&(ie.name=Lt.name),Lt.code!==void 0&&(ie.code=Lt.code),Lt.rate!==void 0&&(ie.rate=Lt.rate),Lt.shopId!==void 0&&(ie.shop_id=Lt.shopId),Lt.unit!==void 0&&(ie.unit=Lt.unit),Lt.category!==void 0&&(ie.category=Lt.category),Lt.brandName!==void 0&&(ie.brandname=Lt.brandName),Lt.modelNumber!==void 0&&(ie.modelnumber=Lt.modelNumber),Lt.subCategory!==void 0&&(ie.subcategory=Lt.subCategory),Lt.product!==void 0&&(ie.product=Lt.product),Lt.technicalSpecification!==void 0&&(ie.technicalspecification=Lt.technicalSpecification),Lt.image!==void 0&&(ie.image=Lt.image),Lt.attributes!==void 0&&(ie.attributes=Lt.attributes);const G=await ct(`/materials/${sn}`,{method:"PUT",body:JSON.stringify(ie)});if(G.ok){const ve=await G.json(),Le=ve?.material||ve;Ht(Xe=>Xe.map(vt=>vt.id===sn?{...vt,...Le}:vt))}else{try{const ve=await G.text();console.warn("[handleUpdateMaterial] server responded non-ok",G.status,ve)}catch{console.warn("[handleUpdateMaterial] server responded non-ok",G.status)}Ht(ve=>ve.map(Le=>Le.id===sn?{...Le,...Lt}:Le))}}catch(ie){console.warn("[handleUpdateMaterial] server update failed, applying locally",ie),Ht(G=>G.map(ve=>ve.id===sn?{...ve,...Lt}:ve))}t({title:"Updated",description:"Material details updated"}),gn(null),Hs({name:"",code:"",rate:0,unit:"pcs",category:"",subCategory:"",product:"",brandName:"",modelNumber:"",technicalSpecification:"",dimensions:"",finish:"",metalType:""})}catch{t({title:"Error",description:"Failed to update material",variant:"destructive"})}},[ds,mn]=S.useState({name:"",location:"",city:"",state:"",country:"",pincode:"",phoneCountryCode:"+91",contactNumber:"",gstNo:"",vendorCategory:"",rating:5}),[cr,nr]=S.useState(null),[sn,gn]=S.useState(null),[qn,Yr]=S.useState(""),[Gr,ra]=S.useState(""),[gr,Ks]=S.useState(""),en=()=>{if(!ds.name||!ds.phoneCountryCode||!ds.city||!ds.state||!ds.country||!ds.pincode){t({title:"Error",description:"All fields are required (GST is optional)",variant:"destructive"});return}(async()=>{try{let ie=null;if(typeof d=="function"?ie=await d({...ds}):console.warn("[handleAddShop] submitShopForApproval missing from useData; falling back to local save"),ie&&ie.id){const G={id:ie.id,shop:ie,submittedBy:c?.name,submittedAt:new Date().toISOString(),status:"pending"};Ls(ve=>[G,...ve]),xa("approvals"),t({title:"Success",description:"Shop submitted for approval (server)"})}else{const G={id:Math.random().toString(),shop:{...ds},submittedBy:c?.name,submittedAt:new Date().toISOString(),status:"pending"};Ls(ve=>[G,...ve]),xa("approvals"),t({title:"Saved Locally",description:"Shop saved locally; will sync when server is available"})}}catch(ie){console.warn("submit shop failed",ie);const G=ie?.message||String(ie),ve={id:Math.random().toString(),shop:{...ds},submittedBy:c?.name,submittedAt:new Date().toISOString(),status:"pending"};Ls(Le=>[ve,...Le]),xa("approvals"),G.includes("401")||/unauthori/i.test(G)?t({title:"Saved Locally (Unauthorized)",description:"You are not logged in as admin  please log in to submit to server.",variant:"destructive"}):t({title:"Saved Locally",description:`Shop saved locally; server submit failed: ${G}`,variant:"destructive"})}finally{mn({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:"",vendorCategory:""}),nr(null)}})()},Es=ie=>{nr(ie.id),mn({name:ie.name||"",location:ie.location||"",city:ie.city||"",state:ie.state||"",country:ie.country||"",pincode:ie.pincode||"",phoneCountryCode:ie.phone_country_code||ie.phoneCountryCode||ie.phonecountrycode||"+91",contactNumber:ie.contact_number||ie.contactNumber||ie.contactnumber||ie.phone||ie.mobile||"",gstNo:ie.gst_no||ie.gstNo||ie.gstno||"",vendorCategory:ie.vendor_category||ie.vendorCategory||ie.vendorcategory||"",rating:ie.rating||5})},rn=async()=>{if(cr)try{const ie=await ct(`/api/shops/${cr}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ds)});if(!ie.ok)throw new Error(`Update failed: ${ie.status}`);lt(G=>G.map(ve=>ve.id===cr?{...ve,...ds}:ve)),t({title:"Updated",description:"Shop details updated"}),nr(null),mn({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:"",vendorCategory:""})}catch(ie){console.error("Update shop error:",ie),t({title:"Error",description:"Failed to update shop",variant:"destructive"})}},Ps=ie=>{(async()=>{try{const G=ie?.shop?.id;if(!G){t({title:"Cannot Approve",description:"This shop is saved locally and has not been submitted to the server.",variant:"destructive"});return}await o?.(G),Ls(ve=>ve.filter(Le=>Le.id!==ie.id)),t({title:"Approved",description:"Shop has been approved and added to the system"})}catch{t({title:"Error",description:"Failed to approve shop",variant:"destructive"})}})()},wr=ie=>{if(!Q.trim()){t({title:"Error",description:"Please provide a rejection reason",variant:"destructive"});return}(async()=>{try{const G=ie?.shop?.id;if(!G){Ls(ve=>ve.filter(Le=>Le.id!==ie.id)),J(null),k(""),t({title:"Removed",description:"Local shop request removed"});return}await m?.(G,Q),Ls(ve=>ve.filter(Le=>Le.id!==ie.id)),J(null),k(""),t({title:"Rejected",description:"Shop has been rejected"})}catch{t({title:"Error",description:"Failed to reject shop",variant:"destructive"})}})()},Ze=ie=>{(async()=>{try{const G=Ln.find(ve=>ve.id===ie)||Os.find(ve=>ve.id===ie);G&&G.source==="submission"?(await yo(`/material-submissions/${ie}/approve`,{}),ot(ve=>ve.filter(Le=>Le.id!==ie)),Zs(ve=>ve.filter(Le=>Le.id!==ie)),t({title:"Approved",description:"Supplier submission approved and material added"})):(await B?.(ie),Zs(ve=>ve.filter(Le=>Le.id!==ie)),t({title:"Approved",description:"Material has been approved and added to the system"}))}catch{t({title:"Error",description:"Failed to approve material",variant:"destructive"})}})()},us=ie=>{(async()=>{try{const G=Ln.find(ve=>ve.id===ie)||Os.find(ve=>ve.id===ie);G&&G.source==="submission"?(await yo(`/material-submissions/${ie}/reject`,{reason:Q||"Rejected by admin"}),ot(ve=>ve.filter(Le=>Le.id!==ie)),Zs(ve=>ve.filter(Le=>Le.id!==ie)),J(null),k(""),t({title:"Rejected",description:"Supplier submission rejected"})):(await L?.(ie,"Rejected by admin"),Zs(ve=>ve.filter(Le=>Le.id!==ie)),t({title:"Rejected",description:"Material has been rejected"}))}catch{t({title:"Error",description:"Failed to reject material",variant:"destructive"})}})()},is=()=>{if(!qn||!Gr){t({title:"Error",description:"Sender name and message are required",variant:"destructive"});return}(async()=>{try{await j?.(Gr,qn,gr),t({title:"Request Sent",description:"Message sent to Admin & Software Team."}),Yr(""),ra(""),Ks("")}catch{t({title:"Error",description:"Failed to send message",variant:"destructive"})}})()},yn=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team",Jn=c?.role==="admin"||c?.role==="software_team"||c?.role==="supplier"||c?.role==="purchase_team";c?.role==="admin"||c?.role==="supplier"||c?.role,c?.role==="supplier"||c?.role;const zn=c?.role==="admin"||c?.role==="software_team",ua=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team"||c?.role==="pre_sales",ga=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team"||c?.role==="pre_sales",ha=ga||c?.role==="pre_sales",Tr=ga||c?.role==="pre_sales",$a=ga||c?.role==="pre_sales",ya=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team",rr=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team",[,oa]=bo(),Ga=()=>{if(typeof window<"u"){const ie=new URLSearchParams(window.location.search).get("tab");if(ie)return ie}return"dashboard"},[fi,xa]=S.useState(Ga());return S.useEffect(()=>{xa(Ga())},[oa]),S.useEffect(()=>{const ie=()=>xa(Ga());window.addEventListener("popstate",ie);const G=history.pushState,ve=history.replaceState;return history.pushState=function(...Le){const Xe=G.apply(this,Le);return window.dispatchEvent(new PopStateEvent("popstate")),Xe},history.replaceState=function(...Le){const Xe=ve.apply(this,Le);return window.dispatchEvent(new PopStateEvent("popstate")),Xe},ie(),()=>{window.removeEventListener("popstate",ie),history.pushState=G,history.replaceState=ve}},[]),e.jsx(ka,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading",children:c?.role==="supplier"?"Supplier Portal":c?.role==="purchase_team"?"Purchase Team Dashboard":"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your inventory and settings"})]}),fi==="dashboard"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(ks,{children:[e.jsx(ur,{className:"pb-3",children:e.jsx(hr,{className:"text-sm font-medium text-muted-foreground",children:"Total Shops"})}),e.jsx(Ws,{children:e.jsx("div",{className:"text-3xl font-bold",children:s.length})})]}),e.jsxs(ks,{children:[e.jsx(ur,{className:"pb-3",children:e.jsx(hr,{className:"text-sm font-medium text-muted-foreground",children:"Total Materials"})}),e.jsx(Ws,{children:e.jsx("div",{className:"text-3xl font-bold",children:n.length})})]})]}),(zn||c?.role==="purchase_team")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ks,{children:[e.jsx(ur,{className:"cursor-pointer select-none",onClick:()=>Pt(!qt),children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(hr,{className:"font-bold text-lg text-foreground flex items-center gap-2",children:["All Shops ",qt?e.jsx(nb,{className:"h-4 w-4"}):e.jsx(Oy,{className:"h-4 w-4"})]}),e.jsx(na,{className:"text-sm",children:"List of registered shops"})]})})}),qt&&e.jsxs(Ws,{className:"space-y-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ly,{className:"h-4 w-4 text-muted-foreground"}),e.jsx($e,{value:Is,onChange:ie=>on(ie.target.value),placeholder:"Search shops by name, city or location...",className:"h-9"})]}),e.jsx("div",{className:"max-h-[800px] overflow-y-auto pr-2 border rounded-md",children:Nn.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No shops available"}):Nn.map(ie=>e.jsx("div",{className:"p-3 border-b hover:bg-muted/30 transition-colors",children:cr===ie.id?e.jsxs("div",{className:"space-y-4 p-2 bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{className:"text-xs font-semibold",children:"Shop Name"}),e.jsx($e,{value:ds.name||"",onChange:G=>mn({...ds,name:G.target.value}),placeholder:"Shop Name"})]}),e.jsxs("div",{children:[e.jsx(Ve,{className:"text-xs font-semibold",children:"Location"}),e.jsx($e,{value:ds.location||"",onChange:G=>mn({...ds,location:G.target.value}),placeholder:"Location"})]}),e.jsxs("div",{children:[e.jsx(Ve,{className:"text-xs font-semibold",children:"City"}),e.jsx($e,{value:ds.city||"",onChange:G=>mn({...ds,city:G.target.value}),placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx(Ve,{className:"text-xs font-semibold",children:"Contact Number"}),e.jsx($e,{value:ds.contactNumber||"",onChange:G=>mn({...ds,contactNumber:G.target.value}),placeholder:"Phone Number"})]}),e.jsxs("div",{children:[e.jsx(Ve,{className:"text-xs font-semibold",children:"GST No"}),e.jsx($e,{value:ds.gstNo||"",onChange:G=>mn({...ds,gstNo:G.target.value}),placeholder:"GST No"})]}),e.jsxs("div",{children:[e.jsx(Ve,{className:"text-xs font-semibold",children:"Vendor Category"}),e.jsxs(Bn,{value:ds.vendorCategory||"",onValueChange:G=>mn({...ds,vendorCategory:G}),children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select Vendor Category"})}),e.jsx(Sn,{className:"max-h-60 overflow-y-auto",children:Rt.map(G=>e.jsx(dn,{value:G.name,children:G.name},G.id))})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(Be,{size:"sm",onClick:rn,children:"Save Changes"}),e.jsx(Be,{size:"sm",variant:"ghost",onClick:()=>{nr(null),mn({name:"",location:"",city:"",phoneCountryCode:"+91",state:"",country:"",pincode:"",gstNo:""})},children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg text-foreground",children:ie.name}),e.jsxs("div",{className:"text-sm text-foreground/80",children:[ie.location,", ",ie.city]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 font-medium",children:[ie.phone_country_code||ie.phoneCountryCode||ie.phonecountrycode||"+91"," ",ie.contact_number||ie.contactNumber||ie.contactnumber||ie.phone||ie.mobile,"  ",ie.gst_no||ie.gstNo||ie.gstno||"No GST"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:ya&&e.jsxs(e.Fragment,{children:[e.jsx(Be,{size:"sm",variant:"outline",onClick:()=>Es(ie),children:"Edit"}),e.jsx(Be,{size:"sm",variant:"ghost",onClick:()=>lt(G=>G.map(ve=>ve.id===ie.id?{...ve,disabled:!ve.disabled}:ve)),children:ie.disabled?"Enable":"Disable"}),e.jsx(Be,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>{window.confirm(`Delete shop "${ie.name}"? This cannot be undone.`)&&y(ie.id).then(()=>{lt(G=>G.filter(ve=>ve.id!==ie.id)),t({title:"Deleted",description:`${ie.name} removed`})}).catch(G=>{t({title:"Error",description:`Failed to delete ${ie.name}`,variant:"destructive"})})},children:e.jsx(qc,{className:"h-4 w-4"})})]})})]})},ie.id))})]})]}),e.jsxs(ks,{children:[e.jsx(ur,{className:"cursor-pointer select-none",onClick:()=>Rs(!gs),children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(hr,{className:"font-bold text-lg text-foreground flex items-center gap-2",children:["All Materials ",gs?e.jsx(nb,{className:"h-4 w-4"}):e.jsx(Oy,{className:"h-4 w-4"})]}),e.jsx(na,{className:"text-sm",children:"Comprehensive material registry"})]})})}),gs&&e.jsxs(Ws,{className:"space-y-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ly,{className:"h-4 w-4 text-muted-foreground"}),e.jsx($e,{value:ws,onChange:ie=>St(ie.target.value),placeholder:"Search materials...",className:"h-9"})]}),e.jsx("div",{className:"max-h-[800px] overflow-y-auto pr-2 border rounded-md",children:ys.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No materials available"}):ys.map(ie=>e.jsx("div",{className:"p-2 border-b",children:sn===ie.id?e.jsxs("div",{className:"space-y-4 p-4 bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"font-bold text-base text-foreground pb-2 border-b",children:["Editing: ",ie.name]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Name"}),e.jsx($e,{value:Lt.name||"",onChange:G=>Hs({...Lt,name:G.target.value})})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Code"}),e.jsx($e,{value:Lt.code||"",onChange:G=>Hs({...Lt,code:G.target.value})})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Rate"}),e.jsx($e,{type:"number",value:Lt.rate||"",onChange:G=>Hs({...Lt,rate:parseFloat(G.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Unit"}),e.jsxs(Bn,{value:Lt.unit||"",onValueChange:G=>Hs({...Lt,unit:G}),children:[e.jsx(wn,{children:e.jsx(Cn,{})}),e.jsx(Sn,{children:gz.map(G=>e.jsx(dn,{value:G,children:G},G))})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Category"}),e.jsxs(Bn,{value:Lt.category||"",onValueChange:G=>Hs({...Lt,category:G,subCategory:""}),children:[e.jsx(wn,{children:e.jsx(Cn,{})}),e.jsx(Sn,{children:$.map(G=>e.jsx(dn,{value:G,children:G},G))})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Sub Category"}),e.jsxs(Bn,{value:Lt.subCategory||"",onValueChange:G=>Hs({...Lt,subCategory:G}),children:[e.jsx(wn,{children:e.jsx(Cn,{})}),e.jsx(Sn,{children:vs(Lt.category||"").map(G=>e.jsx(dn,{value:G.name,children:G.name},G.id))})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Product"}),e.jsxs(Bn,{value:Lt.product||"",onValueChange:G=>Hs({...Lt,product:G}),children:[e.jsx(wn,{children:e.jsx(Cn,{})}),e.jsx(Sn,{children:Qe.filter(G=>G.subcategory===Lt.subCategory).map(G=>e.jsxs(dn,{value:G.name,children:[G.name," ","(Subcategory: ",G.subcategory_name,")"]},G.id))})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Brand Name"}),e.jsx($e,{value:Lt.brandName||"",onChange:G=>Hs({...Lt,brandName:G.target.value})})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Model Number"}),e.jsx($e,{value:Lt.modelNumber||"",onChange:G=>Hs({...Lt,modelNumber:G.target.value})})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Assigned Shop"}),e.jsxs(Bn,{value:Lt.shopId||"",onValueChange:G=>Hs({...Lt,shopId:G}),children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select Shop"})}),e.jsx(Sn,{children:Kt.map(G=>e.jsx(dn,{value:G.id,children:G.name},G.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Technical Specification"}),e.jsx(Cl,{value:Lt.technicalSpecification||"",onChange:G=>Hs({...Lt,technicalSpecification:G.target.value})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{size:"sm",onClick:sr,children:"Save Changes"}),e.jsx(Be,{size:"sm",variant:"ghost",onClick:()=>{gn(null),Hs({name:"",code:"",rate:0,unit:"pcs",category:"",subCategory:"",product:"",brandName:"",modelNumber:"",technicalSpecification:"",dimensions:"",finish:"",metalType:""})},children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-base text-foreground",children:ie.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[ie.code,"  ",ie.rate,"/",ie.unit]}),e.jsxs("div",{className:"text-[10px] text-muted-foreground italic",children:["Shop: ",Kt.find(G=>G.id===(ie.shopId||ie.shop_id))?.name||"Unassigned"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:"sm",variant:"ghost",onClick:()=>Ht(G=>G.map(ve=>ve.id===ie.id?{...ve,disabled:!ve.disabled}:ve)),children:ie.disabled?"Enable":"Disable"}),e.jsx(Be,{size:"sm",variant:"outline",onClick:()=>Wr(ie),children:"Edit"}),ya&&e.jsx(Be,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>{window.confirm(`Delete material "${ie.name}"? This cannot be undone.`)&&p(ie.id).then(()=>{Ht(G=>G.filter(ve=>ve.id!==ie.id)),t({title:"Deleted",description:`${ie.name} removed`})}).catch(G=>{t({title:"Error",description:`Failed to delete ${ie.name}`,variant:"destructive"})})},children:e.jsx(qc,{className:"h-4 w-4"})})]})]})},ie.id))})]})]})]}),c?.role==="supplier"&&e.jsx("div",{className:"space-y-4",children:e.jsxs(ks,{children:[e.jsxs(ur,{children:[e.jsx(hr,{children:"Available  Materials"}),e.jsx(na,{className:"text-sm",children:"Select a material "})]}),e.jsxs(Ws,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{value:typeof Gt<"u"?Gt:"",onChange:ie=>Yt(ie.target.value),placeholder:"Search templates..."}),e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[e.jsx(Be,{size:"sm",variant:Cs==="grid"?void 0:"ghost",onClick:()=>rs("grid"),children:"Grid"}),e.jsx(Be,{size:"sm",variant:Cs==="list"?void 0:"ghost",onClick:()=>rs("list"),children:"List"})]})]}),e.jsx("div",{})]}),rt.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No master materials yet"}):e.jsx("div",{className:"space-y-2",children:rt.map(ie=>e.jsxs("div",{className:"p-2 border-b flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm",children:[ie.name," ",e.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:ie.code})]}),e.jsx(pa,{href:"/admin/dashboard?tab=materials",children:e.jsx("span",{className:"text-sm text-sidebar-primary",children:"Use"})})]},ie.id))})]})]})})]}),e.jsxs(u9,{value:fi,onValueChange:ie=>{if(xa(ie),typeof window<"u"){const G=new URL(window.location.href);G.searchParams.set("tab",ie),window.history.replaceState({},"",G.toString())}},className:"w-full",children:[ua&&e.jsxs(nu,{value:"create-product",className:"space-y-6 mt-4",children:[e.jsxs(ks,{className:"border-purple-200 bg-purple-50",children:[e.jsx(ur,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(hr,{className:"text-purple-900",children:"Create Categories"}),e.jsx(na,{className:"text-purple-800",children:"Add new product categories"})]}),ha&&e.jsx(e.Fragment,{children:e.jsxs(ih,{children:[e.jsx(Av,{asChild:!0,children:e.jsxs(Be,{className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"})," Add Category"]})}),e.jsxs(iu,{children:[e.jsx(ou,{children:e.jsx(lu,{children:"Add New Category"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Category Name ",e.jsx($l,{})]}),e.jsx($e,{value:se,onChange:ie=>xe(ie.target.value),placeholder:"e.g. Flooring, Roofing, Doors"})]}),e.jsxs(Be,{onClick:ns,className:"w-full bg-purple-600 hover:bg-purple-700",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"})," Add Category"]})]})]})]})})]})}),e.jsxs(Ws,{children:[_e&&e.jsxs("div",{className:"space-y-2 p-3 border rounded mb-4 bg-white",children:[e.jsxs(Ve,{children:["Select Category ",e.jsx($l,{})]}),e.jsxs(Bn,{value:Z,onValueChange:ge,children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Choose a category..."})}),e.jsx(Sn,{className:"max-h-44",children:$.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No categories available"}):$.map(ie=>e.jsx(dn,{value:ie,children:ie},ie))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Subcategory Name ",e.jsx($l,{})]}),e.jsx($e,{value:Me,onChange:ie=>me(ie.target.value),placeholder:"e.g. Commercial, Residential"})]}),e.jsx(Be,{onClick:async()=>{await Ts(),Me.trim()&&de(!1)},className:"bg-green-600 hover:bg-green-700",children:"Add Subcategory"})]}),e.jsx("div",{className:"mb-4",children:e.jsx($e,{value:nt,onChange:ie=>at(ie.target.value),placeholder:"Search categories..."})}),e.jsx("div",{className:"space-y-3",children:$.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-6",children:"No categories created yet"}):$.filter(ie=>ie.toLowerCase().includes(nt.toLowerCase())).map((ie,G)=>{const ve=vs(ie);return e.jsx("div",{className:"p-4 border rounded-lg bg-white hover:border-purple-400 transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ol,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:ie}),ve.length>0&&e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",ve.length," subcategories)"]})]})]}),ga&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{size:"sm",variant:"outline",onClick:()=>{le(ie),te(ie)},children:"Edit"}),e.jsx(Be,{size:"sm",variant:"destructive",onClick:async()=>{if(window.confirm(`Delete category "${ie}" and its subcategories? This cannot be undone.`))try{await ct(`/categories/${encodeURIComponent(ie)}`,{method:"DELETE"}),q(Le=>Le.filter(Xe=>Xe!==ie)),ne(Le=>Le.filter(Xe=>Xe.category!==ie)),t({title:"Deleted",description:`Category ${ie} removed`})}catch(Le){console.error("delete category error",Le),t({title:"Error",description:"Failed to delete category",variant:"destructive"})}},children:e.jsx(qc,{className:"h-4 w-4"})})]}),ee===ie&&e.jsx("div",{className:"mt-3 p-3 bg-gray-100 rounded border col-span-full",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx($e,{value:ue,onChange:Le=>te(Le.target.value),placeholder:"Category name",className:"text-sm"}),e.jsx(Be,{size:"sm",onClick:async()=>{const Le=ee,Xe=ue.trim();if(!Xe){t({title:"Error",description:"Category name cannot be empty",variant:"destructive"});return}try{await ct(`/categories/${encodeURIComponent(Le)}`,{method:"PUT",body:JSON.stringify({name:Xe})}),q(vt=>vt.map(ut=>ut===Le?Xe:ut)),ne(vt=>vt.map(ut=>ut.category===Le?{...ut,category:Xe}:ut)),le(null),te(""),t({title:"Success",description:`Category updated to ${Xe}`})}catch(vt){console.error("update category error",vt),t({title:"Error",description:"Failed to update category",variant:"destructive"})}},children:"Save"}),e.jsx(Be,{size:"sm",variant:"ghost",onClick:()=>{le(null),te("")},children:"Cancel"})]})})]})},G)})})]})]}),e.jsxs(ks,{className:"border-green-200 bg-green-50",children:[e.jsx(ur,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(hr,{className:"text-green-900",children:"Create Subcategories"}),e.jsx(na,{className:"text-green-800",children:"Add subcategories to your categories"})]}),ha&&e.jsx(e.Fragment,{children:e.jsxs(ih,{children:[e.jsx(Av,{asChild:!0,children:e.jsxs(Be,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"})," Add Subcategory"]})}),e.jsxs(iu,{children:[e.jsx(ou,{children:e.jsx(lu,{})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Select Category ",e.jsx($l,{})]}),e.jsxs(Bn,{value:Z,onValueChange:ge,children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Choose a category..."})}),e.jsx(Sn,{className:"max-h-64",children:$.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No categories available"}):$.map(ie=>e.jsx(dn,{value:ie,children:ie},ie))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Subcategory Name ",e.jsx($l,{})]}),e.jsx($e,{value:Me,onChange:ie=>me(ie.target.value),placeholder:"e.g. Commercial, Residential"})]}),e.jsxs(Be,{onClick:Ts,className:"w-full bg-green-600 hover:bg-green-700",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"})," Add Subcategory"]})]})]})]})})]})}),e.jsxs(Ws,{children:[e.jsx("div",{className:"mb-4",children:e.jsx($e,{value:Dt,onChange:ie=>yt(ie.target.value),placeholder:"Search subcategories..."})}),e.jsx("div",{className:"space-y-3",children:re.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-6",children:"No subcategories created yet"}):re.filter(ie=>ie.name.toLowerCase().includes(Dt.toLowerCase())).map(ie=>e.jsx("div",{className:"p-4 border rounded-lg bg-white hover:border-green-400 transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(lx,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:ie.name}),e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(Category: ",ie.category,")"]})]})]}),$a&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{size:"sm",variant:"outline",onClick:()=>{pe(ie.id),je(ie.name),Je(ie.category)},children:"Edit"}),e.jsx(Be,{size:"sm",variant:"destructive",onClick:async()=>{if(window.confirm(`Delete subcategory "${ie.name}"? This cannot be undone.`))try{(await ct(`/subcategories/${ie.id}`,{method:"DELETE"})).ok?(ne(ve=>ve.filter(Le=>Le.id!==ie.id)),t({title:"Deleted",description:`Subcategory ${ie.name} removed`})):t({title:"Error",description:"Failed to delete subcategory",variant:"destructive"})}catch(G){console.error("delete subcategory error",G),t({title:"Error",description:"Failed to delete subcategory",variant:"destructive"})}},children:e.jsx(qc,{className:"h-4 w-4"})})]}),we===ie.id&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-100 rounded border col-span-full w-full space-y-3",children:[e.jsxs("div",{children:[e.jsx(Ve,{className:"text-sm",children:"Category"}),e.jsxs(Bn,{value:Ne,onValueChange:Je,children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Choose a category..."})}),e.jsx(Sn,{className:"max-h-64",children:$.map(G=>e.jsx(dn,{value:G,children:G},G))})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{className:"text-sm",children:"Subcategory Name"}),e.jsx($e,{value:be,onChange:G=>je(G.target.value),placeholder:"Subcategory name",className:"text-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{size:"sm",onClick:async()=>{const G=be.trim();if(!G){t({title:"Error",description:"Subcategory name cannot be empty",variant:"destructive"});return}if(!Ne){t({title:"Error",description:"Please select a category",variant:"destructive"});return}try{(await ct(`/subcategories/${ie.id}`,{method:"PUT",body:JSON.stringify({name:G,category:Ne})})).ok&&(ne(Le=>Le.map(Xe=>Xe.id===ie.id?{...Xe,name:G,category:Ne}:Xe)),pe(null),je(""),Je(""),t({title:"Success",description:"Subcategory updated"}))}catch(ve){console.error("update subcategory error",ve),t({title:"Error",description:"Failed to update subcategory",variant:"destructive"})}},children:"Save"}),e.jsx(Be,{size:"sm",variant:"ghost",onClick:()=>{pe(null),je(""),Je("")},children:"Cancel"})]})]})]})},ie.id))})]})]}),e.jsxs(ks,{className:"border-blue-200 bg-blue-50",children:[e.jsx(ur,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(hr,{className:"text-blue-900",children:"Create Products"}),e.jsx(na,{className:"text-blue-800",children:"Add new products and assign subcategories"})]}),ha&&e.jsx(e.Fragment,{children:e.jsxs(ih,{children:[e.jsx(Av,{asChild:!0,children:e.jsxs(Be,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"})," Add Product"]})}),e.jsxs(iu,{children:[e.jsx(ou,{children:e.jsx(lu,{children:"Add New Product"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Product Name ",e.jsx($l,{})]}),e.jsx($e,{value:Te.name,onChange:ie=>Ce(G=>({...G,name:ie.target.value})),placeholder:"e.g. Ceramic Tiles, Wooden Door"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Select Subcategory ",e.jsx($l,{})]}),e.jsxs(Bn,{value:Te.subcategory,onValueChange:ie=>Ce(G=>({...G,subcategory:ie})),children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Choose a subcategory..."})}),e.jsx(Sn,{className:"max-h-64",children:re.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No subcategories available"}):re.map(ie=>e.jsxs(dn,{value:ie.name,children:[ie.name," ",e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",ie.category,")"]})]},ie.id))})]})]}),_e&&e.jsxs("div",{className:"space-y-2 p-3 border rounded",children:[e.jsxs(Ve,{children:["Select Category ",e.jsx($l,{})]}),e.jsxs(Bn,{value:Z,onValueChange:ge,children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Choose a category..."})}),e.jsx(Sn,{className:"max-h-44",children:$.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No categories available"}):$.map(ie=>e.jsx(dn,{value:ie,children:ie},ie))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Subcategory Name ",e.jsx($l,{})]}),e.jsx($e,{value:Me,onChange:ie=>me(ie.target.value),placeholder:"e.g. Commercial, Residential"})]}),e.jsx(Be,{onClick:async()=>{await Ts(),Me.trim()&&(Ce(ie=>({...ie,subcategory:Me.trim()})),de(!1))},className:"w-full bg-green-600 hover:bg-green-700",children:"Add Subcategory"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"HSN Code"}),e.jsx($e,{value:Te.hsnCode,onChange:ie=>Ce({...Te,hsnCode:ie.target.value}),placeholder:"Enter HSN code"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"SAC Code"}),e.jsx($e,{value:Te.sacCode,onChange:ie=>Ce({...Te,sacCode:ie.target.value}),placeholder:"Enter SAC code"})]})]}),e.jsxs(Be,{onClick:Ns,className:"w-full bg-blue-600 hover:bg-blue-700",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"})," Add Product"]})]})]})]})})]})}),e.jsxs(Ws,{children:[e.jsx("div",{className:"mb-4",children:e.jsx($e,{value:qe,onChange:ie=>Tt(ie.target.value),placeholder:"Search products..."})}),e.jsx("div",{className:"space-y-3",children:Qe.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-6",children:"No products created yet"}):Qe.filter(ie=>ie.name.toLowerCase().includes(qe.toLowerCase())).map(ie=>e.jsx("div",{className:"p-4 border rounded-lg bg-white hover:border-blue-400 transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ol,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium block",children:ie.name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Subcategories: ",ie.subcategory||"-"]}),ie.taxCodeType&&ie.taxCodeValue&&e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[ie.taxCodeType.toUpperCase(),": ",ie.taxCodeValue]})]})]}),Tr&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{size:"sm",variant:"outline",onClick:()=>{st(oe(ie))},children:"Edit"}),e.jsx(Be,{size:"sm",variant:"destructive",onClick:()=>De(ie.id),children:e.jsx(qc,{className:"h-4 w-4"})})]})]})},ie.id))})]})]}),dt&&e.jsx(ih,{open:!!dt,onOpenChange:ie=>!ie&&st(null),children:e.jsxs(iu,{children:[e.jsx(ou,{children:e.jsx(lu,{children:"Edit Product"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Product Name ",e.jsx($l,{})]}),e.jsx($e,{value:dt.name,onChange:ie=>st(G=>({...G,name:ie.target.value})),placeholder:"e.g. Ceramic Tiles, Wooden Door"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Select Subcategory ",e.jsx($l,{})]}),e.jsxs(Bn,{value:dt.subcategory,onValueChange:ie=>st(G=>({...G,subcategory:ie})),children:[e.jsx(wn,{className:"max-h-64 overflow-y-auto",children:e.jsx(Cn,{placeholder:"Select subcategory"})}),e.jsx(Sn,{className:"max-h-64",children:re.map(ie=>e.jsxs(dn,{value:ie.name,children:[ie.name," (",ie.category,")"]},ie.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Tax Code Type"}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:"edit-hsn",name:"editProductTaxCodeType",value:"hsn",checked:dt.taxCodeType==="hsn",onChange:ie=>st(G=>({...G,taxCodeType:ie.target.value})),className:"w-4 h-4"}),e.jsx(Ve,{htmlFor:"edit-hsn",className:"cursor-pointer mb-0",children:"HSN Code"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:"edit-sac",name:"editProductTaxCodeType",value:"sac",checked:dt.taxCodeType==="sac",onChange:ie=>st(G=>({...G,taxCodeType:ie.target.value})),className:"w-4 h-4"}),e.jsx(Ve,{htmlFor:"edit-sac",className:"cursor-pointer mb-0",children:"SAC Code"})]})]})]}),dt.taxCodeType&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:[dt.taxCodeType==="hsn"?"HSN":"SAC"," Code"]}),e.jsx($e,{value:dt.taxCodeValue||"",onChange:ie=>st(G=>({...G,taxCodeValue:ie.target.value})),placeholder:`Enter ${dt.taxCodeType==="hsn"?"HSN":"SAC"} code`})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(Be,{variant:"outline",onClick:()=>st(null),children:"Cancel"}),e.jsx(Be,{onClick:()=>{dt.name.trim()&&dt.subcategory?(et(),st(null)):t({title:"Error",description:"Please fill in all fields",variant:"destructive"})},className:"bg-blue-600 hover:bg-blue-700",children:"Save Changes"})]})]})]})})]}),e.jsxs(nu,{value:"materials",className:"space-y-4 mt-4",children:[(zn||c?.role==="purchase_team")&&e.jsxs(ks,{className:"border-blue-200 bg-blue-50",children:[e.jsxs(ur,{children:[e.jsxs(hr,{className:"text-blue-900",children:[e.jsx(ol,{className:"inline-block mr-2 h-4 w-4 text-blue-900"})," Create Material"]}),e.jsx(na,{className:"text-blue-800",children:"Add new material templates for suppliers to use"})]}),e.jsxs(Ws,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Item Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($e,{value:kt.name,onChange:ie=>fs({...kt,name:ie.target.value}),placeholder:"Enter Item name"}),kt.name&&rt.some(ie=>ie.name.toLowerCase().trim()===kt.name.toLowerCase().trim())&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:" This material name already exists"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Item Code (Auto)"}),e.jsx($e,{value:kt.code,disabled:!0,className:"bg-muted"}),kt.code&&rt.some(ie=>ie.code===kt.code)&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:" This item code already exists"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Vendor Category"}),e.jsxs(Bn,{value:kt.vendorCategory,onValueChange:ie=>fs({...kt,vendorCategory:ie}),children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select vendor category"})}),e.jsx(Sn,{className:"max-h-[200px] overflow-y-auto",children:Rt.length===0?e.jsx(dn,{value:"none",disabled:!0,children:"No categories available"}):Rt.map(ie=>e.jsx(dn,{value:ie.name,children:ie.name},ie.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Category"}),e.jsxs(Bn,{value:kt.category,onValueChange:ie=>fs({...kt,category:ie,subCategory:""}),children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select Category"})}),e.jsx(Sn,{className:"max-h-[200px] overflow-y-auto",children:$.map(ie=>e.jsx(dn,{value:ie,children:ie},ie))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Subcategory"}),e.jsxs(Bn,{value:kt.subCategory,onValueChange:ie=>fs({...kt,subCategory:ie}),disabled:!kt.category,children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select Subcategory"})}),e.jsx(Sn,{className:"max-h-[200px] overflow-y-auto",children:vs(kt.category).map(ie=>e.jsx(dn,{value:ie.name,children:ie.name},ie.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Tax Code Type"}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:"hsn",name:"taxCodeType",value:"hsn",checked:kt.taxCodeType==="hsn",onChange:ie=>fs({...kt,taxCodeType:ie.target.value}),className:"w-4 h-4"}),e.jsx(Ve,{htmlFor:"hsn",className:"cursor-pointer mb-0",children:"HSN Code"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:"sac",name:"taxCodeType",value:"sac",checked:kt.taxCodeType==="sac",onChange:ie=>fs({...kt,taxCodeType:ie.target.value}),className:"w-4 h-4"}),e.jsx(Ve,{htmlFor:"sac",className:"cursor-pointer mb-0",children:"SAC Code"})]})]})]}),kt.taxCodeType&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:[kt.taxCodeType==="hsn"?"HSN":"SAC"," Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($e,{value:kt.taxCodeValue,onChange:ie=>fs({...kt,taxCodeValue:ie.target.value}),placeholder:`Enter ${kt.taxCodeType==="hsn"?"HSN":"SAC"} code`})]})]}),e.jsxs(Be,{onClick:ms,disabled:!kt.name.trim()||rt.some(ie=>ie.name.toLowerCase().trim()===kt.name.toLowerCase().trim())||rt.some(ie=>ie.code===kt.code)||kt.taxCodeType&&!kt.taxCodeValue.trim(),className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(wc,{className:"mr-2 h-4 w-4"})," Create Material"]})]})]}),(zn||c?.role==="purchase_team")&&e.jsxs(ks,{children:[e.jsxs(ur,{children:[e.jsx(hr,{children:"Created Material Templates"}),e.jsx(na,{children:"Manage all material templates created for suppliers"}),e.jsx("div",{className:"mt-4",children:e.jsx($e,{placeholder:"Search materials...",value:Gt,onChange:ie=>Yt(ie.target.value),className:"max-w-sm"})})]}),e.jsx(Ws,{children:rt.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No material templates created yet. Create one above."}):e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto p-2",children:rt.filter(ie=>(ie.name+" "+ie.code+" "+(ie.category||"")).toLowerCase().includes(Gt.toLowerCase())).slice(0,36).map(ie=>e.jsxs("div",{className:"p-4 border rounded flex items-center justify-between bg-white",children:[e.jsx("div",{className:"flex-1",children:sn===ie.id?e.jsxs("div",{className:"space-y-3 w-full",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(Ve,{children:["Item Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($e,{value:Lt.name,onChange:G=>Hs({...Lt,name:G.target.value}),placeholder:"Enter material name"})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Item Code"}),e.jsx($e,{value:ie.code,disabled:!0,className:"bg-muted",placeholder:"Auto-generated"})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Vendor Category"}),e.jsxs(Bn,{value:Lt.vendorCategory||"",onValueChange:G=>Hs({...Lt,vendorCategory:G}),children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select vendor category"})}),e.jsx(Sn,{className:"max-h-[200px] overflow-y-auto",children:Rt.length===0?e.jsx(dn,{value:"none",disabled:!0,children:"No categories available"}):Rt.map(G=>e.jsx(dn,{value:G.name,children:G.name},G.id))})]})]}),e.jsxs("div",{children:[e.jsxs(Ve,{children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(Bn,{value:Lt.category,onValueChange:G=>Hs({...Lt,category:G,subCategory:""}),children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select Category"})}),e.jsx(Sn,{className:"max-h-[200px] overflow-y-auto",children:$.map(G=>e.jsx(dn,{value:G,children:G},G))})]})]}),e.jsxs("div",{children:[e.jsxs(Ve,{children:["Subcategory ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(Bn,{value:Lt.subCategory||"",onValueChange:G=>Hs({...Lt,subCategory:G}),disabled:!Lt.category,children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select Subcategory"})}),e.jsx(Sn,{className:"max-h-[200px] overflow-y-auto",children:vs(Lt.category||"").map(G=>e.jsx(dn,{value:G.name,children:G.name},G.id))})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Tax Code Type"}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:`hsn-${ie.id}`,name:`taxCodeType-${ie.id}`,value:"hsn",checked:Lt.taxCodeType==="hsn",onChange:G=>Hs({...Lt,taxCodeType:G.target.value}),className:"w-4 h-4"}),e.jsx(Ve,{htmlFor:`hsn-${ie.id}`,className:"cursor-pointer mb-0",children:"HSN Code"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:`sac-${ie.id}`,name:`taxCodeType-${ie.id}`,value:"sac",checked:Lt.taxCodeType==="sac",onChange:G=>Hs({...Lt,taxCodeType:G.target.value}),className:"w-4 h-4"}),e.jsx(Ve,{htmlFor:`sac-${ie.id}`,className:"cursor-pointer mb-0",children:"SAC Code"})]})]})]}),Lt.taxCodeType&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs(Ve,{children:[Lt.taxCodeType==="hsn"?"HSN":"SAC"," Code"]}),e.jsx($e,{value:Lt.taxCodeValue||"",onChange:G=>Hs({...Lt,taxCodeValue:G.target.value}),placeholder:`Enter ${Lt.taxCodeType==="hsn"?"HSN":"SAC"} code`})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[e.jsx(Be,{size:"sm",variant:"ghost",onClick:()=>gn(null),children:"Cancel"}),e.jsx(Be,{size:"sm",onClick:async()=>{if(!(Lt.name||"").trim()){t({title:"Error",description:"Material name is required",variant:"destructive"});return}if(!Lt.category){t({title:"Error",description:"Category is required",variant:"destructive"});return}if(!Lt.subCategory){t({title:"Error",description:"Subcategory is required",variant:"destructive"});return}if(Lt.taxCodeType&&!Lt.taxCodeValue?.trim()){t({title:"Error",description:`${Lt.taxCodeType==="hsn"?"HSN":"SAC"} code is required when tax code type is selected`,variant:"destructive"});return}try{const G={name:Lt.name,code:ie.code,category:Lt.category,subcategory:Lt.subCategory,vendor_category:Lt.vendorCategory||null,tax_code_type:Lt.taxCodeType||null,tax_code_value:Lt.taxCodeValue||null},ve=await ct(`/material-templates/${ie.id}`,{method:"PUT",body:JSON.stringify(G)});if(!ve.ok){const Xe=await ve.text().catch(()=>"");throw console.error("[material-templates PUT] failed",ve.status,Xe),t({title:"Error",description:Xe||"Failed to update material (server error)",variant:"destructive"}),new Error(Xe||"update failed")}const Le=await ve.json().catch(()=>null);mt(Xe=>Xe.map(vt=>vt.id===ie.id?{...vt,name:Lt.name,category:Lt.category,subcategory:Lt.subCategory,vendor_category:Lt.vendorCategory,tax_code_type:Lt.taxCodeType,tax_code_value:Lt.taxCodeValue,...Le?.template||{}}:vt)),gn(null),t({title:"Success",description:"Material template updated"})}catch(G){console.error("update error",G),G?.message?.includes("update failed")||t({title:"Error",description:"Failed to update material template",variant:"destructive"})}},children:"Save Changes"})]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:ie.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[ie.code,ie.category&&e.jsxs("span",{className:"ml-2 text-[11px] text-gray-500",children:[" ",ie.category]}),(ie.subcategory||ie.sub_category)&&e.jsxs("span",{className:"ml-1 text-[11px] text-gray-400",children:["/ ",ie.subcategory||ie.sub_category]})]})]})}),sn!==ie.id&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:"sm",onClick:()=>{gn(ie.id),Hs({...Lt,name:ie.name,category:ie.category||"",subCategory:ie.subcategory||ie.sub_category||"",vendorCategory:ie.vendor_category||"",taxCodeType:ie.tax_code_type,taxCodeValue:ie.tax_code_value||""})},children:"Edit"}),e.jsx(Be,{size:"sm",variant:"destructive",onClick:async()=>{if(window.confirm(`Delete "${ie.name}"? This cannot be undone.`))try{console.log("[DELETE template]",ie.id,ie.name);const G=await ct(`/material-templates/${ie.id}`,{method:"DELETE"});if(console.log("[DELETE response]",G.status,G.ok),!G.ok){const ve=await G.json();throw new Error(ve.message||"Failed to delete")}mt(ve=>ve.filter(Le=>Le.id!==ie.id)),t({title:"Success",description:"Material deleted"})}catch(G){console.error("delete error",G),t({title:"Error",description:G instanceof Error?G.message:"Failed to delete material",variant:"destructive"})}},children:"Delete"})]})]},ie.id))})})]})]}),e.jsx(nu,{value:"shops",className:"space-y-4 mt-4",children:(zn||c?.role==="purchase_team")&&e.jsxs(ks,{children:[e.jsx(ur,{children:e.jsx(hr,{children:"Add New Shop"})}),e.jsxs(Ws,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Shop Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($e,{value:ds.name,onChange:ie=>mn({...ds,name:ie.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Location ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($e,{value:ds.location,onChange:ie=>mn({...ds,location:ie.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["City ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($e,{value:ds.city,onChange:ie=>mn({...ds,city:ie.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Bn,{value:ds.phoneCountryCode||"+91",onValueChange:ie=>mn({...ds,phoneCountryCode:ie}),children:[e.jsx(wn,{className:"w-28",children:e.jsx(Cn,{placeholder:"+91"})}),e.jsx(Sn,{children:yz.map(ie=>e.jsx(dn,{value:ie.code,children:ie.code},ie.code))})]}),e.jsx($e,{value:ds.contactNumber||"",onChange:ie=>mn({...ds,contactNumber:ie.target.value}),placeholder:"Enter phone number",type:"tel"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["State ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($e,{value:ds.state,onChange:ie=>mn({...ds,state:ie.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Country ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($e,{value:ds.country,onChange:ie=>mn({...ds,country:ie.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Pincode / Zipcode ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($e,{value:ds.pincode,onChange:ie=>mn({...ds,pincode:ie.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"GST No (Optional)"}),e.jsx($e,{value:ds.gstNo,onChange:ie=>mn({...ds,gstNo:ie.target.value}),placeholder:"29ABCDE1234F1Z5"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Vendor Category (Optional)"}),e.jsxs(Bn,{value:ds.vendorCategory,onValueChange:ie=>mn({...ds,vendorCategory:ie}),children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select vendor category"})}),e.jsx(Sn,{className:"max-h-[200px] overflow-y-auto",children:Rt.length===0?e.jsx(dn,{value:"none",disabled:!0,children:"No categories available"}):Rt.map(ie=>e.jsx(dn,{value:ie.name,children:ie.name},ie.id))})]})]})]}),e.jsx(Be,{onClick:cr?rn:en,children:cr?"Save Changes":"Add Shop"})]})]})}),Jn&&e.jsx(nu,{value:"approvals",className:"space-y-4 mt-4",children:e.jsxs(ks,{children:[e.jsxs(ur,{children:[e.jsx(hr,{children:"Shop Approval Requests"}),e.jsx(na,{children:"Review and approve/reject new shop submissions"})]}),e.jsx(Ws,{className:"space-y-4",children:En.filter(ie=>ie.status==="pending").length===0?e.jsx("p",{className:"text-muted-foreground",children:"No pending approval requests"}):En.filter(ie=>ie.status==="pending").map(ie=>e.jsx(ks,{className:"border-border/50",children:e.jsxs(Ws,{className:"pt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:ie.shop.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted by: ",ie.submittedBy," at"," ",new Date(ie.submittedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Location"}),e.jsx("p",{children:ie.shop.location})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"City"}),e.jsx("p",{children:ie.shop.city})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"State"}),e.jsx("p",{children:ie.shop.state})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Country"}),e.jsx("p",{children:ie.shop.country})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Pincode"}),e.jsx("p",{children:ie.shop.pincode})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Phone"}),e.jsxs("p",{children:[ie.shop.phoneCountryCode,ie.shop.contactNumber]})]}),ie.shop.gstNo&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"GST No"}),e.jsx("p",{children:ie.shop.gstNo})]})]}),rr&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Be,{size:"sm",onClick:()=>Ps(ie),className:"gap-2",disabled:!ie?.shop?.id,children:[e.jsx(Wo,{className:"h-4 w-4"})," Approve"]}),z===ie.id?e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsx($e,{placeholder:"Reason...",value:Q,onChange:G=>k(G.target.value),className:"text-sm"}),e.jsx(Be,{size:"sm",onClick:()=>wr(ie.id),children:"Confirm"}),e.jsx(Be,{size:"sm",variant:"ghost",onClick:()=>J(null),children:"Cancel"})]}):e.jsxs(Be,{size:"sm",variant:"outline",onClick:()=>J(ie.id),className:"gap-2",children:[e.jsx(Uy,{className:"h-4 w-4"})," Reject"]})]})]})},ie.id))}),En.filter(ie=>ie.status!=="pending").length>0&&e.jsxs(ks,{children:[e.jsx(ur,{children:e.jsx(hr,{className:"text-base",children:"Processed Requests"})}),e.jsx(Ws,{className:"space-y-3",children:En.filter(ie=>ie.status!=="pending").map(ie=>e.jsxs("div",{className:"flex justify-between items-start p-3 bg-muted/50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:ie.shop.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ie.submittedBy})]}),e.jsx("div",{className:"text-right",children:e.jsx(Bl,{variant:ie.status==="approved"?"default":"destructive",children:ie.status==="approved"?"LA":ie.status.charAt(0).toUpperCase()+ie.status.slice(1)})})]},ie.id))})]})]})}),(zn||c?.role==="purchase_team")&&e.jsx(nu,{value:"material-approvals",className:"space-y-4 mt-4",children:e.jsxs(ks,{children:[e.jsxs(ur,{children:[e.jsx(hr,{children:"Material Approval Requests"}),e.jsx(na,{children:"Review and approve/reject new material submissions"})]}),e.jsx(Ws,{className:"space-y-4",children:Ln.filter(ie=>ie.status==="pending").length===0?e.jsx("p",{className:"text-muted-foreground",children:"No pending material approvals"}):Ln.filter(ie=>ie.status==="pending").map(ie=>e.jsx(ks,{className:"border-border/50",children:e.jsxs(Ws,{className:"pt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:ie.material.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted by: ",ie.submittedBy," at"," ",new Date(ie.submittedAt).toLocaleDateString()]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Code"}),e.jsx("p",{children:ie.material.code||ie.material.template_code||ie.material.templateCode||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Rate"}),e.jsxs("p",{children:["",ie.material.rate??ie.material.price??"-"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Unit"}),e.jsx("p",{children:ie.material.unit||ie.material.uom||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Category"}),e.jsx("p",{children:ie.material.category||ie.material.categoryName||ie.material.category_name||ie.material.vendorCategory||ie.material.vendor_category||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Sub Category"}),e.jsx("p",{children:ie.material.subCategory||ie.material.subcategory||ie.material.sub_category||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Brand"}),e.jsx("p",{children:ie.material.brandName||ie.material.brandname||ie.material.brand||ie.material.make||"-"})]})]})]}),rr&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Be,{size:"sm",onClick:()=>Ze(ie.id),className:"gap-2",disabled:!ie?.material?.id,children:[e.jsx(Wo,{className:"h-4 w-4"})," Approve"]}),z===ie.id?e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsx($e,{placeholder:"Reason...",value:Q,onChange:G=>k(G.target.value),className:"text-sm"}),e.jsx(Be,{size:"sm",onClick:()=>us(ie.id),children:"Confirm"}),e.jsx(Be,{size:"sm",variant:"ghost",onClick:()=>J(null),children:"Cancel"})]}):e.jsxs(Be,{size:"sm",variant:"outline",onClick:()=>J(ie.id),className:"gap-2",children:[e.jsx(Uy,{className:"h-4 w-4"})," Reject"]})]})]})},ie.id))}),Ln.filter(ie=>ie.status!=="pending").length>0&&e.jsxs(ks,{children:[e.jsx(ur,{children:e.jsx(hr,{className:"text-base",children:"Processed Requests"})}),e.jsx(Ws,{className:"space-y-3",children:Ln.filter(ie=>ie.status!=="pending").map(ie=>e.jsxs("div",{className:"flex justify-between items-start p-3 bg-muted/50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:ie.material.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ie.submittedBy})]}),e.jsx("div",{className:"text-right",children:e.jsx(Bl,{variant:ie.status==="approved"?"default":"destructive",children:ie.status==="approved"?"LA":ie.status.charAt(0).toUpperCase()+ie.status.slice(1)})})]},ie.id))})]})]})}),yn&&e.jsx(nu,{value:"messages",className:"space-y-4 mt-4",children:e.jsxs(ks,{children:[e.jsxs(ur,{children:[e.jsx(hr,{children:"Support Messages"}),e.jsx(na,{children:"Messages from suppliers and users sent to Admin & Software Team"})]}),e.jsx(Ws,{className:"space-y-4",children:(u||[]).length===0?e.jsx("p",{className:"text-muted-foreground",children:"No messages yet"}):(u||[]).map(ie=>e.jsx(ks,{className:"border-border/50",children:e.jsxs(Ws,{className:"pt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:ie.sender_name||ie.sentBy}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(ie.sent_at||ie.sentAt).toLocaleString()}),ie.info&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-semibold",children:"Info: "}),ie.info]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[!ie.is_read&&e.jsx(Bl,{variant:"default",children:"New"}),ya&&e.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>{(async()=>{try{await b?.(ie.id),t({title:"Success",description:"Message deleted"})}catch{t({title:"Error",description:"Failed to delete message",variant:"destructive"})}})()},children:e.jsx(qc,{className:"h-4 w-4 text-red-500"})})]})]}),e.jsx("p",{className:"text-sm leading-relaxed bg-muted/50 p-3 rounded",children:ie.message})]})},ie.id))})]})}),e.jsx(nu,{value:"support",className:"space-y-4 mt-4",children:e.jsxs(ks,{children:[e.jsxs(ur,{children:[e.jsx(hr,{children:"Technical Support"}),e.jsx(na,{children:"Request new categories or report issues to the software team."})]}),e.jsxs(Ws,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Your Name ",e.jsx($l,{})]}),e.jsx($e,{placeholder:"Enter your name...",value:Gr,onChange:ie=>ra(ie.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Additional Information (Optional)"}),e.jsx(Cl,{placeholder:"Any additional context or details...",className:"min-h-[80px]",value:gr,onChange:ie=>Ks(ie.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Message / Request ",e.jsx($l,{})]}),e.jsx(Cl,{placeholder:"I need a new category for 'Smart Home Devices'...",className:"min-h-[150px]",value:qn,onChange:ie=>Yr(ie.target.value),"data-testid":"textarea-support-message"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-3 rounded text-sm text-blue-700 dark:text-blue-300",children:" This message will be sent to Admin & Software Team"}),e.jsxs(Be,{onClick:is,"data-testid":"button-send-support",children:[e.jsx(gh,{className:"mr-2 h-4 w-4"})," Send Request"]}),Bs.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No messages yet"}):Bs.map(ie=>e.jsx(ks,{className:"border-border/50",children:e.jsxs(Ws,{className:"pt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold",children:["You (",Gr,")"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(ie.sent_at||ie.sentAt).toLocaleString()}),ie.info&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-semibold",children:"Info: "}),ie.info]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[!ie.is_read&&e.jsx(Bl,{variant:"default",children:"Unread"}),ya&&e.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>{(async()=>{try{await b?.(ie.id),t({title:"Success",description:"Message deleted"})}catch{t({title:"Error",description:"Failed to delete message",variant:"destructive"})}})()},children:e.jsx(qc,{className:"h-4 w-4 text-red-500"})})]})]}),e.jsx("p",{className:"text-sm leading-relaxed bg-muted/50 p-3 rounded",children:ie.message})]})},ie.id))]})]})})]})]})})}function Ej({children:t,shopName:s="Shop",shopLocation:n="",shopApproved:r=!1}){const[,i]=bo(),{logout:c}=rx(),[A,u]=S.useState(!1),d=()=>{c(),i("/")},h=[{label:"Dashboard",icon:a5,path:"/supplier/dashboard"},...r?[{label:"Manage Materials",icon:ol,path:"/supplier/materials"}]:[],{label:"Messages / Support",icon:gh,path:"/supplier/support"}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("nav",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>u(!A),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:A?e.jsx(cx,{size:24}):e.jsx(o5,{size:24})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s}),n&&e.jsx("p",{className:"text-sm text-gray-500",children:n})]})]}),e.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition",children:[e.jsx(i5,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})})}),e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:`
            fixed inset-y-16 left-0 w-64 bg-white border-r border-gray-200 
            transition-transform duration-300 ease-in-out
            lg:static lg:inset-auto lg:translate-x-0 lg:w-64
            ${A?"translate-x-0":"-translate-x-full"}
            z-30
          `,children:e.jsx("nav",{className:"space-y-1 p-4",children:h.map(o=>{const m=o.icon;return e.jsxs("button",{onClick:()=>{i(o.path),u(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition",children:[e.jsx(m,{size:20}),e.jsx("span",{className:"font-medium",children:o.label})]},o.path)})})}),e.jsx("main",{className:"flex-1 w-full",children:t})]})]})}const xz=["pcs","kg","meter","sqft","cum","litre","set","nos"],Gg=()=>e.jsx("span",{className:"text-red-500 ml-1",children:"*"});function yI(){const{toast:t}=ma(),{user:s,addSupportMessage:n,deleteMessage:r,supportMessages:i}=ei(),[c,A]=S.useState("templates"),[u,d]=S.useState(""),[h,o]=S.useState(""),[m,y]=S.useState(""),[p,j]=S.useState(""),[b,w]=S.useState(""),[B,L]=S.useState([]),[Q,k]=S.useState(!0),[z,J]=S.useState(""),[$,q]=S.useState(""),[X,fe]=S.useState([]),[ee,le]=S.useState([]),[ue,te]=S.useState([]),[re,ne]=S.useState(!1),[oe,se]=S.useState(null),[xe,Me]=S.useState([]),[me,Z]=S.useState(""),[ge,we]=S.useState(!1),[pe,be]=S.useState([]),[je,Ne]=S.useState({rate:"",unit:"",brandname:"",modelnumber:"",category:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""});S.useEffect(()=>{Qe(),pt(),Te(),_e(),Je()},[]);const Je=async()=>{try{const qe=localStorage.getItem("authToken"),Tt=await fetch("/api/supplier/my-shops",{headers:qe?{Authorization:`Bearer ${qe}`}:{}});if(!Tt.ok)return;const Ts=(await Tt.json()).shops||[],vs=Ts.find(Ns=>Ns.approved===!0)||Ts[0];vs&&(d(vs.name),o(vs.location||""),Z(vs.id))}catch(qe){console.error("Error loading supplier shops:",qe)}},Qe=async()=>{try{const qe=localStorage.getItem("authToken");console.log("[SupplierMaterials] loadMaterialTemplates token?",!!qe);const ns=await(await fetch("/api/material-templates",{headers:qe?{Authorization:`Bearer ${qe}`}:{}})).json();L(ns.templates||[])}catch(qe){console.error("Error loading templates:",qe),t({title:"Error",description:"Failed to load material templates",variant:"destructive"})}finally{k(!1)}},pt=async()=>{try{const Tt=await(await fetch("/api/shops")).json();Me(Tt.shops||[])}catch(qe){console.error("Error loading shops:",qe),t({title:"Error",description:"Failed to load shops",variant:"destructive"})}},Te=async()=>{try{ne(!0);const Tt=await(await fetch("/api/material-categories")).json();fe(Tt.categories||[])}catch(qe){console.error("Error loading categories:",qe)}finally{ne(!1)}},Ce=async qe=>{if(!qe){le([]);return}try{const ns=await(await fetch(`/api/material-subcategories/${encodeURIComponent(qe)}`)).json();le(ns.subcategories||[])}catch(Tt){console.error("Error loading subcategories:",Tt),le([])}},_e=async()=>{try{const Tt=await(await fetch("/api/products")).json();te(Tt.products||[])}catch(qe){console.error("Error loading products:",qe),te([])}},de=qe=>{se(qe),Ne({rate:"",unit:"",brandname:"",modelnumber:"",category:qe.category||"",subcategory:qe.subcategory||qe.sub_category||"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}),s?.role!=="supplier"&&Z(""),qe.category&&Ce(qe.category),setTimeout(()=>{const Tt=document.getElementById("material-form");Tt&&Tt.scrollIntoView({behavior:"smooth",block:"start"})},100)};S.useEffect(()=>{(async()=>{if(!(!oe||!me))try{const Tt=await fetch("/api/materials");let ns=null;if(Tt.ok&&(ns=((await Tt.json()).materials||[]).find(Ns=>String(Ns.template_id)===String(oe.id)&&String(Ns.shop_id)===String(me))),!ns){const Ts=await fetch("/api/my-material-submissions");Ts.ok&&(ns=((await Ts.json()).submissions||[]).find(et=>String(et.template_id)===String(oe.id)&&String(et.shop_id)===String(me)))}ns?(Ne(()=>({rate:ns.rate!=null?String(ns.rate):"",unit:ns.unit||"",brandname:ns.brandname||"",modelnumber:ns.modelnumber||"",category:ns.category||"",subcategory:ns.subcategory||"",product:ns.product||"",technicalspecification:ns.technicalspecification||"",dimensions:ns.dimensions||"",finishtype:ns.finishtype||"",metaltype:ns.metaltype||""})),ns.category&&await Ce(ns.category)):Ne(Ts=>({...Ts,rate:"",unit:"",brandname:"",modelnumber:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}))}catch(Tt){console.warn("prefill material failed",Tt)}})()},[me,oe]);const dt=async qe=>{if(qe.preventDefault(),!oe){t({title:"Error",description:"Please select a template",variant:"destructive"});return}if(!me){t({title:"Error",description:"No shop selected for submission",variant:"destructive"});return}if(!je.rate||!je.unit){t({title:"Error",description:"Rate and unit are required",variant:"destructive"});return}const Tt=pe.length>0?pe:[{template_id:oe.id,shop_id:me,...je}];we(!0);try{const ns=localStorage.getItem("authToken"),Ts={"Content-Type":"application/json"};ns&&(Ts.Authorization=`Bearer ${ns}`);for(const vs of Tt){const Ns={template_id:vs.template_id,shop_id:vs.shop_id,rate:vs.rate,unit:vs.unit,brandname:vs.brandname,modelnumber:vs.modelnumber,subcategory:vs.subcategory,category:vs.category,product:vs.product,technicalspecification:vs.technicalspecification,dimensions:vs.dimensions,finishtype:vs.finishtype,metaltype:vs.metaltype},et=await fetch("/api/material-submissions",{method:"POST",headers:Ts,body:JSON.stringify(Ns)});if(!et.ok){const De=await et.text();throw new Error(`Failed to submit material (${et.status}): ${De}`)}}t({title:"Success",description:"Material(s) submitted for approval"}),se(null),Ne({rate:"",unit:"",brandname:"",modelnumber:"",category:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}),s?.role!=="supplier"&&Z(""),be([])}catch(ns){console.error("Error submitting material:",ns),t({title:"Error",description:"Failed to submit material",variant:"destructive"})}finally{we(!1)}},st=()=>{if(!oe||!me){t({title:"Error",description:"Please select a template and shop",variant:"destructive"});return}if(!je.rate||!je.unit){t({title:"Error",description:"Rate and unit are required to add entry",variant:"destructive"});return}const qe={template_id:oe.id,shop_id:me,...je};be(Tt=>[...Tt,qe]),Ne(Tt=>({...Tt,rate:"",unit:"",brandname:"",modelnumber:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}))},nt=qe=>{be(Tt=>Tt.filter((ns,Ts)=>Ts!==qe))},at=s?.role==="supplier",yt=at?Ej:ka;return e.jsx(yt,{...at?{shopName:u,shopLocation:h,shopApproved:!0}:{},children:e.jsxs("div",{className:"p-6 lg:p-8 max-w-6xl mx-auto",children:[e.jsxs("div",{className:at?"mb-8 bg-gradient-to-r from-blue-500 via-blue-400 to-cyan-400 rounded-xl p-8 text-white shadow-lg":"mb-8",children:[e.jsx("h1",{className:at?"text-4xl font-bold mb-2":"text-3xl font-bold mb-2",children:" Manage Materials"}),e.jsx("p",{className:at?"text-blue-50":"text-gray-600",children:at?"Select from available material templates, fill in the essentials (rate, unit, brand), and submit for approval":"Select material templates, fill in all required details, select shop, and submit for approval"})]}),e.jsxs("div",{className:"grid gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(ol,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Available Templates"}),e.jsxs(Bl,{className:"bg-blue-100 text-blue-700",children:[B.length," Total"]})]}),e.jsx("div",{className:"space-y-3 mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(Ve,{className:"text-sm mb-2 block",children:"Search Templates"}),e.jsx($e,{value:z,onChange:qe=>J(qe.target.value),placeholder:"Search by name or code..."})]}),e.jsxs("div",{children:[e.jsx(Ve,{className:"text-sm mb-2 block",children:"Filter by Vendor Category"}),e.jsxs(Bn,{value:$,onValueChange:q,children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"All categories"})}),e.jsx(Sn,{children:Array.from(new Set(B.map(qe=>qe.vendor_category).filter(Boolean))).map(qe=>e.jsx(dn,{value:qe,children:qe},qe))})]})]})]})}),Q?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(Xl,{className:"w-8 h-8 animate-spin text-blue-500"})}):B.length===0?e.jsx(ks,{className:"border-dashed border-2 border-gray-300",children:e.jsxs(Ws,{className:"pt-8 pb-8 text-center",children:[e.jsx(ol,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("div",{className:"text-gray-500 font-medium",children:"No material templates available yet"})]})}):e.jsx("div",{className:"border rounded-md max-h-[400px] overflow-y-auto shadow-sm bg-white divide-y",children:e.jsx("div",{className:"",children:B.filter(qe=>(qe.name+" "+qe.code+" "+(qe.category||"")).toLowerCase().includes(z.toLowerCase())).filter(qe=>!$||qe.vendor_category===$).map(qe=>e.jsx("div",{className:"py-1 px-3 border-b last:border-0 hover:bg-blue-50 transition-all duration-200 cursor-pointer group flex items-center gap-4",children:e.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-3",children:[e.jsx("span",{className:"font-semibold text-gray-800 group-hover:text-blue-700 truncate",children:qe.name}),e.jsxs("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:["(",qe.code,")"]}),qe.category&&e.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 py-0.5 rounded text-gray-600 border border-gray-200 whitespace-nowrap",children:qe.category}),e.jsx(Be,{size:"sm",className:"h-7 px-3 text-xs bg-blue-600 hover:bg-blue-700 text-white ml-2 shrink-0",onClick:Tt=>{Tt.stopPropagation(),de(qe)},children:"Select"})]})},qe.id))})})]}),oe&&e.jsxs(ks,{id:"material-form",className:"bg-gradient-to-br from-white to-blue-50 border-blue-200 border-2 shadow-lg scroll-mt-20",children:[e.jsxs(ur,{className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-t-lg",children:[e.jsx(hr,{className:"text-2xl",children:" Submit Material Details"}),e.jsxs(na,{className:"text-blue-100",children:["Completing submission for: ",e.jsx("strong",{className:"text-white",children:oe.name})," (",oe.code,")"]})]}),e.jsx(Ws,{className:"pt-8",children:e.jsxs("form",{onSubmit:dt,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:" Your Shop"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsxs(Ve,{className:"font-semibold text-gray-700",children:["Shop ",e.jsx(Gg,{})]}),s?.role==="supplier"?e.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg border border-blue-200 font-medium text-gray-800",children:u}):e.jsxs(Bn,{value:me,onValueChange:Z,children:[e.jsx(wn,{className:"mt-2",children:e.jsx(Cn,{placeholder:"Select a shop"})}),e.jsx(Sn,{children:xe.map(qe=>e.jsx(dn,{value:qe.id,children:qe.name},qe.id))})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:" Essential Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(Ve,{className:"font-semibold text-gray-700",children:["Rate ",e.jsx(Gg,{})]}),e.jsx($e,{type:"number",step:"0.01",placeholder:"Enter rate",value:je.rate,onChange:qe=>Ne({...je,rate:qe.target.value}),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs(Ve,{className:"font-semibold text-gray-700",children:["Unit ",e.jsx(Gg,{})]}),e.jsxs(Bn,{value:je.unit,onValueChange:qe=>Ne({...je,unit:qe}),children:[e.jsx(wn,{className:"mt-2",children:e.jsx(Cn,{placeholder:"Select unit"})}),e.jsx(Sn,{children:xz.map(qe=>e.jsx(dn,{value:qe,children:qe},qe))})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(Ve,{className:"font-semibold text-gray-700",children:"Brand Name"}),e.jsx($e,{placeholder:"Enter brand name (optional)",value:je.brandname,onChange:qe=>Ne({...je,brandname:qe.target.value}),className:"mt-2"})]})]})]}),s?.role!=="supplier"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Model Number"}),e.jsx($e,{placeholder:"Enter model number",value:je.modelnumber,onChange:qe=>Ne({...je,modelnumber:qe.target.value})})]}),e.jsxs("div",{children:[e.jsxs(Ve,{children:["Category ",e.jsx(Gg,{})]}),e.jsxs(Bn,{value:je.category,onValueChange:qe=>{Ne({...je,category:qe,subcategory:""}),Ce(qe)},children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select category"})}),e.jsx(Sn,{children:X.map(qe=>e.jsx(dn,{value:qe,children:qe},qe))})]})]})]}),(s?.role!=="supplier"||je.category)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Subcategory"}),e.jsxs(Bn,{value:je.subcategory,onValueChange:qe=>Ne({...je,subcategory:qe,product:""}),disabled:!je.category||ee.length===0,children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:ee.length===0?"No subcategories available":"Select subcategory"})}),e.jsx(Sn,{children:ee.map(qe=>e.jsx(dn,{value:qe,children:qe},qe))})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Product"}),e.jsxs(Bn,{value:je.product,onValueChange:qe=>Ne({...je,product:qe}),disabled:!je.subcategory||ue.length===0,children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:ue.length===0?"No products available":"Select product"})}),e.jsx(Sn,{children:ue.filter(qe=>qe.subcategory===je.subcategory).map(qe=>e.jsxs(dn,{value:qe.name,children:[qe.name," ","(Subcategory: ",qe.subcategory_name,")"]},qe.id))})]})]})]}),(s?.role!=="supplier"||je.technicalspecification)&&e.jsxs("div",{children:[e.jsx(Ve,{children:"Technical Specification"}),e.jsx(Cl,{placeholder:"Enter technical specifications",value:je.technicalspecification,onChange:qe=>Ne({...je,technicalspecification:qe.target.value}),rows:4})]}),s?.role!=="supplier"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Dimensions"}),e.jsx($e,{placeholder:"Enter dimensions",value:je.dimensions,onChange:qe=>Ne({...je,dimensions:qe.target.value})})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Finish Type"}),e.jsx($e,{placeholder:"e.g., matte, glossy, satin",value:je.finishtype,onChange:qe=>Ne({...je,finishtype:qe.target.value})})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Metal Type"}),e.jsx($e,{placeholder:"e.g., steel, copper, aluminum",value:je.metaltype,onChange:qe=>Ne({...je,metaltype:qe.target.value})})]})]}),pe.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200 bg-green-50",children:[e.jsxs("div",{className:"font-semibold text-green-800 mb-4 flex items-center gap-2",children:[" Entries to submit (",pe.length,")"]}),e.jsx("div",{className:"space-y-2",children:pe.map((qe,Tt)=>e.jsxs("div",{className:"flex items-center justify-between border rounded-lg px-4 py-3 bg-white border-green-300 hover:bg-green-50 transition",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-semibold text-gray-800",children:[" Rate: ",qe.rate,"   Unit: ",qe.unit]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:qe.brandname?` ${qe.brandname}`:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:"sm",variant:"outline",onClick:()=>{Ne({rate:qe.rate,unit:qe.unit,brandname:qe.brandname||"",modelnumber:qe.modelnumber||"",category:qe.category||"",subcategory:qe.subcategory||"",product:qe.product||"",technicalspecification:qe.technicalspecification||"",dimensions:qe.dimensions||"",finishtype:qe.finishtype||"",metaltype:qe.metaltype||""})},children:"Edit"}),e.jsx(Be,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>nt(Tt),children:"Remove"})]})]},Tt))})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(Be,{type:"button",onClick:st,variant:"outline",className:"gap-2 border-blue-300 hover:bg-blue-50 text-blue-700",children:[e.jsx(wc,{className:"w-4 h-4"})," Add Another Entry"]}),e.jsxs(Be,{type:"submit",disabled:ge,className:"gap-2 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-semibold",children:[ge?e.jsx(Xl,{className:"w-4 h-4 animate-spin"}):"",ge?"Submitting...":"Submit for Approval"]}),e.jsx(Be,{type:"button",variant:"outline",onClick:()=>se(null),className:"gap-2 text-gray-700 hover:bg-gray-100",children:"Cancel"})]})]})})]})]})]})})}function vz(){const{toast:t}=ma(),{addSupportMessage:s,deleteMessage:n,supportMessages:r,user:i}=ei(),[c,A]=S.useState(!1),[u,d]=S.useState(""),[h,o]=S.useState(""),[m,y]=S.useState(""),p=()=>{if(!m||!u){t({title:"Error",description:"Name and message are required",variant:"destructive"});return}(async()=>{try{await s?.(u,m,h),t({title:"Request Sent",description:"Message sent to Admin & Software Team."}),y(""),d(""),o(""),A(!1)}catch{t({title:"Error",description:"Failed to send message",variant:"destructive"})}})()},j=[{title:"Civil Wall",desc:"Brick walls & partitions",href:"/estimators/civil-wall",icon:Sl},{title:"Doors",desc:"Door frames & shutters",href:"/estimators/doors",icon:Sl},{title:"Flooring",desc:"Tiles & wooden floors",href:"/estimators/flooring",icon:Sl},{title:"Electrical",desc:"Wiring & lighting",href:"/estimators/electrical",icon:Qy},{title:"Plumbing",desc:"Pipes & fixtures",href:"/estimators/plumbing",icon:Sl},{title:"Fire-Fighting",desc:"Safety systems",href:"/estimators/fire-fighting",icon:Qy}];return e.jsx(ka,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold font-heading",children:"Estimator Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Select an estimator to calculate material requirements"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(b=>e.jsx(pa,{href:b.href,children:e.jsxs(ks,{className:"group cursor-pointer hover:border-primary hover:shadow-lg transition-all",children:[e.jsxs(ur,{children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center mb-2 group-hover:scale-110 transition-transform",children:e.jsx(b.icon,{className:"h-5 w-5 text-primary"})}),e.jsx(hr,{children:b.title}),e.jsx(na,{children:b.desc})]}),e.jsx(Ws,{children:e.jsxs(Be,{variant:"ghost",className:"w-full justify-between group-hover:translate-x-1 transition-transform",children:["Get Started ",e.jsx(dy,{className:"h-4 w-4"})]})})]})},b.href))}),e.jsxs(ks,{className:"mt-8",children:[e.jsx(ur,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gh,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx(hr,{children:"Technical Support"}),e.jsx(na,{children:"Send a message to the admin team"})]})]}),e.jsx(Be,{variant:"outline",onClick:()=>A(!c),children:c?"Cancel":"Send Message"})]})}),c&&e.jsxs(Ws,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Your Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($e,{placeholder:"Enter your name...",value:u,onChange:b=>d(b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Additional Information (Optional)"}),e.jsx(Cl,{placeholder:"Any additional context...",className:"min-h-[80px]",value:h,onChange:b=>o(b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Cl,{placeholder:"Describe your issue or request...",className:"min-h-[150px]",value:m,onChange:b=>y(b.target.value)})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-3 rounded text-sm text-blue-700 dark:text-blue-300",children:" This message will be sent to Admin & Software Team"}),e.jsxs(Be,{onClick:p,children:[e.jsx(gh,{className:"mr-2 h-4 w-4"})," Send Request"]})]}),(r||[]).filter(b=>b.sender_name===u&&b.sender_name).length>0&&e.jsxs(Ws,{className:"space-y-3 border-t pt-4",children:[e.jsx("p",{className:"font-semibold text-sm",children:"Your Messages:"}),(r||[]).filter(b=>b.sender_name===u&&b.sender_name).map(b=>e.jsx(ks,{className:"border-border/50",children:e.jsxs(Ws,{className:"pt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sent: ",new Date(b.sent_at||b.sentAt).toLocaleString()]}),b.info&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-semibold",children:"Info: "}),b.info]})]}),e.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>{(async()=>{try{await n?.(b.id),t({title:"Success",description:"Message deleted"})}catch{t({title:"Error",description:"Failed to delete message",variant:"destructive"})}})()},children:e.jsx(qc,{className:"h-4 w-4 text-red-500"})})]}),e.jsx("p",{className:"text-sm leading-relaxed bg-muted/50 p-3 rounded",children:b.message})]})},b.id))]})]})]})})}function bz(){const{user:t}=ei(),[,s]=bo();return S.useEffect(()=>{if(!t){s("/");return}switch(t.role){case"admin":s("/admin/dashboard");break;case"software_team":s("/software/dashboard");break;case"purchase_team":s("/purchase/dashboard");break;case"supplier":s("/supplier/dashboard");break}},[t,s]),t?t.role==="admin"||t.role==="software_team"?e.jsx($b,{}):t.role==="supplier"?e.jsx(yI,{}):t.role==="purchase_team"?e.jsx($b,{}):e.jsx(vz,{}):null}function jz(){const[,t]=bo(),{user:s}=ei();return S.useEffect(()=>{if(!s||s.role!=="software_team"){t("/");return}t("/admin/dashboard")},[s,t]),null}function wz(){const[,t]=bo(),{user:s}=ei();return S.useEffect(()=>{if(!s||s.role!=="purchase_team"){t("/");return}t("/admin/dashboard")},[s,t]),null}const Sz=[{code:"+91",country:"India"},{code:"+1",country:"USA"},{code:"+44",country:"UK"},{code:"+61",country:"Australia"},{code:"+971",country:"UAE"},{code:"+81",country:"Japan"},{code:"+49",country:"Germany"}],qg=()=>e.jsx("span",{className:"text-red-500 ml-1",children:"*"});function Nz({onShopAdded:t}){const{toast:s}=ma(),[n,r]=S.useState(!1),[i,c]=S.useState({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:""}),A=(d,h)=>{c(o=>({...o,[d]:h}))},u=async d=>{if(d.preventDefault(),!i.name.trim()){s({title:"Error",description:"Shop name is required",variant:"destructive"});return}if(!i.location.trim()||!i.city.trim()){s({title:"Error",description:"Location and city are required",variant:"destructive"});return}if(!i.contactNumber.trim()){s({title:"Error",description:"Contact number is required",variant:"destructive"});return}r(!0);try{const h=localStorage.getItem("authToken"),o=await fetch("/api/shops",{method:"POST",headers:{"Content-Type":"application/json",...h&&{Authorization:`Bearer ${h}`}},body:JSON.stringify(i)});if(!o.ok){const y=await o.json();throw new Error(y.message||"Failed to create shop")}const m=await o.json();s({title:"Success",description:"Shop submitted for approval! You will be notified once it's approved."}),c({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:""}),t&&t(m.shop)}catch(h){s({title:"Error",description:h instanceof Error?h.message:"Failed to create shop",variant:"destructive"})}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-50 p-4",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-blue-100 rounded-full",children:e.jsx(Sl,{size:32,className:"text-blue-600"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Add Your Shop"}),e.jsx("p",{className:"text-gray-600",children:"Complete your supplier profile by adding your shop details"})]}),e.jsx(ks,{className:"mb-6 border-blue-200 bg-blue-50",children:e.jsx(Ws,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(mh,{className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:"Shop Approval Required"}),e.jsx("p",{className:"text-sm text-gray-700",children:"After you submit your shop details, our team will review them. You'll be notified once your shop is approved and you can start managing materials."})]})]})})}),e.jsxs(ks,{children:[e.jsxs(ur,{children:[e.jsx(hr,{children:"Shop Information"}),e.jsx(na,{children:"Provide accurate details about your shop"})]}),e.jsxs(Ws,{children:[e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(Ve,{htmlFor:"name",children:["Shop Name",e.jsx(qg,{})]}),e.jsx($e,{id:"name",type:"text",placeholder:"Enter your shop name",value:i.name,onChange:d=>A("name",d.target.value),required:!0,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(Ve,{htmlFor:"location",children:["Address/Location",e.jsx(qg,{})]}),e.jsx($e,{id:"location",type:"text",placeholder:"Enter shop address",value:i.location,onChange:d=>A("location",d.target.value),required:!0,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs(Ve,{htmlFor:"city",children:["City",e.jsx(qg,{})]}),e.jsx($e,{id:"city",type:"text",placeholder:"Enter city",value:i.city,onChange:d=>A("city",d.target.value),required:!0,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{htmlFor:"state",children:"State"}),e.jsx($e,{id:"state",type:"text",placeholder:"Enter state",value:i.state,onChange:d=>A("state",d.target.value),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(Ve,{htmlFor:"country",children:"Country"}),e.jsx($e,{id:"country",type:"text",placeholder:"Enter country",value:i.country,onChange:d=>A("country",d.target.value),className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{htmlFor:"pincode",children:"Pin Code"}),e.jsx($e,{id:"pincode",type:"text",placeholder:"Enter pin code",value:i.pincode,onChange:d=>A("pincode",d.target.value),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs(Ve,{children:["Contact Number",e.jsx(qg,{})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(Bn,{value:i.phoneCountryCode,onValueChange:d=>A("phoneCountryCode",d),children:[e.jsx(wn,{className:"w-32",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:Sz.map(d=>e.jsxs(dn,{value:d.code,children:[d.code," ",d.country]},d.code))})]}),e.jsx($e,{type:"tel",placeholder:"Phone number",value:i.contactNumber,onChange:d=>A("contactNumber",d.target.value),required:!0,className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{htmlFor:"gstNo",children:"GST Number"}),e.jsx($e,{id:"gstNo",type:"text",placeholder:"Enter GST number (optional)",value:i.gstNo,onChange:d=>A("gstNo",d.target.value),className:"mt-2"})]}),e.jsx(Be,{type:"submit",disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700",children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2",children:""}),"Submitting..."]}):"Submit for Approval"})]}),e.jsx("div",{className:"mt-6 p-4 bg-white rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Wo,{className:"text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"What happens next?"})," After submitting your shop details, our approval team will review them within 24-48 hours."]})]})})]})]})]})})}function Bz({shopName:t="Shop",shopLocation:s=""}){const[n,r]=S.useState({submitted:0,approved:0,rejected:0,pending:0}),[i,c]=S.useState(!0);S.useEffect(()=>{A()},[]);const A=async()=>{try{const d=localStorage.getItem("authToken"),h=await fetch("/api/supplier/my-submissions",{headers:d?{Authorization:`Bearer ${d}`}:{}});if(!h.ok){console.error("Failed to load stats"),c(!1);return}const m=(await h.json()).submissions||[],y=m.length,p=m.filter(w=>w.status==="approved").length,j=m.filter(w=>w.status==="rejected").length,b=m.filter(w=>w.status==="pending").length;r({submitted:y,approved:p,rejected:j,pending:b})}catch(d){console.error("Error loading stats:",d)}finally{c(!1)}},u=({title:d,value:h,icon:o,color:m})=>e.jsx(ks,{children:e.jsx(Ws,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:d}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:h})]}),e.jsx("div",{className:`p-3 rounded-full ${m}`,children:e.jsx(o,{size:24,className:"text-white"})})]})})});return e.jsx(Ej,{shopName:t,shopLocation:s,shopApproved:!0,children:e.jsxs("div",{className:"p-6 lg:p-8 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Welcome back! Here's your supplier activity overview."})]}),i?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(d=>e.jsx(ks,{children:e.jsx(Ws,{className:"pt-6",children:e.jsx("div",{className:"h-20 bg-gray-200 rounded animate-pulse"})})},d))}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(u,{title:"Total Submitted",value:n.submitted,icon:ol,color:"bg-blue-500"}),e.jsx(u,{title:"Approved Materials",value:n.approved,icon:Wo,color:"bg-green-500"}),e.jsx(u,{title:"Pending Review",value:n.pending,icon:mh,color:"bg-yellow-500"}),e.jsx(u,{title:"Rejected",value:n.rejected,icon:mh,color:"bg-red-500"})]}),e.jsxs(ks,{children:[e.jsxs(ur,{children:[e.jsxs(hr,{className:"flex items-center gap-2",children:[e.jsx(ML,{size:20}),"Quick Summary"]}),e.jsx(na,{children:"Overview of your materials and approvals"})]}),e.jsx(Ws,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Success Rate"}),e.jsx("p",{className:"text-sm text-gray-600",children:n.submitted>0?`${Math.round(n.approved/n.submitted*100)}% approved`:"No submissions yet"})]}),e.jsxs(Bl,{className:"bg-blue-600",children:[n.approved,"/",n.submitted]})]}),n.pending>0&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Pending Review"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.pending," material(s) awaiting approval"]})]}),e.jsx(Bl,{className:"bg-yellow-600",children:n.pending})]}),n.rejected>0&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Rejected Materials"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.rejected," material(s) need revision"]})]}),e.jsx(Bl,{className:"bg-red-600",children:n.rejected})]})]})})]}),e.jsxs(ks,{className:"mt-6",children:[e.jsx(ur,{children:e.jsx(hr,{children:"Need Help?"})}),e.jsxs(Ws,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Have questions about your submissions or need technical support? Visit the Messages/Support section or contact our team."}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.jsx("p",{children:' Submit materials using the "Manage Materials" section'}),e.jsx("p",{children:" Review approval status for each submission"}),e.jsx("p",{children:" Contact support for urgent issues"})]})]})]})]})})}function TN(){const[,t]=bo(),{user:s}=ei(),[n,r]=S.useState("loading"),[i,c]=S.useState([]),[A,u]=S.useState(!0);S.useEffect(()=>{if(!s||s.role!=="supplier"){t("/");return}d()},[s,t]);const d=async()=>{try{if(u(!0),s?.approved!=="approved"){r("not-approved"),u(!1);return}const o=localStorage.getItem("authToken"),m=await fetch("/api/supplier/my-shops",{headers:o?{Authorization:`Bearer ${o}`}:{}});if(!m.ok){console.error("Failed to load shops"),r("no-shop"),u(!1);return}const p=(await m.json()).shops||[];if(c(p),p.length===0)r("no-shop");else{const j=p.find(b=>b.approved===!0);r(j?"shop-approved":"shop-pending")}}catch(o){console.error("Error checking supplier status:",o),r("no-shop")}finally{u(!1)}},h=()=>{r("shop-pending"),d()};if(A)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xl,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your dashboard..."})]})});if(n==="not-approved")return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-50 p-4",children:e.jsxs(ks,{className:"w-full max-w-md border-red-200 bg-white",children:[e.jsxs(ur,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(mh,{className:"w-8 h-8 text-red-600"})})}),e.jsx(hr,{className:"text-red-600",children:"Account Pending Review"}),e.jsx(na,{children:"Your supplier account is awaiting approval"})]}),e.jsxs(Ws,{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:e.jsx("p",{className:"text-sm text-gray-700",children:"Thank you for registering as a supplier! Your account is currently under review by our admin team. You'll receive an email notification once your account is approved."})}),s?.approvalReason&&e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("p",{className:"text-xs font-semibold text-yellow-800 mb-1",children:"Reason for Rejection"}),e.jsx("p",{className:"text-sm text-yellow-700",children:s.approvalReason})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"What we're checking:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"Business credentials and validity"}),e.jsx("li",{children:"GST registration details"}),e.jsx("li",{children:"Business address verification"}),e.jsx("li",{children:"Contact information"})]})]}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 text-sm",children:e.jsxs("p",{className:"text-blue-900",children:[e.jsx("strong",{children:"Typical approval time:"})," 24-48 hours"]})}),e.jsx(Be,{onClick:()=>t("/"),className:"w-full bg-blue-600 hover:bg-blue-700",children:"Go to Home"})]})]})});if(n==="no-shop")return e.jsx(Nz,{onShopAdded:h});if(n==="shop-pending"){const o=i.find(m=>!m.approved);return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-yellow-50 to-orange-50 p-4",children:e.jsxs(ks,{className:"w-full max-w-md border-yellow-200 bg-white",children:[e.jsxs(ur,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:e.jsx(rb,{className:"w-8 h-8 text-yellow-600"})})}),e.jsx(hr,{className:"text-yellow-600",children:"Shop Under Review"}),e.jsx(na,{children:"Your shop is awaiting approval"})]}),e.jsxs(Ws,{className:"space-y-4",children:[o&&e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx(Sl,{className:"w-5 h-5 text-gray-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:o.name}),o.city&&e.jsxs("p",{className:"text-xs text-gray-600",children:[o.city,o.location&&`  ${o.location}`]})]})]})}),e.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsx("p",{className:"text-sm text-gray-700",children:"We're reviewing your shop details. Our team typically completes this within 24-48 hours. You'll get an email notification once your shop is approved."})}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"We're verifying:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"Shop name and location"}),e.jsx("li",{children:"Contact information"}),e.jsx("li",{children:"GST details"}),e.jsx("li",{children:"Business legitimacy"})]})]}),e.jsx(Be,{onClick:()=>t("/"),className:"w-full bg-blue-600 hover:bg-blue-700",children:"Go to Home"})]})]})})}if(n==="shop-approved"){const o=i.find(m=>m.approved===!0);return e.jsx(Bz,{shopName:o?.name||"Shop",shopLocation:o?.location||""})}return null}const Cz=["pcs","kg","meter","sqft","cum","litre","set","nos","Meters","Square feet","Numbers","Square Meter","Bags","Running feet","Running meter","LS","BOX","LTR","CQM","cft","ml","DOZ","PKT","Man labour","Points","Roll","Days","Inches","Hours","Percentage","Length","Panel","Drum","Ft","1 Pkt","Job","Units"],Wg=()=>e.jsx("span",{className:"text-red-500 ml-1",children:"*"});function Ez(){const{toast:t}=ma(),{user:s}=ei(),[n,r]=S.useState([]),[i,c]=S.useState(!0),[A,u]=S.useState(""),[d,h]=S.useState("all-categories"),[o,m]=S.useState([]),[y,p]=S.useState([]),[j,b]=S.useState([]),[w,B]=S.useState([]),[L,Q]=S.useState(null),[k,z]=S.useState([]),[J,$]=S.useState(""),[q,X]=S.useState(!1),[fe,ee]=S.useState([]),[le,ue]=S.useState({type:"none",text:""}),[te,re]=S.useState(!1),[ne,oe]=S.useState(null),[se,xe]=S.useState({rate:"",unit:"",brandname:"",modelnumber:"",category:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""});S.useEffect(()=>{Me(),me(),Z(),we()},[]),S.useEffect(()=>{n.length>0&&pe()},[n]);const Me=async()=>{try{const Ce=localStorage.getItem("authToken"),de=await(await fetch("/api/material-templates",{headers:Ce?{Authorization:`Bearer ${Ce}`}:{}})).json();r(de.templates||[])}catch(Ce){console.error("Error loading templates:",Ce),t({title:"Error",description:"Failed to load material templates",variant:"destructive"})}finally{c(!1)}},me=async()=>{try{const _e=await(await fetch("/api/shops")).json();z(_e.shops||[])}catch(Ce){console.error("Error loading shops:",Ce)}},Z=async()=>{try{const _e=await(await fetch("/api/material-categories")).json();p(_e.categories||[])}catch(Ce){console.error("Error loading categories:",Ce)}},ge=async Ce=>{if(!Ce){b([]);return}try{const de=await(await fetch(`/api/material-subcategories/${encodeURIComponent(Ce)}`)).json();b(de.subcategories||[])}catch(_e){console.error("Error loading subcategories:",_e),b([])}},we=async()=>{try{const _e=await(await fetch("/api/products")).json();B(_e.products||[])}catch(Ce){console.error("Error loading products:",Ce),B([])}},pe=async()=>{try{const Ce=Array.from(new Set(n.map(_e=>_e.vendor_category).filter(Boolean)));m(Ce)}catch(Ce){console.error("Error loading vendor categories:",Ce),m([])}},be=Ce=>{Q(Ce),xe({rate:"",unit:"",brandname:"",modelnumber:"",category:Ce.category||"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}),Ce.category&&ge(Ce.category),setTimeout(()=>{const _e=document.getElementById("material-form");_e&&_e.scrollIntoView({behavior:"smooth",block:"start"})},100)};S.useEffect(()=>{(async()=>{if(!L||!J){ue({type:"none",text:""});return}re(!0);try{const _e=await fetch(`/api/material-rate?template_id=${encodeURIComponent(L.id)}&shop_id=${encodeURIComponent(J)}`);if(!_e.ok){console.warn("[ManageMaterials] Failed to fetch material rate"),ue({type:"none",text:""}),re(!1);return}const de=await _e.json();console.log("[ManageMaterials] Rate fetch result:",de),de.found&&de.material?(xe(dt=>({...dt,rate:de.material.rate!=null?String(de.material.rate):"",unit:de.material.unit||dt.unit||"",brandname:de.material.brandname||"",modelnumber:de.material.modelnumber||"",category:de.material.category||dt.category||"",subcategory:de.material.subcategory||"",product:de.material.product||"",technicalspecification:de.material.technicalspecification||"",dimensions:de.material.dimensions||"",finishtype:de.material.finishtype||"",metaltype:de.material.metaltype||""})),de.material.category&&await ge(de.material.category),ue({type:"success",text:` Existing Rate Loaded (${de.source==="approved"?"Approved":"Pending"})`})):(xe(dt=>({...dt,rate:"",unit:"",brandname:"",modelnumber:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""})),ue({type:"info",text:"No rate found for this shop - enter a new rate"}))}catch(_e){console.warn("[ManageMaterials] Rate fetch error:",_e),ue({type:"none",text:""})}finally{re(!1)}})()},[J,L]);const je=async Ce=>{if(Ce.preventDefault(),!L||!J){t({title:"Error",description:"Please select a template and shop",variant:"destructive"});return}let _e=[];if(fe.length>0){if(!window.confirm(`Are you sure you want to submit ${fe.length} items for approval?`))return;_e=fe}else{if(!se.rate||!se.unit||!se.category){t({title:"Error",description:"Rate, unit, and category are required",variant:"destructive"});return}_e=[{template_id:L.id,shop_id:J,...se}]}X(!0);try{const de=localStorage.getItem("authToken"),dt={"Content-Type":"application/json"};de&&(dt.Authorization=`Bearer ${de}`);for(const st of _e)if(!(await fetch("/api/material-submissions",{method:"POST",headers:dt,body:JSON.stringify(st)})).ok)throw new Error("Failed to submit material");t({title:"Success",description:`${_e.length} material(s) submitted for approval`}),Q(null),ee([]),xe({rate:"",unit:"",brandname:"",modelnumber:"",category:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""})}catch{t({title:"Error",description:"Failed to submit material",variant:"destructive"})}finally{X(!1)}},Ne=()=>{if(!L||!J){t({title:"Error",description:"Please select a template and shop",variant:"destructive"});return}if(!se.rate||!se.unit||!se.category){t({title:"Error",description:"Rate, unit, and category are required",variant:"destructive"});return}const Ce={template_id:L.id,shop_id:J,...se};ee(_e=>[..._e,Ce]),xe(_e=>({..._e,rate:"",unit:"",brandname:"",modelnumber:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""})),t({title:"Entry Added",description:"Item added to the submission list."})},Je=Ce=>{ee(_e=>_e.filter((de,dt)=>dt!==Ce))},Qe=Ce=>{const _e=fe[Ce];oe(Ce),$(_e.shop_id||""),xe({rate:_e.rate||"",unit:_e.unit||"",brandname:_e.brandname||"",modelnumber:_e.modelnumber||"",category:_e.category||"",subcategory:_e.subcategory||"",product:_e.product||"",technicalspecification:_e.technicalspecification||"",dimensions:_e.dimensions||"",finishtype:_e.finishtype||"",metaltype:_e.metaltype||""}),_e.category&&ge(_e.category),setTimeout(()=>{const de=document.getElementById("material-form");de&&de.scrollIntoView({behavior:"smooth",block:"start"})},100)},pt=()=>{if(ne===null)return;if(!se.rate||!se.unit||!se.category){t({title:"Error",description:"Rate, unit, and category are required",variant:"destructive"});return}const Ce={template_id:L?.id||fe[ne].template_id,shop_id:J||fe[ne].shop_id,...se};ee(_e=>_e.map((de,dt)=>dt===ne?Ce:de)),xe({rate:"",unit:"",brandname:"",modelnumber:"",category:L?.category||"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}),oe(null),t({title:"Entry Updated",description:"Item updated in the submission list."})},Te=()=>{oe(null),$(""),xe({rate:"",unit:"",brandname:"",modelnumber:"",category:L?.category||"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""})};return e.jsx(ka,{children:e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Material Management"}),e.jsx("p",{className:"text-gray-600",children:"Select from available material templates and add your details"})]}),e.jsxs("div",{className:"grid gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ol,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Available Material Templates"})]}),e.jsx("div",{className:"space-y-3 mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(Ve,{className:"text-sm mb-2 block",children:"Search Templates"}),e.jsx($e,{value:A,onChange:Ce=>u(Ce.target.value),placeholder:"Search by name or code..."})]}),e.jsxs("div",{children:[e.jsx(Ve,{className:"text-sm mb-2 block",children:"Filter by Vendor Category"}),e.jsxs(Bn,{value:d,onValueChange:h,children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"All categories"})}),e.jsxs(Sn,{className:"max-h-72 overflow-y-auto",children:[e.jsx(dn,{value:"all-categories",children:"All Categories"}),o.map(Ce=>e.jsx(dn,{value:Ce,children:Ce},Ce))]})]})]})]})}),i?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Xl,{className:"w-6 h-6 animate-spin"})}):e.jsx("div",{className:"space-y-2",children:n.filter(Ce=>{const de=(Ce.name+" "+Ce.code+" "+(Ce.category||"")).toLowerCase().includes(A.toLowerCase()),dt=Ce.vendor_category||"";return de&&(d==="all-categories"?!0:dt===d)}).slice(0,12).map(Ce=>e.jsxs("div",{className:"p-2 border-b bg-white hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"flex-1 flex items-center gap-3",children:e.jsx("div",{className:"font-medium text-sm",children:Ce.name})}),e.jsx(Be,{size:"sm",variant:"outline",onClick:()=>be(Ce),children:"Select"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[Ce.code," ",Ce.category&&e.jsxs("span",{className:"ml-2",children:[" ",Ce.category]})]})]},Ce.id))})]}),L&&e.jsxs(ks,{id:"material-form",className:"scroll-mt-20 border-blue-200 shadow-sm",children:[e.jsxs(ur,{className:"py-3 bg-blue-50/50",children:[e.jsx(hr,{className:"text-base",children:ne!==null?"Edit Material Details":"Submit Material Details"}),e.jsx(na,{className:"text-xs mt-1",children:ne!==null?`Editing item ${ne+1} from submission queue`:`Editing: ${L.name} (${L.code})`})]}),e.jsx(Ws,{className:"pt-6",children:e.jsxs("form",{onSubmit:je,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(Ve,{children:["Shop ",e.jsx(Wg,{})]}),e.jsxs(Bn,{value:J,onValueChange:$,children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select a shop"})}),e.jsx(Sn,{className:"max-h-72 overflow-y-auto",children:k.map(Ce=>e.jsx(dn,{value:Ce.id,children:Ce.name},Ce.id))})]})]}),e.jsxs("div",{children:[e.jsxs(Ve,{children:["Rate ",e.jsx(Wg,{})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx($e,{type:"number",step:"0.01",placeholder:"0.00",value:se.rate,onChange:Ce=>xe({...se,rate:Ce.target.value}),disabled:te}),te&&e.jsx(Xl,{className:"w-4 h-4 animate-spin text-muted-foreground"})]}),le.type==="success"&&e.jsx("p",{className:"text-sm text-green-600 mt-1 font-medium",children:le.text}),le.type==="info"&&e.jsx("p",{className:"text-sm text-amber-600 mt-1",children:le.text})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(Ve,{children:["Unit ",e.jsx(Wg,{})]}),e.jsxs(Bn,{value:se.unit,onValueChange:Ce=>xe({...se,unit:Ce}),children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select unit"})}),e.jsx(Sn,{className:"max-h-72 overflow-y-auto",children:Cz.map(Ce=>e.jsx(dn,{value:Ce,children:Ce},Ce))})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Brand Name"}),e.jsx($e,{placeholder:"Enter brand",value:se.brandname,onChange:Ce=>xe({...se,brandname:Ce.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Model Number"}),e.jsx($e,{placeholder:"Enter model",value:se.modelnumber,onChange:Ce=>xe({...se,modelnumber:Ce.target.value})})]}),e.jsxs("div",{children:[e.jsxs(Ve,{children:["Category ",e.jsx(Wg,{})]}),e.jsxs(Bn,{value:se.category,onValueChange:Ce=>{xe({...se,category:Ce,subcategory:""}),ge(Ce)},children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select category"})}),e.jsx(Sn,{children:y.map(Ce=>e.jsx(dn,{value:Ce,children:Ce},Ce))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Subcategory"}),e.jsxs(Bn,{value:se.subcategory,onValueChange:Ce=>xe({...se,subcategory:Ce,product:""}),disabled:!se.category||j.length===0,children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:j.length===0?"No subcategories":"Select subcategory"})}),e.jsx(Sn,{children:j.map(Ce=>e.jsx(dn,{value:Ce,children:Ce},Ce))})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Product"}),e.jsxs(Bn,{value:se.product,onValueChange:Ce=>xe({...se,product:Ce}),disabled:!se.subcategory||w.length===0,children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:w.length===0?"No products":"Select product"})}),e.jsx(Sn,{children:w.filter(Ce=>Ce.subcategory===se.subcategory).map(Ce=>e.jsx(dn,{value:Ce.name,children:Ce.name},Ce.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Technical Specification"}),e.jsx(Cl,{placeholder:"Material technical details...",value:se.technicalspecification,onChange:Ce=>xe({...se,technicalspecification:Ce.target.value}),rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Dimensions"}),e.jsx($e,{placeholder:"L x W x H",value:se.dimensions,onChange:Ce=>xe({...se,dimensions:Ce.target.value})})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Finish"}),e.jsx($e,{placeholder:"Matte/Glossy",value:se.finishtype,onChange:Ce=>xe({...se,finishtype:Ce.target.value})})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Metal"}),e.jsx($e,{placeholder:"Steel/Iron",value:se.metaltype,onChange:Ce=>xe({...se,metaltype:Ce.target.value})})]})]}),fe.length>0&&e.jsxs("div",{className:"mt-6 border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 text-sm font-semibold flex justify-between items-center",children:[e.jsxs("span",{children:["Items in Submission Queue (",fe.length,")"]}),e.jsx(kL,{className:"w-4 h-4 text-amber-600"})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto divide-y",children:fe.map((Ce,_e)=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white",children:[e.jsxs("div",{className:"text-xs flex-1",children:[e.jsxs("div",{className:"font-bold text-slate-700",children:["Rate: ",Ce.rate," / ",Ce.unit]}),e.jsxs("div",{className:"text-slate-500",children:[Ce.brandname||"No Brand","  ",Ce.category,Ce.subcategory&&`  ${Ce.subcategory}`,Ce.product&&`  ${Ce.product}`]}),Ce.technicalspecification&&e.jsx("div",{className:"text-slate-400 mt-1 truncate max-w-xs",children:Ce.technicalspecification})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{type:"button",size:"sm",variant:"outline",className:"h-8 text-blue-600 hover:bg-blue-50",onClick:()=>Qe(_e),disabled:ne!==null,children:"Edit"}),e.jsx(Be,{type:"button",size:"sm",variant:"ghost",className:"text-red-500 h-8 hover:bg-red-50",onClick:()=>Je(_e),children:"Remove"})]})]},_e))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[ne!==null?e.jsxs(e.Fragment,{children:[e.jsx(Be,{type:"button",onClick:pt,className:"flex-1 gap-2 bg-green-600 hover:bg-green-700",children:"Update Entry"}),e.jsx(Be,{type:"button",onClick:Te,variant:"outline",className:"flex-1",children:"Cancel Edit"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Be,{type:"button",onClick:Ne,variant:"outline",className:"flex-1 gap-2 border-blue-200 text-blue-700 hover:bg-blue-50",children:[e.jsx(wc,{className:"w-4 h-4"})," Add to List"]}),e.jsxs(Be,{type:"submit",disabled:q,className:"flex-1 gap-2 bg-blue-600 hover:bg-blue-700",children:[q?e.jsx(Xl,{className:"w-4 h-4 animate-spin"}):e.jsx(wc,{className:"w-4 h-4"}),fe.length>0?`Submit ${fe.length} Items`:"Submit Single Item"]})]}),e.jsx(Be,{type:"button",variant:"ghost",onClick:()=>{Q(null),oe(null),$(""),xe({rate:"",unit:"",brandname:"",modelnumber:"",category:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""})},children:"Cancel"})]})]})})]})]})]})})}function Tz(){return e.jsx(Ez,{})}function FN(){const[t,s]=S.useState([]),[n,r]=S.useState(!0),[i,c]=S.useState(null),A=(m,y)=>{c({type:m,text:y}),window.setTimeout(()=>c(null),2500)},u=async()=>{try{const y=(await zo("/api/admin/pending-suppliers"))?.suppliers||[];s(p=>{const j=new Map(p.map(w=>[w.id,w])),b=[];for(const w of y){const B=j.get(w.id);b.push({...w,uiStatus:B?.uiStatus&&B.uiStatus!=="pending"?B.uiStatus:"pending",busy:!1})}for(const w of p)!y.find(B=>B.id===w.id)&&(w.uiStatus==="accepted"||w.uiStatus==="rejected")&&b.push(w);return b.sort((w,B)=>new Date(B.created_at).getTime()-new Date(w.created_at).getTime()),b})}catch(m){console.error("Failed to load suppliers",m),A("error",m?.message||"Failed to load suppliers")}finally{r(!1)}};S.useEffect(()=>{u();const m=window.setInterval(u,2e4);return()=>window.clearInterval(m)},[]);const d=S.useMemo(()=>t.filter(m=>m.uiStatus==="pending").length,[t]),h=async m=>{s(y=>y.map(p=>p.id===m?{...p,uiStatus:"accepted",busy:!0}:p));try{await yo(`/api/admin/suppliers/${m}/approve`,{}),A("success","Supplier accepted.")}catch(y){s(p=>p.map(j=>j.id===m?{...j,uiStatus:"pending"}:j)),A("error",y?.message||"Approve failed")}finally{s(y=>y.map(p=>p.id===m?{...p,busy:!1}:p)),u()}},o=async m=>{s(y=>y.map(p=>p.id===m?{...p,uiStatus:"rejected",busy:!0}:p));try{await yo(`/api/admin/suppliers/${m}/reject`,{reason:"Rejected by admin"}),A("success","Supplier rejected.")}catch(y){s(p=>p.map(j=>j.id===m?{...j,uiStatus:"pending"}:j)),A("error",y?.message||"Reject failed")}finally{s(y=>y.map(p=>p.id===m?{...p,busy:!1}:p)),u()}};return e.jsx("div",{className:"min-h-[calc(100vh-60px)]",children:e.jsxs("div",{className:"relative overflow-hidden rounded-2xl border bg-white",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx(Ss.div,{className:"absolute -top-40 -left-40 h-[520px] w-[520px] rounded-full blur-3xl opacity-30",style:{background:"radial-gradient(circle at center, #2563eb 0%, rgba(37,99,235,0) 60%)"},animate:{x:[0,40,0],y:[0,25,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(Ss.div,{className:"absolute -bottom-40 -right-40 h-[520px] w-[520px] rounded-full blur-3xl opacity-25",style:{background:"radial-gradient(circle at center, #60a5fa 0%, rgba(96,165,250,0) 60%)"},animate:{x:[0,-35,0],y:[0,-20,0]},transition:{duration:9,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs("div",{className:"relative px-6 py-6",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-slate-900",children:"Supplier Approval"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Review new supplier requests and approve or reject with a single click."}),e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-full bg-blue-50 px-3 py-1 text-sm text-blue-700",children:[e.jsx("span",{className:"font-semibold",children:d}),e.jsx("span",{children:"Pending"})]})]}),e.jsx(Fl,{children:i&&e.jsx(Ss.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},className:`mt-4 rounded-xl border px-4 py-3 text-sm ${i.type==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-rose-200 bg-rose-50 text-rose-800"}`,children:i.text})})]}),e.jsx("div",{className:"relative px-6 pb-8",children:n?e.jsxs("div",{className:"space-y-3",children:[e.jsx(uv,{}),e.jsx(uv,{}),e.jsx(uv,{})]}):t.length===0?e.jsxs(ks,{className:"p-6",children:[e.jsx("div",{className:"text-slate-700 font-semibold",children:"No pending suppliers"}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"All supplier requests have been processed."})]}):e.jsx("div",{className:"space-y-3",children:e.jsx(Fl,{initial:!1,children:t.map(m=>e.jsx(Ss.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.18},children:e.jsxs(ks,{className:"p-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-semibold text-slate-900 truncate",children:m.username}),e.jsx(Fz,{status:m.uiStatus})]}),e.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:["Requested on"," ",new Date(m.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{onClick:()=>h(m.id),disabled:m.uiStatus!=="pending"||!!m.busy,className:"bg-gradient-to-r from-blue-600 to-sky-500 hover:from-blue-700 hover:to-sky-600",children:m.busy&&m.uiStatus==="accepted"?"Accepting":"Approve"}),e.jsx(Be,{variant:"destructive",onClick:()=>o(m.id),disabled:m.uiStatus!=="pending"||!!m.busy,children:m.busy&&m.uiStatus==="rejected"?"Rejecting":"Reject"})]})]})},m.id))})})})]})})}function Fz({status:t}){return t==="accepted"?e.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-xs font-semibold text-emerald-700",children:"Accepted"}):t==="rejected"?e.jsx("span",{className:"rounded-full border border-rose-200 bg-rose-50 px-2 py-0.5 text-xs font-semibold text-rose-700",children:"Rejected"}):e.jsx("span",{className:"rounded-full border border-blue-200 bg-blue-50 px-2 py-0.5 text-xs font-semibold text-blue-700",children:"Pending"})}function uv(){return e.jsx(ks,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-48 rounded bg-slate-200 animate-pulse"}),e.jsx("div",{className:"mt-2 h-3 w-64 rounded bg-slate-200 animate-pulse"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-9 w-24 rounded bg-slate-200 animate-pulse"}),e.jsx("div",{className:"h-9 w-24 rounded bg-slate-200 animate-pulse"})]})]})})}function Iz(){const{toast:t}=ma(),[s,n]=S.useState([]),[r,i]=S.useState(!0),[c,A]=S.useState(null),[u,d]=S.useState(null),[h,o]=S.useState("");S.useEffect(()=>{m()},[]);const m=async()=>{try{i(!0);const j=localStorage.getItem("authToken"),b=await fetch("/api/material-submissions-pending-approval",{headers:j?{Authorization:`Bearer ${j}`}:{}});if(!b.ok)throw new Error("Failed to load submissions");const w=await b.json();n(w.submissions.map(B=>B.submission)||[])}catch(j){console.error("Error loading submissions:",j),t({title:"Error",description:"Failed to load material submissions",variant:"destructive"})}finally{i(!1)}},y=async j=>{A(j);try{const b=localStorage.getItem("authToken");if(!(await fetch(`/api/material-submissions/${j}/approve`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:b?`Bearer ${b}`:void 0}})).ok)throw new Error("Failed to approve submission");t({title:"Success",description:"Material submission approved"}),m()}catch(b){console.error("Error approving submission:",b),t({title:"Error",description:"Failed to approve submission",variant:"destructive"})}finally{A(null)}},p=async j=>{if(!h.trim()){t({title:"Error",description:"Please provide a rejection reason",variant:"destructive"});return}d(j);try{const b=localStorage.getItem("authToken");if(!(await fetch(`/api/material-submissions/${j}/reject`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:b?`Bearer ${b}`:void 0},body:JSON.stringify({reason:h})})).ok)throw new Error("Failed to reject submission");t({title:"Success",description:"Material submission rejected"}),o(""),m()}catch(b){console.error("Error rejecting submission:",b),t({title:"Error",description:"Failed to reject submission",variant:"destructive"})}finally{d(null)}};return e.jsx(ka,{children:e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Material Submission Approvals"}),e.jsx("p",{className:"text-gray-600",children:"Review and approve supplier material submissions"})]}),r?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(Xl,{className:"w-8 h-8 animate-spin"})}):s.length===0?e.jsx(ks,{children:e.jsx(Ws,{className:"pt-6",children:e.jsxs("div",{className:"text-center text-gray-500 py-12",children:[e.jsx(Wo,{className:"w-12 h-12 mx-auto mb-4 text-green-600"}),e.jsx("p",{children:"No pending material submissions"})]})})}):e.jsx("div",{className:"space-y-4",children:s.map(j=>e.jsx(ks,{className:"border-l-4 border-l-yellow-500",children:e.jsxs(Ws,{className:"pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Material"}),e.jsx("p",{className:"font-semibold text-lg",children:j.template_name}),e.jsx("p",{className:"text-sm text-gray-500",children:j.template_code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Supplier Shop"}),e.jsx("p",{className:"font-semibold",children:j.shop_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rate"}),e.jsxs("p",{className:"font-semibold",children:["",Number(j.rate).toFixed(2)," / ",j.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Submitted"}),e.jsx("p",{className:"font-semibold",children:new Date(j.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 pb-6 border-b",children:[j.brandname&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Brand"}),e.jsx("p",{className:"font-semibold",children:j.brandname})]}),j.modelnumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Model Number"}),e.jsx("p",{className:"font-semibold",children:j.modelnumber})]}),j.subcategory&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Subcategory"}),e.jsx("p",{className:"font-semibold",children:j.subcategory})]})]}),j.technicalspecification&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Technical Specification"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm",children:j.technicalspecification})]}),u===j.id&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded",children:[e.jsxs(Ve,{className:"text-red-900 font-semibold",children:["Rejection Reason ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(Cl,{placeholder:"Explain why this submission is being rejected",value:h,onChange:b=>o(b.target.value),rows:4,className:"mt-2"})]}),e.jsx("div",{className:"flex gap-2",children:u===j.id?e.jsxs(e.Fragment,{children:[e.jsxs(Be,{onClick:()=>p(j.id),variant:"destructive",disabled:!h.trim(),className:"gap-2",children:[e.jsx(Uy,{className:"w-4 h-4"}),"Confirm Rejection"]}),e.jsx(Be,{onClick:()=>{d(null),o("")},variant:"outline",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Be,{onClick:()=>y(j.id),disabled:c===j.id,className:"gap-2 bg-green-600 hover:bg-green-700",children:[c===j.id?e.jsx(Xl,{className:"w-4 h-4 animate-spin"}):e.jsx(Wo,{className:"w-4 h-4"}),"Approve"]}),e.jsxs(Be,{onClick:()=>d(j.id),variant:"outline",className:"gap-2",children:[e.jsx(Uy,{className:"w-4 h-4"}),"Reject"]})]})})]})},j.id))})]})})}const by=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:n,className:Vs("w-full caption-bottom text-sm",t),...s})}));by.displayName="Table";const jy=S.forwardRef(({className:t,...s},n)=>e.jsx("thead",{ref:n,className:Vs("[&_tr]:border-b",t),...s}));jy.displayName="TableHeader";const wy=S.forwardRef(({className:t,...s},n)=>e.jsx("tbody",{ref:n,className:Vs("[&_tr:last-child]:border-0",t),...s}));wy.displayName="TableBody";const Rz=S.forwardRef(({className:t,...s},n)=>e.jsx("tfoot",{ref:n,className:Vs("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));Rz.displayName="TableFooter";const lA=S.forwardRef(({className:t,...s},n)=>e.jsx("tr",{ref:n,className:Vs("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));lA.displayName="TableRow";const il=S.forwardRef(({className:t,...s},n)=>e.jsx("th",{ref:n,className:Vs("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s}));il.displayName="TableHead";const mo=S.forwardRef(({className:t,...s},n)=>e.jsx("td",{ref:n,className:Vs("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s}));mo.displayName="TableCell";const Oz=S.forwardRef(({className:t,...s},n)=>e.jsx("caption",{ref:n,className:Vs("mt-4 text-sm text-muted-foreground",t),...s}));Oz.displayName="TableCaption";function Uz(){const[t,s]=S.useState(1),[n,r]=S.useState(null),[i,c]=S.useState(""),[A,u]=S.useState(""),[d,h]=S.useState(""),[o,m]=S.useState([]),[y,p]=S.useState([]),[j,b]=S.useState(!1),{toast:w}=ma(),{data:B,isLoading:L}=Ig({queryKey:["/api/products"],queryFn:async()=>{const te=await ct("/api/products");if(!te.ok)throw new Error("Failed to fetch products");return(await te.json()).products||[]}}),{data:Q}=Ig({queryKey:["/api/material-categories"],queryFn:async()=>{const te=await ct("/api/material-categories");if(!te.ok)throw new Error("Failed to fetch categories");return(await te.json()).categories||[]},enabled:t===2}),{data:k}=Ig({queryKey:["/api/material-subcategories",A],queryFn:async()=>{const te=await ct(`/api/material-subcategories/${A}`);if(!te.ok)throw new Error("Failed to fetch subcategories");return(await te.json()).subcategories||[]},enabled:t===2&&!!A&&A!==" "}),{data:z,isLoading:J}=Ig({queryKey:["/api/materials"],queryFn:async()=>{const te=await ct("/api/materials");if(!te.ok)throw new Error("Failed to fetch materials");return(await te.json()).materials||[]},enabled:t===2}),$=(z||[]).filter(te=>{const re=!A||te.category===A,ne=!d||te.subcategory===d;return re&&ne}),q=()=>{if(t===1&&!n){w({title:"Product Required",description:"Please select a product to proceed.",variant:"destructive"});return}if(t===2&&o.length===0){w({title:"Selection Required",description:"Please select at least one material.",variant:"destructive"});return}t===2&&p(o.map(te=>{const re=Number(te.rate)||0;return{...te,qty:1,amount:re,rate:re,supplyRate:re,installRate:0,location:"Main Area"}})),s(t+1)},X=async()=>{if(n){b(!0);try{const te=i||`${n.name}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(!(await ct("/api/step11-products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:n.id,productName:n.name,configName:te,categoryId:A,subcategoryId:d,totalCost:ue,items:y.map(ne=>({materialId:ne.id,materialName:ne.name,unit:ne.unit,qty:ne.qty,rate:ne.rate,supplyRate:ne.supplyRate,installRate:ne.installRate,location:ne.location,amount:ne.amount}))})})).ok)throw new Error("Failed to save configuration");w({title:"Success",description:"Product configuration saved permanently.",variant:"default"}),s(1),r(null),c(""),m([]),p([])}catch(te){w({title:"Error",description:te.message||"Failed to save configuration",variant:"destructive"})}finally{b(!1)}}},fe=()=>s(t-1),ee=te=>{m(re=>re.find(ne=>ne.id===te.id)?re.filter(ne=>ne.id!==te.id):[...re,te])},le=(te,re,ne)=>{p(oe=>oe.map(se=>{if(se.id===te){const xe={...se,[re]:ne};if(re==="qty"||re==="supplyRate"||re==="installRate"){const Me=Number(xe.qty)||0,me=Number(xe.supplyRate)||0,Z=Number(xe.installRate)||0;xe.rate=me+Z,xe.amount=Me*xe.rate}return xe}return se}))},ue=y.reduce((te,re)=>te+(Number(re.amount)||0),0);return e.jsx(ka,{children:e.jsx("div",{className:"container mx-auto py-8 px-4",children:e.jsxs(ks,{className:"max-w-6xl mx-auto shadow-xl border-none",children:[e.jsx(ur,{className:"bg-primary/5 border-b pb-6",children:e.jsxs(hr,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-3xl font-extrabold tracking-tight",children:"Manage Product"}),n&&e.jsx(Bl,{variant:"outline",className:"text-sm font-semibold py-1.5 px-4 bg-primary/10 border-primary/20",children:n.name})]})}),e.jsxs(Ws,{className:"p-8",children:[t===1&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"1. Select Base Product"}),e.jsxs("div",{className:"relative w-full md:w-80",children:[e.jsx(Ly,{className:"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground"}),e.jsx($e,{placeholder:"Search by name...",className:"pl-10 h-10"})]})]}),L?e.jsxs("div",{className:"flex flex-col items-center justify-center p-20 space-y-4",children:[e.jsx(Xl,{className:"h-10 w-10 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Loading products..."})]}):e.jsx("div",{className:"rounded-xl border shadow-sm overflow-hidden bg-white",children:e.jsxs(by,{children:[e.jsx(jy,{className:"bg-muted/30",children:e.jsxs(lA,{children:[e.jsx(il,{className:"w-[60px]"}),e.jsx(il,{className:"font-bold",children:"Product Name"}),e.jsx(il,{className:"font-bold",children:"Created Date"})]})}),e.jsx(wy,{children:B?.map(te=>e.jsxs(lA,{className:`hover:bg-muted/20 transition-colors cursor-pointer ${n?.id===te.id?"bg-primary/5 hover:bg-primary/10":""}`,onClick:()=>r(te),children:[e.jsx(mo,{onClick:re=>re.stopPropagation(),children:e.jsx(Fn,{checked:n?.id===te.id,onCheckedChange:()=>{r(te),c(""),u(""),h(""),m([]),p([])}})}),e.jsx(mo,{className:"font-semibold text-base",children:te.name}),e.jsx(mo,{className:"text-muted-foreground",children:te.created_at?new Date(te.created_at).toLocaleDateString():"N/A"})]},te.id))})]})}),n&&e.jsxs("div",{className:"space-y-3 p-6 bg-primary/5 rounded-xl border border-primary/20",children:[e.jsx("label",{className:"text-sm font-bold uppercase tracking-wider text-muted-foreground",children:"Configuration Name (Optional)"}),e.jsx($e,{value:i,onChange:te=>c(te.target.value),placeholder:"Enter a name for this configuration (e.g., 'Standard', 'Premium', 'Basic')",className:"h-11"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Give this configuration a name to distinguish it from other configurations of the same product."})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(Be,{size:"lg",onClick:q,disabled:!n,className:"px-8",children:["Next Step ",e.jsx(dy,{className:"ml-2 h-5 w-5"})]})})]}),t===2&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-bold uppercase tracking-wider text-muted-foreground",children:"Category"}),e.jsxs(Bn,{value:A,onValueChange:te=>{u(te),h("")},children:[e.jsx(wn,{className:"h-11",children:e.jsx(Cn,{placeholder:"All Categories"})}),e.jsxs(Sn,{children:[e.jsx(dn,{value:" ",children:"All Categories"}),Q?.map(te=>e.jsx(dn,{value:te,children:te},te))]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-bold uppercase tracking-wider text-muted-foreground",children:"Subcategory"}),e.jsxs(Bn,{value:d,onValueChange:h,disabled:!A||A===" ",children:[e.jsx(wn,{className:"h-11",children:e.jsx(Cn,{placeholder:"All Subcategories"})}),e.jsxs(Sn,{children:[e.jsx(dn,{value:" ",children:"All Subcategories"}),k?.map(te=>e.jsx(dn,{value:te,children:te},te))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold",children:"2. Select Materials/Items"}),e.jsxs("span",{className:"text-sm font-medium text-primary bg-primary/10 px-3 py-1 rounded-full",children:[$.length," results found"]})]}),e.jsx("div",{className:"rounded-xl border shadow-sm max-h-[450px] overflow-y-auto bg-white",children:e.jsxs(by,{children:[e.jsx(jy,{className:"sticky top-0 bg-muted/95 backdrop-blur-sm z-10 shadow-sm",children:e.jsxs(lA,{children:[e.jsx(il,{className:"w-[60px]"}),e.jsx(il,{className:"font-bold",children:"Material Name"}),e.jsx(il,{className:"font-bold",children:"Unit"}),e.jsx(il,{className:"text-right font-bold pr-6",children:"Default Rate"})]})}),e.jsx(wy,{children:J?e.jsx(lA,{children:e.jsx(mo,{colSpan:4,className:"text-center py-20",children:e.jsx(Xl,{className:"h-8 w-8 animate-spin mx-auto text-primary"})})}):$.length===0?e.jsx(lA,{children:e.jsx(mo,{colSpan:4,className:"text-center py-20 text-muted-foreground italic",children:"No materials found matching the current filters."})}):$.map(te=>e.jsxs(lA,{className:`hover:bg-muted/20 transition-colors cursor-pointer ${o.some(re=>re.id===te.id)?"bg-primary/5 hover:bg-primary/10":""}`,onClick:()=>ee(te),children:[e.jsx(mo,{onClick:re=>re.stopPropagation(),children:e.jsx(Fn,{checked:o.some(re=>re.id===te.id),onCheckedChange:()=>ee(te)})}),e.jsx(mo,{className:"font-medium",children:te.name}),e.jsx(mo,{children:te.unit||"-"}),e.jsx(mo,{className:"text-right pr-6 font-semibold",children:te.rate?`${te.rate.toLocaleString()}`:"-"})]},te.id))})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 pt-6 mt-4 border-t",children:[e.jsxs(Be,{variant:"outline",size:"lg",onClick:fe,className:"w-full sm:w-auto px-8",children:[e.jsx(jf,{className:"mr-2 h-5 w-5"})," Back"]}),e.jsxs("div",{className:"flex items-center gap-6 w-full sm:w-auto",children:[e.jsxs("p",{className:"text-sm font-bold text-muted-foreground whitespace-nowrap",children:[o.length," SELECTED"]}),e.jsxs(Be,{size:"lg",onClick:q,disabled:o.length===0,className:"w-full sm:w-auto px-10",children:["Review Selection ",e.jsx(dy,{className:"ml-2 h-5 w-5"})]})]})]})]}),t===3&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6 bg-gradient-to-r from-muted/50 to-muted/20 p-6 rounded-2xl border",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-widest mb-1",children:"Configuration For"}),e.jsx("p",{className:"text-2xl font-extrabold",children:n?.name})]}),e.jsxs("div",{className:"text-center md:text-right",children:[e.jsx("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-widest mb-1",children:"Current Total"}),e.jsxs("p",{className:"text-4xl font-extrabold text-primary",children:["",ue.toLocaleString()]})]})]}),e.jsx("div",{className:"rounded-xl border shadow-sm overflow-hidden bg-white",children:e.jsxs(by,{children:[e.jsx(jy,{className:"bg-muted/30",children:e.jsxs(lA,{children:[e.jsx(il,{className:"font-bold py-4",children:"Item Name"}),e.jsx(il,{className:"w-[120px] font-bold",children:"Location"}),e.jsx(il,{className:"w-[80px] font-bold",children:"Unit"}),e.jsx(il,{className:"w-[80px] font-bold",children:"Qty"}),e.jsx(il,{className:"w-[120px] font-bold",children:"Supply Rate"}),e.jsx(il,{className:"w-[120px] font-bold",children:"Install Rate"}),e.jsx(il,{className:"w-[140px] text-right font-bold pr-6",children:"Total Amount"})]})}),e.jsx(wy,{children:y.map(te=>e.jsxs(lA,{className:"hover:bg-muted/5",children:[e.jsx(mo,{className:"font-semibold",children:te.name}),e.jsx(mo,{children:e.jsx($e,{value:te.location,onChange:re=>le(te.id,"location",re.target.value),className:"h-9 border-muted text-xs"})}),e.jsx(mo,{children:e.jsx($e,{value:te.unit,onChange:re=>le(te.id,"unit",re.target.value),className:"h-9 border-muted text-xs"})}),e.jsx(mo,{children:e.jsx($e,{type:"number",value:te.qty,onChange:re=>le(te.id,"qty",Number(re.target.value)),className:"h-9 border-muted text-xs"})}),e.jsx(mo,{children:e.jsx($e,{type:"number",value:te.supplyRate,onChange:re=>le(te.id,"supplyRate",Number(re.target.value)),className:"h-9 border-muted text-xs"})}),e.jsx(mo,{children:e.jsx($e,{type:"number",value:te.installRate,onChange:re=>le(te.id,"installRate",Number(re.target.value)),className:"h-9 border-muted text-xs"})}),e.jsxs(mo,{className:"text-right font-black text-primary pr-6",children:["",te.amount.toLocaleString()]})]},te.id))})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 pt-6 mt-4 border-t",children:[e.jsxs(Be,{variant:"outline",size:"lg",onClick:fe,className:"w-full sm:w-auto px-8",children:[e.jsx(jf,{className:"mr-2 h-5 w-5"})," Back to Selection"]}),e.jsxs(Be,{size:"lg",onClick:q,className:"w-full sm:w-auto bg-primary hover:bg-primary/90 text-white font-bold px-12 transition-all",children:["Continue to Review ",e.jsx(dy,{className:"ml-2 h-5 w-5"})]})]})]}),t===4&&e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8 py-4 px-6 bg-muted/30 rounded-xl border border-dashed border-muted-foreground/30",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-muted-foreground mb-1",children:"Product Configuration For"}),e.jsx("p",{className:"text-xl font-bold uppercase",children:n?.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-muted-foreground mb-1",children:"Category / Subcategory"}),e.jsxs("p",{className:"text-lg font-bold",children:[A," ",e.jsx("span",{className:"text-muted-foreground mx-1",children:"/"})," ",d]})]})]}),e.jsx("div",{className:"overflow-x-auto border-2 border-black rounded-sm shadow-xl",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-white text-black text-[11px] font-black uppercase tracking-widest border-b border-black",children:[e.jsx("th",{rowSpan:2,className:"border border-black p-3 text-center w-[50px]",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border border-black p-3 text-left",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border border-black p-3 text-center w-[120px]",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border border-black p-3 text-left",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border border-black p-3 text-center w-[80px]",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border border-black p-3 text-center w-[80px]",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border border-black p-3 text-center border-b-0",children:"Rate (INR)"}),e.jsx("th",{colSpan:2,className:"border border-black p-3 text-center border-b-0",children:"Amount (INR)"})]}),e.jsxs("tr",{className:"bg-white text-black text-[9px] font-black uppercase tracking-widest border-t border-black",children:[e.jsx("th",{className:"border border-black p-2 text-right w-[100px]",children:"Supply"}),e.jsx("th",{className:"border border-black p-2 text-right w-[100px]",children:"Installation"}),e.jsx("th",{className:"border border-black p-2 text-right w-[110px]",children:"Supply"}),e.jsx("th",{className:"border border-black p-2 text-right w-[110px]",children:"Installation"})]})]}),e.jsx("tbody",{className:"bg-white",children:e.jsxs("tr",{className:"text-[12px] border-b border-black/10 hover:bg-muted/10 transition-colors",children:[e.jsx("td",{className:"border-r border-black p-3 text-center font-bold",children:"1"}),e.jsx("td",{className:"border-r border-black p-3 font-black text-xs uppercase",children:n?.name}),e.jsx("td",{className:"border-r border-black p-3 text-center italic",children:"Main Area"}),e.jsxs("td",{className:"border-r border-black p-3 text-[10px] text-muted-foreground leading-tight",children:["Consolidated configuration for ",n?.name]}),e.jsx("td",{className:"border-r border-black p-3 text-center font-bold",children:"set"}),e.jsx("td",{className:"border-r border-black p-3 text-center font-black",children:"1"}),e.jsxs("td",{className:"border-r border-black p-3 text-right font-bold",children:["",y.reduce((te,re)=>te+re.qty*(re.supplyRate||re.rate||0),0).toLocaleString()]}),e.jsxs("td",{className:"border-r border-black p-3 text-right font-bold",children:["",y.reduce((te,re)=>te+re.qty*(re.installRate||0),0).toLocaleString()]}),e.jsxs("td",{className:"border-r border-black p-3 text-right font-black text-primary",children:["",y.reduce((te,re)=>te+re.qty*(re.supplyRate||re.rate||0),0).toLocaleString()]}),e.jsxs("td",{className:"border-black p-3 text-right font-black text-primary",children:["",y.reduce((te,re)=>te+re.qty*(re.installRate||0),0).toLocaleString()]})]})}),e.jsx("tfoot",{className:"bg-black/5",children:e.jsxs("tr",{className:"border-t-2 border-black font-black",children:[e.jsx("td",{colSpan:8,className:"p-4 text-right uppercase tracking-tighter",children:"Grand Total Amount (INR)"}),e.jsxs("td",{colSpan:2,className:"p-4 text-right pr-6 text-xl text-primary bg-primary/5 border-l border-black/10",children:["",ue.toLocaleString()]})]})})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 pt-12 mt-8 border-t border-black/10",children:[e.jsxs(Be,{variant:"outline",onClick:fe,className:"w-full sm:w-auto px-6 font-bold uppercase tracking-wide",disabled:j,children:[e.jsx(jf,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Be,{onClick:X,disabled:j,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold px-8 uppercase tracking-wide transition-all shadow-lg hover:scale-105",children:j?e.jsxs(e.Fragment,{children:[e.jsx(Xl,{className:"mr-2 h-6 w-6 animate-spin"})," Finalizing..."]}):"Add to Create BOQ"})]})]})]})]})})})}function Lz(){const{toast:t}=ma(),[s,n]=S.useState([]),[r,i]=S.useState(!0),[c,A]=S.useState(""),[u,d]=S.useState(null),[h,o]=S.useState({name:"",description:""}),m=async()=>{try{i(!0);const B=await ct("/api/vendor-categories");if(B.ok){const L=await B.json();n(L.categories||[])}}catch(B){console.error("Failed to load vendor categories:",B),t({title:"Error",description:"Failed to load vendor categories",variant:"destructive"})}finally{i(!1)}};S.useEffect(()=>{m()},[]);const y=async B=>{if(B.preventDefault(),!h.name.trim()){t({title:"Error",description:"Category name is required",variant:"destructive"});return}try{const L=u?"PUT":"POST",Q=u?`/api/vendor-categories/${u}`:"/api/vendor-categories",k=await ct(Q,{method:L,headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(k.ok)t({title:"Success",description:u?"Vendor category updated successfully":"Vendor category created successfully"}),o({name:"",description:""}),d(null),m();else{const z=await k.json();t({title:"Error",description:z.message||"Failed to save vendor category",variant:"destructive"})}}catch(L){console.error("Failed to save vendor category:",L),t({title:"Error",description:"Failed to save vendor category",variant:"destructive"})}},p=B=>{d(B.id),o({name:B.name,description:B.description||""}),window.scrollTo({top:0,behavior:"smooth"})},j=async(B,L)=>{if(window.confirm(`Are you sure you want to delete "${L}"?`))try{const Q=await ct(`/api/vendor-categories/${B}`,{method:"DELETE"});if(Q.ok)t({title:"Success",description:"Vendor category deleted successfully"}),m();else{const k=await Q.json();t({title:"Error",description:k.message||"Failed to delete vendor category",variant:"destructive"})}}catch(Q){console.error("Failed to delete vendor category:",Q),t({title:"Error",description:"Failed to delete vendor category",variant:"destructive"})}},b=()=>{d(null),o({name:"",description:""})},w=s.filter(B=>B.name.toLowerCase().includes(c.toLowerCase()));return e.jsx(ka,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading",children:"Vendor Categories"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage vendor categories for shops and materials"})]}),e.jsxs(ks,{children:[e.jsxs(ur,{children:[e.jsxs(hr,{children:[u?"Edit":"Add"," Vendor Category"]}),e.jsx(na,{children:u?"Update the vendor category details":"Create a new vendor category"})]}),e.jsx(Ws,{children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{htmlFor:"name",children:["Category Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx($e,{id:"name",value:h.name,onChange:B=>o({...h,name:B.target.value}),placeholder:"e.g., Fire Safety Goods & Service Supplier",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"description",children:"Description"}),e.jsx(Cl,{id:"description",value:h.description,onChange:B=>o({...h,description:B.target.value}),placeholder:"Optional description",rows:1})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Be,{type:"submit",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"}),u?"Update":"Add"," Category"]}),u&&e.jsx(Be,{type:"button",variant:"outline",onClick:b,children:"Cancel"})]})]})})]}),e.jsxs(ks,{children:[e.jsx(ur,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(hr,{children:"All Vendor Categories"}),e.jsxs(na,{children:[w.length," categor",w.length===1?"y":"ies"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ly,{className:"h-4 w-4 text-muted-foreground"}),e.jsx($e,{value:c,onChange:B=>A(B.target.value),placeholder:"Search categories...",className:"w-64"})]})]})}),e.jsx(Ws,{children:r?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Loading..."}):w.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:c?"No categories found":"No vendor categories yet. Add one above to get started."}):e.jsx("div",{className:"space-y-2",children:w.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:B.name}),B.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:B.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{size:"sm",variant:"outline",onClick:()=>p(B),children:e.jsx(SL,{className:"h-4 w-4"})}),e.jsx(Be,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",onClick:()=>j(B.id,B.name),children:e.jsx(qc,{className:"h-4 w-4"})})]})]},B.id))})})]})]})})}const Dz="modulepreload",Qz=function(t){return"/"+t},IN={},Yc=function(s,n,r){let i=Promise.resolve();if(n&&n.length>0){let d=function(h){return Promise.all(h.map(o=>Promise.resolve(o).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const A=document.querySelector("meta[property=csp-nonce]"),u=A?.nonce||A?.getAttribute("nonce");i=d(n.map(h=>{if(h=Qz(h),h in IN)return;IN[h]=!0;const o=h.endsWith(".css"),m=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const y=document.createElement("link");if(y.rel=o?"stylesheet":Dz,o||(y.as="script"),y.crossOrigin="",y.href=h,u&&y.setAttribute("nonce",u),document.head.appendChild(y),o)return new Promise((p,j)=>{y.addEventListener("load",p),y.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(A){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=A,window.dispatchEvent(u),!u.defaultPrevented)throw A}return i.then(A=>{for(const u of A||[])u.status==="rejected"&&c(u.reason);return s().catch(c)})},hv=t=>String(t||"").toUpperCase(),Dd=t=>{if(!t)return null;const s=hv(t.subcategory||t.subcategory_name),n=hv(t.category||t.category_name),r=hv(t.name);if(s.includes("DOOR")||n.includes("DOOR")||r.includes("DOOR")||s.includes("VISION PANEL")||s==="WPC"&&r.includes("FRAME")||s.includes("FLUSH")||s.includes("TEAK")||s.includes("STILE"))return"doors";if(s.includes("CIVIL")||n.includes("CIVIL")||s.includes("WALL")||n.includes("WALL")||s.includes("CEMENT")||s.includes("BRICK")||s.includes("SAND"))return"civilwall";if(s.includes("ELECTRICAL")||n.includes("ELECTRICAL")||s.includes("WIRE")||s.includes("CABLE")||s.includes("SWITCH")||s.includes("SOCKET")||s.includes("LIGHT")||s.includes("LED")||s.includes("FAN")||s.includes("MCB")||s.includes("CONDUIT"))return"electrical";if(s.includes("FLOOR")||n.includes("FLOOR")||s.includes("TILE")||s.includes("MARBLE")||s.includes("GRANITE")||r.includes("FLOORING"))return"flooring";if(s.includes("PLUMB")||n.includes("PLUMB")||s.includes("PIPE")||n.includes("PIPE")||s.includes("WATER")||s.includes("TAP")||s.includes("FAUCET")||s.includes("SINK"))return"plumbing";if(s.includes("PAINT")||n.includes("PAINT")||s.includes("PUTTY")||s.includes("PRIMER")||s.includes("EMULSION"))return"painting";if(s.includes("CEILING")||n.includes("CEILING")||s.includes("GYPSUM")||s.includes("POP")||s.includes("GRID"))return"falseceiling";const i=(s||n||r).trim();if(i){const c=i.replace(/[-\s]/g,"");if(/\w+/.test(c))return c.toLowerCase()}return null};var fv={exports:{}};function Ca(t){"@babel/helpers - typeof";return Ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ca(t)}var Zc=Uint8Array,Yl=Uint16Array,Tj=Int32Array,Fj=new Zc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ij=new Zc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),RN=new Zc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xI=function(t,s){for(var n=new Yl(31),r=0;r<31;++r)n[r]=s+=1<<t[r-1];for(var i=new Tj(n[30]),r=1;r<30;++r)for(var c=n[r];c<n[r+1];++c)i[c]=c-n[r]<<5|r;return{b:n,r:i}},vI=xI(Fj,2),_z=vI.b,Gb=vI.r;_z[28]=258,Gb[258]=28;var Mz=xI(Ij,0),ON=Mz.r,qb=new Yl(32768);for(var Za=0;Za<32768;++Za){var eu=(Za&43690)>>1|(Za&21845)<<1;eu=(eu&52428)>>2|(eu&13107)<<2,eu=(eu&61680)>>4|(eu&3855)<<4,qb[Za]=((eu&65280)>>8|(eu&255)<<8)>>1}var em=(function(t,s,n){for(var r=t.length,i=0,c=new Yl(s);i<r;++i)t[i]&&++c[t[i]-1];var A=new Yl(s);for(i=1;i<s;++i)A[i]=A[i-1]+c[i-1]<<1;var u;if(n){u=new Yl(1<<s);var d=15-s;for(i=0;i<r;++i)if(t[i])for(var h=i<<4|t[i],o=s-t[i],m=A[t[i]-1]++<<o,y=m|(1<<o)-1;m<=y;++m)u[qb[m]>>d]=h}else for(u=new Yl(r),i=0;i<r;++i)t[i]&&(u[i]=qb[A[t[i]-1]++]>>15-t[i]);return u}),wh=new Zc(288);for(var Za=0;Za<144;++Za)wh[Za]=8;for(var Za=144;Za<256;++Za)wh[Za]=9;for(var Za=256;Za<280;++Za)wh[Za]=7;for(var Za=280;Za<288;++Za)wh[Za]=8;var Xy=new Zc(32);for(var Za=0;Za<32;++Za)Xy[Za]=5;var Pz=em(wh,9,0),kz=em(Xy,5,0),bI=function(t){return(t+7)/8|0},Hz=function(t,s,n){return(n==null||n>t.length)&&(n=t.length),new Zc(t.subarray(s,n))},iA=function(t,s,n){n<<=s&7;var r=s/8|0;t[r]|=n,t[r+1]|=n>>8},_p=function(t,s,n){n<<=s&7;var r=s/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},pv=function(t,s){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,c=n.slice();if(!i)return{t:wI,l:0};if(i==1){var A=new Zc(n[0].s+1);return A[n[0].s]=1,{t:A,l:1}}n.sort(function(z,J){return z.f-J.f}),n.push({s:-1,f:25001});var u=n[0],d=n[1],h=0,o=1,m=2;for(n[0]={s:-1,f:u.f+d.f,l:u,r:d};o!=i-1;)u=n[n[h].f<n[m].f?h++:m++],d=n[h!=o&&n[h].f<n[m].f?h++:m++],n[o++]={s:-1,f:u.f+d.f,l:u,r:d};for(var y=c[0].s,r=1;r<i;++r)c[r].s>y&&(y=c[r].s);var p=new Yl(y+1),j=Wb(n[o-1],p,0);if(j>s){var r=0,b=0,w=j-s,B=1<<w;for(c.sort(function(J,$){return p[$.s]-p[J.s]||J.f-$.f});r<i;++r){var L=c[r].s;if(p[L]>s)b+=B-(1<<j-p[L]),p[L]=s;else break}for(b>>=w;b>0;){var Q=c[r].s;p[Q]<s?b-=1<<s-p[Q]++-1:++r}for(;r>=0&&b;--r){var k=c[r].s;p[k]==s&&(--p[k],++b)}j=s}return{t:new Zc(p),l:j}},Wb=function(t,s,n){return t.s==-1?Math.max(Wb(t.l,s,n+1),Wb(t.r,s,n+1)):s[t.s]=n},UN=function(t){for(var s=t.length;s&&!t[--s];);for(var n=new Yl(++s),r=0,i=t[0],c=1,A=function(d){n[r++]=d},u=1;u<=s;++u)if(t[u]==i&&u!=s)++c;else{if(!i&&c>2){for(;c>138;c-=138)A(32754);c>2&&(A(c>10?c-11<<5|28690:c-3<<5|12305),c=0)}else if(c>3){for(A(i),--c;c>6;c-=6)A(8304);c>2&&(A(c-3<<5|8208),c=0)}for(;c--;)A(i);c=1,i=t[u]}return{c:n.subarray(0,r),n:s}},Mp=function(t,s){for(var n=0,r=0;r<s.length;++r)n+=t[r]*s[r];return n},jI=function(t,s,n){var r=n.length,i=bI(s+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var c=0;c<r;++c)t[i+c+4]=n[c];return(i+4+r)*8},LN=function(t,s,n,r,i,c,A,u,d,h,o){iA(s,o++,n),++i[256];for(var m=pv(i,15),y=m.t,p=m.l,j=pv(c,15),b=j.t,w=j.l,B=UN(y),L=B.c,Q=B.n,k=UN(b),z=k.c,J=k.n,$=new Yl(19),q=0;q<L.length;++q)++$[L[q]&31];for(var q=0;q<z.length;++q)++$[z[q]&31];for(var X=pv($,7),fe=X.t,ee=X.l,le=19;le>4&&!fe[RN[le-1]];--le);var ue=h+5<<3,te=Mp(i,wh)+Mp(c,Xy)+A,re=Mp(i,y)+Mp(c,b)+A+14+3*le+Mp($,fe)+2*$[16]+3*$[17]+7*$[18];if(d>=0&&ue<=te&&ue<=re)return jI(s,o,t.subarray(d,d+h));var ne,oe,se,xe;if(iA(s,o,1+(re<te)),o+=2,re<te){ne=em(y,p,0),oe=y,se=em(b,w,0),xe=b;var Me=em(fe,ee,0);iA(s,o,Q-257),iA(s,o+5,J-1),iA(s,o+10,le-4),o+=14;for(var q=0;q<le;++q)iA(s,o+3*q,fe[RN[q]]);o+=3*le;for(var me=[L,z],Z=0;Z<2;++Z)for(var ge=me[Z],q=0;q<ge.length;++q){var we=ge[q]&31;iA(s,o,Me[we]),o+=fe[we],we>15&&(iA(s,o,ge[q]>>5&127),o+=ge[q]>>12)}}else ne=Pz,oe=wh,se=kz,xe=Xy;for(var q=0;q<u;++q){var pe=r[q];if(pe>255){var we=pe>>18&31;_p(s,o,ne[we+257]),o+=oe[we+257],we>7&&(iA(s,o,pe>>23&31),o+=Fj[we]);var be=pe&31;_p(s,o,se[be]),o+=xe[be],be>3&&(_p(s,o,pe>>5&8191),o+=Ij[be])}else _p(s,o,ne[pe]),o+=oe[pe]}return _p(s,o,ne[256]),o+oe[256]},Kz=new Tj([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wI=new Zc(0),zz=function(t,s,n,r,i,c){var A=c.z||t.length,u=new Zc(r+A+5*(1+Math.ceil(A/7e3))+i),d=u.subarray(r,u.length-i),h=c.l,o=(c.r||0)&7;if(s){o&&(d[0]=c.r>>3);for(var m=Kz[s-1],y=m>>13,p=m&8191,j=(1<<n)-1,b=c.p||new Yl(32768),w=c.h||new Yl(j+1),B=Math.ceil(n/3),L=2*B,Q=function(_e){return(t[_e]^t[_e+1]<<B^t[_e+2]<<L)&j},k=new Tj(25e3),z=new Yl(288),J=new Yl(32),$=0,q=0,X=c.i||0,fe=0,ee=c.w||0,le=0;X+2<A;++X){var ue=Q(X),te=X&32767,re=w[ue];if(b[te]=re,w[ue]=te,ee<=X){var ne=A-X;if(($>7e3||fe>24576)&&(ne>423||!h)){o=LN(t,d,0,k,z,J,q,fe,le,X-le,o),fe=$=q=0,le=X;for(var oe=0;oe<286;++oe)z[oe]=0;for(var oe=0;oe<30;++oe)J[oe]=0}var se=2,xe=0,Me=p,me=te-re&32767;if(ne>2&&ue==Q(X-me))for(var Z=Math.min(y,ne)-1,ge=Math.min(32767,X),we=Math.min(258,ne);me<=ge&&--Me&&te!=re;){if(t[X+se]==t[X+se-me]){for(var pe=0;pe<we&&t[X+pe]==t[X+pe-me];++pe);if(pe>se){if(se=pe,xe=me,pe>Z)break;for(var be=Math.min(me,pe-2),je=0,oe=0;oe<be;++oe){var Ne=X-me+oe&32767,Je=b[Ne],Qe=Ne-Je&32767;Qe>je&&(je=Qe,re=Ne)}}}te=re,re=b[te],me+=te-re&32767}if(xe){k[fe++]=268435456|Gb[se]<<18|ON[xe];var pt=Gb[se]&31,Te=ON[xe]&31;q+=Fj[pt]+Ij[Te],++z[257+pt],++J[Te],ee=X+se,++$}else k[fe++]=t[X],++z[t[X]]}}for(X=Math.max(X,ee);X<A;++X)k[fe++]=t[X],++z[t[X]];o=LN(t,d,h,k,z,J,q,fe,le,X-le,o),h||(c.r=o&7|d[o/8|0]<<3,o-=7,c.h=w,c.p=b,c.i=X,c.w=ee)}else{for(var X=c.w||0;X<A+h;X+=65535){var Ce=X+65535;Ce>=A&&(d[o/8|0]=h,Ce=A),o=jI(d,o+1,t.subarray(X,Ce))}c.i=A}return Hz(u,0,r+bI(o)+i)},SI=function(){var t=1,s=0;return{p:function(n){for(var r=t,i=s,c=n.length|0,A=0;A!=c;){for(var u=Math.min(A+2655,c);A<u;++A)i+=r+=n[A];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,s=i},d:function(){return t%=65521,s%=65521,(t&255)<<24|(t&65280)<<8|(s&255)<<8|s>>8}}},Vz=function(t,s,n,r,i){if(!i&&(i={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),A=new Zc(c.length+t.length);A.set(c),A.set(t,c.length),t=A,i.w=c.length}return zz(t,s.level==null?6:s.level,s.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+s.mem,n,r,i)},NI=function(t,s,n){for(;n;++s)t[s]=n,n>>>=8},$z=function(t,s){var n=s.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(s.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,s.dictionary){var i=SI();i.p(s.dictionary),NI(t,2,i.d())}};function Yb(t,s){s||(s={});var n=SI();n.p(t);var r=Vz(t,s,s.dictionary?6:2,4);return $z(r,s),NI(r,r.length-4,n.d()),r}var Gz=typeof TextDecoder<"u"&&new TextDecoder,qz=0;try{Gz.decode(wI,{stream:!0}),qz=1}catch{}function Wz(t){if(Array.isArray(t))return t}function Yz(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,c,A,u=[],d=!0,h=!1;try{if(c=(n=n.call(t)).next,s!==0)for(;!(d=(r=c.call(n)).done)&&(u.push(r.value),u.length!==s);d=!0);}catch(o){h=!0,i=o}finally{try{if(!d&&n.return!=null&&(A=n.return(),Object(A)!==A))return}finally{if(h)throw i}}return u}}function DN(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=Array(s);n<s;n++)r[n]=t[n];return r}function Xz(t,s){if(t){if(typeof t=="string")return DN(t,s);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?DN(t,s):void 0}}function Jz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QN(t,s){return Wz(t)||Yz(t,s)||Xz(t,s)||Jz()}function _N(t,s="utf8"){return new TextDecoder(s).decode(t)}const Zz=new TextEncoder;function eV(t){return Zz.encode(t)}const tV=1024*8,sV=(()=>{const t=new Uint8Array(4),s=new Uint32Array(t.buffer);return!((s[0]=1)&t[0])})(),mv={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Rj{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(s=tV,n={}){let r=!1;typeof s=="number"?s=new ArrayBuffer(s):(r=!0,this.lastWrittenByte=s.byteLength);const i=n.offset?n.offset>>>0:0,c=s.byteLength-i;let A=i;(ArrayBuffer.isView(s)||s instanceof Rj)&&(s.byteLength!==s.buffer.byteLength&&(A=s.byteOffset+i),s=s.buffer),r?this.lastWrittenByte=c:this.lastWrittenByte=0,this.buffer=s,this.length=c,this.byteLength=c,this.byteOffset=A,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,A,c),this._mark=0,this._marks=[]}available(s=1){return this.offset+s<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(s=1){return this.offset+=s,this}back(s=1){return this.offset-=s,this}seek(s){return this.offset=s,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const s=this._marks.pop();if(s===void 0)throw new Error("Mark stack empty");return this.seek(s),this}rewind(){return this.offset=0,this}ensureAvailable(s=1){if(!this.available(s)){const r=(this.offset+s)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(s=1){return this.readArray(s,"uint8")}readArray(s,n){const r=mv[n].BYTES_PER_ELEMENT*s,i=this.byteOffset+this.offset,c=this.buffer.slice(i,i+r);if(this.littleEndian===sV&&n!=="uint8"&&n!=="int8"){const u=new Uint8Array(this.buffer.slice(i,i+r));u.reverse();const d=new mv[n](u.buffer);return this.offset+=r,d.reverse(),d}const A=new mv[n](c);return this.offset+=r,A}readInt16(){const s=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,s}readUint16(){const s=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,s}readInt32(){const s=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,s}readUint32(){const s=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat32(){const s=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat64(){const s=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,s}readBigInt64(){const s=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,s}readBigUint64(){const s=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,s}readChar(){return String.fromCharCode(this.readInt8())}readChars(s=1){let n="";for(let r=0;r<s;r++)n+=this.readChar();return n}readUtf8(s=1){return _N(this.readBytes(s))}decodeText(s=1,n="utf8"){return _N(this.readBytes(s),n)}writeBoolean(s){return this.writeUint8(s?255:0),this}writeInt8(s){return this.ensureAvailable(1),this._data.setInt8(this.offset++,s),this._updateLastWrittenByte(),this}writeUint8(s){return this.ensureAvailable(1),this._data.setUint8(this.offset++,s),this._updateLastWrittenByte(),this}writeByte(s){return this.writeUint8(s)}writeBytes(s){this.ensureAvailable(s.length);for(let n=0;n<s.length;n++)this._data.setUint8(this.offset++,s[n]);return this._updateLastWrittenByte(),this}writeInt16(s){return this.ensureAvailable(2),this._data.setInt16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(s){return this.ensureAvailable(2),this._data.setUint16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(s){return this.ensureAvailable(4),this._data.setInt32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(s){return this.ensureAvailable(4),this._data.setUint32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(s){return this.ensureAvailable(4),this._data.setFloat32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(s){return this.ensureAvailable(8),this._data.setFloat64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(s){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(s){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(s){return this.writeUint8(s.charCodeAt(0))}writeChars(s){for(let n=0;n<s.length;n++)this.writeUint8(s.charCodeAt(n));return this}writeUtf8(s){return this.writeBytes(eV(s))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function zf(t){let s=t.length;for(;--s>=0;)t[s]=0}const nV=3,rV=258,BI=29,aV=256,iV=aV+1+BI,CI=30,oV=512,lV=new Array((iV+2)*2);zf(lV);const cV=new Array(CI*2);zf(cV);const dV=new Array(oV);zf(dV);const AV=new Array(rV-nV+1);zf(AV);const uV=new Array(BI);zf(uV);const hV=new Array(CI);zf(hV);const fV=(t,s,n,r)=>{let i=t&65535|0,c=t>>>16&65535|0,A=0;for(;n!==0;){A=n>2e3?2e3:n,n-=A;do i=i+s[r++]|0,c=c+i|0;while(--A);i%=65521,c%=65521}return i|c<<16|0};var Xb=fV;const pV=()=>{let t,s=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;s[n]=t}return s},mV=new Uint32Array(pV()),gV=(t,s,n,r)=>{const i=mV,c=r+n;t^=-1;for(let A=r;A<c;A++)t=t>>>8^i[(t^s[A])&255];return t^-1};var Cd=gV,Jb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},EI={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const yV=(t,s)=>Object.prototype.hasOwnProperty.call(t,s);var xV=function(t){const s=Array.prototype.slice.call(arguments,1);for(;s.length;){const n=s.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)yV(n,r)&&(t[r]=n[r])}}return t},vV=t=>{let s=0;for(let r=0,i=t.length;r<i;r++)s+=t[r].length;const n=new Uint8Array(s);for(let r=0,i=0,c=t.length;r<c;r++){let A=t[r];n.set(A,i),i+=A.length}return n},TI={assign:xV,flattenChunks:vV};let FI=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{FI=!1}const gm=new Uint8Array(256);for(let t=0;t<256;t++)gm[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;gm[254]=gm[254]=1;var bV=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let s,n,r,i,c,A=t.length,u=0;for(i=0;i<A;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<A&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),u+=n<128?1:n<2048?2:n<65536?3:4;for(s=new Uint8Array(u),c=0,i=0;c<u;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<A&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?s[c++]=n:n<2048?(s[c++]=192|n>>>6,s[c++]=128|n&63):n<65536?(s[c++]=224|n>>>12,s[c++]=128|n>>>6&63,s[c++]=128|n&63):(s[c++]=240|n>>>18,s[c++]=128|n>>>12&63,s[c++]=128|n>>>6&63,s[c++]=128|n&63);return s};const jV=(t,s)=>{if(s<65534&&t.subarray&&FI)return String.fromCharCode.apply(null,t.length===s?t:t.subarray(0,s));let n="";for(let r=0;r<s;r++)n+=String.fromCharCode(t[r]);return n};var wV=(t,s)=>{const n=s||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,s));let r,i;const c=new Array(n*2);for(i=0,r=0;r<n;){let A=t[r++];if(A<128){c[i++]=A;continue}let u=gm[A];if(u>4){c[i++]=65533,r+=u-1;continue}for(A&=u===2?31:u===3?15:7;u>1&&r<n;)A=A<<6|t[r++]&63,u--;if(u>1){c[i++]=65533;continue}A<65536?c[i++]=A:(A-=65536,c[i++]=55296|A>>10&1023,c[i++]=56320|A&1023)}return jV(c,i)},SV=(t,s)=>{s=s||t.length,s>t.length&&(s=t.length);let n=s-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?s:n+gm[t[n]]>s?n:s},Zb={string2buf:bV,buf2string:wV,utf8border:SV};function NV(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var BV=NV;const Yg=16209,CV=16191;var EV=function(s,n){let r,i,c,A,u,d,h,o,m,y,p,j,b,w,B,L,Q,k,z,J,$,q,X,fe;const ee=s.state;r=s.next_in,X=s.input,i=r+(s.avail_in-5),c=s.next_out,fe=s.output,A=c-(n-s.avail_out),u=c+(s.avail_out-257),d=ee.dmax,h=ee.wsize,o=ee.whave,m=ee.wnext,y=ee.window,p=ee.hold,j=ee.bits,b=ee.lencode,w=ee.distcode,B=(1<<ee.lenbits)-1,L=(1<<ee.distbits)-1;e:do{j<15&&(p+=X[r++]<<j,j+=8,p+=X[r++]<<j,j+=8),Q=b[p&B];t:for(;;){if(k=Q>>>24,p>>>=k,j-=k,k=Q>>>16&255,k===0)fe[c++]=Q&65535;else if(k&16){z=Q&65535,k&=15,k&&(j<k&&(p+=X[r++]<<j,j+=8),z+=p&(1<<k)-1,p>>>=k,j-=k),j<15&&(p+=X[r++]<<j,j+=8,p+=X[r++]<<j,j+=8),Q=w[p&L];s:for(;;){if(k=Q>>>24,p>>>=k,j-=k,k=Q>>>16&255,k&16){if(J=Q&65535,k&=15,j<k&&(p+=X[r++]<<j,j+=8,j<k&&(p+=X[r++]<<j,j+=8)),J+=p&(1<<k)-1,J>d){s.msg="invalid distance too far back",ee.mode=Yg;break e}if(p>>>=k,j-=k,k=c-A,J>k){if(k=J-k,k>o&&ee.sane){s.msg="invalid distance too far back",ee.mode=Yg;break e}if($=0,q=y,m===0){if($+=h-k,k<z){z-=k;do fe[c++]=y[$++];while(--k);$=c-J,q=fe}}else if(m<k){if($+=h+m-k,k-=m,k<z){z-=k;do fe[c++]=y[$++];while(--k);if($=0,m<z){k=m,z-=k;do fe[c++]=y[$++];while(--k);$=c-J,q=fe}}}else if($+=m-k,k<z){z-=k;do fe[c++]=y[$++];while(--k);$=c-J,q=fe}for(;z>2;)fe[c++]=q[$++],fe[c++]=q[$++],fe[c++]=q[$++],z-=3;z&&(fe[c++]=q[$++],z>1&&(fe[c++]=q[$++]))}else{$=c-J;do fe[c++]=fe[$++],fe[c++]=fe[$++],fe[c++]=fe[$++],z-=3;while(z>2);z&&(fe[c++]=fe[$++],z>1&&(fe[c++]=fe[$++]))}}else if((k&64)===0){Q=w[(Q&65535)+(p&(1<<k)-1)];continue s}else{s.msg="invalid distance code",ee.mode=Yg;break e}break}}else if((k&64)===0){Q=b[(Q&65535)+(p&(1<<k)-1)];continue t}else if(k&32){ee.mode=CV;break e}else{s.msg="invalid literal/length code",ee.mode=Yg;break e}break}}while(r<i&&c<u);z=j>>3,r-=z,j-=z<<3,p&=(1<<j)-1,s.next_in=r,s.next_out=c,s.avail_in=r<i?5+(i-r):5-(r-i),s.avail_out=c<u?257+(u-c):257-(c-u),ee.hold=p,ee.bits=j};const cf=15,MN=852,PN=592,kN=0,gv=1,HN=2,TV=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),FV=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),IV=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),RV=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),OV=(t,s,n,r,i,c,A,u)=>{const d=u.bits;let h=0,o=0,m=0,y=0,p=0,j=0,b=0,w=0,B=0,L=0,Q,k,z,J,$,q=null,X;const fe=new Uint16Array(cf+1),ee=new Uint16Array(cf+1);let le=null,ue,te,re;for(h=0;h<=cf;h++)fe[h]=0;for(o=0;o<r;o++)fe[s[n+o]]++;for(p=d,y=cf;y>=1&&fe[y]===0;y--);if(p>y&&(p=y),y===0)return i[c++]=1<<24|64<<16|0,i[c++]=1<<24|64<<16|0,u.bits=1,0;for(m=1;m<y&&fe[m]===0;m++);for(p<m&&(p=m),w=1,h=1;h<=cf;h++)if(w<<=1,w-=fe[h],w<0)return-1;if(w>0&&(t===kN||y!==1))return-1;for(ee[1]=0,h=1;h<cf;h++)ee[h+1]=ee[h]+fe[h];for(o=0;o<r;o++)s[n+o]!==0&&(A[ee[s[n+o]]++]=o);if(t===kN?(q=le=A,X=20):t===gv?(q=TV,le=FV,X=257):(q=IV,le=RV,X=0),L=0,o=0,h=m,$=c,j=p,b=0,z=-1,B=1<<p,J=B-1,t===gv&&B>MN||t===HN&&B>PN)return 1;for(;;){ue=h-b,A[o]+1<X?(te=0,re=A[o]):A[o]>=X?(te=le[A[o]-X],re=q[A[o]-X]):(te=96,re=0),Q=1<<h-b,k=1<<j,m=k;do k-=Q,i[$+(L>>b)+k]=ue<<24|te<<16|re|0;while(k!==0);for(Q=1<<h-1;L&Q;)Q>>=1;if(Q!==0?(L&=Q-1,L+=Q):L=0,o++,--fe[h]===0){if(h===y)break;h=s[n+A[o]]}if(h>p&&(L&J)!==z){for(b===0&&(b=p),$+=m,j=h-b,w=1<<j;j+b<y&&(w-=fe[j+b],!(w<=0));)j++,w<<=1;if(B+=1<<j,t===gv&&B>MN||t===HN&&B>PN)return 1;z=L&J,i[z]=p<<24|j<<16|$-c|0}}return L!==0&&(i[$+L]=h-b<<24|64<<16|0),u.bits=p,0};var tm=OV;const UV=0,II=1,RI=2,{Z_FINISH:KN,Z_BLOCK:LV,Z_TREES:Xg,Z_OK:Sh,Z_STREAM_END:DV,Z_NEED_DICT:QV,Z_STREAM_ERROR:Bc,Z_DATA_ERROR:OI,Z_MEM_ERROR:UI,Z_BUF_ERROR:_V,Z_DEFLATED:zN}=EI,Qx=16180,VN=16181,$N=16182,GN=16183,qN=16184,WN=16185,YN=16186,XN=16187,JN=16188,ZN=16189,Jy=16190,oA=16191,yv=16192,eB=16193,xv=16194,tB=16195,sB=16196,nB=16197,rB=16198,Jg=16199,Zg=16200,aB=16201,iB=16202,oB=16203,lB=16204,cB=16205,vv=16206,dB=16207,AB=16208,Ai=16209,LI=16210,DI=16211,MV=852,PV=592,kV=15,HV=kV,uB=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function KV(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Eh=t=>{if(!t)return 1;const s=t.state;return!s||s.strm!==t||s.mode<Qx||s.mode>DI?1:0},QI=t=>{if(Eh(t))return Bc;const s=t.state;return t.total_in=t.total_out=s.total=0,t.msg="",s.wrap&&(t.adler=s.wrap&1),s.mode=Qx,s.last=0,s.havedict=0,s.flags=-1,s.dmax=32768,s.head=null,s.hold=0,s.bits=0,s.lencode=s.lendyn=new Int32Array(MV),s.distcode=s.distdyn=new Int32Array(PV),s.sane=1,s.back=-1,Sh},_I=t=>{if(Eh(t))return Bc;const s=t.state;return s.wsize=0,s.whave=0,s.wnext=0,QI(t)},MI=(t,s)=>{let n;if(Eh(t))return Bc;const r=t.state;return s<0?(n=0,s=-s):(n=(s>>4)+5,s<48&&(s&=15)),s&&(s<8||s>15)?Bc:(r.window!==null&&r.wbits!==s&&(r.window=null),r.wrap=n,r.wbits=s,_I(t))},PI=(t,s)=>{if(!t)return Bc;const n=new KV;t.state=n,n.strm=t,n.window=null,n.mode=Qx;const r=MI(t,s);return r!==Sh&&(t.state=null),r},zV=t=>PI(t,HV);let hB=!0,bv,jv;const VV=t=>{if(hB){bv=new Int32Array(512),jv=new Int32Array(32);let s=0;for(;s<144;)t.lens[s++]=8;for(;s<256;)t.lens[s++]=9;for(;s<280;)t.lens[s++]=7;for(;s<288;)t.lens[s++]=8;for(tm(II,t.lens,0,288,bv,0,t.work,{bits:9}),s=0;s<32;)t.lens[s++]=5;tm(RI,t.lens,0,32,jv,0,t.work,{bits:5}),hB=!1}t.lencode=bv,t.lenbits=9,t.distcode=jv,t.distbits=5},kI=(t,s,n,r)=>{let i;const c=t.state;return c.window===null&&(c.wsize=1<<c.wbits,c.wnext=0,c.whave=0,c.window=new Uint8Array(c.wsize)),r>=c.wsize?(c.window.set(s.subarray(n-c.wsize,n),0),c.wnext=0,c.whave=c.wsize):(i=c.wsize-c.wnext,i>r&&(i=r),c.window.set(s.subarray(n-r,n-r+i),c.wnext),r-=i,r?(c.window.set(s.subarray(n-r,n),0),c.wnext=r,c.whave=c.wsize):(c.wnext+=i,c.wnext===c.wsize&&(c.wnext=0),c.whave<c.wsize&&(c.whave+=i))),0},$V=(t,s)=>{let n,r,i,c,A,u,d,h,o,m,y,p,j,b,w=0,B,L,Q,k,z,J,$,q;const X=new Uint8Array(4);let fe,ee;const le=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Eh(t)||!t.output||!t.input&&t.avail_in!==0)return Bc;n=t.state,n.mode===oA&&(n.mode=yv),A=t.next_out,i=t.output,d=t.avail_out,c=t.next_in,r=t.input,u=t.avail_in,h=n.hold,o=n.bits,m=u,y=d,q=Sh;e:for(;;)switch(n.mode){case Qx:if(n.wrap===0){n.mode=yv;break}for(;o<16;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(n.wrap&2&&h===35615){n.wbits===0&&(n.wbits=15),n.check=0,X[0]=h&255,X[1]=h>>>8&255,n.check=Cd(n.check,X,2,0),h=0,o=0,n.mode=VN;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((h&255)<<8)+(h>>8))%31){t.msg="incorrect header check",n.mode=Ai;break}if((h&15)!==zN){t.msg="unknown compression method",n.mode=Ai;break}if(h>>>=4,o-=4,$=(h&15)+8,n.wbits===0&&(n.wbits=$),$>15||$>n.wbits){t.msg="invalid window size",n.mode=Ai;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=h&512?ZN:oA,h=0,o=0;break;case VN:for(;o<16;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(n.flags=h,(n.flags&255)!==zN){t.msg="unknown compression method",n.mode=Ai;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Ai;break}n.head&&(n.head.text=h>>8&1),n.flags&512&&n.wrap&4&&(X[0]=h&255,X[1]=h>>>8&255,n.check=Cd(n.check,X,2,0)),h=0,o=0,n.mode=$N;case $N:for(;o<32;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}n.head&&(n.head.time=h),n.flags&512&&n.wrap&4&&(X[0]=h&255,X[1]=h>>>8&255,X[2]=h>>>16&255,X[3]=h>>>24&255,n.check=Cd(n.check,X,4,0)),h=0,o=0,n.mode=GN;case GN:for(;o<16;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}n.head&&(n.head.xflags=h&255,n.head.os=h>>8),n.flags&512&&n.wrap&4&&(X[0]=h&255,X[1]=h>>>8&255,n.check=Cd(n.check,X,2,0)),h=0,o=0,n.mode=qN;case qN:if(n.flags&1024){for(;o<16;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}n.length=h,n.head&&(n.head.extra_len=h),n.flags&512&&n.wrap&4&&(X[0]=h&255,X[1]=h>>>8&255,n.check=Cd(n.check,X,2,0)),h=0,o=0}else n.head&&(n.head.extra=null);n.mode=WN;case WN:if(n.flags&1024&&(p=n.length,p>u&&(p=u),p&&(n.head&&($=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(c,c+p),$)),n.flags&512&&n.wrap&4&&(n.check=Cd(n.check,r,p,c)),u-=p,c+=p,n.length-=p),n.length))break e;n.length=0,n.mode=YN;case YN:if(n.flags&2048){if(u===0)break e;p=0;do $=r[c+p++],n.head&&$&&n.length<65536&&(n.head.name+=String.fromCharCode($));while($&&p<u);if(n.flags&512&&n.wrap&4&&(n.check=Cd(n.check,r,p,c)),u-=p,c+=p,$)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=XN;case XN:if(n.flags&4096){if(u===0)break e;p=0;do $=r[c+p++],n.head&&$&&n.length<65536&&(n.head.comment+=String.fromCharCode($));while($&&p<u);if(n.flags&512&&n.wrap&4&&(n.check=Cd(n.check,r,p,c)),u-=p,c+=p,$)break e}else n.head&&(n.head.comment=null);n.mode=JN;case JN:if(n.flags&512){for(;o<16;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(n.wrap&4&&h!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Ai;break}h=0,o=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=oA;break;case ZN:for(;o<32;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}t.adler=n.check=uB(h),h=0,o=0,n.mode=Jy;case Jy:if(n.havedict===0)return t.next_out=A,t.avail_out=d,t.next_in=c,t.avail_in=u,n.hold=h,n.bits=o,QV;t.adler=n.check=1,n.mode=oA;case oA:if(s===LV||s===Xg)break e;case yv:if(n.last){h>>>=o&7,o-=o&7,n.mode=vv;break}for(;o<3;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}switch(n.last=h&1,h>>>=1,o-=1,h&3){case 0:n.mode=eB;break;case 1:if(VV(n),n.mode=Jg,s===Xg){h>>>=2,o-=2;break e}break;case 2:n.mode=sB;break;case 3:t.msg="invalid block type",n.mode=Ai}h>>>=2,o-=2;break;case eB:for(h>>>=o&7,o-=o&7;o<32;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if((h&65535)!==(h>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Ai;break}if(n.length=h&65535,h=0,o=0,n.mode=xv,s===Xg)break e;case xv:n.mode=tB;case tB:if(p=n.length,p){if(p>u&&(p=u),p>d&&(p=d),p===0)break e;i.set(r.subarray(c,c+p),A),u-=p,c+=p,d-=p,A+=p,n.length-=p;break}n.mode=oA;break;case sB:for(;o<14;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(n.nlen=(h&31)+257,h>>>=5,o-=5,n.ndist=(h&31)+1,h>>>=5,o-=5,n.ncode=(h&15)+4,h>>>=4,o-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Ai;break}n.have=0,n.mode=nB;case nB:for(;n.have<n.ncode;){for(;o<3;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}n.lens[le[n.have++]]=h&7,h>>>=3,o-=3}for(;n.have<19;)n.lens[le[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,fe={bits:n.lenbits},q=tm(UV,n.lens,0,19,n.lencode,0,n.work,fe),n.lenbits=fe.bits,q){t.msg="invalid code lengths set",n.mode=Ai;break}n.have=0,n.mode=rB;case rB:for(;n.have<n.nlen+n.ndist;){for(;w=n.lencode[h&(1<<n.lenbits)-1],B=w>>>24,L=w>>>16&255,Q=w&65535,!(B<=o);){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(Q<16)h>>>=B,o-=B,n.lens[n.have++]=Q;else{if(Q===16){for(ee=B+2;o<ee;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(h>>>=B,o-=B,n.have===0){t.msg="invalid bit length repeat",n.mode=Ai;break}$=n.lens[n.have-1],p=3+(h&3),h>>>=2,o-=2}else if(Q===17){for(ee=B+3;o<ee;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}h>>>=B,o-=B,$=0,p=3+(h&7),h>>>=3,o-=3}else{for(ee=B+7;o<ee;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}h>>>=B,o-=B,$=0,p=11+(h&127),h>>>=7,o-=7}if(n.have+p>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Ai;break}for(;p--;)n.lens[n.have++]=$}}if(n.mode===Ai)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Ai;break}if(n.lenbits=9,fe={bits:n.lenbits},q=tm(II,n.lens,0,n.nlen,n.lencode,0,n.work,fe),n.lenbits=fe.bits,q){t.msg="invalid literal/lengths set",n.mode=Ai;break}if(n.distbits=6,n.distcode=n.distdyn,fe={bits:n.distbits},q=tm(RI,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,fe),n.distbits=fe.bits,q){t.msg="invalid distances set",n.mode=Ai;break}if(n.mode=Jg,s===Xg)break e;case Jg:n.mode=Zg;case Zg:if(u>=6&&d>=258){t.next_out=A,t.avail_out=d,t.next_in=c,t.avail_in=u,n.hold=h,n.bits=o,EV(t,y),A=t.next_out,i=t.output,d=t.avail_out,c=t.next_in,r=t.input,u=t.avail_in,h=n.hold,o=n.bits,n.mode===oA&&(n.back=-1);break}for(n.back=0;w=n.lencode[h&(1<<n.lenbits)-1],B=w>>>24,L=w>>>16&255,Q=w&65535,!(B<=o);){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(L&&(L&240)===0){for(k=B,z=L,J=Q;w=n.lencode[J+((h&(1<<k+z)-1)>>k)],B=w>>>24,L=w>>>16&255,Q=w&65535,!(k+B<=o);){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}h>>>=k,o-=k,n.back+=k}if(h>>>=B,o-=B,n.back+=B,n.length=Q,L===0){n.mode=cB;break}if(L&32){n.back=-1,n.mode=oA;break}if(L&64){t.msg="invalid literal/length code",n.mode=Ai;break}n.extra=L&15,n.mode=aB;case aB:if(n.extra){for(ee=n.extra;o<ee;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,o-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=iB;case iB:for(;w=n.distcode[h&(1<<n.distbits)-1],B=w>>>24,L=w>>>16&255,Q=w&65535,!(B<=o);){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if((L&240)===0){for(k=B,z=L,J=Q;w=n.distcode[J+((h&(1<<k+z)-1)>>k)],B=w>>>24,L=w>>>16&255,Q=w&65535,!(k+B<=o);){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}h>>>=k,o-=k,n.back+=k}if(h>>>=B,o-=B,n.back+=B,L&64){t.msg="invalid distance code",n.mode=Ai;break}n.offset=Q,n.extra=L&15,n.mode=oB;case oB:if(n.extra){for(ee=n.extra;o<ee;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,o-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Ai;break}n.mode=lB;case lB:if(d===0)break e;if(p=y-d,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Ai;break}p>n.wnext?(p-=n.wnext,j=n.wsize-p):j=n.wnext-p,p>n.length&&(p=n.length),b=n.window}else b=i,j=A-n.offset,p=n.length;p>d&&(p=d),d-=p,n.length-=p;do i[A++]=b[j++];while(--p);n.length===0&&(n.mode=Zg);break;case cB:if(d===0)break e;i[A++]=n.length,d--,n.mode=Zg;break;case vv:if(n.wrap){for(;o<32;){if(u===0)break e;u--,h|=r[c++]<<o,o+=8}if(y-=d,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?Cd(n.check,i,y,A-y):Xb(n.check,i,y,A-y)),y=d,n.wrap&4&&(n.flags?h:uB(h))!==n.check){t.msg="incorrect data check",n.mode=Ai;break}h=0,o=0}n.mode=dB;case dB:if(n.wrap&&n.flags){for(;o<32;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(n.wrap&4&&h!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Ai;break}h=0,o=0}n.mode=AB;case AB:q=DV;break e;case Ai:q=OI;break e;case LI:return UI;case DI:default:return Bc}return t.next_out=A,t.avail_out=d,t.next_in=c,t.avail_in=u,n.hold=h,n.bits=o,(n.wsize||y!==t.avail_out&&n.mode<Ai&&(n.mode<vv||s!==KN))&&kI(t,t.output,t.next_out,y-t.avail_out),m-=t.avail_in,y-=t.avail_out,t.total_in+=m,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?Cd(n.check,i,y,t.next_out-y):Xb(n.check,i,y,t.next_out-y)),t.data_type=n.bits+(n.last?64:0)+(n.mode===oA?128:0)+(n.mode===Jg||n.mode===xv?256:0),(m===0&&y===0||s===KN)&&q===Sh&&(q=_V),q},GV=t=>{if(Eh(t))return Bc;let s=t.state;return s.window&&(s.window=null),t.state=null,Sh},qV=(t,s)=>{if(Eh(t))return Bc;const n=t.state;return(n.wrap&2)===0?Bc:(n.head=s,s.done=!1,Sh)},WV=(t,s)=>{const n=s.length;let r,i,c;return Eh(t)||(r=t.state,r.wrap!==0&&r.mode!==Jy)?Bc:r.mode===Jy&&(i=1,i=Xb(i,s,n,0),i!==r.check)?OI:(c=kI(t,s,n,n),c?(r.mode=LI,UI):(r.havedict=1,Sh))};var YV=_I,XV=MI,JV=QI,ZV=zV,e$=PI,t$=$V,s$=GV,n$=qV,r$=WV,a$="pako inflate (from Nodeca project)",cA={inflateReset:YV,inflateReset2:XV,inflateResetKeep:JV,inflateInit:ZV,inflateInit2:e$,inflate:t$,inflateEnd:s$,inflateGetHeader:n$,inflateSetDictionary:r$,inflateInfo:a$};function i$(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var o$=i$;const HI=Object.prototype.toString,{Z_NO_FLUSH:l$,Z_FINISH:c$,Z_OK:ym,Z_STREAM_END:wv,Z_NEED_DICT:Sv,Z_STREAM_ERROR:d$,Z_DATA_ERROR:fB,Z_MEM_ERROR:A$}=EI;function Om(t){this.options=TI.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const s=this.options;s.raw&&s.windowBits>=0&&s.windowBits<16&&(s.windowBits=-s.windowBits,s.windowBits===0&&(s.windowBits=-15)),s.windowBits>=0&&s.windowBits<16&&!(t&&t.windowBits)&&(s.windowBits+=32),s.windowBits>15&&s.windowBits<48&&(s.windowBits&15)===0&&(s.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new BV,this.strm.avail_out=0;let n=cA.inflateInit2(this.strm,s.windowBits);if(n!==ym)throw new Error(Jb[n]);if(this.header=new o$,cA.inflateGetHeader(this.strm,this.header),s.dictionary&&(typeof s.dictionary=="string"?s.dictionary=Zb.string2buf(s.dictionary):HI.call(s.dictionary)==="[object ArrayBuffer]"&&(s.dictionary=new Uint8Array(s.dictionary)),s.raw&&(n=cA.inflateSetDictionary(this.strm,s.dictionary),n!==ym)))throw new Error(Jb[n])}Om.prototype.push=function(t,s){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let c,A,u;if(this.ended)return!1;for(s===~~s?A=s:A=s===!0?c$:l$,HI.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),c=cA.inflate(n,A),c===Sv&&i&&(c=cA.inflateSetDictionary(n,i),c===ym?c=cA.inflate(n,A):c===fB&&(c=Sv));n.avail_in>0&&c===wv&&n.state.wrap>0&&t[n.next_in]!==0;)cA.inflateReset(n),c=cA.inflate(n,A);switch(c){case d$:case fB:case Sv:case A$:return this.onEnd(c),this.ended=!0,!1}if(u=n.avail_out,n.next_out&&(n.avail_out===0||c===wv))if(this.options.to==="string"){let d=Zb.utf8border(n.output,n.next_out),h=n.next_out-d,o=Zb.buf2string(n.output,d);n.next_out=h,n.avail_out=r-h,h&&n.output.set(n.output.subarray(d,d+h),0),this.onData(o)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(c===ym&&u===0)){if(c===wv)return c=cA.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Om.prototype.onData=function(t){this.chunks.push(t)};Om.prototype.onEnd=function(t){t===ym&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=TI.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function u$(t,s){const n=new Om(s);if(n.push(t),n.err)throw n.msg||Jb[n.err];return n.result}var h$=Om,f$=u$,p$={Inflate:h$,inflate:f$};const{Inflate:m$,inflate:g$}=p$;var pB=m$,y$=g$;const KI=[];for(let t=0;t<256;t++){let s=t;for(let n=0;n<8;n++)s&1?s=3988292384^s>>>1:s=s>>>1;KI[t]=s}const mB=4294967295;function x$(t,s,n){let r=t;for(let i=0;i<n;i++)r=KI[(r^s[i])&255]^r>>>8;return r}function v$(t,s){return(x$(mB,t,s)^mB)>>>0}function gB(t,s,n){const r=t.readUint32(),i=v$(new Uint8Array(t.buffer,t.byteOffset+t.offset-s-4,s),s);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function zI(t,s,n){for(let r=0;r<n;r++)s[r]=t[r]}function VI(t,s,n,r){let i=0;for(;i<r;i++)s[i]=t[i];for(;i<n;i++)s[i]=t[i]+s[i-r]&255}function $I(t,s,n,r){let i=0;if(n.length===0)for(;i<r;i++)s[i]=t[i];else for(;i<r;i++)s[i]=t[i]+n[i]&255}function GI(t,s,n,r,i){let c=0;if(n.length===0){for(;c<i;c++)s[c]=t[c];for(;c<r;c++)s[c]=t[c]+(s[c-i]>>1)&255}else{for(;c<i;c++)s[c]=t[c]+(n[c]>>1)&255;for(;c<r;c++)s[c]=t[c]+(s[c-i]+n[c]>>1)&255}}function qI(t,s,n,r,i){let c=0;if(n.length===0){for(;c<i;c++)s[c]=t[c];for(;c<r;c++)s[c]=t[c]+s[c-i]&255}else{for(;c<i;c++)s[c]=t[c]+n[c]&255;for(;c<r;c++)s[c]=t[c]+b$(s[c-i],n[c],n[c-i])&255}}function b$(t,s,n){const r=t+s-n,i=Math.abs(r-t),c=Math.abs(r-s),A=Math.abs(r-n);return i<=c&&i<=A?t:c<=A?s:n}function j$(t,s,n,r,i,c){switch(t){case 0:zI(s,n,i);break;case 1:VI(s,n,i,c);break;case 2:$I(s,n,r,i);break;case 3:GI(s,n,r,i,c);break;case 4:qI(s,n,r,i,c);break;default:throw new Error(`Unsupported filter: ${t}`)}}const w$=new Uint16Array([255]),S$=new Uint8Array(w$.buffer),N$=S$[0]===255;function B$(t){const{data:s,width:n,height:r,channels:i,depth:c}=t,A=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(c/8)*i,d=new Uint8Array(r*n*u);let h=0;for(let o=0;o<7;o++){const m=A[o],y=Math.ceil((n-m.x)/m.xStep),p=Math.ceil((r-m.y)/m.yStep);if(y<=0||p<=0)continue;const j=y*u,b=new Uint8Array(j);for(let w=0;w<p;w++){const B=s[h++],L=s.subarray(h,h+j);h+=j;const Q=new Uint8Array(j);j$(B,L,Q,b,j,u),b.set(Q);for(let k=0;k<y;k++){const z=m.x+k*m.xStep,J=m.y+w*m.yStep;if(!(z>=n||J>=r))for(let $=0;$<u;$++)d[(J*n+z)*u+$]=Q[k*u+$]}}}if(c===16){const o=new Uint16Array(d.buffer);if(N$)for(let m=0;m<o.length;m++)o[m]=C$(o[m]);return o}else return d}function C$(t){return(t&255)<<8|t>>8&255}const E$=new Uint16Array([255]),T$=new Uint8Array(E$.buffer),F$=T$[0]===255,I$=new Uint8Array(0);function yB(t){const{data:s,width:n,height:r,channels:i,depth:c}=t,A=Math.ceil(c/8)*i,u=Math.ceil(c/8*i*n),d=new Uint8Array(r*u);let h=I$,o=0,m,y;for(let p=0;p<r;p++){switch(m=s.subarray(o+1,o+1+u),y=d.subarray(p*u,(p+1)*u),s[o]){case 0:zI(m,y,u);break;case 1:VI(m,y,u,A);break;case 2:$I(m,y,h,u);break;case 3:GI(m,y,h,u,A);break;case 4:qI(m,y,h,u,A);break;default:throw new Error(`Unsupported filter: ${s[o]}`)}h=y,o+=u+1}if(c===16){const p=new Uint16Array(d.buffer);if(F$)for(let j=0;j<p.length;j++)p[j]=R$(p[j]);return p}else return d}function R$(t){return(t&255)<<8|t>>8&255}const Sy=Uint8Array.of(137,80,78,71,13,10,26,10);function xB(t){if(!O$(t.readBytes(Sy.length)))throw new Error("wrong PNG signature")}function O$(t){if(t.length<Sy.length)return!1;for(let s=0;s<Sy.length;s++)if(t[s]!==Sy[s])return!1;return!0}const U$="tEXt",L$=0,WI=new TextDecoder("latin1");function D$(t){if(_$(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const Q$=/^[\u0000-\u00FF]*$/;function _$(t){if(!Q$.test(t))throw new Error("invalid latin1 text")}function M$(t,s,n){const r=YI(s);t[r]=P$(s,n-r.length-1)}function YI(t){for(t.mark();t.readByte()!==L$;);const s=t.offset;t.reset();const n=WI.decode(t.readBytes(s-t.offset-1));return t.skip(1),D$(n),n}function P$(t,s){return WI.decode(t.readBytes(s))}const Gl={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Nv={UNKNOWN:-1,DEFLATE:0},vB={UNKNOWN:-1,ADAPTIVE:0},Bv={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},ey={NONE:0,BACKGROUND:1,PREVIOUS:2},Cv={SOURCE:0,OVER:1};class k$ extends Rj{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(s,n={}){super(s);const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new pB,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Nv.UNKNOWN,this._filterMethod=vB.UNKNOWN,this._interlaceMethod=Bv.UNKNOWN,this._colorType=Gl.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(xB(this);!this._end;){const s=this.readUint32(),n=this.readChars(4);this.decodeChunk(s,n)}return this.decodeImage(),this._png}decodeApng(){for(xB(this);!this._end;){const s=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(s,n)}return this.decodeApngImage(),this._apng}decodeChunk(s,n){const r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(s);break;case"IDAT":this.decodeIDAT(s);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(s);break;case"iCCP":this.decodeiCCP(s);break;case U$:M$(this._png.text,this,s);break;case"pHYs":this.decodepHYs();break;default:this.skip(s);break}if(this.offset-r!==s)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?gB(this,s+4,n):this.skip(4)}decodeApngChunk(s,n){const r=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(s);break;default:this.decodeChunk(s,n),this.offset=r+s;break}if(this.offset-r!==s)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?gB(this,s+4,n):this.skip(4)}decodeIHDR(){const s=this._png;s.width=this.readUint32(),s.height=this.readUint32(),s.depth=H$(this.readUint8());const n=this.readUint8();this._colorType=n;let r;switch(n){case Gl.GREYSCALE:r=1;break;case Gl.TRUECOLOUR:r=3;break;case Gl.INDEXED_COLOUR:r=1;break;case Gl.GREYSCALE_ALPHA:r=2;break;case Gl.TRUECOLOUR_ALPHA:r=4;break;case Gl.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==Nv.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const s={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(s)}decodePLTE(s){if(s%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${s}`);const n=s/3;this._hasPalette=!0;const r=[];this._palette=r;for(let i=0;i<n;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(s){this._writingDataChunks=!0;const n=s,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodeFDAT(s){this._writingDataChunks=!0;let n=s,r=this.offset+this.byteOffset;if(r+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodetRNS(s){switch(this._colorType){case Gl.GREYSCALE:case Gl.TRUECOLOUR:{if(s%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${s}`);if(s/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${s/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(s/2);for(let n=0;n<s/2;n++)this._transparency[n]=this.readUint16();break}case Gl.INDEXED_COLOUR:{if(s>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${s} vs ${this._palette.length})`);let n=0;for(;n<s;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Gl.UNKNOWN:case Gl.GREYSCALE_ALPHA:case Gl.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(s){const n=YI(this),r=this.readUint8();if(r!==Nv.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const i=this.readBytes(s-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:y$(i)}}decodepHYs(){const s=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:s,y:n,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let s=0;s<this._numberOfFrames;s++){const n={sequenceNumber:this._frames[s].sequenceNumber,delayNumber:this._frames[s].delayNumber,delayDenominator:this._frames[s].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(s);if(r){if(r.data=yB({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),s===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)n.data=r.data;else{const i=this._apng.frames.at(s-1);this.disposeFrame(r,i,n),this.addFrameDataToCanvas(n,r)}this._apng.frames.push(n)}}return this._apng}disposeFrame(s,n,r){switch(s.disposeOp){case ey.NONE:break;case ey.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let c=0;c<this._png.width;c++){const A=(i*s.width+c)*this._png.channels;for(let u=0;u<this._png.channels;u++)r.data[A+u]=0}break;case ey.PREVIOUS:r.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(s,n){const r=1<<this._png.depth,i=(c,A)=>{const u=((c+n.yOffset)*this._png.width+n.xOffset+A)*this._png.channels,d=(c*n.width+A)*this._png.channels;return{index:u,frameIndex:d}};switch(n.blendOp){case Cv.SOURCE:for(let c=0;c<n.height;c++)for(let A=0;A<n.width;A++){const{index:u,frameIndex:d}=i(c,A);for(let h=0;h<this._png.channels;h++)s.data[u+h]=n.data[d+h]}break;case Cv.OVER:for(let c=0;c<n.height;c++)for(let A=0;A<n.width;A++){const{index:u,frameIndex:d}=i(c,A);for(let h=0;h<this._png.channels;h++){const o=n.data[d+this._png.channels-1]/r,m=h%(this._png.channels-1)===0?1:n.data[d+h],y=Math.floor(o*m+(1-o)*s.data[u+h]);s.data[u+h]+=y}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const s=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==vB.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Bv.NO_INTERLACE)this._png.data=yB({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Bv.ADAM7)this._png.data=B$({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const s=this._inflator.result,n=this._frames.at(-1);n?n.data=s:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:ey.NONE,blendOp:Cv.SOURCE,data:s}),this._inflator=new pB,this._writingDataChunks=!1}}function H$(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var bB;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(bB||(bB={}));function K$(t,s){return new k$(t,s).decode()}var Xn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Ev(){Xn.console&&typeof Xn.console.log=="function"&&Xn.console.log.apply(Xn.console,arguments)}var Pa={log:Ev,warn:function(t){Xn.console&&(typeof Xn.console.warn=="function"?Xn.console.warn.apply(Xn.console,arguments):Ev.call(null,arguments))},error:function(t){Xn.console&&(typeof Xn.console.error=="function"?Xn.console.error.apply(Xn.console,arguments):Ev(t))}};function Tv(t,s,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){sh(r.response,s,n)},r.onerror=function(){Pa.error("could not download file")},r.send()}function jB(t){var s=new XMLHttpRequest;s.open("HEAD",t,!1);try{s.send()}catch{}return s.status>=200&&s.status<=299}function ty(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(s)}}var sh=Xn.saveAs||((typeof window>"u"?"undefined":Ca(window))!=="object"||window!==Xn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,s,n){var r=Xn.URL||Xn.webkitURL,i=document.createElement("a");s=s||t.name||"download",i.download=s,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?jB(i.href)?Tv(t,s,n):ty(i,i.target="_blank"):ty(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){ty(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,s,n){if(s=s||t.name||"download",typeof t=="string")if(jB(t))Tv(t,s,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){ty(r)})}else navigator.msSaveOrOpenBlob((function(i,c){return c===void 0?c={autoBom:!1}:Ca(c)!=="object"&&(Pa.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,n),s)}:function(t,s,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Tv(t,s,n);var i=t.type==="application/octet-stream",c=/constructor/i.test(Xn.HTMLElement)||Xn.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||i&&c)&&(typeof FileReader>"u"?"undefined":Ca(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var o=u.result;o=A?o:o.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=o:location=o,r=null},u.readAsDataURL(t)}else{var d=Xn.URL||Xn.webkitURL,h=d.createObjectURL(t);r?r.location=h:location.href=h,r=null,setTimeout(function(){d.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function XI(t){var s;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,c=n[r].process,A=i.exec(t);A&&(s=c(A),this.r=s[0],this.g=s[1],this.b=s[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),d=this.g.toString(16),h=this.b.toString(16);return u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),"#"+u+d+h}}var Ny=Xn.atob.bind(Xn),wB=Xn.btoa.bind(Xn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Fv(t,s){var n=t[0],r=t[1],i=t[2],c=t[3];n=Po(n,r,i,c,s[0],7,-680876936),c=Po(c,n,r,i,s[1],12,-389564586),i=Po(i,c,n,r,s[2],17,606105819),r=Po(r,i,c,n,s[3],22,-1044525330),n=Po(n,r,i,c,s[4],7,-176418897),c=Po(c,n,r,i,s[5],12,1200080426),i=Po(i,c,n,r,s[6],17,-1473231341),r=Po(r,i,c,n,s[7],22,-45705983),n=Po(n,r,i,c,s[8],7,1770035416),c=Po(c,n,r,i,s[9],12,-1958414417),i=Po(i,c,n,r,s[10],17,-42063),r=Po(r,i,c,n,s[11],22,-1990404162),n=Po(n,r,i,c,s[12],7,1804603682),c=Po(c,n,r,i,s[13],12,-40341101),i=Po(i,c,n,r,s[14],17,-1502002290),n=ko(n,r=Po(r,i,c,n,s[15],22,1236535329),i,c,s[1],5,-165796510),c=ko(c,n,r,i,s[6],9,-1069501632),i=ko(i,c,n,r,s[11],14,643717713),r=ko(r,i,c,n,s[0],20,-373897302),n=ko(n,r,i,c,s[5],5,-701558691),c=ko(c,n,r,i,s[10],9,38016083),i=ko(i,c,n,r,s[15],14,-660478335),r=ko(r,i,c,n,s[4],20,-405537848),n=ko(n,r,i,c,s[9],5,568446438),c=ko(c,n,r,i,s[14],9,-1019803690),i=ko(i,c,n,r,s[3],14,-187363961),r=ko(r,i,c,n,s[8],20,1163531501),n=ko(n,r,i,c,s[13],5,-1444681467),c=ko(c,n,r,i,s[2],9,-51403784),i=ko(i,c,n,r,s[7],14,1735328473),n=Ho(n,r=ko(r,i,c,n,s[12],20,-1926607734),i,c,s[5],4,-378558),c=Ho(c,n,r,i,s[8],11,-2022574463),i=Ho(i,c,n,r,s[11],16,1839030562),r=Ho(r,i,c,n,s[14],23,-35309556),n=Ho(n,r,i,c,s[1],4,-1530992060),c=Ho(c,n,r,i,s[4],11,1272893353),i=Ho(i,c,n,r,s[7],16,-155497632),r=Ho(r,i,c,n,s[10],23,-1094730640),n=Ho(n,r,i,c,s[13],4,681279174),c=Ho(c,n,r,i,s[0],11,-358537222),i=Ho(i,c,n,r,s[3],16,-722521979),r=Ho(r,i,c,n,s[6],23,76029189),n=Ho(n,r,i,c,s[9],4,-640364487),c=Ho(c,n,r,i,s[12],11,-421815835),i=Ho(i,c,n,r,s[15],16,530742520),n=Ko(n,r=Ho(r,i,c,n,s[2],23,-995338651),i,c,s[0],6,-198630844),c=Ko(c,n,r,i,s[7],10,1126891415),i=Ko(i,c,n,r,s[14],15,-1416354905),r=Ko(r,i,c,n,s[5],21,-57434055),n=Ko(n,r,i,c,s[12],6,1700485571),c=Ko(c,n,r,i,s[3],10,-1894986606),i=Ko(i,c,n,r,s[10],15,-1051523),r=Ko(r,i,c,n,s[1],21,-2054922799),n=Ko(n,r,i,c,s[8],6,1873313359),c=Ko(c,n,r,i,s[15],10,-30611744),i=Ko(i,c,n,r,s[6],15,-1560198380),r=Ko(r,i,c,n,s[13],21,1309151649),n=Ko(n,r,i,c,s[4],6,-145523070),c=Ko(c,n,r,i,s[11],10,-1120210379),i=Ko(i,c,n,r,s[2],15,718787259),r=Ko(r,i,c,n,s[9],21,-343485551),t[0]=cu(n,t[0]),t[1]=cu(r,t[1]),t[2]=cu(i,t[2]),t[3]=cu(c,t[3])}function _x(t,s,n,r,i,c){return s=cu(cu(s,t),cu(r,c)),cu(s<<i|s>>>32-i,n)}function Po(t,s,n,r,i,c,A){return _x(s&n|~s&r,t,s,i,c,A)}function ko(t,s,n,r,i,c,A){return _x(s&r|n&~r,t,s,i,c,A)}function Ho(t,s,n,r,i,c,A){return _x(s^n^r,t,s,i,c,A)}function Ko(t,s,n,r,i,c,A){return _x(n^(s|~r),t,s,i,c,A)}function JI(t){var s,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(s=64;s<=t.length;s+=64)Fv(r,z$(t.substring(s-64,s)));t=t.substring(s-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<t.length;s++)i[s>>2]|=t.charCodeAt(s)<<(s%4<<3);if(i[s>>2]|=128<<(s%4<<3),s>55)for(Fv(r,i),s=0;s<16;s++)i[s]=0;return i[14]=8*n,Fv(r,i),r}function z$(t){var s,n=[];for(s=0;s<64;s+=4)n[s>>2]=t.charCodeAt(s)+(t.charCodeAt(s+1)<<8)+(t.charCodeAt(s+2)<<16)+(t.charCodeAt(s+3)<<24);return n}var SB="0123456789abcdef".split("");function V$(t){for(var s="",n=0;n<4;n++)s+=SB[t>>8*n+4&15]+SB[t>>8*n&15];return s}function $$(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function e1(t){return JI(t).map($$).join("")}var G$=(function(t){for(var s=0;s<t.length;s++)t[s]=V$(t[s]);return t.join("")})(JI("hello"))!="5d41402abc4b2a76b9719d911017c592";function cu(t,s){if(G$){var n=(65535&t)+(65535&s);return(t>>16)+(s>>16)+(n>>16)<<16|65535&n}return t+s&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function t1(t,s){var n,r,i,c;if(t!==n){for(var A=(i=t,c=1+(256/t.length|0),new Array(c+1).join(i)),u=[],d=0;d<256;d++)u[d]=d;var h=0;for(d=0;d<256;d++){var o=u[d];h=(h+o+A.charCodeAt(d))%256,u[d]=u[h],u[h]=o}n=t,r=u}else u=r;var m=s.length,y=0,p=0,j="";for(d=0;d<m;d++)p=(p+(o=u[y=(y+1)%256]))%256,u[y]=u[p],u[p]=o,A=u[(u[y]+u[p])%256],j+=String.fromCharCode(s.charCodeAt(d)^A);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var NB={print:4,modify:8,copy:16,"annot-forms":32};function hf(t,s,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(u){if(NB.perm!==void 0)throw new Error("Invalid permission: "+u);i+=NB[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var c=(s+this.padding).substr(0,32),A=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(c,A),this.P=-(1+(255^i)),this.encryptionKey=e1(c+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=t1(this.encryptionKey,this.padding)}function ff(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var s="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);s+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return s}function BB(t){if(Ca(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var s={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");s.hasOwnProperty(n)||(s[n]={});var c=Math.random().toString(35);return s[n][c]=[r,!!i],c},this.unsubscribe=function(n){for(var r in s)if(s[r][n])return delete s[r][n],Object.keys(s[r]).length===0&&delete s[r],!0;return!1},this.publish=function(n){if(s.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var c in s[n]){var A=s[n][c];try{A[0].apply(t,r)}catch(u){Xn.console&&Pa.error("jsPDF PubSub Error",u.message,u)}A[1]&&i.push(c)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return s}}function xm(t){if(!(this instanceof xm))return new xm(t);var s="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&s.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function ZI(t,s){this.gState=t,this.matrix=s,this.id="",this.objectNumber=-1}function au(t,s,n,r,i){if(!(this instanceof au))return new au(t,s,n,r,i);this.type=t==="axial"?2:3,this.coords=s,this.colors=n,ZI.call(this,r,i)}function oh(t,s,n,r,i){if(!(this instanceof oh))return new oh(t,s,n,r,i);this.boundingBox=t,this.xStep=s,this.yStep=n,this.stream="",this.cloneIndex=0,ZI.call(this,r,i)}function bn(t){var s,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],c=arguments[3],A=[],u=1,d=16,h="S",o=null;Ca(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,c=t.compress||t.compressPdf||c,(o=t.encryption||null)!==null&&(o.userPassword=o.userPassword||"",o.ownerPassword=o.ownerPassword||"",o.userPermissions=o.userPermissions||[]),u=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(s=t.precision),t.floatPrecision!==void 0&&(d=t.floatPrecision),h=t.defaultPathOperation||"S"),A=t.filters||(c===!0?["FlateEncode"]:A),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,y={},p={internal:{},__private__:{}};p.__private__.PubSub=BB;var j="1.3",b=p.__private__.getPdfVersion=function(){return j};p.__private__.setPdfVersion=function(V){j=V};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return w};var B=p.__private__.getPageFormat=function(V){return w[V]};i=i||"a4";var L="compat",Q="advanced",k=L;function z(){this.saveGraphicsState(),de(new ys(rt,0,0,-rt,0,Gs()*rt).toString()+" cm"),this.setFontSize(this.getFontSize()/rt),h="n",k=Q}function J(){this.restoreGraphicsState(),h="S",k=L}var $=p.__private__.combineFontStyleAndFontWeight=function(V,ye){if(V=="bold"&&ye=="normal"||V=="bold"&&ye==400||V=="normal"&&ye=="italic"||V=="bold"&&ye=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ye&&(V=ye==400||ye==="normal"?V==="italic"?"italic":"normal":ye!=700&&ye!=="bold"||V!=="normal"?(ye==700?"bold":ye)+""+V:"bold"),V};p.advancedAPI=function(V){var ye=k===L;return ye&&z.call(this),typeof V!="function"||(V(this),ye&&J.call(this)),this},p.compatAPI=function(V){var ye=k===Q;return ye&&J.call(this),typeof V!="function"||(V(this),ye&&z.call(this)),this},p.isAdvancedAPI=function(){return k===Q};var q,X=function(V){if(k!==Q)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},fe=p.roundToPrecision=p.__private__.roundToPrecision=function(V,ye){var He=s||ye;if(isNaN(V)||isNaN(He))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(He).replace(/0+$/,"")};q=p.hpf=p.__private__.hpf=typeof d=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(V,d)}:d==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(V,16)};var ee=p.f2=p.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return fe(V,2)},le=p.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return fe(V,3)},ue=p.scale=p.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return k===L?V*rt:k===Q?V:void 0},te=function(V){return ue((function(ye){return k===L?Gs()-ye:k===Q?ye:void 0})(V))};p.__private__.setPrecision=p.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(s=parseInt(V,10))};var re,ne="00000000000000000000000000000000",oe=p.__private__.getFileId=function(){return ne},se=p.__private__.setFileId=function(V){return ne=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():ne.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),o!==null&&(Jn=new hf(o.userPermissions,o.userPassword,o.ownerPassword,ne)),ne};p.setFileId=function(V){return se(V),this},p.getFileId=function(){return oe()};var xe=p.__private__.convertDateToPDFDate=function(V){var ye=V.getTimezoneOffset(),He=ye<0?"+":"-",it=Math.floor(Math.abs(ye/60)),bt=Math.abs(ye%60),es=[He,we(it),"'",we(bt),"'"].join("");return["D:",V.getFullYear(),we(V.getMonth()+1),we(V.getDate()),we(V.getHours()),we(V.getMinutes()),we(V.getSeconds()),es].join("")},Me=p.__private__.convertPDFDateToDate=function(V){var ye=parseInt(V.substr(2,4),10),He=parseInt(V.substr(6,2),10)-1,it=parseInt(V.substr(8,2),10),bt=parseInt(V.substr(10,2),10),es=parseInt(V.substr(12,2),10),hs=parseInt(V.substr(14,2),10);return new Date(ye,He,it,bt,es,hs,0)},me=p.__private__.setCreationDate=function(V){var ye;if(V===void 0&&(V=new Date),V instanceof Date)ye=xe(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ye=V}return re=ye},Z=p.__private__.getCreationDate=function(V){var ye=re;return V==="jsDate"&&(ye=Me(re)),ye};p.setCreationDate=function(V){return me(V),this},p.getCreationDate=function(V){return Z(V)};var ge,we=p.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},pe=p.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},be=0,je=[],Ne=[],Je=0,Qe=[],pt=[],Te=!1,Ce=Ne;p.__private__.setCustomOutputDestination=function(V){Te=!0,Ce=V};var _e=function(V){Te||(Ce=V)};p.__private__.resetCustomOutputDestination=function(){Te=!1,Ce=Ne};var de=p.__private__.out=function(V){return V=V.toString(),Je+=V.length+1,Ce.push(V),Ce},dt=p.__private__.write=function(V){return de(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},st=p.__private__.getArrayBuffer=function(V){for(var ye=V.length,He=new ArrayBuffer(ye),it=new Uint8Array(He);ye--;)it[ye]=V.charCodeAt(ye);return He},nt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return nt};var at=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(V){return at=k===Q?V/rt:V,this};var Dt,yt=p.__private__.getFontSize=p.getFontSize=function(){return k===L?at:at*rt},qe=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(V){return qe=V,this},p.__private__.getR2L=p.getR2L=function(){return qe};var Tt,ns=p.__private__.setZoomMode=function(V){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))Dt=V;else if(isNaN(V)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');Dt=V}else Dt=parseInt(V,10)};p.__private__.getZoomMode=function(){return Dt};var Ts,vs=p.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Tt=V};p.__private__.getPageMode=function(){return Tt};var Ns=p.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');Ts=V};p.__private__.getLayoutMode=function(){return Ts},p.__private__.setDisplayMode=p.setDisplayMode=function(V,ye,He){return ns(V),Ns(ye),vs(He),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(V){if(Object.keys(et).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[V]},p.__private__.getDocumentProperties=function(){return et},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(V){for(var ye in et)et.hasOwnProperty(ye)&&V[ye]&&(et[ye]=V[ye]);return this},p.__private__.setDocumentProperty=function(V,ye){if(Object.keys(et).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[V]=ye};var De,rt,mt,ls,Ht,Kt={},lt={},Gt=[],Yt={},Cs={},rs={},Is={},on=null,ws=0,St=[],qt=new BB(p),Pt=t.hotfixes||[],gs={},Rs={},Nn=[],ys=function V(ye,He,it,bt,es,hs){if(!(this instanceof V))return new V(ye,He,it,bt,es,hs);isNaN(ye)&&(ye=1),isNaN(He)&&(He=0),isNaN(it)&&(it=0),isNaN(bt)&&(bt=1),isNaN(es)&&(es=0),isNaN(hs)&&(hs=0),this._matrix=[ye,He,it,bt,es,hs]};Object.defineProperty(ys.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(ys.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(ys.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(ys.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(ys.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(ys.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(ys.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(ys.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(ys.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(ys.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(ys.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(ys.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(ys.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ys.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ys.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ys.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ys.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(q).join(V)},ys.prototype.multiply=function(V){var ye=V.sx*this.sx+V.shy*this.shx,He=V.sx*this.shy+V.shy*this.sy,it=V.shx*this.sx+V.sy*this.shx,bt=V.shx*this.shy+V.sy*this.sy,es=V.tx*this.sx+V.ty*this.shx+this.tx,hs=V.tx*this.shy+V.ty*this.sy+this.ty;return new ys(ye,He,it,bt,es,hs)},ys.prototype.decompose=function(){var V=this.sx,ye=this.shy,He=this.shx,it=this.sy,bt=this.tx,es=this.ty,hs=Math.sqrt(V*V+ye*ye),nn=(V/=hs)*He+(ye/=hs)*it;He-=V*nn,it-=ye*nn;var hn=Math.sqrt(He*He+it*it);return nn/=hn,V*(it/=hn)<ye*(He/=hn)&&(V=-V,ye=-ye,nn=-nn,hs=-hs),{scale:new ys(hs,0,0,hn,0,0),translate:new ys(1,0,0,1,bt,es),rotate:new ys(V,ye,-ye,V,0,0),skew:new ys(1,0,nn,1,0,0)}},ys.prototype.toString=function(V){return this.join(" ")},ys.prototype.inversed=function(){var V=this.sx,ye=this.shy,He=this.shx,it=this.sy,bt=this.tx,es=this.ty,hs=1/(V*it-ye*He),nn=it*hs,hn=-ye*hs,_n=-He*hs,Zn=V*hs;return new ys(nn,hn,_n,Zn,-nn*bt-_n*es,-hn*bt-Zn*es)},ys.prototype.applyToPoint=function(V){var ye=V.x*this.sx+V.y*this.shx+this.tx,He=V.x*this.shy+V.y*this.sy+this.ty;return new U(ye,He)},ys.prototype.applyToRectangle=function(V){var ye=this.applyToPoint(V),He=this.applyToPoint(new U(V.x+V.w,V.y+V.h));return new P(ye.x,ye.y,He.x-ye.x,He.y-ye.y)},ys.prototype.clone=function(){var V=this.sx,ye=this.shy,He=this.shx,it=this.sy,bt=this.tx,es=this.ty;return new ys(V,ye,He,it,bt,es)},p.Matrix=ys;var Ln=p.matrixMult=function(V,ye){return ye.multiply(V)},Zs=new ys(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Zs;var En=function(V,ye){if(!Cs[V]){var He=(ye instanceof au?"Sh":"P")+(Object.keys(Yt).length+1).toString(10);ye.id=He,Cs[V]=He,Yt[He]=ye,qt.publish("addPattern",ye)}};p.ShadingPattern=au,p.TilingPattern=oh,p.addShadingPattern=function(V,ye){return X("addShadingPattern()"),En(V,ye),this},p.beginTilingPattern=function(V){X("beginTilingPattern()"),ae(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},p.endTilingPattern=function(V,ye){X("endTilingPattern()"),ye.stream=pt[ge].join(`
`),En(V,ye),qt.publish("endTilingPattern",ye),Nn.pop().restore()};var Ls,Bs=p.__private__.newObject=function(){var V=Ms();return Os(V,!0),V},Ms=p.__private__.newObjectDeferred=function(){return be++,je[be]=function(){return Je},be},Os=function(V,ye){return ye=typeof ye=="boolean"&&ye,je[V]=Je,ye&&de(V+" 0 obj"),V},ot=p.__private__.newAdditionalObject=function(){var V={objId:Ms(),content:""};return Qe.push(V),V},Rt=Ms(),Mt=Ms(),kt=p.__private__.decodeColorString=function(V){var ye=V.split(" ");if(ye.length!==2||ye[1]!=="g"&&ye[1]!=="G")ye.length!==5||ye[4]!=="k"&&ye[4]!=="K"||(ye=[(1-ye[0])*(1-ye[3]),(1-ye[1])*(1-ye[3]),(1-ye[2])*(1-ye[3]),"r"]);else{var He=parseFloat(ye[0]);ye=[He,He,He,"r"]}for(var it="#",bt=0;bt<3;bt++)it+=("0"+Math.floor(255*parseFloat(ye[bt])).toString(16)).slice(-2);return it},fs=p.__private__.encodeColorString=function(V){var ye;typeof V=="string"&&(V={ch1:V});var He=V.ch1,it=V.ch2,bt=V.ch3,es=V.ch4,hs=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof He=="string"&&He.charAt(0)!=="#"){var nn=new XI(He);if(nn.ok)He=nn.toHex();else if(!/^\d*\.?\d*$/.test(He))throw new Error('Invalid color "'+He+'" passed to jsPDF.encodeColorString.')}if(typeof He=="string"&&/^#[0-9A-Fa-f]{3}$/.test(He)&&(He="#"+He[1]+He[1]+He[2]+He[2]+He[3]+He[3]),typeof He=="string"&&/^#[0-9A-Fa-f]{6}$/.test(He)){var hn=parseInt(He.substr(1),16);He=hn>>16&255,it=hn>>8&255,bt=255&hn}if(it===void 0||es===void 0&&He===it&&it===bt)ye=typeof He=="string"?He+" "+hs[0]:V.precision===2?ee(He/255)+" "+hs[0]:le(He/255)+" "+hs[0];else if(es===void 0||Ca(es)==="object"){if(es&&!isNaN(es.a)&&es.a===0)return["1.","1.","1.",hs[1]].join(" ");ye=typeof He=="string"?[He,it,bt,hs[1]].join(" "):V.precision===2?[ee(He/255),ee(it/255),ee(bt/255),hs[1]].join(" "):[le(He/255),le(it/255),le(bt/255),hs[1]].join(" ")}else ye=typeof He=="string"?[He,it,bt,es,hs[2]].join(" "):V.precision===2?[ee(He),ee(it),ee(bt),ee(es),hs[2]].join(" "):[le(He),le(it),le(bt),le(es),hs[2]].join(" ");return ye},ms=p.__private__.getFilters=function(){return A},Ds=p.__private__.putStream=function(V){var ye=(V=V||{}).data||"",He=V.filters||ms(),it=V.alreadyAppliedFilters||[],bt=V.addLength1||!1,es=ye.length,hs=V.objectId,nn=function(pi){return pi};if(o!==null&&hs===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");o!==null&&(nn=Jn.encryptor(hs,0));var hn={};He===!0&&(He=["FlateEncode"]);var _n=V.additionalKeyValues||[],Zn=(hn=bn.API.processDataByFilters!==void 0?bn.API.processDataByFilters(ye,He):{data:ye,reverseChain:[]}).reverseChain+(Array.isArray(it)?it.join(" "):it.toString());if(hn.data.length!==0&&(_n.push({key:"Length",value:hn.data.length}),bt===!0&&_n.push({key:"Length1",value:es})),Zn.length!=0)if(Zn.split("/").length-1==1)_n.push({key:"Filter",value:Zn});else{_n.push({key:"Filter",value:"["+Zn+"]"});for(var Fr=0;Fr<_n.length;Fr+=1)if(_n[Fr].key==="DecodeParms"){for(var Ra=[],qa=0;qa<hn.reverseChain.split("/").length-1;qa+=1)Ra.push("null");Ra.push(_n[Fr].value),_n[Fr].value="["+Ra.join(" ")+"]"}}de("<<");for(var Jr=0;Jr<_n.length;Jr++)de("/"+_n[Jr].key+" "+_n[Jr].value);de(">>"),hn.data.length!==0&&(de("stream"),de(nn(hn.data)),de("endstream"))},js=p.__private__.putPage=function(V){var ye=V.number,He=V.data,it=V.objId,bt=V.contentsObjId;Os(it,!0),de("<</Type /Page"),de("/Parent "+V.rootDictionaryObjId+" 0 R"),de("/Resources "+V.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(q(V.mediaBox.bottomLeftX))+" "+parseFloat(q(V.mediaBox.bottomLeftY))+" "+q(V.mediaBox.topRightX)+" "+q(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&de("/CropBox ["+q(V.cropBox.bottomLeftX)+" "+q(V.cropBox.bottomLeftY)+" "+q(V.cropBox.topRightX)+" "+q(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&de("/BleedBox ["+q(V.bleedBox.bottomLeftX)+" "+q(V.bleedBox.bottomLeftY)+" "+q(V.bleedBox.topRightX)+" "+q(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&de("/TrimBox ["+q(V.trimBox.bottomLeftX)+" "+q(V.trimBox.bottomLeftY)+" "+q(V.trimBox.topRightX)+" "+q(V.trimBox.topRightY)+"]"),V.artBox!==null&&de("/ArtBox ["+q(V.artBox.bottomLeftX)+" "+q(V.artBox.bottomLeftY)+" "+q(V.artBox.topRightX)+" "+q(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&de("/UserUnit "+V.userUnit),qt.publish("putPage",{objId:it,pageContext:St[ye],pageNumber:ye,page:He}),de("/Contents "+bt+" 0 R"),de(">>"),de("endobj");var es=He.join(`
`);return k===Q&&(es+=`
Q`),Os(bt,!0),Ds({data:es,filters:ms(),objectId:bt}),de("endobj"),it},Lt=p.__private__.putPages=function(){var V,ye,He=[];for(V=1;V<=ws;V++)St[V].objId=Ms(),St[V].contentsObjId=Ms();for(V=1;V<=ws;V++)He.push(js({number:V,data:pt[V],objId:St[V].objId,contentsObjId:St[V].contentsObjId,mediaBox:St[V].mediaBox,cropBox:St[V].cropBox,bleedBox:St[V].bleedBox,trimBox:St[V].trimBox,artBox:St[V].artBox,userUnit:St[V].userUnit,rootDictionaryObjId:Rt,resourceDictionaryObjId:Mt}));Os(Rt,!0),de("<</Type /Pages");var it="/Kids [";for(ye=0;ye<ws;ye++)it+=He[ye]+" 0 R ";de(it+"]"),de("/Count "+ws),de(">>"),de("endobj"),qt.publish("postPutPages")},Hs=function(V){qt.publish("putFont",{font:V,out:de,newObject:Bs,putStream:Ds}),V.isAlreadyPutted!==!0&&(V.objectNumber=Bs(),de("<<"),de("/Type /Font"),de("/BaseFont /"+ff(V.postScriptName)),de("/Subtype /Type1"),typeof V.encoding=="string"&&de("/Encoding /"+V.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},Wr=function(V){V.objectNumber=Bs();var ye=[];ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Form"}),ye.push({key:"BBox",value:"["+[q(V.x),q(V.y),q(V.x+V.width),q(V.y+V.height)].join(" ")+"]"}),ye.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var He=V.pages[1].join(`
`);Ds({data:He,additionalKeyValues:ye,objectId:V.objectNumber}),de("endobj")},sr=function(V,ye){ye||(ye=21);var He=Bs(),it=(function(hs,nn){var hn,_n=[],Zn=1/(nn-1);for(hn=0;hn<1;hn+=Zn)_n.push(hn);if(_n.push(1),hs[0].offset!=0){var Fr={offset:0,color:hs[0].color};hs.unshift(Fr)}if(hs[hs.length-1].offset!=1){var Ra={offset:1,color:hs[hs.length-1].color};hs.push(Ra)}for(var qa="",Jr=0,pi=0;pi<_n.length;pi++){for(hn=_n[pi];hn>hs[Jr+1].offset;)Jr++;var si=hs[Jr].offset,Bi=(hn-si)/(hs[Jr+1].offset-si),Rl=hs[Jr].color,Yo=hs[Jr+1].color;qa+=pe(Math.round((1-Bi)*Rl[0]+Bi*Yo[0]).toString(16))+pe(Math.round((1-Bi)*Rl[1]+Bi*Yo[1]).toString(16))+pe(Math.round((1-Bi)*Rl[2]+Bi*Yo[2]).toString(16))}return qa.trim()})(V.colors,ye),bt=[];bt.push({key:"FunctionType",value:"0"}),bt.push({key:"Domain",value:"[0.0 1.0]"}),bt.push({key:"Size",value:"["+ye+"]"}),bt.push({key:"BitsPerSample",value:"8"}),bt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),bt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ds({data:it,additionalKeyValues:bt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:He}),de("endobj"),V.objectNumber=Bs(),de("<< /ShadingType "+V.type),de("/ColorSpace /DeviceRGB");var es="/Coords ["+q(parseFloat(V.coords[0]))+" "+q(parseFloat(V.coords[1]))+" ";V.type===2?es+=q(parseFloat(V.coords[2]))+" "+q(parseFloat(V.coords[3])):es+=q(parseFloat(V.coords[2]))+" "+q(parseFloat(V.coords[3]))+" "+q(parseFloat(V.coords[4]))+" "+q(parseFloat(V.coords[5])),de(es+="]"),V.matrix&&de("/Matrix ["+V.matrix.toString()+"]"),de("/Function "+He+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},ds=function(V,ye){var He=Ms(),it=Bs();ye.push({resourcesOid:He,objectOid:it}),V.objectNumber=it;var bt=[];bt.push({key:"Type",value:"/Pattern"}),bt.push({key:"PatternType",value:"1"}),bt.push({key:"PaintType",value:"1"}),bt.push({key:"TilingType",value:"1"}),bt.push({key:"BBox",value:"["+V.boundingBox.map(q).join(" ")+"]"}),bt.push({key:"XStep",value:q(V.xStep)}),bt.push({key:"YStep",value:q(V.yStep)}),bt.push({key:"Resources",value:He+" 0 R"}),V.matrix&&bt.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),Ds({data:V.stream,additionalKeyValues:bt,objectId:V.objectNumber}),de("endobj")},mn=function(V){for(var ye in V.objectNumber=Bs(),de("<<"),V)switch(ye){case"opacity":de("/ca "+ee(V[ye]));break;case"stroke-opacity":de("/CA "+ee(V[ye]))}de(">>"),de("endobj")},cr=function(V){Os(V.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ye in de("/Font <<"),Kt)Kt.hasOwnProperty(ye)&&(m===!1||m===!0&&y.hasOwnProperty(ye))&&de("/"+ye+" "+Kt[ye].objectNumber+" 0 R");de(">>")})(),(function(){if(Object.keys(Yt).length>0){for(var ye in de("/Shading <<"),Yt)Yt.hasOwnProperty(ye)&&Yt[ye]instanceof au&&Yt[ye].objectNumber>=0&&de("/"+ye+" "+Yt[ye].objectNumber+" 0 R");qt.publish("putShadingPatternDict"),de(">>")}})(),(function(ye){if(Object.keys(Yt).length>0){for(var He in de("/Pattern <<"),Yt)Yt.hasOwnProperty(He)&&Yt[He]instanceof p.TilingPattern&&Yt[He].objectNumber>=0&&Yt[He].objectNumber<ye&&de("/"+He+" "+Yt[He].objectNumber+" 0 R");qt.publish("putTilingPatternDict"),de(">>")}})(V.objectOid),(function(){if(Object.keys(rs).length>0){var ye;for(ye in de("/ExtGState <<"),rs)rs.hasOwnProperty(ye)&&rs[ye].objectNumber>=0&&de("/"+ye+" "+rs[ye].objectNumber+" 0 R");qt.publish("putGStateDict"),de(">>")}})(),(function(){for(var ye in de("/XObject <<"),gs)gs.hasOwnProperty(ye)&&gs[ye].objectNumber>=0&&de("/"+ye+" "+gs[ye].objectNumber+" 0 R");qt.publish("putXobjectDict"),de(">>")})(),de(">>"),de("endobj")},nr=function(V){lt[V.fontName]=lt[V.fontName]||{},lt[V.fontName][V.fontStyle]=V.id},sn=function(V,ye,He,it,bt){var es={id:"F"+(Object.keys(Kt).length+1).toString(10),postScriptName:V,fontName:ye,fontStyle:He,encoding:it,isStandardFont:bt||!1,metadata:{}};return qt.publish("addFont",{font:es,instance:this}),Kt[es.id]=es,nr(es),es.id},gn=p.__private__.pdfEscape=p.pdfEscape=function(V,ye){return(function(He,it){var bt,es,hs,nn,hn,_n,Zn,Fr,Ra;if(hs=(it=it||{}).sourceEncoding||"Unicode",hn=it.outputEncoding,(it.autoencode||hn)&&Kt[De].metadata&&Kt[De].metadata[hs]&&Kt[De].metadata[hs].encoding&&(nn=Kt[De].metadata[hs].encoding,!hn&&Kt[De].encoding&&(hn=Kt[De].encoding),!hn&&nn.codePages&&(hn=nn.codePages[0]),typeof hn=="string"&&(hn=nn[hn]),hn)){for(Zn=!1,_n=[],bt=0,es=He.length;bt<es;bt++)(Fr=hn[He.charCodeAt(bt)])?_n.push(String.fromCharCode(Fr)):_n.push(He[bt]),_n[bt].charCodeAt(0)>>8&&(Zn=!0);He=_n.join("")}for(bt=He.length;Zn===void 0&&bt!==0;)He.charCodeAt(bt-1)>>8&&(Zn=!0),bt--;if(!Zn)return He;for(_n=it.noBOM?[]:[254,255],bt=0,es=He.length;bt<es;bt++){if((Ra=(Fr=He.charCodeAt(bt))>>8)>>8)throw new Error("Character at position "+bt+" of string '"+He+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");_n.push(Ra),_n.push(Fr-(Ra<<8))}return String.fromCharCode.apply(void 0,_n)})(V,ye).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qn=p.__private__.beginPage=function(V){pt[++ws]=[],St[ws]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},ra(ws),_e(pt[ge])},Yr=function(V,ye){var He,it,bt;switch(n=ye||n,typeof V=="string"&&(He=B(V.toLowerCase()),Array.isArray(He)&&(it=He[0],bt=He[1])),Array.isArray(V)&&(it=V[0]*rt,bt=V[1]*rt),isNaN(it)&&(it=i[0],bt=i[1]),(it>14400||bt>14400)&&(Pa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),it=Math.min(14400,it),bt=Math.min(14400,bt)),i=[it,bt],n.substr(0,1)){case"l":bt>it&&(i=[bt,it]);break;case"p":it>bt&&(i=[bt,it])}qn(i),Pe(vt),de(kn),I!==0&&de(I+" J"),F!==0&&de(F+" j"),qt.publish("addPage",{pageNumber:ws})},Gr=function(V){V>0&&V<=ws&&(pt.splice(V,1),St.splice(V,1),ws--,ge>ws&&(ge=ws),this.setPage(ge))},ra=function(V){V>0&&V<=ws&&(ge=V)},gr=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return pt.length-1},Ks=function(V,ye,He){var it,bt=void 0;return He=He||{},V=V!==void 0?V:Kt[De].fontName,ye=ye!==void 0?ye:Kt[De].fontStyle,it=V.toLowerCase(),lt[it]!==void 0&&lt[it][ye]!==void 0?bt=lt[it][ye]:lt[V]!==void 0&&lt[V][ye]!==void 0?bt=lt[V][ye]:He.disableWarning===!1&&Pa.warn("Unable to look up font label for font '"+V+"', '"+ye+"'. Refer to getFontList() for available fonts."),bt||He.noFallback||(bt=lt.times[ye])==null&&(bt=lt.times.normal),bt},en=p.__private__.putInfo=function(){var V=Bs(),ye=function(it){return it};for(var He in o!==null&&(ye=Jn.encryptor(V,0)),de("<<"),de("/Producer ("+gn(ye("jsPDF "+bn.version))+")"),et)et.hasOwnProperty(He)&&et[He]&&de("/"+He.substr(0,1).toUpperCase()+He.substr(1)+" ("+gn(ye(et[He]))+")");de("/CreationDate ("+gn(ye(re))+")"),de(">>"),de("endobj")},Es=p.__private__.putCatalog=function(V){var ye=(V=V||{}).rootDictionaryObjId||Rt;switch(Bs(),de("<<"),de("/Type /Catalog"),de("/Pages "+ye+" 0 R"),Dt||(Dt="fullwidth"),Dt){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var He=""+Dt;He.substr(He.length-1)==="%"&&(Dt=parseInt(Dt)/100),typeof Dt=="number"&&de("/OpenAction [3 0 R /XYZ null null "+ee(Dt)+"]")}switch(Ts||(Ts="continuous"),Ts){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}Tt&&de("/PageMode /"+Tt),qt.publish("putCatalog"),de(">>"),de("endobj")},rn=p.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(be+1)),de("/Root "+be+" 0 R"),de("/Info "+(be-1)+" 0 R"),o!==null&&de("/Encrypt "+Jn.oid+" 0 R"),de("/ID [ <"+ne+"> <"+ne+"> ]"),de(">>")},Ps=p.__private__.putHeader=function(){de("%PDF-"+j),de("%")},wr=p.__private__.putXRef=function(){var V="0000000000";de("xref"),de("0 "+(be+1)),de("0000000000 65535 f ");for(var ye=1;ye<=be;ye++)typeof je[ye]=="function"?de((V+je[ye]()).slice(-10)+" 00000 n "):je[ye]!==void 0?de((V+je[ye]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},Ze=p.__private__.buildDocument=function(){var V;be=0,Je=0,Ne=[],je=[],Qe=[],Rt=Ms(),Mt=Ms(),_e(Ne),qt.publish("buildDocument"),Ps(),Lt(),(function(){qt.publish("putAdditionalObjects");for(var He=0;He<Qe.length;He++){var it=Qe[He];Os(it.objId,!0),de(it.content),de("endobj")}qt.publish("postPutAdditionalObjects")})(),V=[],(function(){for(var He in Kt)Kt.hasOwnProperty(He)&&(m===!1||m===!0&&y.hasOwnProperty(He))&&Hs(Kt[He])})(),(function(){var He;for(He in rs)rs.hasOwnProperty(He)&&mn(rs[He])})(),(function(){for(var He in gs)gs.hasOwnProperty(He)&&Wr(gs[He])})(),(function(He){var it;for(it in Yt)Yt.hasOwnProperty(it)&&(Yt[it]instanceof au?sr(Yt[it]):Yt[it]instanceof oh&&ds(Yt[it],He))})(V),qt.publish("putResources"),V.forEach(cr),cr({resourcesOid:Mt,objectOid:Number.MAX_SAFE_INTEGER}),qt.publish("postPutResources"),o!==null&&(Jn.oid=Bs(),de("<<"),de("/Filter /Standard"),de("/V "+Jn.v),de("/R "+Jn.r),de("/U <"+Jn.toHexString(Jn.U)+">"),de("/O <"+Jn.toHexString(Jn.O)+">"),de("/P "+Jn.P),de(">>"),de("endobj")),en(),Es();var ye=Je;return wr(),rn(),de("startxref"),de(""+ye),de("%%EOF"),_e(pt[ge]),Ne.join(`
`)},us=p.__private__.getBlob=function(V){return new Blob([st(V)],{type:"application/pdf"})},is=p.output=p.__private__.output=(Ls=function(V,ye){switch(typeof(ye=ye||{})=="string"?ye={filename:ye}:ye.filename=ye.filename||"generated.pdf",V){case void 0:return Ze();case"save":p.save(ye.filename);break;case"arraybuffer":return st(Ze());case"blob":return us(Ze());case"bloburi":case"bloburl":if(Xn.URL!==void 0&&typeof Xn.URL.createObjectURL=="function")return Xn.URL&&Xn.URL.createObjectURL(us(Ze()))||void 0;Pa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var He="",it=Ze();try{He=wB(it)}catch{He=wB(unescape(encodeURIComponent(it)))}return"data:application/pdf;filename="+ye.filename+";base64,"+He;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Xn)==="[object Window]"){var bt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",es=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ye.pdfObjectUrl&&(bt=ye.pdfObjectUrl,es="");var hs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+bt+'"'+es+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ye)+");<\/script></body></html>",nn=Xn.open();return nn!==null&&nn.document.write(hs),nn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Xn)==="[object Window]"){var hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ye.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ye.filename+'" width="500px" height="400px" /></body></html>',_n=Xn.open();if(_n!==null){_n.document.write(hn);var Zn=this;_n.document.documentElement.querySelector("#pdfViewer").onload=function(){_n.document.title=ye.filename,_n.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Zn.output("bloburl"))}}return _n}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Xn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Fr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ye)+'"></iframe></body></html>',Ra=Xn.open();if(Ra!==null&&(Ra.document.write(Fr),Ra.document.title=ye.filename),Ra||typeof safari>"u")return Ra;break;case"datauri":case"dataurl":return Xn.document.location.href=this.output("datauristring",ye);default:return null}},Ls.foo=function(){try{return Ls.apply(this,arguments)}catch(He){var V=He.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var ye="Error in function "+V.split(`
`)[0].split("<")[0]+": "+He.message;if(!Xn.console)throw new Error(ye);Xn.console.error(ye,He),Xn.alert&&alert(ye)}},Ls.foo.bar=Ls,Ls.foo),yn=function(V){return Array.isArray(Pt)===!0&&Pt.indexOf(V)>-1};switch(r){case"pt":rt=1;break;case"mm":rt=72/25.4;break;case"cm":rt=72/2.54;break;case"in":rt=72;break;case"px":rt=yn("px_scaling")==1?.75:96/72;break;case"pc":case"em":rt=12;break;case"ex":rt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);rt=r}var Jn=null;me(),se();var zn=p.__private__.getPageInfo=p.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:St[V].objId,pageNumber:V,pageContext:St[V]}},ua=p.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ye in St)if(St[ye].objId===V)break;return zn(ye)},ga=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:St[ge].objId,pageNumber:ge,pageContext:St[ge]}};p.addPage=function(){return Yr.apply(this,arguments),this},p.setPage=function(){return ra.apply(this,arguments),_e.call(this,pt[ge]),this},p.insertPage=function(V){return this.addPage(),this.movePage(ge,V),this},p.movePage=function(V,ye){var He,it;if(V>ye){He=pt[V],it=St[V];for(var bt=V;bt>ye;bt--)pt[bt]=pt[bt-1],St[bt]=St[bt-1];pt[ye]=He,St[ye]=it,this.setPage(ye)}else if(V<ye){He=pt[V],it=St[V];for(var es=V;es<ye;es++)pt[es]=pt[es+1],St[es]=St[es+1];pt[ye]=He,St[ye]=it,this.setPage(ye)}return this},p.deletePage=function(){return Gr.apply(this,arguments),this},p.__private__.text=p.text=function(V,ye,He,it,bt){var es,hs,nn,hn,_n,Zn,Fr,Ra,qa,Jr=(it=it||{}).scope||this;if(typeof V=="number"&&typeof ye=="number"&&(typeof He=="string"||Array.isArray(He))){var pi=He;He=ye,ye=V,V=pi}if(arguments[3]instanceof ys==0?(nn=arguments[4],hn=arguments[5],Ca(Fr=arguments[3])==="object"&&Fr!==null||(typeof nn=="string"&&(hn=nn,nn=null),typeof Fr=="string"&&(hn=Fr,Fr=null),typeof Fr=="number"&&(nn=Fr,Fr=null),it={flags:Fr,angle:nn,align:hn})):(X("The transform parameter of text() with a Matrix value"),qa=bt),isNaN(ye)||isNaN(He)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return Jr;var si,Bi="",Rl=typeof it.lineHeightFactor=="number"?it.lineHeightFactor:Xe,Yo=Jr.internal.scaleFactor;function Ol(Lr){return Lr=Lr.split("	").join(Array(it.TabLen||9).join(" ")),gn(Lr,Fr)}function kd(Lr){for(var Ir,fa=Lr.concat(),Pr=[],sl=fa.length;sl--;)typeof(Ir=fa.shift())=="string"?Pr.push(Ir):Array.isArray(Lr)&&(Ir.length===1||Ir[1]===void 0&&Ir[2]===void 0)?Pr.push(Ir[0]):Pr.push([Ir[0],Ir[1],Ir[2]]);return Pr}function rd(Lr,Ir){var fa;if(typeof Lr=="string")fa=Ir(Lr)[0];else if(Array.isArray(Lr)){for(var Pr,sl,nl=Lr.concat(),Rc=[],sc=nl.length;sc--;)typeof(Pr=nl.shift())=="string"?Rc.push(Ir(Pr)[0]):Array.isArray(Pr)&&typeof Pr[0]=="string"&&(sl=Ir(Pr[0],Pr[1],Pr[2]),Rc.push([sl[0],sl[1],sl[2]]));fa=Rc}return fa}var jo=!1,wo=!0;if(typeof V=="string")jo=!0;else if(Array.isArray(V)){var Zl=V.concat();hs=[];for(var io,Oa=Zl.length;Oa--;)(typeof(io=Zl.shift())!="string"||Array.isArray(io)&&typeof io[0]!="string")&&(wo=!1);jo=wo}if(jo===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var yr=at/Jr.internal.scaleFactor,ec=yr*(Rl-1);switch(it.baseline){case"bottom":He-=ec;break;case"top":He+=yr-ec;break;case"hanging":He+=yr-2*ec;break;case"middle":He+=yr/2-ec}if((Zn=it.maxWidth||0)>0&&(typeof V=="string"?V=Jr.splitTextToSize(V,Zn):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(Lr,Ir){return Lr.concat(Jr.splitTextToSize(Ir,Zn))},[]))),es={text:V,x:ye,y:He,options:it,mutex:{pdfEscape:gn,activeFontKey:De,fonts:Kt,activeFontSize:at}},qt.publish("preProcessText",es),V=es.text,nn=(it=es.options).angle,qa instanceof ys==0&&nn&&typeof nn=="number"){nn*=Math.PI/180,it.rotationDirection===0&&(nn=-nn),k===Q&&(nn=-nn);var tc=Math.cos(nn),Xo=Math.sin(nn);qa=new ys(tc,Xo,-Xo,tc,0,0)}else nn&&nn instanceof ys&&(qa=nn);k!==Q||qa||(qa=Zs),(_n=it.charSpace||N)!==void 0&&(Bi+=q(ue(_n))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ra=it.horizontalScale)!==void 0&&(Bi+=q(100*Ra)+` Tz
`),it.lang;var ni=-1,vi=it.renderingMode!==void 0?it.renderingMode:it.stroke,ad=Jr.internal.getCurrentPageInfo().pageContext;switch(vi){case 0:case!1:case"fill":ni=0;break;case 1:case!0:case"stroke":ni=1;break;case 2:case"fillThenStroke":ni=2;break;case 3:case"invisible":ni=3;break;case 4:case"fillAndAddForClipping":ni=4;break;case 5:case"strokeAndAddPathForClipping":ni=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ni=6;break;case 7:case"addToPathForClipping":ni=7}var So=ad.usedRenderingMode!==void 0?ad.usedRenderingMode:-1;ni!==-1?Bi+=ni+` Tr
`:So!==-1&&(Bi+=`0 Tr
`),ni!==-1&&(ad.usedRenderingMode=ni),hn=it.align||"left";var Ur,No=at*Rl,va=Jr.internal.pageSize.getWidth(),Ec=Kt[De];_n=it.charSpace||N,Zn=it.maxWidth||0,Fr=Object.assign({autoencode:!0,noBOM:!0},it.flags);var bi=[],Bo=function(Lr){return Jr.getStringUnitWidth(Lr,{font:Ec,charSpace:_n,fontSize:at,doKerning:!1})*at/Yo};if(Object.prototype.toString.call(V)==="[object Array]"){var lr;hs=kd(V),hn!=="left"&&(Ur=hs.map(Bo));var _i,Jo=0;if(hn==="right"){ye-=Ur[0],V=[],Oa=hs.length;for(var Zo=0;Zo<Oa;Zo++)Zo===0?(_i=Dn(ye),lr=ps(He)):(_i=ue(Jo-Ur[Zo]),lr=-No),V.push([hs[Zo],_i,lr]),Jo=Ur[Zo]}else if(hn==="center"){ye-=Ur[0]/2,V=[],Oa=hs.length;for(var cl=0;cl<Oa;cl++)cl===0?(_i=Dn(ye),lr=ps(He)):(_i=ue((Jo-Ur[cl])/2),lr=-No),V.push([hs[cl],_i,lr]),Jo=Ur[cl]}else if(hn==="left"){V=[],Oa=hs.length;for(var Ul=0;Ul<Oa;Ul++)V.push(hs[Ul])}else if(hn==="justify"&&Ec.encoding==="Identity-H"){V=[],Oa=hs.length,Zn=Zn!==0?Zn:va;for(var Tc=0,Ha=0;Ha<Oa;Ha++)if(lr=Ha===0?ps(He):-No,_i=Ha===0?Dn(ye):Tc,Ha<Oa-1){var qi=ue((Zn-Ur[Ha])/(hs[Ha].split(" ").length-1)),Ci=hs[Ha].split(" ");V.push([Ci[0]+" ",_i,lr]),Tc=0;for(var Ei=1;Ei<Ci.length;Ei++){var Sr=(Bo(Ci[Ei-1]+" "+Ci[Ei])-Bo(Ci[Ei]))*Yo+qi;Ei==Ci.length-1?V.push([Ci[Ei],Sr,0]):V.push([Ci[Ei]+" ",Sr,0]),Tc-=Sr}}else V.push([hs[Ha],_i,lr]);V.push(["",Tc,0])}else{if(hn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],Oa=hs.length,Zn=Zn!==0?Zn:va,Ha=0;Ha<Oa;Ha++){lr=Ha===0?ps(He):-No,_i=Ha===0?Dn(ye):0;var Mi=hs[Ha].split(" ").length-1,Fc=Mi>0?(Zn-Ur[Ha])/Mi:0;Ha<Oa-1?bi.push(q(ue(Fc))):bi.push(0),V.push([hs[Ha],_i,lr])}}}(typeof it.R2L=="boolean"?it.R2L:qe)===!0&&(V=rd(V,function(Lr,Ir,fa){return[Lr.split("").reverse().join(""),Ir,fa]})),es={text:V,x:ye,y:He,options:it,mutex:{pdfEscape:gn,activeFontKey:De,fonts:Kt,activeFontSize:at}},qt.publish("postProcessText",es),V=es.text,si=es.mutex.isHex||!1;var Ic=Kt[De].encoding;Ic!=="WinAnsiEncoding"&&Ic!=="StandardEncoding"||(V=rd(V,function(Lr,Ir,fa){return[Ol(Lr),Ir,fa]})),hs=kd(V),V=[];for(var el,dl,Al,tl=Array.isArray(hs[0])?1:0,Wa="",Ll=function(Lr,Ir,fa){var Pr="";return fa instanceof ys?(fa=typeof it.angle=="number"?Ln(fa,new ys(1,0,0,1,Lr,Ir)):Ln(new ys(1,0,0,1,Lr,Ir),fa),k===Q&&(fa=Ln(new ys(1,0,0,-1,0,0),fa)),Pr=fa.join(" ")+` Tm
`):Pr=q(Lr)+" "+q(Ir)+` Td
`,Pr},Pi=0;Pi<hs.length;Pi++){switch(Wa="",tl){case 1:Al=(si?"<":"(")+hs[Pi][0]+(si?">":")"),el=parseFloat(hs[Pi][1]),dl=parseFloat(hs[Pi][2]);break;case 0:Al=(si?"<":"(")+hs[Pi]+(si?">":")"),el=Dn(ye),dl=ps(He)}bi!==void 0&&bi[Pi]!==void 0&&(Wa=bi[Pi]+` Tw
`),Pi===0?V.push(Wa+Ll(el,dl,qa)+Al):tl===0?V.push(Wa+Al):tl===1&&V.push(Wa+Ll(el,dl,qa)+Al)}V=tl===0?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Wi=`BT
/`;return Wi+=De+" "+at+` Tf
`,Wi+=q(at*Rl)+` TL
`,Wi+=Xr+`
`,Wi+=Bi,Wi+=V,de(Wi+="ET"),y[De]=!0,Jr};var ha=p.__private__.clip=p.clip=function(V){return de(V==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return ha("evenodd")},p.__private__.discardPath=p.discardPath=function(){return de("n"),this};var Tr=p.__private__.isValidStyle=function(V){var ye=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(ye=!0),ye};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(V){return Tr(V)&&(h=V),this};var $a=p.__private__.getStyle=p.getStyle=function(V){var ye=h;switch(V){case"D":case"S":ye="S";break;case"F":ye="f";break;case"FD":case"DF":ye="B";break;case"f":case"f*":case"B":case"B*":ye=V}return ye},ya=p.close=function(){return de("h"),this};p.stroke=function(){return de("S"),this},p.fill=function(V){return rr("f",V),this},p.fillEvenOdd=function(V){return rr("f*",V),this},p.fillStroke=function(V){return rr("B",V),this},p.fillStrokeEvenOdd=function(V){return rr("B*",V),this};var rr=function(V,ye){Ca(ye)==="object"?fi(ye,V):de(V)},oa=function(V){V===null||k===Q&&V===void 0||(V=$a(V),de(V))};function Ga(V,ye,He,it,bt){var es=new oh(ye||this.boundingBox,He||this.xStep,it||this.yStep,this.gState,bt||this.matrix);es.stream=this.stream;var hs=V+"$$"+this.cloneIndex+++"$$";return En(hs,es),es}var fi=function(V,ye){var He=Cs[V.key],it=Yt[He];if(it instanceof au)de("q"),de(xa(ye)),it.gState&&p.setGState(it.gState),de(V.matrix.toString()+" cm"),de("/"+He+" sh"),de("Q");else if(it instanceof oh){var bt=new ys(1,0,0,-1,0,Gs());V.matrix&&(bt=bt.multiply(V.matrix||Zs),He=Ga.call(it,V.key,V.boundingBox,V.xStep,V.yStep,bt).id),de("q"),de("/Pattern cs"),de("/"+He+" scn"),it.gState&&p.setGState(it.gState),de(ye),de("Q")}},xa=function(V){switch(V){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ie=p.moveTo=function(V,ye){return de(q(ue(V))+" "+q(te(ye))+" m"),this},G=p.lineTo=function(V,ye){return de(q(ue(V))+" "+q(te(ye))+" l"),this},ve=p.curveTo=function(V,ye,He,it,bt,es){return de([q(ue(V)),q(te(ye)),q(ue(He)),q(te(it)),q(ue(bt)),q(te(es)),"c"].join(" ")),this};p.__private__.line=p.line=function(V,ye,He,it,bt){if(isNaN(V)||isNaN(ye)||isNaN(He)||isNaN(it)||!Tr(bt))throw new Error("Invalid arguments passed to jsPDF.line");return k===L?this.lines([[He-V,it-ye]],V,ye,[1,1],bt||"S"):this.lines([[He-V,it-ye]],V,ye,[1,1]).stroke()},p.__private__.lines=p.lines=function(V,ye,He,it,bt,es){var hs,nn,hn,_n,Zn,Fr,Ra,qa,Jr,pi,si,Bi;if(typeof V=="number"&&(Bi=He,He=ye,ye=V,V=Bi),it=it||[1,1],es=es||!1,isNaN(ye)||isNaN(He)||!Array.isArray(V)||!Array.isArray(it)||!Tr(bt)||typeof es!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ie(ye,He),hs=it[0],nn=it[1],_n=V.length,pi=ye,si=He,hn=0;hn<_n;hn++)(Zn=V[hn]).length===2?(pi=Zn[0]*hs+pi,si=Zn[1]*nn+si,G(pi,si)):(Fr=Zn[0]*hs+pi,Ra=Zn[1]*nn+si,qa=Zn[2]*hs+pi,Jr=Zn[3]*nn+si,pi=Zn[4]*hs+pi,si=Zn[5]*nn+si,ve(Fr,Ra,qa,Jr,pi,si));return es&&ya(),oa(bt),this},p.path=function(V){for(var ye=0;ye<V.length;ye++){var He=V[ye],it=He.c;switch(He.op){case"m":ie(it[0],it[1]);break;case"l":G(it[0],it[1]);break;case"c":ve.apply(this,it);break;case"h":ya()}}return this},p.__private__.rect=p.rect=function(V,ye,He,it,bt){if(isNaN(V)||isNaN(ye)||isNaN(He)||isNaN(it)||!Tr(bt))throw new Error("Invalid arguments passed to jsPDF.rect");return k===L&&(it=-it),de([q(ue(V)),q(te(ye)),q(ue(He)),q(ue(it)),"re"].join(" ")),oa(bt),this},p.__private__.triangle=p.triangle=function(V,ye,He,it,bt,es,hs){if(isNaN(V)||isNaN(ye)||isNaN(He)||isNaN(it)||isNaN(bt)||isNaN(es)||!Tr(hs))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[He-V,it-ye],[bt-He,es-it],[V-bt,ye-es]],V,ye,[1,1],hs,!0),this},p.__private__.roundedRect=p.roundedRect=function(V,ye,He,it,bt,es,hs){if(isNaN(V)||isNaN(ye)||isNaN(He)||isNaN(it)||isNaN(bt)||isNaN(es)||!Tr(hs))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var nn=4/3*(Math.SQRT2-1);return bt=Math.min(bt,.5*He),es=Math.min(es,.5*it),this.lines([[He-2*bt,0],[bt*nn,0,bt,es-es*nn,bt,es],[0,it-2*es],[0,es*nn,-bt*nn,es,-bt,es],[2*bt-He,0],[-bt*nn,0,-bt,-es*nn,-bt,-es],[0,2*es-it],[0,-es*nn,bt*nn,-es,bt,-es]],V+bt,ye,[1,1],hs,!0),this},p.__private__.ellipse=p.ellipse=function(V,ye,He,it,bt){if(isNaN(V)||isNaN(ye)||isNaN(He)||isNaN(it)||!Tr(bt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var es=4/3*(Math.SQRT2-1)*He,hs=4/3*(Math.SQRT2-1)*it;return ie(V+He,ye),ve(V+He,ye-hs,V+es,ye-it,V,ye-it),ve(V-es,ye-it,V-He,ye-hs,V-He,ye),ve(V-He,ye+hs,V-es,ye+it,V,ye+it),ve(V+es,ye+it,V+He,ye+hs,V+He,ye),oa(bt),this},p.__private__.circle=p.circle=function(V,ye,He,it){if(isNaN(V)||isNaN(ye)||isNaN(He)||!Tr(it))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,ye,He,He,it)},p.setFont=function(V,ye,He){return He&&(ye=$(ye,He)),De=Ks(V,ye,{disableWarning:!1}),this};var Le=p.__private__.getFont=p.getFont=function(){return Kt[Ks.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var V,ye,He={};for(V in lt)if(lt.hasOwnProperty(V))for(ye in He[V]=[],lt[V])lt[V].hasOwnProperty(ye)&&He[V].push(ye);return He},p.addFont=function(V,ye,He,it,bt){var es=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&es.indexOf(arguments[3])!==-1?bt=arguments[3]:arguments[3]&&es.indexOf(arguments[3])==-1&&(He=$(He,it)),sn.call(this,V,ye,He,bt=bt||"Identity-H")};var Xe,vt=t.lineWidth||.200025,ut=p.__private__.getLineWidth=p.getLineWidth=function(){return vt},Pe=p.__private__.setLineWidth=p.setLineWidth=function(V){return vt=V,de(q(ue(V))+" w"),this};p.__private__.setLineDash=bn.API.setLineDash=bn.API.setLineDashPattern=function(V,ye){if(V=V||[],ye=ye||0,isNaN(ye)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(He){return q(ue(He))}).join(" "),ye=q(ue(ye)),de("["+V+"] "+ye+" d"),this};var Bt=p.__private__.getLineHeight=p.getLineHeight=function(){return at*Xe};p.__private__.getLineHeight=p.getLineHeight=function(){return at*Xe};var _t=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(Xe=V),this},xn=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Xe};_t(t.lineHeight);var Dn=p.__private__.getHorizontalCoordinate=function(V){return ue(V)},ps=p.__private__.getVerticalCoordinate=function(V){return k===Q?V:St[ge].mediaBox.topRightY-St[ge].mediaBox.bottomLeftY-ue(V)},Qs=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(V){return q(Dn(V))},Qn=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(V){return q(ps(V))},kn=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return kt(kn)},p.__private__.setStrokeColor=p.setDrawColor=function(V,ye,He,it){return kn=fs({ch1:V,ch2:ye,ch3:He,ch4:it,pdfColorType:"draw",precision:2}),de(kn),this};var Wn=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return kt(Wn)},p.__private__.setFillColor=p.setFillColor=function(V,ye,He,it){return Wn=fs({ch1:V,ch2:ye,ch3:He,ch4:it,pdfColorType:"fill",precision:2}),de(Wn),this};var Xr=t.textColor||"0 g",v=p.__private__.getTextColor=p.getTextColor=function(){return kt(Xr)};p.__private__.setTextColor=p.setTextColor=function(V,ye,He,it){return Xr=fs({ch1:V,ch2:ye,ch3:He,ch4:it,pdfColorType:"text",precision:3}),this};var N=t.charSpace,x=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(N||0)};p.__private__.setCharSpace=p.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return N=V,this};var I=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(V){var ye=p.CapJoinStyles[V];if(ye===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return I=ye,de(ye+" J"),this};var F=0;p.__private__.setLineJoin=p.setLineJoin=function(V){var ye=p.CapJoinStyles[V];if(ye===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return F=ye,de(ye+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(q(ue(V))+" M"),this},p.GState=xm,p.setGState=function(V){(V=typeof V=="string"?rs[Is[V]]:_(null,V)).equals(on)||(de("/"+V.id+" gs"),on=V)};var _=function(V,ye){if(!V||!Is[V]){var He=!1;for(var it in rs)if(rs.hasOwnProperty(it)&&rs[it].equals(ye)){He=!0;break}if(He)ye=rs[it];else{var bt="GS"+(Object.keys(rs).length+1).toString(10);rs[bt]=ye,ye.id=bt}return V&&(Is[V]=ye.id),qt.publish("addGState",ye),ye}};p.addGState=function(V,ye){return _(V,ye),this},p.saveGraphicsState=function(){return de("q"),Gt.push({key:De,size:at,color:Xr}),this},p.restoreGraphicsState=function(){de("Q");var V=Gt.pop();return De=V.key,at=V.size,Xr=V.color,on=null,this},p.setCurrentTransformationMatrix=function(V){return de(V.toString()+" cm"),this},p.comment=function(V){return de("#"+V),this};var U=function(V,ye){var He=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return He},set:function(es){isNaN(es)||(He=parseFloat(es))}});var it=ye||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return it},set:function(es){isNaN(es)||(it=parseFloat(es))}});var bt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return bt},set:function(es){bt=es.toString()}}),this},P=function(V,ye,He,it){U.call(this,V,ye),this.type="rect";var bt=He||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return bt},set:function(hs){isNaN(hs)||(bt=parseFloat(hs))}});var es=it||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return es},set:function(hs){isNaN(hs)||(es=parseFloat(hs))}}),this},K=function(){this.page=ws,this.currentPage=ge,this.pages=pt.slice(0),this.pagesContext=St.slice(0),this.x=mt,this.y=ls,this.matrix=Ht,this.width=Ye(ge),this.height=Ft(ge),this.outputDestination=Ce,this.id="",this.objectNumber=-1};K.prototype.restore=function(){ws=this.page,ge=this.currentPage,St=this.pagesContext,pt=this.pages,mt=this.x,ls=this.y,Ht=this.matrix,tt(ge,this.width),Zt(ge,this.height),Ce=this.outputDestination};var ae=function(V,ye,He,it,bt){Nn.push(new K),ws=ge=0,pt=[],mt=V,ls=ye,Ht=bt,qn([He,it])};for(var Fe in p.beginFormObject=function(V,ye,He,it,bt){return ae(V,ye,He,it,bt),this},p.endFormObject=function(V){return(function(ye){if(Rs[ye])Nn.pop().restore();else{var He=new K,it="Xo"+(Object.keys(gs).length+1).toString(10);He.id=it,Rs[ye]=it,gs[it]=He,qt.publish("addFormObject",He),Nn.pop().restore()}})(V),this},p.doFormObject=function(V,ye){var He=gs[Rs[V]];return de("q"),de(ye.toString()+" cm"),de("/"+He.id+" Do"),de("Q"),this},p.getFormObject=function(V){var ye=gs[Rs[V]];return{x:ye.x,y:ye.y,width:ye.width,height:ye.height,matrix:ye.matrix}},p.save=function(V,ye){return V=V||"generated.pdf",(ye=ye||{}).returnPromise=ye.returnPromise||!1,ye.returnPromise===!1?(sh(us(Ze()),V),typeof sh.unload=="function"&&Xn.setTimeout&&setTimeout(sh.unload,911),this):new Promise(function(He,it){try{var bt=sh(us(Ze()),V);typeof sh.unload=="function"&&Xn.setTimeout&&setTimeout(sh.unload,911),He(bt)}catch(es){it(es.message)}})},bn.API)bn.API.hasOwnProperty(Fe)&&(Fe==="events"&&bn.API.events.length?(function(V,ye){var He,it,bt;for(bt=ye.length-1;bt!==-1;bt--)He=ye[bt][0],it=ye[bt][1],V.subscribe.apply(V,[He].concat(typeof it=="function"?[it]:it))})(qt,bn.API.events):p[Fe]=bn.API[Fe]);function Ye(V){return St[V].mediaBox.topRightX-St[V].mediaBox.bottomLeftX}function tt(V,ye){St[V].mediaBox.topRightX=ye+St[V].mediaBox.bottomLeftX}function Ft(V){return St[V].mediaBox.topRightY-St[V].mediaBox.bottomLeftY}function Zt(V,ye){St[V].mediaBox.topRightY=ye+St[V].mediaBox.bottomLeftY}var as=p.getPageWidth=function(V){return Ye(V=V||ge)/rt},xs=p.setPageWidth=function(V,ye){tt(V,ye*rt)},Gs=p.getPageHeight=function(V){return Ft(V=V||ge)/rt},Rn=p.setPageHeight=function(V,ye){Zt(V,ye*rt)};return p.internal={pdfEscape:gn,getStyle:$a,getFont:Le,getFontSize:yt,getCharSpace:x,getTextColor:v,getLineHeight:Bt,getLineHeightFactor:xn,getLineWidth:ut,write:dt,getHorizontalCoordinate:Dn,getVerticalCoordinate:ps,getCoordinateString:Qs,getVerticalCoordinateString:Qn,collections:{},newObject:Bs,newAdditionalObject:ot,newObjectDeferred:Ms,newObjectDeferredBegin:Os,getFilters:ms,putStream:Ds,events:qt,scaleFactor:rt,pageSize:{getWidth:function(){return as(ge)},setWidth:function(V){xs(ge,V)},getHeight:function(){return Gs(ge)},setHeight:function(V){Rn(ge,V)}},encryptionOptions:o,encryption:Jn,getEncryptor:function(V){return o!==null?Jn.encryptor(V,0):function(ye){return ye}},output:is,getNumberOfPages:gr,get pages(){return pt},out:de,f2:ee,f3:le,getPageInfo:zn,getPageInfoByObjId:ua,getCurrentPageInfo:ga,getPDFVersion:b,Point:U,Rectangle:P,Matrix:ys,hasHotfix:yn},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return as(ge)},set:function(V){xs(ge,V)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Gs(ge)},set:function(V){Rn(ge,V)},enumerable:!0,configurable:!0}),(function(V){for(var ye=0,He=nt.length;ye<He;ye++){var it=sn.call(this,V[ye][0],V[ye][1],V[ye][2],nt[ye][3],!0);m===!1&&(y[it]=!0);var bt=V[ye][0].split("-");nr({id:it,fontName:bt[0],fontStyle:bt[1]||""})}qt.publish("addFonts",{fonts:Kt,dictionary:lt})}).call(p,nt),De="F1",Yr(i,n),qt.publish("initialized"),p}hf.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},hf.prototype.toHexString=function(t){return t.split("").map(function(s){return("0"+(255&s.charCodeAt(0)).toString(16)).slice(-2)}).join("")},hf.prototype.hexToBytes=function(t){for(var s=[],n=0;n<t.length;n+=2)s.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return s.join("")},hf.prototype.processOwnerPassword=function(t,s){return t1(e1(s).substr(0,5),t)},hf.prototype.encryptor=function(t,s){var n=e1(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&s,s>>8&255)).substr(0,10);return function(r){return t1(n,r)}},xm.prototype.equals=function(t){var s,n="id,objectNumber,equals";if(!t||Ca(t)!==Ca(this))return!1;var r=0;for(s in this)if(!(n.indexOf(s)>=0)){if(this.hasOwnProperty(s)&&!t.hasOwnProperty(s)||this[s]!==t[s])return!1;r++}for(s in t)t.hasOwnProperty(s)&&n.indexOf(s)<0&&r--;return r===0},bn.API={events:[]},bn.version="3.0.4";var Si=bn.API,Oj=1,Th=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},df=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},or=function(t){return t.toFixed(2)},tu=function(t){return t.toFixed(5)};Si.__acroform__={};var Il=function(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t},CB=function(t){return t*Oj},Ed=function(t){var s=new tR,n=cn.internal.getHeight(t)||0,r=cn.internal.getWidth(t)||0;return s.BBox=[0,0,Number(or(r)),Number(or(n))],s},q$=Si.__acroform__.setBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<s},W$=Si.__acroform__.clearBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<s)},Y$=Si.__acroform__.getBit=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<s?1:0},Ui=Si.__acroform__.getBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Y$(t,s-1)},Li=Si.__acroform__.setBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return q$(t,s-1)},Di=Si.__acroform__.clearBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return W$(t,s-1)},X$=Si.__acroform__.calculateCoordinates=function(t,s){var n=s.internal.getHorizontalCoordinate,r=s.internal.getVerticalCoordinate,i=t[0],c=t[1],A=t[2],u=t[3],d={};return d.lowerLeft_X=n(i)||0,d.lowerLeft_Y=r(c+u)||0,d.upperRight_X=n(i+A)||0,d.upperRight_Y=r(c)||0,[Number(or(d.lowerLeft_X)),Number(or(d.lowerLeft_Y)),Number(or(d.upperRight_X)),Number(or(d.upperRight_Y))]},J$=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var s=[],n=t._V||t.DV,r=s1(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;s.push("/Tx BMC"),s.push("q"),s.push("BT"),s.push(t.scope.__private__.encodeColorString(t.color)),s.push("/"+i+" "+or(r.fontSize)+" Tf"),s.push("1 0 0 1 0 0 Tm"),s.push(r.text),s.push("ET"),s.push("Q"),s.push("EMC");var c=Ed(t);return c.scope=t.scope,c.stream=s.join(`
`),c}},s1=function(t,s){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(s=(s=s.substr(0,1)=="("?s.substr(1):s).substr(s.length-1)==")"?s.substr(0,s.length-1):s).split(" ");i=t.multiline?i.map(function(ee){return ee.split(`
`)}):i.map(function(ee){return[ee]});var c=n,A=cn.internal.getHeight(t)||0;A=A<0?-A:A;var u=cn.internal.getWidth(t)||0;u=u<0?-u:u;var d=function(ee,le,ue){if(ee+1<i.length){var te=le+" "+i[ee+1][0];return sy(te,t,ue).width<=u-4}return!1};c++;e:for(;c>0;){s="",c--;var h,o,m=sy("3",t,c).height,y=t.multiline?A-c:(A-m)/2,p=y+=2,j=0,b=0,w=0;if(c<=0){s=`(...) Tj
`,s+="% Width of Text: "+sy(s,t,c=12).width+", FieldWidth:"+u+`
`;break}for(var B="",L=0,Q=0;Q<i.length;Q++)if(i.hasOwnProperty(Q)){var k=!1;if(i[Q].length!==1&&w!==i[Q].length-1){if((m+2)*(L+2)+2>A)continue e;B+=i[Q][w],k=!0,b=Q,Q--}else{B=(B+=i[Q][w]+" ").substr(B.length-1)==" "?B.substr(0,B.length-1):B;var z=parseInt(Q),J=d(z,B,c),$=Q>=i.length-1;if(J&&!$){B+=" ",w=0;continue}if(J||$){if($)b=z;else if(t.multiline&&(m+2)*(L+2)+2>A)continue e}else{if(!t.multiline||(m+2)*(L+2)+2>A)continue e;b=z}}for(var q="",X=j;X<=b;X++){var fe=i[X];if(t.multiline){if(X===b){q+=fe[w]+" ",w=(w+1)%fe.length;continue}if(X===j){q+=fe[fe.length-1]+" ";continue}}q+=fe[0]+" "}switch(q=q.substr(q.length-1)==" "?q.substr(0,q.length-1):q,o=sy(q,t,c).width,t.textAlign){case"right":h=u-o-2;break;case"center":h=(u-o)/2;break;default:h=2}s+=or(h)+" "+or(p)+` Td
`,s+="("+Th(q)+`) Tj
`,s+=-or(h)+` 0 Td
`,p=-(c+2),o=0,j=k?b:b+1,L++,B=""}break}return r.text=s,r.fontSize=c,r},sy=function(t,s,n){var r=s.scope.internal.getFont(s.fontName,s.fontStyle),i=s.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:s.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Z$={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},eG=function(t,s){var n={type:"reference",object:t};s.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&s.internal.getPageInfo(t.page).pageContext.annotations.push(n)},tG=function(t,s){if(s.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(sd.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Z$)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Oj=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new sR,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var c=r[i];c.objId=void 0,c.hasAnnotation&&eG(c,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var c=!r;for(var A in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(A)){var u=r[A],d=[],h=u.Rect;if(u.Rect&&(u.Rect=X$(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=cn.createDefaultAppearanceStream(u),Ca(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(d=u.getKeyValueListForStream()),u.Rect=h,u.hasAppearanceStream&&!u.appearanceStreamContent){var o=J$(u);d.push({key:"AP",value:"<</N "+o+">>"}),i.internal.acroformPlugin.xForms.push(o)}if(u.appearanceStreamContent){var m="";for(var y in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(y)){var p=u.appearanceStreamContent[y];if(m+="/"+y+" ",m+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var A in p)if(p.hasOwnProperty(A)){var j=p[A];typeof j=="function"&&(j=j.call(i,u)),m+="/"+A+" "+j+" ",i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j)}}else typeof(j=p)=="function"&&(j=j.call(i,u)),m+="/"+A+" "+j,i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j);m+=">>"}d.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:d,objectId:u.objId}),i.internal.out("endobj")}c&&(function(b,w){for(var B in b)if(b.hasOwnProperty(B)){var L=B,Q=b[B];w.internal.newObjectDeferredBegin(Q.objId,!0),Ca(Q)==="object"&&typeof Q.putStream=="function"&&Q.putStream(),delete b[L]}})(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},eR=Si.__acroform__.arrayToPdfArray=function(t,s,n){var r=function(A){return A};if(Array.isArray(t)){for(var i="[",c=0;c<t.length;c++)switch(c!==0&&(i+=" "),Ca(t[c])){case"boolean":case"number":case"object":i+=t[c].toString();break;case"string":t[c].substr(0,1)!=="/"?(s!==void 0&&n&&(r=n.internal.getEncryptor(s)),i+="("+Th(r(t[c].toString()))+")"):i+=t[c].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Iv=function(t,s,n){var r=function(i){return i};return s!==void 0&&n&&(r=n.internal.getEncryptor(s)),(t=t||"").toString(),"("+Th(r(t))+")"},Id=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Id.prototype.toString=function(){return this.objId+" 0 R"},Id.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Id.prototype.getKeyValueListForStream=function(){var t=[],s=Object.getOwnPropertyNames(this).filter(function(c){return c!="content"&&c!="appearanceStreamContent"&&c!="scope"&&c!="objId"&&c.substring(0,1)!="_"});for(var n in s)if(Object.getOwnPropertyDescriptor(this,s[n]).configurable===!1){var r=s[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:eR(i,this.objId,this.scope)}):i instanceof Id?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var tR=function(){Id.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,s=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return s},set:function(n){s=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Il(tR,Id);var sR=function(){Id.call(this);var t,s=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return s.length>0?s:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return s}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Th(n(t))+")"}},set:function(n){t=n}})};Il(sR,Id);var sd=function t(){Id.call(this);var s=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return s},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute F supplied.');s=B}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ui(s,3)},set:function(B){B?this.F=Li(s,3):this.F=Di(s,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute Ff supplied.');n=B}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(B){r=B!==void 0?B:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(B){r[0]=B}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(B){r[1]=B}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(B){r[2]=B}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(B){r[3]=B}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(B){switch(B){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=B;break;default:throw new Error('Invalid value "'+B+'" for attribute FT supplied.')}}});var c=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!c||c.length<1){if(this instanceof Zy)return;c="FieldObject"+t.FieldNum++}var B=function(L){return L};return this.scope&&(B=this.scope.internal.getEncryptor(this.objId)),"("+Th(B(c))+")"},set:function(B){c=B.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return c},set:function(B){c=B}});var A="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return A},set:function(B){A=B}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(B){u=B}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(B){d=B}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/Oj:h},set:function(B){h=B}});var o="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return o},set:function(B){o=B}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof Zy||this instanceof uu))return Iv(m,this.objId,this.scope)},set:function(B){B=B.toString(),m=B}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof so==0?Iv(y,this.objId,this.scope):y},set:function(B){B=B.toString(),y=this instanceof so==0?B.substr(0,1)==="("?df(B.substr(1,B.length-2)):df(B):B}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof so==1?df(y.substr(1,y.length-1)):y},set:function(B){B=B.toString(),y=this instanceof so==1?"/"+B:B}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(B){this.V=B}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof so==0?Iv(p,this.objId,this.scope):p},set:function(B){B=B.toString(),p=this instanceof so==0?B.substr(0,1)==="("?df(B.substr(1,B.length-2)):df(B):B}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof so==1?df(p.substr(1,p.length-1)):p},set:function(B){B=B.toString(),p=this instanceof so==1?"/"+B:B}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(B){B=!!B,b=B}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(B){j=B}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,1)},set:function(B){B?this.Ff=Li(this.Ff,1):this.Ff=Di(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,2)},set:function(B){B?this.Ff=Li(this.Ff,2):this.Ff=Di(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,3)},set:function(B){B?this.Ff=Li(this.Ff,3):this.Ff=Di(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(B){if([0,1,2].indexOf(B)===-1)throw new Error('Invalid value "'+B+'" for attribute Q supplied.');w=B}}),Object.defineProperty(this,"textAlign",{get:function(){var B;switch(w){case 0:default:B="left";break;case 1:B="center";break;case 2:B="right"}return B},configurable:!0,enumerable:!0,set:function(B){switch(B){case"right":case 2:w=2;break;case"center":case 1:w=1;break;default:w=0}}})};Il(sd,Id);var Ah=function(){sd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var s=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return eR(s,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=(function(c,A,u){u||(u=1);for(var d,h=[];d=A.exec(c);)h.push(d[u]);return h})(r,/\((.*?)\)/g)),s=i}}),this.getOptions=function(){return s},this.setOptions=function(n){s=n,this.sort&&s.sort()},this.addOption=function(n){n=(n=n||"").toString(),s.push(n),this.sort&&s.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();s.indexOf(n)!==-1&&(s.splice(s.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,18)},set:function(n){n?this.Ff=Li(this.Ff,18):this.Ff=Di(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Li(this.Ff,19):this.Ff=Di(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,20)},set:function(n){n?(this.Ff=Li(this.Ff,20),s.sort()):this.Ff=Di(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,22)},set:function(n){n?this.Ff=Li(this.Ff,22):this.Ff=Di(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,23)},set:function(n){n?this.Ff=Li(this.Ff,23):this.Ff=Di(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,27)},set:function(n){n?this.Ff=Li(this.Ff,27):this.Ff=Di(this.Ff,27)}}),this.hasAppearanceStream=!1};Il(Ah,sd);var uh=function(){Ah.call(this),this.fontName="helvetica",this.combo=!1};Il(uh,Ah);var hh=function(){uh.call(this),this.combo=!0};Il(hh,uh);var sm=function(){hh.call(this),this.edit=!0};Il(sm,hh);var so=function(){sd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,15)},set:function(n){n?this.Ff=Li(this.Ff,15):this.Ff=Di(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,16)},set:function(n){n?this.Ff=Li(this.Ff,16):this.Ff=Di(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,17)},set:function(n){n?this.Ff=Li(this.Ff,17):this.Ff=Di(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,26)},set:function(n){n?this.Ff=Li(this.Ff,26):this.Ff=Di(this.Ff,26)}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(c){return c};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(s).length!==0){var r,i=[];for(r in i.push("<<"),s)i.push("/"+r+" ("+Th(n(s[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Ca(n)==="object"&&(s=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(n){typeof n=="string"&&(s.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Il(so,sd);var nm=function(){so.call(this),this.pushButton=!0};Il(nm,so);var fh=function(){so.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s!==void 0?s:[]}})};Il(fh,so);var Zy=function(){var t,s;sd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return s},set:function(i){s=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var c,A=[];for(c in A.push("<<"),r)A.push("/"+c+" ("+Th(i(r[c]))+")");return A.push(">>"),A.join(`
`)},set:function(i){Ca(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=cn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Il(Zy,sd),fh.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var s in this.Kids)if(this.Kids.hasOwnProperty(s)){var n=this.Kids[s];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},fh.prototype.createOption=function(t){var s=new Zy;return s.Parent=this,s.optionName=t,this.Kids.push(s),sG.call(this.scope,s),s};var rm=function(){so.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=cn.CheckBox.createAppearanceStream()};Il(rm,so);var uu=function(){sd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,13)},set:function(s){s?this.Ff=Li(this.Ff,13):this.Ff=Di(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,21)},set:function(s){s?this.Ff=Li(this.Ff,21):this.Ff=Di(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,23)},set:function(s){s?this.Ff=Li(this.Ff,23):this.Ff=Di(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,24)},set:function(s){s?this.Ff=Li(this.Ff,24):this.Ff=Di(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,25)},set:function(s){s?this.Ff=Li(this.Ff,25):this.Ff=Di(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,26)},set:function(s){s?this.Ff=Li(this.Ff,26):this.Ff=Di(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(s){Number.isInteger(s)&&(t=s)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Il(uu,sd);var am=function(){uu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,14)},set:function(t){t?this.Ff=Li(this.Ff,14):this.Ff=Di(this.Ff,14)}}),this.password=!0};Il(am,uu);var cn={CheckBox:{createAppearanceStream:function(){return{N:{On:cn.CheckBox.YesNormal},D:{On:cn.CheckBox.YesPushDown,Off:cn.CheckBox.OffPushDown}}},YesPushDown:function(t){var s=Ed(t);s.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),c=s1(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+or(cn.internal.getWidth(t))+" "+or(cn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+or(c.fontSize)+" Tf "+i),n.push("BT"),n.push(c.text),n.push("ET"),n.push("Q"),n.push("EMC"),s.stream=n.join(`
`),s},YesNormal:function(t){var s=Ed(t);s.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],c=cn.internal.getHeight(t),A=cn.internal.getWidth(t),u=s1(t,t.caption);return i.push("1 g"),i.push("0 0 "+or(A)+" "+or(c)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+or(A-1)+" "+or(c-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+or(u.fontSize)+" Tf "+r),i.push(u.text),i.push("ET"),i.push("Q"),s.stream=i.join(`
`),s},OffPushDown:function(t){var s=Ed(t);s.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+or(cn.internal.getWidth(t))+" "+or(cn.internal.getHeight(t))+" re"),n.push("f"),s.stream=n.join(`
`),s}},RadioButton:{Circle:{createAppearanceStream:function(t){var s={D:{Off:cn.RadioButton.Circle.OffPushDown},N:{}};return s.N[t]=cn.RadioButton.Circle.YesNormal,s.D[t]=cn.RadioButton.Circle.YesPushDown,s},getCA:function(){return"l"},YesNormal:function(t){var s=Ed(t);s.scope=t.scope;var n=[],r=cn.internal.getWidth(t)<=cn.internal.getHeight(t)?cn.internal.getWidth(t)/4:cn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=cn.internal.Bezier_C,c=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+tu(cn.internal.getWidth(t)/2)+" "+tu(cn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),n.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),n.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),n.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),n.push("f"),n.push("Q"),s.stream=n.join(`
`),s},YesPushDown:function(t){var s=Ed(t);s.scope=t.scope;var n=[],r=cn.internal.getWidth(t)<=cn.internal.getHeight(t)?cn.internal.getWidth(t)/4:cn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),c=Number((i*cn.internal.Bezier_C).toFixed(5)),A=Number((r*cn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+tu(cn.internal.getWidth(t)/2)+" "+tu(cn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+c+" "+c+" "+i+" 0 "+i+" c"),n.push("-"+c+" "+i+" -"+i+" "+c+" -"+i+" 0 c"),n.push("-"+i+" -"+c+" -"+c+" -"+i+" 0 -"+i+" c"),n.push(c+" -"+i+" "+i+" -"+c+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+tu(cn.internal.getWidth(t)/2)+" "+tu(cn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+A+" "+A+" "+r+" 0 "+r+" c"),n.push("-"+A+" "+r+" -"+r+" "+A+" -"+r+" 0 c"),n.push("-"+r+" -"+A+" -"+A+" -"+r+" 0 -"+r+" c"),n.push(A+" -"+r+" "+r+" -"+A+" "+r+" 0 c"),n.push("f"),n.push("Q"),s.stream=n.join(`
`),s},OffPushDown:function(t){var s=Ed(t);s.scope=t.scope;var n=[],r=cn.internal.getWidth(t)<=cn.internal.getHeight(t)?cn.internal.getWidth(t)/4:cn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),c=Number((i*cn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+tu(cn.internal.getWidth(t)/2)+" "+tu(cn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+c+" "+c+" "+i+" 0 "+i+" c"),n.push("-"+c+" "+i+" -"+i+" "+c+" -"+i+" 0 c"),n.push("-"+i+" -"+c+" -"+c+" -"+i+" 0 -"+i+" c"),n.push(c+" -"+i+" "+i+" -"+c+" "+i+" 0 c"),n.push("f"),n.push("Q"),s.stream=n.join(`
`),s}},Cross:{createAppearanceStream:function(t){var s={D:{Off:cn.RadioButton.Cross.OffPushDown},N:{}};return s.N[t]=cn.RadioButton.Cross.YesNormal,s.D[t]=cn.RadioButton.Cross.YesPushDown,s},getCA:function(){return"8"},YesNormal:function(t){var s=Ed(t);s.scope=t.scope;var n=[],r=cn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+or(cn.internal.getWidth(t)-2)+" "+or(cn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(or(r.x1.x)+" "+or(r.x1.y)+" m"),n.push(or(r.x2.x)+" "+or(r.x2.y)+" l"),n.push(or(r.x4.x)+" "+or(r.x4.y)+" m"),n.push(or(r.x3.x)+" "+or(r.x3.y)+" l"),n.push("s"),n.push("Q"),s.stream=n.join(`
`),s},YesPushDown:function(t){var s=Ed(t);s.scope=t.scope;var n=cn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+or(cn.internal.getWidth(t))+" "+or(cn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+or(cn.internal.getWidth(t)-2)+" "+or(cn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(or(n.x1.x)+" "+or(n.x1.y)+" m"),r.push(or(n.x2.x)+" "+or(n.x2.y)+" l"),r.push(or(n.x4.x)+" "+or(n.x4.y)+" m"),r.push(or(n.x3.x)+" "+or(n.x3.y)+" l"),r.push("s"),r.push("Q"),s.stream=r.join(`
`),s},OffPushDown:function(t){var s=Ed(t);s.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+or(cn.internal.getWidth(t))+" "+or(cn.internal.getHeight(t))+" re"),n.push("f"),s.stream=n.join(`
`),s}}},createDefaultAppearanceStream:function(t){var s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+s+" "+t.fontSize+" Tf "+n}};cn.internal={Bezier_C:.551915024494,calculateCross:function(t){var s=cn.internal.getWidth(t),n=cn.internal.getHeight(t),r=Math.min(s,n);return{x1:{x:(s-r)/2,y:(n-r)/2+r},x2:{x:(s-r)/2+r,y:(n-r)/2},x3:{x:(s-r)/2,y:(n-r)/2},x4:{x:(s-r)/2+r,y:(n-r)/2+r}}}},cn.internal.getWidth=function(t){var s=0;return Ca(t)==="object"&&(s=CB(t.Rect[2])),s},cn.internal.getHeight=function(t){var s=0;return Ca(t)==="object"&&(s=CB(t.Rect[3])),s};var sG=Si.addField=function(t){if(tG(this,t),!(t instanceof sd))throw new Error("Invalid argument passed to jsPDF.addField.");var s;return(s=t).scope.internal.acroformPlugin.printedOut&&(s.scope.internal.acroformPlugin.printedOut=!1,s.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),s.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(s),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Si.AcroFormChoiceField=Ah,Si.AcroFormListBox=uh,Si.AcroFormComboBox=hh,Si.AcroFormEditBox=sm,Si.AcroFormButton=so,Si.AcroFormPushButton=nm,Si.AcroFormRadioButton=fh,Si.AcroFormCheckBox=rm,Si.AcroFormTextField=uu,Si.AcroFormPasswordField=am,Si.AcroFormAppearance=cn,Si.AcroForm={ChoiceField:Ah,ListBox:uh,ComboBox:hh,EditBox:sm,Button:so,PushButton:nm,RadioButton:fh,CheckBox:rm,TextField:uu,PasswordField:am,Appearance:cn},bn.AcroForm={ChoiceField:Ah,ListBox:uh,ComboBox:hh,EditBox:sm,Button:so,PushButton:nm,RadioButton:fh,CheckBox:rm,TextField:uu,PasswordField:am,Appearance:cn};var nG=bn.AcroForm;function nR(t){return t.reduce(function(s,n,r){return s[n]=r,s},{})}(function(t){var s="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(ee,le){var ue,te,re,ne,oe,se=n;if((le=le||n)==="RGBA"||ee.data!==void 0&&ee.data instanceof Uint8ClampedArray&&"height"in ee&&"width"in ee)return"RGBA";if(J(ee))for(oe in r)for(re=r[oe],ue=0;ue<re.length;ue+=1){for(ne=!0,te=0;te<re[ue].length;te+=1)if(re[ue][te]!==void 0&&re[ue][te]!==ee[te]){ne=!1;break}if(ne===!0){se=oe;break}}else for(oe in r)for(re=r[oe],ue=0;ue<re.length;ue+=1){for(ne=!0,te=0;te<re[ue].length;te+=1)if(re[ue][te]!==void 0&&re[ue][te]!==ee.charCodeAt(te)){ne=!1;break}if(ne===!0){se=oe;break}}return se===n&&le!==n&&(se=le),se},c=function ee(le){for(var ue=this.internal.write,te=this.internal.putStream,re=(0,this.internal.getFilters)();re.indexOf("FlateEncode")!==-1;)re.splice(re.indexOf("FlateEncode"),1);le.objectId=this.internal.newObject();var ne=[];if(ne.push({key:"Type",value:"/XObject"}),ne.push({key:"Subtype",value:"/Image"}),ne.push({key:"Width",value:le.width}),ne.push({key:"Height",value:le.height}),le.colorSpace===B.INDEXED?ne.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(le.palette.length/3-1)+" "+("sMask"in le&&le.sMask!==void 0?le.objectId+2:le.objectId+1)+" 0 R]"}):(ne.push({key:"ColorSpace",value:"/"+le.colorSpace}),le.colorSpace===B.DEVICE_CMYK&&ne.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ne.push({key:"BitsPerComponent",value:le.bitsPerComponent}),"decodeParameters"in le&&le.decodeParameters!==void 0&&ne.push({key:"DecodeParms",value:"<<"+le.decodeParameters+">>"}),"transparency"in le&&Array.isArray(le.transparency)&&le.transparency.length>0){for(var oe="",se=0,xe=le.transparency.length;se<xe;se++)oe+=le.transparency[se]+" "+le.transparency[se]+" ";ne.push({key:"Mask",value:"["+oe+"]"})}le.sMask!==void 0&&ne.push({key:"SMask",value:le.objectId+1+" 0 R"});var Me=le.filter!==void 0?["/"+le.filter]:void 0;if(te({data:le.data,additionalKeyValues:ne,alreadyAppliedFilters:Me,objectId:le.objectId}),ue("endobj"),"sMask"in le&&le.sMask!==void 0){var me,Z=(me=le.sMaskBitsPerComponent)!==null&&me!==void 0?me:le.bitsPerComponent,ge={width:le.width,height:le.height,colorSpace:"DeviceGray",bitsPerComponent:Z,data:le.sMask};"filter"in le&&(ge.decodeParameters="/Predictor ".concat(le.predictor," /Colors 1 /BitsPerComponent ").concat(Z," /Columns ").concat(le.width),ge.filter=le.filter),ee.call(this,ge)}if(le.colorSpace===B.INDEXED){var we=this.internal.newObject();te({data:q(new Uint8Array(le.palette)),objectId:we}),ue("endobj")}},A=function(){var ee=this.internal.collections[s+"images"];for(var le in ee)c.call(this,ee[le])},u=function(){var ee,le=this.internal.collections[s+"images"],ue=this.internal.write;for(var te in le)ue("/I"+(ee=le[te]).index,ee.objectId,"0","R")},d=function(){this.internal.collections[s+"images"]||(this.internal.collections[s+"images"]={},this.internal.events.subscribe("putResources",A),this.internal.events.subscribe("putXobjectDict",u))},h=function(){var ee=this.internal.collections[s+"images"];return d.call(this),ee},o=function(){return Object.keys(this.internal.collections[s+"images"]).length},m=function(ee){return typeof t["process"+ee.toUpperCase()]=="function"},y=function(ee){return Ca(ee)==="object"&&ee.nodeType===1},p=function(ee,le){if(ee.nodeName==="IMG"&&ee.hasAttribute("src")){var ue=""+ee.getAttribute("src");if(ue.indexOf("data:image/")===0)return Ny(unescape(ue).split("base64,").pop());var te=t.loadFile(ue,!0);if(te!==void 0)return te}if(ee.nodeName==="CANVAS"){if(ee.width===0||ee.height===0)throw new Error("Given canvas must have data. Canvas width: "+ee.width+", height: "+ee.height);var re;switch(le){case"PNG":re="image/png";break;case"WEBP":re="image/webp";break;default:re="image/jpeg"}return Ny(ee.toDataURL(re,1).split("base64,").pop())}},j=function(ee){var le=this.internal.collections[s+"images"];if(le){for(var ue in le)if(ee===le[ue].alias)return le[ue]}},b=function(ee,le,ue){return ee||le||(ee=-96,le=-96),ee<0&&(ee=-1*ue.width*72/ee/this.internal.scaleFactor),le<0&&(le=-1*ue.height*72/le/this.internal.scaleFactor),ee===0&&(ee=le*ue.width/ue.height),le===0&&(le=ee*ue.height/ue.width),[ee,le]},w=function(ee,le,ue,te,re,ne){var oe=b.call(this,ue,te,re),se=this.internal.getCoordinateString,xe=this.internal.getVerticalCoordinateString,Me=h.call(this);if(ue=oe[0],te=oe[1],Me[re.index]=re,ne){ne*=Math.PI/180;var me=Math.cos(ne),Z=Math.sin(ne),ge=function(pe){return pe.toFixed(4)},we=[ge(me),ge(Z),ge(-1*Z),ge(me),0,0,"cm"]}this.internal.write("q"),ne?(this.internal.write([1,"0","0",1,se(ee),xe(le+te),"cm"].join(" ")),this.internal.write(we.join(" ")),this.internal.write([se(ue),"0","0",se(te),"0","0","cm"].join(" "))):this.internal.write([se(ue),"0","0",se(te),se(ee),xe(le+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+re.index+" Do"),this.internal.write("Q")},B=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var L=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Q=t.__addimage__.sHashCode=function(ee){var le,ue,te=0;if(typeof ee=="string")for(ue=ee.length,le=0;le<ue;le++)te=(te<<5)-te+ee.charCodeAt(le),te|=0;else if(J(ee))for(ue=ee.byteLength/2,le=0;le<ue;le++)te=(te<<5)-te+ee[le],te|=0;return te},k=t.__addimage__.validateStringAsBase64=function(ee){(ee=ee||"").toString().trim();var le=!0;return ee.length===0&&(le=!1),ee.length%4!=0&&(le=!1),/^[A-Za-z0-9+/]+$/.test(ee.substr(0,ee.length-2))===!1&&(le=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ee.substr(-2))===!1&&(le=!1),le},z=t.__addimage__.extractImageFromDataUrl=function(ee){if(ee==null||!(ee=ee.trim()).startsWith("data:"))return null;var le=ee.indexOf(",");return le<0?null:ee.substring(0,le).trim().endsWith("base64")?ee.substring(le+1):null};t.__addimage__.isArrayBuffer=function(ee){return ee instanceof ArrayBuffer};var J=t.__addimage__.isArrayBufferView=function(ee){return ee instanceof Int8Array||ee instanceof Uint8Array||ee instanceof Uint8ClampedArray||ee instanceof Int16Array||ee instanceof Uint16Array||ee instanceof Int32Array||ee instanceof Uint32Array||ee instanceof Float32Array||ee instanceof Float64Array},$=t.__addimage__.binaryStringToUint8Array=function(ee){for(var le=ee.length,ue=new Uint8Array(le),te=0;te<le;te++)ue[te]=ee.charCodeAt(te);return ue},q=t.__addimage__.arrayBufferToBinaryString=function(ee){for(var le="",ue=J(ee)?ee:new Uint8Array(ee),te=0;te<ue.length;te+=8192)le+=String.fromCharCode.apply(null,ue.subarray(te,te+8192));return le};t.addImage=function(){var ee,le,ue,te,re,ne,oe,se,xe;if(typeof arguments[1]=="number"?(le=n,ue=arguments[1],te=arguments[2],re=arguments[3],ne=arguments[4],oe=arguments[5],se=arguments[6],xe=arguments[7]):(le=arguments[1],ue=arguments[2],te=arguments[3],re=arguments[4],ne=arguments[5],oe=arguments[6],se=arguments[7],xe=arguments[8]),Ca(ee=arguments[0])==="object"&&!y(ee)&&"imageData"in ee){var Me=ee;ee=Me.imageData,le=Me.format||le||n,ue=Me.x||ue||0,te=Me.y||te||0,re=Me.w||Me.width||re,ne=Me.h||Me.height||ne,oe=Me.alias||oe,se=Me.compression||se,xe=Me.rotation||Me.angle||xe}var me=this.internal.getFilters();if(se===void 0&&me.indexOf("FlateEncode")!==-1&&(se="SLOW"),isNaN(ue)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var Z=X.call(this,ee,le,oe,se);return w.call(this,ue,te,re,ne,Z,xe),this};var X=function(ee,le,ue,te){var re,ne,oe;if(typeof ee=="string"&&i(ee)===n){ee=unescape(ee);var se=fe(ee,!1);(se!==""||(se=t.loadFile(ee,!0))!==void 0)&&(ee=se)}if(y(ee)&&(ee=p(ee,le)),le=i(ee,le),!m(le))throw new Error("addImage does not support files of type '"+le+"', please ensure that a plugin for '"+le+"' support is added.");if(((oe=ue)==null||oe.length===0)&&(ue=(function(xe){return typeof xe=="string"||J(xe)?Q(xe):J(xe.data)?Q(xe.data):null})(ee)),(re=j.call(this,ue))||(ee instanceof Uint8Array||le==="RGBA"||(ne=ee,ee=$(ee)),re=this["process"+le.toUpperCase()](ee,o.call(this),ue,(function(xe){return xe&&typeof xe=="string"&&(xe=xe.toUpperCase()),xe in t.image_compression?xe:L.NONE})(te),ne)),!re)throw new Error("An unknown error occurred whilst processing the image.");return re},fe=t.__addimage__.convertBase64ToBinaryString=function(ee,le){le=typeof le!="boolean"||le;var ue,te="";if(typeof ee=="string"){var re;ue=(re=z(ee))!==null&&re!==void 0?re:ee;try{te=Ny(ue)}catch(ne){if(le)throw k(ue)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ne.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};t.getImageProperties=function(ee){var le,ue,te="";if(y(ee)&&(ee=p(ee)),typeof ee=="string"&&i(ee)===n&&((te=fe(ee,!1))===""&&(te=t.loadFile(ee)||""),ee=te),ue=i(ee),!m(ue))throw new Error("addImage does not support files of type '"+ue+"', please ensure that a plugin for '"+ue+"' support is added.");if(ee instanceof Uint8Array||(ee=$(ee)),!(le=this["process"+ue.toUpperCase()](ee)))throw new Error("An unknown error occurred whilst processing the image");return le.fileType=ue,le}})(bn.API),(function(t){var s=function(n){if(n!==void 0&&n!="")return!0};bn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,c,A=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,o=!1,m=0;m<h.length&&!o;m++)switch((r=h[m]).type){case"link":(s(r.options.url)||s(r.options.pageNumber))&&(o=!0);break;case"reference":case"text":case"freetext":o=!0}if(o!=0){this.internal.write("/Annots [");for(var y=0;y<h.length;y++){r=h[y];var p=this.internal.pdfEscape,j=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),B=this.internal.getEncryptor(b.objId),L=r.title||"Note";c="<</Type /Annot /Subtype /Text "+(i="/Rect ["+A(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+A(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+p(B(r.contents))+")",c+=" /Popup "+w.objId+" 0 R",c+=" /P "+d.objId+" 0 R",c+=" /T ("+p(B(L))+") >>",b.content=c;var Q=b.objId+" 0 R";c="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+A(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+A(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+Q,r.open&&(c+=" /Open true"),c+=" >>",w.content=c,this.internal.write(b.objId,"0 R",w.objId,"0 R");break;case"freetext":i="/Rect ["+A(r.bounds.x)+" "+u(r.bounds.y)+" "+A(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var k=r.color||"#000000";c="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(j(r.contents))+")",c+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",c+=" /Border [0 0 0]",c+=" >>",this.internal.write(c);break;case"link":if(r.options.name){var z=this.annotations._nameMap[r.options.name];r.options.pageNumber=z.page,r.options.top=z.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",c="",r.options.url)c="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(j(r.options.url))+") >>";else if(r.options.pageNumber)switch(c="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":c+=" /Fit]";break;case"FitH":c+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,c+=" /FitV "+r.options.left+"]";break;default:var J=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),c+=" /XYZ "+r.options.left+" "+J+" "+r.options.zoom+"]"}c!=""&&(c+=" >>",this.internal.write(c))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,c,A){var u=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:d(n),y:h(r),w:d(n+i),h:h(r+c)},options:A,type:"link"})},t.textWithLink=function(n,r,i,c){var A,u,d=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(c.maxWidth!==void 0){u=c.maxWidth;var o=this.splitTextToSize(n,u).length;A=Math.ceil(h*o)}else u=d,A=h;return this.text(n,r,i,c),i+=.2*h,c.align==="center"&&(r-=d/2),c.align==="right"&&(r-=d),this.link(r,i-h,u,A,c),d},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(bn.API),(function(t){var s={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var c=t.__arabicParser__.isInArabicSubstitutionA=function(b){return s[b.charCodeAt(0)]!==void 0},A=t.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},u=t.__arabicParser__.isArabicEndLetter=function(b){return A(b)&&c(b)&&s[b.charCodeAt(0)].length<=2},d=t.__arabicParser__.isArabicAlfLetter=function(b){return A(b)&&i.indexOf(b.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return A(b)&&c(b)&&s[b.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(b){return A(b)&&c(b)&&s[b.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(b){return A(b)&&c(b)&&s[b.charCodeAt(0)].length>=3};var o=t.__arabicParser__.arabicLetterHasMedialForm=function(b){return A(b)&&c(b)&&s[b.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(b){var w=0,B=n,L="",Q=0;for(w=0;w<b.length;w+=1)B[b.charCodeAt(w)]!==void 0?(Q++,typeof(B=B[b.charCodeAt(w)])=="number"&&(L+=String.fromCharCode(B),B=n,Q=0),w===b.length-1&&(B=n,L+=b.charAt(w-(Q-1)),w-=Q-1,Q=0)):(B=n,L+=b.charAt(w-Q),w-=Q,Q=0);return L};t.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&r[b.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(b,w,B){return A(b)?c(b)===!1?-1:!h(b)||!A(w)&&!A(B)||!A(B)&&u(w)||u(b)&&!A(w)||u(b)&&d(w)||u(b)&&u(w)?0:o(b)&&A(w)&&!u(w)&&A(B)&&h(B)?3:u(b)||!A(B)?1:2:-1},p=function(b){var w=0,B=0,L=0,Q="",k="",z="",J=(b=b||"").split("\\s+"),$=[];for(w=0;w<J.length;w+=1){for($.push(""),B=0;B<J[w].length;B+=1)Q=J[w][B],k=J[w][B-1],z=J[w][B+1],A(Q)?(L=y(Q,k,z),$[w]+=L!==-1?String.fromCharCode(s[Q.charCodeAt(0)][L]):Q):$[w]+=Q;$[w]=m($[w])}return $.join(" ")},j=t.__arabicParser__.processArabic=t.processArabic=function(){var b,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,B=[];if(Array.isArray(w)){var L=0;for(B=[],L=0;L<w.length;L+=1)Array.isArray(w[L])?B.push([p(w[L][0]),w[L][1],w[L][2]]):B.push([p(w[L])]);b=B}else b=p(w);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};t.events.push(["preProcessText",j])})(bn.API),bn.API.autoPrint=function(t){var s;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){s=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+s+" 0 R")})),this},(function(t){var s=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(u){n=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var c=[];Object.defineProperty(this,"childNodes",{get:function(){return c},set:function(u){c=u}});var A={};Object.defineProperty(this,"style",{get:function(){return A},set:function(u){A=u}}),Object.defineProperty(this,"parentNode",{})};s.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},s.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new s,this.canvas.pdf=this}])})(bn.API),(function(t){var s={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},s),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new c,this.internal.__cell__.pages=1},c=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(b){h=b}});var o=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return o},set:function(b){o=b}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(b){y=b}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(b){j=b}}),this};c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},c.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(d){return r.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},t.getTextDimensions=function(d,h){r.call(this);var o=(h=h||{}).fontSize||this.getFontSize(),m=h.font||this.getFont(),y=h.scaleFactor||this.internal.scaleFactor,p=0,j=0,b=0,w=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var B=h.maxWidth;B>0?typeof d=="string"?d=this.splitTextToSize(d,B):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(Q,k){return Q.concat(w.splitTextToSize(k,B))},[])):d=Array.isArray(d)?d:[d];for(var L=0;L<d.length;L++)p<(b=this.getStringUnitWidth(d[L],{font:m})*o)&&(p=b);return p!==0&&(j=d.length),{w:p/=y,h:Math.max((j*o*this.getLineHeightFactor()-o*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var d=this.internal.__cell__.margins||s;return this.internal.__cell__.lastCell=new c(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var A=t.cell=function(){var d;d=arguments[0]instanceof c?arguments[0]:new c(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var h=this.internal.__cell__.lastCell,o=this.internal.__cell__.padding,m=this.internal.__cell__.margins||s,y=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===d.lineNumber?(d.x=(h.x||0)+(h.width||0),d.y=h.y||0):h.y+h.height+d.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=m.top,p&&y&&(this.printHeaderRow(d.lineNumber,!0),d.y+=y[0].height)):d.y=h.y+h.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,n===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-o,d.y+o,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+o,{align:"center",baseline:"top",maxWidth:d.width-o-o}):this.text(d.text,d.x+o,d.y+o,{align:"left",baseline:"top",maxWidth:d.width-o-o})),this.internal.__cell__.lastCell=d,this};t.table=function(d,h,o,m,y){if(r.call(this),!o)throw new Error("No data for PDF table.");var p,j,b,w,B=[],L=[],Q=[],k={},z={},J=[],$=[],q=(y=y||{}).autoSize||!1,X=y.printHeaders!==!1,fe=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,ee=y.margins||Object.assign({width:this.getPageWidth()},s),le=typeof y.padding=="number"?y.padding:3,ue=y.headerBackgroundColor||"#c8c8c8",te=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=X,this.internal.__cell__.margins=ee,this.internal.__cell__.table_font_size=fe,this.internal.__cell__.padding=le,this.internal.__cell__.headerBackgroundColor=ue,this.internal.__cell__.headerTextColor=te,this.setFontSize(fe),m==null)L=B=Object.keys(o[0]),Q=B.map(function(){return"left"});else if(Array.isArray(m)&&Ca(m[0])==="object")for(B=m.map(function(Me){return Me.name}),L=m.map(function(Me){return Me.prompt||Me.name||""}),Q=m.map(function(Me){return Me.align||"left"}),p=0;p<m.length;p+=1)z[m[p].name]=.7499990551181103*m[p].width;else Array.isArray(m)&&typeof m[0]=="string"&&(L=B=m,Q=B.map(function(){return"left"}));if(q||Array.isArray(m)&&typeof m[0]=="string")for(p=0;p<B.length;p+=1){for(k[w=B[p]]=o.map(function(Me){return Me[w]}),this.setFont(void 0,"bold"),J.push(this.getTextDimensions(L[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=k[w],this.setFont(void 0,"normal"),b=0;b<j.length;b+=1)J.push(this.getTextDimensions(j[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);z[w]=Math.max.apply(null,J)+le+le,J=[]}if(X){var re={};for(p=0;p<B.length;p+=1)re[B[p]]={},re[B[p]].text=L[p],re[B[p]].align=Q[p];var ne=u.call(this,re,z);$=B.map(function(Me){return new c(d,h,z[Me],ne,re[Me].text,void 0,re[Me].align)}),this.setTableHeaderRow($),this.printHeaderRow(1,!1)}var oe=m.reduce(function(Me,me){return Me[me.name]=me.align,Me},{});for(p=0;p<o.length;p+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:p,data:o[p]},this);var se=u.call(this,o[p],z);for(b=0;b<B.length;b+=1){var xe=o[p][B[b]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:p,col:b,data:xe},this),A.call(this,new c(d,h,z[B[b]],se,xe,p+2,oe[B[b]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=h,this};var u=function(d,h){var o=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(d).map(function(p){var j=d[p];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,h[p]-o-o)},this).map(function(p){return this.getLineHeightFactor()*p.length*m/y+o+o},this).reduce(function(p,j){return Math.max(p,j)},0)};t.setTableHeaderRow=function(d){r.call(this),this.internal.__cell__.tableHeaderRow=d},t.printHeaderRow=function(d,h){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var o;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new c(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){o=this.internal.__cell__.tableHeaderRow[p].clone(),h&&(o.y=this.internal.__cell__.margins.top||0,y.push(o)),o.lineNumber=d;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),A.call(this,o),this.setTextColor(j)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}})(bn.API);var rR={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},aR=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],n1=nR(aR),iR=[100,200,300,400,500,600,700,800,900],rG=nR(iR);function Rv(t){var s=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(c){return rR[c=c||"normal"]?c:"normal"})(t.style),r=(function(c){return c?typeof c=="number"?c>=100&&c<=900&&c%100==0?c:400:/^\d00$/.test(c)?parseInt(c):c==="bold"?700:400:400})(t.weight),i=(function(c){return typeof n1[c=c||"normal"]=="number"?c:"normal"})(t.stretch);return{family:s,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:s,style:[i,n,r].join(" ")}}}function EB(t,s,n,r){var i;for(i=n;i>=0&&i<s.length;i+=r)if(t[s[i]])return t[s[i]];for(i=n;i>=0&&i<s.length;i-=r)if(t[s[i]])return t[s[i]]}var aG={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},TB={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function FB(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function IB(t){return t.trimLeft()}function iG(t,s){for(var n=0;n<t.length;){if(t.charAt(n)===s)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function oG(t){var s=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return s===null?null:[s[0],t.substring(s[0].length)]}var ny,RB,OB,Af,ry,UB,LB,DB,Ov=["times"];function QB(t,s,n,r,i){var c=4,A=MB;switch(i){case bn.API.image_compression.FAST:c=1,A=_B;break;case bn.API.image_compression.MEDIUM:c=6,A=PB;break;case bn.API.image_compression.SLOW:c=9,A=kB}t=(function(d,h,o,m){for(var y,p=d.length/h,j=new Uint8Array(d.length+p),b=[lG,_B,MB,PB,kB],w=0;w<p;w+=1){var B=w*h,L=d.subarray(B,B+h);if(m)j.set(m(L,o,y),B+w);else{for(var Q=b.length,k=[],z=0;z<Q;z+=1)k[z]=b[z](L,o,y);var J=dG(k.concat());j.set(k[J],B+w)}y=L}return j})(t,s,Math.ceil(n*r/8),A);var u=Yb(t,{level:c});return bn.API.__addimage__.arrayBufferToBinaryString(u)}function lG(t){var s=Array.apply([],t);return s.unshift(0),s}function _B(t,s){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var c=t[i-s]||0;r[i+1]=t[i]-c+256&255}return r}function MB(t,s,n){var r=t.length,i=[];i[0]=2;for(var c=0;c<r;c+=1){var A=n&&n[c]||0;i[c+1]=t[c]-A+256&255}return i}function PB(t,s,n){var r=t.length,i=[];i[0]=3;for(var c=0;c<r;c+=1){var A=t[c-s]||0,u=n&&n[c]||0;i[c+1]=t[c]+256-(A+u>>>1)&255}return i}function kB(t,s,n){var r=t.length,i=[];i[0]=4;for(var c=0;c<r;c+=1){var A=cG(t[c-s]||0,n&&n[c]||0,n&&n[c-s]||0);i[c+1]=t[c]-A+256&255}return i}function cG(t,s,n){if(t===s&&s===n)return t;var r=Math.abs(s-n),i=Math.abs(t-n),c=Math.abs(t+s-n-n);return r<=i&&r<=c?t:i<=c?s:n}function dG(t){var s=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return s.indexOf(Math.min.apply(null,s))}function Uv(t,s,n){var r=s*n,i=Math.floor(r/8),c=16-(r-8*i+n),A=(1<<n)-1;return oR(t,i)>>c&A}function HB(t,s,n,r){var i=n*r,c=Math.floor(i/8),A=16-(i-8*c+r),u=(1<<r)-1,d=(s&u)<<A;(function(h,o,m){if(o+1<h.byteLength)h.setUint16(o,m,!1);else{var y=m>>8&255;h.setUint8(o,y)}})(t,c,oR(t,c)&~(u<<A)&65535|d)}function oR(t,s){return s+1<t.byteLength?t.getUint16(s,!1):t.getUint8(s)<<8}function AG(t){var s=0;if(t[s++]!==71||t[s++]!==73||t[s++]!==70||t[s++]!==56||(t[s++]+1&253)!=56||t[s++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[s++]|t[s++]<<8,r=t[s++]|t[s++]<<8,i=t[s++],c=i>>7,A=1<<1+(7&i);t[s++],t[s++];var u=null,d=null;c&&(u=s,d=A,s+=3*A);var h=!0,o=[],m=0,y=null,p=0,j=null;for(this.width=n,this.height=r;h&&s<t.length;)switch(t[s++]){case 33:switch(t[s++]){case 255:if(t[s]!==11||t[s+1]==78&&t[s+2]==69&&t[s+3]==84&&t[s+4]==83&&t[s+5]==67&&t[s+6]==65&&t[s+7]==80&&t[s+8]==69&&t[s+9]==50&&t[s+10]==46&&t[s+11]==48&&t[s+12]==3&&t[s+13]==1&&t[s+16]==0)s+=14,j=t[s++]|t[s++]<<8,s++;else for(s+=12;;){if(!((ee=t[s++])>=0))throw Error("Invalid block size");if(ee===0)break;s+=ee}break;case 249:if(t[s++]!==4||t[s+4]!==0)throw new Error("Invalid graphics extension block.");var b=t[s++];m=t[s++]|t[s++]<<8,y=t[s++],1&b||(y=null),p=b>>2&7,s++;break;case 254:for(;;){if(!((ee=t[s++])>=0))throw Error("Invalid block size");if(ee===0)break;s+=ee}break;default:throw new Error("Unknown graphic control label: 0x"+t[s-1].toString(16))}break;case 44:var w=t[s++]|t[s++]<<8,B=t[s++]|t[s++]<<8,L=t[s++]|t[s++]<<8,Q=t[s++]|t[s++]<<8,k=t[s++],z=k>>6&1,J=1<<1+(7&k),$=u,q=d,X=!1;k>>7&&(X=!0,$=s,q=J,s+=3*J);var fe=s;for(s++;;){var ee;if(!((ee=t[s++])>=0))throw Error("Invalid block size");if(ee===0)break;s+=ee}o.push({x:w,y:B,width:L,height:Q,has_local_palette:X,palette_offset:$,palette_size:q,data_offset:fe,data_length:s-fe,transparent_index:y,interlaced:!!z,delay:m,disposal:p});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[s-1].toString(16))}this.numFrames=function(){return o.length},this.loopCount=function(){return j},this.frameInfo=function(le){if(le<0||le>=o.length)throw new Error("Frame index out of range.");return o[le]},this.decodeAndBlitFrameBGRA=function(le,ue){var te=this.frameInfo(le),re=te.width*te.height,ne=new Uint8Array(re);KB(t,te.data_offset,ne,re);var oe=te.palette_offset,se=te.transparent_index;se===null&&(se=256);var xe=te.width,Me=n-xe,me=xe,Z=4*(te.y*n+te.x),ge=4*((te.y+te.height)*n+te.x),we=Z,pe=4*Me;te.interlaced===!0&&(pe+=4*n*7);for(var be=8,je=0,Ne=ne.length;je<Ne;++je){var Je=ne[je];if(me===0&&(me=xe,(we+=pe)>=ge&&(pe=4*Me+4*n*(be-1),we=Z+(xe+Me)*(be<<1),be>>=1)),Je===se)we+=4;else{var Qe=t[oe+3*Je],pt=t[oe+3*Je+1],Te=t[oe+3*Je+2];ue[we++]=Te,ue[we++]=pt,ue[we++]=Qe,ue[we++]=255}--me}},this.decodeAndBlitFrameRGBA=function(le,ue){var te=this.frameInfo(le),re=te.width*te.height,ne=new Uint8Array(re);KB(t,te.data_offset,ne,re);var oe=te.palette_offset,se=te.transparent_index;se===null&&(se=256);var xe=te.width,Me=n-xe,me=xe,Z=4*(te.y*n+te.x),ge=4*((te.y+te.height)*n+te.x),we=Z,pe=4*Me;te.interlaced===!0&&(pe+=4*n*7);for(var be=8,je=0,Ne=ne.length;je<Ne;++je){var Je=ne[je];if(me===0&&(me=xe,(we+=pe)>=ge&&(pe=4*Me+4*n*(be-1),we=Z+(xe+Me)*(be<<1),be>>=1)),Je===se)we+=4;else{var Qe=t[oe+3*Je],pt=t[oe+3*Je+1],Te=t[oe+3*Je+2];ue[we++]=Qe,ue[we++]=pt,ue[we++]=Te,ue[we++]=255}--me}}}function KB(t,s,n,r){for(var i=t[s++],c=1<<i,A=c+1,u=A+1,d=i+1,h=(1<<d)-1,o=0,m=0,y=0,p=t[s++],j=new Int32Array(4096),b=null;;){for(;o<16&&p!==0;)m|=t[s++]<<o,o+=8,p===1?p=t[s++]:--p;if(o<d)break;var w=m&h;if(m>>=d,o-=d,w!==c){if(w===A)break;for(var B=w<u?w:b,L=0,Q=B;Q>c;)Q=j[Q]>>8,++L;var k=Q;if(y+L+(B!==w?1:0)>r)return void Pa.log("Warning, gif stream longer than expected.");n[y++]=k;var z=y+=L;for(B!==w&&(n[y++]=k),Q=B;L--;)Q=j[Q],n[--z]=255&Q,Q>>=8;b!==null&&u<4096&&(j[u++]=b<<8|k,u>=h+1&&d<12&&(++d,h=h<<1|1)),b=w}else u=A+1,h=(1<<(d=i+1))-1,b=null}return y!==r&&Pa.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Lv(t){var s,n,r,i,c,A=Math.floor,u=new Array(64),d=new Array(64),h=new Array(64),o=new Array(64),m=new Array(65535),y=new Array(65535),p=new Array(64),j=new Array(64),b=[],w=0,B=7,L=new Array(64),Q=new Array(64),k=new Array(64),z=new Array(256),J=new Array(2048),$=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],fe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ee=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],le=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ue=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],re=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ne(Z,ge){for(var we=0,pe=0,be=new Array,je=1;je<=16;je++){for(var Ne=1;Ne<=Z[je];Ne++)be[ge[pe]]=[],be[ge[pe]][0]=we,be[ge[pe]][1]=je,pe++,we++;we*=2}return be}function oe(Z){for(var ge=Z[0],we=Z[1]-1;we>=0;)ge&1<<we&&(w|=1<<B),we--,--B<0&&(w==255?(se(255),se(0)):se(w),B=7,w=0)}function se(Z){b.push(Z)}function xe(Z){se(Z>>8&255),se(255&Z)}function Me(Z,ge,we,pe,be){for(var je,Ne=be[0],Je=be[240],Qe=(function(at,Dt){var yt,qe,Tt,ns,Ts,vs,Ns,et,De,rt,mt=0;for(De=0;De<8;++De){yt=at[mt],qe=at[mt+1],Tt=at[mt+2],ns=at[mt+3],Ts=at[mt+4],vs=at[mt+5],Ns=at[mt+6];var ls=yt+(et=at[mt+7]),Ht=yt-et,Kt=qe+Ns,lt=qe-Ns,Gt=Tt+vs,Yt=Tt-vs,Cs=ns+Ts,rs=ns-Ts,Is=ls+Cs,on=ls-Cs,ws=Kt+Gt,St=Kt-Gt;at[mt]=Is+ws,at[mt+4]=Is-ws;var qt=.707106781*(St+on);at[mt+2]=on+qt,at[mt+6]=on-qt;var Pt=.382683433*((Is=rs+Yt)-(St=lt+Ht)),gs=.5411961*Is+Pt,Rs=1.306562965*St+Pt,Nn=.707106781*(ws=Yt+lt),ys=Ht+Nn,Ln=Ht-Nn;at[mt+5]=Ln+gs,at[mt+3]=Ln-gs,at[mt+1]=ys+Rs,at[mt+7]=ys-Rs,mt+=8}for(mt=0,De=0;De<8;++De){yt=at[mt],qe=at[mt+8],Tt=at[mt+16],ns=at[mt+24],Ts=at[mt+32],vs=at[mt+40],Ns=at[mt+48];var Zs=yt+(et=at[mt+56]),En=yt-et,Ls=qe+Ns,Bs=qe-Ns,Ms=Tt+vs,Os=Tt-vs,ot=ns+Ts,Rt=ns-Ts,Mt=Zs+ot,kt=Zs-ot,fs=Ls+Ms,ms=Ls-Ms;at[mt]=Mt+fs,at[mt+32]=Mt-fs;var Ds=.707106781*(ms+kt);at[mt+16]=kt+Ds,at[mt+48]=kt-Ds;var js=.382683433*((Mt=Rt+Os)-(ms=Bs+En)),Lt=.5411961*Mt+js,Hs=1.306562965*ms+js,Wr=.707106781*(fs=Os+Bs),sr=En+Wr,ds=En-Wr;at[mt+40]=ds+Lt,at[mt+24]=ds-Lt,at[mt+8]=sr+Hs,at[mt+56]=sr-Hs,mt++}for(De=0;De<64;++De)rt=at[De]*Dt[De],p[De]=rt>0?rt+.5|0:rt-.5|0;return p})(Z,ge),pt=0;pt<64;++pt)j[$[pt]]=Qe[pt];var Te=j[0]-we;we=j[0],Te==0?oe(pe[0]):(oe(pe[y[je=32767+Te]]),oe(m[je]));for(var Ce=63;Ce>0&&j[Ce]==0;)Ce--;if(Ce==0)return oe(Ne),we;for(var _e,de=1;de<=Ce;){for(var dt=de;j[de]==0&&de<=Ce;)++de;var st=de-dt;if(st>=16){_e=st>>4;for(var nt=1;nt<=_e;++nt)oe(Je);st&=15}je=32767+j[de],oe(be[(st<<4)+y[je]]),oe(m[je]),de++}return Ce!=63&&oe(Ne),we}function me(Z){Z=Math.min(Math.max(Z,1),100),c!=Z&&((function(ge){for(var we=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],pe=0;pe<64;pe++){var be=A((we[pe]*ge+50)/100);be=Math.min(Math.max(be,1),255),u[$[pe]]=be}for(var je=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ne=0;Ne<64;Ne++){var Je=A((je[Ne]*ge+50)/100);Je=Math.min(Math.max(Je,1),255),d[$[Ne]]=Je}for(var Qe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],pt=0,Te=0;Te<8;Te++)for(var Ce=0;Ce<8;Ce++)h[pt]=1/(u[$[pt]]*Qe[Te]*Qe[Ce]*8),o[pt]=1/(d[$[pt]]*Qe[Te]*Qe[Ce]*8),pt++})(Z<50?Math.floor(5e3/Z):Math.floor(200-2*Z)),c=Z)}this.encode=function(Z,ge){ge&&me(ge),b=new Array,w=0,B=7,xe(65496),xe(65504),xe(16),se(74),se(70),se(73),se(70),se(0),se(1),se(1),se(0),xe(1),xe(1),se(0),se(0),(function(){xe(65499),xe(132),se(0);for(var qe=0;qe<64;qe++)se(u[qe]);se(1);for(var Tt=0;Tt<64;Tt++)se(d[Tt])})(),(function(qe,Tt){xe(65472),xe(17),se(8),xe(Tt),xe(qe),se(3),se(1),se(17),se(0),se(2),se(17),se(1),se(3),se(17),se(1)})(Z.width,Z.height),(function(){xe(65476),xe(418),se(0);for(var qe=0;qe<16;qe++)se(q[qe+1]);for(var Tt=0;Tt<=11;Tt++)se(X[Tt]);se(16);for(var ns=0;ns<16;ns++)se(fe[ns+1]);for(var Ts=0;Ts<=161;Ts++)se(ee[Ts]);se(1);for(var vs=0;vs<16;vs++)se(le[vs+1]);for(var Ns=0;Ns<=11;Ns++)se(ue[Ns]);se(17);for(var et=0;et<16;et++)se(te[et+1]);for(var De=0;De<=161;De++)se(re[De])})(),xe(65498),xe(12),se(3),se(1),se(0),se(2),se(17),se(3),se(17),se(0),se(63),se(0);var we=0,pe=0,be=0;w=0,B=7,this.encode.displayName="_encode_";for(var je,Ne,Je,Qe,pt,Te,Ce,_e,de,dt=Z.data,st=Z.width,nt=Z.height,at=4*st,Dt=0;Dt<nt;){for(je=0;je<at;){for(pt=at*Dt+je,Ce=-1,_e=0,de=0;de<64;de++)Te=pt+(_e=de>>3)*at+(Ce=4*(7&de)),Dt+_e>=nt&&(Te-=at*(Dt+1+_e-nt)),je+Ce>=at&&(Te-=je+Ce-at+4),Ne=dt[Te++],Je=dt[Te++],Qe=dt[Te++],L[de]=(J[Ne]+J[Je+256|0]+J[Qe+512|0]>>16)-128,Q[de]=(J[Ne+768|0]+J[Je+1024|0]+J[Qe+1280|0]>>16)-128,k[de]=(J[Ne+1280|0]+J[Je+1536|0]+J[Qe+1792|0]>>16)-128;we=Me(L,h,we,s,r),pe=Me(Q,o,pe,n,i),be=Me(k,o,be,n,i),je+=32}Dt+=8}if(B>=0){var yt=[];yt[1]=B+1,yt[0]=(1<<B+1)-1,oe(yt)}return xe(65497),new Uint8Array(b)},t=t||50,(function(){for(var Z=String.fromCharCode,ge=0;ge<256;ge++)z[ge]=Z(ge)})(),s=ne(q,X),n=ne(le,ue),r=ne(fe,ee),i=ne(te,re),(function(){for(var Z=1,ge=2,we=1;we<=15;we++){for(var pe=Z;pe<ge;pe++)y[32767+pe]=we,m[32767+pe]=[],m[32767+pe][1]=we,m[32767+pe][0]=pe;for(var be=-(ge-1);be<=-Z;be++)y[32767+be]=we,m[32767+be]=[],m[32767+be][1]=we,m[32767+be][0]=ge-1+be;Z<<=1,ge<<=1}})(),(function(){for(var Z=0;Z<256;Z++)J[Z]=19595*Z,J[Z+256|0]=38470*Z,J[Z+512|0]=7471*Z+32768,J[Z+768|0]=-11059*Z,J[Z+1024|0]=-21709*Z,J[Z+1280|0]=32768*Z+8421375,J[Z+1536|0]=-27439*Z,J[Z+1792|0]=-5329*Z})(),me(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Vc(t,s){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!s,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function zB(t){function s(X){if(!X)throw Error("assert :P")}function n(X,fe,ee){for(var le=0;4>le;le++)if(X[fe+le]!=ee.charCodeAt(le))return!0;return!1}function r(X,fe,ee,le,ue){for(var te=0;te<ue;te++)X[fe+te]=ee[le+te]}function i(X,fe,ee,le){for(var ue=0;ue<le;ue++)X[fe+ue]=ee}function c(X){return new Int32Array(X)}function A(X,fe){for(var ee=[],le=0;le<X;le++)ee.push(new fe);return ee}function u(X,fe){var ee=[];return(function le(ue,te,re){for(var ne=re[te],oe=0;oe<ne&&(ue.push(re.length>te+1?[]:new fe),!(re.length<te+1));oe++)le(ue[oe],te+1,re)})(ee,0,X),ee}var d=function(){var X=this;function fe(E,M){for(var W=1<<M-1>>>0;E&W;)W>>>=1;return W?(E&W-1)+W:E}function ee(E,M,W,ce,Se){s(!(ce%W));do E[M+(ce-=W)]=Se;while(0<ce)}function le(E,M,W,ce,Se){if(s(2328>=Se),512>=Se)var Ie=c(512);else if((Ie=c(Se))==null)return 0;return(function(Re,Ue,ke,We,ft,It){var Ge,xt,jt=Ue,Xt=1<<ke,Et=c(16),Wt=c(16);for(s(ft!=0),s(We!=null),s(Re!=null),s(0<ke),xt=0;xt<ft;++xt){if(15<We[xt])return 0;++Et[We[xt]]}if(Et[0]==ft)return 0;for(Wt[1]=0,Ge=1;15>Ge;++Ge){if(Et[Ge]>1<<Ge)return 0;Wt[Ge+1]=Wt[Ge]+Et[Ge]}for(xt=0;xt<ft;++xt)Ge=We[xt],0<We[xt]&&(It[Wt[Ge]++]=xt);if(Wt[15]==1)return(We=new ue).g=0,We.value=It[0],ee(Re,jt,1,Xt,We),Xt;var ss,bs=-1,cs=Xt-1,an=0,Ys=1,Hn=1,tn=1<<ke;for(xt=0,Ge=1,ft=2;Ge<=ke;++Ge,ft<<=1){if(Ys+=Hn<<=1,0>(Hn-=Et[Ge]))return 0;for(;0<Et[Ge];--Et[Ge])(We=new ue).g=Ge,We.value=It[xt++],ee(Re,jt+an,ft,tn,We),an=fe(an,Ge)}for(Ge=ke+1,ft=2;15>=Ge;++Ge,ft<<=1){if(Ys+=Hn<<=1,0>(Hn-=Et[Ge]))return 0;for(;0<Et[Ge];--Et[Ge]){if(We=new ue,(an&cs)!=bs){for(jt+=tn,ss=1<<(bs=Ge)-ke;15>bs&&!(0>=(ss-=Et[bs]));)++bs,ss<<=1;Xt+=tn=1<<(ss=bs-ke),Re[Ue+(bs=an&cs)].g=ss+ke,Re[Ue+bs].value=jt-Ue-bs}We.g=Ge-ke,We.value=It[xt++],ee(Re,jt+(an>>ke),ft,tn,We),an=fe(an,Ge)}}return Ys!=2*Wt[15]-1?0:Xt})(E,M,W,ce,Se,Ie)}function ue(){this.value=this.g=0}function te(){this.value=this.g=0}function re(){this.G=A(5,ue),this.H=c(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=A(Bo,te)}function ne(E,M,W,ce){s(E!=null),s(M!=null),s(2147483648>ce),E.Ca=254,E.I=0,E.b=-8,E.Ka=0,E.oa=M,E.pa=W,E.Jd=M,E.Yc=W+ce,E.Zc=4<=ce?W+ce-4+1:W,Ne(E)}function oe(E,M){for(var W=0;0<M--;)W|=Qe(E,128)<<M;return W}function se(E,M){var W=oe(E,M);return Je(E)?-W:W}function xe(E,M,W,ce){var Se,Ie=0;for(s(E!=null),s(M!=null),s(4294967288>ce),E.Sb=ce,E.Ra=0,E.u=0,E.h=0,4<ce&&(ce=4),Se=0;Se<ce;++Se)Ie+=M[W+Se]<<8*Se;E.Ra=Ie,E.bb=ce,E.oa=M,E.pa=W}function Me(E){for(;8<=E.u&&E.bb<E.Sb;)E.Ra>>>=8,E.Ra+=E.oa[E.pa+E.bb]<<Jo-8>>>0,++E.bb,E.u-=8;pe(E)&&(E.h=1,E.u=0)}function me(E,M){if(s(0<=M),!E.h&&M<=_i){var W=we(E)&lr[M];return E.u+=M,Me(E),W}return E.h=1,E.u=0}function Z(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ge(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function we(E){return E.Ra>>>(E.u&Jo-1)>>>0}function pe(E){return s(E.bb<=E.Sb),E.h||E.bb==E.Sb&&E.u>Jo}function be(E,M){E.u=M,E.h=pe(E)}function je(E){E.u>=Zo&&(s(E.u>=Zo),Me(E))}function Ne(E){s(E!=null&&E.oa!=null),E.pa<E.Zc?(E.I=(E.oa[E.pa++]|E.I<<8)>>>0,E.b+=8):(s(E!=null&&E.oa!=null),E.pa<E.Yc?(E.b+=8,E.I=E.oa[E.pa++]|E.I<<8):E.Ka?E.b=0:(E.I<<=8,E.b+=8,E.Ka=1))}function Je(E){return oe(E,1)}function Qe(E,M){var W=E.Ca;0>E.b&&Ne(E);var ce=E.b,Se=W*M>>>8,Ie=(E.I>>>ce>Se)+0;for(Ie?(W-=Se,E.I-=Se+1<<ce>>>0):W=Se+1,ce=W,Se=0;256<=ce;)Se+=8,ce>>=8;return ce=7^Se+cl[ce],E.b-=ce,E.Ca=(W<<ce)-1,Ie}function pt(E,M,W){E[M+0]=W>>24&255,E[M+1]=W>>16&255,E[M+2]=W>>8&255,E[M+3]=255&W}function Te(E,M){return E[M+0]|E[M+1]<<8}function Ce(E,M){return Te(E,M)|E[M+2]<<16}function _e(E,M){return Te(E,M)|Te(E,M+2)<<16}function de(E,M){var W=1<<M;return s(E!=null),s(0<M),E.X=c(W),E.X==null?0:(E.Mb=32-M,E.Xa=M,1)}function dt(E,M){s(E!=null),s(M!=null),s(E.Xa==M.Xa),r(M.X,0,E.X,0,1<<M.Xa)}function st(){this.X=[],this.Xa=this.Mb=0}function nt(E,M,W,ce){s(W!=null),s(ce!=null);var Se=W[0],Ie=ce[0];return Se==0&&(Se=(E*Ie+M/2)/M),Ie==0&&(Ie=(M*Se+E/2)/E),0>=Se||0>=Ie?0:(W[0]=Se,ce[0]=Ie,1)}function at(E,M){return E+(1<<M)-1>>>M}function Dt(E,M){return((4278255360&E)+(4278255360&M)>>>0&4278255360)+((16711935&E)+(16711935&M)>>>0&16711935)>>>0}function yt(E,M){X[M]=function(W,ce,Se,Ie,Re,Ue,ke){var We;for(We=0;We<Re;++We){var ft=X[E](Ue[ke+We-1],Se,Ie+We);Ue[ke+We]=Dt(W[ce+We],ft)}}}function qe(){this.ud=this.hd=this.jd=0}function Tt(E,M){return((4278124286&(E^M))>>>1)+(E&M)>>>0}function ns(E){return 0<=E&&256>E?E:0>E?0:255<E?255:void 0}function Ts(E,M){return ns(E+(E-M+.5>>1))}function vs(E,M,W){return Math.abs(M-W)-Math.abs(E-W)}function Ns(E,M,W,ce,Se,Ie,Re){for(ce=Ie[Re-1],W=0;W<Se;++W)Ie[Re+W]=ce=Dt(E[M+W],ce)}function et(E,M,W,ce,Se){var Ie;for(Ie=0;Ie<W;++Ie){var Re=E[M+Ie],Ue=Re>>8&255,ke=16711935&(ke=(ke=16711935&Re)+((Ue<<16)+Ue));ce[Se+Ie]=(4278255360&Re)+ke>>>0}}function De(E,M){M.jd=255&E,M.hd=E>>8&255,M.ud=E>>16&255}function rt(E,M,W,ce,Se,Ie){var Re;for(Re=0;Re<ce;++Re){var Ue=M[W+Re],ke=Ue>>>8,We=Ue,ft=255&(ft=(ft=Ue>>>16)+((E.jd<<24>>24)*(ke<<24>>24)>>>5));We=255&(We=(We+=(E.hd<<24>>24)*(ke<<24>>24)>>>5)+((E.ud<<24>>24)*(ft<<24>>24)>>>5)),Se[Ie+Re]=(4278255360&Ue)+(ft<<16)+We}}function mt(E,M,W,ce,Se){X[M]=function(Ie,Re,Ue,ke,We,ft,It,Ge,xt){for(ke=It;ke<Ge;++ke)for(It=0;It<xt;++It)We[ft++]=Se(Ue[ce(Ie[Re++])])},X[E]=function(Ie,Re,Ue,ke,We,ft,It){var Ge=8>>Ie.b,xt=Ie.Ea,jt=Ie.K[0],Xt=Ie.w;if(8>Ge)for(Ie=(1<<Ie.b)-1,Xt=(1<<Ge)-1;Re<Ue;++Re){var Et,Wt=0;for(Et=0;Et<xt;++Et)Et&Ie||(Wt=ce(ke[We++])),ft[It++]=Se(jt[Wt&Xt]),Wt>>=Ge}else X["VP8LMapColor"+W](ke,We,jt,Xt,ft,It,Re,Ue,xt)}}function ls(E,M,W,ce,Se){for(W=M+W;M<W;){var Ie=E[M++];ce[Se++]=Ie>>16&255,ce[Se++]=Ie>>8&255,ce[Se++]=255&Ie}}function Ht(E,M,W,ce,Se){for(W=M+W;M<W;){var Ie=E[M++];ce[Se++]=Ie>>16&255,ce[Se++]=Ie>>8&255,ce[Se++]=255&Ie,ce[Se++]=Ie>>24&255}}function Kt(E,M,W,ce,Se){for(W=M+W;M<W;){var Ie=(Re=E[M++])>>16&240|Re>>12&15,Re=240&Re|Re>>28&15;ce[Se++]=Ie,ce[Se++]=Re}}function lt(E,M,W,ce,Se){for(W=M+W;M<W;){var Ie=(Re=E[M++])>>16&248|Re>>13&7,Re=Re>>5&224|Re>>3&31;ce[Se++]=Ie,ce[Se++]=Re}}function Gt(E,M,W,ce,Se){for(W=M+W;M<W;){var Ie=E[M++];ce[Se++]=255&Ie,ce[Se++]=Ie>>8&255,ce[Se++]=Ie>>16&255}}function Yt(E,M,W,ce,Se,Ie){if(Ie==0)for(W=M+W;M<W;)pt(ce,((Ie=E[M++])[0]>>24|Ie[1]>>8&65280|Ie[2]<<8&16711680|Ie[3]<<24)>>>0),Se+=32;else r(ce,Se,E,M,W)}function Cs(E,M){X[M][0]=X[E+"0"],X[M][1]=X[E+"1"],X[M][2]=X[E+"2"],X[M][3]=X[E+"3"],X[M][4]=X[E+"4"],X[M][5]=X[E+"5"],X[M][6]=X[E+"6"],X[M][7]=X[E+"7"],X[M][8]=X[E+"8"],X[M][9]=X[E+"9"],X[M][10]=X[E+"10"],X[M][11]=X[E+"11"],X[M][12]=X[E+"12"],X[M][13]=X[E+"13"],X[M][14]=X[E+"0"],X[M][15]=X[E+"0"]}function rs(E){return E==Vd||E==wA||E==od||E==Uc}function Is(){this.eb=[],this.size=this.A=this.fb=0}function on(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ws(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Is,this.f.kb=new on,this.sd=null}function St(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function qt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Pt(E){return alert("todo:WebPSamplerProcessPlane"),E.T}function gs(E,M){var W=E.T,ce=M.ba.f.RGBA,Se=ce.eb,Ie=ce.fb+E.ka*ce.A,Re=Ii[M.ba.S],Ue=E.y,ke=E.O,We=E.f,ft=E.N,It=E.ea,Ge=E.W,xt=M.cc,jt=M.dc,Xt=M.Mc,Et=M.Nc,Wt=E.ka,ss=E.ka+E.T,bs=E.U,cs=bs+1>>1;for(Wt==0?Re(Ue,ke,null,null,We,ft,It,Ge,We,ft,It,Ge,Se,Ie,null,null,bs):(Re(M.ec,M.fc,Ue,ke,xt,jt,Xt,Et,We,ft,It,Ge,Se,Ie-ce.A,Se,Ie,bs),++W);Wt+2<ss;Wt+=2)xt=We,jt=ft,Xt=It,Et=Ge,ft+=E.Rc,Ge+=E.Rc,Ie+=2*ce.A,Re(Ue,(ke+=2*E.fa)-E.fa,Ue,ke,xt,jt,Xt,Et,We,ft,It,Ge,Se,Ie-ce.A,Se,Ie,bs);return ke+=E.fa,E.j+ss<E.o?(r(M.ec,M.fc,Ue,ke,bs),r(M.cc,M.dc,We,ft,cs),r(M.Mc,M.Nc,It,Ge,cs),W--):1&ss||Re(Ue,ke,null,null,We,ft,It,Ge,We,ft,It,Ge,Se,Ie+ce.A,null,null,bs),W}function Rs(E,M,W){var ce=E.F,Se=[E.J];if(ce!=null){var Ie=E.U,Re=M.ba.S,Ue=Re==zd||Re==od;M=M.ba.f.RGBA;var ke=[0],We=E.ka;ke[0]=E.T,E.Kb&&(We==0?--ke[0]:(--We,Se[0]-=E.width),E.j+E.ka+E.T==E.o&&(ke[0]=E.o-E.j-We));var ft=M.eb;We=M.fb+We*M.A,E=id(ce,Se[0],E.width,Ie,ke,ft,We+(Ue?0:3),M.A),s(W==ke),E&&rs(Re)&&nc(ft,We,Ue,Ie,ke,M.A)}return 0}function Nn(E){var M=E.ma,W=M.ba.S,ce=11>W,Se=W==Hi||W==Co||W==zd||W==Ql||W==12||rs(W);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!va(M.Oa,E,Se?11:12))return 0;if(Se&&rs(W)&&kd(),E.da)alert("todo:use_scaling");else{if(ce){if(M.Ib=Pt,E.Kb){if(W=E.U+1>>1,M.memory=c(E.U+2*W),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+E.U,M.Mc=M.cc,M.Nc=M.dc+W,M.Ib=gs,kd()}}else alert("todo:EmitYUV");Se&&(M.Jb=Rs,ce&&Yo())}if(ce&&!Ac){for(E=0;256>E;++E)Ri[E]=89858*(E-128)+cd>>Ro,Vf[E]=-22014*(E-128)+cd,Rh[E]=-45773*(E-128),EA[E]=113618*(E-128)+cd>>Ro;for(E=ml;E<dc;++E)M=76283*(E-16)+cd>>Ro,$f[E-ml]=en(M,255),Gf[E-ml]=en(M+8>>4,15);Ac=1}return 1}function ys(E){var M=E.ma,W=E.U,ce=E.T;return s(!(1&E.ka)),0>=W||0>=ce?0:(W=M.Ib(E,M),M.Jb!=null&&M.Jb(E,M,W),M.Dc+=W,1)}function Ln(E){E.ma.memory=null}function Zs(E,M,W,ce){return me(E,8)!=47?0:(M[0]=me(E,14)+1,W[0]=me(E,14)+1,ce[0]=me(E,1),me(E,3)!=0?0:!E.h)}function En(E,M){if(4>E)return E+1;var W=E-2>>1;return(2+(1&E)<<W)+me(M,W)+1}function Ls(E,M){return 120<M?M-120:1<=(W=((W=To[M-1])>>4)*E+(8-(15&W)))?W:1;var W}function Bs(E,M,W){var ce=we(W),Se=E[M+=255&ce].g-8;return 0<Se&&(be(W,W.u+8),ce=we(W),M+=E[M].value,M+=ce&(1<<Se)-1),be(W,W.u+E[M].g),E[M].value}function Ms(E,M,W){return W.g+=E.g,W.value+=E.value<<M>>>0,s(8>=W.g),E.g}function Os(E,M,W){var ce=E.xc;return s((M=ce==0?0:E.vc[E.md*(W>>ce)+(M>>ce)])<E.Wb),E.Ya[M]}function ot(E,M,W,ce){var Se=E.ab,Ie=E.c*M,Re=E.C;M=Re+M;var Ue=W,ke=ce;for(ce=E.Ta,W=E.Ua;0<Se--;){var We=E.gc[Se],ft=Re,It=M,Ge=Ue,xt=ke,jt=(ke=ce,Ue=W,We.Ea);switch(s(ft<It),s(It<=We.nc),We.hc){case 2:Ha(Ge,xt,(It-ft)*jt,ke,Ue);break;case 0:var Xt=ft,Et=It,Wt=ke,ss=Ue,bs=(tn=We).Ea;Xt==0&&(Ul(Ge,xt,null,null,1,Wt,ss),Ns(Ge,xt+1,0,0,bs-1,Wt,ss+1),xt+=bs,ss+=bs,++Xt);for(var cs=1<<tn.b,an=cs-1,Ys=at(bs,tn.b),Hn=tn.K,tn=tn.w+(Xt>>tn.b)*Ys;Xt<Et;){var fr=Hn,ja=tn,Yn=1;for(Tc(Ge,xt,Wt,ss-bs,1,Wt,ss);Yn<bs;){var Vt=(Yn&~an)+cs;Vt>bs&&(Vt=bs),(0,Mi[fr[ja++]>>8&15])(Ge,xt+ +Yn,Wt,ss+Yn-bs,Vt-Yn,Wt,ss+Yn),Yn=Vt}xt+=bs,ss+=bs,++Xt&an||(tn+=Ys)}It!=We.nc&&r(ke,Ue-jt,ke,Ue+(It-ft-1)*jt,jt);break;case 1:for(jt=Ge,Et=xt,bs=(Ge=We.Ea)-(ss=Ge&~(Wt=(xt=1<<We.b)-1)),Xt=at(Ge,We.b),cs=We.K,We=We.w+(ft>>We.b)*Xt;ft<It;){for(an=cs,Ys=We,Hn=new qe,tn=Et+ss,fr=Et+Ge;Et<tn;)De(an[Ys++],Hn),Fc(Hn,jt,Et,xt,ke,Ue),Et+=xt,Ue+=xt;Et<fr&&(De(an[Ys++],Hn),Fc(Hn,jt,Et,bs,ke,Ue),Et+=bs,Ue+=bs),++ft&Wt||(We+=Xt)}break;case 3:if(Ge==ke&&xt==Ue&&0<We.b){for(Et=ke,Ge=jt=Ue+(It-ft)*jt-(ss=(It-ft)*at(We.Ea,We.b)),xt=ke,Wt=Ue,Xt=[],ss=(bs=ss)-1;0<=ss;--ss)Xt[ss]=xt[Wt+ss];for(ss=bs-1;0<=ss;--ss)Et[Ge+ss]=Xt[ss];qi(We,ft,It,ke,jt,ke,Ue)}else qi(We,ft,It,Ge,xt,ke,Ue)}Ue=ce,ke=W}ke!=W&&r(ce,W,Ue,ke,Ie)}function Rt(E,M){var W=E.V,ce=E.Ba+E.c*E.C,Se=M-E.C;if(s(M<=E.l.o),s(16>=Se),0<Se){var Ie=E.l,Re=E.Ta,Ue=E.Ua,ke=Ie.width;if(ot(E,Se,W,ce),Se=Ue=[Ue],s((W=E.C)<(ce=M)),s(Ie.v<Ie.va),ce>Ie.o&&(ce=Ie.o),W<Ie.j){var We=Ie.j-W;W=Ie.j,Se[0]+=We*ke}if(W>=ce?W=0:(Se[0]+=4*Ie.v,Ie.ka=W-Ie.j,Ie.U=Ie.va-Ie.v,Ie.T=ce-W,W=1),W){if(Ue=Ue[0],11>(W=E.ca).S){var ft=W.f.RGBA,It=(ce=W.S,Se=Ie.U,Ie=Ie.T,We=ft.eb,ft.A),Ge=Ie;for(ft=ft.fb+E.Ma*ft.A;0<Ge--;){var xt=Re,jt=Ue,Xt=Se,Et=We,Wt=ft;switch(ce){case jA:Ic(xt,jt,Xt,Et,Wt);break;case Hi:el(xt,jt,Xt,Et,Wt);break;case Vd:el(xt,jt,Xt,Et,Wt),nc(Et,Wt,0,Xt,1,0);break;case Dl:tl(xt,jt,Xt,Et,Wt);break;case Co:Yt(xt,jt,Xt,Et,Wt,1);break;case wA:Yt(xt,jt,Xt,Et,Wt,1),nc(Et,Wt,0,Xt,1,0);break;case zd:Yt(xt,jt,Xt,Et,Wt,0);break;case od:Yt(xt,jt,Xt,Et,Wt,0),nc(Et,Wt,1,Xt,1,0);break;case Ql:dl(xt,jt,Xt,Et,Wt);break;case Uc:dl(xt,jt,Xt,Et,Wt),oo(Et,Wt,Xt,1,0);break;case rc:Al(xt,jt,Xt,Et,Wt);break;default:s(0)}Ue+=ke,ft+=It}E.Ma+=Ie}else alert("todo:EmitRescaledRowsYUVA");s(E.Ma<=W.height)}}E.C=M,s(E.C<=E.i)}function Mt(E){var M;if(0<E.ua)return 0;for(M=0;M<E.Wb;++M){var W=E.Ya[M].G,ce=E.Ya[M].H;if(0<W[1][ce[1]+0].g||0<W[2][ce[2]+0].g||0<W[3][ce[3]+0].g)return 0}return 1}function kt(E,M,W,ce,Se,Ie){if(E.Z!=0){var Re=E.qd,Ue=E.rd;for(s(fl[E.Z]!=null);M<W;++M)fl[E.Z](Re,Ue,ce,Se,ce,Se,Ie),Re=ce,Ue=Se,Se+=Ie;E.qd=Re,E.rd=Ue}}function fs(E,M){var W=E.l.ma,ce=W.Z==0||W.Z==1?E.l.j:E.C;if(ce=E.C<ce?ce:E.C,s(M<=E.l.o),M>ce){var Se=E.l.width,Ie=W.ca,Re=W.tb+Se*ce,Ue=E.V,ke=E.Ba+E.c*ce,We=E.gc;s(E.ab==1),s(We[0].hc==3),Ei(We[0],ce,M,Ue,ke,Ie,Re),kt(W,ce,M,Ie,Re,Se)}E.C=E.Ma=M}function ms(E,M,W,ce,Se,Ie,Re){var Ue=E.$/ce,ke=E.$%ce,We=E.m,ft=E.s,It=W+E.$,Ge=It;Se=W+ce*Se;var xt=W+ce*Ie,jt=280+ft.ua,Xt=E.Pb?Ue:16777216,Et=0<ft.ua?ft.Wa:null,Wt=ft.wc,ss=It<xt?Os(ft,ke,Ue):null;s(E.C<Ie),s(xt<=Se);var bs=!1;e:for(;;){for(;bs||It<xt;){var cs=0;if(Ue>=Xt){var an=It-W;s((Xt=E).Pb),Xt.wd=Xt.m,Xt.xd=an,0<Xt.s.ua&&dt(Xt.s.Wa,Xt.s.vb),Xt=Ue+ic}if(ke&Wt||(ss=Os(ft,ke,Ue)),s(ss!=null),ss.Qb&&(M[It]=ss.qb,bs=!0),!bs)if(je(We),ss.jc){cs=We,an=M;var Ys=It,Hn=ss.pd[we(cs)&Bo-1];s(ss.jc),256>Hn.g?(be(cs,cs.u+Hn.g),an[Ys]=Hn.value,cs=0):(be(cs,cs.u+Hn.g-256),s(256<=Hn.value),cs=Hn.value),cs==0&&(bs=!0)}else cs=Bs(ss.G[0],ss.H[0],We);if(We.h)break;if(bs||256>cs){if(!bs)if(ss.nd)M[It]=(ss.qb|cs<<8)>>>0;else{if(je(We),bs=Bs(ss.G[1],ss.H[1],We),je(We),an=Bs(ss.G[2],ss.H[2],We),Ys=Bs(ss.G[3],ss.H[3],We),We.h)break;M[It]=(Ys<<24|bs<<16|cs<<8|an)>>>0}if(bs=!1,++It,++ke>=ce&&(ke=0,++Ue,Re!=null&&Ue<=Ie&&!(Ue%16)&&Re(E,Ue),Et!=null))for(;Ge<It;)cs=M[Ge++],Et.X[(506832829*cs&4294967295)>>>Et.Mb]=cs}else if(280>cs){if(cs=En(cs-256,We),an=Bs(ss.G[4],ss.H[4],We),je(We),an=Ls(ce,an=En(an,We)),We.h)break;if(It-W<an||Se-It<cs)break e;for(Ys=0;Ys<cs;++Ys)M[It+Ys]=M[It+Ys-an];for(It+=cs,ke+=cs;ke>=ce;)ke-=ce,++Ue,Re!=null&&Ue<=Ie&&!(Ue%16)&&Re(E,Ue);if(s(It<=Se),ke&Wt&&(ss=Os(ft,ke,Ue)),Et!=null)for(;Ge<It;)cs=M[Ge++],Et.X[(506832829*cs&4294967295)>>>Et.Mb]=cs}else{if(!(cs<jt))break e;for(bs=cs-280,s(Et!=null);Ge<It;)cs=M[Ge++],Et.X[(506832829*cs&4294967295)>>>Et.Mb]=cs;cs=It,s(!(bs>>>(an=Et).Xa)),M[cs]=an.X[bs],bs=!0}bs||s(We.h==pe(We))}if(E.Pb&&We.h&&It<Se)s(E.m.h),E.a=5,E.m=E.wd,E.$=E.xd,0<E.s.ua&&dt(E.s.vb,E.s.Wa);else{if(We.h)break e;Re?.(E,Ue>Ie?Ie:Ue),E.a=0,E.$=It-W}return 1}return E.a=3,0}function Ds(E){s(E!=null),E.vc=null,E.yc=null,E.Ya=null;var M=E.Wa;M!=null&&(M.X=null),E.vb=null,s(E!=null)}function js(){var E=new _n;return E==null?null:(E.a=0,E.xb=Cu,Cs("Predictor","VP8LPredictors"),Cs("Predictor","VP8LPredictors_C"),Cs("PredictorAdd","VP8LPredictorsAdd"),Cs("PredictorAdd","VP8LPredictorsAdd_C"),Ha=et,Fc=rt,Ic=ls,el=Ht,dl=Kt,Al=lt,tl=Gt,X.VP8LMapColor32b=Ci,X.VP8LMapColor8b=Sr,E)}function Lt(E,M,W,ce,Se){var Ie=1,Re=[E],Ue=[M],ke=ce.m,We=ce.s,ft=null,It=0;e:for(;;){if(W)for(;Ie&&me(ke,1);){var Ge=Re,xt=Ue,jt=ce,Xt=1,Et=jt.m,Wt=jt.gc[jt.ab],ss=me(Et,2);if(jt.Oc&1<<ss)Ie=0;else{switch(jt.Oc|=1<<ss,Wt.hc=ss,Wt.Ea=Ge[0],Wt.nc=xt[0],Wt.K=[null],++jt.ab,s(4>=jt.ab),ss){case 0:case 1:Wt.b=me(Et,3)+2,Xt=Lt(at(Wt.Ea,Wt.b),at(Wt.nc,Wt.b),0,jt,Wt.K),Wt.K=Wt.K[0];break;case 3:var bs,cs=me(Et,8)+1,an=16<cs?0:4<cs?1:2<cs?2:3;if(Ge[0]=at(Wt.Ea,an),Wt.b=an,bs=Xt=Lt(cs,1,0,jt,Wt.K)){var Ys,Hn=cs,tn=Wt,fr=1<<(8>>tn.b),ja=c(fr);if(ja==null)bs=0;else{var Yn=tn.K[0],Vt=tn.w;for(ja[0]=tn.K[0][0],Ys=1;Ys<1*Hn;++Ys)ja[Ys]=Dt(Yn[Vt+Ys],ja[Ys-1]);for(;Ys<4*fr;++Ys)ja[Ys]=0;tn.K[0]=null,tn.K[0]=ja,bs=1}}Xt=bs;break;case 2:break;default:s(0)}Ie=Xt}}if(Re=Re[0],Ue=Ue[0],Ie&&me(ke,1)&&!(Ie=1<=(It=me(ke,4))&&11>=It)){ce.a=3;break e}var Us;if(Us=Ie)t:{var Ua,In,Un,Zr=ce,ri=Re,Xa=Ue,ea=It,ai=W,Ki=Zr.m,ii=Zr.s,Vn=[null],Nr=1,wa=0,kr=Fo[ea];s:for(;;){if(ai&&me(Ki,1)){var oi=me(Ki,3)+2,La=at(ri,oi),Br=at(Xa,oi),Ja=La*Br;if(!Lt(La,Br,0,Zr,Vn))break s;for(Vn=Vn[0],ii.xc=oi,Ua=0;Ua<Ja;++Ua){var ta=Vn[Ua]>>8&65535;Vn[Ua]=ta,ta>=Nr&&(Nr=ta+1)}}if(Ki.h)break s;for(In=0;5>In;++In){var li=Lc[In];!In&&0<ea&&(li+=1<<ea),wa<li&&(wa=li)}var ci=A(Nr*kr,ue),la=Nr,Rr=A(la,re);if(Rr==null)var zi=null;else s(65536>=la),zi=Rr;var za=c(wa);if(zi==null||za==null||ci==null){Zr.a=1;break s}var jn=ci;for(Ua=Un=0;Ua<Nr;++Ua){var Tn=zi[Ua],Dr=Tn.G,ro=Tn.H,Ao=0,Ji=1,Da=0;for(In=0;5>In;++In){li=Lc[In],Dr[In]=jn,ro[In]=Un,!In&&0<ea&&(li+=1<<ea);r:{var uc,gl=li,ud=Zr,ca=za,FA=jn,Eu=Un,qd=0,rl=ud.m,Tu=me(rl,1);if(i(ca,0,0,gl),Tu){var IA=me(rl,1)+1,RA=me(rl,1),Wd=me(rl,RA==0?1:8);ca[Wd]=1,IA==2&&(ca[Wd=me(rl,8)]=1);var mi=1}else{var Ea=c(19),Yd=me(rl,4)+4;if(19<Yd){ud.a=3;var hc=0;break r}for(uc=0;uc<Yd;++uc)Ea[ac[uc]]=me(rl,3);var hd=void 0,ji=void 0,Oo=ud,OA=Ea,fd=gl,UA=ca,LA=0,Ml=Oo.m,Fu=8,Iu=A(128,ue);n:for(;le(Iu,0,7,OA,19);){if(me(Ml,1)){var Oh=2+2*me(Ml,3);if((hd=2+me(Ml,Oh))>fd)break n}else hd=fd;for(ji=0;ji<fd&&hd--;){je(Ml);var Ru=Iu[0+(127&we(Ml))];be(Ml,Ml.u+Ru.g);var Pl=Ru.value;if(16>Pl)UA[ji++]=Pl,Pl!=0&&(Fu=Pl);else{var Uh=Pl==16,DA=Pl-16,Ou=ld[DA],gi=me(Ml,Eo[DA])+Ou;if(ji+gi>fd)break n;for(var pd=Uh?Fu:0;0<gi--;)UA[ji++]=pd}}LA=1;break n}LA||(Oo.a=3),mi=LA}(mi=mi&&!rl.h)&&(qd=le(FA,Eu,8,ca,gl)),mi&&qd!=0?hc=qd:(ud.a=3,hc=0)}if(hc==0)break s;if(Ji&&SA[In]==1&&(Ji=jn[Un].g==0),Ao+=jn[Un].g,Un+=hc,3>=In){var Qc,QA=za[0];for(Qc=1;Qc<li;++Qc)za[Qc]>QA&&(QA=za[Qc]);Da+=QA}}if(Tn.nd=Ji,Tn.Qb=0,Ji&&(Tn.qb=(Dr[3][ro[3]+0].value<<24|Dr[1][ro[1]+0].value<<16|Dr[2][ro[2]+0].value)>>>0,Ao==0&&256>Dr[0][ro[0]+0].value&&(Tn.Qb=1,Tn.qb+=Dr[0][ro[0]+0].value<<8)),Tn.jc=!Tn.Qb&&6>Da,Tn.jc){var md,Uo=Tn;for(md=0;md<Bo;++md){var kl=md,Hl=Uo.pd[kl],_A=Uo.G[0][Uo.H[0]+kl];256<=_A.value?(Hl.g=_A.g+256,Hl.value=_A.value):(Hl.g=0,Hl.value=0,kl>>=Ms(_A,8,Hl),kl>>=Ms(Uo.G[1][Uo.H[1]+kl],16,Hl),kl>>=Ms(Uo.G[2][Uo.H[2]+kl],0,Hl),Ms(Uo.G[3][Uo.H[3]+kl],24,Hl))}}}ii.vc=Vn,ii.Wb=Nr,ii.Ya=zi,ii.yc=ci,Us=1;break t}Us=0}if(!(Ie=Us)){ce.a=3;break e}if(0<It){if(We.ua=1<<It,!de(We.Wa,It)){ce.a=1,Ie=0;break e}}else We.ua=0;var MA=ce,_c=Re,Lh=Ue,gd=MA.s,yd=gd.xc;if(MA.c=_c,MA.i=Lh,gd.md=at(_c,yd),gd.wc=yd==0?-1:(1<<yd)-1,W){ce.xb=oc;break e}if((ft=c(Re*Ue))==null){ce.a=1,Ie=0;break e}Ie=(Ie=ms(ce,ft,0,Re,Ue,Ue,null))&&!ke.h;break e}return Ie?(Se!=null?Se[0]=ft:(s(ft==null),s(W)),ce.$=0,W||Ds(We)):Ds(We),Ie}function Hs(E,M){var W=E.c*E.i,ce=W+M+16*M;return s(E.c<=M),E.V=c(ce),E.V==null?(E.Ta=null,E.Ua=0,E.a=1,0):(E.Ta=E.V,E.Ua=E.Ba+W+M,1)}function Wr(E,M){var W=E.C,ce=M-W,Se=E.V,Ie=E.Ba+E.c*W;for(s(M<=E.l.o);0<ce;){var Re=16<ce?16:ce,Ue=E.l.ma,ke=E.l.width,We=ke*Re,ft=Ue.ca,It=Ue.tb+ke*W,Ge=E.Ta,xt=E.Ua;ot(E,Re,Se,Ie),lo(Ge,xt,ft,It,We),kt(Ue,W,W+Re,ft,It,ke),ce-=Re,Se+=Re*E.c,W+=Re}s(W==M),E.C=E.Ma=M}function sr(){this.ub=this.yd=this.td=this.Rb=0}function ds(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function mn(){this.Fb=this.Bb=this.Cb=0,this.Zb=c(4),this.Lb=c(4)}function cr(){this.Yb=(function(){var E=[];return(function M(W,ce,Se){for(var Ie=Se[ce],Re=0;Re<Ie&&(W.push(Se.length>ce+1?[]:0),!(Se.length<ce+1));Re++)M(W[Re],ce+1,Se)})(E,0,[3,11]),E})()}function nr(){this.jb=c(3),this.Wc=u([4,8],cr),this.Xc=u([4,17],cr)}function sn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new c(4),this.od=new c(4)}function gn(){this.ld=this.La=this.dd=this.tc=0}function qn(){this.Na=this.la=0}function Yr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Gr(){this.ad=c(384),this.Za=0,this.Ob=c(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ra(){this.uc=this.M=this.Nb=0,this.wa=Array(new gn),this.Y=0,this.ya=Array(new Gr),this.aa=0,this.l=new Es}function gr(){this.y=c(16),this.f=c(8),this.ea=c(8)}function Ks(){this.cb=this.a=0,this.sc="",this.m=new Z,this.Od=new sr,this.Kc=new ds,this.ed=new sn,this.Qa=new mn,this.Ic=this.$c=this.Aa=0,this.D=new ra,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=A(8,Z),this.ia=0,this.pb=A(4,Yr),this.Pa=new nr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new gr),this.Hd=0,this.rb=Array(new qn),this.sb=0,this.wa=Array(new gn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Gr),this.L=this.aa=0,this.gd=u([4,2],gn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function en(E,M){return 0>E?0:E>M?M:E}function Es(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function rn(){var E=new Ks;return E!=null&&(E.a=0,E.sc="OK",E.cb=0,E.Xb=0,co||(co=us)),E}function Ps(E,M,W){return E.a==0&&(E.a=M,E.sc=W,E.cb=0),0}function wr(E,M,W){return 3<=W&&E[M+0]==157&&E[M+1]==1&&E[M+2]==42}function Ze(E,M){if(E==null)return 0;if(E.a=0,E.sc="OK",M==null)return Ps(E,2,"null VP8Io passed to VP8GetHeaders()");var W=M.data,ce=M.w,Se=M.ha;if(4>Se)return Ps(E,7,"Truncated header.");var Ie=W[ce+0]|W[ce+1]<<8|W[ce+2]<<16,Re=E.Od;if(Re.Rb=!(1&Ie),Re.td=Ie>>1&7,Re.yd=Ie>>4&1,Re.ub=Ie>>5,3<Re.td)return Ps(E,3,"Incorrect keyframe parameters.");if(!Re.yd)return Ps(E,4,"Frame not displayable.");ce+=3,Se-=3;var Ue=E.Kc;if(Re.Rb){if(7>Se)return Ps(E,7,"cannot parse picture header");if(!wr(W,ce,Se))return Ps(E,3,"Bad code word");Ue.c=16383&(W[ce+4]<<8|W[ce+3]),Ue.Td=W[ce+4]>>6,Ue.i=16383&(W[ce+6]<<8|W[ce+5]),Ue.Ud=W[ce+6]>>6,ce+=7,Se-=7,E.za=Ue.c+15>>4,E.Ub=Ue.i+15>>4,M.width=Ue.c,M.height=Ue.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,i((Ie=E.Pa).jb,0,255,Ie.jb.length),s((Ie=E.Qa)!=null),Ie.Cb=0,Ie.Bb=0,Ie.Fb=1,i(Ie.Zb,0,0,Ie.Zb.length),i(Ie.Lb,0,0,Ie.Lb)}if(Re.ub>Se)return Ps(E,7,"bad partition length");ne(Ie=E.m,W,ce,Re.ub),ce+=Re.ub,Se-=Re.ub,Re.Rb&&(Ue.Ld=Je(Ie),Ue.Kd=Je(Ie)),Ue=E.Qa;var ke,We=E.Pa;if(s(Ie!=null),s(Ue!=null),Ue.Cb=Je(Ie),Ue.Cb){if(Ue.Bb=Je(Ie),Je(Ie)){for(Ue.Fb=Je(Ie),ke=0;4>ke;++ke)Ue.Zb[ke]=Je(Ie)?se(Ie,7):0;for(ke=0;4>ke;++ke)Ue.Lb[ke]=Je(Ie)?se(Ie,6):0}if(Ue.Bb)for(ke=0;3>ke;++ke)We.jb[ke]=Je(Ie)?oe(Ie,8):255}else Ue.Bb=0;if(Ie.Ka)return Ps(E,3,"cannot parse segment header");if((Ue=E.ed).zd=Je(Ie),Ue.Tb=oe(Ie,6),Ue.wb=oe(Ie,3),Ue.Pc=Je(Ie),Ue.Pc&&Je(Ie)){for(We=0;4>We;++We)Je(Ie)&&(Ue.vd[We]=se(Ie,6));for(We=0;4>We;++We)Je(Ie)&&(Ue.od[We]=se(Ie,6))}if(E.L=Ue.Tb==0?0:Ue.zd?1:2,Ie.Ka)return Ps(E,3,"cannot parse filter header");var ft=Se;if(Se=ke=ce,ce=ke+ft,Ue=ft,E.Xb=(1<<oe(E.m,2))-1,ft<3*(We=E.Xb))W=7;else{for(ke+=3*We,Ue-=3*We,ft=0;ft<We;++ft){var It=W[Se+0]|W[Se+1]<<8|W[Se+2]<<16;It>Ue&&(It=Ue),ne(E.Jc[+ft],W,ke,It),ke+=It,Ue-=It,Se+=3}ne(E.Jc[+We],W,ke,Ue),W=ke<ce?0:5}if(W!=0)return Ps(E,W,"cannot parse partitions");for(W=oe(ke=E.m,7),Se=Je(ke)?se(ke,4):0,ce=Je(ke)?se(ke,4):0,Ue=Je(ke)?se(ke,4):0,We=Je(ke)?se(ke,4):0,ke=Je(ke)?se(ke,4):0,ft=E.Qa,It=0;4>It;++It){if(ft.Cb){var Ge=ft.Zb[It];ft.Fb||(Ge+=W)}else{if(0<It){E.pb[It]=E.pb[0];continue}Ge=W}var xt=E.pb[It];xt.Sc[0]=Io[en(Ge+Se,127)],xt.Sc[1]=Yi[en(Ge+0,127)],xt.Eb[0]=2*Io[en(Ge+ce,127)],xt.Eb[1]=101581*Yi[en(Ge+Ue,127)]>>16,8>xt.Eb[1]&&(xt.Eb[1]=8),xt.Qc[0]=Io[en(Ge+We,117)],xt.Qc[1]=Yi[en(Ge+ke,127)],xt.lc=Ge+ke}if(!Re.Rb)return Ps(E,4,"Not a key frame.");for(Je(Ie),Re=E.Pa,W=0;4>W;++W){for(Se=0;8>Se;++Se)for(ce=0;3>ce;++ce)for(Ue=0;11>Ue;++Ue)We=Qe(Ie,ba[W][Se][ce][Ue])?oe(Ie,8):Ih[W][Se][ce][Ue],Re.Wc[W][Se].Yb[ce][Ue]=We;for(Se=0;17>Se;++Se)Re.Xc[W][Se]=Re.Wc[W][xr[Se]]}return E.kc=Je(Ie),E.kc&&(E.Bd=oe(Ie,8)),E.cb=1}function us(E,M,W,ce,Se,Ie,Re){var Ue=M[Se].Yb[W];for(W=0;16>Se;++Se){if(!Qe(E,Ue[W+0]))return Se;for(;!Qe(E,Ue[W+1]);)if(Ue=M[++Se].Yb[0],W=0,Se==16)return 16;var ke=M[Se+1].Yb;if(Qe(E,Ue[W+2])){var We=E,ft=0;if(Qe(We,(Ge=Ue)[(It=W)+3]))if(Qe(We,Ge[It+6])){for(Ue=0,It=2*(ft=Qe(We,Ge[It+8]))+(Ge=Qe(We,Ge[It+9+ft])),ft=0,Ge=Fh[It];Ge[Ue];++Ue)ft+=ft+Qe(We,Ge[Ue]);ft+=3+(8<<It)}else Qe(We,Ge[It+7])?(ft=7+2*Qe(We,165),ft+=Qe(We,145)):ft=5+Qe(We,159);else ft=Qe(We,Ge[It+4])?3+Qe(We,Ge[It+5]):2;Ue=ke[2]}else ft=1,Ue=ke[1];ke=Re+Bu[Se],0>(We=E).b&&Ne(We);var It,Ge=We.b,xt=(It=We.Ca>>1)-(We.I>>Ge)>>31;--We.b,We.Ca+=xt,We.Ca|=1,We.I-=(It+1&xt)<<Ge,Ie[ke]=((ft^xt)-xt)*ce[(0<Se)+0]}return 16}function is(E){var M=E.rb[E.sb-1];M.la=0,M.Na=0,i(E.zc,0,0,E.zc.length),E.ja=0}function yn(E,M,W,ce,Se){Se=E[M+W+32*ce]+(Se>>3),E[M+W+32*ce]=-256&Se?0>Se?0:255:Se}function Jn(E,M,W,ce,Se,Ie){yn(E,M,0,W,ce+Se),yn(E,M,1,W,ce+Ie),yn(E,M,2,W,ce-Ie),yn(E,M,3,W,ce-Se)}function zn(E){return(20091*E>>16)+E}function ua(E,M,W,ce){var Se,Ie=0,Re=c(16);for(Se=0;4>Se;++Se){var Ue=E[M+0]+E[M+8],ke=E[M+0]-E[M+8],We=(35468*E[M+4]>>16)-zn(E[M+12]),ft=zn(E[M+4])+(35468*E[M+12]>>16);Re[Ie+0]=Ue+ft,Re[Ie+1]=ke+We,Re[Ie+2]=ke-We,Re[Ie+3]=Ue-ft,Ie+=4,M++}for(Se=Ie=0;4>Se;++Se)Ue=(E=Re[Ie+0]+4)+Re[Ie+8],ke=E-Re[Ie+8],We=(35468*Re[Ie+4]>>16)-zn(Re[Ie+12]),yn(W,ce,0,0,Ue+(ft=zn(Re[Ie+4])+(35468*Re[Ie+12]>>16))),yn(W,ce,1,0,ke+We),yn(W,ce,2,0,ke-We),yn(W,ce,3,0,Ue-ft),Ie++,ce+=32}function ga(E,M,W,ce){var Se=E[M+0]+4,Ie=35468*E[M+4]>>16,Re=zn(E[M+4]),Ue=35468*E[M+1]>>16;Jn(W,ce,0,Se+Re,E=zn(E[M+1]),Ue),Jn(W,ce,1,Se+Ie,E,Ue),Jn(W,ce,2,Se-Ie,E,Ue),Jn(W,ce,3,Se-Re,E,Ue)}function ha(E,M,W,ce,Se){ua(E,M,W,ce),Se&&ua(E,M+16,W,ce+4)}function Tr(E,M,W,ce){Ll(E,M+0,W,ce,1),Ll(E,M+32,W,ce+128,1)}function $a(E,M,W,ce){var Se;for(E=E[M+0]+4,Se=0;4>Se;++Se)for(M=0;4>M;++M)yn(W,ce,M,Se,E)}function ya(E,M,W,ce){E[M+0]&&Lr(E,M+0,W,ce),E[M+16]&&Lr(E,M+16,W,ce+4),E[M+32]&&Lr(E,M+32,W,ce+128),E[M+48]&&Lr(E,M+48,W,ce+128+4)}function rr(E,M,W,ce){var Se,Ie=c(16);for(Se=0;4>Se;++Se){var Re=E[M+0+Se]+E[M+12+Se],Ue=E[M+4+Se]+E[M+8+Se],ke=E[M+4+Se]-E[M+8+Se],We=E[M+0+Se]-E[M+12+Se];Ie[0+Se]=Re+Ue,Ie[8+Se]=Re-Ue,Ie[4+Se]=We+ke,Ie[12+Se]=We-ke}for(Se=0;4>Se;++Se)Re=(E=Ie[0+4*Se]+3)+Ie[3+4*Se],Ue=Ie[1+4*Se]+Ie[2+4*Se],ke=Ie[1+4*Se]-Ie[2+4*Se],We=E-Ie[3+4*Se],W[ce+0]=Re+Ue>>3,W[ce+16]=We+ke>>3,W[ce+32]=Re-Ue>>3,W[ce+48]=We-ke>>3,ce+=64}function oa(E,M,W){var ce,Se=M-32,Ie=ki,Re=255-E[Se-1];for(ce=0;ce<W;++ce){var Ue,ke=Ie,We=Re+E[M-1];for(Ue=0;Ue<W;++Ue)E[M+Ue]=ke[We+E[Se+Ue]];M+=32}}function Ga(E,M){oa(E,M,4)}function fi(E,M){oa(E,M,8)}function xa(E,M){oa(E,M,16)}function ie(E,M){var W;for(W=0;16>W;++W)r(E,M+32*W,E,M-32,16)}function G(E,M){var W;for(W=16;0<W;--W)i(E,M,E[M-1],16),M+=32}function ve(E,M,W){var ce;for(ce=0;16>ce;++ce)i(M,W+32*ce,E,16)}function Le(E,M){var W,ce=16;for(W=0;16>W;++W)ce+=E[M-1+32*W]+E[M+W-32];ve(ce>>5,E,M)}function Xe(E,M){var W,ce=8;for(W=0;16>W;++W)ce+=E[M-1+32*W];ve(ce>>4,E,M)}function vt(E,M){var W,ce=8;for(W=0;16>W;++W)ce+=E[M+W-32];ve(ce>>4,E,M)}function ut(E,M){ve(128,E,M)}function Pe(E,M,W){return E+2*M+W+2>>2}function Bt(E,M){var W,ce=M-32;for(ce=new Uint8Array([Pe(E[ce-1],E[ce+0],E[ce+1]),Pe(E[ce+0],E[ce+1],E[ce+2]),Pe(E[ce+1],E[ce+2],E[ce+3]),Pe(E[ce+2],E[ce+3],E[ce+4])]),W=0;4>W;++W)r(E,M+32*W,ce,0,ce.length)}function _t(E,M){var W=E[M-1],ce=E[M-1+32],Se=E[M-1+64],Ie=E[M-1+96];pt(E,M+0,16843009*Pe(E[M-1-32],W,ce)),pt(E,M+32,16843009*Pe(W,ce,Se)),pt(E,M+64,16843009*Pe(ce,Se,Ie)),pt(E,M+96,16843009*Pe(Se,Ie,Ie))}function xn(E,M){var W,ce=4;for(W=0;4>W;++W)ce+=E[M+W-32]+E[M-1+32*W];for(ce>>=3,W=0;4>W;++W)i(E,M+32*W,ce,4)}function Dn(E,M){var W=E[M-1+0],ce=E[M-1+32],Se=E[M-1+64],Ie=E[M-1-32],Re=E[M+0-32],Ue=E[M+1-32],ke=E[M+2-32],We=E[M+3-32];E[M+0+96]=Pe(ce,Se,E[M-1+96]),E[M+1+96]=E[M+0+64]=Pe(W,ce,Se),E[M+2+96]=E[M+1+64]=E[M+0+32]=Pe(Ie,W,ce),E[M+3+96]=E[M+2+64]=E[M+1+32]=E[M+0+0]=Pe(Re,Ie,W),E[M+3+64]=E[M+2+32]=E[M+1+0]=Pe(Ue,Re,Ie),E[M+3+32]=E[M+2+0]=Pe(ke,Ue,Re),E[M+3+0]=Pe(We,ke,Ue)}function ps(E,M){var W=E[M+1-32],ce=E[M+2-32],Se=E[M+3-32],Ie=E[M+4-32],Re=E[M+5-32],Ue=E[M+6-32],ke=E[M+7-32];E[M+0+0]=Pe(E[M+0-32],W,ce),E[M+1+0]=E[M+0+32]=Pe(W,ce,Se),E[M+2+0]=E[M+1+32]=E[M+0+64]=Pe(ce,Se,Ie),E[M+3+0]=E[M+2+32]=E[M+1+64]=E[M+0+96]=Pe(Se,Ie,Re),E[M+3+32]=E[M+2+64]=E[M+1+96]=Pe(Ie,Re,Ue),E[M+3+64]=E[M+2+96]=Pe(Re,Ue,ke),E[M+3+96]=Pe(Ue,ke,ke)}function Qs(E,M){var W=E[M-1+0],ce=E[M-1+32],Se=E[M-1+64],Ie=E[M-1-32],Re=E[M+0-32],Ue=E[M+1-32],ke=E[M+2-32],We=E[M+3-32];E[M+0+0]=E[M+1+64]=Ie+Re+1>>1,E[M+1+0]=E[M+2+64]=Re+Ue+1>>1,E[M+2+0]=E[M+3+64]=Ue+ke+1>>1,E[M+3+0]=ke+We+1>>1,E[M+0+96]=Pe(Se,ce,W),E[M+0+64]=Pe(ce,W,Ie),E[M+0+32]=E[M+1+96]=Pe(W,Ie,Re),E[M+1+32]=E[M+2+96]=Pe(Ie,Re,Ue),E[M+2+32]=E[M+3+96]=Pe(Re,Ue,ke),E[M+3+32]=Pe(Ue,ke,We)}function Qn(E,M){var W=E[M+0-32],ce=E[M+1-32],Se=E[M+2-32],Ie=E[M+3-32],Re=E[M+4-32],Ue=E[M+5-32],ke=E[M+6-32],We=E[M+7-32];E[M+0+0]=W+ce+1>>1,E[M+1+0]=E[M+0+64]=ce+Se+1>>1,E[M+2+0]=E[M+1+64]=Se+Ie+1>>1,E[M+3+0]=E[M+2+64]=Ie+Re+1>>1,E[M+0+32]=Pe(W,ce,Se),E[M+1+32]=E[M+0+96]=Pe(ce,Se,Ie),E[M+2+32]=E[M+1+96]=Pe(Se,Ie,Re),E[M+3+32]=E[M+2+96]=Pe(Ie,Re,Ue),E[M+3+64]=Pe(Re,Ue,ke),E[M+3+96]=Pe(Ue,ke,We)}function kn(E,M){var W=E[M-1+0],ce=E[M-1+32],Se=E[M-1+64],Ie=E[M-1+96];E[M+0+0]=W+ce+1>>1,E[M+2+0]=E[M+0+32]=ce+Se+1>>1,E[M+2+32]=E[M+0+64]=Se+Ie+1>>1,E[M+1+0]=Pe(W,ce,Se),E[M+3+0]=E[M+1+32]=Pe(ce,Se,Ie),E[M+3+32]=E[M+1+64]=Pe(Se,Ie,Ie),E[M+3+64]=E[M+2+64]=E[M+0+96]=E[M+1+96]=E[M+2+96]=E[M+3+96]=Ie}function Wn(E,M){var W=E[M-1+0],ce=E[M-1+32],Se=E[M-1+64],Ie=E[M-1+96],Re=E[M-1-32],Ue=E[M+0-32],ke=E[M+1-32],We=E[M+2-32];E[M+0+0]=E[M+2+32]=W+Re+1>>1,E[M+0+32]=E[M+2+64]=ce+W+1>>1,E[M+0+64]=E[M+2+96]=Se+ce+1>>1,E[M+0+96]=Ie+Se+1>>1,E[M+3+0]=Pe(Ue,ke,We),E[M+2+0]=Pe(Re,Ue,ke),E[M+1+0]=E[M+3+32]=Pe(W,Re,Ue),E[M+1+32]=E[M+3+64]=Pe(ce,W,Re),E[M+1+64]=E[M+3+96]=Pe(Se,ce,W),E[M+1+96]=Pe(Ie,Se,ce)}function Xr(E,M){var W;for(W=0;8>W;++W)r(E,M+32*W,E,M-32,8)}function v(E,M){var W;for(W=0;8>W;++W)i(E,M,E[M-1],8),M+=32}function N(E,M,W){var ce;for(ce=0;8>ce;++ce)i(M,W+32*ce,E,8)}function x(E,M){var W,ce=8;for(W=0;8>W;++W)ce+=E[M+W-32]+E[M-1+32*W];N(ce>>4,E,M)}function I(E,M){var W,ce=4;for(W=0;8>W;++W)ce+=E[M+W-32];N(ce>>3,E,M)}function F(E,M){var W,ce=4;for(W=0;8>W;++W)ce+=E[M-1+32*W];N(ce>>3,E,M)}function _(E,M){N(128,E,M)}function U(E,M,W){var ce=E[M-W],Se=E[M+0],Ie=3*(Se-ce)+hl[1020+E[M-2*W]-E[M+W]],Re=Kd[112+(Ie+4>>3)];E[M-W]=ki[255+ce+Kd[112+(Ie+3>>3)]],E[M+0]=ki[255+Se-Re]}function P(E,M,W,ce){var Se=E[M+0],Ie=E[M+W];return Ti[255+E[M-2*W]-E[M-W]]>ce||Ti[255+Ie-Se]>ce}function K(E,M,W,ce){return 4*Ti[255+E[M-W]-E[M+0]]+Ti[255+E[M-2*W]-E[M+W]]<=ce}function ae(E,M,W,ce,Se){var Ie=E[M-3*W],Re=E[M-2*W],Ue=E[M-W],ke=E[M+0],We=E[M+W],ft=E[M+2*W],It=E[M+3*W];return 4*Ti[255+Ue-ke]+Ti[255+Re-We]>ce?0:Ti[255+E[M-4*W]-Ie]<=Se&&Ti[255+Ie-Re]<=Se&&Ti[255+Re-Ue]<=Se&&Ti[255+It-ft]<=Se&&Ti[255+ft-We]<=Se&&Ti[255+We-ke]<=Se}function Fe(E,M,W,ce){var Se=2*ce+1;for(ce=0;16>ce;++ce)K(E,M+ce,W,Se)&&U(E,M+ce,W)}function Ye(E,M,W,ce){var Se=2*ce+1;for(ce=0;16>ce;++ce)K(E,M+ce*W,1,Se)&&U(E,M+ce*W,1)}function tt(E,M,W,ce){var Se;for(Se=3;0<Se;--Se)Fe(E,M+=4*W,W,ce)}function Ft(E,M,W,ce){var Se;for(Se=3;0<Se;--Se)Ye(E,M+=4,W,ce)}function Zt(E,M,W,ce,Se,Ie,Re,Ue){for(Ie=2*Ie+1;0<Se--;){if(ae(E,M,W,Ie,Re))if(P(E,M,W,Ue))U(E,M,W);else{var ke=E,We=M,ft=W,It=ke[We-2*ft],Ge=ke[We-ft],xt=ke[We+0],jt=ke[We+ft],Xt=ke[We+2*ft],Et=27*(ss=hl[1020+3*(xt-Ge)+hl[1020+It-jt]])+63>>7,Wt=18*ss+63>>7,ss=9*ss+63>>7;ke[We-3*ft]=ki[255+ke[We-3*ft]+ss],ke[We-2*ft]=ki[255+It+Wt],ke[We-ft]=ki[255+Ge+Et],ke[We+0]=ki[255+xt-Et],ke[We+ft]=ki[255+jt-Wt],ke[We+2*ft]=ki[255+Xt-ss]}M+=ce}}function as(E,M,W,ce,Se,Ie,Re,Ue){for(Ie=2*Ie+1;0<Se--;){if(ae(E,M,W,Ie,Re))if(P(E,M,W,Ue))U(E,M,W);else{var ke=E,We=M,ft=W,It=ke[We-ft],Ge=ke[We+0],xt=ke[We+ft],jt=Kd[112+(4+(Xt=3*(Ge-It))>>3)],Xt=Kd[112+(Xt+3>>3)],Et=jt+1>>1;ke[We-2*ft]=ki[255+ke[We-2*ft]+Et],ke[We-ft]=ki[255+It+Xt],ke[We+0]=ki[255+Ge-jt],ke[We+ft]=ki[255+xt-Et]}M+=ce}}function xs(E,M,W,ce,Se,Ie){Zt(E,M,W,1,16,ce,Se,Ie)}function Gs(E,M,W,ce,Se,Ie){Zt(E,M,1,W,16,ce,Se,Ie)}function Rn(E,M,W,ce,Se,Ie){var Re;for(Re=3;0<Re;--Re)as(E,M+=4*W,W,1,16,ce,Se,Ie)}function V(E,M,W,ce,Se,Ie){var Re;for(Re=3;0<Re;--Re)as(E,M+=4,1,W,16,ce,Se,Ie)}function ye(E,M,W,ce,Se,Ie,Re,Ue){Zt(E,M,Se,1,8,Ie,Re,Ue),Zt(W,ce,Se,1,8,Ie,Re,Ue)}function He(E,M,W,ce,Se,Ie,Re,Ue){Zt(E,M,1,Se,8,Ie,Re,Ue),Zt(W,ce,1,Se,8,Ie,Re,Ue)}function it(E,M,W,ce,Se,Ie,Re,Ue){as(E,M+4*Se,Se,1,8,Ie,Re,Ue),as(W,ce+4*Se,Se,1,8,Ie,Re,Ue)}function bt(E,M,W,ce,Se,Ie,Re,Ue){as(E,M+4,1,Se,8,Ie,Re,Ue),as(W,ce+4,1,Se,8,Ie,Re,Ue)}function es(){this.ba=new ws,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new qt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function hs(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function nn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function hn(){this.ua=0,this.Wa=new st,this.vb=new st,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new re,this.yc=new ue}function _n(){this.xb=this.a=0,this.l=new Es,this.ca=new ws,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ge,this.Pb=0,this.wd=new ge,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new hn,this.ab=0,this.gc=A(4,nn),this.Oc=0}function Zn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Es,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fr(E,M,W,ce,Se,Ie,Re){for(E=E==null?0:E[M+0],M=0;M<Re;++M)Se[Ie+M]=E+W[ce+M]&255,E=Se[Ie+M]}function Ra(E,M,W,ce,Se,Ie,Re){var Ue;if(E==null)Fr(null,null,W,ce,Se,Ie,Re);else for(Ue=0;Ue<Re;++Ue)Se[Ie+Ue]=E[M+Ue]+W[ce+Ue]&255}function qa(E,M,W,ce,Se,Ie,Re){if(E==null)Fr(null,null,W,ce,Se,Ie,Re);else{var Ue,ke=E[M+0],We=ke,ft=ke;for(Ue=0;Ue<Re;++Ue)We=ft+(ke=E[M+Ue])-We,ft=W[ce+Ue]+(-256&We?0>We?0:255:We)&255,We=ke,Se[Ie+Ue]=ft}}function Jr(E,M,W,ce){var Se=M.width,Ie=M.o;if(s(E!=null&&M!=null),0>W||0>=ce||W+ce>Ie)return null;if(!E.Cc){if(E.ga==null){var Re;if(E.ga=new Zn,(Re=E.ga==null)||(Re=M.width*M.o,s(E.Gb.length==0),E.Gb=c(Re),E.Uc=0,E.Gb==null?Re=0:(E.mb=E.Gb,E.nb=E.Uc,E.rc=null,Re=1),Re=!Re),!Re){Re=E.ga;var Ue=E.Fa,ke=E.P,We=E.qc,ft=E.mb,It=E.nb,Ge=ke+1,xt=We-1,jt=Re.l;if(s(Ue!=null&&ft!=null&&M!=null),fl[0]=null,fl[1]=Fr,fl[2]=Ra,fl[3]=qa,Re.ca=ft,Re.tb=It,Re.c=M.width,Re.i=M.height,s(0<Re.c&&0<Re.i),1>=We)M=0;else if(Re.$a=3&Ue[ke+0],Re.Z=Ue[ke+0]>>2&3,Re.Lc=Ue[ke+0]>>4&3,ke=Ue[ke+0]>>6&3,0>Re.$a||1<Re.$a||4<=Re.Z||1<Re.Lc||ke)M=0;else if(jt.put=ys,jt.ac=Nn,jt.bc=Ln,jt.ma=Re,jt.width=M.width,jt.height=M.height,jt.Da=M.Da,jt.v=M.v,jt.va=M.va,jt.j=M.j,jt.o=M.o,Re.$a)e:{s(Re.$a==1),M=js();t:for(;;){if(M==null){M=0;break e}if(s(Re!=null),Re.mc=M,M.c=Re.c,M.i=Re.i,M.l=Re.l,M.l.ma=Re,M.l.width=Re.c,M.l.height=Re.i,M.a=0,xe(M.m,Ue,Ge,xt),!Lt(Re.c,Re.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&Mt(M.s)?(Re.ic=1,Ue=M.c*M.i,M.Ta=null,M.Ua=0,M.V=c(Ue),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(Re.ic=0,M=Hs(M,Re.c)),!M))break t;M=1;break e}Re.mc=null,M=0}else M=xt>=Re.c*Re.i;Re=!M}if(Re)return null;E.ga.Lc!=1?E.Ga=0:ce=Ie-W}s(E.ga!=null),s(W+ce<=Ie);e:{if(M=(Ue=E.ga).c,Ie=Ue.l.o,Ue.$a==0){if(Ge=E.rc,xt=E.Vc,jt=E.Fa,ke=E.P+1+W*M,We=E.mb,ft=E.nb+W*M,s(ke<=E.P+E.qc),Ue.Z!=0)for(s(fl[Ue.Z]!=null),Re=0;Re<ce;++Re)fl[Ue.Z](Ge,xt,jt,ke,We,ft,M),Ge=We,xt=ft,ft+=M,ke+=M;else for(Re=0;Re<ce;++Re)r(We,ft,jt,ke,M),Ge=We,xt=ft,ft+=M,ke+=M;E.rc=Ge,E.Vc=xt}else{if(s(Ue.mc!=null),M=W+ce,s((Re=Ue.mc)!=null),s(M<=Re.i),Re.C>=M)M=1;else if(Ue.ic||Yo(),Ue.ic){Ue=Re.V,Ge=Re.Ba,xt=Re.c;var Xt=Re.i,Et=(jt=1,ke=Re.$/xt,We=Re.$%xt,ft=Re.m,It=Re.s,Re.$),Wt=xt*Xt,ss=xt*M,bs=It.wc,cs=Et<ss?Os(It,We,ke):null;s(Et<=Wt),s(M<=Xt),s(Mt(It));t:for(;;){for(;!ft.h&&Et<ss;){if(We&bs||(cs=Os(It,We,ke)),s(cs!=null),je(ft),256>(Xt=Bs(cs.G[0],cs.H[0],ft)))Ue[Ge+Et]=Xt,++Et,++We>=xt&&(We=0,++ke<=M&&!(ke%16)&&fs(Re,ke));else{if(!(280>Xt)){jt=0;break t}Xt=En(Xt-256,ft);var an,Ys=Bs(cs.G[4],cs.H[4],ft);if(je(ft),!(Et>=(Ys=Ls(xt,Ys=En(Ys,ft)))&&Wt-Et>=Xt)){jt=0;break t}for(an=0;an<Xt;++an)Ue[Ge+Et+an]=Ue[Ge+Et+an-Ys];for(Et+=Xt,We+=Xt;We>=xt;)We-=xt,++ke<=M&&!(ke%16)&&fs(Re,ke);Et<ss&&We&bs&&(cs=Os(It,We,ke))}s(ft.h==pe(ft))}fs(Re,ke>M?M:ke);break t}!jt||ft.h&&Et<Wt?(jt=0,Re.a=ft.h?5:3):Re.$=Et,M=jt}else M=ms(Re,Re.V,Re.Ba,Re.c,Re.i,M,Wr);if(!M){ce=0;break e}}W+ce>=Ie&&(E.Cc=1),ce=1}if(!ce)return null;if(E.Cc&&((ce=E.ga)!=null&&(ce.mc=null),E.ga=null,0<E.Ga))return alert("todo:WebPDequantizeLevels"),null}return E.nb+W*Se}function pi(E,M,W,ce,Se,Ie){for(;0<Se--;){var Re,Ue=E,ke=M+(W?1:0),We=E,ft=M+(W?0:3);for(Re=0;Re<ce;++Re){var It=We[ft+4*Re];It!=255&&(It*=32897,Ue[ke+4*Re+0]=Ue[ke+4*Re+0]*It>>23,Ue[ke+4*Re+1]=Ue[ke+4*Re+1]*It>>23,Ue[ke+4*Re+2]=Ue[ke+4*Re+2]*It>>23)}M+=Ie}}function si(E,M,W,ce,Se){for(;0<ce--;){var Ie;for(Ie=0;Ie<W;++Ie){var Re=E[M+2*Ie+0],Ue=15&(We=E[M+2*Ie+1]),ke=4369*Ue,We=(240&We|We>>4)*ke>>16;E[M+2*Ie+0]=(240&Re|Re>>4)*ke>>16&240|(15&Re|Re<<4)*ke>>16>>4&15,E[M+2*Ie+1]=240&We|Ue}M+=Se}}function Bi(E,M,W,ce,Se,Ie,Re,Ue){var ke,We,ft=255;for(We=0;We<Se;++We){for(ke=0;ke<ce;++ke){var It=E[M+ke];Ie[Re+4*ke]=It,ft&=It}M+=W,Re+=Ue}return ft!=255}function Rl(E,M,W,ce,Se){var Ie;for(Ie=0;Ie<Se;++Ie)W[ce+Ie]=E[M+Ie]>>8}function Yo(){nc=pi,oo=si,id=Bi,lo=Rl}function Ol(E,M,W){X[E]=function(ce,Se,Ie,Re,Ue,ke,We,ft,It,Ge,xt,jt,Xt,Et,Wt,ss,bs){var cs,an=bs-1>>1,Ys=Ue[ke+0]|We[ft+0]<<16,Hn=It[Ge+0]|xt[jt+0]<<16;s(ce!=null);var tn=3*Ys+Hn+131074>>2;for(M(ce[Se+0],255&tn,tn>>16,Xt,Et),Ie!=null&&(tn=3*Hn+Ys+131074>>2,M(Ie[Re+0],255&tn,tn>>16,Wt,ss)),cs=1;cs<=an;++cs){var fr=Ue[ke+cs]|We[ft+cs]<<16,ja=It[Ge+cs]|xt[jt+cs]<<16,Yn=Ys+fr+Hn+ja+524296,Vt=Yn+2*(fr+Hn)>>3;tn=Vt+Ys>>1,Ys=(Yn=Yn+2*(Ys+ja)>>3)+fr>>1,M(ce[Se+2*cs-1],255&tn,tn>>16,Xt,Et+(2*cs-1)*W),M(ce[Se+2*cs-0],255&Ys,Ys>>16,Xt,Et+(2*cs-0)*W),Ie!=null&&(tn=Yn+Hn>>1,Ys=Vt+ja>>1,M(Ie[Re+2*cs-1],255&tn,tn>>16,Wt,ss+(2*cs-1)*W),M(Ie[Re+2*cs+0],255&Ys,Ys>>16,Wt,ss+(2*cs+0)*W)),Ys=fr,Hn=ja}1&bs||(tn=3*Ys+Hn+131074>>2,M(ce[Se+bs-1],255&tn,tn>>16,Xt,Et+(bs-1)*W),Ie!=null&&(tn=3*Hn+Ys+131074>>2,M(Ie[Re+bs-1],255&tn,tn>>16,Wt,ss+(bs-1)*W)))}}function kd(){Ii[jA]=Dc,Ii[Hi]=_l,Ii[Dl]=$d,Ii[Co]=BA,Ii[zd]=lc,Ii[Ql]=pl,Ii[rc]=cc,Ii[Vd]=_l,Ii[wA]=BA,Ii[od]=lc,Ii[Uc]=pl}function rd(E){return E&-16384?0>E?0:255:E>>CA}function jo(E,M){return rd((19077*E>>8)+(26149*M>>8)-14234)}function wo(E,M,W){return rd((19077*E>>8)-(6419*M>>8)-(13320*W>>8)+8708)}function Zl(E,M){return rd((19077*E>>8)+(33050*M>>8)-17685)}function io(E,M,W,ce,Se){ce[Se+0]=jo(E,W),ce[Se+1]=wo(E,M,W),ce[Se+2]=Zl(E,M)}function Oa(E,M,W,ce,Se){ce[Se+0]=Zl(E,M),ce[Se+1]=wo(E,M,W),ce[Se+2]=jo(E,W)}function yr(E,M,W,ce,Se){var Ie=wo(E,M,W);M=Ie<<3&224|Zl(E,M)>>3,ce[Se+0]=248&jo(E,W)|Ie>>5,ce[Se+1]=M}function ec(E,M,W,ce,Se){var Ie=240&Zl(E,M)|15;ce[Se+0]=240&jo(E,W)|wo(E,M,W)>>4,ce[Se+1]=Ie}function tc(E,M,W,ce,Se){ce[Se+0]=255,io(E,M,W,ce,Se+1)}function Xo(E,M,W,ce,Se){Oa(E,M,W,ce,Se),ce[Se+3]=255}function ni(E,M,W,ce,Se){io(E,M,W,ce,Se),ce[Se+3]=255}function vi(E,M,W){X[E]=function(ce,Se,Ie,Re,Ue,ke,We,ft,It){for(var Ge=ft+(-2&It)*W;ft!=Ge;)M(ce[Se+0],Ie[Re+0],Ue[ke+0],We,ft),M(ce[Se+1],Ie[Re+0],Ue[ke+0],We,ft+W),Se+=2,++Re,++ke,ft+=2*W;1&It&&M(ce[Se+0],Ie[Re+0],Ue[ke+0],We,ft)}}function ad(E,M,W){return W==0?E==0?M==0?6:5:M==0?4:0:W}function So(E,M,W,ce,Se){switch(E>>>30){case 3:Ll(M,W,ce,Se,0);break;case 2:Pi(M,W,ce,Se);break;case 1:Lr(M,W,ce,Se)}}function Ur(E,M){var W,ce,Se=M.M,Ie=M.Nb,Re=E.oc,Ue=E.pc+40,ke=E.oc,We=E.pc+584,ft=E.oc,It=E.pc+600;for(W=0;16>W;++W)Re[Ue+32*W-1]=129;for(W=0;8>W;++W)ke[We+32*W-1]=129,ft[It+32*W-1]=129;for(0<Se?Re[Ue-1-32]=ke[We-1-32]=ft[It-1-32]=129:(i(Re,Ue-32-1,127,21),i(ke,We-32-1,127,9),i(ft,It-32-1,127,9)),ce=0;ce<E.za;++ce){var Ge=M.ya[M.aa+ce];if(0<ce){for(W=-1;16>W;++W)r(Re,Ue+32*W-4,Re,Ue+32*W+12,4);for(W=-1;8>W;++W)r(ke,We+32*W-4,ke,We+32*W+4,4),r(ft,It+32*W-4,ft,It+32*W+4,4)}var xt=E.Gd,jt=E.Hd+ce,Xt=Ge.ad,Et=Ge.Hc;if(0<Se&&(r(Re,Ue-32,xt[jt].y,0,16),r(ke,We-32,xt[jt].f,0,8),r(ft,It-32,xt[jt].ea,0,8)),Ge.Za){var Wt=Re,ss=Ue-32+16;for(0<Se&&(ce>=E.za-1?i(Wt,ss,xt[jt].y[15],4):r(Wt,ss,xt[jt+1].y,0,4)),W=0;4>W;W++)Wt[ss+128+W]=Wt[ss+256+W]=Wt[ss+384+W]=Wt[ss+0+W];for(W=0;16>W;++W,Et<<=2)Wt=Re,ss=Ue+Ya[W],Ka[Ge.Ob[W]](Wt,ss),So(Et,Xt,16*+W,Wt,ss)}else if(Wt=ad(ce,Se,Ge.Ob[0]),Xi[Wt](Re,Ue),Et!=0)for(W=0;16>W;++W,Et<<=2)So(Et,Xt,16*+W,Re,Ue+Ya[W]);for(W=Ge.Gc,Wt=ad(ce,Se,Ge.Dd),no[Wt](ke,We),no[Wt](ft,It),Et=Xt,Wt=ke,ss=We,255&(Ge=0|W)&&(170&Ge?Wi(Et,256,Wt,ss):Ir(Et,256,Wt,ss)),Ge=ft,Et=It,255&(W>>=8)&&(170&W?Wi(Xt,320,Ge,Et):Ir(Xt,320,Ge,Et)),Se<E.Ub-1&&(r(xt[jt].y,0,Re,Ue+480,16),r(xt[jt].f,0,ke,We+224,8),r(xt[jt].ea,0,ft,It+224,8)),W=8*Ie*E.B,xt=E.sa,jt=E.ta+16*ce+16*Ie*E.R,Xt=E.qa,Ge=E.ra+8*ce+W,Et=E.Ha,Wt=E.Ia+8*ce+W,W=0;16>W;++W)r(xt,jt+W*E.R,Re,Ue+32*W,16);for(W=0;8>W;++W)r(Xt,Ge+W*E.B,ke,We+32*W,8),r(Et,Wt+W*E.B,ft,It+32*W,8)}}function No(E,M,W,ce,Se,Ie,Re,Ue,ke){var We=[0],ft=[0],It=0,Ge=ke!=null?ke.kd:0,xt=ke??new hs;if(E==null||12>W)return 7;xt.data=E,xt.w=M,xt.ha=W,M=[M],W=[W],xt.gb=[xt.gb];e:{var jt=M,Xt=W,Et=xt.gb;if(s(E!=null),s(Xt!=null),s(Et!=null),Et[0]=0,12<=Xt[0]&&!n(E,jt[0],"RIFF")){if(n(E,jt[0]+8,"WEBP")){Et=3;break e}var Wt=_e(E,jt[0]+4);if(12>Wt||4294967286<Wt){Et=3;break e}if(Ge&&Wt>Xt[0]-8){Et=7;break e}Et[0]=Wt,jt[0]+=12,Xt[0]-=12}Et=0}if(Et!=0)return Et;for(Wt=0<xt.gb[0],W=W[0];;){e:{var ss=E;Xt=M,Et=W;var bs=We,cs=ft,an=jt=[0];if((tn=It=[It])[0]=0,8>Et[0])Et=7;else{if(!n(ss,Xt[0],"VP8X")){if(_e(ss,Xt[0]+4)!=10){Et=3;break e}if(18>Et[0]){Et=7;break e}var Ys=_e(ss,Xt[0]+8),Hn=1+Ce(ss,Xt[0]+12);if(2147483648<=Hn*(ss=1+Ce(ss,Xt[0]+15))){Et=3;break e}an!=null&&(an[0]=Ys),bs!=null&&(bs[0]=Hn),cs!=null&&(cs[0]=ss),Xt[0]+=18,Et[0]-=18,tn[0]=1}Et=0}}if(It=It[0],jt=jt[0],Et!=0)return Et;if(Xt=!!(2&jt),!Wt&&It)return 3;if(Ie!=null&&(Ie[0]=!!(16&jt)),Re!=null&&(Re[0]=Xt),Ue!=null&&(Ue[0]=0),Re=We[0],jt=ft[0],It&&Xt&&ke==null){Et=0;break}if(4>W){Et=7;break}if(Wt&&It||!Wt&&!It&&!n(E,M[0],"ALPH")){W=[W],xt.na=[xt.na],xt.P=[xt.P],xt.Sa=[xt.Sa];e:{Ys=E,Et=M,Wt=W;var tn=xt.gb;bs=xt.na,cs=xt.P,an=xt.Sa,Hn=22,s(Ys!=null),s(Wt!=null),ss=Et[0];var fr=Wt[0];for(s(bs!=null),s(an!=null),bs[0]=null,cs[0]=null,an[0]=0;;){if(Et[0]=ss,Wt[0]=fr,8>fr){Et=7;break e}var ja=_e(Ys,ss+4);if(4294967286<ja){Et=3;break e}var Yn=8+ja+1&-2;if(Hn+=Yn,0<tn&&Hn>tn){Et=3;break e}if(!n(Ys,ss,"VP8 ")||!n(Ys,ss,"VP8L")){Et=0;break e}if(fr[0]<Yn){Et=7;break e}n(Ys,ss,"ALPH")||(bs[0]=Ys,cs[0]=ss+8,an[0]=ja),ss+=Yn,fr-=Yn}}if(W=W[0],xt.na=xt.na[0],xt.P=xt.P[0],xt.Sa=xt.Sa[0],Et!=0)break}W=[W],xt.Ja=[xt.Ja],xt.xa=[xt.xa];e:if(tn=E,Et=M,Wt=W,bs=xt.gb[0],cs=xt.Ja,an=xt.xa,Ys=Et[0],ss=!n(tn,Ys,"VP8 "),Hn=!n(tn,Ys,"VP8L"),s(tn!=null),s(Wt!=null),s(cs!=null),s(an!=null),8>Wt[0])Et=7;else{if(ss||Hn){if(tn=_e(tn,Ys+4),12<=bs&&tn>bs-12){Et=3;break e}if(Ge&&tn>Wt[0]-8){Et=7;break e}cs[0]=tn,Et[0]+=8,Wt[0]-=8,an[0]=Hn}else an[0]=5<=Wt[0]&&tn[Ys+0]==47&&!(tn[Ys+4]>>5),cs[0]=Wt[0];Et=0}if(W=W[0],xt.Ja=xt.Ja[0],xt.xa=xt.xa[0],M=M[0],Et!=0)break;if(4294967286<xt.Ja)return 3;if(Ue==null||Xt||(Ue[0]=xt.xa?2:1),Re=[Re],jt=[jt],xt.xa){if(5>W){Et=7;break}Ue=Re,Ge=jt,Xt=Ie,E==null||5>W?E=0:5<=W&&E[M+0]==47&&!(E[M+4]>>5)?(Wt=[0],tn=[0],bs=[0],xe(cs=new ge,E,M,W),Zs(cs,Wt,tn,bs)?(Ue!=null&&(Ue[0]=Wt[0]),Ge!=null&&(Ge[0]=tn[0]),Xt!=null&&(Xt[0]=bs[0]),E=1):E=0):E=0}else{if(10>W){Et=7;break}Ue=jt,E==null||10>W||!wr(E,M+3,W-3)?E=0:(Ge=E[M+0]|E[M+1]<<8|E[M+2]<<16,Xt=16383&(E[M+7]<<8|E[M+6]),E=16383&(E[M+9]<<8|E[M+8]),1&Ge||3<(Ge>>1&7)||!(Ge>>4&1)||Ge>>5>=xt.Ja||!Xt||!E?E=0:(Re&&(Re[0]=Xt),Ue&&(Ue[0]=E),E=1))}if(!E||(Re=Re[0],jt=jt[0],It&&(We[0]!=Re||ft[0]!=jt)))return 3;ke!=null&&(ke[0]=xt,ke.offset=M-ke.w,s(4294967286>M-ke.w),s(ke.offset==ke.ha-W));break}return Et==0||Et==7&&It&&ke==null?(Ie!=null&&(Ie[0]|=xt.na!=null&&0<xt.na.length),ce!=null&&(ce[0]=Re),Se!=null&&(Se[0]=jt),0):Et}function va(E,M,W){var ce=M.width,Se=M.height,Ie=0,Re=0,Ue=ce,ke=Se;if(M.Da=E!=null&&0<E.Da,M.Da&&(Ue=E.cd,ke=E.bd,Ie=E.v,Re=E.j,11>W||(Ie&=-2,Re&=-2),0>Ie||0>Re||0>=Ue||0>=ke||Ie+Ue>ce||Re+ke>Se))return 0;if(M.v=Ie,M.j=Re,M.va=Ie+Ue,M.o=Re+ke,M.U=Ue,M.T=ke,M.da=E!=null&&0<E.da,M.da){if(!nt(Ue,ke,W=[E.ib],Ie=[E.hb]))return 0;M.ib=W[0],M.hb=Ie[0]}return M.ob=E!=null&&E.ob,M.Kb=E==null||!E.Sd,M.da&&(M.ob=M.ib<3*ce/4&&M.hb<3*Se/4,M.Kb=0),1}function Ec(E){if(E==null)return 2;if(11>E.S){var M=E.f.RGBA;M.fb+=(E.height-1)*M.A,M.A=-M.A}else M=E.f.kb,E=E.height,M.O+=(E-1)*M.fa,M.fa=-M.fa,M.N+=(E-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(E-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(E-1)*M.lb,M.lb=-M.lb);return 0}function bi(E,M,W,ce){if(ce==null||0>=E||0>=M)return 2;if(W!=null){if(W.Da){var Se=W.cd,Ie=W.bd,Re=-2&W.v,Ue=-2&W.j;if(0>Re||0>Ue||0>=Se||0>=Ie||Re+Se>E||Ue+Ie>M)return 2;E=Se,M=Ie}if(W.da){if(!nt(E,M,Se=[W.ib],Ie=[W.hb]))return 2;E=Se[0],M=Ie[0]}}ce.width=E,ce.height=M;e:{var ke=ce.width,We=ce.height;if(E=ce.S,0>=ke||0>=We||!(E>=jA&&13>E))E=2;else{if(0>=ce.Rd&&ce.sd==null){Re=Ie=Se=M=0;var ft=(Ue=ke*TA[E])*We;if(11>E||(Ie=(We+1)/2*(M=(ke+1)/2),E==12&&(Re=(Se=ke)*We)),(We=c(ft+2*Ie+Re))==null){E=1;break e}ce.sd=We,11>E?((ke=ce.f.RGBA).eb=We,ke.fb=0,ke.A=Ue,ke.size=ft):((ke=ce.f.kb).y=We,ke.O=0,ke.fa=Ue,ke.Fd=ft,ke.f=We,ke.N=0+ft,ke.Ab=M,ke.Cd=Ie,ke.ea=We,ke.W=0+ft+Ie,ke.Db=M,ke.Ed=Ie,E==12&&(ke.F=We,ke.J=0+ft+2*Ie),ke.Tc=Re,ke.lb=Se)}if(M=1,Se=ce.S,Ie=ce.width,Re=ce.height,Se>=jA&&13>Se)if(11>Se)E=ce.f.RGBA,M&=(Ue=Math.abs(E.A))*(Re-1)+Ie<=E.size,M&=Ue>=Ie*TA[Se],M&=E.eb!=null;else{E=ce.f.kb,Ue=(Ie+1)/2,ft=(Re+1)/2,ke=Math.abs(E.fa),We=Math.abs(E.Ab);var It=Math.abs(E.Db),Ge=Math.abs(E.lb),xt=Ge*(Re-1)+Ie;M&=ke*(Re-1)+Ie<=E.Fd,M&=We*(ft-1)+Ue<=E.Cd,M=(M&=It*(ft-1)+Ue<=E.Ed)&ke>=Ie&We>=Ue&It>=Ue,M&=E.y!=null,M&=E.f!=null,M&=E.ea!=null,Se==12&&(M&=Ge>=Ie,M&=xt<=E.Tc,M&=E.F!=null)}else M=0;E=M?0:2}}return E!=0||W!=null&&W.fd&&(E=Ec(ce)),E}var Bo=64,lr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],_i=24,Jo=32,Zo=8,cl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];yt("Predictor0","PredictorAdd0"),X.Predictor0=function(){return 4278190080},X.Predictor1=function(E){return E},X.Predictor2=function(E,M,W){return M[W+0]},X.Predictor3=function(E,M,W){return M[W+1]},X.Predictor4=function(E,M,W){return M[W-1]},X.Predictor5=function(E,M,W){return Tt(Tt(E,M[W+1]),M[W+0])},X.Predictor6=function(E,M,W){return Tt(E,M[W-1])},X.Predictor7=function(E,M,W){return Tt(E,M[W+0])},X.Predictor8=function(E,M,W){return Tt(M[W-1],M[W+0])},X.Predictor9=function(E,M,W){return Tt(M[W+0],M[W+1])},X.Predictor10=function(E,M,W){return Tt(Tt(E,M[W-1]),Tt(M[W+0],M[W+1]))},X.Predictor11=function(E,M,W){var ce=M[W+0];return 0>=vs(ce>>24&255,E>>24&255,(M=M[W-1])>>24&255)+vs(ce>>16&255,E>>16&255,M>>16&255)+vs(ce>>8&255,E>>8&255,M>>8&255)+vs(255&ce,255&E,255&M)?ce:E},X.Predictor12=function(E,M,W){var ce=M[W+0];return(ns((E>>24&255)+(ce>>24&255)-((M=M[W-1])>>24&255))<<24|ns((E>>16&255)+(ce>>16&255)-(M>>16&255))<<16|ns((E>>8&255)+(ce>>8&255)-(M>>8&255))<<8|ns((255&E)+(255&ce)-(255&M)))>>>0},X.Predictor13=function(E,M,W){var ce=M[W-1];return(Ts((E=Tt(E,M[W+0]))>>24&255,ce>>24&255)<<24|Ts(E>>16&255,ce>>16&255)<<16|Ts(E>>8&255,ce>>8&255)<<8|Ts(255&E,255&ce))>>>0};var Ul=X.PredictorAdd0;X.PredictorAdd1=Ns,yt("Predictor2","PredictorAdd2"),yt("Predictor3","PredictorAdd3"),yt("Predictor4","PredictorAdd4"),yt("Predictor5","PredictorAdd5"),yt("Predictor6","PredictorAdd6"),yt("Predictor7","PredictorAdd7"),yt("Predictor8","PredictorAdd8"),yt("Predictor9","PredictorAdd9"),yt("Predictor10","PredictorAdd10"),yt("Predictor11","PredictorAdd11"),yt("Predictor12","PredictorAdd12"),yt("Predictor13","PredictorAdd13");var Tc=X.PredictorAdd2;mt("ColorIndexInverseTransform","MapARGB","32b",function(E){return E>>8&255},function(E){return E}),mt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(E){return E},function(E){return E>>8&255});var Ha,qi=X.ColorIndexInverseTransform,Ci=X.MapARGB,Ei=X.VP8LColorIndexInverseTransformAlpha,Sr=X.MapAlpha,Mi=X.VP8LPredictorsAdd=[];Mi.length=16,(X.VP8LPredictors=[]).length=16,(X.VP8LPredictorsAdd_C=[]).length=16,(X.VP8LPredictors_C=[]).length=16;var Fc,Ic,el,dl,Al,tl,Wa,Ll,Pi,Wi,Lr,Ir,fa,Pr,sl,nl,Rc,sc,ju,wu,Su,Nu,yA,xA,nc,oo,id,lo,ul=c(511),vA=c(2041),Hd=c(225),Oc=c(767),bA=0,hl=vA,Kd=Hd,ki=Oc,Ti=ul,jA=0,Hi=1,Dl=2,Co=3,zd=4,Ql=5,rc=6,Vd=7,wA=8,od=9,Uc=10,Eo=[2,3,7],ld=[3,3,11],Lc=[280,256,256,256,40],SA=[0,1,1,1,0],ac=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],To=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Fo=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ic=8,Io=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Yi=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],co=null,Fh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Bu=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],NA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ih=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Fi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ba=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xr=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Xi=[],Ka=[],no=[],oc=1,Cu=2,fl=[],Ii=[];Ol("UpsampleRgbLinePair",io,3),Ol("UpsampleBgrLinePair",Oa,3),Ol("UpsampleRgbaLinePair",ni,4),Ol("UpsampleBgraLinePair",Xo,4),Ol("UpsampleArgbLinePair",tc,4),Ol("UpsampleRgba4444LinePair",ec,2),Ol("UpsampleRgb565LinePair",yr,2);var Dc=X.UpsampleRgbLinePair,$d=X.UpsampleBgrLinePair,_l=X.UpsampleRgbaLinePair,BA=X.UpsampleBgraLinePair,lc=X.UpsampleArgbLinePair,pl=X.UpsampleRgba4444LinePair,cc=X.UpsampleRgb565LinePair,Ro=16,cd=1<<Ro-1,ml=-227,dc=482,CA=6,Ac=0,Ri=c(256),EA=c(256),Rh=c(256),Vf=c(256),$f=c(dc-ml),Gf=c(dc-ml);vi("YuvToRgbRow",io,3),vi("YuvToBgrRow",Oa,3),vi("YuvToRgbaRow",ni,4),vi("YuvToBgraRow",Xo,4),vi("YuvToArgbRow",tc,4),vi("YuvToRgba4444Row",ec,2),vi("YuvToRgb565Row",yr,2);var Ya=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],dd=[0,2,8],Gd=[8,7,6,4,4,2,2,2,1,1,1,1],Ad=1;this.WebPDecodeRGBA=function(E,M,W,ce,Se){var Ie=Hi,Re=new es,Ue=new ws;Re.ba=Ue,Ue.S=Ie,Ue.width=[Ue.width],Ue.height=[Ue.height];var ke=Ue.width,We=Ue.height,ft=new St;if(ft==null||E==null)var It=2;else s(ft!=null),It=No(E,M,W,ft.width,ft.height,ft.Pd,ft.Qd,ft.format,null);if(It!=0?ke=0:(ke!=null&&(ke[0]=ft.width[0]),We!=null&&(We[0]=ft.height[0]),ke=1),ke){Ue.width=Ue.width[0],Ue.height=Ue.height[0],ce!=null&&(ce[0]=Ue.width),Se!=null&&(Se[0]=Ue.height);e:{if(ce=new Es,(Se=new hs).data=E,Se.w=M,Se.ha=W,Se.kd=1,M=[0],s(Se!=null),((E=No(Se.data,Se.w,Se.ha,null,null,null,M,null,Se))==0||E==7)&&M[0]&&(E=4),(M=E)==0){if(s(Re!=null),ce.data=Se.data,ce.w=Se.w+Se.offset,ce.ha=Se.ha-Se.offset,ce.put=ys,ce.ac=Nn,ce.bc=Ln,ce.ma=Re,Se.xa){if((E=js())==null){Re=1;break e}if((function(Ge,xt){var jt=[0],Xt=[0],Et=[0];t:for(;;){if(Ge==null)return 0;if(xt==null)return Ge.a=2,0;if(Ge.l=xt,Ge.a=0,xe(Ge.m,xt.data,xt.w,xt.ha),!Zs(Ge.m,jt,Xt,Et)){Ge.a=3;break t}if(Ge.xb=Cu,xt.width=jt[0],xt.height=Xt[0],!Lt(jt[0],Xt[0],1,Ge,null))break t;return 1}return s(Ge.a!=0),0})(E,ce)){if(ce=(M=bi(ce.width,ce.height,Re.Oa,Re.ba))==0){t:{ce=E;s:for(;;){if(ce==null){ce=0;break t}if(s(ce.s.yc!=null),s(ce.s.Ya!=null),s(0<ce.s.Wb),s((W=ce.l)!=null),s((Se=W.ma)!=null),ce.xb!=0){if(ce.ca=Se.ba,ce.tb=Se.tb,s(ce.ca!=null),!va(Se.Oa,W,Co)){ce.a=2;break s}if(!Hs(ce,W.width)||W.da)break s;if((W.da||rs(ce.ca.S))&&Yo(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&Yo()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!de(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break s}ce.xb=0}if(!ms(ce,ce.V,ce.Ba,ce.c,ce.i,W.o,Rt))break s;Se.Dc=ce.Ma,ce=1;break t}s(ce.a!=0),ce=0}ce=!ce}ce&&(M=E.a)}else M=E.a}else{if((E=new rn)==null){Re=1;break e}if(E.Fa=Se.na,E.P=Se.P,E.qc=Se.Sa,Ze(E,ce)){if((M=bi(ce.width,ce.height,Re.Oa,Re.ba))==0){if(E.Aa=0,W=Re.Oa,s((Se=E)!=null),W!=null){if(0<(ke=0>(ke=W.Md)?0:100<ke?255:255*ke/100)){for(We=ft=0;4>We;++We)12>(It=Se.pb[We]).lc&&(It.ia=ke*Gd[0>It.lc?0:It.lc]>>3),ft|=It.ia;ft&&(alert("todo:VP8InitRandom"),Se.ia=1)}Se.Ga=W.Id,100<Se.Ga?Se.Ga=100:0>Se.Ga&&(Se.Ga=0)}(function(Ge,xt){if(Ge==null)return 0;if(xt==null)return Ps(Ge,2,"NULL VP8Io parameter in VP8Decode().");if(!Ge.cb&&!Ze(Ge,xt))return 0;if(s(Ge.cb),xt.ac==null||xt.ac(xt)){xt.ob&&(Ge.L=0);var jt=dd[Ge.L];if(Ge.L==2?(Ge.yb=0,Ge.zb=0):(Ge.yb=xt.v-jt>>4,Ge.zb=xt.j-jt>>4,0>Ge.yb&&(Ge.yb=0),0>Ge.zb&&(Ge.zb=0)),Ge.Va=xt.o+15+jt>>4,Ge.Hb=xt.va+15+jt>>4,Ge.Hb>Ge.za&&(Ge.Hb=Ge.za),Ge.Va>Ge.Ub&&(Ge.Va=Ge.Ub),0<Ge.L){var Xt=Ge.ed;for(jt=0;4>jt;++jt){var Et;if(Ge.Qa.Cb){var Wt=Ge.Qa.Lb[jt];Ge.Qa.Fb||(Wt+=Xt.Tb)}else Wt=Xt.Tb;for(Et=0;1>=Et;++Et){var ss=Ge.gd[jt][Et],bs=Wt;if(Xt.Pc&&(bs+=Xt.vd[0],Et&&(bs+=Xt.od[0])),0<(bs=0>bs?0:63<bs?63:bs)){var cs=bs;0<Xt.wb&&(cs=4<Xt.wb?cs>>2:cs>>1)>9-Xt.wb&&(cs=9-Xt.wb),1>cs&&(cs=1),ss.dd=cs,ss.tc=2*bs+cs,ss.ld=40<=bs?2:15<=bs?1:0}else ss.tc=0;ss.La=Et}}}jt=0}else Ps(Ge,6,"Frame setup failed"),jt=Ge.a;if(jt=jt==0){if(jt){Ge.$c=0,0<Ge.Aa||(Ge.Ic=Ad);t:{jt=Ge.Ic,Xt=4*(cs=Ge.za);var an=32*cs,Ys=cs+1,Hn=0<Ge.L?cs*(0<Ge.Aa?2:1):0,tn=(Ge.Aa==2?2:1)*cs;if((ss=Xt+832+(Et=3*(16*jt+dd[Ge.L])/2*an)+(Wt=Ge.Fa!=null&&0<Ge.Fa.length?Ge.Kc.c*Ge.Kc.i:0))!=ss)jt=0;else{if(ss>Ge.Vb){if(Ge.Vb=0,Ge.Ec=c(ss),Ge.Fc=0,Ge.Ec==null){jt=Ps(Ge,1,"no memory during frame initialization.");break t}Ge.Vb=ss}ss=Ge.Ec,bs=Ge.Fc,Ge.Ac=ss,Ge.Bc=bs,bs+=Xt,Ge.Gd=A(an,gr),Ge.Hd=0,Ge.rb=A(Ys+1,qn),Ge.sb=1,Ge.wa=Hn?A(Hn,gn):null,Ge.Y=0,Ge.D.Nb=0,Ge.D.wa=Ge.wa,Ge.D.Y=Ge.Y,0<Ge.Aa&&(Ge.D.Y+=cs),s(!0),Ge.oc=ss,Ge.pc=bs,bs+=832,Ge.ya=A(tn,Gr),Ge.aa=0,Ge.D.ya=Ge.ya,Ge.D.aa=Ge.aa,Ge.Aa==2&&(Ge.D.aa+=cs),Ge.R=16*cs,Ge.B=8*cs,cs=(an=dd[Ge.L])*Ge.R,an=an/2*Ge.B,Ge.sa=ss,Ge.ta=bs+cs,Ge.qa=Ge.sa,Ge.ra=Ge.ta+16*jt*Ge.R+an,Ge.Ha=Ge.qa,Ge.Ia=Ge.ra+8*jt*Ge.B+an,Ge.$c=0,bs+=Et,Ge.mb=Wt?ss:null,Ge.nb=Wt?bs:null,s(bs+Wt<=Ge.Fc+Ge.Vb),is(Ge),i(Ge.Ac,Ge.Bc,0,Xt),jt=1}}if(jt){if(xt.ka=0,xt.y=Ge.sa,xt.O=Ge.ta,xt.f=Ge.qa,xt.N=Ge.ra,xt.ea=Ge.Ha,xt.Vd=Ge.Ia,xt.fa=Ge.R,xt.Rc=Ge.B,xt.F=null,xt.J=0,!bA){for(jt=-255;255>=jt;++jt)ul[255+jt]=0>jt?-jt:jt;for(jt=-1020;1020>=jt;++jt)vA[1020+jt]=-128>jt?-128:127<jt?127:jt;for(jt=-112;112>=jt;++jt)Hd[112+jt]=-16>jt?-16:15<jt?15:jt;for(jt=-255;510>=jt;++jt)Oc[255+jt]=0>jt?0:255<jt?255:jt;bA=1}Wa=rr,Ll=ha,Wi=Tr,Lr=$a,Ir=ya,Pi=ga,fa=xs,Pr=Gs,sl=ye,nl=He,Rc=Rn,sc=V,ju=it,wu=bt,Su=Fe,Nu=Ye,yA=tt,xA=Ft,Ka[0]=xn,Ka[1]=Ga,Ka[2]=Bt,Ka[3]=_t,Ka[4]=Dn,Ka[5]=Qs,Ka[6]=ps,Ka[7]=Qn,Ka[8]=Wn,Ka[9]=kn,Xi[0]=Le,Xi[1]=xa,Xi[2]=ie,Xi[3]=G,Xi[4]=Xe,Xi[5]=vt,Xi[6]=ut,no[0]=x,no[1]=fi,no[2]=Xr,no[3]=v,no[4]=F,no[5]=I,no[6]=_,jt=1}else jt=0}jt&&(jt=(function(fr,ja){for(fr.M=0;fr.M<fr.Va;++fr.M){var Yn,Vt=fr.Jc[fr.M&fr.Xb],Us=fr.m,Ua=fr;for(Yn=0;Yn<Ua.za;++Yn){var In=Us,Un=Ua,Zr=Un.Ac,ri=Un.Bc+4*Yn,Xa=Un.zc,ea=Un.ya[Un.aa+Yn];if(Un.Qa.Bb?ea.$b=Qe(In,Un.Pa.jb[0])?2+Qe(In,Un.Pa.jb[2]):Qe(In,Un.Pa.jb[1]):ea.$b=0,Un.kc&&(ea.Ad=Qe(In,Un.Bd)),ea.Za=!Qe(In,145)+0,ea.Za){var ai=ea.Ob,Ki=0;for(Un=0;4>Un;++Un){var ii,Vn=Xa[0+Un];for(ii=0;4>ii;++ii){Vn=Fi[Zr[ri+ii]][Vn];for(var Nr=NA[Qe(In,Vn[0])];0<Nr;)Nr=NA[2*Nr+Qe(In,Vn[Nr])];Vn=-Nr,Zr[ri+ii]=Vn}r(ai,Ki,Zr,ri,4),Ki+=4,Xa[0+Un]=Vn}}else Vn=Qe(In,156)?Qe(In,128)?1:3:Qe(In,163)?2:0,ea.Ob[0]=Vn,i(Zr,ri,Vn,4),i(Xa,0,Vn,4);ea.Dd=Qe(In,142)?Qe(In,114)?Qe(In,183)?1:3:2:0}if(Ua.m.Ka)return Ps(fr,7,"Premature end-of-partition0 encountered.");for(;fr.ja<fr.za;++fr.ja){if(Ua=Vt,In=(Us=fr).rb[Us.sb-1],Zr=Us.rb[Us.sb+Us.ja],Yn=Us.ya[Us.aa+Us.ja],ri=Us.kc?Yn.Ad:0)In.la=Zr.la=0,Yn.Za||(In.Na=Zr.Na=0),Yn.Hc=0,Yn.Gc=0,Yn.ia=0;else{var wa,kr;if(In=Zr,Zr=Ua,ri=Us.Pa.Xc,Xa=Us.ya[Us.aa+Us.ja],ea=Us.pb[Xa.$b],Un=Xa.ad,ai=0,Ki=Us.rb[Us.sb-1],Vn=ii=0,i(Un,ai,0,384),Xa.Za)var oi=0,La=ri[3];else{Nr=c(16);var Br=In.Na+Ki.Na;if(Br=co(Zr,ri[1],Br,ea.Eb,0,Nr,0),In.Na=Ki.Na=(0<Br)+0,1<Br)Wa(Nr,0,Un,ai);else{var Ja=Nr[0]+3>>3;for(Nr=0;256>Nr;Nr+=16)Un[ai+Nr]=Ja}oi=1,La=ri[0]}var ta=15&In.la,li=15&Ki.la;for(Nr=0;4>Nr;++Nr){var ci=1&li;for(Ja=kr=0;4>Ja;++Ja)ta=ta>>1|(ci=(Br=co(Zr,La,Br=ci+(1&ta),ea.Sc,oi,Un,ai))>oi)<<7,kr=kr<<2|(3<Br?3:1<Br?2:Un[ai+0]!=0),ai+=16;ta>>=4,li=li>>1|ci<<7,ii=(ii<<8|kr)>>>0}for(La=ta,oi=li>>4,wa=0;4>wa;wa+=2){for(kr=0,ta=In.la>>4+wa,li=Ki.la>>4+wa,Nr=0;2>Nr;++Nr){for(ci=1&li,Ja=0;2>Ja;++Ja)Br=ci+(1&ta),ta=ta>>1|(ci=0<(Br=co(Zr,ri[2],Br,ea.Qc,0,Un,ai)))<<3,kr=kr<<2|(3<Br?3:1<Br?2:Un[ai+0]!=0),ai+=16;ta>>=2,li=li>>1|ci<<5}Vn|=kr<<4*wa,La|=ta<<4<<wa,oi|=(240&li)<<wa}In.la=La,Ki.la=oi,Xa.Hc=ii,Xa.Gc=Vn,Xa.ia=43690&Vn?0:ea.ia,ri=!(ii|Vn)}if(0<Us.L&&(Us.wa[Us.Y+Us.ja]=Us.gd[Yn.$b][Yn.Za],Us.wa[Us.Y+Us.ja].La|=!ri),Ua.Ka)return Ps(fr,7,"Premature end-of-file encountered.")}if(is(fr),Us=ja,Ua=1,Yn=(Vt=fr).D,In=0<Vt.L&&Vt.M>=Vt.zb&&Vt.M<=Vt.Va,Vt.Aa==0)t:{if(Yn.M=Vt.M,Yn.uc=In,Ur(Vt,Yn),Ua=1,Yn=(kr=Vt.D).Nb,In=(Vn=dd[Vt.L])*Vt.R,Zr=Vn/2*Vt.B,Nr=16*Yn*Vt.R,Ja=8*Yn*Vt.B,ri=Vt.sa,Xa=Vt.ta-In+Nr,ea=Vt.qa,Un=Vt.ra-Zr+Ja,ai=Vt.Ha,Ki=Vt.Ia-Zr+Ja,li=(ta=kr.M)==0,ii=ta>=Vt.Va-1,Vt.Aa==2&&Ur(Vt,kr),kr.uc)for(ci=(Br=Vt).D.M,s(Br.D.uc),kr=Br.yb;kr<Br.Hb;++kr){oi=kr,La=ci;var la=(Rr=(Da=Br).D).Nb;wa=Da.R;var Rr=Rr.wa[Rr.Y+oi],zi=Da.sa,za=Da.ta+16*la*wa+16*oi,jn=Rr.dd,Tn=Rr.tc;if(Tn!=0)if(s(3<=Tn),Da.L==1)0<oi&&Nu(zi,za,wa,Tn+4),Rr.La&&xA(zi,za,wa,Tn),0<La&&Su(zi,za,wa,Tn+4),Rr.La&&yA(zi,za,wa,Tn);else{var Dr=Da.B,ro=Da.qa,Ao=Da.ra+8*la*Dr+8*oi,Ji=Da.Ha,Da=Da.Ia+8*la*Dr+8*oi;la=Rr.ld,0<oi&&(Pr(zi,za,wa,Tn+4,jn,la),nl(ro,Ao,Ji,Da,Dr,Tn+4,jn,la)),Rr.La&&(sc(zi,za,wa,Tn,jn,la),wu(ro,Ao,Ji,Da,Dr,Tn,jn,la)),0<La&&(fa(zi,za,wa,Tn+4,jn,la),sl(ro,Ao,Ji,Da,Dr,Tn+4,jn,la)),Rr.La&&(Rc(zi,za,wa,Tn,jn,la),ju(ro,Ao,Ji,Da,Dr,Tn,jn,la))}}if(Vt.ia&&alert("todo:DitherRow"),Us.put!=null){if(kr=16*ta,ta=16*(ta+1),li?(Us.y=Vt.sa,Us.O=Vt.ta+Nr,Us.f=Vt.qa,Us.N=Vt.ra+Ja,Us.ea=Vt.Ha,Us.W=Vt.Ia+Ja):(kr-=Vn,Us.y=ri,Us.O=Xa,Us.f=ea,Us.N=Un,Us.ea=ai,Us.W=Ki),ii||(ta-=Vn),ta>Us.o&&(ta=Us.o),Us.F=null,Us.J=null,Vt.Fa!=null&&0<Vt.Fa.length&&kr<ta&&(Us.J=Jr(Vt,Us,kr,ta-kr),Us.F=Vt.mb,Us.F==null&&Us.F.length==0)){Ua=Ps(Vt,3,"Could not decode alpha data.");break t}kr<Us.j&&(Vn=Us.j-kr,kr=Us.j,s(!(1&Vn)),Us.O+=Vt.R*Vn,Us.N+=Vt.B*(Vn>>1),Us.W+=Vt.B*(Vn>>1),Us.F!=null&&(Us.J+=Us.width*Vn)),kr<ta&&(Us.O+=Us.v,Us.N+=Us.v>>1,Us.W+=Us.v>>1,Us.F!=null&&(Us.J+=Us.v),Us.ka=kr-Us.j,Us.U=Us.va-Us.v,Us.T=ta-kr,Ua=Us.put(Us))}Yn+1!=Vt.Ic||ii||(r(Vt.sa,Vt.ta-In,ri,Xa+16*Vt.R,In),r(Vt.qa,Vt.ra-Zr,ea,Un+8*Vt.B,Zr),r(Vt.Ha,Vt.Ia-Zr,ai,Ki+8*Vt.B,Zr))}if(!Ua)return Ps(fr,6,"Output aborted.")}return 1})(Ge,xt)),xt.bc!=null&&xt.bc(xt),jt&=1}return jt?(Ge.cb=0,jt):0})(E,ce)||(M=E.a)}}else M=E.a}M==0&&Re.Oa!=null&&Re.Oa.fd&&(M=Ec(Re.ba))}Re=M}Ie=Re!=0?null:11>Ie?Ue.f.RGBA.eb:Ue.f.kb.y}else Ie=null;return Ie};var TA=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(X,fe){for(var ee="",le=0;le<4;le++)ee+=String.fromCharCode(X[fe++]);return ee}function o(X,fe){return X[fe+0]|X[fe+1]<<8}function m(X,fe){return(X[fe+0]|X[fe+1]<<8|X[fe+2]<<16)>>>0}function y(X,fe){return(X[fe+0]|X[fe+1]<<8|X[fe+2]<<16|X[fe+3]<<24)>>>0}new d;var p=[0],j=[0],b=[],w=new d,B=t,L=(function(X,fe){var ee={},le=0,ue=!1,te=0,re=0;if(ee.frames=[],!(function(Z,ge){for(var we=0;we<4;we++)if(Z[ge+we]!="RIFF".charCodeAt(we))return!0;return!1})(X,fe)){for(y(X,fe+=4),fe+=8;fe<X.length;){var ne=h(X,fe),oe=y(X,fe+=4);fe+=4;var se=oe+(1&oe);switch(ne){case"VP8 ":case"VP8L":ee.frames[le]===void 0&&(ee.frames[le]={}),(me=ee.frames[le]).src_off=ue?re:fe-8,me.src_size=te+oe+8,le++,ue&&(ue=!1,te=0,re=0);break;case"VP8X":(me=ee.header={}).feature_flags=X[fe];var xe=fe+4;me.canvas_width=1+m(X,xe),xe+=3,me.canvas_height=1+m(X,xe),xe+=3;break;case"ALPH":ue=!0,te=se+8,re=fe-8;break;case"ANIM":(me=ee.header).bgcolor=y(X,fe),xe=fe+4,me.loop_count=o(X,xe),xe+=2;break;case"ANMF":var Me,me;(me=ee.frames[le]={}).offset_x=2*m(X,fe),fe+=3,me.offset_y=2*m(X,fe),fe+=3,me.width=1+m(X,fe),fe+=3,me.height=1+m(X,fe),fe+=3,me.duration=m(X,fe),fe+=3,Me=X[fe++],me.dispose=1&Me,me.blend=Me>>1&1}ne!="ANMF"&&(fe+=se)}return ee}})(B,0);L.response=B,L.rgbaoutput=!0,L.dataurl=!1;var Q=L.header?L.header:null,k=L.frames?L.frames:null;if(Q){Q.loop_counter=Q.loop_count,p=[Q.canvas_height],j=[Q.canvas_width];for(var z=0;z<k.length&&k[z].blend!=0;z++);}var J=k[0],$=w.WebPDecodeRGBA(B,J.src_off,J.src_size,j,p);J.rgba=$,J.imgwidth=j[0],J.imgheight=p[0];for(var q=0;q<j[0]*p[0]*4;q++)b[q]=$[q];return this.width=j,this.height=p,this.data=b,this}(function(t){var s,n,r,i,c,A,u,d,h,o=function(Z){return Z=Z||{},this.isStrokeTransparent=Z.isStrokeTransparent||!1,this.strokeOpacity=Z.strokeOpacity||1,this.strokeStyle=Z.strokeStyle||"#000000",this.fillStyle=Z.fillStyle||"#000000",this.isFillTransparent=Z.isFillTransparent||!1,this.fillOpacity=Z.fillOpacity||1,this.font=Z.font||"10px sans-serif",this.textBaseline=Z.textBaseline||"alphabetic",this.textAlign=Z.textAlign||"left",this.lineWidth=Z.lineWidth||1,this.lineJoin=Z.lineJoin||"miter",this.lineCap=Z.lineCap||"butt",this.path=Z.path||[],this.transform=Z.transform!==void 0?Z.transform.clone():new d,this.globalCompositeOperation=Z.globalCompositeOperation||"normal",this.globalAlpha=Z.globalAlpha||1,this.clip_path=Z.clip_path||[],this.currentPoint=Z.currentPoint||new A,this.miterLimit=Z.miterLimit||10,this.lastPoint=Z.lastPoint||new A,this.lineDashOffset=Z.lineDashOffset||0,this.lineDash=Z.lineDash||[],this.margin=Z.margin||[0,0,0,0],this.prevPageLastElemOffset=Z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Z.ignoreClearRect!="boolean"||Z.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),s=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,c=this.internal.getVerticalCoordinate,A=this.internal.Point,u=this.internal.Rectangle,d=this.internal.Matrix,h=new o}]);var m=function(Z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ge=Z;Object.defineProperty(this,"pdf",{get:function(){return ge}});var we=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return we},set:function(de){we=!!de}});var pe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return pe},set:function(de){pe=!!de}});var be=0;Object.defineProperty(this,"posX",{get:function(){return be},set:function(de){isNaN(de)||(be=de)}});var je=0;Object.defineProperty(this,"posY",{get:function(){return je},set:function(de){isNaN(de)||(je=de)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(de){var dt;typeof de=="number"?dt=[de,de,de,de]:((dt=new Array(4))[0]=de[0],dt[1]=de.length>=2?de[1]:dt[0],dt[2]=de.length>=3?de[2]:dt[0],dt[3]=de.length>=4?de[3]:dt[1]),h.margin=dt}});var Ne=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ne},set:function(de){Ne=de}});var Je=0;Object.defineProperty(this,"lastBreak",{get:function(){return Je},set:function(de){Je=de}});var Qe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Qe},set:function(de){Qe=de}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(de){de instanceof o&&(h=de)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(de){h.path=de}});var pt=[];Object.defineProperty(this,"ctxStack",{get:function(){return pt},set:function(de){pt=de}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(de){var dt;dt=y(de),this.ctx.fillStyle=dt.style,this.ctx.isFillTransparent=dt.a===0,this.ctx.fillOpacity=dt.a,this.pdf.setFillColor(dt.r,dt.g,dt.b,{a:dt.a}),this.pdf.setTextColor(dt.r,dt.g,dt.b,{a:dt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(de){var dt=y(de);this.ctx.strokeStyle=dt.style,this.ctx.isStrokeTransparent=dt.a===0,this.ctx.strokeOpacity=dt.a,dt.a===0?this.pdf.setDrawColor(255,255,255):(dt.a,this.pdf.setDrawColor(dt.r,dt.g,dt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(de){["butt","round","square"].indexOf(de)!==-1&&(this.ctx.lineCap=de,this.pdf.setLineCap(de))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(de){isNaN(de)||(this.ctx.lineWidth=de,this.pdf.setLineWidth(de))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(de){["bevel","round","miter"].indexOf(de)!==-1&&(this.ctx.lineJoin=de,this.pdf.setLineJoin(de))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(de){isNaN(de)||(this.ctx.miterLimit=de,this.pdf.setMiterLimit(de))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(de){this.ctx.textBaseline=de}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(de){["right","end","center","left","start"].indexOf(de)!==-1&&(this.ctx.textAlign=de)}});var Te=null,Ce=null,_e=null;Object.defineProperty(this,"fontFaces",{get:function(){return _e},set:function(de){Te=null,Ce=null,_e=de}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(de){var dt;if(this.ctx.font=de,(dt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(de))!==null){var st=dt[1];dt[2];var nt=dt[3],at=dt[4];dt[5];var Dt=dt[6],yt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(at)[2];at=Math.floor(yt==="px"?parseFloat(at)*this.pdf.internal.scaleFactor:yt==="em"?parseFloat(at)*this.pdf.getFontSize():parseFloat(at)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(at);var qe=(function(mt){var ls,Ht,Kt=[],lt=mt.trim();if(lt==="")return Ov;if(lt in TB)return[TB[lt]];for(;lt!=="";){switch(Ht=null,ls=(lt=IB(lt)).charAt(0)){case'"':case"'":Ht=iG(lt.substring(1),ls);break;default:Ht=oG(lt)}if(Ht===null||(Kt.push(Ht[0]),(lt=IB(Ht[1]))!==""&&lt.charAt(0)!==","))return Ov;lt=lt.replace(/^,/,"")}return Kt})(Dt);if(this.fontFaces){var Tt=(function(mt,ls){var Ht=mt.getFontList(),Kt=JSON.stringify(Ht);if(Te===null||Ce!==Kt){var lt=(function(Gt){var Yt=[];return Object.keys(Gt).forEach(function(Cs){Gt[Cs].forEach(function(rs){var Is=null;switch(rs){case"bold":Is={family:Cs,weight:"bold"};break;case"italic":Is={family:Cs,style:"italic"};break;case"bolditalic":Is={family:Cs,weight:"bold",style:"italic"};break;case"":case"normal":Is={family:Cs}}Is!==null&&(Is.ref={name:Cs,style:rs},Yt.push(Is))})}),Yt})(Ht);Te=(function(Gt){for(var Yt={},Cs=0;Cs<Gt.length;++Cs){var rs=Rv(Gt[Cs]),Is=rs.family,on=rs.stretch,ws=rs.style,St=rs.weight;Yt[Is]=Yt[Is]||{},Yt[Is][on]=Yt[Is][on]||{},Yt[Is][on][ws]=Yt[Is][on][ws]||{},Yt[Is][on][ws][St]=rs}return Yt})(lt.concat(ls)),Ce=Kt}return Te})(this.pdf,this.fontFaces),ns=qe.map(function(mt){return{family:mt,stretch:"normal",weight:nt,style:st}}),Ts=(function(mt,ls,Ht){for(var Kt=(Ht=Ht||{}).defaultFontFamily||"times",lt=Object.assign({},aG,Ht.genericFontFamilies||{}),Gt=null,Yt=null,Cs=0;Cs<ls.length;++Cs)if(lt[(Gt=Rv(ls[Cs])).family]&&(Gt.family=lt[Gt.family]),mt.hasOwnProperty(Gt.family)){Yt=mt[Gt.family];break}if(!(Yt=Yt||mt[Kt]))throw new Error("Could not find a font-family for the rule '"+FB(Gt)+"' and default family '"+Kt+"'.");if(Yt=(function(rs,Is){if(Is[rs])return Is[rs];var on=n1[rs],ws=on<=n1.normal?-1:1,St=EB(Is,aR,on,ws);if(!St)throw new Error("Could not find a matching font-stretch value for "+rs);return St})(Gt.stretch,Yt),Yt=(function(rs,Is){if(Is[rs])return Is[rs];for(var on=rR[rs],ws=0;ws<on.length;++ws)if(Is[on[ws]])return Is[on[ws]];throw new Error("Could not find a matching font-style for "+rs)})(Gt.style,Yt),!(Yt=(function(rs,Is){if(Is[rs])return Is[rs];if(rs===400&&Is[500])return Is[500];if(rs===500&&Is[400])return Is[400];var on=rG[rs],ws=EB(Is,iR,on,rs<400?-1:1);if(!ws)throw new Error("Could not find a matching font-weight for value "+rs);return ws})(Gt.weight,Yt)))throw new Error("Failed to resolve a font for the rule '"+FB(Gt)+"'.");return Yt})(Tt,ns);this.pdf.setFont(Ts.ref.name,Ts.ref.style)}else{var vs="";(nt==="bold"||parseInt(nt,10)>=700||st==="bold")&&(vs="bold"),st==="italic"&&(vs+="italic"),vs.length===0&&(vs="normal");for(var Ns="",et={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},De=0;De<qe.length;De++){if(this.pdf.internal.getFont(qe[De],vs,{noFallback:!0,disableWarning:!0})!==void 0){Ns=qe[De];break}if(vs==="bolditalic"&&this.pdf.internal.getFont(qe[De],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ns=qe[De],vs="bold";else if(this.pdf.internal.getFont(qe[De],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ns=qe[De],vs="normal";break}}if(Ns===""){for(var rt=0;rt<qe.length;rt++)if(et[qe[rt]]){Ns=et[qe[rt]];break}}Ns=Ns===""?"Times":Ns,this.pdf.setFont(Ns,vs)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(de){this.ctx.globalCompositeOperation=de}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(de){this.ctx.globalAlpha=de}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(de){this.ctx.lineDashOffset=de,me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(de){this.ctx.lineDash=de,me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(de){this.ctx.ignoreClearRect=!!de}})};m.prototype.setLineDash=function(Z){this.lineDash=Z},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){k.call(this,"fill",!1)},m.prototype.stroke=function(){k.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(Z,ge){if(isNaN(Z)||isNaN(ge))throw Pa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var we=this.ctx.transform.applyToPoint(new A(Z,ge));this.path.push({type:"mt",x:we.x,y:we.y}),this.ctx.lastPoint=new A(Z,ge)},m.prototype.closePath=function(){var Z=new A(0,0),ge=0;for(ge=this.path.length-1;ge!==-1;ge--)if(this.path[ge].type==="begin"&&Ca(this.path[ge+1])==="object"&&typeof this.path[ge+1].x=="number"){Z=new A(this.path[ge+1].x,this.path[ge+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new A(Z.x,Z.y)},m.prototype.lineTo=function(Z,ge){if(isNaN(Z)||isNaN(ge))throw Pa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var we=this.ctx.transform.applyToPoint(new A(Z,ge));this.path.push({type:"lt",x:we.x,y:we.y}),this.ctx.lastPoint=new A(we.x,we.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},m.prototype.quadraticCurveTo=function(Z,ge,we,pe){if(isNaN(we)||isNaN(pe)||isNaN(Z)||isNaN(ge))throw Pa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var be=this.ctx.transform.applyToPoint(new A(we,pe)),je=this.ctx.transform.applyToPoint(new A(Z,ge));this.path.push({type:"qct",x1:je.x,y1:je.y,x:be.x,y:be.y}),this.ctx.lastPoint=new A(be.x,be.y)},m.prototype.bezierCurveTo=function(Z,ge,we,pe,be,je){if(isNaN(be)||isNaN(je)||isNaN(Z)||isNaN(ge)||isNaN(we)||isNaN(pe))throw Pa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ne=this.ctx.transform.applyToPoint(new A(be,je)),Je=this.ctx.transform.applyToPoint(new A(Z,ge)),Qe=this.ctx.transform.applyToPoint(new A(we,pe));this.path.push({type:"bct",x1:Je.x,y1:Je.y,x2:Qe.x,y2:Qe.y,x:Ne.x,y:Ne.y}),this.ctx.lastPoint=new A(Ne.x,Ne.y)},m.prototype.arc=function(Z,ge,we,pe,be,je){if(isNaN(Z)||isNaN(ge)||isNaN(we)||isNaN(pe)||isNaN(be))throw Pa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(je=!!je,!this.ctx.transform.isIdentity){var Ne=this.ctx.transform.applyToPoint(new A(Z,ge));Z=Ne.x,ge=Ne.y;var Je=this.ctx.transform.applyToPoint(new A(0,we)),Qe=this.ctx.transform.applyToPoint(new A(0,0));we=Math.sqrt(Math.pow(Je.x-Qe.x,2)+Math.pow(Je.y-Qe.y,2))}Math.abs(be-pe)>=2*Math.PI&&(pe=0,be=2*Math.PI),this.path.push({type:"arc",x:Z,y:ge,radius:we,startAngle:pe,endAngle:be,counterclockwise:je})},m.prototype.arcTo=function(Z,ge,we,pe,be){throw new Error("arcTo not implemented.")},m.prototype.rect=function(Z,ge,we,pe){if(isNaN(Z)||isNaN(ge)||isNaN(we)||isNaN(pe))throw Pa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Z,ge),this.lineTo(Z+we,ge),this.lineTo(Z+we,ge+pe),this.lineTo(Z,ge+pe),this.lineTo(Z,ge),this.lineTo(Z+we,ge),this.lineTo(Z,ge)},m.prototype.fillRect=function(Z,ge,we,pe){if(isNaN(Z)||isNaN(ge)||isNaN(we)||isNaN(pe))throw Pa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var be={};this.lineCap!=="butt"&&(be.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(be.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Z,ge,we,pe),this.fill(),be.hasOwnProperty("lineCap")&&(this.lineCap=be.lineCap),be.hasOwnProperty("lineJoin")&&(this.lineJoin=be.lineJoin)}},m.prototype.strokeRect=function(Z,ge,we,pe){if(isNaN(Z)||isNaN(ge)||isNaN(we)||isNaN(pe))throw Pa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(Z,ge,we,pe),this.stroke())},m.prototype.clearRect=function(Z,ge,we,pe){if(isNaN(Z)||isNaN(ge)||isNaN(we)||isNaN(pe))throw Pa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Z,ge,we,pe))},m.prototype.save=function(Z){Z=typeof Z!="boolean"||Z;for(var ge=this.pdf.internal.getCurrentPageInfo().pageNumber,we=0;we<this.pdf.internal.getNumberOfPages();we++)this.pdf.setPage(we+1),this.pdf.internal.out("q");if(this.pdf.setPage(ge),Z){this.ctx.fontSize=this.pdf.internal.getFontSize();var pe=new o(this.ctx);this.ctxStack.push(this.ctx),this.ctx=pe}},m.prototype.restore=function(Z){Z=typeof Z!="boolean"||Z;for(var ge=this.pdf.internal.getCurrentPageInfo().pageNumber,we=0;we<this.pdf.internal.getNumberOfPages();we++)this.pdf.setPage(we+1),this.pdf.internal.out("Q");this.pdf.setPage(ge),Z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(Z){var ge,we,pe,be;if(Z.isCanvasGradient===!0&&(Z=Z.getColor()),!Z)return{r:0,g:0,b:0,a:0,style:Z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Z))ge=0,we=0,pe=0,be=0;else{var je=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Z);if(je!==null)ge=parseInt(je[1]),we=parseInt(je[2]),pe=parseInt(je[3]),be=1;else if((je=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Z))!==null)ge=parseInt(je[1]),we=parseInt(je[2]),pe=parseInt(je[3]),be=parseFloat(je[4]);else{if(be=1,typeof Z=="string"&&Z.charAt(0)!=="#"){var Ne=new XI(Z);Z=Ne.ok?Ne.toHex():"#000000"}Z.length===4?(ge=Z.substring(1,2),ge+=ge,we=Z.substring(2,3),we+=we,pe=Z.substring(3,4),pe+=pe):(ge=Z.substring(1,3),we=Z.substring(3,5),pe=Z.substring(5,7)),ge=parseInt(ge,16),we=parseInt(we,16),pe=parseInt(pe,16)}}return{r:ge,g:we,b:pe,a:be,style:Z}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(Z,ge,we,pe){if(isNaN(ge)||isNaN(we)||typeof Z!="string")throw Pa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(pe=isNaN(pe)?void 0:pe,!p.call(this)){var be=se(this.ctx.transform.rotation),je=this.ctx.transform.scaleX;le.call(this,{text:Z,x:ge,y:we,scale:je,angle:be,align:this.textAlign,maxWidth:pe})}},m.prototype.strokeText=function(Z,ge,we,pe){if(isNaN(ge)||isNaN(we)||typeof Z!="string")throw Pa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){pe=isNaN(pe)?void 0:pe;var be=se(this.ctx.transform.rotation),je=this.ctx.transform.scaleX;le.call(this,{text:Z,x:ge,y:we,scale:je,renderingMode:"stroke",angle:be,align:this.textAlign,maxWidth:pe})}},m.prototype.measureText=function(Z){if(typeof Z!="string")throw Pa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ge=this.pdf,we=this.pdf.internal.scaleFactor,pe=ge.internal.getFontSize(),be=ge.getStringUnitWidth(Z)*pe/ge.internal.scaleFactor;return new function(je){var Ne=(je=je||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ne}}),this}({width:be*=Math.round(96*we/72*1e4)/1e4})},m.prototype.scale=function(Z,ge){if(isNaN(Z)||isNaN(ge))throw Pa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var we=new d(Z,0,0,ge,0,0);this.ctx.transform=this.ctx.transform.multiply(we)},m.prototype.rotate=function(Z){if(isNaN(Z))throw Pa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ge=new d(Math.cos(Z),Math.sin(Z),-Math.sin(Z),Math.cos(Z),0,0);this.ctx.transform=this.ctx.transform.multiply(ge)},m.prototype.translate=function(Z,ge){if(isNaN(Z)||isNaN(ge))throw Pa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var we=new d(1,0,0,1,Z,ge);this.ctx.transform=this.ctx.transform.multiply(we)},m.prototype.transform=function(Z,ge,we,pe,be,je){if(isNaN(Z)||isNaN(ge)||isNaN(we)||isNaN(pe)||isNaN(be)||isNaN(je))throw Pa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ne=new d(Z,ge,we,pe,be,je);this.ctx.transform=this.ctx.transform.multiply(Ne)},m.prototype.setTransform=function(Z,ge,we,pe,be,je){Z=isNaN(Z)?1:Z,ge=isNaN(ge)?0:ge,we=isNaN(we)?0:we,pe=isNaN(pe)?1:pe,be=isNaN(be)?0:be,je=isNaN(je)?0:je,this.ctx.transform=new d(Z,ge,we,pe,be,je)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(Z,ge,we,pe,be,je,Ne,Je,Qe){var pt=this.pdf.getImageProperties(Z),Te=1,Ce=1,_e=1,de=1;pe!==void 0&&Je!==void 0&&(_e=Je/pe,de=Qe/be,Te=pt.width/pe*Je/pe,Ce=pt.height/be*Qe/be),je===void 0&&(je=ge,Ne=we,ge=0,we=0),pe!==void 0&&Je===void 0&&(Je=pe,Qe=be),pe===void 0&&Je===void 0&&(Je=pt.width,Qe=pt.height);var dt=this.ctx.transform.decompose(),st=se(dt.rotate.shx),nt=new d,at=(nt=(nt=(nt=nt.multiply(dt.translate)).multiply(dt.skew)).multiply(dt.scale)).applyToRectangle(new u(je-ge*_e,Ne-we*de,pe*Te,be*Ce));if(this.autoPaging){for(var Dt,yt=w.call(this,at),qe=[],Tt=0;Tt<yt.length;Tt+=1)qe.indexOf(yt[Tt])===-1&&qe.push(yt[Tt]);Q(qe);for(var ns=qe[0],Ts=qe[qe.length-1],vs=ns;vs<Ts+1;vs++){this.pdf.setPage(vs);var Ns=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],et=vs===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=vs===1?0:De+(vs-2)*rt;if(this.ctx.clip_path.length!==0){var ls=this.path;Dt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(Dt,this.posX+this.margin[3],-mt+et+this.ctx.prevPageLastElemOffset),z.call(this,"fill",!0),this.path=ls}var Ht=JSON.parse(JSON.stringify(at));Ht=L([Ht],this.posX+this.margin[3],-mt+et+this.ctx.prevPageLastElemOffset)[0];var Kt=(vs>ns||vs<Ts)&&b.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ns,rt,null).clip().discardPath()),this.pdf.addImage(Z,"JPEG",Ht.x,Ht.y,Ht.w,Ht.h,null,null,st),Kt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(Z,"JPEG",at.x,at.y,at.w,at.h,null,null,st)};var w=function(Z,ge,we){var pe=[];ge=ge||this.pdf.internal.pageSize.width,we=we||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var be=this.posY+this.ctx.prevPageLastElemOffset;switch(Z.type){default:case"mt":case"lt":pe.push(Math.floor((Z.y+be)/we)+1);break;case"arc":pe.push(Math.floor((Z.y+be-Z.radius)/we)+1),pe.push(Math.floor((Z.y+be+Z.radius)/we)+1);break;case"qct":var je=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Z.x1,Z.y1,Z.x,Z.y);pe.push(Math.floor((je.y+be)/we)+1),pe.push(Math.floor((je.y+je.h+be)/we)+1);break;case"bct":var Ne=Me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Z.x1,Z.y1,Z.x2,Z.y2,Z.x,Z.y);pe.push(Math.floor((Ne.y+be)/we)+1),pe.push(Math.floor((Ne.y+Ne.h+be)/we)+1);break;case"rect":pe.push(Math.floor((Z.y+be)/we)+1),pe.push(Math.floor((Z.y+Z.h+be)/we)+1)}for(var Je=0;Je<pe.length;Je+=1)for(;this.pdf.internal.getNumberOfPages()<pe[Je];)B.call(this);return pe},B=function(){var Z=this.fillStyle,ge=this.strokeStyle,we=this.font,pe=this.lineCap,be=this.lineWidth,je=this.lineJoin;this.pdf.addPage(),this.fillStyle=Z,this.strokeStyle=ge,this.font=we,this.lineCap=pe,this.lineWidth=be,this.lineJoin=je},L=function(Z,ge,we){for(var pe=0;pe<Z.length;pe++)switch(Z[pe].type){case"bct":Z[pe].x2+=ge,Z[pe].y2+=we;case"qct":Z[pe].x1+=ge,Z[pe].y1+=we;default:Z[pe].x+=ge,Z[pe].y+=we}return Z},Q=function(Z){return Z.sort(function(ge,we){return ge-we})},k=function(Z,ge){var we=this.fillStyle,pe=this.strokeStyle,be=this.lineCap,je=this.lineWidth,Ne=Math.abs(je*this.ctx.transform.scaleX),Je=this.lineJoin;if(this.autoPaging){for(var Qe,pt,Te=JSON.parse(JSON.stringify(this.path)),Ce=JSON.parse(JSON.stringify(this.path)),_e=[],de=0;de<Ce.length;de++)if(Ce[de].x!==void 0)for(var dt=w.call(this,Ce[de]),st=0;st<dt.length;st+=1)_e.indexOf(dt[st])===-1&&_e.push(dt[st]);for(var nt=0;nt<_e.length;nt++)for(;this.pdf.internal.getNumberOfPages()<_e[nt];)B.call(this);Q(_e);for(var at=_e[0],Dt=_e[_e.length-1],yt=at;yt<Dt+1;yt++){this.pdf.setPage(yt),this.fillStyle=we,this.strokeStyle=pe,this.lineCap=be,this.lineWidth=Ne,this.lineJoin=Je;var qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Tt=yt===1?this.posY+this.margin[0]:this.margin[0],ns=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ts=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],vs=yt===1?0:ns+(yt-2)*Ts;if(this.ctx.clip_path.length!==0){var Ns=this.path;Qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(Qe,this.posX+this.margin[3],-vs+Tt+this.ctx.prevPageLastElemOffset),z.call(this,Z,!0),this.path=Ns}if(pt=JSON.parse(JSON.stringify(Te)),this.path=L(pt,this.posX+this.margin[3],-vs+Tt+this.ctx.prevPageLastElemOffset),ge===!1||yt===0){var et=(yt>at||yt<Dt)&&b.call(this);et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,Ts,null).clip().discardPath()),z.call(this,Z,ge),et&&this.pdf.restoreGraphicsState()}this.lineWidth=je}this.path=Te}else this.lineWidth=Ne,z.call(this,Z,ge),this.lineWidth=je},z=function(Z,ge){if((Z!=="stroke"||ge||!j.call(this))&&(Z==="stroke"||ge||!p.call(this))){for(var we,pe,be=[],je=this.path,Ne=0;Ne<je.length;Ne++){var Je=je[Ne];switch(Je.type){case"begin":be.push({begin:!0});break;case"close":be.push({close:!0});break;case"mt":be.push({start:Je,deltas:[],abs:[]});break;case"lt":var Qe=be.length;if(je[Ne-1]&&!isNaN(je[Ne-1].x)&&(we=[Je.x-je[Ne-1].x,Je.y-je[Ne-1].y],Qe>0)){for(;Qe>=0;Qe--)if(be[Qe-1].close!==!0&&be[Qe-1].begin!==!0){be[Qe-1].deltas.push(we),be[Qe-1].abs.push(Je);break}}break;case"bct":we=[Je.x1-je[Ne-1].x,Je.y1-je[Ne-1].y,Je.x2-je[Ne-1].x,Je.y2-je[Ne-1].y,Je.x-je[Ne-1].x,Je.y-je[Ne-1].y],be[be.length-1].deltas.push(we);break;case"qct":var pt=je[Ne-1].x+2/3*(Je.x1-je[Ne-1].x),Te=je[Ne-1].y+2/3*(Je.y1-je[Ne-1].y),Ce=Je.x+2/3*(Je.x1-Je.x),_e=Je.y+2/3*(Je.y1-Je.y),de=Je.x,dt=Je.y;we=[pt-je[Ne-1].x,Te-je[Ne-1].y,Ce-je[Ne-1].x,_e-je[Ne-1].y,de-je[Ne-1].x,dt-je[Ne-1].y],be[be.length-1].deltas.push(we);break;case"arc":be.push({deltas:[],abs:[],arc:!0}),Array.isArray(be[be.length-1].abs)&&be[be.length-1].abs.push(Je)}}pe=ge?null:Z==="stroke"?"stroke":"fill";for(var st=!1,nt=0;nt<be.length;nt++)if(be[nt].arc)for(var at=be[nt].abs,Dt=0;Dt<at.length;Dt++){var yt=at[Dt];yt.type==="arc"?q.call(this,yt.x,yt.y,yt.radius,yt.startAngle,yt.endAngle,yt.counterclockwise,void 0,ge,!st):ue.call(this,yt.x,yt.y),st=!0}else if(be[nt].close===!0)this.pdf.internal.out("h"),st=!1;else if(be[nt].begin!==!0){var qe=be[nt].start.x,Tt=be[nt].start.y;te.call(this,be[nt].deltas,qe,Tt),st=!0}pe&&X.call(this,pe),ge&&fe.call(this)}},J=function(Z){var ge=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,we=ge*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Z-we;case"top":return Z+ge-we;case"hanging":return Z+ge-2*we;case"middle":return Z+ge/2-we;default:return Z}},$=function(Z){return Z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var Z=function(){};return Z.colorStops=[],Z.addColorStop=function(ge,we){this.colorStops.push([ge,we])},Z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Z.isCanvasGradient=!0,Z},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var q=function(Z,ge,we,pe,be,je,Ne,Je,Qe){for(var pt=ne.call(this,we,pe,be,je),Te=0;Te<pt.length;Te++){var Ce=pt[Te];Te===0&&(Qe?ee.call(this,Ce.x1+Z,Ce.y1+ge):ue.call(this,Ce.x1+Z,Ce.y1+ge)),re.call(this,Z,ge,Ce.x2,Ce.y2,Ce.x3,Ce.y3,Ce.x4,Ce.y4)}Je?fe.call(this):X.call(this,Ne)},X=function(Z){switch(Z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},fe=function(){this.pdf.clip(),this.pdf.discardPath()},ee=function(Z,ge){this.pdf.internal.out(n(Z)+" "+r(ge)+" m")},le=function(Z){var ge;switch(Z.align){case"right":case"end":ge="right";break;case"center":ge="center";break;default:ge="left"}var we,pe,be,je=this.pdf.getTextDimensions(Z.text),Ne=J.call(this,Z.y),Je=$.call(this,Ne)-je.h,Qe=this.ctx.transform.applyToPoint(new A(Z.x,Ne));if(this.autoPaging){var pt=this.ctx.transform.decompose(),Te=new d;Te=(Te=(Te=Te.multiply(pt.translate)).multiply(pt.skew)).multiply(pt.scale);for(var Ce=this.ctx.transform.applyToRectangle(new u(Z.x,Ne,je.w,je.h)),_e=Te.applyToRectangle(new u(Z.x,Je,je.w,je.h)),de=w.call(this,_e),dt=[],st=0;st<de.length;st+=1)dt.indexOf(de[st])===-1&&dt.push(de[st]);Q(dt);for(var nt=dt[0],at=dt[dt.length-1],Dt=nt;Dt<at+1;Dt++){this.pdf.setPage(Dt);var yt=Dt===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tt=this.pdf.internal.pageSize.height-this.margin[2],ns=Tt-this.margin[0],Ts=this.pdf.internal.pageSize.width-this.margin[1],vs=Ts-this.margin[3],Ns=Dt===1?0:qe+(Dt-2)*ns;if(this.ctx.clip_path.length!==0){var et=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(we,this.posX+this.margin[3],-1*Ns+yt),z.call(this,"fill",!0),this.path=et}var De=L([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-Ns+yt+this.ctx.prevPageLastElemOffset)[0];Z.scale>=.01&&(pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pe*Z.scale),be=this.lineWidth,this.lineWidth=be*Z.scale);var rt=this.autoPaging!=="text";if(rt||De.y+De.h<=Tt){if(rt||De.y>=yt&&De.x<=Ts){var mt=rt?Z.text:this.pdf.splitTextToSize(Z.text,Z.maxWidth||Ts-De.x)[0],ls=L([JSON.parse(JSON.stringify(Ce))],this.posX+this.margin[3],-Ns+yt+this.ctx.prevPageLastElemOffset)[0],Ht=rt&&(Dt>nt||Dt<at)&&b.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vs,ns,null).clip().discardPath()),this.pdf.text(mt,ls.x,ls.y,{angle:Z.angle,align:ge,renderingMode:Z.renderingMode}),Ht&&this.pdf.restoreGraphicsState()}}else De.y<Tt&&(this.ctx.prevPageLastElemOffset+=Tt-De.y);Z.scale>=.01&&(this.pdf.setFontSize(pe),this.lineWidth=be)}}else Z.scale>=.01&&(pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pe*Z.scale),be=this.lineWidth,this.lineWidth=be*Z.scale),this.pdf.text(Z.text,Qe.x+this.posX,Qe.y+this.posY,{angle:Z.angle,align:ge,renderingMode:Z.renderingMode,maxWidth:Z.maxWidth}),Z.scale>=.01&&(this.pdf.setFontSize(pe),this.lineWidth=be)},ue=function(Z,ge,we,pe){we=we||0,pe=pe||0,this.pdf.internal.out(n(Z+we)+" "+r(ge+pe)+" l")},te=function(Z,ge,we){return this.pdf.lines(Z,ge,we,null,null)},re=function(Z,ge,we,pe,be,je,Ne,Je){this.pdf.internal.out([s(i(we+Z)),s(c(pe+ge)),s(i(be+Z)),s(c(je+ge)),s(i(Ne+Z)),s(c(Je+ge)),"c"].join(" "))},ne=function(Z,ge,we,pe){for(var be=2*Math.PI,je=Math.PI/2;ge>we;)ge-=be;var Ne=Math.abs(we-ge);Ne<be&&pe&&(Ne=be-Ne);for(var Je=[],Qe=pe?-1:1,pt=ge;Ne>1e-5;){var Te=pt+Qe*Math.min(Ne,je);Je.push(oe.call(this,Z,pt,Te)),Ne-=Math.abs(Te-pt),pt=Te}return Je},oe=function(Z,ge,we){var pe=(we-ge)/2,be=Z*Math.cos(pe),je=Z*Math.sin(pe),Ne=be,Je=-je,Qe=Ne*Ne+Je*Je,pt=Qe+Ne*be+Je*je,Te=4/3*(Math.sqrt(2*Qe*pt)-pt)/(Ne*je-Je*be),Ce=Ne-Te*Je,_e=Je+Te*Ne,de=Ce,dt=-_e,st=pe+ge,nt=Math.cos(st),at=Math.sin(st);return{x1:Z*Math.cos(ge),y1:Z*Math.sin(ge),x2:Ce*nt-_e*at,y2:Ce*at+_e*nt,x3:de*nt-dt*at,y3:de*at+dt*nt,x4:Z*Math.cos(we),y4:Z*Math.sin(we)}},se=function(Z){return 180*Z/Math.PI},xe=function(Z,ge,we,pe,be,je){var Ne=Z+.5*(we-Z),Je=ge+.5*(pe-ge),Qe=be+.5*(we-be),pt=je+.5*(pe-je),Te=Math.min(Z,be,Ne,Qe),Ce=Math.max(Z,be,Ne,Qe),_e=Math.min(ge,je,Je,pt),de=Math.max(ge,je,Je,pt);return new u(Te,_e,Ce-Te,de-_e)},Me=function(Z,ge,we,pe,be,je,Ne,Je){var Qe,pt,Te,Ce,_e,de,dt,st,nt,at,Dt,yt,qe,Tt,ns=we-Z,Ts=pe-ge,vs=be-we,Ns=je-pe,et=Ne-be,De=Je-je;for(pt=0;pt<41;pt++)nt=(dt=(Te=Z+(Qe=pt/40)*ns)+Qe*((_e=we+Qe*vs)-Te))+Qe*(_e+Qe*(be+Qe*et-_e)-dt),at=(st=(Ce=ge+Qe*Ts)+Qe*((de=pe+Qe*Ns)-Ce))+Qe*(de+Qe*(je+Qe*De-de)-st),pt==0?(Dt=nt,yt=at,qe=nt,Tt=at):(Dt=Math.min(Dt,nt),yt=Math.min(yt,at),qe=Math.max(qe,nt),Tt=Math.max(Tt,at));return new u(Math.round(Dt),Math.round(yt),Math.round(qe-Dt),Math.round(Tt-yt))},me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Z,ge,we=(Z=this.ctx.lineDash,ge=this.ctx.lineDashOffset,JSON.stringify({lineDash:Z,lineDashOffset:ge}));this.prevLineDash!==we&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=we)}}})(bn.API),(function(t){var s=function(A){var u,d,h,o,m,y,p,j,b,w;for(d=[],h=0,o=(A+=u="\0\0\0\0".slice(A.length%4||4)).length;o>h;h+=4)(m=(A.charCodeAt(h)<<24)+(A.charCodeAt(h+1)<<16)+(A.charCodeAt(h+2)<<8)+A.charCodeAt(h+3))!==0?(y=(m=((m=((m=((m=(m-(w=m%85))/85)-(b=m%85))/85)-(j=m%85))/85)-(p=m%85))/85)%85,d.push(y+33,p+33,j+33,b+33,w+33)):d.push(122);return(function(B,L){for(var Q=L;Q>0;Q--)B.pop()})(d,u.length),String.fromCharCode.apply(String,d)+"~>"},n=function(A){var u,d,h,o,m,y=String,p="length",j=255,b="charCodeAt",w="slice",B="replace";for(A[w](-2),A=A[w](0,-2)[B](/\s/g,"")[B]("z","!!!!!"),h=[],o=0,m=(A+=u="uuuuu"[w](A[p]%5||5))[p];m>o;o+=5)d=52200625*(A[b](o)-33)+614125*(A[b](o+1)-33)+7225*(A[b](o+2)-33)+85*(A[b](o+3)-33)+(A[b](o+4)-33),h.push(j&d>>24,j&d>>16,j&d>>8,j&d);return(function(L,Q){for(var k=Q;k>0;k--)L.pop()})(h,u[p]),y.fromCharCode.apply(y,h)},r=function(A){return A.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(A){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((A=A.replace(/\s/g,"")).indexOf(">")!==-1&&(A=A.substr(0,A.indexOf(">"))),A.length%2&&(A+="0"),u.test(A)===!1)return"";for(var d="",h=0;h<A.length;h+=2)d+=String.fromCharCode("0x"+(A[h]+A[h+1]));return d},c=function(A){for(var u=new Uint8Array(A.length),d=A.length;d--;)u[d]=A.charCodeAt(d);return(u=Yb(u)).reduce(function(h,o){return h+String.fromCharCode(o)},"")};t.processDataByFilters=function(A,u){var d=0,h=A||"",o=[];for(typeof(u=u||[])=="string"&&(u=[u]),d=0;d<u.length;d+=1)switch(u[d]){case"ASCII85Decode":case"/ASCII85Decode":h=n(h),o.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=s(h),o.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=i(h),o.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=r(h),o.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=c(h),o.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[d]+'" is not implemented')}return{data:h,reverseChain:o.reverse().join(" ")}}})(bn.API),(function(t){t.loadFile=function(s,n,r){return(function(i,c,A){c=c!==!1,A=typeof A=="function"?A:function(){};var u=void 0;try{u=(function(d,h,o){var m=new XMLHttpRequest,y=0,p=function(j){var b=j.length,w=[],B=String.fromCharCode;for(y=0;y<b;y+=1)w.push(B(255&j.charCodeAt(y)));return w.join("")};if(m.open("GET",d,!h),m.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(m.onload=function(){m.status===200?o(p(this.responseText)):o(void 0)}),m.send(null),h&&m.status===200)return p(m.responseText)})(i,c,A)}catch{}return u})(s,n,r)},t.loadImageFile=t.loadFile})(bn.API),(function(t){function s(){return(Xn.html2canvas?Promise.resolve(Xn.html2canvas):Yc(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function n(){return(Xn.DOMPurify?Promise.resolve(Xn.DOMPurify):Yc(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var r=function(u){var d=Ca(u);return d==="undefined"?"undefined":d==="string"||u instanceof String?"string":d==="number"||u instanceof Number?"number":d==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":d==="object"?"object":"unknown"},i=function(u,d){var h=document.createElement(u);for(var o in d.className&&(h.className=d.className),d.innerHTML&&d.dompurify&&(h.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)h.style[o]=d.style[o];return h},c=function u(d,h){for(var o=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),m=d.firstChild;m;m=m.nextSibling)h!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||o.appendChild(u(m,h));return d.nodeType===1&&(d.nodeName==="CANVAS"?(o.width=d.width,o.height=d.height,o.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(o.value=d.value),o.addEventListener("load",function(){o.scrollTop=d.scrollTop,o.scrollLeft=d.scrollLeft},!0)),o},A=function u(d){var h=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),o=u.convert(Promise.resolve(),h);return(o=o.setProgress(1,u,1,[u])).set(d)};(A.prototype=Object.create(Promise.prototype)).constructor=A,A.convert=function(u,d){return u.__proto__=d||A.prototype,u},A.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},A.prototype.from=function(u,d){return this.then(function(){switch(d=d||(function(h){switch(r(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),d){case"string":return this.then(n).then(function(h){return this.set({src:i("div",{innerHTML:u,dompurify:h})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},A.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},A.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=c(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},A.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(s).then(function(d){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,d(this.prop.container,h)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},A.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(s).then(function(d){var h=this.opt.jsPDF,o=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=o,o)for(var p=0;p<o.length;++p){var j=o[p],b=j.src.find(function(w){return w.format==="truetype"});b&&h.addFont(b.url,j.ref.name,j.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,h.context2d.save(!0),d(this.prop.container,y)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},A.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},A.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},A.prototype.output=function(u,d,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(u,d):this.outputPdf(u,d)},A.prototype.outputPdf=function(u,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,d)})},A.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},A.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},A.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},A.prototype.set=function(u){if(r(u)!=="object")return this;var d=Object.keys(u||{}).map(function(h){if(h in A.template.prop)return function(){this.prop[h]=u[h]};switch(h){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[h]=u[h]}}},this);return this.then(function(){return this.thenList(d)})},A.prototype.get=function(u,d){return this.then(function(){var h=u in A.template.prop?this.prop[u]:this.opt[u];return d?d(h):h})},A.prototype.setMargin=function(u){return this.then(function(){switch(r(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},A.prototype.setPageSize=function(u){function d(h,o){return Math.floor(h*o/72*96)}return this.then(function(){(u=u||bn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:d(u.inner.width,u.k),height:d(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},A.prototype.setProgress=function(u,d,h,o){return u!=null&&(this.progress.val=u),d!=null&&(this.progress.state=d),h!=null&&(this.progress.n=h),o!=null&&(this.progress.stack=o),this.progress.ratio=this.progress.val/this.progress.state,this},A.prototype.updateProgress=function(u,d,h,o){return this.setProgress(u?this.progress.val+u:null,d||null,h?this.progress.n+h:null,o?this.progress.stack.concat(o):null)},A.prototype.then=function(u,d){var h=this;return this.thenCore(u,d,function(o,m){return h.updateProgress(null,null,1,[o]),Promise.prototype.then.call(this,function(y){return h.updateProgress(null,o),y}).then(o,m).then(function(y){return h.updateProgress(1),y})})},A.prototype.thenCore=function(u,d,h){h=h||Promise.prototype.then;var o=this;u&&(u=u.bind(o)),d&&(d=d.bind(o));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?o:A.convert(Object.assign({},o),Promise.prototype),y=h.call(m,u,d);return A.convert(y,o.__proto__)},A.prototype.thenExternal=function(u,d){return Promise.prototype.then.call(this,u,d)},A.prototype.thenList=function(u){var d=this;return u.forEach(function(h){d=d.thenCore(h)}),d},A.prototype.catch=function(u){u&&(u=u.bind(this));var d=Promise.prototype.catch.call(this,u);return A.convert(d,this)},A.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},A.prototype.error=function(u){return this.then(function(){throw new Error(u)})},A.prototype.using=A.prototype.set,A.prototype.saveAs=A.prototype.save,A.prototype.export=A.prototype.output,A.prototype.run=A.prototype.then,bn.getPageSize=function(u,d,h){if(Ca(u)==="object"){var o=u;u=o.orientation,d=o.unit||d,h=o.format||h}d=d||"mm",h=h||"a4",u=(""+(u||"P")).toLowerCase();var m,y=(""+h).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+d}var j,b=0,w=0;if(p.hasOwnProperty(y))b=p[y][1]/m,w=p[y][0]/m;else try{b=h[1],w=h[0]}catch{throw new Error("Invalid format: "+h)}if(u==="p"||u==="portrait")u="p",w>b&&(j=w,w=b,b=j);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",b>w&&(j=w,w=b,b=j)}return{width:w,height:b,unit:d,k:m,orientation:u}},t.html=function(u,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(Rv):null;var h=new A(d);return d.worker?h:h.from(u).doCallback()}})(bn.API),bn.API.addJS=function(t){return OB=t,this.internal.events.subscribe("postPutResources",function(){ny=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ny+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),RB=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+OB+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ny!==void 0&&RB!==void 0&&this.internal.out("/Names <</JavaScript "+ny+" 0 R>>")}),this},(function(t){var s;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),c=0;c<i.length;c++){var A=i[c],u=r.exec(A);if(u!=null){var d=u[1];n.internal.newObjectDeferredBegin(d,!1)}n.internal.write(A)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,o=[];for(c=0;c<h;c++){var m=n.internal.newObject();o.push(m);var y=n.internal.getPageInfo(c+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),c=0;c<o.length;c++)n.internal.write("(page_"+(c+1)+")"+o[c]+" 0 R");n.internal.write(" ] >>","endobj"),s=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+s+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,c){var A={title:i,options:c,children:[]};return r==null&&(r=this.root),r.children.push(A),A},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,c=0;c<r.children.length;c++){var A=r.children[c];this.objStart(A),this.line("/Title "+this.makeString(A.title)),this.line("/Parent "+this.makeRef(r)),c>0&&this.line("/Prev "+this.makeRef(r.children[c-1])),c<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[c+1])),A.children.length>0&&(this.line("/First "+this.makeRef(A.children[0])),this.line("/Last "+this.makeRef(A.children[A.children.length-1])));var u=this.count=this.count_r({count:0},A);if(u>0&&this.line("/Count "+u),A.options&&A.options.pageNumber){var d=n.internal.getPageInfo(A.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var h=0;h<r.children.length;h++)this.renderItems(r.children[h])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var c=0;c<i.children.length;c++)r.count++,this.count_r(r,i.children[c]);return r.count}}])})(bn.API),(function(t){var s=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,c,A,u){var d,h=this.decode.DCT_DECODE,o=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=A||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,d=(function(m){for(var y,p=256*m.charCodeAt(4)+m.charCodeAt(5),j=m.length,b={width:0,height:0,numcomponents:1},w=4;w<j;w+=2){if(w+=p,s.indexOf(m.charCodeAt(w+1))!==-1){y=256*m.charCodeAt(w+5)+m.charCodeAt(w+6),b={width:256*m.charCodeAt(w+7)+m.charCodeAt(w+8),height:y,numcomponents:m.charCodeAt(w+9)};break}p=256*m.charCodeAt(w+2)+m.charCodeAt(w+3)}return b})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),d.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}o={data:n,width:d.width,height:d.height,colorSpace:u,bitsPerComponent:8,filter:h,index:r,alias:i}}return o}})(bn.API),bn.API.processPNG=function(t,s,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,c=K$(t,{checkCrc:!0}),A=c.width,u=c.height,d=c.channels,h=c.palette,o=c.depth;i=h&&d===1?(function(q){for(var X=q.width,fe=q.height,ee=q.data,le=q.palette,ue=q.depth,te=!1,re=[],ne=[],oe=void 0,se=!1,xe=0,Me=0;Me<le.length;Me++){var me=QN(le[Me],4),Z=me[0],ge=me[1],we=me[2],pe=me[3];re.push(Z,ge,we),pe!=null&&(pe===0?(xe++,ne.length<1&&ne.push(Me)):pe<255&&(se=!0))}if(se||xe>1){te=!0,ne=void 0;var be=X*fe;oe=new Uint8Array(be);for(var je=new DataView(ee.buffer),Ne=0;Ne<be;Ne++){var Je=Uv(je,Ne,ue),Qe=QN(le[Je],4)[3];oe[Ne]=Qe}}else xe===0&&(ne=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:te?8:void 0,colorBytes:ee,alphaBytes:oe,needSMask:te,palette:re,mask:ne}})(c):d===2||d===4?(function(q){for(var X=q.data,fe=q.width,ee=q.height,le=q.channels,ue=q.depth,te=le===2?"DeviceGray":"DeviceRGB",re=le-1,ne=fe*ee,oe=re,se=ne*oe,xe=1*ne,Me=Math.ceil(se*ue/8),me=Math.ceil(xe*ue/8),Z=new Uint8Array(Me),ge=new Uint8Array(me),we=new DataView(X.buffer),pe=new DataView(Z.buffer),be=new DataView(ge.buffer),je=!1,Ne=0;Ne<ne;Ne++){for(var Je=Ne*le,Qe=0;Qe<oe;Qe++)HB(pe,Uv(we,Je+Qe,ue),Ne*oe+Qe,ue);var pt=Uv(we,Je+oe,ue);pt<(1<<ue)-1&&(je=!0),HB(be,pt,1*Ne,ue)}return{colorSpace:te,colorsPerPixel:re,sMaskBitsPerComponent:je?ue:void 0,colorBytes:Z,alphaBytes:ge,needSMask:je}})(c):(function(q){var X=q.data,fe=q.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:fe,colorsPerPixel:fe==="DeviceGray"?1:3,colorBytes:X instanceof Uint16Array?(function(ee){for(var le=ee.length,ue=new Uint8Array(2*le),te=new DataView(ue.buffer,ue.byteOffset,ue.byteLength),re=0;re<le;re++)te.setUint16(2*re,ee[re],!1);return ue})(X):X,needSMask:!1}})(c);var m,y,p,j=i,b=j.colorSpace,w=j.colorsPerPixel,B=j.sMaskBitsPerComponent,L=j.colorBytes,Q=j.alphaBytes,k=j.needSMask,z=j.palette,J=j.mask,$=null;return r!==bn.API.image_compression.NONE&&typeof Yb=="function"?($=(function(q){var X;switch(q){case bn.API.image_compression.FAST:X=11;break;case bn.API.image_compression.MEDIUM:X=13;break;case bn.API.image_compression.SLOW:X=14;break;default:X=12}return X})(r),m=this.decode.FLATE_DECODE,y="/Predictor ".concat($," /Colors ").concat(w," /BitsPerComponent ").concat(o," /Columns ").concat(A),t=QB(L,Math.ceil(A*w*o/8),w,o,r),k&&(p=QB(Q,Math.ceil(A*B/8),1,B,r))):(m=void 0,y=void 0,t=L,k&&(p=Q)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:n,data:t,index:s,filter:m,decodeParameters:y,transparency:J,palette:z,sMask:p,predictor:$,width:A,height:u,bitsPerComponent:o,sMaskBitsPerComponent:B,colorSpace:b}}},(function(t){t.processGIF89A=function(s,n,r,i){var c=new AG(s),A=c.width,u=c.height,d=[];c.decodeAndBlitFrameRGBA(0,d);var h={data:d,width:A,height:u},o=new Lv(100).encode(h,100);return t.processJPEG.call(this,o,n,r,i)},t.processGIF87A=t.processGIF89A})(bn.API),Vc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var s=0;s<t;s++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0);this.palette[s]={red:i,green:r,blue:n,quad:c}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Vc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,s=this.width*this.height*4;this.data=new Uint8Array(s),this[t]()}catch(n){Pa.log("bit decode error:"+n)}},Vc.prototype.bit1=function(){var t,s=Math.ceil(this.width/8),n=s%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<s;i++)for(var c=this.datav.getUint8(this.pos++,!0),A=r*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var d=this.palette[c>>7-u&1];this.data[A+4*u]=d.blue,this.data[A+4*u+1]=d.green,this.data[A+4*u+2]=d.red,this.data[A+4*u+3]=255}n!==0&&(this.pos+=4-n)}},Vc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),s=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var c=this.datav.getUint8(this.pos++,!0),A=r*this.width*4+2*i*4,u=c>>4,d=15&c,h=this.palette[u];if(this.data[A]=h.blue,this.data[A+1]=h.green,this.data[A+2]=h.red,this.data[A+3]=255,2*i+1>=this.width)break;h=this.palette[d],this.data[A+4]=h.blue,this.data[A+4+1]=h.green,this.data[A+4+2]=h.red,this.data[A+4+3]=255}s!==0&&(this.pos+=4-s)}},Vc.prototype.bit8=function(){for(var t=this.width%4,s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+4*r;if(i<this.palette.length){var A=this.palette[i];this.data[c]=A.red,this.data[c+1]=A.green,this.data[c+2]=A.blue,this.data[c+3]=255}else this.data[c]=255,this.data[c+1]=255,this.data[c+2]=255,this.data[c+3]=255}t!==0&&(this.pos+=4-t)}},Vc.prototype.bit15=function(){for(var t=this.width%3,s=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var A=(c&s)/s*255|0,u=(c>>5&s)/s*255|0,d=(c>>10&s)/s*255|0,h=c>>15?255:0,o=r*this.width*4+4*i;this.data[o]=d,this.data[o+1]=u,this.data[o+2]=A,this.data[o+3]=h}this.pos+=t}},Vc.prototype.bit16=function(){for(var t=this.width%3,s=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,c=0;c<this.width;c++){var A=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(A&s)/s*255|0,d=(A>>5&n)/n*255|0,h=(A>>11)/s*255|0,o=i*this.width*4+4*c;this.data[o]=h,this.data[o+1]=d,this.data[o+2]=u,this.data[o+3]=255}this.pos+=t}},Vc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),A=s*this.width*4+4*n;this.data[A]=c,this.data[A+1]=i,this.data[A+2]=r,this.data[A+3]=255}this.pos+=this.width%4}},Vc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var s=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),A=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+4*n;this.data[u]=c,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=A}},Vc.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(s,n,r,i){var c=new Vc(s,!1),A=c.width,u=c.height,d={data:c.getData(),width:A,height:u},h=new Lv(100).encode(d,100);return t.processJPEG.call(this,h,n,r,i)}})(bn.API),zB.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(s,n,r,i){var c=new zB(s),A=c.width,u=c.height,d={data:c.getData(),width:A,height:u},h=new Lv(100).encode(d,100);return t.processJPEG.call(this,h,n,r,i)}})(bn.API),bn.API.processRGBA=function(t,s,n){for(var r=t.data,i=r.length,c=new Uint8Array(i/4*3),A=new Uint8Array(i/4),u=0,d=0,h=0;h<i;h+=4){var o=r[h],m=r[h+1],y=r[h+2],p=r[h+3];c[u++]=o,c[u++]=m,c[u++]=y,A[d++]=p}var j=this.__addimage__.arrayBufferToBinaryString(c);return{alpha:this.__addimage__.arrayBufferToBinaryString(A),data:j,index:s,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},bn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Af=bn.API,ry=Af.getCharWidthsArray=function(t,s){var n,r,i=(s=s||{}).font||this.internal.getFont(),c=s.fontSize||this.internal.getFontSize(),A=s.charSpace||this.internal.getCharSpace(),u=s.widths?s.widths:i.metadata.Unicode.widths,d=u.fof?u.fof:1,h=s.kerning?s.kerning:i.metadata.Unicode.kerning,o=h.fof?h.fof:1,m=s.doKerning!==!1,y=0,p=t.length,j=0,b=u[0]||d,w=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?w.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+A*(1e3/c)||0)/1e3):(y=m&&Ca(h[r])==="object"&&!isNaN(parseInt(h[r][j],10))?h[r][j]/o:0,w.push((u[r]||b)/d+y)),j=r;return w},UB=Af.getStringUnitWidth=function(t,s){var n=(s=s||{}).fontSize||this.internal.getFontSize(),r=s.font||this.internal.getFont(),i=s.charSpace||this.internal.getCharSpace();return Af.processArabic&&(t=Af.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:ry.apply(this,arguments).reduce(function(c,A){return c+A},0)},LB=function(t,s,n,r){for(var i=[],c=0,A=t.length,u=0;c!==A&&u+s[c]<n;)u+=s[c],c++;i.push(t.slice(0,c));var d=c;for(u=0;c!==A;)u+s[c]>r&&(i.push(t.slice(d,c)),u=0,d=c),u+=s[c],c++;return d!==c&&i.push(t.slice(d,c)),i},DB=function(t,s,n){n||(n={});var r,i,c,A,u,d,h,o=[],m=[o],y=n.textIndent||0,p=0,j=0,b=t.split(" "),w=ry.apply(this,[" ",n])[0];if(d=n.lineIndent===-1?b[0].length+2:n.lineIndent||0){var B=Array(d).join(" "),L=[];b.map(function(k){(k=k.split(/\s*\n/)).length>1?L=L.concat(k.map(function(z,J){return(J&&z.length?`
`:"")+z})):L.push(k[0])}),b=L,d=UB.apply(this,[B,n])}for(c=0,A=b.length;c<A;c++){var Q=0;if(r=b[c],d&&r[0]==`
`&&(r=r.substr(1),Q=1),y+p+(j=(i=ry.apply(this,[r,n])).reduce(function(k,z){return k+z},0))>s||Q){if(j>s){for(u=LB.apply(this,[r,i,s-(y+p),s]),o.push(u.shift()),o=[u.pop()];u.length;)m.push([u.shift()]);j=i.slice(r.length-(o[0]?o[0].length:0)).reduce(function(k,z){return k+z},0)}else o=[r];m.push(o),y=j+d,p=w}else o.push(r),y+=p+j,p=w}return h=d?function(k,z){return(z?B:"")+k.join(" ")}:function(k){return k.join(" ")},m.map(h)},Af.splitTextToSize=function(t,s,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),c=(function(o){if(o.widths&&o.kerning)return{widths:o.widths,kerning:o.kerning};var m=this.internal.getFont(o.fontName,o.fontStyle),y="Unicode";return m.metadata[y]?{widths:m.metadata[y].widths||{0:1},kerning:m.metadata[y].kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var A=1*this.internal.scaleFactor*s/i;c.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,c.lineIndent=n.lineIndent;var u,d,h=[];for(u=0,d=r.length;u<d;u++)h=h.concat(DB.apply(this,[r[u],A,c]));return h},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var s="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},c=0;c<16;c++)r[n[c]]=s[c],i[s[c]]=n[c];var A=function(y){return"0x"+parseInt(y,10).toString(16)},u=t.__fontmetrics__.compress=function(y){var p,j,b,w,B=["{"];for(var L in y){if(p=y[L],isNaN(parseInt(L,10))?j="'"+L+"'":(L=parseInt(L,10),j=(j=A(L).slice(2)).slice(0,-1)+i[j.slice(-1)]),typeof p=="number")p<0?(b=A(p).slice(3),w="-"):(b=A(p).slice(2),w=""),b=w+b.slice(0,-1)+i[b.slice(-1)];else{if(Ca(p)!=="object")throw new Error("Don't know what to do with value type "+Ca(p)+".");b=u(p)}B.push(j+b)}return B.push("}"),B.join("")},d=t.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,j,b,w,B={},L=1,Q=B,k=[],z="",J="",$=y.length-1,q=1;q<$;q+=1)(w=y[q])=="'"?p?(b=p.join(""),p=void 0):p=[]:p?p.push(w):w=="{"?(k.push([Q,b]),Q={},b=void 0):w=="}"?((j=k.pop())[0][j[1]]=Q,b=void 0,Q=j[0]):w=="-"?L=-1:b===void 0?r.hasOwnProperty(w)?(z+=r[w],b=parseInt(z,16)*L,L=1,z=""):z+=w:r.hasOwnProperty(w)?(J+=r[w],Q[b]=parseInt(J,16)*L,L=1,b=void 0,J=""):J+=w;return B},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},o={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},m={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(y){var p=y.font,j=m.Unicode[p.postScriptName];j&&(p.metadata.Unicode={},p.metadata.Unicode.widths=j.widths,p.metadata.Unicode.kerning=j.kerning);var b=o.Unicode[p.postScriptName];b&&(p.metadata.Unicode.encoding=b,p.encoding=b.codePages[0])}])})(bn.API),(function(t){var s=function(n){for(var r=n.length,i=new Uint8Array(r),c=0;c<r;c++)i[c]=n.charCodeAt(c);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,c=n.instance;if(!i.isStandardFont){if(c===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=c.existsFileInVFS(i.postScriptName)===!1?c.loadFile(i.postScriptName):c.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(A,u){u=/^\x00\x01\x00\x00/.test(u)?s(u):s(Ny(u)),A.metadata=t.API.TTFFont.open(u),A.metadata.Unicode=A.metadata.Unicode||{encoding:{},kerning:{},widths:[]},A.metadata.glyIdsUsed=[0]})(i,r)}}])})(bn),bn.API.addSvgAsImage=function(t,s,n,r,i,c,A,u){if(isNaN(s)||isNaN(n))throw Pa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Pa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=r,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var o={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return(Xn.canvg?Promise.resolve(Xn.canvg):Yc(()=>import("./index.es-Cdf-MivV.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(h,t,o)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(o)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),s,n,r,i,A,u)})},bn.API.putTotalPages=function(t){var s,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(s=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(s=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(s,n);return this},bn.API.viewerPreferences=function(t,s){var n;t=t||{},s=s||!1;var r,i,c,A={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(A),d=[],h=0,o=0,m=0;function y(j,b){var w,B=!1;for(w=0;w<j.length;w+=1)j[w]===b&&(B=!0);return B}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(A)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||s===!0){var p=u.length;for(m=0;m<p;m+=1)n[u[m]].value=n[u[m]].defaultValue,n[u[m]].explicitSet=!1}if(Ca(t)==="object"){for(i in t)if(c=t[i],y(u,i)&&c!==void 0){if(n[i].type==="boolean"&&typeof c=="boolean")n[i].value=c;else if(n[i].type==="name"&&y(n[i].valueSet,c))n[i].value=c;else if(n[i].type==="integer"&&Number.isInteger(c))n[i].value=c;else if(n[i].type==="array"){for(h=0;h<c.length;h+=1)if(r=!0,c[h].length===1&&typeof c[h][0]=="number")d.push(String(c[h]-1));else if(c[h].length>1){for(o=0;o<c[h].length;o+=1)typeof c[h][o]!="number"&&(r=!1);r===!0&&d.push([c[h][0]-1,c[h][1]-1].join(" "))}n[i].value="["+d.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,b=[];for(j in n)n[j].explicitSet===!0&&(n[j].type==="name"?b.push("/"+j+" /"+n[j].value):b.push("/"+j+" "+n[j].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var s=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),c=unescape(encodeURIComponent(r)),A=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),h=c.length+A.length+u.length+i.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(i+c+A+u+d),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",s)),this}})(bn.API),(function(t){var s=t.API,n=s.pdfEscape16=function(c,A){for(var u,d=A.metadata.Unicode.widths,h=["","0","00","000","0000"],o=[""],m=0,y=c.length;m<y;++m){if(u=A.metadata.characterToGlyph(c.charCodeAt(m)),A.metadata.glyIdsUsed.push(u),A.metadata.toUnicode[u]=c.charCodeAt(m),d.indexOf(u)==-1&&(d.push(u),d.push([parseInt(A.metadata.widthOfGlyph(u),10)])),u=="0")return o.join("");u=u.toString(16),o.push(h[4-u.length],u)}return o.join("")},r=function(c){var A,u,d,h,o,m,y;for(o=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],m=0,y=(u=Object.keys(c).sort(function(p,j){return p-j})).length;m<y;m++)A=u[m],d.length>=100&&(o+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),c[A]!==void 0&&c[A]!==null&&typeof c[A].toString=="function"&&(h=("0000"+c[A].toString(16)).slice(-4),A=("0000"+(+A).toString(16)).slice(-4),d.push("<"+A+"><"+h+">"));return d.length&&(o+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),o+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};s.events.push(["putFont",function(c){(function(A){var u=A.font,d=A.out,h=A.newObject,o=A.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="Identity-H"){for(var m=u.metadata.Unicode.widths,y=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),p="",j=0;j<y.length;j++)p+=String.fromCharCode(y[j]);var b=h();o({data:p,addLength1:!0,objectId:b}),d("endobj");var w=h();o({data:r(u.metadata.toUnicode),addLength1:!0,objectId:w}),d("endobj");var B=h();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+ff(u.fontName)),d("/FontFile2 "+b+" 0 R"),d("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),d("/Flags "+u.metadata.flags),d("/StemV "+u.metadata.stemV),d("/ItalicAngle "+u.metadata.italicAngle),d("/Ascent "+u.metadata.ascender),d("/Descent "+u.metadata.decender),d("/CapHeight "+u.metadata.capHeight),d(">>"),d("endobj");var L=h();d("<<"),d("/Type /Font"),d("/BaseFont /"+ff(u.fontName)),d("/FontDescriptor "+B+" 0 R"),d("/W "+t.API.PDFObject.convert(m)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+u.encoding+")"),d(">>"),d(">>"),d("endobj"),u.objectNumber=h(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+w+" 0 R"),d("/BaseFont /"+ff(u.fontName)),d("/Encoding /"+u.encoding),d("/DescendantFonts ["+L+" 0 R]"),d(">>"),d("endobj"),u.isAlreadyPutted=!0}})(c)}]),s.events.push(["putFont",function(c){(function(A){var u=A.font,d=A.out,h=A.newObject,o=A.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var m=u.metadata.rawData,y="",p=0;p<m.length;p++)y+=String.fromCharCode(m[p]);var j=h();o({data:y,addLength1:!0,objectId:j}),d("endobj");var b=h();o({data:r(u.metadata.toUnicode),addLength1:!0,objectId:b}),d("endobj");var w=h();d("<<"),d("/Descent "+u.metadata.decender),d("/CapHeight "+u.metadata.capHeight),d("/StemV "+u.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+j+" 0 R"),d("/Flags 96"),d("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),d("/FontName /"+ff(u.fontName)),d("/ItalicAngle "+u.metadata.italicAngle),d("/Ascent "+u.metadata.ascender),d(">>"),d("endobj"),u.objectNumber=h();for(var B=0;B<u.metadata.hmtx.widths.length;B++)u.metadata.hmtx.widths[B]=parseInt(u.metadata.hmtx.widths[B]*(1e3/u.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+ff(u.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),d("endobj"),u.isAlreadyPutted=!0}})(c)}]);var i=function(c){var A,u=c.text||"",d=c.x,h=c.y,o=c.options||{},m=c.mutex||{},y=m.pdfEscape,p=m.activeFontKey,j=m.fonts,b=p,w="",B=0,L="",Q=j[b].encoding;if(j[b].encoding!=="Identity-H")return{text:u,x:d,y:h,options:o,mutex:m};for(L=u,b=p,Array.isArray(u)&&(L=u[0]),B=0;B<L.length;B+=1)j[b].metadata.hasOwnProperty("cmap")&&(A=j[b].metadata.cmap.unicode.codeMap[L[B].charCodeAt(0)]),A||L[B].charCodeAt(0)<256&&j[b].metadata.hasOwnProperty("Unicode")?w+=L[B]:w+="";var k="";return parseInt(b.slice(1))<14||Q==="WinAnsiEncoding"?k=y(w,b).split("").map(function(z){return z.charCodeAt(0).toString(16)}).join(""):Q==="Identity-H"&&(k=n(w,j[b])),m.isHex=!0,{text:k,x:d,y:h,options:o,mutex:m}};s.events.push(["postProcessText",function(c){var A=c.text||"",u=[],d={text:A,x:c.x,y:c.y,options:c.options,mutex:c.mutex};if(Array.isArray(A)){var h=0;for(h=0;h<A.length;h+=1)Array.isArray(A[h])&&A[h].length===3?u.push([i(Object.assign({},d,{text:A[h][0]})).text,A[h][1],A[h][2]]):u.push(i(Object.assign({},d,{text:A[h]})).text);c.text=u}else c.text=i(Object.assign({},d,{text:A})).text}])})(bn),(function(t){var s=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return s.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return s.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return s.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(bn.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,c,A,u,d,h,o,m=s,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],B=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),L=!1,Q=0;this.__bidiEngine__={};var k=function(ee){var le=ee.charCodeAt(),ue=le>>8,te=b[ue];return te!==void 0?m[256*te+(255&le)]:ue===252||ue===253?"AL":B.test(ue)?"L":ue===8?"R":"N"},z=function(ee){for(var le,ue=0;ue<ee.length;ue++){if((le=k(ee.charAt(ue)))==="L")return!1;if(le==="R")return!0}return!1},J=function(ee,le,ue,te){var re,ne,oe,se,xe=le[te];switch(xe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":L=!1;break;case"N":case"AN":break;case"EN":L&&(xe="AN");break;case"AL":L=!0,xe="R";break;case"WS":case"BN":xe="N";break;case"CS":te<1||te+1>=le.length||(re=ue[te-1])!=="EN"&&re!=="AN"||(ne=le[te+1])!=="EN"&&ne!=="AN"?xe="N":L&&(ne="AN"),xe=ne===re?ne:"N";break;case"ES":xe=(re=te>0?ue[te-1]:"B")==="EN"&&te+1<le.length&&le[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&ue[te-1]==="EN"){xe="EN";break}if(L){xe="N";break}for(oe=te+1,se=le.length;oe<se&&le[oe]==="ET";)oe++;xe=oe<se&&le[oe]==="EN"?"EN":"N";break;case"NSM":if(A&&!u){for(se=le.length,oe=te+1;oe<se&&le[oe]==="NSM";)oe++;if(oe<se){var Me=ee[te],me=Me>=1425&&Me<=2303||Me===64286;if(re=le[oe],me&&(re==="R"||re==="AL")){xe="R";break}}}xe=te<1||(re=le[te-1])==="B"?"N":ue[te-1];break;case"B":L=!1,i=!0,xe=Q;break;case"S":c=!0,xe="N"}return xe},$=function(ee,le,ue){var te=ee.split("");return ue&&q(te,ue,{hiLevel:Q}),te.reverse(),le&&le.reverse(),te.join("")},q=function(ee,le,ue){var te,re,ne,oe,se,xe=-1,Me=ee.length,me=0,Z=[],ge=Q?p:y,we=[];for(L=!1,i=!1,c=!1,re=0;re<Me;re++)we[re]=k(ee[re]);for(ne=0;ne<Me;ne++){if(se=me,Z[ne]=J(ee,we,Z,ne),te=240&(me=ge[se][j[Z[ne]]]),me&=15,le[ne]=oe=ge[me][5],te>0)if(te===16){for(re=xe;re<ne;re++)le[re]=1;xe=-1}else xe=-1;if(ge[me][6])xe===-1&&(xe=ne);else if(xe>-1){for(re=xe;re<ne;re++)le[re]=oe;xe=-1}we[ne]==="B"&&(le[ne]=0),ue.hiLevel|=oe}c&&(function(pe,be,je){for(var Ne=0;Ne<je;Ne++)if(pe[Ne]==="S"){be[Ne]=Q;for(var Je=Ne-1;Je>=0&&pe[Je]==="WS";Je--)be[Je]=Q}})(we,le,Me)},X=function(ee,le,ue,te,re){if(!(re.hiLevel<ee)){if(ee===1&&Q===1&&!i)return le.reverse(),void(ue&&ue.reverse());for(var ne,oe,se,xe,Me=le.length,me=0;me<Me;){if(te[me]>=ee){for(se=me+1;se<Me&&te[se]>=ee;)se++;for(xe=me,oe=se-1;xe<oe;xe++,oe--)ne=le[xe],le[xe]=le[oe],le[oe]=ne,ue&&(ne=ue[xe],ue[xe]=ue[oe],ue[oe]=ne);me=se}me++}}},fe=function(ee,le,ue){var te=ee.split(""),re={hiLevel:Q};return ue||(ue=[]),q(te,ue,re),(function(ne,oe,se){if(se.hiLevel!==0&&o)for(var xe,Me=0;Me<ne.length;Me++)oe[Me]===1&&(xe=w.indexOf(ne[Me]))>=0&&(ne[Me]=w[xe+1])})(te,ue,re),X(2,te,le,ue,re),X(1,te,le,ue,re),te.join("")};return this.__bidiEngine__.doBidiReorder=function(ee,le,ue){if((function(re,ne){if(ne)for(var oe=0;oe<re.length;oe++)ne[oe]=oe;u===void 0&&(u=z(re)),h===void 0&&(h=z(re))})(ee,le),A||!d||h)if(A&&d&&u^h)Q=u?1:0,ee=$(ee,le,ue);else if(!A&&d&&h)Q=u?1:0,ee=fe(ee,le,ue),ee=$(ee,le);else if(!A||u||d||h){if(A&&!d&&u^h)ee=$(ee,le),u?(Q=0,ee=fe(ee,le,ue)):(Q=1,ee=fe(ee,le,ue),ee=$(ee,le));else if(A&&u&&!d&&h)Q=1,ee=fe(ee,le,ue),ee=$(ee,le);else if(!A&&!d&&u^h){var te=o;u?(Q=1,ee=fe(ee,le,ue),Q=0,o=!1,ee=fe(ee,le,ue),o=te):(Q=0,ee=fe(ee,le,ue),ee=$(ee,le),Q=1,o=!1,ee=fe(ee,le,ue),o=te,ee=$(ee,le))}}else Q=0,ee=fe(ee,le,ue);else Q=u?1:0,ee=fe(ee,le,ue);return ee},this.__bidiEngine__.setOptions=function(ee){ee&&(A=ee.isInputVisual,d=ee.isOutputVisual,u=ee.isInputRtl,h=ee.isOutputRtl,o=ee.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var s=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var c=r.options||{};r.mutex,c.lang;var A=[];if(c.isInputVisual=typeof c.isInputVisual!="boolean"||c.isInputVisual,n.setOptions(c),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(A=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?A.push([n.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):A.push([n.doBidiReorder(i[u])]);r.text=A}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])})(bn),bn.API.TTFFont=(function(){function t(s){var n;if(this.rawData=s,n=this.contents=new gu(s),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new BG(this),this.registerTTF()}return t.open=function(s){return new t(s)},t.prototype.parse=function(){return this.directory=new uG(this.contents),this.head=new fG(this),this.name=new xG(this),this.cmap=new lR(this),this.toUnicode={},this.hhea=new pG(this),this.maxp=new vG(this),this.hmtx=new bG(this),this.post=new gG(this),this.os2=new mG(this),this.loca=new NG(this),this.glyf=new jG(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var s,n,r,i,c;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var A,u,d,h;for(h=[],A=0,u=(d=this.bbox).length;A<u;A++)s=d[A],h.push(Math.round(s*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(c=this.familyClass)===1||c===2||c===3||c===4||c===5||c===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(s){var n;return((n=this.cmap.unicode)!=null?n.codeMap[s]:void 0)||0},t.prototype.widthOfGlyph=function(s){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(s).advance*n},t.prototype.widthOfString=function(s,n,r){var i,c,A,u;for(A=0,c=0,u=(s=""+s).length;0<=u?c<u:c>u;c=0<=u?++c:--c)i=s.charCodeAt(c),A+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return A*(n/1e3)},t.prototype.lineHeight=function(s,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*s},t})();var nd,gu=(function(){function t(s){this.data=s??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(s){return this.data[this.pos++]=s},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(s){return this.writeByte(s>>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt32=function(){var s;return(s=this.readUInt32())>=2147483648?s-4294967296:s},t.prototype.writeInt32=function(s){return s<0&&(s+=4294967296),this.writeUInt32(s)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(s){return this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt16=function(){var s;return(s=this.readUInt16())>=32768?s-65536:s},t.prototype.writeInt16=function(s){return s<0&&(s+=65536),this.writeUInt16(s)},t.prototype.readString=function(s){var n,r;for(r=[],n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(s){var n,r,i;for(i=[],n=0,r=s.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(s.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(s){return this.writeInt16(s)},t.prototype.readLongLong=function(){var s,n,r,i,c,A,u,d;return s=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),c=this.readByte(),A=this.readByte(),u=this.readByte(),d=this.readByte(),128&s?-1*(72057594037927940*(255^s)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^c)+65536*(255^A)+256*(255^u)+(255^d)+1):72057594037927940*s+281474976710656*n+1099511627776*r+4294967296*i+16777216*c+65536*A+256*u+d},t.prototype.writeLongLong=function(s){var n,r;return n=Math.floor(s/4294967296),r=4294967295&s,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(s){return this.writeInt32(s)},t.prototype.read=function(s){var n,r;for(n=[],r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(s){var n,r,i,c;for(c=[],r=0,i=s.length;r<i;r++)n=s[r],c.push(this.writeByte(n));return c},t})(),uG=(function(){var t;function s(n){var r,i,c;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,c=this.tableCount;0<=c?i<c:i>c;i=0<=c?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return s.prototype.encode=function(n){var r,i,c,A,u,d,h,o,m,y,p,j,b;for(b in p=Object.keys(n).length,d=Math.log(2),m=16*Math.floor(Math.log(p)/d),A=Math.floor(m/d),o=16*p-m,(i=new gu).writeInt(this.scalarType),i.writeShort(p),i.writeShort(m),i.writeShort(A),i.writeShort(o),c=16*p,h=i.pos+c,u=null,j=[],n)for(y=n[b],i.writeString(b),i.writeInt(t(y)),i.writeInt(h),i.writeInt(y.length),j=j.concat(y),b==="head"&&(u=h),h+=y.length;h%4;)j.push(0),h++;return i.write(j),r=2981146554-t(i.data),i.pos=u+8,i.writeUInt32(r),i.data},t=function(n){var r,i,c,A;for(n=cR.call(n);n.length%4;)n.push(0);for(c=new gu(n),i=0,r=0,A=n.length;r<A;r=r+=4)i+=c.readUInt32();return 4294967295&i},s})(),hG={}.hasOwnProperty,Pd=function(t,s){for(var n in s)hG.call(s,n)&&(t[n]=s[n]);function r(){this.constructor=t}return r.prototype=s.prototype,t.prototype=new r,t.__super__=s.prototype,t};nd=(function(){function t(s){var n;this.file=s,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var fG=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,nd),t.prototype.tag="head",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.revision=s.readInt(),this.checkSumAdjustment=s.readInt(),this.magicNumber=s.readInt(),this.flags=s.readShort(),this.unitsPerEm=s.readShort(),this.created=s.readLongLong(),this.modified=s.readLongLong(),this.xMin=s.readShort(),this.yMin=s.readShort(),this.xMax=s.readShort(),this.yMax=s.readShort(),this.macStyle=s.readShort(),this.lowestRecPPEM=s.readShort(),this.fontDirectionHint=s.readShort(),this.indexToLocFormat=s.readShort(),this.glyphDataFormat=s.readShort()},t.prototype.encode=function(s){var n;return(n=new gu).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(s),n.writeShort(this.glyphDataFormat),n.data},t})(),VB=(function(){function t(s,n){var r,i,c,A,u,d,h,o,m,y,p,j,b,w,B,L,Q;switch(this.platformID=s.readUInt16(),this.encodingID=s.readShort(),this.offset=n+s.readInt(),m=s.pos,s.pos=this.offset,this.format=s.readUInt16(),this.length=s.readUInt16(),this.language=s.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=s.readByte();break;case 4:for(p=s.readUInt16(),y=p/2,s.pos+=6,c=(function(){var k,z;for(z=[],d=k=0;0<=y?k<y:k>y;d=0<=y?++k:--k)z.push(s.readUInt16());return z})(),s.pos+=2,b=(function(){var k,z;for(z=[],d=k=0;0<=y?k<y:k>y;d=0<=y?++k:--k)z.push(s.readUInt16());return z})(),h=(function(){var k,z;for(z=[],d=k=0;0<=y?k<y:k>y;d=0<=y?++k:--k)z.push(s.readUInt16());return z})(),o=(function(){var k,z;for(z=[],d=k=0;0<=y?k<y:k>y;d=0<=y?++k:--k)z.push(s.readUInt16());return z})(),i=(this.length-s.pos+this.offset)/2,u=(function(){var k,z;for(z=[],d=k=0;0<=i?k<i:k>i;d=0<=i?++k:--k)z.push(s.readUInt16());return z})(),d=B=0,Q=c.length;B<Q;d=++B)for(w=c[d],r=L=j=b[d];j<=w?L<=w:L>=w;r=j<=w?++L:--L)o[d]===0?A=r+h[d]:(A=u[o[d]/2+(r-j)-(y-d)]||0)!==0&&(A+=h[d]),this.codeMap[r]=65535&A}s.pos=m}return t.encode=function(s,n){var r,i,c,A,u,d,h,o,m,y,p,j,b,w,B,L,Q,k,z,J,$,q,X,fe,ee,le,ue,te,re,ne,oe,se,xe,Me,me,Z,ge,we,pe,be,je,Ne,Je,Qe,pt,Te;switch(te=new gu,A=Object.keys(s).sort(function(Ce,_e){return Ce-_e}),n){case"macroman":for(b=0,w=(function(){var Ce=[];for(j=0;j<256;++j)Ce.push(0);return Ce})(),L={0:0},c={},re=0,xe=A.length;re<xe;re++)L[Je=s[i=A[re]]]==null&&(L[Je]=++b),c[i]={old:s[i],new:L[s[i]]},w[i]=L[s[i]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(w),{charMap:c,subtable:te.data,maxGlyphID:b+1};case"unicode":for(le=[],m=[],Q=0,L={},r={},B=h=null,ne=0,Me=A.length;ne<Me;ne++)L[z=s[i=A[ne]]]==null&&(L[z]=++Q),r[i]={old:z,new:L[z]},u=L[z]-i,B!=null&&u===h||(B&&m.push(B),le.push(i),h=u),B=i;for(B&&m.push(B),m.push(65535),le.push(65535),fe=2*(X=le.length),q=2*Math.pow(Math.log(X)/Math.LN2,2),y=Math.log(q/2)/Math.LN2,$=2*X-q,d=[],J=[],p=[],j=oe=0,me=le.length;oe<me;j=++oe){if(ee=le[j],o=m[j],ee===65535){d.push(0),J.push(0);break}if(ee-(ue=r[ee].new)>=32768)for(d.push(0),J.push(2*(p.length+X-j)),i=se=ee;ee<=o?se<=o:se>=o;i=ee<=o?++se:--se)p.push(r[i].new);else d.push(ue-ee),J.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*X+2*p.length),te.writeUInt16(0),te.writeUInt16(fe),te.writeUInt16(q),te.writeUInt16(y),te.writeUInt16($),je=0,Z=m.length;je<Z;je++)i=m[je],te.writeUInt16(i);for(te.writeUInt16(0),Ne=0,ge=le.length;Ne<ge;Ne++)i=le[Ne],te.writeUInt16(i);for(Qe=0,we=d.length;Qe<we;Qe++)u=d[Qe],te.writeUInt16(u);for(pt=0,pe=J.length;pt<pe;pt++)k=J[pt],te.writeUInt16(k);for(Te=0,be=p.length;Te<be;Te++)b=p[Te],te.writeUInt16(b);return{charMap:r,subtable:te.data,maxGlyphID:Q+1}}},t})(),lR=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,nd),t.prototype.tag="cmap",t.prototype.parse=function(s){var n,r,i;for(s.pos=this.offset,this.version=s.readUInt16(),i=s.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new VB(s,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(s,n){var r,i;return n==null&&(n="macroman"),r=VB.encode(s,n),(i=new gu).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t})(),pG=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,nd),t.prototype.tag="hhea",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.ascender=s.readShort(),this.decender=s.readShort(),this.lineGap=s.readShort(),this.advanceWidthMax=s.readShort(),this.minLeftSideBearing=s.readShort(),this.minRightSideBearing=s.readShort(),this.xMaxExtent=s.readShort(),this.caretSlopeRise=s.readShort(),this.caretSlopeRun=s.readShort(),this.caretOffset=s.readShort(),s.pos+=8,this.metricDataFormat=s.readShort(),this.numberOfMetrics=s.readUInt16()},t})(),mG=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,nd),t.prototype.tag="OS/2",t.prototype.parse=function(s){if(s.pos=this.offset,this.version=s.readUInt16(),this.averageCharWidth=s.readShort(),this.weightClass=s.readUInt16(),this.widthClass=s.readUInt16(),this.type=s.readShort(),this.ySubscriptXSize=s.readShort(),this.ySubscriptYSize=s.readShort(),this.ySubscriptXOffset=s.readShort(),this.ySubscriptYOffset=s.readShort(),this.ySuperscriptXSize=s.readShort(),this.ySuperscriptYSize=s.readShort(),this.ySuperscriptXOffset=s.readShort(),this.ySuperscriptYOffset=s.readShort(),this.yStrikeoutSize=s.readShort(),this.yStrikeoutPosition=s.readShort(),this.familyClass=s.readShort(),this.panose=(function(){var n,r;for(r=[],n=0;n<10;++n)r.push(s.readByte());return r})(),this.charRange=(function(){var n,r;for(r=[],n=0;n<4;++n)r.push(s.readInt());return r})(),this.vendorID=s.readString(4),this.selection=s.readShort(),this.firstCharIndex=s.readShort(),this.lastCharIndex=s.readShort(),this.version>0&&(this.ascent=s.readShort(),this.descent=s.readShort(),this.lineGap=s.readShort(),this.winAscent=s.readShort(),this.winDescent=s.readShort(),this.codePageRange=(function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(s.readInt());return r})(),this.version>1))return this.xHeight=s.readShort(),this.capHeight=s.readShort(),this.defaultChar=s.readShort(),this.breakChar=s.readShort(),this.maxContext=s.readShort()},t})(),gG=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,nd),t.prototype.tag="post",t.prototype.parse=function(s){var n,r,i;switch(s.pos=this.offset,this.format=s.readInt(),this.italicAngle=s.readInt(),this.underlinePosition=s.readShort(),this.underlineThickness=s.readShort(),this.isFixedPitch=s.readInt(),this.minMemType42=s.readInt(),this.maxMemType42=s.readInt(),this.minMemType1=s.readInt(),this.maxMemType1=s.readInt(),this.format){case 65536:case 196608:break;case 131072:var c;for(r=s.readUInt16(),this.glyphNameIndex=[],c=0;0<=r?c<r:c>r;c=0<=r?++c:--c)this.glyphNameIndex.push(s.readUInt16());for(this.names=[],i=[];s.pos<this.offset+this.length;)n=s.readByte(),i.push(this.names.push(s.readString(n)));return i;case 151552:return r=s.readUInt16(),this.offsets=s.read(r);case 262144:return this.map=(function(){var A,u,d;for(d=[],c=A=0,u=this.file.maxp.numGlyphs;0<=u?A<u:A>u;c=0<=u?++A:--A)d.push(s.readUInt32());return d}).call(this)}},t})(),yG=function(t,s){this.raw=t,this.length=t.length,this.platformID=s.platformID,this.encodingID=s.encodingID,this.languageID=s.languageID},xG=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,nd),t.prototype.tag="name",t.prototype.parse=function(s){var n,r,i,c,A,u,d,h,o,m,y;for(s.pos=this.offset,s.readShort(),n=s.readShort(),u=s.readShort(),r=[],c=0;0<=n?c<n:c>n;c=0<=n?++c:--c)r.push({platformID:s.readShort(),encodingID:s.readShort(),languageID:s.readShort(),nameID:s.readShort(),length:s.readShort(),offset:this.offset+u+s.readShort()});for(d={},c=o=0,m=r.length;o<m;c=++o)i=r[c],s.pos=i.offset,h=s.readString(i.length),A=new yG(h,i),d[y=i.nameID]==null&&(d[y]=[]),d[i.nameID].push(A);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t})(),vG=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,nd),t.prototype.tag="maxp",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.numGlyphs=s.readUInt16(),this.maxPoints=s.readUInt16(),this.maxContours=s.readUInt16(),this.maxCompositePoints=s.readUInt16(),this.maxComponentContours=s.readUInt16(),this.maxZones=s.readUInt16(),this.maxTwilightPoints=s.readUInt16(),this.maxStorage=s.readUInt16(),this.maxFunctionDefs=s.readUInt16(),this.maxInstructionDefs=s.readUInt16(),this.maxStackElements=s.readUInt16(),this.maxSizeOfInstructions=s.readUInt16(),this.maxComponentElements=s.readUInt16(),this.maxComponentDepth=s.readUInt16()},t})(),bG=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,nd),t.prototype.tag="hmtx",t.prototype.parse=function(s){var n,r,i,c,A,u,d;for(s.pos=this.offset,this.metrics=[],n=0,u=this.file.hhea.numberOfMetrics;0<=u?n<u:n>u;n=0<=u?++n:--n)this.metrics.push({advance:s.readUInt16(),lsb:s.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var h,o;for(o=[],n=h=0;0<=i?h<i:h>i;n=0<=i?++h:--h)o.push(s.readInt16());return o})(),this.widths=(function(){var h,o,m,y;for(y=[],h=0,o=(m=this.metrics).length;h<o;h++)c=m[h],y.push(c.advance);return y}).call(this),r=this.widths[this.widths.length-1],d=[],n=A=0;0<=i?A<i:A>i;n=0<=i?++A:--A)d.push(this.widths.push(r));return d},t.prototype.forGlyph=function(s){return s in this.metrics?this.metrics[s]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[s-this.metrics.length]}},t})(),cR=[].slice,jG=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,nd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(s){var n,r,i,c,A,u,d,h,o,m;return s in this.cache?this.cache[s]:(c=this.file.loca,n=this.file.contents,r=c.indexOf(s),(i=c.lengthOf(s))===0?this.cache[s]=null:(n.pos=this.offset+r,A=(u=new gu(n.read(i))).readShort(),h=u.readShort(),m=u.readShort(),d=u.readShort(),o=u.readShort(),this.cache[s]=A===-1?new SG(u,h,m,d,o):new wG(u,A,h,m,d,o),this.cache[s]))},t.prototype.encode=function(s,n,r){var i,c,A,u,d;for(A=[],c=[],u=0,d=n.length;u<d;u++)i=s[n[u]],c.push(A.length),i&&(A=A.concat(i.encode(r)));return c.push(A.length),{table:A,offsets:c}},t})(),wG=(function(){function t(s,n,r,i,c,A){this.raw=s,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=c,this.yMax=A,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),SG=(function(){function t(s,n,r,i,c){var A,u;for(this.raw=s,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=c,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],A=this.raw;u=A.readShort(),this.glyphOffsets.push(A.pos),this.glyphIDs.push(A.readUInt16()),32&u;)A.pos+=1&u?4:2,128&u?A.pos+=8:64&u?A.pos+=4:8&u&&(A.pos+=2)}return t.prototype.encode=function(){var s,n,r;for(n=new gu(cR.call(this.raw.data)),s=0,r=this.glyphIDs.length;s<r;++s)n.pos=this.glyphOffsets[s];return n.data},t})(),NG=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,nd),t.prototype.tag="loca",t.prototype.parse=function(s){var n,r;return s.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,c;for(c=[],r=0,i=this.length;r<i;r+=2)c.push(2*s.readUInt16());return c}).call(this):(function(){var i,c;for(c=[],r=0,i=this.length;r<i;r+=4)c.push(s.readUInt32());return c}).call(this)},t.prototype.indexOf=function(s){return this.offsets[s]},t.prototype.lengthOf=function(s){return this.offsets[s+1]-this.offsets[s]},t.prototype.encode=function(s,n){for(var r=new Uint32Array(this.offsets.length),i=0,c=0,A=0;A<r.length;++A)if(r[A]=i,c<n.length&&n[c]==A){++c,r[A]=i;var u=this.offsets[A],d=this.offsets[A+1]-u;d>0&&(i+=d)}for(var h=new Array(4*r.length),o=0;o<r.length;++o)h[4*o+3]=255&r[o],h[4*o+2]=(65280&r[o])>>8,h[4*o+1]=(16711680&r[o])>>16,h[4*o]=(4278190080&r[o])>>24;return h},t})(),BG=(function(){function t(s){this.font=s,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var s,n,r,i,c;for(n in i=this.font.cmap.tables[0].codeMap,s={},c=this.subset)r=c[n],s[n]=i[r];return s},t.prototype.glyphsFor=function(s){var n,r,i,c,A,u,d;for(i={},A=0,u=s.length;A<u;A++)i[c=s[A]]=this.font.glyf.glyphFor(c);for(c in n=[],i)(r=i[c])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(c in d=this.glyphsFor(n))r=d[c],i[c]=r;return i},t.prototype.encode=function(s,n){var r,i,c,A,u,d,h,o,m,y,p,j,b,w,B;for(i in r=lR.encode(this.generateCmap(),"unicode"),A=this.glyphsFor(s),p={0:0},B=r.charMap)p[(d=B[i]).old]=d.new;for(j in y=r.maxGlyphID,A)j in p||(p[j]=y++);return o=(function(L){var Q,k;for(Q in k={},L)k[L[Q]]=Q;return k})(p),m=Object.keys(o).sort(function(L,Q){return L-Q}),b=(function(){var L,Q,k;for(k=[],L=0,Q=m.length;L<Q;L++)u=m[L],k.push(o[u]);return k})(),c=this.font.glyf.encode(A,b,p),h=this.font.loca.encode(c.offsets,b),w={cmap:this.font.cmap.raw(),glyf:c.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},t})();bn.API.PDFObject=(function(){var t;function s(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},s.convert=function(n){var r,i,c,A;if(Array.isArray(n))return"["+(function(){var u,d,h;for(h=[],u=0,d=n.length;u<d;u++)r=n[u],h.push(s.convert(r));return h})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in c=["<<"],n)A=n[i],c.push("/"+i+" "+s.convert(A));return c.push(">>"),c.join(`
`)}return""+n},s})();const CG=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:nG,AcroFormAppearance:cn,AcroFormButton:so,AcroFormCheckBox:rm,AcroFormChoiceField:Ah,AcroFormComboBox:hh,AcroFormEditBox:sm,AcroFormListBox:uh,AcroFormPasswordField:am,AcroFormPushButton:nm,AcroFormRadioButton:fh,AcroFormTextField:uu,GState:xm,ShadingPattern:au,TilingPattern:oh,default:bn,jsPDF:bn},Symbol.toStringTag,{value:"Module"})),EG=b3(CG);var By={exports:{}};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */var TG=By.exports,$B;function FG(){return $B||($B=1,(function(t,s){(function(n,r){t.exports=r()})(TG,(function(){/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var n=function(T,C){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,R){O.__proto__=R}||function(O,R){for(var Y in R)Object.prototype.hasOwnProperty.call(R,Y)&&(O[Y]=R[Y])},n(T,C)};function r(T,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");n(T,C);function O(){this.constructor=T}T.prototype=C===null?Object.create(C):(O.prototype=C.prototype,new O)}var i=function(){return i=Object.assign||function(C){for(var O,R=1,Y=arguments.length;R<Y;R++){O=arguments[R];for(var he in O)Object.prototype.hasOwnProperty.call(O,he)&&(C[he]=O[he])}return C},i.apply(this,arguments)};function c(T,C,O,R){function Y(he){return he instanceof O?he:new O(function(Ee){Ee(he)})}return new(O||(O=Promise))(function(he,Ee){function Ke(wt){try{ht(R.next(wt))}catch(Ct){Ee(Ct)}}function ze(wt){try{ht(R.throw(wt))}catch(Ct){Ee(Ct)}}function ht(wt){wt.done?he(wt.value):Y(wt.value).then(Ke,ze)}ht((R=R.apply(T,[])).next())})}function A(T,C){var O={label:0,sent:function(){if(he[0]&1)throw he[1];return he[1]},trys:[],ops:[]},R,Y,he,Ee;return Ee={next:Ke(0),throw:Ke(1),return:Ke(2)},typeof Symbol=="function"&&(Ee[Symbol.iterator]=function(){return this}),Ee;function Ke(ht){return function(wt){return ze([ht,wt])}}function ze(ht){if(R)throw new TypeError("Generator is already executing.");for(;O;)try{if(R=1,Y&&(he=ht[0]&2?Y.return:ht[0]?Y.throw||((he=Y.return)&&he.call(Y),0):Y.next)&&!(he=he.call(Y,ht[1])).done)return he;switch(Y=0,he&&(ht=[ht[0]&2,he.value]),ht[0]){case 0:case 1:he=ht;break;case 4:return O.label++,{value:ht[1],done:!1};case 5:O.label++,Y=ht[1],ht=[0];continue;case 7:ht=O.ops.pop(),O.trys.pop();continue;default:if(he=O.trys,!(he=he.length>0&&he[he.length-1])&&(ht[0]===6||ht[0]===2)){O=0;continue}if(ht[0]===3&&(!he||ht[1]>he[0]&&ht[1]<he[3])){O.label=ht[1];break}if(ht[0]===6&&O.label<he[1]){O.label=he[1],he=ht;break}if(he&&O.label<he[2]){O.label=he[2],O.ops.push(ht);break}he[2]&&O.ops.pop(),O.trys.pop();continue}ht=C.call(T,O)}catch(wt){ht=[6,wt],Y=0}finally{R=he=0}if(ht[0]&5)throw ht[1];return{value:ht[0]?ht[1]:void 0,done:!0}}}function u(T,C,O){if(arguments.length===2)for(var R=0,Y=C.length,he;R<Y;R++)(he||!(R in C))&&(he||(he=Array.prototype.slice.call(C,0,R)),he[R]=C[R]);return T.concat(he||C)}for(var d=(function(){function T(C,O,R,Y){this.left=C,this.top=O,this.width=R,this.height=Y}return T.prototype.add=function(C,O,R,Y){return new T(this.left+C,this.top+O,this.width+R,this.height+Y)},T.fromClientRect=function(C,O){return new T(O.left+C.windowBounds.left,O.top+C.windowBounds.top,O.width,O.height)},T.fromDOMRectList=function(C,O){var R=Array.from(O).find(function(Y){return Y.width!==0});return R?new T(R.left+C.windowBounds.left,R.top+C.windowBounds.top,R.width,R.height):T.EMPTY},T.EMPTY=new T(0,0,0,0),T})(),h=function(T,C){return d.fromClientRect(T,C.getBoundingClientRect())},o=function(T){var C=T.body,O=T.documentElement;if(!C||!O)throw new Error("Unable to get document size");var R=Math.max(Math.max(C.scrollWidth,O.scrollWidth),Math.max(C.offsetWidth,O.offsetWidth),Math.max(C.clientWidth,O.clientWidth)),Y=Math.max(Math.max(C.scrollHeight,O.scrollHeight),Math.max(C.offsetHeight,O.offsetHeight),Math.max(C.clientHeight,O.clientHeight));return new d(0,0,R,Y)},m=function(T){for(var C=[],O=0,R=T.length;O<R;){var Y=T.charCodeAt(O++);if(Y>=55296&&Y<=56319&&O<R){var he=T.charCodeAt(O++);(he&64512)===56320?C.push(((Y&1023)<<10)+(he&1023)+65536):(C.push(Y),O--)}else C.push(Y)}return C},y=function(){for(var T=[],C=0;C<arguments.length;C++)T[C]=arguments[C];if(String.fromCodePoint)return String.fromCodePoint.apply(String,T);var O=T.length;if(!O)return"";for(var R=[],Y=-1,he="";++Y<O;){var Ee=T[Y];Ee<=65535?R.push(Ee):(Ee-=65536,R.push((Ee>>10)+55296,Ee%1024+56320)),(Y+1===O||R.length>16384)&&(he+=String.fromCharCode.apply(String,R),R.length=0)}return he},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=typeof Uint8Array>"u"?[]:new Uint8Array(256),b=0;b<p.length;b++)j[p.charCodeAt(b)]=b;for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=typeof Uint8Array>"u"?[]:new Uint8Array(256),L=0;L<w.length;L++)B[w.charCodeAt(L)]=L;for(var Q=function(T){var C=T.length*.75,O=T.length,R,Y=0,he,Ee,Ke,ze;T[T.length-1]==="="&&(C--,T[T.length-2]==="="&&C--);var ht=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(C):new Array(C),wt=Array.isArray(ht)?ht:new Uint8Array(ht);for(R=0;R<O;R+=4)he=B[T.charCodeAt(R)],Ee=B[T.charCodeAt(R+1)],Ke=B[T.charCodeAt(R+2)],ze=B[T.charCodeAt(R+3)],wt[Y++]=he<<2|Ee>>4,wt[Y++]=(Ee&15)<<4|Ke>>2,wt[Y++]=(Ke&3)<<6|ze&63;return ht},k=function(T){for(var C=T.length,O=[],R=0;R<C;R+=2)O.push(T[R+1]<<8|T[R]);return O},z=function(T){for(var C=T.length,O=[],R=0;R<C;R+=4)O.push(T[R+3]<<24|T[R+2]<<16|T[R+1]<<8|T[R]);return O},J=5,$=11,q=2,X=$-J,fe=65536>>J,ee=1<<J,le=ee-1,ue=1024>>J,te=fe+ue,re=te,ne=32,oe=re+ne,se=65536>>$,xe=1<<X,Me=xe-1,me=function(T,C,O){return T.slice?T.slice(C,O):new Uint16Array(Array.prototype.slice.call(T,C,O))},Z=function(T,C,O){return T.slice?T.slice(C,O):new Uint32Array(Array.prototype.slice.call(T,C,O))},ge=function(T,C){var O=Q(T),R=Array.isArray(O)?z(O):new Uint32Array(O),Y=Array.isArray(O)?k(O):new Uint16Array(O),he=24,Ee=me(Y,he/2,R[4]/2),Ke=R[5]===2?me(Y,(he+R[4])/2):Z(R,Math.ceil((he+R[4])/4));return new we(R[0],R[1],R[2],R[3],Ee,Ke)},we=(function(){function T(C,O,R,Y,he,Ee){this.initialValue=C,this.errorValue=O,this.highStart=R,this.highValueIndex=Y,this.index=he,this.data=Ee}return T.prototype.get=function(C){var O;if(C>=0){if(C<55296||C>56319&&C<=65535)return O=this.index[C>>J],O=(O<<q)+(C&le),this.data[O];if(C<=65535)return O=this.index[fe+(C-55296>>J)],O=(O<<q)+(C&le),this.data[O];if(C<this.highStart)return O=oe-se+(C>>$),O=this.index[O],O+=C>>J&Me,O=this.index[O],O=(O<<q)+(C&le),this.data[O];if(C<=1114111)return this.data[this.highValueIndex]}return this.errorValue},T})(),pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",be=typeof Uint8Array>"u"?[]:new Uint8Array(256),je=0;je<pe.length;je++)be[pe.charCodeAt(je)]=je;var Ne="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Je=50,Qe=1,pt=2,Te=3,Ce=4,_e=5,de=7,dt=8,st=9,nt=10,at=11,Dt=12,yt=13,qe=14,Tt=15,ns=16,Ts=17,vs=18,Ns=19,et=20,De=21,rt=22,mt=23,ls=24,Ht=25,Kt=26,lt=27,Gt=28,Yt=29,Cs=30,rs=31,Is=32,on=33,ws=34,St=35,qt=36,Pt=37,gs=38,Rs=39,Nn=40,ys=41,Ln=42,Zs=43,En=[9001,65288],Ls="!",Bs="",Ms="",Os=ge(Ne),ot=[Cs,qt],Rt=[Qe,pt,Te,_e],Mt=[nt,dt],kt=[lt,Kt],fs=Rt.concat(Mt),ms=[gs,Rs,Nn,ws,St],Ds=[Tt,yt],js=function(T,C){C===void 0&&(C="strict");var O=[],R=[],Y=[];return T.forEach(function(he,Ee){var Ke=Os.get(he);if(Ke>Je?(Y.push(!0),Ke-=Je):Y.push(!1),["normal","auto","loose"].indexOf(C)!==-1&&[8208,8211,12316,12448].indexOf(he)!==-1)return R.push(Ee),O.push(ns);if(Ke===Ce||Ke===at){if(Ee===0)return R.push(Ee),O.push(Cs);var ze=O[Ee-1];return fs.indexOf(ze)===-1?(R.push(R[Ee-1]),O.push(ze)):(R.push(Ee),O.push(Cs))}if(R.push(Ee),Ke===rs)return O.push(C==="strict"?De:Pt);if(Ke===Ln||Ke===Yt)return O.push(Cs);if(Ke===Zs)return he>=131072&&he<=196605||he>=196608&&he<=262141?O.push(Pt):O.push(Cs);O.push(Ke)}),[R,O,Y]},Lt=function(T,C,O,R){var Y=R[O];if(Array.isArray(T)?T.indexOf(Y)!==-1:T===Y)for(var he=O;he<=R.length;){he++;var Ee=R[he];if(Ee===C)return!0;if(Ee!==nt)break}if(Y===nt)for(var he=O;he>0;){he--;var Ke=R[he];if(Array.isArray(T)?T.indexOf(Ke)!==-1:T===Ke)for(var ze=O;ze<=R.length;){ze++;var Ee=R[ze];if(Ee===C)return!0;if(Ee!==nt)break}if(Ke!==nt)break}return!1},Hs=function(T,C){for(var O=T;O>=0;){var R=C[O];if(R===nt)O--;else return R}return 0},Wr=function(T,C,O,R,Y){if(O[R]===0)return Bs;var he=R-1;if(Array.isArray(Y)&&Y[he]===!0)return Bs;var Ee=he-1,Ke=he+1,ze=C[he],ht=Ee>=0?C[Ee]:0,wt=C[Ke];if(ze===pt&&wt===Te)return Bs;if(Rt.indexOf(ze)!==-1)return Ls;if(Rt.indexOf(wt)!==-1||Mt.indexOf(wt)!==-1)return Bs;if(Hs(he,C)===dt)return Ms;if(Os.get(T[he])===at||(ze===Is||ze===on)&&Os.get(T[Ke])===at||ze===de||wt===de||ze===st||[nt,yt,Tt].indexOf(ze)===-1&&wt===st||[Ts,vs,Ns,ls,Gt].indexOf(wt)!==-1||Hs(he,C)===rt||Lt(mt,rt,he,C)||Lt([Ts,vs],De,he,C)||Lt(Dt,Dt,he,C))return Bs;if(ze===nt)return Ms;if(ze===mt||wt===mt)return Bs;if(wt===ns||ze===ns)return Ms;if([yt,Tt,De].indexOf(wt)!==-1||ze===qe||ht===qt&&Ds.indexOf(ze)!==-1||ze===Gt&&wt===qt||wt===et||ot.indexOf(wt)!==-1&&ze===Ht||ot.indexOf(ze)!==-1&&wt===Ht||ze===lt&&[Pt,Is,on].indexOf(wt)!==-1||[Pt,Is,on].indexOf(ze)!==-1&&wt===Kt||ot.indexOf(ze)!==-1&&kt.indexOf(wt)!==-1||kt.indexOf(ze)!==-1&&ot.indexOf(wt)!==-1||[lt,Kt].indexOf(ze)!==-1&&(wt===Ht||[rt,Tt].indexOf(wt)!==-1&&C[Ke+1]===Ht)||[rt,Tt].indexOf(ze)!==-1&&wt===Ht||ze===Ht&&[Ht,Gt,ls].indexOf(wt)!==-1)return Bs;if([Ht,Gt,ls,Ts,vs].indexOf(wt)!==-1)for(var Ct=he;Ct>=0;){var Jt=C[Ct];if(Jt===Ht)return Bs;if([Gt,ls].indexOf(Jt)!==-1)Ct--;else break}if([lt,Kt].indexOf(wt)!==-1)for(var Ct=[Ts,vs].indexOf(ze)!==-1?Ee:he;Ct>=0;){var Jt=C[Ct];if(Jt===Ht)return Bs;if([Gt,ls].indexOf(Jt)!==-1)Ct--;else break}if(gs===ze&&[gs,Rs,ws,St].indexOf(wt)!==-1||[Rs,ws].indexOf(ze)!==-1&&[Rs,Nn].indexOf(wt)!==-1||[Nn,St].indexOf(ze)!==-1&&wt===Nn||ms.indexOf(ze)!==-1&&[et,Kt].indexOf(wt)!==-1||ms.indexOf(wt)!==-1&&ze===lt||ot.indexOf(ze)!==-1&&ot.indexOf(wt)!==-1||ze===ls&&ot.indexOf(wt)!==-1||ot.concat(Ht).indexOf(ze)!==-1&&wt===rt&&En.indexOf(T[Ke])===-1||ot.concat(Ht).indexOf(wt)!==-1&&ze===vs)return Bs;if(ze===ys&&wt===ys){for(var $s=O[he],Fs=1;$s>0&&($s--,C[$s]===ys);)Fs++;if(Fs%2!==0)return Bs}return ze===Is&&wt===on?Bs:Ms},sr=function(T,C){C||(C={lineBreak:"normal",wordBreak:"normal"});var O=js(T,C.lineBreak),R=O[0],Y=O[1],he=O[2];(C.wordBreak==="break-all"||C.wordBreak==="break-word")&&(Y=Y.map(function(Ke){return[Ht,Cs,Ln].indexOf(Ke)!==-1?Pt:Ke}));var Ee=C.wordBreak==="keep-all"?he.map(function(Ke,ze){return Ke&&T[ze]>=19968&&T[ze]<=40959}):void 0;return[R,Y,Ee]},ds=(function(){function T(C,O,R,Y){this.codePoints=C,this.required=O===Ls,this.start=R,this.end=Y}return T.prototype.slice=function(){return y.apply(void 0,this.codePoints.slice(this.start,this.end))},T})(),mn=function(T,C){var O=m(T),R=sr(O,C),Y=R[0],he=R[1],Ee=R[2],Ke=O.length,ze=0,ht=0;return{next:function(){if(ht>=Ke)return{done:!0,value:null};for(var wt=Bs;ht<Ke&&(wt=Wr(O,he,Y,++ht,Ee))===Bs;);if(wt!==Bs||ht===Ke){var Ct=new ds(O,wt,ze,ht);return ze=ht,{value:Ct,done:!1}}return{done:!0,value:null}}}},cr=1,nr=2,sn=4,gn=8,qn=10,Yr=47,Gr=92,ra=9,gr=32,Ks=34,en=61,Es=35,rn=36,Ps=37,wr=39,Ze=40,us=41,is=95,yn=45,Jn=33,zn=60,ua=62,ga=64,ha=91,Tr=93,$a=61,ya=123,rr=63,oa=125,Ga=124,fi=126,xa=128,ie=65533,G=42,ve=43,Le=44,Xe=58,vt=59,ut=46,Pe=0,Bt=8,_t=11,xn=14,Dn=31,ps=127,Qs=-1,Qn=48,kn=97,Wn=101,Xr=102,v=117,N=122,x=65,I=69,F=70,_=85,U=90,P=function(T){return T>=Qn&&T<=57},K=function(T){return T>=55296&&T<=57343},ae=function(T){return P(T)||T>=x&&T<=F||T>=kn&&T<=Xr},Fe=function(T){return T>=kn&&T<=N},Ye=function(T){return T>=x&&T<=U},tt=function(T){return Fe(T)||Ye(T)},Ft=function(T){return T>=xa},Zt=function(T){return T===qn||T===ra||T===gr},as=function(T){return tt(T)||Ft(T)||T===is},xs=function(T){return as(T)||P(T)||T===yn},Gs=function(T){return T>=Pe&&T<=Bt||T===_t||T>=xn&&T<=Dn||T===ps},Rn=function(T,C){return T!==Gr?!1:C!==qn},V=function(T,C,O){return T===yn?as(C)||Rn(C,O):as(T)?!0:!!(T===Gr&&Rn(T,C))},ye=function(T,C,O){return T===ve||T===yn?P(C)?!0:C===ut&&P(O):P(T===ut?C:T)},He=function(T){var C=0,O=1;(T[C]===ve||T[C]===yn)&&(T[C]===yn&&(O=-1),C++);for(var R=[];P(T[C]);)R.push(T[C++]);var Y=R.length?parseInt(y.apply(void 0,R),10):0;T[C]===ut&&C++;for(var he=[];P(T[C]);)he.push(T[C++]);var Ee=he.length,Ke=Ee?parseInt(y.apply(void 0,he),10):0;(T[C]===I||T[C]===Wn)&&C++;var ze=1;(T[C]===ve||T[C]===yn)&&(T[C]===yn&&(ze=-1),C++);for(var ht=[];P(T[C]);)ht.push(T[C++]);var wt=ht.length?parseInt(y.apply(void 0,ht),10):0;return O*(Y+Ke*Math.pow(10,-Ee))*Math.pow(10,ze*wt)},it={type:2},bt={type:3},es={type:4},hs={type:13},nn={type:8},hn={type:21},_n={type:9},Zn={type:10},Fr={type:11},Ra={type:12},qa={type:14},Jr={type:23},pi={type:1},si={type:25},Bi={type:24},Rl={type:26},Yo={type:27},Ol={type:28},kd={type:29},rd={type:31},jo={type:32},wo=(function(){function T(){this._value=[]}return T.prototype.write=function(C){this._value=this._value.concat(m(C))},T.prototype.read=function(){for(var C=[],O=this.consumeToken();O!==jo;)C.push(O),O=this.consumeToken();return C},T.prototype.consumeToken=function(){var C=this.consumeCodePoint();switch(C){case Ks:return this.consumeStringToken(Ks);case Es:var O=this.peekCodePoint(0),R=this.peekCodePoint(1),Y=this.peekCodePoint(2);if(xs(O)||Rn(R,Y)){var he=V(O,R,Y)?nr:cr,Ee=this.consumeName();return{type:5,value:Ee,flags:he}}break;case rn:if(this.peekCodePoint(0)===en)return this.consumeCodePoint(),hs;break;case wr:return this.consumeStringToken(wr);case Ze:return it;case us:return bt;case G:if(this.peekCodePoint(0)===en)return this.consumeCodePoint(),qa;break;case ve:if(ye(C,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(C),this.consumeNumericToken();break;case Le:return es;case yn:var Ke=C,ze=this.peekCodePoint(0),ht=this.peekCodePoint(1);if(ye(Ke,ze,ht))return this.reconsumeCodePoint(C),this.consumeNumericToken();if(V(Ke,ze,ht))return this.reconsumeCodePoint(C),this.consumeIdentLikeToken();if(ze===yn&&ht===ua)return this.consumeCodePoint(),this.consumeCodePoint(),Bi;break;case ut:if(ye(C,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(C),this.consumeNumericToken();break;case Yr:if(this.peekCodePoint(0)===G)for(this.consumeCodePoint();;){var wt=this.consumeCodePoint();if(wt===G&&(wt=this.consumeCodePoint(),wt===Yr))return this.consumeToken();if(wt===Qs)return this.consumeToken()}break;case Xe:return Rl;case vt:return Yo;case zn:if(this.peekCodePoint(0)===Jn&&this.peekCodePoint(1)===yn&&this.peekCodePoint(2)===yn)return this.consumeCodePoint(),this.consumeCodePoint(),si;break;case ga:var Ct=this.peekCodePoint(0),Jt=this.peekCodePoint(1),$s=this.peekCodePoint(2);if(V(Ct,Jt,$s)){var Ee=this.consumeName();return{type:7,value:Ee}}break;case ha:return Ol;case Gr:if(Rn(C,this.peekCodePoint(0)))return this.reconsumeCodePoint(C),this.consumeIdentLikeToken();break;case Tr:return kd;case $a:if(this.peekCodePoint(0)===en)return this.consumeCodePoint(),nn;break;case ya:return Fr;case oa:return Ra;case v:case _:var Fs=this.peekCodePoint(0),_s=this.peekCodePoint(1);return Fs===ve&&(ae(_s)||_s===rr)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(C),this.consumeIdentLikeToken();case Ga:if(this.peekCodePoint(0)===en)return this.consumeCodePoint(),_n;if(this.peekCodePoint(0)===Ga)return this.consumeCodePoint(),hn;break;case fi:if(this.peekCodePoint(0)===en)return this.consumeCodePoint(),Zn;break;case Qs:return jo}return Zt(C)?(this.consumeWhiteSpace(),rd):P(C)?(this.reconsumeCodePoint(C),this.consumeNumericToken()):as(C)?(this.reconsumeCodePoint(C),this.consumeIdentLikeToken()):{type:6,value:y(C)}},T.prototype.consumeCodePoint=function(){var C=this._value.shift();return typeof C>"u"?-1:C},T.prototype.reconsumeCodePoint=function(C){this._value.unshift(C)},T.prototype.peekCodePoint=function(C){return C>=this._value.length?-1:this._value[C]},T.prototype.consumeUnicodeRangeToken=function(){for(var C=[],O=this.consumeCodePoint();ae(O)&&C.length<6;)C.push(O),O=this.consumeCodePoint();for(var R=!1;O===rr&&C.length<6;)C.push(O),O=this.consumeCodePoint(),R=!0;if(R){var Y=parseInt(y.apply(void 0,C.map(function(ze){return ze===rr?Qn:ze})),16),he=parseInt(y.apply(void 0,C.map(function(ze){return ze===rr?F:ze})),16);return{type:30,start:Y,end:he}}var Ee=parseInt(y.apply(void 0,C),16);if(this.peekCodePoint(0)===yn&&ae(this.peekCodePoint(1))){this.consumeCodePoint(),O=this.consumeCodePoint();for(var Ke=[];ae(O)&&Ke.length<6;)Ke.push(O),O=this.consumeCodePoint();var he=parseInt(y.apply(void 0,Ke),16);return{type:30,start:Ee,end:he}}else return{type:30,start:Ee,end:Ee}},T.prototype.consumeIdentLikeToken=function(){var C=this.consumeName();return C.toLowerCase()==="url"&&this.peekCodePoint(0)===Ze?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Ze?(this.consumeCodePoint(),{type:19,value:C}):{type:20,value:C}},T.prototype.consumeUrlToken=function(){var C=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Qs)return{type:22,value:""};var O=this.peekCodePoint(0);if(O===wr||O===Ks){var R=this.consumeStringToken(this.consumeCodePoint());return R.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Qs||this.peekCodePoint(0)===us)?(this.consumeCodePoint(),{type:22,value:R.value}):(this.consumeBadUrlRemnants(),Jr)}for(;;){var Y=this.consumeCodePoint();if(Y===Qs||Y===us)return{type:22,value:y.apply(void 0,C)};if(Zt(Y))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Qs||this.peekCodePoint(0)===us?(this.consumeCodePoint(),{type:22,value:y.apply(void 0,C)}):(this.consumeBadUrlRemnants(),Jr);if(Y===Ks||Y===wr||Y===Ze||Gs(Y))return this.consumeBadUrlRemnants(),Jr;if(Y===Gr)if(Rn(Y,this.peekCodePoint(0)))C.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Jr;else C.push(Y)}},T.prototype.consumeWhiteSpace=function(){for(;Zt(this.peekCodePoint(0));)this.consumeCodePoint()},T.prototype.consumeBadUrlRemnants=function(){for(;;){var C=this.consumeCodePoint();if(C===us||C===Qs)return;Rn(C,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},T.prototype.consumeStringSlice=function(C){for(var O=5e4,R="";C>0;){var Y=Math.min(O,C);R+=y.apply(void 0,this._value.splice(0,Y)),C-=Y}return this._value.shift(),R},T.prototype.consumeStringToken=function(C){var O="",R=0;do{var Y=this._value[R];if(Y===Qs||Y===void 0||Y===C)return O+=this.consumeStringSlice(R),{type:0,value:O};if(Y===qn)return this._value.splice(0,R),pi;if(Y===Gr){var he=this._value[R+1];he!==Qs&&he!==void 0&&(he===qn?(O+=this.consumeStringSlice(R),R=-1,this._value.shift()):Rn(Y,he)&&(O+=this.consumeStringSlice(R),O+=y(this.consumeEscapedCodePoint()),R=-1))}R++}while(!0)},T.prototype.consumeNumber=function(){var C=[],O=sn,R=this.peekCodePoint(0);for((R===ve||R===yn)&&C.push(this.consumeCodePoint());P(this.peekCodePoint(0));)C.push(this.consumeCodePoint());R=this.peekCodePoint(0);var Y=this.peekCodePoint(1);if(R===ut&&P(Y))for(C.push(this.consumeCodePoint(),this.consumeCodePoint()),O=gn;P(this.peekCodePoint(0));)C.push(this.consumeCodePoint());R=this.peekCodePoint(0),Y=this.peekCodePoint(1);var he=this.peekCodePoint(2);if((R===I||R===Wn)&&((Y===ve||Y===yn)&&P(he)||P(Y)))for(C.push(this.consumeCodePoint(),this.consumeCodePoint()),O=gn;P(this.peekCodePoint(0));)C.push(this.consumeCodePoint());return[He(C),O]},T.prototype.consumeNumericToken=function(){var C=this.consumeNumber(),O=C[0],R=C[1],Y=this.peekCodePoint(0),he=this.peekCodePoint(1),Ee=this.peekCodePoint(2);if(V(Y,he,Ee)){var Ke=this.consumeName();return{type:15,number:O,flags:R,unit:Ke}}return Y===Ps?(this.consumeCodePoint(),{type:16,number:O,flags:R}):{type:17,number:O,flags:R}},T.prototype.consumeEscapedCodePoint=function(){var C=this.consumeCodePoint();if(ae(C)){for(var O=y(C);ae(this.peekCodePoint(0))&&O.length<6;)O+=y(this.consumeCodePoint());Zt(this.peekCodePoint(0))&&this.consumeCodePoint();var R=parseInt(O,16);return R===0||K(R)||R>1114111?ie:R}return C===Qs?ie:C},T.prototype.consumeName=function(){for(var C="";;){var O=this.consumeCodePoint();if(xs(O))C+=y(O);else if(Rn(O,this.peekCodePoint(0)))C+=y(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(O),C}},T})(),Zl=(function(){function T(C){this._tokens=C}return T.create=function(C){var O=new wo;return O.write(C),new T(O.read())},T.parseValue=function(C){return T.create(C).parseComponentValue()},T.parseValues=function(C){return T.create(C).parseComponentValues()},T.prototype.parseComponentValue=function(){for(var C=this.consumeToken();C.type===31;)C=this.consumeToken();if(C.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(C);var O=this.consumeComponentValue();do C=this.consumeToken();while(C.type===31);if(C.type===32)return O;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},T.prototype.parseComponentValues=function(){for(var C=[];;){var O=this.consumeComponentValue();if(O.type===32)return C;C.push(O),C.push()}},T.prototype.consumeComponentValue=function(){var C=this.consumeToken();switch(C.type){case 11:case 28:case 2:return this.consumeSimpleBlock(C.type);case 19:return this.consumeFunction(C)}return C},T.prototype.consumeSimpleBlock=function(C){for(var O={type:C,values:[]},R=this.consumeToken();;){if(R.type===32||ad(R,C))return O;this.reconsumeToken(R),O.values.push(this.consumeComponentValue()),R=this.consumeToken()}},T.prototype.consumeFunction=function(C){for(var O={name:C.value,values:[],type:18};;){var R=this.consumeToken();if(R.type===32||R.type===3)return O;this.reconsumeToken(R),O.values.push(this.consumeComponentValue())}},T.prototype.consumeToken=function(){var C=this._tokens.shift();return typeof C>"u"?jo:C},T.prototype.reconsumeToken=function(C){this._tokens.unshift(C)},T})(),io=function(T){return T.type===15},Oa=function(T){return T.type===17},yr=function(T){return T.type===20},ec=function(T){return T.type===0},tc=function(T,C){return yr(T)&&T.value===C},Xo=function(T){return T.type!==31},ni=function(T){return T.type!==31&&T.type!==4},vi=function(T){var C=[],O=[];return T.forEach(function(R){if(R.type===4){if(O.length===0)throw new Error("Error parsing function args, zero tokens for arg");C.push(O),O=[];return}R.type!==31&&O.push(R)}),O.length&&C.push(O),C},ad=function(T,C){return C===11&&T.type===12||C===28&&T.type===29?!0:C===2&&T.type===3},So=function(T){return T.type===17||T.type===15},Ur=function(T){return T.type===16||So(T)},No=function(T){return T.length>1?[T[0],T[1]]:[T[0]]},va={type:17,number:0,flags:sn},Ec={type:16,number:50,flags:sn},bi={type:16,number:100,flags:sn},Bo=function(T,C,O){var R=T[0],Y=T[1];return[lr(R,C),lr(typeof Y<"u"?Y:R,O)]},lr=function(T,C){if(T.type===16)return T.number/100*C;if(io(T))switch(T.unit){case"rem":case"em":return 16*T.number;case"px":default:return T.number}return T.number},_i="deg",Jo="grad",Zo="rad",cl="turn",Ul={name:"angle",parse:function(T,C){if(C.type===15)switch(C.unit){case _i:return Math.PI*C.number/180;case Jo:return Math.PI/200*C.number;case Zo:return C.number;case cl:return Math.PI*2*C.number}throw new Error("Unsupported angle type")}},Tc=function(T){return T.type===15&&(T.unit===_i||T.unit===Jo||T.unit===Zo||T.unit===cl)},Ha=function(T){var C=T.filter(yr).map(function(O){return O.value}).join(" ");switch(C){case"to bottom right":case"to right bottom":case"left top":case"top left":return[va,va];case"to top":case"bottom":return qi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[va,bi];case"to right":case"left":return qi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[bi,bi];case"to bottom":case"top":return qi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[bi,va];case"to left":case"right":return qi(270)}return 0},qi=function(T){return Math.PI*T/180},Ci={name:"color",parse:function(T,C){if(C.type===18){var O=Al[C.name];if(typeof O>"u")throw new Error('Attempting to parse an unsupported color function "'+C.name+'"');return O(T,C.values)}if(C.type===5){if(C.value.length===3){var R=C.value.substring(0,1),Y=C.value.substring(1,2),he=C.value.substring(2,3);return Mi(parseInt(R+R,16),parseInt(Y+Y,16),parseInt(he+he,16),1)}if(C.value.length===4){var R=C.value.substring(0,1),Y=C.value.substring(1,2),he=C.value.substring(2,3),Ee=C.value.substring(3,4);return Mi(parseInt(R+R,16),parseInt(Y+Y,16),parseInt(he+he,16),parseInt(Ee+Ee,16)/255)}if(C.value.length===6){var R=C.value.substring(0,2),Y=C.value.substring(2,4),he=C.value.substring(4,6);return Mi(parseInt(R,16),parseInt(Y,16),parseInt(he,16),1)}if(C.value.length===8){var R=C.value.substring(0,2),Y=C.value.substring(2,4),he=C.value.substring(4,6),Ee=C.value.substring(6,8);return Mi(parseInt(R,16),parseInt(Y,16),parseInt(he,16),parseInt(Ee,16)/255)}}if(C.type===20){var Ke=Wa[C.value.toUpperCase()];if(typeof Ke<"u")return Ke}return Wa.TRANSPARENT}},Ei=function(T){return(255&T)===0},Sr=function(T){var C=255&T,O=255&T>>8,R=255&T>>16,Y=255&T>>24;return C<255?"rgba("+Y+","+R+","+O+","+C/255+")":"rgb("+Y+","+R+","+O+")"},Mi=function(T,C,O,R){return(T<<24|C<<16|O<<8|Math.round(R*255)<<0)>>>0},Fc=function(T,C){if(T.type===17)return T.number;if(T.type===16){var O=C===3?1:255;return C===3?T.number/100*O:Math.round(T.number/100*O)}return 0},Ic=function(T,C){var O=C.filter(ni);if(O.length===3){var R=O.map(Fc),Y=R[0],he=R[1],Ee=R[2];return Mi(Y,he,Ee,1)}if(O.length===4){var Ke=O.map(Fc),Y=Ke[0],he=Ke[1],Ee=Ke[2],ze=Ke[3];return Mi(Y,he,Ee,ze)}return 0};function el(T,C,O){return O<0&&(O+=1),O>=1&&(O-=1),O<1/6?(C-T)*O*6+T:O<1/2?C:O<2/3?(C-T)*6*(2/3-O)+T:T}var dl=function(T,C){var O=C.filter(ni),R=O[0],Y=O[1],he=O[2],Ee=O[3],Ke=(R.type===17?qi(R.number):Ul.parse(T,R))/(Math.PI*2),ze=Ur(Y)?Y.number/100:0,ht=Ur(he)?he.number/100:0,wt=typeof Ee<"u"&&Ur(Ee)?lr(Ee,1):1;if(ze===0)return Mi(ht*255,ht*255,ht*255,1);var Ct=ht<=.5?ht*(ze+1):ht+ze-ht*ze,Jt=ht*2-Ct,$s=el(Jt,Ct,Ke+1/3),Fs=el(Jt,Ct,Ke),_s=el(Jt,Ct,Ke-1/3);return Mi($s*255,Fs*255,_s*255,wt)},Al={hsl:dl,hsla:dl,rgb:Ic,rgba:Ic},tl=function(T,C){return Ci.parse(T,Zl.create(C).parseComponentValue())},Wa={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Ll={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(T,C){return C.map(function(O){if(yr(O))switch(O.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Pi={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Wi=function(T,C){var O=Ci.parse(T,C[0]),R=C[1];return R&&Ur(R)?{color:O,stop:R}:{color:O,stop:null}},Lr=function(T,C){var O=T[0],R=T[T.length-1];O.stop===null&&(O.stop=va),R.stop===null&&(R.stop=bi);for(var Y=[],he=0,Ee=0;Ee<T.length;Ee++){var Ke=T[Ee].stop;if(Ke!==null){var ze=lr(Ke,C);ze>he?Y.push(ze):Y.push(he),he=ze}else Y.push(null)}for(var ht=null,Ee=0;Ee<Y.length;Ee++){var wt=Y[Ee];if(wt===null)ht===null&&(ht=Ee);else if(ht!==null){for(var Ct=Ee-ht,Jt=Y[ht-1],$s=(wt-Jt)/(Ct+1),Fs=1;Fs<=Ct;Fs++)Y[ht+Fs-1]=$s*Fs;ht=null}}return T.map(function(_s,fn){var Js=_s.color;return{color:Js,stop:Math.max(Math.min(1,Y[fn]/C),0)}})},Ir=function(T,C,O){var R=C/2,Y=O/2,he=lr(T[0],C)-R,Ee=Y-lr(T[1],O);return(Math.atan2(Ee,he)+Math.PI*2)%(Math.PI*2)},fa=function(T,C,O){var R=typeof T=="number"?T:Ir(T,C,O),Y=Math.abs(C*Math.sin(R))+Math.abs(O*Math.cos(R)),he=C/2,Ee=O/2,Ke=Y/2,ze=Math.sin(R-Math.PI/2)*Ke,ht=Math.cos(R-Math.PI/2)*Ke;return[Y,he-ht,he+ht,Ee-ze,Ee+ze]},Pr=function(T,C){return Math.sqrt(T*T+C*C)},sl=function(T,C,O,R,Y){var he=[[0,0],[0,C],[T,0],[T,C]];return he.reduce(function(Ee,Ke){var ze=Ke[0],ht=Ke[1],wt=Pr(O-ze,R-ht);return(Y?wt<Ee.optimumDistance:wt>Ee.optimumDistance)?{optimumCorner:Ke,optimumDistance:wt}:Ee},{optimumDistance:Y?1/0:-1/0,optimumCorner:null}).optimumCorner},nl=function(T,C,O,R,Y){var he=0,Ee=0;switch(T.size){case 0:T.shape===0?he=Ee=Math.min(Math.abs(C),Math.abs(C-R),Math.abs(O),Math.abs(O-Y)):T.shape===1&&(he=Math.min(Math.abs(C),Math.abs(C-R)),Ee=Math.min(Math.abs(O),Math.abs(O-Y)));break;case 2:if(T.shape===0)he=Ee=Math.min(Pr(C,O),Pr(C,O-Y),Pr(C-R,O),Pr(C-R,O-Y));else if(T.shape===1){var Ke=Math.min(Math.abs(O),Math.abs(O-Y))/Math.min(Math.abs(C),Math.abs(C-R)),ze=sl(R,Y,C,O,!0),ht=ze[0],wt=ze[1];he=Pr(ht-C,(wt-O)/Ke),Ee=Ke*he}break;case 1:T.shape===0?he=Ee=Math.max(Math.abs(C),Math.abs(C-R),Math.abs(O),Math.abs(O-Y)):T.shape===1&&(he=Math.max(Math.abs(C),Math.abs(C-R)),Ee=Math.max(Math.abs(O),Math.abs(O-Y)));break;case 3:if(T.shape===0)he=Ee=Math.max(Pr(C,O),Pr(C,O-Y),Pr(C-R,O),Pr(C-R,O-Y));else if(T.shape===1){var Ke=Math.max(Math.abs(O),Math.abs(O-Y))/Math.max(Math.abs(C),Math.abs(C-R)),Ct=sl(R,Y,C,O,!1),ht=Ct[0],wt=Ct[1];he=Pr(ht-C,(wt-O)/Ke),Ee=Ke*he}break}return Array.isArray(T.size)&&(he=lr(T.size[0],R),Ee=T.size.length===2?lr(T.size[1],Y):he),[he,Ee]},Rc=function(T,C){var O=qi(180),R=[];return vi(C).forEach(function(Y,he){if(he===0){var Ee=Y[0];if(Ee.type===20&&Ee.value==="to"){O=Ha(Y);return}else if(Tc(Ee)){O=Ul.parse(T,Ee);return}}var Ke=Wi(T,Y);R.push(Ke)}),{angle:O,stops:R,type:1}},sc=function(T,C){var O=qi(180),R=[];return vi(C).forEach(function(Y,he){if(he===0){var Ee=Y[0];if(Ee.type===20&&["top","left","right","bottom"].indexOf(Ee.value)!==-1){O=Ha(Y);return}else if(Tc(Ee)){O=(Ul.parse(T,Ee)+qi(270))%qi(360);return}}var Ke=Wi(T,Y);R.push(Ke)}),{angle:O,stops:R,type:1}},ju=function(T,C){var O=qi(180),R=[],Y=1,he=0,Ee=3,Ke=[];return vi(C).forEach(function(ze,ht){var wt=ze[0];if(ht===0){if(yr(wt)&&wt.value==="linear"){Y=1;return}else if(yr(wt)&&wt.value==="radial"){Y=2;return}}if(wt.type===18){if(wt.name==="from"){var Ct=Ci.parse(T,wt.values[0]);R.push({stop:va,color:Ct})}else if(wt.name==="to"){var Ct=Ci.parse(T,wt.values[0]);R.push({stop:bi,color:Ct})}else if(wt.name==="color-stop"){var Jt=wt.values.filter(ni);if(Jt.length===2){var Ct=Ci.parse(T,Jt[1]),$s=Jt[0];Oa($s)&&R.push({stop:{type:16,number:$s.number*100,flags:$s.flags},color:Ct})}}}}),Y===1?{angle:(O+qi(180))%qi(360),stops:R,type:Y}:{size:Ee,shape:he,stops:R,position:Ke,type:Y}},wu="closest-side",Su="farthest-side",Nu="closest-corner",yA="farthest-corner",xA="circle",nc="ellipse",oo="cover",id="contain",lo=function(T,C){var O=0,R=3,Y=[],he=[];return vi(C).forEach(function(Ee,Ke){var ze=!0;if(Ke===0){var ht=!1;ze=Ee.reduce(function(Ct,Jt){if(ht)if(yr(Jt))switch(Jt.value){case"center":return he.push(Ec),Ct;case"top":case"left":return he.push(va),Ct;case"right":case"bottom":return he.push(bi),Ct}else(Ur(Jt)||So(Jt))&&he.push(Jt);else if(yr(Jt))switch(Jt.value){case xA:return O=0,!1;case nc:return O=1,!1;case"at":return ht=!0,!1;case wu:return R=0,!1;case oo:case Su:return R=1,!1;case id:case Nu:return R=2,!1;case yA:return R=3,!1}else if(So(Jt)||Ur(Jt))return Array.isArray(R)||(R=[]),R.push(Jt),!1;return Ct},ze)}if(ze){var wt=Wi(T,Ee);Y.push(wt)}}),{size:R,shape:O,stops:Y,position:he,type:2}},ul=function(T,C){var O=0,R=3,Y=[],he=[];return vi(C).forEach(function(Ee,Ke){var ze=!0;if(Ke===0?ze=Ee.reduce(function(wt,Ct){if(yr(Ct))switch(Ct.value){case"center":return he.push(Ec),!1;case"top":case"left":return he.push(va),!1;case"right":case"bottom":return he.push(bi),!1}else if(Ur(Ct)||So(Ct))return he.push(Ct),!1;return wt},ze):Ke===1&&(ze=Ee.reduce(function(wt,Ct){if(yr(Ct))switch(Ct.value){case xA:return O=0,!1;case nc:return O=1,!1;case id:case wu:return R=0,!1;case Su:return R=1,!1;case Nu:return R=2,!1;case oo:case yA:return R=3,!1}else if(So(Ct)||Ur(Ct))return Array.isArray(R)||(R=[]),R.push(Ct),!1;return wt},ze)),ze){var ht=Wi(T,Ee);Y.push(ht)}}),{size:R,shape:O,stops:Y,position:he,type:2}},vA=function(T){return T.type===1},Hd=function(T){return T.type===2},Oc={name:"image",parse:function(T,C){if(C.type===22){var O={url:C.value,type:0};return T.cache.addImage(C.value),O}if(C.type===18){var R=hl[C.name];if(typeof R>"u")throw new Error('Attempting to parse an unsupported image function "'+C.name+'"');return R(T,C.values)}throw new Error("Unsupported image type "+C.type)}};function bA(T){return!(T.type===20&&T.value==="none")&&(T.type!==18||!!hl[T.name])}var hl={"linear-gradient":Rc,"-moz-linear-gradient":sc,"-ms-linear-gradient":sc,"-o-linear-gradient":sc,"-webkit-linear-gradient":sc,"radial-gradient":lo,"-moz-radial-gradient":ul,"-ms-radial-gradient":ul,"-o-radial-gradient":ul,"-webkit-radial-gradient":ul,"-webkit-gradient":ju},Kd={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(T,C){if(C.length===0)return[];var O=C[0];return O.type===20&&O.value==="none"?[]:C.filter(function(R){return ni(R)&&bA(R)}).map(function(R){return Oc.parse(T,R)})}},ki={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(T,C){return C.map(function(O){if(yr(O))switch(O.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ti={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(T,C){return vi(C).map(function(O){return O.filter(Ur)}).map(No)}},jA={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(T,C){return vi(C).map(function(O){return O.filter(yr).map(function(R){return R.value}).join(" ")}).map(Hi)}},Hi=function(T){switch(T){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Dl;(function(T){T.AUTO="auto",T.CONTAIN="contain",T.COVER="cover"})(Dl||(Dl={}));var Co={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(T,C){return vi(C).map(function(O){return O.filter(zd)})}},zd=function(T){return yr(T)||Ur(T)},Ql=function(T){return{name:"border-"+T+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},rc=Ql("top"),Vd=Ql("right"),wA=Ql("bottom"),od=Ql("left"),Uc=function(T){return{name:"border-radius-"+T,initialValue:"0 0",prefix:!1,type:1,parse:function(C,O){return No(O.filter(Ur))}}},Eo=Uc("top-left"),ld=Uc("top-right"),Lc=Uc("bottom-right"),SA=Uc("bottom-left"),ac=function(T){return{name:"border-"+T+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(C,O){switch(O){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},To=ac("top"),Fo=ac("right"),ic=ac("bottom"),Io=ac("left"),Yi=function(T){return{name:"border-"+T+"-width",initialValue:"0",type:0,prefix:!1,parse:function(C,O){return io(O)?O.number:0}}},co=Yi("top"),Fh=Yi("right"),Bu=Yi("bottom"),NA=Yi("left"),Ih={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Fi={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(T,C){switch(C){case"rtl":return 1;case"ltr":default:return 0}}},ba={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(T,C){return C.filter(yr).reduce(function(O,R){return O|xr(R.value)},0)}},xr=function(T){switch(T){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Xi={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(T,C){switch(C){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Ka={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(T,C){return C.type===20&&C.value==="normal"?0:C.type===17||C.type===15?C.number:0}},no;(function(T){T.NORMAL="normal",T.STRICT="strict"})(no||(no={}));var oc={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(T,C){switch(C){case"strict":return no.STRICT;case"normal":default:return no.NORMAL}}},Cu={name:"line-height",initialValue:"normal",prefix:!1,type:4},fl=function(T,C){return yr(T)&&T.value==="normal"?1.2*C:T.type===17?C*T.number:Ur(T)?lr(T,C):C},Ii={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(T,C){return C.type===20&&C.value==="none"?null:Oc.parse(T,C)}},Dc={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(T,C){switch(C){case"inside":return 0;case"outside":default:return 1}}},$d={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(T,C){switch(C){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},_l=function(T){return{name:"margin-"+T,initialValue:"0",prefix:!1,type:4}},BA=_l("top"),lc=_l("right"),pl=_l("bottom"),cc=_l("left"),Ro={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(T,C){return C.filter(yr).map(function(O){switch(O.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},cd={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(T,C){switch(C){case"break-word":return"break-word";case"normal":default:return"normal"}}},ml=function(T){return{name:"padding-"+T,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},dc=ml("top"),CA=ml("right"),Ac=ml("bottom"),Ri=ml("left"),EA={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(T,C){switch(C){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Rh={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(T,C){switch(C){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Vf={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(T,C){return C.length===1&&tc(C[0],"none")?[]:vi(C).map(function(O){for(var R={color:Wa.TRANSPARENT,offsetX:va,offsetY:va,blur:va},Y=0,he=0;he<O.length;he++){var Ee=O[he];So(Ee)?(Y===0?R.offsetX=Ee:Y===1?R.offsetY=Ee:R.blur=Ee,Y++):R.color=Ci.parse(T,Ee)}return R})}},$f={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(T,C){switch(C){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Gf={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(T,C){if(C.type===20&&C.value==="none")return null;if(C.type===18){var O=Gd[C.name];if(typeof O>"u")throw new Error('Attempting to parse an unsupported transform function "'+C.name+'"');return O(C.values)}return null}},Ya=function(T){var C=T.filter(function(O){return O.type===17}).map(function(O){return O.number});return C.length===6?C:null},dd=function(T){var C=T.filter(function(ze){return ze.type===17}).map(function(ze){return ze.number}),O=C[0],R=C[1];C[2],C[3];var Y=C[4],he=C[5];C[6],C[7],C[8],C[9],C[10],C[11];var Ee=C[12],Ke=C[13];return C[14],C[15],C.length===16?[O,R,Y,he,Ee,Ke]:null},Gd={matrix:Ya,matrix3d:dd},Ad={type:16,number:50,flags:sn},TA=[Ad,Ad],E={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(T,C){var O=C.filter(Ur);return O.length!==2?TA:[O[0],O[1]]}},M={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(T,C){switch(C){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},W;(function(T){T.NORMAL="normal",T.BREAK_ALL="break-all",T.KEEP_ALL="keep-all"})(W||(W={}));for(var ce={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(T,C){switch(C){case"break-all":return W.BREAK_ALL;case"keep-all":return W.KEEP_ALL;case"normal":default:return W.NORMAL}}},Se={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(T,C){if(C.type===20)return{auto:!0,order:0};if(Oa(C))return{auto:!1,order:C.number};throw new Error("Invalid z-index number parsed")}},Ie={name:"time",parse:function(T,C){if(C.type===15)switch(C.unit.toLowerCase()){case"s":return 1e3*C.number;case"ms":return C.number}throw new Error("Unsupported time type")}},Re={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(T,C){return Oa(C)?C.number:1}},Ue={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ke={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(T,C){return C.filter(yr).map(function(O){switch(O.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(O){return O!==0})}},We={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(T,C){var O=[],R=[];return C.forEach(function(Y){switch(Y.type){case 20:case 0:O.push(Y.value);break;case 17:O.push(Y.number.toString());break;case 4:R.push(O.join(" ")),O.length=0;break}}),O.length&&R.push(O.join(" ")),R.map(function(Y){return Y.indexOf(" ")===-1?Y:"'"+Y+"'"})}},ft={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},It={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(T,C){if(Oa(C))return C.number;if(yr(C))switch(C.value){case"bold":return 700;case"normal":default:return 400}return 400}},Ge={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(T,C){return C.filter(yr).map(function(O){return O.value})}},xt={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(T,C){switch(C){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},jt=function(T,C){return(T&C)!==0},Xt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(T,C){if(C.length===0)return[];var O=C[0];return O.type===20&&O.value==="none"?[]:C}},Et={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(T,C){if(C.length===0)return null;var O=C[0];if(O.type===20&&O.value==="none")return null;for(var R=[],Y=C.filter(Xo),he=0;he<Y.length;he++){var Ee=Y[he],Ke=Y[he+1];if(Ee.type===20){var ze=Ke&&Oa(Ke)?Ke.number:1;R.push({counter:Ee.value,increment:ze})}}return R}},Wt={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(T,C){if(C.length===0)return[];for(var O=[],R=C.filter(Xo),Y=0;Y<R.length;Y++){var he=R[Y],Ee=R[Y+1];if(yr(he)&&he.value!=="none"){var Ke=Ee&&Oa(Ee)?Ee.number:0;O.push({counter:he.value,reset:Ke})}}return O}},ss={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(T,C){return C.filter(io).map(function(O){return Ie.parse(T,O)})}},bs={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(T,C){if(C.length===0)return null;var O=C[0];if(O.type===20&&O.value==="none")return null;var R=[],Y=C.filter(ec);if(Y.length%2!==0)return null;for(var he=0;he<Y.length;he+=2){var Ee=Y[he].value,Ke=Y[he+1].value;R.push({open:Ee,close:Ke})}return R}},cs=function(T,C,O){if(!T)return"";var R=T[Math.min(C,T.length-1)];return R?O?R.open:R.close:""},an={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(T,C){return C.length===1&&tc(C[0],"none")?[]:vi(C).map(function(O){for(var R={color:255,offsetX:va,offsetY:va,blur:va,spread:va,inset:!1},Y=0,he=0;he<O.length;he++){var Ee=O[he];tc(Ee,"inset")?R.inset=!0:So(Ee)?(Y===0?R.offsetX=Ee:Y===1?R.offsetY=Ee:Y===2?R.blur=Ee:R.spread=Ee,Y++):R.color=Ci.parse(T,Ee)}return R})}},Ys={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(T,C){var O=[0,1,2],R=[];return C.filter(yr).forEach(function(Y){switch(Y.value){case"stroke":R.push(1);break;case"fill":R.push(0);break;case"markers":R.push(2);break}}),O.forEach(function(Y){R.indexOf(Y)===-1&&R.push(Y)}),R}},Hn={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},tn={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(T,C){return io(C)?C.number:0}},fr=(function(){function T(C,O){var R,Y;this.animationDuration=Vt(C,ss,O.animationDuration),this.backgroundClip=Vt(C,Ll,O.backgroundClip),this.backgroundColor=Vt(C,Pi,O.backgroundColor),this.backgroundImage=Vt(C,Kd,O.backgroundImage),this.backgroundOrigin=Vt(C,ki,O.backgroundOrigin),this.backgroundPosition=Vt(C,Ti,O.backgroundPosition),this.backgroundRepeat=Vt(C,jA,O.backgroundRepeat),this.backgroundSize=Vt(C,Co,O.backgroundSize),this.borderTopColor=Vt(C,rc,O.borderTopColor),this.borderRightColor=Vt(C,Vd,O.borderRightColor),this.borderBottomColor=Vt(C,wA,O.borderBottomColor),this.borderLeftColor=Vt(C,od,O.borderLeftColor),this.borderTopLeftRadius=Vt(C,Eo,O.borderTopLeftRadius),this.borderTopRightRadius=Vt(C,ld,O.borderTopRightRadius),this.borderBottomRightRadius=Vt(C,Lc,O.borderBottomRightRadius),this.borderBottomLeftRadius=Vt(C,SA,O.borderBottomLeftRadius),this.borderTopStyle=Vt(C,To,O.borderTopStyle),this.borderRightStyle=Vt(C,Fo,O.borderRightStyle),this.borderBottomStyle=Vt(C,ic,O.borderBottomStyle),this.borderLeftStyle=Vt(C,Io,O.borderLeftStyle),this.borderTopWidth=Vt(C,co,O.borderTopWidth),this.borderRightWidth=Vt(C,Fh,O.borderRightWidth),this.borderBottomWidth=Vt(C,Bu,O.borderBottomWidth),this.borderLeftWidth=Vt(C,NA,O.borderLeftWidth),this.boxShadow=Vt(C,an,O.boxShadow),this.color=Vt(C,Ih,O.color),this.direction=Vt(C,Fi,O.direction),this.display=Vt(C,ba,O.display),this.float=Vt(C,Xi,O.cssFloat),this.fontFamily=Vt(C,We,O.fontFamily),this.fontSize=Vt(C,ft,O.fontSize),this.fontStyle=Vt(C,xt,O.fontStyle),this.fontVariant=Vt(C,Ge,O.fontVariant),this.fontWeight=Vt(C,It,O.fontWeight),this.letterSpacing=Vt(C,Ka,O.letterSpacing),this.lineBreak=Vt(C,oc,O.lineBreak),this.lineHeight=Vt(C,Cu,O.lineHeight),this.listStyleImage=Vt(C,Ii,O.listStyleImage),this.listStylePosition=Vt(C,Dc,O.listStylePosition),this.listStyleType=Vt(C,$d,O.listStyleType),this.marginTop=Vt(C,BA,O.marginTop),this.marginRight=Vt(C,lc,O.marginRight),this.marginBottom=Vt(C,pl,O.marginBottom),this.marginLeft=Vt(C,cc,O.marginLeft),this.opacity=Vt(C,Re,O.opacity);var he=Vt(C,Ro,O.overflow);this.overflowX=he[0],this.overflowY=he[he.length>1?1:0],this.overflowWrap=Vt(C,cd,O.overflowWrap),this.paddingTop=Vt(C,dc,O.paddingTop),this.paddingRight=Vt(C,CA,O.paddingRight),this.paddingBottom=Vt(C,Ac,O.paddingBottom),this.paddingLeft=Vt(C,Ri,O.paddingLeft),this.paintOrder=Vt(C,Ys,O.paintOrder),this.position=Vt(C,Rh,O.position),this.textAlign=Vt(C,EA,O.textAlign),this.textDecorationColor=Vt(C,Ue,(R=O.textDecorationColor)!==null&&R!==void 0?R:O.color),this.textDecorationLine=Vt(C,ke,(Y=O.textDecorationLine)!==null&&Y!==void 0?Y:O.textDecoration),this.textShadow=Vt(C,Vf,O.textShadow),this.textTransform=Vt(C,$f,O.textTransform),this.transform=Vt(C,Gf,O.transform),this.transformOrigin=Vt(C,E,O.transformOrigin),this.visibility=Vt(C,M,O.visibility),this.webkitTextStrokeColor=Vt(C,Hn,O.webkitTextStrokeColor),this.webkitTextStrokeWidth=Vt(C,tn,O.webkitTextStrokeWidth),this.wordBreak=Vt(C,ce,O.wordBreak),this.zIndex=Vt(C,Se,O.zIndex)}return T.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},T.prototype.isTransparent=function(){return Ei(this.backgroundColor)},T.prototype.isTransformed=function(){return this.transform!==null},T.prototype.isPositioned=function(){return this.position!==0},T.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},T.prototype.isFloating=function(){return this.float!==0},T.prototype.isInlineLevel=function(){return jt(this.display,4)||jt(this.display,33554432)||jt(this.display,268435456)||jt(this.display,536870912)||jt(this.display,67108864)||jt(this.display,134217728)},T})(),ja=(function(){function T(C,O){this.content=Vt(C,Xt,O.content),this.quotes=Vt(C,bs,O.quotes)}return T})(),Yn=(function(){function T(C,O){this.counterIncrement=Vt(C,Et,O.counterIncrement),this.counterReset=Vt(C,Wt,O.counterReset)}return T})(),Vt=function(T,C,O){var R=new wo,Y=O!==null&&typeof O<"u"?O.toString():C.initialValue;R.write(Y);var he=new Zl(R.read());switch(C.type){case 2:var Ee=he.parseComponentValue();return C.parse(T,yr(Ee)?Ee.value:C.initialValue);case 0:return C.parse(T,he.parseComponentValue());case 1:return C.parse(T,he.parseComponentValues());case 4:return he.parseComponentValue();case 3:switch(C.format){case"angle":return Ul.parse(T,he.parseComponentValue());case"color":return Ci.parse(T,he.parseComponentValue());case"image":return Oc.parse(T,he.parseComponentValue());case"length":var Ke=he.parseComponentValue();return So(Ke)?Ke:va;case"length-percentage":var ze=he.parseComponentValue();return Ur(ze)?ze:va;case"time":return Ie.parse(T,he.parseComponentValue())}break}},Us="data-html2canvas-debug",Ua=function(T){var C=T.getAttribute(Us);switch(C){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},In=function(T,C){var O=Ua(T);return O===1||C===O},Un=(function(){function T(C,O){if(this.context=C,this.textNodes=[],this.elements=[],this.flags=0,In(O,3))debugger;this.styles=new fr(C,window.getComputedStyle(O,null)),Du(O)&&(this.styles.animationDuration.some(function(R){return R>0})&&(O.style.animationDuration="0s"),this.styles.transform!==null&&(O.style.transform="none")),this.bounds=h(this.context,O),In(O,4)&&(this.flags|=16)}return T})(),Zr="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xa=typeof Uint8Array>"u"?[]:new Uint8Array(256),ea=0;ea<ri.length;ea++)Xa[ri.charCodeAt(ea)]=ea;for(var ai=function(T){var C=T.length*.75,O=T.length,R,Y=0,he,Ee,Ke,ze;T[T.length-1]==="="&&(C--,T[T.length-2]==="="&&C--);var ht=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(C):new Array(C),wt=Array.isArray(ht)?ht:new Uint8Array(ht);for(R=0;R<O;R+=4)he=Xa[T.charCodeAt(R)],Ee=Xa[T.charCodeAt(R+1)],Ke=Xa[T.charCodeAt(R+2)],ze=Xa[T.charCodeAt(R+3)],wt[Y++]=he<<2|Ee>>4,wt[Y++]=(Ee&15)<<4|Ke>>2,wt[Y++]=(Ke&3)<<6|ze&63;return ht},Ki=function(T){for(var C=T.length,O=[],R=0;R<C;R+=2)O.push(T[R+1]<<8|T[R]);return O},ii=function(T){for(var C=T.length,O=[],R=0;R<C;R+=4)O.push(T[R+3]<<24|T[R+2]<<16|T[R+1]<<8|T[R]);return O},Vn=5,Nr=11,wa=2,kr=Nr-Vn,oi=65536>>Vn,La=1<<Vn,Br=La-1,Ja=1024>>Vn,ta=oi+Ja,li=ta,ci=32,la=li+ci,Rr=65536>>Nr,zi=1<<kr,za=zi-1,jn=function(T,C,O){return T.slice?T.slice(C,O):new Uint16Array(Array.prototype.slice.call(T,C,O))},Tn=function(T,C,O){return T.slice?T.slice(C,O):new Uint32Array(Array.prototype.slice.call(T,C,O))},Dr=function(T,C){var O=ai(T),R=Array.isArray(O)?ii(O):new Uint32Array(O),Y=Array.isArray(O)?Ki(O):new Uint16Array(O),he=24,Ee=jn(Y,he/2,R[4]/2),Ke=R[5]===2?jn(Y,(he+R[4])/2):Tn(R,Math.ceil((he+R[4])/4));return new ro(R[0],R[1],R[2],R[3],Ee,Ke)},ro=(function(){function T(C,O,R,Y,he,Ee){this.initialValue=C,this.errorValue=O,this.highStart=R,this.highValueIndex=Y,this.index=he,this.data=Ee}return T.prototype.get=function(C){var O;if(C>=0){if(C<55296||C>56319&&C<=65535)return O=this.index[C>>Vn],O=(O<<wa)+(C&Br),this.data[O];if(C<=65535)return O=this.index[oi+(C-55296>>Vn)],O=(O<<wa)+(C&Br),this.data[O];if(C<this.highStart)return O=la-Rr+(C>>Nr),O=this.index[O],O+=C>>Vn&za,O=this.index[O],O=(O<<wa)+(C&Br),this.data[O];if(C<=1114111)return this.data[this.highValueIndex]}return this.errorValue},T})(),Ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ji=typeof Uint8Array>"u"?[]:new Uint8Array(256),Da=0;Da<Ao.length;Da++)Ji[Ao.charCodeAt(Da)]=Da;var uc=1,gl=2,ud=3,ca=4,FA=5,Eu=7,qd=8,rl=9,Tu=10,IA=11,RA=12,Wd=13,mi=14,Ea=15,Yd=function(T){for(var C=[],O=0,R=T.length;O<R;){var Y=T.charCodeAt(O++);if(Y>=55296&&Y<=56319&&O<R){var he=T.charCodeAt(O++);(he&64512)===56320?C.push(((Y&1023)<<10)+(he&1023)+65536):(C.push(Y),O--)}else C.push(Y)}return C},hc=function(){for(var T=[],C=0;C<arguments.length;C++)T[C]=arguments[C];if(String.fromCodePoint)return String.fromCodePoint.apply(String,T);var O=T.length;if(!O)return"";for(var R=[],Y=-1,he="";++Y<O;){var Ee=T[Y];Ee<=65535?R.push(Ee):(Ee-=65536,R.push((Ee>>10)+55296,Ee%1024+56320)),(Y+1===O||R.length>16384)&&(he+=String.fromCharCode.apply(String,R),R.length=0)}return he},hd=Dr(Zr),ji="",Oo="",OA=function(T){return hd.get(T)},fd=function(T,C,O){var R=O-2,Y=C[R],he=C[O-1],Ee=C[O];if(he===gl&&Ee===ud)return ji;if(he===gl||he===ud||he===ca||Ee===gl||Ee===ud||Ee===ca)return Oo;if(he===qd&&[qd,rl,IA,RA].indexOf(Ee)!==-1||(he===IA||he===rl)&&(Ee===rl||Ee===Tu)||(he===RA||he===Tu)&&Ee===Tu||Ee===Wd||Ee===FA||Ee===Eu||he===uc)return ji;if(he===Wd&&Ee===mi){for(;Y===FA;)Y=C[--R];if(Y===mi)return ji}if(he===Ea&&Ee===Ea){for(var Ke=0;Y===Ea;)Ke++,Y=C[--R];if(Ke%2===0)return ji}return Oo},UA=function(T){var C=Yd(T),O=C.length,R=0,Y=0,he=C.map(OA);return{next:function(){if(R>=O)return{done:!0,value:null};for(var Ee=ji;R<O&&(Ee=fd(C,he,++R))===ji;);if(Ee!==ji||R===O){var Ke=hc.apply(null,C.slice(Y,R));return Y=R,{value:Ke,done:!1}}return{done:!0,value:null}}}},LA=function(T){for(var C=UA(T),O=[],R;!(R=C.next()).done;)R.value&&O.push(R.value.slice());return O},Ml=function(T){var C=123;if(T.createRange){var O=T.createRange();if(O.getBoundingClientRect){var R=T.createElement("boundtest");R.style.height=C+"px",R.style.display="block",T.body.appendChild(R),O.selectNode(R);var Y=O.getBoundingClientRect(),he=Math.round(Y.height);if(T.body.removeChild(R),he===C)return!0}}return!1},Fu=function(T){var C=T.createElement("boundtest");C.style.width="50px",C.style.display="block",C.style.fontSize="12px",C.style.letterSpacing="0px",C.style.wordSpacing="0px",T.body.appendChild(C);var O=T.createRange();C.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var R=C.firstChild,Y=m(R.data).map(function(ze){return y(ze)}),he=0,Ee={},Ke=Y.every(function(ze,ht){O.setStart(R,he),O.setEnd(R,he+ze.length);var wt=O.getBoundingClientRect();he+=ze.length;var Ct=wt.x>Ee.x||wt.y>Ee.y;return Ee=wt,ht===0?!0:Ct});return T.body.removeChild(C),Ke},Iu=function(){return typeof new Image().crossOrigin<"u"},Oh=function(){return typeof new XMLHttpRequest().responseType=="string"},Ru=function(T){var C=new Image,O=T.createElement("canvas"),R=O.getContext("2d");if(!R)return!1;C.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{R.drawImage(C,0,0),O.toDataURL()}catch{return!1}return!0},Pl=function(T){return T[0]===0&&T[1]===255&&T[2]===0&&T[3]===255},Uh=function(T){var C=T.createElement("canvas"),O=100;C.width=O,C.height=O;var R=C.getContext("2d");if(!R)return Promise.reject(!1);R.fillStyle="rgb(0, 255, 0)",R.fillRect(0,0,O,O);var Y=new Image,he=C.toDataURL();Y.src=he;var Ee=DA(O,O,0,0,Y);return R.fillStyle="red",R.fillRect(0,0,O,O),Ou(Ee).then(function(Ke){R.drawImage(Ke,0,0);var ze=R.getImageData(0,0,O,O).data;R.fillStyle="red",R.fillRect(0,0,O,O);var ht=T.createElement("div");return ht.style.backgroundImage="url("+he+")",ht.style.height=O+"px",Pl(ze)?Ou(DA(O,O,0,0,ht)):Promise.reject(!1)}).then(function(Ke){return R.drawImage(Ke,0,0),Pl(R.getImageData(0,0,O,O).data)}).catch(function(){return!1})},DA=function(T,C,O,R,Y){var he="http://www.w3.org/2000/svg",Ee=document.createElementNS(he,"svg"),Ke=document.createElementNS(he,"foreignObject");return Ee.setAttributeNS(null,"width",T.toString()),Ee.setAttributeNS(null,"height",C.toString()),Ke.setAttributeNS(null,"width","100%"),Ke.setAttributeNS(null,"height","100%"),Ke.setAttributeNS(null,"x",O.toString()),Ke.setAttributeNS(null,"y",R.toString()),Ke.setAttributeNS(null,"externalResourcesRequired","true"),Ee.appendChild(Ke),Ke.appendChild(Y),Ee},Ou=function(T){return new Promise(function(C,O){var R=new Image;R.onload=function(){return C(R)},R.onerror=O,R.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(T))})},gi={get SUPPORT_RANGE_BOUNDS(){var T=Ml(document);return Object.defineProperty(gi,"SUPPORT_RANGE_BOUNDS",{value:T}),T},get SUPPORT_WORD_BREAKING(){var T=gi.SUPPORT_RANGE_BOUNDS&&Fu(document);return Object.defineProperty(gi,"SUPPORT_WORD_BREAKING",{value:T}),T},get SUPPORT_SVG_DRAWING(){var T=Ru(document);return Object.defineProperty(gi,"SUPPORT_SVG_DRAWING",{value:T}),T},get SUPPORT_FOREIGNOBJECT_DRAWING(){var T=typeof Array.from=="function"&&typeof window.fetch=="function"?Uh(document):Promise.resolve(!1);return Object.defineProperty(gi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:T}),T},get SUPPORT_CORS_IMAGES(){var T=Iu();return Object.defineProperty(gi,"SUPPORT_CORS_IMAGES",{value:T}),T},get SUPPORT_RESPONSE_TYPE(){var T=Oh();return Object.defineProperty(gi,"SUPPORT_RESPONSE_TYPE",{value:T}),T},get SUPPORT_CORS_XHR(){var T="withCredentials"in new XMLHttpRequest;return Object.defineProperty(gi,"SUPPORT_CORS_XHR",{value:T}),T},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var T=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(gi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:T}),T}},pd=(function(){function T(C,O){this.text=C,this.bounds=O}return T})(),Qc=function(T,C,O,R){var Y=Hl(C,O),he=[],Ee=0;return Y.forEach(function(Ke){if(O.textDecorationLine.length||Ke.trim().length>0)if(gi.SUPPORT_RANGE_BOUNDS){var ze=md(R,Ee,Ke.length).getClientRects();if(ze.length>1){var ht=Uo(Ke),wt=0;ht.forEach(function(Jt){he.push(new pd(Jt,d.fromDOMRectList(T,md(R,wt+Ee,Jt.length).getClientRects()))),wt+=Jt.length})}else he.push(new pd(Ke,d.fromDOMRectList(T,ze)))}else{var Ct=R.splitText(Ke.length);he.push(new pd(Ke,QA(T,R))),R=Ct}else gi.SUPPORT_RANGE_BOUNDS||(R=R.splitText(Ke.length));Ee+=Ke.length}),he},QA=function(T,C){var O=C.ownerDocument;if(O){var R=O.createElement("html2canvaswrapper");R.appendChild(C.cloneNode(!0));var Y=C.parentNode;if(Y){Y.replaceChild(R,C);var he=h(T,R);return R.firstChild&&Y.replaceChild(R.firstChild,R),he}}return d.EMPTY},md=function(T,C,O){var R=T.ownerDocument;if(!R)throw new Error("Node has no owner document");var Y=R.createRange();return Y.setStart(T,C),Y.setEnd(T,C+O),Y},Uo=function(T){if(gi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var C=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(C.segment(T)).map(function(O){return O.segment})}return LA(T)},kl=function(T,C){if(gi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var O=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(O.segment(T)).map(function(R){return R.segment})}return MA(T,C)},Hl=function(T,C){return C.letterSpacing!==0?Uo(T):kl(T,C)},_A=[32,160,4961,65792,65793,4153,4241],MA=function(T,C){for(var O=mn(T,{lineBreak:C.lineBreak,wordBreak:C.overflowWrap==="break-word"?"break-word":C.wordBreak}),R=[],Y,he=function(){if(Y.value){var Ee=Y.value.slice(),Ke=m(Ee),ze="";Ke.forEach(function(ht){_A.indexOf(ht)===-1?ze+=y(ht):(ze.length&&R.push(ze),R.push(y(ht)),ze="")}),ze.length&&R.push(ze)}};!(Y=O.next()).done;)he();return R},_c=(function(){function T(C,O,R){this.text=Lh(O.data,R.textTransform),this.textBounds=Qc(C,this.text,R,O)}return T})(),Lh=function(T,C){switch(C){case 1:return T.toLowerCase();case 3:return T.replace(gd,yd);case 2:return T.toUpperCase();default:return T}},gd=/(^|\s|:|-|\(|\))([a-z])/g,yd=function(T,C,O){return T.length>0?C+O.toUpperCase():T},qf=(function(T){r(C,T);function C(O,R){var Y=T.call(this,O,R)||this;return Y.src=R.currentSrc||R.src,Y.intrinsicWidth=R.naturalWidth,Y.intrinsicHeight=R.naturalHeight,Y.context.cache.addImage(Y.src),Y}return C})(Un),Dh=(function(T){r(C,T);function C(O,R){var Y=T.call(this,O,R)||this;return Y.canvas=R,Y.intrinsicWidth=R.width,Y.intrinsicHeight=R.height,Y}return C})(Un),Dm=(function(T){r(C,T);function C(O,R){var Y=T.call(this,O,R)||this,he=new XMLSerializer,Ee=h(O,R);return R.setAttribute("width",Ee.width+"px"),R.setAttribute("height",Ee.height+"px"),Y.svg="data:image/svg+xml,"+encodeURIComponent(he.serializeToString(R)),Y.intrinsicWidth=R.width.baseVal.value,Y.intrinsicHeight=R.height.baseVal.value,Y.context.cache.addImage(Y.svg),Y}return C})(Un),Wf=(function(T){r(C,T);function C(O,R){var Y=T.call(this,O,R)||this;return Y.value=R.value,Y}return C})(Un),Qh=(function(T){r(C,T);function C(O,R){var Y=T.call(this,O,R)||this;return Y.start=R.start,Y.reversed=typeof R.reversed=="boolean"&&R.reversed===!0,Y}return C})(Un),Qm=[{type:15,flags:0,unit:"px",number:3}],_m=[{type:16,flags:0,number:50}],Mm=function(T){return T.width>T.height?new d(T.left+(T.width-T.height)/2,T.top,T.height,T.height):T.width<T.height?new d(T.left,T.top+(T.height-T.width)/2,T.width,T.width):T},Yf=function(T){var C=T.type===Xf?new Array(T.value.length+1).join(""):T.value;return C.length===0?T.placeholder||"":C},Uu="checkbox",Lu="radio",Xf="password",Jf=707406591,_h=(function(T){r(C,T);function C(O,R){var Y=T.call(this,O,R)||this;switch(Y.type=R.type.toLowerCase(),Y.checked=R.checked,Y.value=Yf(R),(Y.type===Uu||Y.type===Lu)&&(Y.styles.backgroundColor=3739148031,Y.styles.borderTopColor=Y.styles.borderRightColor=Y.styles.borderBottomColor=Y.styles.borderLeftColor=2779096575,Y.styles.borderTopWidth=Y.styles.borderRightWidth=Y.styles.borderBottomWidth=Y.styles.borderLeftWidth=1,Y.styles.borderTopStyle=Y.styles.borderRightStyle=Y.styles.borderBottomStyle=Y.styles.borderLeftStyle=1,Y.styles.backgroundClip=[0],Y.styles.backgroundOrigin=[0],Y.bounds=Mm(Y.bounds)),Y.type){case Uu:Y.styles.borderTopRightRadius=Y.styles.borderTopLeftRadius=Y.styles.borderBottomRightRadius=Y.styles.borderBottomLeftRadius=Qm;break;case Lu:Y.styles.borderTopRightRadius=Y.styles.borderTopLeftRadius=Y.styles.borderBottomRightRadius=Y.styles.borderBottomLeftRadius=_m;break}return Y}return C})(Un),Pm=(function(T){r(C,T);function C(O,R){var Y=T.call(this,O,R)||this,he=R.options[R.selectedIndex||0];return Y.value=he&&he.text||"",Y}return C})(Un),Mh=(function(T){r(C,T);function C(O,R){var Y=T.call(this,O,R)||this;return Y.value=R.value,Y}return C})(Un),Zf=(function(T){r(C,T);function C(O,R){var Y=T.call(this,O,R)||this;Y.src=R.src,Y.width=parseInt(R.width,10)||0,Y.height=parseInt(R.height,10)||0,Y.backgroundColor=Y.styles.backgroundColor;try{if(R.contentWindow&&R.contentWindow.document&&R.contentWindow.document.documentElement){Y.tree=tp(O,R.contentWindow.document.documentElement);var he=R.contentWindow.document.documentElement?tl(O,getComputedStyle(R.contentWindow.document.documentElement).backgroundColor):Wa.TRANSPARENT,Ee=R.contentWindow.document.body?tl(O,getComputedStyle(R.contentWindow.document.body).backgroundColor):Wa.TRANSPARENT;Y.backgroundColor=Ei(he)?Ei(Ee)?Y.styles.backgroundColor:Ee:he}}catch{}return Y}return C})(Un),km=["OL","UL","MENU"],PA=function(T,C,O,R){for(var Y=C.firstChild,he=void 0;Y;Y=he)if(he=Y.nextSibling,sp(Y)&&Y.data.trim().length>0)O.textNodes.push(new _c(T,Y,O.styles));else if(fc(Y))if(Pu(Y)&&Y.assignedNodes)Y.assignedNodes().forEach(function(Ke){return PA(T,Ke,O,R)});else{var Ee=ep(T,Y);Ee.styles.isVisible()&&(Px(Y,Ee,R)?Ee.flags|=4:kx(Ee.styles)&&(Ee.flags|=2),km.indexOf(Y.tagName)!==-1&&(Ee.flags|=8),O.elements.push(Ee),Y.slot,Y.shadowRoot?PA(T,Y.shadowRoot,Ee,R):!_u(Y)&&!Ph(Y)&&!Mu(Y)&&PA(T,Y,Ee,R))}},ep=function(T,C){return zh(C)?new qf(T,C):Hh(C)?new Dh(T,C):Ph(C)?new Dm(T,C):Hm(C)?new Wf(T,C):Km(C)?new Qh(T,C):Qu(C)?new _h(T,C):Mu(C)?new Pm(T,C):_u(C)?new Mh(T,C):np(C)?new Zf(T,C):new Un(T,C)},tp=function(T,C){var O=ep(T,C);return O.flags|=4,PA(T,C,O,O),O},Px=function(T,C,O){return C.styles.isPositionedWithZIndex()||C.styles.opacity<1||C.styles.isTransformed()||kh(T)&&O.styles.isTransparent()},kx=function(T){return T.isPositioned()||T.isFloating()},sp=function(T){return T.nodeType===Node.TEXT_NODE},fc=function(T){return T.nodeType===Node.ELEMENT_NODE},Du=function(T){return fc(T)&&typeof T.style<"u"&&!Xd(T)},Xd=function(T){return typeof T.className=="object"},Hm=function(T){return T.tagName==="LI"},Km=function(T){return T.tagName==="OL"},Qu=function(T){return T.tagName==="INPUT"},zm=function(T){return T.tagName==="HTML"},Ph=function(T){return T.tagName==="svg"},kh=function(T){return T.tagName==="BODY"},Hh=function(T){return T.tagName==="CANVAS"},Kh=function(T){return T.tagName==="VIDEO"},zh=function(T){return T.tagName==="IMG"},np=function(T){return T.tagName==="IFRAME"},xd=function(T){return T.tagName==="STYLE"},Vm=function(T){return T.tagName==="SCRIPT"},_u=function(T){return T.tagName==="TEXTAREA"},Mu=function(T){return T.tagName==="SELECT"},Pu=function(T){return T.tagName==="SLOT"},rp=function(T){return T.tagName.indexOf("-")>0},ap=(function(){function T(){this.counters={}}return T.prototype.getCounterValue=function(C){var O=this.counters[C];return O&&O.length?O[O.length-1]:1},T.prototype.getCounterValues=function(C){var O=this.counters[C];return O||[]},T.prototype.pop=function(C){var O=this;C.forEach(function(R){return O.counters[R].pop()})},T.prototype.parse=function(C){var O=this,R=C.counterIncrement,Y=C.counterReset,he=!0;R!==null&&R.forEach(function(Ke){var ze=O.counters[Ke.counter];ze&&Ke.increment!==0&&(he=!1,ze.length||ze.push(1),ze[Math.max(0,ze.length-1)]+=Ke.increment)});var Ee=[];return he&&Y.forEach(function(Ke){var ze=O.counters[Ke.counter];Ee.push(Ke.counter),ze||(ze=O.counters[Ke.counter]=[]),ze.push(Ke.reset)}),Ee},T})(),ip={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},op={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Hx={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},lp={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Qa=function(T,C,O,R,Y,he){return T<C||T>O?HA(T,Y,he.length>0):R.integers.reduce(function(Ee,Ke,ze){for(;T>=Ke;)T-=Ke,Ee+=R.values[ze];return Ee},"")+he},Vi=function(T,C,O,R){var Y="";do O||T--,Y=R(T)+Y,T/=C;while(T*C>=C);return Y},di=function(T,C,O,R,Y){var he=O-C+1;return(T<0?"-":"")+(Vi(Math.abs(T),he,R,function(Ee){return y(Math.floor(Ee%he)+C)})+Y)},vd=function(T,C,O){O===void 0&&(O=". ");var R=C.length;return Vi(Math.abs(T),R,!1,function(Y){return C[Math.floor(Y%R)]})+O},Jd=1,Mc=2,yl=4,kA=8,xl=function(T,C,O,R,Y,he){if(T<-9999||T>9999)return HA(T,4,Y.length>0);var Ee=Math.abs(T),Ke=Y;if(Ee===0)return C[0]+Ke;for(var ze=0;Ee>0&&ze<=4;ze++){var ht=Ee%10;ht===0&&jt(he,Jd)&&Ke!==""?Ke=C[ht]+Ke:ht>1||ht===1&&ze===0||ht===1&&ze===1&&jt(he,Mc)||ht===1&&ze===1&&jt(he,yl)&&T>100||ht===1&&ze>1&&jt(he,kA)?Ke=C[ht]+(ze>0?O[ze-1]:"")+Ke:ht===1&&ze>0&&(Ke=O[ze-1]+Ke),Ee=Math.floor(Ee/10)}return(T<0?R:"")+Ke},cp="",$m="",ku="",Hu="",HA=function(T,C,O){var R=O?". ":"",Y=O?"":"",he=O?", ":"",Ee=O?" ":"";switch(C){case 0:return""+Ee;case 1:return""+Ee;case 2:return""+Ee;case 5:var Ke=di(T,48,57,!0,R);return Ke.length<4?"0"+Ke:Ke;case 4:return vd(T,"",Y);case 6:return Qa(T,1,3999,ip,3,R).toLowerCase();case 7:return Qa(T,1,3999,ip,3,R);case 8:return di(T,945,969,!1,R);case 9:return di(T,97,122,!1,R);case 10:return di(T,65,90,!1,R);case 11:return di(T,1632,1641,!0,R);case 12:case 49:return Qa(T,1,9999,op,3,R);case 35:return Qa(T,1,9999,op,3,R).toLowerCase();case 13:return di(T,2534,2543,!0,R);case 14:case 30:return di(T,6112,6121,!0,R);case 15:return vd(T,"",Y);case 16:return vd(T,"",Y);case 17:case 48:return xl(T,"",cp,"",Y,Mc|yl|kA);case 47:return xl(T,"",$m,"",Y,Jd|Mc|yl|kA);case 42:return xl(T,"",cp,"",Y,Mc|yl|kA);case 41:return xl(T,"",$m,"",Y,Jd|Mc|yl|kA);case 26:return xl(T,"","",ku,Y,0);case 25:return xl(T,"","",ku,Y,Jd|Mc|yl);case 31:return xl(T,"","",Hu,he,Jd|Mc|yl);case 33:return xl(T,"","",Hu,he,0);case 32:return xl(T,"","",Hu,he,Jd|Mc|yl);case 18:return di(T,2406,2415,!0,R);case 20:return Qa(T,1,19999,lp,3,R);case 21:return di(T,2790,2799,!0,R);case 22:return di(T,2662,2671,!0,R);case 22:return Qa(T,1,10999,Hx,3,R);case 23:return vd(T,"");case 24:return vd(T,"");case 27:return di(T,3302,3311,!0,R);case 28:return vd(T,"",Y);case 29:return vd(T,"",Y);case 34:return di(T,3792,3801,!0,R);case 37:return di(T,6160,6169,!0,R);case 38:return di(T,4160,4169,!0,R);case 39:return di(T,2918,2927,!0,R);case 40:return di(T,1776,1785,!0,R);case 43:return di(T,3046,3055,!0,R);case 44:return di(T,3174,3183,!0,R);case 45:return di(T,3664,3673,!0,R);case 46:return di(T,3872,3881,!0,R);case 3:default:return di(T,48,57,!0,R)}},dp="data-html2canvas-ignore",Ap=(function(){function T(C,O,R){if(this.context=C,this.options=R,this.scrolledElements=[],this.referenceElement=O,this.counters=new ap,this.quoteDepth=0,!O.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(O.ownerDocument.documentElement,!1)}return T.prototype.toIFrame=function(C,O){var R=this,Y=up(C,O);if(!Y.contentWindow)return Promise.reject("Unable to find iframe window");var he=C.defaultView.pageXOffset,Ee=C.defaultView.pageYOffset,Ke=Y.contentWindow,ze=Ke.document,ht=fp(Y).then(function(){return c(R,void 0,void 0,function(){var wt,Ct;return A(this,function(Jt){switch(Jt.label){case 0:return this.scrolledElements.forEach(Wm),Ke&&(Ke.scrollTo(O.left,O.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(Ke.scrollY!==O.top||Ke.scrollX!==O.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(Ke.scrollX-O.left,Ke.scrollY-O.top,0,0))),wt=this.options.onclone,Ct=this.clonedReferenceElement,typeof Ct>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:ze.fonts&&ze.fonts.ready?[4,ze.fonts.ready]:[3,2];case 1:Jt.sent(),Jt.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Gm(ze)]:[3,4];case 3:Jt.sent(),Jt.label=4;case 4:return typeof wt=="function"?[2,Promise.resolve().then(function(){return wt(ze,Ct)}).then(function(){return Y})]:[2,Y]}})})});return ze.open(),ze.write(qm(document.doctype)+"<html></html>"),pp(this.referenceElement.ownerDocument,he,Ee),ze.replaceChild(ze.adoptNode(this.documentElement),ze.documentElement),ze.close(),ht},T.prototype.createElementClone=function(C){if(In(C,2))debugger;if(Hh(C))return this.createCanvasClone(C);if(Kh(C))return this.createVideoClone(C);if(xd(C))return this.createStyleClone(C);var O=C.cloneNode(!1);return zh(O)&&(zh(C)&&C.currentSrc&&C.currentSrc!==C.src&&(O.src=C.currentSrc,O.srcset=""),O.loading==="lazy"&&(O.loading="eager")),rp(O)?this.createCustomElementClone(O):O},T.prototype.createCustomElementClone=function(C){var O=document.createElement("html2canvascustomelement");return Ku(C.style,O),O},T.prototype.createStyleClone=function(C){try{var O=C.sheet;if(O&&O.cssRules){var R=[].slice.call(O.cssRules,0).reduce(function(he,Ee){return Ee&&typeof Ee.cssText=="string"?he+Ee.cssText:he},""),Y=C.cloneNode(!1);return Y.textContent=R,Y}}catch(he){if(this.context.logger.error("Unable to access cssRules property",he),he.name!=="SecurityError")throw he}return C.cloneNode(!1)},T.prototype.createCanvasClone=function(C){var O;if(this.options.inlineImages&&C.ownerDocument){var R=C.ownerDocument.createElement("img");try{return R.src=C.toDataURL(),R}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",C)}}var Y=C.cloneNode(!1);try{Y.width=C.width,Y.height=C.height;var he=C.getContext("2d"),Ee=Y.getContext("2d");if(Ee)if(!this.options.allowTaint&&he)Ee.putImageData(he.getImageData(0,0,C.width,C.height),0,0);else{var Ke=(O=C.getContext("webgl2"))!==null&&O!==void 0?O:C.getContext("webgl");if(Ke){var ze=Ke.getContextAttributes();ze?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",C)}Ee.drawImage(C,0,0)}return Y}catch{this.context.logger.info("Unable to clone canvas as it is tainted",C)}return Y},T.prototype.createVideoClone=function(C){var O=C.ownerDocument.createElement("canvas");O.width=C.offsetWidth,O.height=C.offsetHeight;var R=O.getContext("2d");try{return R&&(R.drawImage(C,0,0,O.width,O.height),this.options.allowTaint||R.getImageData(0,0,O.width,O.height)),O}catch{this.context.logger.info("Unable to clone video as it is tainted",C)}var Y=C.ownerDocument.createElement("canvas");return Y.width=C.offsetWidth,Y.height=C.offsetHeight,Y},T.prototype.appendChildNode=function(C,O,R){(!fc(O)||!Vm(O)&&!O.hasAttribute(dp)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(O)))&&(!this.options.copyStyles||!fc(O)||!xd(O))&&C.appendChild(this.cloneNode(O,R))},T.prototype.cloneChildNodes=function(C,O,R){for(var Y=this,he=C.shadowRoot?C.shadowRoot.firstChild:C.firstChild;he;he=he.nextSibling)if(fc(he)&&Pu(he)&&typeof he.assignedNodes=="function"){var Ee=he.assignedNodes();Ee.length&&Ee.forEach(function(Ke){return Y.appendChildNode(O,Ke,R)})}else this.appendChildNode(O,he,R)},T.prototype.cloneNode=function(C,O){if(sp(C))return document.createTextNode(C.data);if(!C.ownerDocument)return C.cloneNode(!1);var R=C.ownerDocument.defaultView;if(R&&fc(C)&&(Du(C)||Xd(C))){var Y=this.createElementClone(C);Y.style.transitionProperty="none";var he=R.getComputedStyle(C),Ee=R.getComputedStyle(C,":before"),Ke=R.getComputedStyle(C,":after");this.referenceElement===C&&Du(Y)&&(this.clonedReferenceElement=Y),kh(Y)&&yp(Y);var ze=this.counters.parse(new Yn(this.context,he)),ht=this.resolvePseudoContent(C,Y,Ee,Zd.BEFORE);rp(C)&&(O=!0),Kh(C)||this.cloneChildNodes(C,Y,O),ht&&Y.insertBefore(ht,Y.firstChild);var wt=this.resolvePseudoContent(C,Y,Ke,Zd.AFTER);return wt&&Y.appendChild(wt),this.counters.pop(ze),(he&&(this.options.copyStyles||Xd(C))&&!np(C)||O)&&Ku(he,Y),(C.scrollTop!==0||C.scrollLeft!==0)&&this.scrolledElements.push([Y,C.scrollLeft,C.scrollTop]),(_u(C)||Mu(C))&&(_u(Y)||Mu(Y))&&(Y.value=C.value),Y}return C.cloneNode(!1)},T.prototype.resolvePseudoContent=function(C,O,R,Y){var he=this;if(R){var Ee=R.content,Ke=O.ownerDocument;if(!(!Ke||!Ee||Ee==="none"||Ee==="-moz-alt-content"||R.display==="none")){this.counters.parse(new Yn(this.context,R));var ze=new ja(this.context,R),ht=Ke.createElement("html2canvaspseudoelement");Ku(R,ht),ze.content.forEach(function(Ct){if(Ct.type===0)ht.appendChild(Ke.createTextNode(Ct.value));else if(Ct.type===22){var Jt=Ke.createElement("img");Jt.src=Ct.value,Jt.style.opacity="1",ht.appendChild(Jt)}else if(Ct.type===18){if(Ct.name==="attr"){var $s=Ct.values.filter(yr);$s.length&&ht.appendChild(Ke.createTextNode(C.getAttribute($s[0].value)||""))}else if(Ct.name==="counter"){var Fs=Ct.values.filter(ni),_s=Fs[0],fn=Fs[1];if(_s&&yr(_s)){var Js=he.counters.getCounterValue(_s.value),Xs=fn&&yr(fn)?$d.parse(he.context,fn.value):3;ht.appendChild(Ke.createTextNode(HA(Js,Xs,!1)))}}else if(Ct.name==="counters"){var dr=Ct.values.filter(ni),_s=dr[0],ar=dr[1],fn=dr[2];if(_s&&yr(_s)){var Mn=he.counters.getCounterValues(_s.value),qs=fn&&yr(fn)?$d.parse(he.context,fn.value):3,pr=ar&&ar.type===0?ar.value:"",Er=Mn.map(function(Na){return HA(Na,qs,!1)}).join(pr);ht.appendChild(Ke.createTextNode(Er))}}}else if(Ct.type===20)switch(Ct.value){case"open-quote":ht.appendChild(Ke.createTextNode(cs(ze.quotes,he.quoteDepth++,!0)));break;case"close-quote":ht.appendChild(Ke.createTextNode(cs(ze.quotes,--he.quoteDepth,!1)));break;default:ht.appendChild(Ke.createTextNode(Ct.value))}}),ht.className=gp+" "+$h;var wt=Y===Zd.BEFORE?" "+gp:" "+$h;return Xd(O)?O.className.baseValue+=wt:O.className+=wt,ht}}},T.destroy=function(C){return C.parentNode?(C.parentNode.removeChild(C),!0):!1},T})(),Zd;(function(T){T[T.BEFORE=0]="BEFORE",T[T.AFTER=1]="AFTER"})(Zd||(Zd={}));var up=function(T,C){var O=T.createElement("iframe");return O.className="html2canvas-container",O.style.visibility="hidden",O.style.position="fixed",O.style.left="-10000px",O.style.top="0px",O.style.border="0",O.width=C.width.toString(),O.height=C.height.toString(),O.scrolling="no",O.setAttribute(dp,"true"),T.body.appendChild(O),O},hp=function(T){return new Promise(function(C){if(T.complete){C();return}if(!T.src){C();return}T.onload=C,T.onerror=C})},Gm=function(T){return Promise.all([].slice.call(T.images,0).map(hp))},fp=function(T){return new Promise(function(C,O){var R=T.contentWindow;if(!R)return O("No window assigned for iframe");var Y=R.document;R.onload=T.onload=function(){R.onload=T.onload=null;var he=setInterval(function(){Y.body.childNodes.length>0&&Y.readyState==="complete"&&(clearInterval(he),C(T))},50)}})},Vh=["all","d","content"],Ku=function(T,C){for(var O=T.length-1;O>=0;O--){var R=T.item(O);Vh.indexOf(R)===-1&&C.style.setProperty(R,T.getPropertyValue(R))}return C},qm=function(T){var C="";return T&&(C+="<!DOCTYPE ",T.name&&(C+=T.name),T.internalSubset&&(C+=T.internalSubset),T.publicId&&(C+='"'+T.publicId+'"'),T.systemId&&(C+='"'+T.systemId+'"'),C+=">"),C},pp=function(T,C,O){T&&T.defaultView&&(C!==T.defaultView.pageXOffset||O!==T.defaultView.pageYOffset)&&T.defaultView.scrollTo(C,O)},Wm=function(T){var C=T[0],O=T[1],R=T[2];C.scrollLeft=O,C.scrollTop=R},Pc=":before",mp=":after",gp="___html2canvas___pseudoelement_before",$h="___html2canvas___pseudoelement_after",pc=`{
    content: "" !important;
    display: none !important;
}`,yp=function(T){Ym(T,"."+gp+Pc+pc+`
         .`+$h+mp+pc)},Ym=function(T,C){var O=T.ownerDocument;if(O){var R=O.createElement("style");R.textContent=C,T.appendChild(R)}},zu=(function(){function T(){}return T.getOrigin=function(C){var O=T._link;return O?(O.href=C,O.href=O.href,O.protocol+O.hostname+O.port):"about:blank"},T.isSameOrigin=function(C){return T.getOrigin(C)===T._origin},T.setContext=function(C){T._link=C.document.createElement("a"),T._origin=T.getOrigin(C.location.href)},T._origin="about:blank",T})(),Vu=(function(){function T(C,O){this.context=C,this._options=O,this._cache={}}return T.prototype.addImage=function(C){var O=Promise.resolve();return this.has(C)||(Gh(C)||Xm(C))&&(this._cache[C]=this.loadImage(C)).catch(function(){}),O},T.prototype.match=function(C){return this._cache[C]},T.prototype.loadImage=function(C){return c(this,void 0,void 0,function(){var O,R,Y,he,Ee=this;return A(this,function(Ke){switch(Ke.label){case 0:return O=zu.isSameOrigin(C),R=!eA(C)&&this._options.useCORS===!0&&gi.SUPPORT_CORS_IMAGES&&!O,Y=!eA(C)&&!O&&!Gh(C)&&typeof this._options.proxy=="string"&&gi.SUPPORT_CORS_XHR&&!R,!O&&this._options.allowTaint===!1&&!eA(C)&&!Gh(C)&&!Y&&!R?[2]:(he=C,Y?[4,this.proxy(he)]:[3,2]);case 1:he=Ke.sent(),Ke.label=2;case 2:return this.context.logger.debug("Added image "+C.substring(0,256)),[4,new Promise(function(ze,ht){var wt=new Image;wt.onload=function(){return ze(wt)},wt.onerror=ht,(bd(he)||R)&&(wt.crossOrigin="anonymous"),wt.src=he,wt.complete===!0&&setTimeout(function(){return ze(wt)},500),Ee._options.imageTimeout>0&&setTimeout(function(){return ht("Timed out ("+Ee._options.imageTimeout+"ms) loading image")},Ee._options.imageTimeout)})];case 3:return[2,Ke.sent()]}})})},T.prototype.has=function(C){return typeof this._cache[C]<"u"},T.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},T.prototype.proxy=function(C){var O=this,R=this._options.proxy;if(!R)throw new Error("No proxy defined");var Y=C.substring(0,256);return new Promise(function(he,Ee){var Ke=gi.SUPPORT_RESPONSE_TYPE?"blob":"text",ze=new XMLHttpRequest;ze.onload=function(){if(ze.status===200)if(Ke==="text")he(ze.response);else{var Ct=new FileReader;Ct.addEventListener("load",function(){return he(Ct.result)},!1),Ct.addEventListener("error",function(Jt){return Ee(Jt)},!1),Ct.readAsDataURL(ze.response)}else Ee("Failed to proxy resource "+Y+" with status code "+ze.status)},ze.onerror=Ee;var ht=R.indexOf("?")>-1?"&":"?";if(ze.open("GET",""+R+ht+"url="+encodeURIComponent(C)+"&responseType="+Ke),Ke!=="text"&&ze instanceof XMLHttpRequest&&(ze.responseType=Ke),O._options.imageTimeout){var wt=O._options.imageTimeout;ze.timeout=wt,ze.ontimeout=function(){return Ee("Timed out ("+wt+"ms) proxying "+Y)}}ze.send()})},T})(),_a=/^data:image\/svg\+xml/i,Kx=/^data:image\/.*;base64,/i,zx=/^data:image\/.*/i,Xm=function(T){return gi.SUPPORT_SVG_DRAWING||!Jm(T)},eA=function(T){return zx.test(T)},bd=function(T){return Kx.test(T)},Gh=function(T){return T.substr(0,4)==="blob"},Jm=function(T){return T.substr(-3).toLowerCase()==="svg"||_a.test(T)},zs=(function(){function T(C,O){this.type=0,this.x=C,this.y=O}return T.prototype.add=function(C,O){return new T(this.x+C,this.y+O)},T})(),uo=function(T,C,O){return new zs(T.x+(C.x-T.x)*O,T.y+(C.y-T.y)*O)},$u=(function(){function T(C,O,R,Y){this.type=1,this.start=C,this.startControl=O,this.endControl=R,this.end=Y}return T.prototype.subdivide=function(C,O){var R=uo(this.start,this.startControl,C),Y=uo(this.startControl,this.endControl,C),he=uo(this.endControl,this.end,C),Ee=uo(R,Y,C),Ke=uo(Y,he,C),ze=uo(Ee,Ke,C);return O?new T(this.start,R,Ee,ze):new T(ze,Ke,he,this.end)},T.prototype.add=function(C,O){return new T(this.start.add(C,O),this.startControl.add(C,O),this.endControl.add(C,O),this.end.add(C,O))},T.prototype.reverse=function(){return new T(this.end,this.endControl,this.startControl,this.start)},T})(),Lo=function(T){return T.type===1},Zm=(function(){function T(C){var O=C.styles,R=C.bounds,Y=Bo(O.borderTopLeftRadius,R.width,R.height),he=Y[0],Ee=Y[1],Ke=Bo(O.borderTopRightRadius,R.width,R.height),ze=Ke[0],ht=Ke[1],wt=Bo(O.borderBottomRightRadius,R.width,R.height),Ct=wt[0],Jt=wt[1],$s=Bo(O.borderBottomLeftRadius,R.width,R.height),Fs=$s[0],_s=$s[1],fn=[];fn.push((he+ze)/R.width),fn.push((Fs+Ct)/R.width),fn.push((Ee+_s)/R.height),fn.push((ht+Jt)/R.height);var Js=Math.max.apply(Math,fn);Js>1&&(he/=Js,Ee/=Js,ze/=Js,ht/=Js,Ct/=Js,Jt/=Js,Fs/=Js,_s/=Js);var Xs=R.width-ze,dr=R.height-Jt,ar=R.width-Ct,Mn=R.height-_s,qs=O.borderTopWidth,pr=O.borderRightWidth,Er=O.borderBottomWidth,vn=O.borderLeftWidth,yi=lr(O.paddingTop,C.bounds.width),Na=lr(O.paddingRight,C.bounds.width),_o=lr(O.paddingBottom,C.bounds.width),Aa=lr(O.paddingLeft,C.bounds.width);this.topLeftBorderDoubleOuterBox=he>0||Ee>0?Ta(R.left+vn/3,R.top+qs/3,he-vn/3,Ee-qs/3,qr.TOP_LEFT):new zs(R.left+vn/3,R.top+qs/3),this.topRightBorderDoubleOuterBox=he>0||Ee>0?Ta(R.left+Xs,R.top+qs/3,ze-pr/3,ht-qs/3,qr.TOP_RIGHT):new zs(R.left+R.width-pr/3,R.top+qs/3),this.bottomRightBorderDoubleOuterBox=Ct>0||Jt>0?Ta(R.left+ar,R.top+dr,Ct-pr/3,Jt-Er/3,qr.BOTTOM_RIGHT):new zs(R.left+R.width-pr/3,R.top+R.height-Er/3),this.bottomLeftBorderDoubleOuterBox=Fs>0||_s>0?Ta(R.left+vn/3,R.top+Mn,Fs-vn/3,_s-Er/3,qr.BOTTOM_LEFT):new zs(R.left+vn/3,R.top+R.height-Er/3),this.topLeftBorderDoubleInnerBox=he>0||Ee>0?Ta(R.left+vn*2/3,R.top+qs*2/3,he-vn*2/3,Ee-qs*2/3,qr.TOP_LEFT):new zs(R.left+vn*2/3,R.top+qs*2/3),this.topRightBorderDoubleInnerBox=he>0||Ee>0?Ta(R.left+Xs,R.top+qs*2/3,ze-pr*2/3,ht-qs*2/3,qr.TOP_RIGHT):new zs(R.left+R.width-pr*2/3,R.top+qs*2/3),this.bottomRightBorderDoubleInnerBox=Ct>0||Jt>0?Ta(R.left+ar,R.top+dr,Ct-pr*2/3,Jt-Er*2/3,qr.BOTTOM_RIGHT):new zs(R.left+R.width-pr*2/3,R.top+R.height-Er*2/3),this.bottomLeftBorderDoubleInnerBox=Fs>0||_s>0?Ta(R.left+vn*2/3,R.top+Mn,Fs-vn*2/3,_s-Er*2/3,qr.BOTTOM_LEFT):new zs(R.left+vn*2/3,R.top+R.height-Er*2/3),this.topLeftBorderStroke=he>0||Ee>0?Ta(R.left+vn/2,R.top+qs/2,he-vn/2,Ee-qs/2,qr.TOP_LEFT):new zs(R.left+vn/2,R.top+qs/2),this.topRightBorderStroke=he>0||Ee>0?Ta(R.left+Xs,R.top+qs/2,ze-pr/2,ht-qs/2,qr.TOP_RIGHT):new zs(R.left+R.width-pr/2,R.top+qs/2),this.bottomRightBorderStroke=Ct>0||Jt>0?Ta(R.left+ar,R.top+dr,Ct-pr/2,Jt-Er/2,qr.BOTTOM_RIGHT):new zs(R.left+R.width-pr/2,R.top+R.height-Er/2),this.bottomLeftBorderStroke=Fs>0||_s>0?Ta(R.left+vn/2,R.top+Mn,Fs-vn/2,_s-Er/2,qr.BOTTOM_LEFT):new zs(R.left+vn/2,R.top+R.height-Er/2),this.topLeftBorderBox=he>0||Ee>0?Ta(R.left,R.top,he,Ee,qr.TOP_LEFT):new zs(R.left,R.top),this.topRightBorderBox=ze>0||ht>0?Ta(R.left+Xs,R.top,ze,ht,qr.TOP_RIGHT):new zs(R.left+R.width,R.top),this.bottomRightBorderBox=Ct>0||Jt>0?Ta(R.left+ar,R.top+dr,Ct,Jt,qr.BOTTOM_RIGHT):new zs(R.left+R.width,R.top+R.height),this.bottomLeftBorderBox=Fs>0||_s>0?Ta(R.left,R.top+Mn,Fs,_s,qr.BOTTOM_LEFT):new zs(R.left,R.top+R.height),this.topLeftPaddingBox=he>0||Ee>0?Ta(R.left+vn,R.top+qs,Math.max(0,he-vn),Math.max(0,Ee-qs),qr.TOP_LEFT):new zs(R.left+vn,R.top+qs),this.topRightPaddingBox=ze>0||ht>0?Ta(R.left+Math.min(Xs,R.width-pr),R.top+qs,Xs>R.width+pr?0:Math.max(0,ze-pr),Math.max(0,ht-qs),qr.TOP_RIGHT):new zs(R.left+R.width-pr,R.top+qs),this.bottomRightPaddingBox=Ct>0||Jt>0?Ta(R.left+Math.min(ar,R.width-vn),R.top+Math.min(dr,R.height-Er),Math.max(0,Ct-pr),Math.max(0,Jt-Er),qr.BOTTOM_RIGHT):new zs(R.left+R.width-pr,R.top+R.height-Er),this.bottomLeftPaddingBox=Fs>0||_s>0?Ta(R.left+vn,R.top+Math.min(Mn,R.height-Er),Math.max(0,Fs-vn),Math.max(0,_s-Er),qr.BOTTOM_LEFT):new zs(R.left+vn,R.top+R.height-Er),this.topLeftContentBox=he>0||Ee>0?Ta(R.left+vn+Aa,R.top+qs+yi,Math.max(0,he-(vn+Aa)),Math.max(0,Ee-(qs+yi)),qr.TOP_LEFT):new zs(R.left+vn+Aa,R.top+qs+yi),this.topRightContentBox=ze>0||ht>0?Ta(R.left+Math.min(Xs,R.width+vn+Aa),R.top+qs+yi,Xs>R.width+vn+Aa?0:ze-vn+Aa,ht-(qs+yi),qr.TOP_RIGHT):new zs(R.left+R.width-(pr+Na),R.top+qs+yi),this.bottomRightContentBox=Ct>0||Jt>0?Ta(R.left+Math.min(ar,R.width-(vn+Aa)),R.top+Math.min(dr,R.height+qs+yi),Math.max(0,Ct-(pr+Na)),Jt-(Er+_o),qr.BOTTOM_RIGHT):new zs(R.left+R.width-(pr+Na),R.top+R.height-(Er+_o)),this.bottomLeftContentBox=Fs>0||_s>0?Ta(R.left+vn+Aa,R.top+Mn,Math.max(0,Fs-(vn+Aa)),_s-(Er+_o),qr.BOTTOM_LEFT):new zs(R.left+vn+Aa,R.top+R.height-(Er+_o))}return T})(),qr;(function(T){T[T.TOP_LEFT=0]="TOP_LEFT",T[T.TOP_RIGHT=1]="TOP_RIGHT",T[T.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",T[T.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(qr||(qr={}));var Ta=function(T,C,O,R,Y){var he=4*((Math.sqrt(2)-1)/3),Ee=O*he,Ke=R*he,ze=T+O,ht=C+R;switch(Y){case qr.TOP_LEFT:return new $u(new zs(T,ht),new zs(T,ht-Ke),new zs(ze-Ee,C),new zs(ze,C));case qr.TOP_RIGHT:return new $u(new zs(T,C),new zs(T+Ee,C),new zs(ze,ht-Ke),new zs(ze,ht));case qr.BOTTOM_RIGHT:return new $u(new zs(ze,C),new zs(ze,C+Ke),new zs(T+Ee,ht),new zs(T,ht));case qr.BOTTOM_LEFT:default:return new $u(new zs(ze,ht),new zs(ze-Ee,ht),new zs(T,C+Ke),new zs(T,C))}},tA=function(T){return[T.topLeftBorderBox,T.topRightBorderBox,T.bottomRightBorderBox,T.bottomLeftBorderBox]},eg=function(T){return[T.topLeftContentBox,T.topRightContentBox,T.bottomRightContentBox,T.bottomLeftContentBox]},vl=function(T){return[T.topLeftPaddingBox,T.topRightPaddingBox,T.bottomRightPaddingBox,T.bottomLeftPaddingBox]},wi=(function(){function T(C,O,R){this.offsetX=C,this.offsetY=O,this.matrix=R,this.type=0,this.target=6}return T})(),KA=(function(){function T(C,O){this.path=C,this.target=O,this.type=1}return T})(),tg=(function(){function T(C){this.opacity=C,this.type=2,this.target=6}return T})(),$i=function(T){return T.type===0},sg=function(T){return T.type===1},ng=function(T){return T.type===2},xp=function(T,C){return T.length===C.length?T.some(function(O,R){return O===C[R]}):!1},Va=function(T,C,O,R,Y){return T.map(function(he,Ee){switch(Ee){case 0:return he.add(C,O);case 1:return he.add(C+R,O);case 2:return he.add(C+R,O+Y);case 3:return he.add(C,O+Y)}return he})},ho=(function(){function T(C){this.element=C,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return T})(),mc=(function(){function T(C,O){if(this.container=C,this.parent=O,this.effects=[],this.curves=new Zm(this.container),this.container.styles.opacity<1&&this.effects.push(new tg(this.container.styles.opacity)),this.container.styles.transform!==null){var R=this.container.bounds.left+this.container.styles.transformOrigin[0].number,Y=this.container.bounds.top+this.container.styles.transformOrigin[1].number,he=this.container.styles.transform;this.effects.push(new wi(R,Y,he))}if(this.container.styles.overflowX!==0){var Ee=tA(this.curves),Ke=vl(this.curves);xp(Ee,Ke)?this.effects.push(new KA(Ee,6)):(this.effects.push(new KA(Ee,2)),this.effects.push(new KA(Ke,4)))}}return T.prototype.getEffects=function(C){for(var O=[2,3].indexOf(this.container.styles.position)===-1,R=this.parent,Y=this.effects.slice(0);R;){var he=R.effects.filter(function(ze){return!sg(ze)});if(O||R.container.styles.position!==0||!R.parent){if(Y.unshift.apply(Y,he),O=[2,3].indexOf(R.container.styles.position)===-1,R.container.styles.overflowX!==0){var Ee=tA(R.curves),Ke=vl(R.curves);xp(Ee,Ke)||Y.unshift(new KA(Ke,6))}}else Y.unshift.apply(Y,he);R=R.parent}return Y.filter(function(ze){return jt(ze.target,C)})},T})(),qh=function(T,C,O,R){T.container.elements.forEach(function(Y){var he=jt(Y.flags,4),Ee=jt(Y.flags,2),Ke=new mc(Y,T);jt(Y.styles.display,2048)&&R.push(Ke);var ze=jt(Y.flags,8)?[]:R;if(he||Ee){var ht=he||Y.styles.isPositioned()?O:C,wt=new ho(Ke);if(Y.styles.isPositioned()||Y.styles.opacity<1||Y.styles.isTransformed()){var Ct=Y.styles.zIndex.order;if(Ct<0){var Jt=0;ht.negativeZIndex.some(function(Fs,_s){return Ct>Fs.element.container.styles.zIndex.order?(Jt=_s,!1):Jt>0}),ht.negativeZIndex.splice(Jt,0,wt)}else if(Ct>0){var $s=0;ht.positiveZIndex.some(function(Fs,_s){return Ct>=Fs.element.container.styles.zIndex.order?($s=_s+1,!1):$s>0}),ht.positiveZIndex.splice($s,0,wt)}else ht.zeroOrAutoZIndexOrTransformedOrOpacity.push(wt)}else Y.styles.isFloating()?ht.nonPositionedFloats.push(wt):ht.nonPositionedInlineLevel.push(wt);qh(Ke,wt,he?wt:O,ze)}else Y.styles.isInlineLevel()?C.inlineLevel.push(Ke):C.nonInlineLevel.push(Ke),qh(Ke,C,O,ze);jt(Y.flags,8)&&vp(Y,ze)})},vp=function(T,C){for(var O=T instanceof Qh?T.start:1,R=T instanceof Qh?T.reversed:!1,Y=0;Y<C.length;Y++){var he=C[Y];he.container instanceof Wf&&typeof he.container.value=="number"&&he.container.value!==0&&(O=he.container.value),he.listValue=HA(O,he.container.styles.listStyleType,!0),O+=R?-1:1}},rg=function(T){var C=new mc(T,null),O=new ho(C),R=[];return qh(C,O,O,R),vp(C.container,R),O},ag=function(T,C){switch(C){case 0:return Ma(T.topLeftBorderBox,T.topLeftPaddingBox,T.topRightBorderBox,T.topRightPaddingBox);case 1:return Ma(T.topRightBorderBox,T.topRightPaddingBox,T.bottomRightBorderBox,T.bottomRightPaddingBox);case 2:return Ma(T.bottomRightBorderBox,T.bottomRightPaddingBox,T.bottomLeftBorderBox,T.bottomLeftPaddingBox);case 3:default:return Ma(T.bottomLeftBorderBox,T.bottomLeftPaddingBox,T.topLeftBorderBox,T.topLeftPaddingBox)}},Wh=function(T,C){switch(C){case 0:return Ma(T.topLeftBorderBox,T.topLeftBorderDoubleOuterBox,T.topRightBorderBox,T.topRightBorderDoubleOuterBox);case 1:return Ma(T.topRightBorderBox,T.topRightBorderDoubleOuterBox,T.bottomRightBorderBox,T.bottomRightBorderDoubleOuterBox);case 2:return Ma(T.bottomRightBorderBox,T.bottomRightBorderDoubleOuterBox,T.bottomLeftBorderBox,T.bottomLeftBorderDoubleOuterBox);case 3:default:return Ma(T.bottomLeftBorderBox,T.bottomLeftBorderDoubleOuterBox,T.topLeftBorderBox,T.topLeftBorderDoubleOuterBox)}},Do=function(T,C){switch(C){case 0:return Ma(T.topLeftBorderDoubleInnerBox,T.topLeftPaddingBox,T.topRightBorderDoubleInnerBox,T.topRightPaddingBox);case 1:return Ma(T.topRightBorderDoubleInnerBox,T.topRightPaddingBox,T.bottomRightBorderDoubleInnerBox,T.bottomRightPaddingBox);case 2:return Ma(T.bottomRightBorderDoubleInnerBox,T.bottomRightPaddingBox,T.bottomLeftBorderDoubleInnerBox,T.bottomLeftPaddingBox);case 3:default:return Ma(T.bottomLeftBorderDoubleInnerBox,T.bottomLeftPaddingBox,T.topLeftBorderDoubleInnerBox,T.topLeftPaddingBox)}},Kl=function(T,C){switch(C){case 0:return Gu(T.topLeftBorderStroke,T.topRightBorderStroke);case 1:return Gu(T.topRightBorderStroke,T.bottomRightBorderStroke);case 2:return Gu(T.bottomRightBorderStroke,T.bottomLeftBorderStroke);case 3:default:return Gu(T.bottomLeftBorderStroke,T.topLeftBorderStroke)}},Gu=function(T,C){var O=[];return Lo(T)?O.push(T.subdivide(.5,!1)):O.push(T),Lo(C)?O.push(C.subdivide(.5,!0)):O.push(C),O},Ma=function(T,C,O,R){var Y=[];return Lo(T)?Y.push(T.subdivide(.5,!1)):Y.push(T),Lo(O)?Y.push(O.subdivide(.5,!0)):Y.push(O),Lo(R)?Y.push(R.subdivide(.5,!0).reverse()):Y.push(R),Lo(C)?Y.push(C.subdivide(.5,!1).reverse()):Y.push(C),Y},bp=function(T){var C=T.bounds,O=T.styles;return C.add(O.borderLeftWidth,O.borderTopWidth,-(O.borderRightWidth+O.borderLeftWidth),-(O.borderTopWidth+O.borderBottomWidth))},bl=function(T){var C=T.styles,O=T.bounds,R=lr(C.paddingLeft,O.width),Y=lr(C.paddingRight,O.width),he=lr(C.paddingTop,O.width),Ee=lr(C.paddingBottom,O.width);return O.add(R+C.borderLeftWidth,he+C.borderTopWidth,-(C.borderRightWidth+C.borderLeftWidth+R+Y),-(C.borderTopWidth+C.borderBottomWidth+he+Ee))},sA=function(T,C){return T===0?C.bounds:T===2?bl(C):bp(C)},kc=function(T,C){return T===0?C.bounds:T===2?bl(C):bp(C)},qu=function(T,C,O){var R=sA(zl(T.styles.backgroundOrigin,C),T),Y=kc(zl(T.styles.backgroundClip,C),T),he=ig(zl(T.styles.backgroundSize,C),O,R),Ee=he[0],Ke=he[1],ze=Bo(zl(T.styles.backgroundPosition,C),R.width-Ee,R.height-Ke),ht=Wu(zl(T.styles.backgroundRepeat,C),ze,he,R,Y),wt=Math.round(R.left+ze[0]),Ct=Math.round(R.top+ze[1]);return[ht,wt,Ct,Ee,Ke]},jd=function(T){return yr(T)&&T.value===Dl.AUTO},Qo=function(T){return typeof T=="number"},ig=function(T,C,O){var R=C[0],Y=C[1],he=C[2],Ee=T[0],Ke=T[1];if(!Ee)return[0,0];if(Ur(Ee)&&Ke&&Ur(Ke))return[lr(Ee,O.width),lr(Ke,O.height)];var ze=Qo(he);if(yr(Ee)&&(Ee.value===Dl.CONTAIN||Ee.value===Dl.COVER)){if(Qo(he)){var ht=O.width/O.height;return ht<he!=(Ee.value===Dl.COVER)?[O.width,O.width/he]:[O.height*he,O.height]}return[O.width,O.height]}var wt=Qo(R),Ct=Qo(Y),Jt=wt||Ct;if(jd(Ee)&&(!Ke||jd(Ke))){if(wt&&Ct)return[R,Y];if(!ze&&!Jt)return[O.width,O.height];if(Jt&&ze){var $s=wt?R:Y*he,Fs=Ct?Y:R/he;return[$s,Fs]}var _s=wt?R:O.width,fn=Ct?Y:O.height;return[_s,fn]}if(ze){var Js=0,Xs=0;return Ur(Ee)?Js=lr(Ee,O.width):Ur(Ke)&&(Xs=lr(Ke,O.height)),jd(Ee)?Js=Xs*he:(!Ke||jd(Ke))&&(Xs=Js/he),[Js,Xs]}var dr=null,ar=null;if(Ur(Ee)?dr=lr(Ee,O.width):Ke&&Ur(Ke)&&(ar=lr(Ke,O.height)),dr!==null&&(!Ke||jd(Ke))&&(ar=wt&&Ct?dr/R*Y:O.height),ar!==null&&jd(Ee)&&(dr=wt&&Ct?ar/Y*R:O.width),dr!==null&&ar!==null)return[dr,ar];throw new Error("Unable to calculate background-size for element")},zl=function(T,C){var O=T[C];return typeof O>"u"?T[0]:O},Wu=function(T,C,O,R,Y){var he=C[0],Ee=C[1],Ke=O[0],ze=O[1];switch(T){case 2:return[new zs(Math.round(R.left),Math.round(R.top+Ee)),new zs(Math.round(R.left+R.width),Math.round(R.top+Ee)),new zs(Math.round(R.left+R.width),Math.round(ze+R.top+Ee)),new zs(Math.round(R.left),Math.round(ze+R.top+Ee))];case 3:return[new zs(Math.round(R.left+he),Math.round(R.top)),new zs(Math.round(R.left+he+Ke),Math.round(R.top)),new zs(Math.round(R.left+he+Ke),Math.round(R.height+R.top)),new zs(Math.round(R.left+he),Math.round(R.height+R.top))];case 1:return[new zs(Math.round(R.left+he),Math.round(R.top+Ee)),new zs(Math.round(R.left+he+Ke),Math.round(R.top+Ee)),new zs(Math.round(R.left+he+Ke),Math.round(R.top+Ee+ze)),new zs(Math.round(R.left+he),Math.round(R.top+Ee+ze))];default:return[new zs(Math.round(Y.left),Math.round(Y.top)),new zs(Math.round(Y.left+Y.width),Math.round(Y.top)),new zs(Math.round(Y.left+Y.width),Math.round(Y.height+Y.top)),new zs(Math.round(Y.left),Math.round(Y.height+Y.top))]}},Yu="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",nA="Hidden Text",og=(function(){function T(C){this._data={},this._document=C}return T.prototype.parseMetrics=function(C,O){var R=this._document.createElement("div"),Y=this._document.createElement("img"),he=this._document.createElement("span"),Ee=this._document.body;R.style.visibility="hidden",R.style.fontFamily=C,R.style.fontSize=O,R.style.margin="0",R.style.padding="0",R.style.whiteSpace="nowrap",Ee.appendChild(R),Y.src=Yu,Y.width=1,Y.height=1,Y.style.margin="0",Y.style.padding="0",Y.style.verticalAlign="baseline",he.style.fontFamily=C,he.style.fontSize=O,he.style.margin="0",he.style.padding="0",he.appendChild(this._document.createTextNode(nA)),R.appendChild(he),R.appendChild(Y);var Ke=Y.offsetTop-he.offsetTop+2;R.removeChild(he),R.appendChild(this._document.createTextNode(nA)),R.style.lineHeight="normal",Y.style.verticalAlign="super";var ze=Y.offsetTop-R.offsetTop+2;return Ee.removeChild(R),{baseline:Ke,middle:ze}},T.prototype.getMetrics=function(C,O){var R=C+" "+O;return typeof this._data[R]>"u"&&(this._data[R]=this.parseMetrics(C,O)),this._data[R]},T})(),jp=(function(){function T(C,O){this.context=C,this.options=O}return T})(),Xu=1e4,lg=(function(T){r(C,T);function C(O,R){var Y=T.call(this,O,R)||this;return Y._activeEffects=[],Y.canvas=R.canvas?R.canvas:document.createElement("canvas"),Y.ctx=Y.canvas.getContext("2d"),R.canvas||(Y.canvas.width=Math.floor(R.width*R.scale),Y.canvas.height=Math.floor(R.height*R.scale),Y.canvas.style.width=R.width+"px",Y.canvas.style.height=R.height+"px"),Y.fontMetrics=new og(document),Y.ctx.scale(Y.options.scale,Y.options.scale),Y.ctx.translate(-R.x,-R.y),Y.ctx.textBaseline="bottom",Y._activeEffects=[],Y.context.logger.debug("Canvas renderer initialized ("+R.width+"x"+R.height+") with scale "+R.scale),Y}return C.prototype.applyEffects=function(O){for(var R=this;this._activeEffects.length;)this.popEffect();O.forEach(function(Y){return R.applyEffect(Y)})},C.prototype.applyEffect=function(O){this.ctx.save(),ng(O)&&(this.ctx.globalAlpha=O.opacity),$i(O)&&(this.ctx.translate(O.offsetX,O.offsetY),this.ctx.transform(O.matrix[0],O.matrix[1],O.matrix[2],O.matrix[3],O.matrix[4],O.matrix[5]),this.ctx.translate(-O.offsetX,-O.offsetY)),sg(O)&&(this.path(O.path),this.ctx.clip()),this._activeEffects.push(O)},C.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},C.prototype.renderStack=function(O){return c(this,void 0,void 0,function(){var R;return A(this,function(Y){switch(Y.label){case 0:return R=O.element.container.styles,R.isVisible()?[4,this.renderStackContent(O)]:[3,2];case 1:Y.sent(),Y.label=2;case 2:return[2]}})})},C.prototype.renderNode=function(O){return c(this,void 0,void 0,function(){return A(this,function(R){switch(R.label){case 0:if(jt(O.container.flags,16))debugger;return O.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(O)]:[3,3];case 1:return R.sent(),[4,this.renderNodeContent(O)];case 2:R.sent(),R.label=3;case 3:return[2]}})})},C.prototype.renderTextWithLetterSpacing=function(O,R,Y){var he=this;if(R===0)this.ctx.fillText(O.text,O.bounds.left,O.bounds.top+Y);else{var Ee=Uo(O.text);Ee.reduce(function(Ke,ze){return he.ctx.fillText(ze,Ke,O.bounds.top+Y),Ke+he.ctx.measureText(ze).width},O.bounds.left)}},C.prototype.createFontStyle=function(O){var R=O.fontVariant.filter(function(Ee){return Ee==="normal"||Ee==="small-caps"}).join(""),Y=sa(O.fontFamily).join(", "),he=io(O.fontSize)?""+O.fontSize.number+O.fontSize.unit:O.fontSize.number+"px";return[[O.fontStyle,R,O.fontWeight,he,Y].join(" "),Y,he]},C.prototype.renderTextNode=function(O,R){return c(this,void 0,void 0,function(){var Y,he,Ee,Ke,ze,ht,wt,Ct,Jt=this;return A(this,function($s){return Y=this.createFontStyle(R),he=Y[0],Ee=Y[1],Ke=Y[2],this.ctx.font=he,this.ctx.direction=R.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",ze=this.fontMetrics.getMetrics(Ee,Ke),ht=ze.baseline,wt=ze.middle,Ct=R.paintOrder,O.textBounds.forEach(function(Fs){Ct.forEach(function(_s){switch(_s){case 0:Jt.ctx.fillStyle=Sr(R.color),Jt.renderTextWithLetterSpacing(Fs,R.letterSpacing,ht);var fn=R.textShadow;fn.length&&Fs.text.trim().length&&(fn.slice(0).reverse().forEach(function(Js){Jt.ctx.shadowColor=Sr(Js.color),Jt.ctx.shadowOffsetX=Js.offsetX.number*Jt.options.scale,Jt.ctx.shadowOffsetY=Js.offsetY.number*Jt.options.scale,Jt.ctx.shadowBlur=Js.blur.number,Jt.renderTextWithLetterSpacing(Fs,R.letterSpacing,ht)}),Jt.ctx.shadowColor="",Jt.ctx.shadowOffsetX=0,Jt.ctx.shadowOffsetY=0,Jt.ctx.shadowBlur=0),R.textDecorationLine.length&&(Jt.ctx.fillStyle=Sr(R.textDecorationColor||R.color),R.textDecorationLine.forEach(function(Js){switch(Js){case 1:Jt.ctx.fillRect(Fs.bounds.left,Math.round(Fs.bounds.top+ht),Fs.bounds.width,1);break;case 2:Jt.ctx.fillRect(Fs.bounds.left,Math.round(Fs.bounds.top),Fs.bounds.width,1);break;case 3:Jt.ctx.fillRect(Fs.bounds.left,Math.ceil(Fs.bounds.top+wt),Fs.bounds.width,1);break}}));break;case 1:R.webkitTextStrokeWidth&&Fs.text.trim().length&&(Jt.ctx.strokeStyle=Sr(R.webkitTextStrokeColor),Jt.ctx.lineWidth=R.webkitTextStrokeWidth,Jt.ctx.lineJoin=window.chrome?"miter":"round",Jt.ctx.strokeText(Fs.text,Fs.bounds.left,Fs.bounds.top+ht)),Jt.ctx.strokeStyle="",Jt.ctx.lineWidth=0,Jt.ctx.lineJoin="miter";break}})}),[2]})})},C.prototype.renderReplacedElement=function(O,R,Y){if(Y&&O.intrinsicWidth>0&&O.intrinsicHeight>0){var he=bl(O),Ee=vl(R);this.path(Ee),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(Y,0,0,O.intrinsicWidth,O.intrinsicHeight,he.left,he.top,he.width,he.height),this.ctx.restore()}},C.prototype.renderNodeContent=function(O){return c(this,void 0,void 0,function(){var R,Y,he,Ee,Ke,ze,Xs,Xs,ht,wt,Ct,Jt,ar,$s,Fs,Mn,_s,fn,Js,Xs,dr,ar,Mn;return A(this,function(qs){switch(qs.label){case 0:this.applyEffects(O.getEffects(4)),R=O.container,Y=O.curves,he=R.styles,Ee=0,Ke=R.textNodes,qs.label=1;case 1:return Ee<Ke.length?(ze=Ke[Ee],[4,this.renderTextNode(ze,he)]):[3,4];case 2:qs.sent(),qs.label=3;case 3:return Ee++,[3,1];case 4:if(!(R instanceof qf))return[3,8];qs.label=5;case 5:return qs.trys.push([5,7,,8]),[4,this.context.cache.match(R.src)];case 6:return Xs=qs.sent(),this.renderReplacedElement(R,Y,Xs),[3,8];case 7:return qs.sent(),this.context.logger.error("Error loading image "+R.src),[3,8];case 8:if(R instanceof Dh&&this.renderReplacedElement(R,Y,R.canvas),!(R instanceof Dm))return[3,12];qs.label=9;case 9:return qs.trys.push([9,11,,12]),[4,this.context.cache.match(R.svg)];case 10:return Xs=qs.sent(),this.renderReplacedElement(R,Y,Xs),[3,12];case 11:return qs.sent(),this.context.logger.error("Error loading svg "+R.svg.substring(0,255)),[3,12];case 12:return R instanceof Zf&&R.tree?(ht=new C(this.context,{scale:this.options.scale,backgroundColor:R.backgroundColor,x:0,y:0,width:R.width,height:R.height}),[4,ht.render(R.tree)]):[3,14];case 13:wt=qs.sent(),R.width&&R.height&&this.ctx.drawImage(wt,0,0,R.width,R.height,R.bounds.left,R.bounds.top,R.bounds.width,R.bounds.height),qs.label=14;case 14:if(R instanceof _h&&(Ct=Math.min(R.bounds.width,R.bounds.height),R.type===Uu?R.checked&&(this.ctx.save(),this.path([new zs(R.bounds.left+Ct*.39363,R.bounds.top+Ct*.79),new zs(R.bounds.left+Ct*.16,R.bounds.top+Ct*.5549),new zs(R.bounds.left+Ct*.27347,R.bounds.top+Ct*.44071),new zs(R.bounds.left+Ct*.39694,R.bounds.top+Ct*.5649),new zs(R.bounds.left+Ct*.72983,R.bounds.top+Ct*.23),new zs(R.bounds.left+Ct*.84,R.bounds.top+Ct*.34085),new zs(R.bounds.left+Ct*.39363,R.bounds.top+Ct*.79)]),this.ctx.fillStyle=Sr(Jf),this.ctx.fill(),this.ctx.restore()):R.type===Lu&&R.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(R.bounds.left+Ct/2,R.bounds.top+Ct/2,Ct/4,0,Math.PI*2,!0),this.ctx.fillStyle=Sr(Jf),this.ctx.fill(),this.ctx.restore())),Yh(R)&&R.value.length){switch(Jt=this.createFontStyle(he),ar=Jt[0],$s=Jt[1],Fs=this.fontMetrics.getMetrics(ar,$s).baseline,this.ctx.font=ar,this.ctx.fillStyle=Sr(he.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Vx(R.styles.textAlign),Mn=bl(R),_s=0,R.styles.textAlign){case 1:_s+=Mn.width/2;break;case 2:_s+=Mn.width;break}fn=Mn.add(_s,0,0,-Mn.height/2+1),this.ctx.save(),this.path([new zs(Mn.left,Mn.top),new zs(Mn.left+Mn.width,Mn.top),new zs(Mn.left+Mn.width,Mn.top+Mn.height),new zs(Mn.left,Mn.top+Mn.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new pd(R.value,fn),he.letterSpacing,Fs),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!jt(R.styles.display,2048))return[3,20];if(R.styles.listStyleImage===null)return[3,19];if(Js=R.styles.listStyleImage,Js.type!==0)return[3,18];Xs=void 0,dr=Js.url,qs.label=15;case 15:return qs.trys.push([15,17,,18]),[4,this.context.cache.match(dr)];case 16:return Xs=qs.sent(),this.ctx.drawImage(Xs,R.bounds.left-(Xs.width+10),R.bounds.top),[3,18];case 17:return qs.sent(),this.context.logger.error("Error loading list-style-image "+dr),[3,18];case 18:return[3,20];case 19:O.listValue&&R.styles.listStyleType!==-1&&(ar=this.createFontStyle(he)[0],this.ctx.font=ar,this.ctx.fillStyle=Sr(he.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Mn=new d(R.bounds.left,R.bounds.top+lr(R.styles.paddingTop,R.bounds.width),R.bounds.width,fl(he.lineHeight,he.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new pd(O.listValue,Mn),he.letterSpacing,fl(he.lineHeight,he.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),qs.label=20;case 20:return[2]}})})},C.prototype.renderStackContent=function(O){return c(this,void 0,void 0,function(){var R,Y,Js,he,Ee,Js,Ke,ze,Js,ht,wt,Js,Ct,Jt,Js,$s,Fs,Js,_s,fn,Js;return A(this,function(Xs){switch(Xs.label){case 0:if(jt(O.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(O.element)];case 1:Xs.sent(),R=0,Y=O.negativeZIndex,Xs.label=2;case 2:return R<Y.length?(Js=Y[R],[4,this.renderStack(Js)]):[3,5];case 3:Xs.sent(),Xs.label=4;case 4:return R++,[3,2];case 5:return[4,this.renderNodeContent(O.element)];case 6:Xs.sent(),he=0,Ee=O.nonInlineLevel,Xs.label=7;case 7:return he<Ee.length?(Js=Ee[he],[4,this.renderNode(Js)]):[3,10];case 8:Xs.sent(),Xs.label=9;case 9:return he++,[3,7];case 10:Ke=0,ze=O.nonPositionedFloats,Xs.label=11;case 11:return Ke<ze.length?(Js=ze[Ke],[4,this.renderStack(Js)]):[3,14];case 12:Xs.sent(),Xs.label=13;case 13:return Ke++,[3,11];case 14:ht=0,wt=O.nonPositionedInlineLevel,Xs.label=15;case 15:return ht<wt.length?(Js=wt[ht],[4,this.renderStack(Js)]):[3,18];case 16:Xs.sent(),Xs.label=17;case 17:return ht++,[3,15];case 18:Ct=0,Jt=O.inlineLevel,Xs.label=19;case 19:return Ct<Jt.length?(Js=Jt[Ct],[4,this.renderNode(Js)]):[3,22];case 20:Xs.sent(),Xs.label=21;case 21:return Ct++,[3,19];case 22:$s=0,Fs=O.zeroOrAutoZIndexOrTransformedOrOpacity,Xs.label=23;case 23:return $s<Fs.length?(Js=Fs[$s],[4,this.renderStack(Js)]):[3,26];case 24:Xs.sent(),Xs.label=25;case 25:return $s++,[3,23];case 26:_s=0,fn=O.positiveZIndex,Xs.label=27;case 27:return _s<fn.length?(Js=fn[_s],[4,this.renderStack(Js)]):[3,30];case 28:Xs.sent(),Xs.label=29;case 29:return _s++,[3,27];case 30:return[2]}})})},C.prototype.mask=function(O){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(O.slice(0).reverse()),this.ctx.closePath()},C.prototype.path=function(O){this.ctx.beginPath(),this.formatPath(O),this.ctx.closePath()},C.prototype.formatPath=function(O){var R=this;O.forEach(function(Y,he){var Ee=Lo(Y)?Y.start:Y;he===0?R.ctx.moveTo(Ee.x,Ee.y):R.ctx.lineTo(Ee.x,Ee.y),Lo(Y)&&R.ctx.bezierCurveTo(Y.startControl.x,Y.startControl.y,Y.endControl.x,Y.endControl.y,Y.end.x,Y.end.y)})},C.prototype.renderRepeat=function(O,R,Y,he){this.path(O),this.ctx.fillStyle=R,this.ctx.translate(Y,he),this.ctx.fill(),this.ctx.translate(-Y,-he)},C.prototype.resizeImage=function(O,R,Y){var he;if(O.width===R&&O.height===Y)return O;var Ee=(he=this.canvas.ownerDocument)!==null&&he!==void 0?he:document,Ke=Ee.createElement("canvas");Ke.width=Math.max(1,R),Ke.height=Math.max(1,Y);var ze=Ke.getContext("2d");return ze.drawImage(O,0,0,O.width,O.height,0,0,R,Y),Ke},C.prototype.renderBackgroundImage=function(O){return c(this,void 0,void 0,function(){var R,Y,he,Ee,Ke,ze;return A(this,function(ht){switch(ht.label){case 0:R=O.styles.backgroundImage.length-1,Y=function(wt){var Ct,Jt,$s,yi,eo,ao,Aa,Zi,Er,Fs,yi,eo,ao,Aa,Zi,_s,fn,Js,Xs,dr,ar,Mn,qs,pr,Er,vn,yi,Na,_o,Aa,Zi,fo,eo,ao,jl,Vl,Hc,Sd,Nd,wl,Kc,zc;return A(this,function(VA){switch(VA.label){case 0:if(wt.type!==0)return[3,5];Ct=void 0,Jt=wt.url,VA.label=1;case 1:return VA.trys.push([1,3,,4]),[4,he.context.cache.match(Jt)];case 2:return Ct=VA.sent(),[3,4];case 3:return VA.sent(),he.context.logger.error("Error loading background-image "+Jt),[3,4];case 4:return Ct&&($s=qu(O,R,[Ct.width,Ct.height,Ct.width/Ct.height]),yi=$s[0],eo=$s[1],ao=$s[2],Aa=$s[3],Zi=$s[4],Er=he.ctx.createPattern(he.resizeImage(Ct,Aa,Zi),"repeat"),he.renderRepeat(yi,Er,eo,ao)),[3,6];case 5:vA(wt)?(Fs=qu(O,R,[null,null,null]),yi=Fs[0],eo=Fs[1],ao=Fs[2],Aa=Fs[3],Zi=Fs[4],_s=fa(wt.angle,Aa,Zi),fn=_s[0],Js=_s[1],Xs=_s[2],dr=_s[3],ar=_s[4],Mn=document.createElement("canvas"),Mn.width=Aa,Mn.height=Zi,qs=Mn.getContext("2d"),pr=qs.createLinearGradient(Js,dr,Xs,ar),Lr(wt.stops,fn).forEach(function(Ju){return pr.addColorStop(Ju.stop,Sr(Ju.color))}),qs.fillStyle=pr,qs.fillRect(0,0,Aa,Zi),Aa>0&&Zi>0&&(Er=he.ctx.createPattern(Mn,"repeat"),he.renderRepeat(yi,Er,eo,ao))):Hd(wt)&&(vn=qu(O,R,[null,null,null]),yi=vn[0],Na=vn[1],_o=vn[2],Aa=vn[3],Zi=vn[4],fo=wt.position.length===0?[Ec]:wt.position,eo=lr(fo[0],Aa),ao=lr(fo[fo.length-1],Zi),jl=nl(wt,eo,ao,Aa,Zi),Vl=jl[0],Hc=jl[1],Vl>0&&Hc>0&&(Sd=he.ctx.createRadialGradient(Na+eo,_o+ao,0,Na+eo,_o+ao,Vl),Lr(wt.stops,Vl*2).forEach(function(Ju){return Sd.addColorStop(Ju.stop,Sr(Ju.color))}),he.path(yi),he.ctx.fillStyle=Sd,Vl!==Hc?(Nd=O.bounds.left+.5*O.bounds.width,wl=O.bounds.top+.5*O.bounds.height,Kc=Hc/Vl,zc=1/Kc,he.ctx.save(),he.ctx.translate(Nd,wl),he.ctx.transform(1,0,0,Kc,0,0),he.ctx.translate(-Nd,-wl),he.ctx.fillRect(Na,zc*(_o-wl)+wl,Aa,Zi*zc),he.ctx.restore()):he.ctx.fill())),VA.label=6;case 6:return R--,[2]}})},he=this,Ee=0,Ke=O.styles.backgroundImage.slice(0).reverse(),ht.label=1;case 1:return Ee<Ke.length?(ze=Ke[Ee],[5,Y(ze)]):[3,4];case 2:ht.sent(),ht.label=3;case 3:return Ee++,[3,1];case 4:return[2]}})})},C.prototype.renderSolidBorder=function(O,R,Y){return c(this,void 0,void 0,function(){return A(this,function(he){return this.path(ag(Y,R)),this.ctx.fillStyle=Sr(O),this.ctx.fill(),[2]})})},C.prototype.renderDoubleBorder=function(O,R,Y,he){return c(this,void 0,void 0,function(){var Ee,Ke;return A(this,function(ze){switch(ze.label){case 0:return R<3?[4,this.renderSolidBorder(O,Y,he)]:[3,2];case 1:return ze.sent(),[2];case 2:return Ee=Wh(he,Y),this.path(Ee),this.ctx.fillStyle=Sr(O),this.ctx.fill(),Ke=Do(he,Y),this.path(Ke),this.ctx.fill(),[2]}})})},C.prototype.renderNodeBackgroundAndBorders=function(O){return c(this,void 0,void 0,function(){var R,Y,he,Ee,Ke,ze,ht,wt,Ct=this;return A(this,function(Jt){switch(Jt.label){case 0:return this.applyEffects(O.getEffects(2)),R=O.container.styles,Y=!Ei(R.backgroundColor)||R.backgroundImage.length,he=[{style:R.borderTopStyle,color:R.borderTopColor,width:R.borderTopWidth},{style:R.borderRightStyle,color:R.borderRightColor,width:R.borderRightWidth},{style:R.borderBottomStyle,color:R.borderBottomColor,width:R.borderBottomWidth},{style:R.borderLeftStyle,color:R.borderLeftColor,width:R.borderLeftWidth}],Ee=cg(zl(R.backgroundClip,0),O.curves),Y||R.boxShadow.length?(this.ctx.save(),this.path(Ee),this.ctx.clip(),Ei(R.backgroundColor)||(this.ctx.fillStyle=Sr(R.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(O.container)]):[3,2];case 1:Jt.sent(),this.ctx.restore(),R.boxShadow.slice(0).reverse().forEach(function($s){Ct.ctx.save();var Fs=tA(O.curves),_s=$s.inset?0:Xu,fn=Va(Fs,-_s+($s.inset?1:-1)*$s.spread.number,($s.inset?1:-1)*$s.spread.number,$s.spread.number*($s.inset?-2:2),$s.spread.number*($s.inset?-2:2));$s.inset?(Ct.path(Fs),Ct.ctx.clip(),Ct.mask(fn)):(Ct.mask(Fs),Ct.ctx.clip(),Ct.path(fn)),Ct.ctx.shadowOffsetX=$s.offsetX.number+_s,Ct.ctx.shadowOffsetY=$s.offsetY.number,Ct.ctx.shadowColor=Sr($s.color),Ct.ctx.shadowBlur=$s.blur.number,Ct.ctx.fillStyle=$s.inset?Sr($s.color):"rgba(0,0,0,1)",Ct.ctx.fill(),Ct.ctx.restore()}),Jt.label=2;case 2:Ke=0,ze=0,ht=he,Jt.label=3;case 3:return ze<ht.length?(wt=ht[ze],wt.style!==0&&!Ei(wt.color)&&wt.width>0?wt.style!==2?[3,5]:[4,this.renderDashedDottedBorder(wt.color,wt.width,Ke,O.curves,2)]:[3,11]):[3,13];case 4:return Jt.sent(),[3,11];case 5:return wt.style!==3?[3,7]:[4,this.renderDashedDottedBorder(wt.color,wt.width,Ke,O.curves,3)];case 6:return Jt.sent(),[3,11];case 7:return wt.style!==4?[3,9]:[4,this.renderDoubleBorder(wt.color,wt.width,Ke,O.curves)];case 8:return Jt.sent(),[3,11];case 9:return[4,this.renderSolidBorder(wt.color,Ke,O.curves)];case 10:Jt.sent(),Jt.label=11;case 11:Ke++,Jt.label=12;case 12:return ze++,[3,3];case 13:return[2]}})})},C.prototype.renderDashedDottedBorder=function(O,R,Y,he,Ee){return c(this,void 0,void 0,function(){var Ke,ze,ht,wt,Ct,Jt,$s,Fs,_s,fn,Js,Xs,dr,ar,Mn,qs,Mn,qs;return A(this,function(pr){return this.ctx.save(),Ke=Kl(he,Y),ze=ag(he,Y),Ee===2&&(this.path(ze),this.ctx.clip()),Lo(ze[0])?(ht=ze[0].start.x,wt=ze[0].start.y):(ht=ze[0].x,wt=ze[0].y),Lo(ze[1])?(Ct=ze[1].end.x,Jt=ze[1].end.y):(Ct=ze[1].x,Jt=ze[1].y),Y===0||Y===2?$s=Math.abs(ht-Ct):$s=Math.abs(wt-Jt),this.ctx.beginPath(),Ee===3?this.formatPath(Ke):this.formatPath(ze.slice(0,2)),Fs=R<3?R*3:R*2,_s=R<3?R*2:R,Ee===3&&(Fs=R,_s=R),fn=!0,$s<=Fs*2?fn=!1:$s<=Fs*2+_s?(Js=$s/(2*Fs+_s),Fs*=Js,_s*=Js):(Xs=Math.floor(($s+_s)/(Fs+_s)),dr=($s-Xs*Fs)/(Xs-1),ar=($s-(Xs+1)*Fs)/Xs,_s=ar<=0||Math.abs(_s-dr)<Math.abs(_s-ar)?dr:ar),fn&&(Ee===3?this.ctx.setLineDash([0,Fs+_s]):this.ctx.setLineDash([Fs,_s])),Ee===3?(this.ctx.lineCap="round",this.ctx.lineWidth=R):this.ctx.lineWidth=R*2+1.1,this.ctx.strokeStyle=Sr(O),this.ctx.stroke(),this.ctx.setLineDash([]),Ee===2&&(Lo(ze[0])&&(Mn=ze[3],qs=ze[0],this.ctx.beginPath(),this.formatPath([new zs(Mn.end.x,Mn.end.y),new zs(qs.start.x,qs.start.y)]),this.ctx.stroke()),Lo(ze[1])&&(Mn=ze[1],qs=ze[2],this.ctx.beginPath(),this.formatPath([new zs(Mn.end.x,Mn.end.y),new zs(qs.start.x,qs.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},C.prototype.render=function(O){return c(this,void 0,void 0,function(){var R;return A(this,function(Y){switch(Y.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Sr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),R=rg(O),[4,this.renderStack(R)];case 1:return Y.sent(),this.applyEffects([]),[2,this.canvas]}})})},C})(jp),Yh=function(T){return T instanceof Mh||T instanceof Pm?!0:T instanceof _h&&T.type!==Lu&&T.type!==Uu},cg=function(T,C){switch(T){case 0:return tA(C);case 2:return eg(C);case 1:default:return vl(C)}},Vx=function(T){switch(T){case 1:return"center";case 2:return"right";case 0:default:return"left"}},$x=["-apple-system","system-ui"],sa=function(T){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?T.filter(function(C){return $x.indexOf(C)===-1}):T},Sa=(function(T){r(C,T);function C(O,R){var Y=T.call(this,O,R)||this;return Y.canvas=R.canvas?R.canvas:document.createElement("canvas"),Y.ctx=Y.canvas.getContext("2d"),Y.options=R,Y.canvas.width=Math.floor(R.width*R.scale),Y.canvas.height=Math.floor(R.height*R.scale),Y.canvas.style.width=R.width+"px",Y.canvas.style.height=R.height+"px",Y.ctx.scale(Y.options.scale,Y.options.scale),Y.ctx.translate(-R.x,-R.y),Y.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+R.width+"x"+R.height+" at "+R.x+","+R.y+") with scale "+R.scale),Y}return C.prototype.render=function(O){return c(this,void 0,void 0,function(){var R,Y;return A(this,function(he){switch(he.label){case 0:return R=DA(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,O),[4,vr(R)];case 1:return Y=he.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Sr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(Y,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},C})(jp),vr=function(T){return new Promise(function(C,O){var R=new Image;R.onload=function(){C(R)},R.onerror=O,R.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(T))})},Cr=(function(){function T(C){var O=C.id,R=C.enabled;this.id=O,this.enabled=R,this.start=Date.now()}return T.prototype.debug=function(){for(var C=[],O=0;O<arguments.length;O++)C[O]=arguments[O];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,u([this.id,this.getTime()+"ms"],C)):this.info.apply(this,C))},T.prototype.getTime=function(){return Date.now()-this.start},T.prototype.info=function(){for(var C=[],O=0;O<arguments.length;O++)C[O]=arguments[O];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,u([this.id,this.getTime()+"ms"],C))},T.prototype.warn=function(){for(var C=[],O=0;O<arguments.length;O++)C[O]=arguments[O];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,u([this.id,this.getTime()+"ms"],C)):this.info.apply(this,C))},T.prototype.error=function(){for(var C=[],O=0;O<arguments.length;O++)C[O]=arguments[O];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,u([this.id,this.getTime()+"ms"],C)):this.info.apply(this,C))},T.instances={},T})(),da=(function(){function T(C,O){var R;this.windowBounds=O,this.instanceName="#"+T.instanceCount++,this.logger=new Cr({id:this.instanceName,enabled:C.logging}),this.cache=(R=C.cache)!==null&&R!==void 0?R:new Vu(this,C)}return T.instanceCount=1,T})(),al=function(T,C){return C===void 0&&(C={}),wd(T,C)};typeof window<"u"&&zu.setContext(window);var wd=function(T,C){return c(void 0,void 0,void 0,function(){var O,R,Y,he,Ee,Ke,ze,ht,wt,Ct,Jt,$s,Fs,_s,fn,Js,Xs,dr,ar,Mn,pr,qs,pr,Er,vn,yi,Na,_o,Aa,Zi,fo,eo,ao,jl,Vl,Hc,Sd,Nd,wl,Kc;return A(this,function(zc){switch(zc.label){case 0:if(!T||typeof T!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(O=T.ownerDocument,!O)throw new Error("Element is not attached to a Document");if(R=O.defaultView,!R)throw new Error("Document is not attached to a Window");return Y={allowTaint:(Er=C.allowTaint)!==null&&Er!==void 0?Er:!1,imageTimeout:(vn=C.imageTimeout)!==null&&vn!==void 0?vn:15e3,proxy:C.proxy,useCORS:(yi=C.useCORS)!==null&&yi!==void 0?yi:!1},he=i({logging:(Na=C.logging)!==null&&Na!==void 0?Na:!0,cache:C.cache},Y),Ee={windowWidth:(_o=C.windowWidth)!==null&&_o!==void 0?_o:R.innerWidth,windowHeight:(Aa=C.windowHeight)!==null&&Aa!==void 0?Aa:R.innerHeight,scrollX:(Zi=C.scrollX)!==null&&Zi!==void 0?Zi:R.pageXOffset,scrollY:(fo=C.scrollY)!==null&&fo!==void 0?fo:R.pageYOffset},Ke=new d(Ee.scrollX,Ee.scrollY,Ee.windowWidth,Ee.windowHeight),ze=new da(he,Ke),ht=(eo=C.foreignObjectRendering)!==null&&eo!==void 0?eo:!1,wt={allowTaint:(ao=C.allowTaint)!==null&&ao!==void 0?ao:!1,onclone:C.onclone,ignoreElements:C.ignoreElements,inlineImages:ht,copyStyles:ht},ze.logger.debug("Starting document clone with size "+Ke.width+"x"+Ke.height+" scrolled to "+-Ke.left+","+-Ke.top),Ct=new Ap(ze,T,wt),Jt=Ct.clonedReferenceElement,Jt?[4,Ct.toIFrame(O,Ke)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return $s=zc.sent(),Fs=kh(Jt)||zm(Jt)?o(Jt.ownerDocument):h(ze,Jt),_s=Fs.width,fn=Fs.height,Js=Fs.left,Xs=Fs.top,dr=zA(ze,Jt,C.backgroundColor),ar={canvas:C.canvas,backgroundColor:dr,scale:(Vl=(jl=C.scale)!==null&&jl!==void 0?jl:R.devicePixelRatio)!==null&&Vl!==void 0?Vl:1,x:((Hc=C.x)!==null&&Hc!==void 0?Hc:0)+Js,y:((Sd=C.y)!==null&&Sd!==void 0?Sd:0)+Xs,width:(Nd=C.width)!==null&&Nd!==void 0?Nd:Math.ceil(_s),height:(wl=C.height)!==null&&wl!==void 0?wl:Math.ceil(fn)},ht?(ze.logger.debug("Document cloned, using foreign object rendering"),pr=new Sa(ze,ar),[4,pr.render(Jt)]):[3,3];case 2:return Mn=zc.sent(),[3,5];case 3:return ze.logger.debug("Document cloned, element located at "+Js+","+Xs+" with size "+_s+"x"+fn+" using computed rendering"),ze.logger.debug("Starting DOM parsing"),qs=tp(ze,Jt),dr===qs.styles.backgroundColor&&(qs.styles.backgroundColor=Wa.TRANSPARENT),ze.logger.debug("Starting renderer for element at "+ar.x+","+ar.y+" with size "+ar.width+"x"+ar.height),pr=new lg(ze,ar),[4,pr.render(qs)];case 4:Mn=zc.sent(),zc.label=5;case 5:return(!((Kc=C.removeContainer)!==null&&Kc!==void 0)||Kc)&&(Ap.destroy($s)||ze.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),ze.logger.debug("Finished rendering"),[2,Mn]}})})},zA=function(T,C,O){var R=C.ownerDocument,Y=R.documentElement?tl(T,getComputedStyle(R.documentElement).backgroundColor):Wa.TRANSPARENT,he=R.body?tl(T,getComputedStyle(R.body).backgroundColor):Wa.TRANSPARENT,Ee=typeof O=="string"?tl(T,O):O===null?Wa.TRANSPARENT:4294967295;return C===R.documentElement?Ei(Y)?Ei(he)?Ee:he:Y:Ee};return al}))})(By)),By.exports}/*!
 * html2pdf.js v0.12.1
 * Copyright (c) 2025 Erik Koopmans
 * Released under the MIT License.
 */var GB;function IG(){return GB||(GB=1,(function(t,s){(function(r,i){t.exports=i(EG,FG())})(self,function(n,r){return(function(){var i={"./node_modules/core-js/internals/a-callable.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-callable.js"),y=o("./node_modules/core-js/internals/try-to-string.js"),p=TypeError;d.exports=function(j){if(m(j))return j;throw new p(y(j)+" is not a function")}}),"./node_modules/core-js/internals/a-constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-constructor.js"),y=o("./node_modules/core-js/internals/try-to-string.js"),p=TypeError;d.exports=function(j){if(m(j))return j;throw new p(y(j)+" is not a constructor")}}),"./node_modules/core-js/internals/a-possible-prototype.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-possible-prototype.js"),y=String,p=TypeError;d.exports=function(j){if(m(j))return j;throw new p("Can't set "+y(j)+" as a prototype")}}),"./node_modules/core-js/internals/a-set.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/set-helpers.js").has;d.exports=function(y){return m(y),y}}),"./node_modules/core-js/internals/add-to-unscopables.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/well-known-symbol.js"),y=o("./node_modules/core-js/internals/object-create.js"),p=o("./node_modules/core-js/internals/object-define-property.js").f,j=m("unscopables"),b=Array.prototype;b[j]===void 0&&p(b,j,{configurable:!0,value:y(null)}),d.exports=function(w){b[j][w]=!0}}),"./node_modules/core-js/internals/an-instance.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/object-is-prototype-of.js"),y=TypeError;d.exports=function(p,j){if(m(j,p))return p;throw new y("Incorrect invocation")}}),"./node_modules/core-js/internals/an-object.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-object.js"),y=String,p=TypeError;d.exports=function(j){if(m(j))return j;throw new p(y(j)+" is not an object")}}),"./node_modules/core-js/internals/array-buffer-non-extensible.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=m(function(){if(typeof ArrayBuffer=="function"){var y=new ArrayBuffer(8);Object.isExtensible(y)&&Object.defineProperty(y,"a",{value:8})}})}),"./node_modules/core-js/internals/array-for-each.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/array-iteration.js").forEach,y=o("./node_modules/core-js/internals/array-method-is-strict.js"),p=y("forEach");d.exports=p?[].forEach:function(b){return m(this,b,arguments.length>1?arguments[1]:void 0)}}),"./node_modules/core-js/internals/array-from.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-bind-context.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-object.js"),j=o("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),b=o("./node_modules/core-js/internals/is-array-iterator-method.js"),w=o("./node_modules/core-js/internals/is-constructor.js"),B=o("./node_modules/core-js/internals/length-of-array-like.js"),L=o("./node_modules/core-js/internals/create-property.js"),Q=o("./node_modules/core-js/internals/get-iterator.js"),k=o("./node_modules/core-js/internals/get-iterator-method.js"),z=Array;d.exports=function($){var q=p($),X=w(this),fe=arguments.length,ee=fe>1?arguments[1]:void 0,le=ee!==void 0;le&&(ee=m(ee,fe>2?arguments[2]:void 0));var ue=k(q),te=0,re,ne,oe,se,xe,Me;if(ue&&!(this===z&&b(ue)))for(ne=X?new this:[],se=Q(q,ue),xe=se.next;!(oe=y(xe,se)).done;te++)Me=le?j(se,ee,[oe.value,te],!0):oe.value,L(ne,te,Me);else for(re=B(q),ne=X?new this(re):z(re);re>te;te++)Me=le?ee(q[te],te):q[te],L(ne,te,Me);return ne.length=te,ne}}),"./node_modules/core-js/internals/array-includes.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-indexed-object.js"),y=o("./node_modules/core-js/internals/to-absolute-index.js"),p=o("./node_modules/core-js/internals/length-of-array-like.js"),j=function(b){return function(w,B,L){var Q=m(w),k=p(Q);if(k===0)return!b&&-1;var z=y(L,k),J;if(b&&B!==B){for(;k>z;)if(J=Q[z++],J!==J)return!0}else for(;k>z;z++)if((b||z in Q)&&Q[z]===B)return b||z||0;return!b&&-1}};d.exports={includes:j(!0),indexOf:j(!1)}}),"./node_modules/core-js/internals/array-iteration.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-bind-context.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/indexed-object.js"),j=o("./node_modules/core-js/internals/to-object.js"),b=o("./node_modules/core-js/internals/length-of-array-like.js"),w=o("./node_modules/core-js/internals/array-species-create.js"),B=y([].push),L=function(Q){var k=Q===1,z=Q===2,J=Q===3,$=Q===4,q=Q===6,X=Q===7,fe=Q===5||q;return function(ee,le,ue,te){for(var re=j(ee),ne=p(re),oe=b(ne),se=m(le,ue),xe=0,Me=te||w,me=k?Me(ee,oe):z||X?Me(ee,0):void 0,Z,ge;oe>xe;xe++)if((fe||xe in ne)&&(Z=ne[xe],ge=se(Z,xe,re),Q))if(k)me[xe]=ge;else if(ge)switch(Q){case 3:return!0;case 5:return Z;case 6:return xe;case 2:B(me,Z)}else switch(Q){case 4:return!1;case 7:B(me,Z)}return q?-1:J||$?$:me}};d.exports={forEach:L(0),map:L(1),filter:L(2),some:L(3),every:L(4),find:L(5),findIndex:L(6),filterReject:L(7)}}),"./node_modules/core-js/internals/array-method-has-species-support.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/well-known-symbol.js"),p=o("./node_modules/core-js/internals/environment-v8-version.js"),j=y("species");d.exports=function(b){return p>=51||!m(function(){var w=[],B=w.constructor={};return B[j]=function(){return{foo:1}},w[b](Boolean).foo!==1})}}),"./node_modules/core-js/internals/array-method-is-strict.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=function(y,p){var j=[][y];return!!j&&m(function(){j.call(null,p||function(){return 1},1)})}}),"./node_modules/core-js/internals/array-slice.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js");d.exports=m([].slice)}),"./node_modules/core-js/internals/array-species-constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-array.js"),y=o("./node_modules/core-js/internals/is-constructor.js"),p=o("./node_modules/core-js/internals/is-object.js"),j=o("./node_modules/core-js/internals/well-known-symbol.js"),b=j("species"),w=Array;d.exports=function(B){var L;return m(B)&&(L=B.constructor,y(L)&&(L===w||m(L.prototype))?L=void 0:p(L)&&(L=L[b],L===null&&(L=void 0))),L===void 0?w:L}}),"./node_modules/core-js/internals/array-species-create.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/array-species-constructor.js");d.exports=function(y,p){return new(m(y))(p===0?0:p)}}),"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/an-object.js"),y=o("./node_modules/core-js/internals/iterator-close.js");d.exports=function(p,j,b,w){try{return w?j(m(b)[0],b[1]):j(b)}catch(B){y(p,"throw",B)}}}),"./node_modules/core-js/internals/check-correctness-of-iteration.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/well-known-symbol.js"),y=m("iterator"),p=!1;try{var j=0,b={next:function(){return{done:!!j++}},return:function(){p=!0}};b[y]=function(){return this},Array.from(b,function(){throw 2})}catch{}d.exports=function(w,B){try{if(!B&&!p)return!1}catch{return!1}var L=!1;try{var Q={};Q[y]=function(){return{next:function(){return{done:L=!0}}}},w(Q)}catch{}return L}}),"./node_modules/core-js/internals/classof-raw.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=m({}.toString),p=m("".slice);d.exports=function(j){return p(y(j),8,-1)}}),"./node_modules/core-js/internals/classof.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-string-tag-support.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/classof-raw.js"),j=o("./node_modules/core-js/internals/well-known-symbol.js"),b=j("toStringTag"),w=Object,B=p((function(){return arguments})())==="Arguments",L=function(Q,k){try{return Q[k]}catch{}};d.exports=m?p:function(Q){var k,z,J;return Q===void 0?"Undefined":Q===null?"Null":typeof(z=L(k=w(Q),b))=="string"?z:B?p(k):(J=p(k))==="Object"&&y(k.callee)?"Arguments":J}}),"./node_modules/core-js/internals/collection-strong.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/object-create.js"),y=o("./node_modules/core-js/internals/define-built-in-accessor.js"),p=o("./node_modules/core-js/internals/define-built-ins.js"),j=o("./node_modules/core-js/internals/function-bind-context.js"),b=o("./node_modules/core-js/internals/an-instance.js"),w=o("./node_modules/core-js/internals/is-null-or-undefined.js"),B=o("./node_modules/core-js/internals/iterate.js"),L=o("./node_modules/core-js/internals/iterator-define.js"),Q=o("./node_modules/core-js/internals/create-iter-result-object.js"),k=o("./node_modules/core-js/internals/set-species.js"),z=o("./node_modules/core-js/internals/descriptors.js"),J=o("./node_modules/core-js/internals/internal-metadata.js").fastKey,$=o("./node_modules/core-js/internals/internal-state.js"),q=$.set,X=$.getterFor;d.exports={getConstructor:function(fe,ee,le,ue){var te=fe(function(xe,Me){b(xe,re),q(xe,{type:ee,index:m(null),first:null,last:null,size:0}),z||(xe.size=0),w(Me)||B(Me,xe[ue],{that:xe,AS_ENTRIES:le})}),re=te.prototype,ne=X(ee),oe=function(xe,Me,me){var Z=ne(xe),ge=se(xe,Me),we,pe;return ge?ge.value=me:(Z.last=ge={index:pe=J(Me,!0),key:Me,value:me,previous:we=Z.last,next:null,removed:!1},Z.first||(Z.first=ge),we&&(we.next=ge),z?Z.size++:xe.size++,pe!=="F"&&(Z.index[pe]=ge)),xe},se=function(xe,Me){var me=ne(xe),Z=J(Me),ge;if(Z!=="F")return me.index[Z];for(ge=me.first;ge;ge=ge.next)if(ge.key===Me)return ge};return p(re,{clear:function(){for(var Me=this,me=ne(Me),Z=me.first;Z;)Z.removed=!0,Z.previous&&(Z.previous=Z.previous.next=null),Z=Z.next;me.first=me.last=null,me.index=m(null),z?me.size=0:Me.size=0},delete:function(xe){var Me=this,me=ne(Me),Z=se(Me,xe);if(Z){var ge=Z.next,we=Z.previous;delete me.index[Z.index],Z.removed=!0,we&&(we.next=ge),ge&&(ge.previous=we),me.first===Z&&(me.first=ge),me.last===Z&&(me.last=we),z?me.size--:Me.size--}return!!Z},forEach:function(Me){for(var me=ne(this),Z=j(Me,arguments.length>1?arguments[1]:void 0),ge;ge=ge?ge.next:me.first;)for(Z(ge.value,ge.key,this);ge&&ge.removed;)ge=ge.previous},has:function(Me){return!!se(this,Me)}}),p(re,le?{get:function(Me){var me=se(this,Me);return me&&me.value},set:function(Me,me){return oe(this,Me===0?0:Me,me)}}:{add:function(Me){return oe(this,Me=Me===0?0:Me,Me)}}),z&&y(re,"size",{configurable:!0,get:function(){return ne(this).size}}),te},setStrong:function(fe,ee,le){var ue=ee+" Iterator",te=X(ee),re=X(ue);L(fe,ee,function(ne,oe){q(this,{type:ue,target:ne,state:te(ne),kind:oe,last:null})},function(){for(var ne=re(this),oe=ne.kind,se=ne.last;se&&se.removed;)se=se.previous;return!ne.target||!(ne.last=se=se?se.next:ne.state.first)?(ne.target=null,Q(void 0,!0)):Q(oe==="keys"?se.key:oe==="values"?se.value:[se.key,se.value],!1)},le?"entries":"values",!le,!0),k(ee)}}}),"./node_modules/core-js/internals/collection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/function-uncurry-this.js"),j=o("./node_modules/core-js/internals/is-forced.js"),b=o("./node_modules/core-js/internals/define-built-in.js"),w=o("./node_modules/core-js/internals/internal-metadata.js"),B=o("./node_modules/core-js/internals/iterate.js"),L=o("./node_modules/core-js/internals/an-instance.js"),Q=o("./node_modules/core-js/internals/is-callable.js"),k=o("./node_modules/core-js/internals/is-null-or-undefined.js"),z=o("./node_modules/core-js/internals/is-object.js"),J=o("./node_modules/core-js/internals/fails.js"),$=o("./node_modules/core-js/internals/check-correctness-of-iteration.js"),q=o("./node_modules/core-js/internals/set-to-string-tag.js"),X=o("./node_modules/core-js/internals/inherit-if-required.js");d.exports=function(fe,ee,le){var ue=fe.indexOf("Map")!==-1,te=fe.indexOf("Weak")!==-1,re=ue?"set":"add",ne=y[fe],oe=ne&&ne.prototype,se=ne,xe={},Me=function(je){var Ne=p(oe[je]);b(oe,je,je==="add"?function(Qe){return Ne(this,Qe===0?0:Qe),this}:je==="delete"?function(Je){return te&&!z(Je)?!1:Ne(this,Je===0?0:Je)}:je==="get"?function(Qe){return te&&!z(Qe)?void 0:Ne(this,Qe===0?0:Qe)}:je==="has"?function(Qe){return te&&!z(Qe)?!1:Ne(this,Qe===0?0:Qe)}:function(Qe,pt){return Ne(this,Qe===0?0:Qe,pt),this})},me=j(fe,!Q(ne)||!(te||oe.forEach&&!J(function(){new ne().entries().next()})));if(me)se=le.getConstructor(ee,fe,ue,re),w.enable();else if(j(fe,!0)){var Z=new se,ge=Z[re](te?{}:-0,1)!==Z,we=J(function(){Z.has(1)}),pe=$(function(je){new ne(je)}),be=!te&&J(function(){for(var je=new ne,Ne=5;Ne--;)je[re](Ne,Ne);return!je.has(-0)});pe||(se=ee(function(je,Ne){L(je,oe);var Je=X(new ne,je,se);return k(Ne)||B(Ne,Je[re],{that:Je,AS_ENTRIES:ue}),Je}),se.prototype=oe,oe.constructor=se),(we||be)&&(Me("delete"),Me("has"),ue&&Me("get")),(be||ge)&&Me(re),te&&oe.clear&&delete oe.clear}return xe[fe]=se,m({global:!0,constructor:!0,forced:se!==ne},xe),q(se,fe),te||le.setStrong(se,fe,ue),se}}),"./node_modules/core-js/internals/copy-constructor-properties.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/has-own-property.js"),y=o("./node_modules/core-js/internals/own-keys.js"),p=o("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),j=o("./node_modules/core-js/internals/object-define-property.js");d.exports=function(b,w,B){for(var L=y(w),Q=j.f,k=p.f,z=0;z<L.length;z++){var J=L[z];!m(b,J)&&!(B&&m(B,J))&&Q(b,J,k(w,J))}}}),"./node_modules/core-js/internals/correct-prototype-getter.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=!m(function(){function y(){}return y.prototype.constructor=null,Object.getPrototypeOf(new y)!==y.prototype})}),"./node_modules/core-js/internals/create-html.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/require-object-coercible.js"),p=o("./node_modules/core-js/internals/to-string.js"),j=/"/g,b=m("".replace);d.exports=function(w,B,L,Q){var k=p(y(w)),z="<"+B;return L!==""&&(z+=" "+L+'="'+b(p(Q),j,"&quot;")+'"'),z+">"+k+"</"+B+">"}}),"./node_modules/core-js/internals/create-iter-result-object.js":(function(d){d.exports=function(h,o){return{value:h,done:o}}}),"./node_modules/core-js/internals/create-non-enumerable-property.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/object-define-property.js"),p=o("./node_modules/core-js/internals/create-property-descriptor.js");d.exports=m?function(j,b,w){return y.f(j,b,p(1,w))}:function(j,b,w){return j[b]=w,j}}),"./node_modules/core-js/internals/create-property-descriptor.js":(function(d){d.exports=function(h,o){return{enumerable:!(h&1),configurable:!(h&2),writable:!(h&4),value:o}}}),"./node_modules/core-js/internals/create-property.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/object-define-property.js"),p=o("./node_modules/core-js/internals/create-property-descriptor.js");d.exports=function(j,b,w){m?y.f(j,b,p(0,w)):j[b]=w}}),"./node_modules/core-js/internals/define-built-in-accessor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/make-built-in.js"),y=o("./node_modules/core-js/internals/object-define-property.js");d.exports=function(p,j,b){return b.get&&m(b.get,j,{getter:!0}),b.set&&m(b.set,j,{setter:!0}),y.f(p,j,b)}}),"./node_modules/core-js/internals/define-built-in.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-callable.js"),y=o("./node_modules/core-js/internals/object-define-property.js"),p=o("./node_modules/core-js/internals/make-built-in.js"),j=o("./node_modules/core-js/internals/define-global-property.js");d.exports=function(b,w,B,L){L||(L={});var Q=L.enumerable,k=L.name!==void 0?L.name:w;if(m(B)&&p(B,k,L),L.global)Q?b[w]=B:j(w,B);else{try{L.unsafe?b[w]&&(Q=!0):delete b[w]}catch{}Q?b[w]=B:y.f(b,w,{value:B,enumerable:!1,configurable:!L.nonConfigurable,writable:!L.nonWritable})}return b}}),"./node_modules/core-js/internals/define-built-ins.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/define-built-in.js");d.exports=function(y,p,j){for(var b in p)m(y,b,p[b],j);return y}}),"./node_modules/core-js/internals/define-global-property.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=Object.defineProperty;d.exports=function(p,j){try{y(m,p,{value:j,configurable:!0,writable:!0})}catch{m[p]=j}return j}}),"./node_modules/core-js/internals/descriptors.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=!m(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})}),"./node_modules/core-js/internals/document-create-element.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/is-object.js"),p=m.document,j=y(p)&&y(p.createElement);d.exports=function(b){return j?p.createElement(b):{}}}),"./node_modules/core-js/internals/does-not-exceed-safe-integer.js":(function(d){var h=TypeError,o=9007199254740991;d.exports=function(m){if(m>o)throw h("Maximum allowed index exceeded");return m}}),"./node_modules/core-js/internals/dom-iterables.js":(function(d){d.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}),"./node_modules/core-js/internals/dom-token-list-prototype.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/document-create-element.js"),y=m("span").classList,p=y&&y.constructor&&y.constructor.prototype;d.exports=p===Object.prototype?void 0:p}),"./node_modules/core-js/internals/enum-bug-keys.js":(function(d){d.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),"./node_modules/core-js/internals/environment-is-ios-pebble.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/environment-user-agent.js");d.exports=/ipad|iphone|ipod/i.test(m)&&typeof Pebble<"u"}),"./node_modules/core-js/internals/environment-is-ios.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/environment-user-agent.js");d.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(m)}),"./node_modules/core-js/internals/environment-is-node.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/environment.js");d.exports=m==="NODE"}),"./node_modules/core-js/internals/environment-is-webos-webkit.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/environment-user-agent.js");d.exports=/web0s(?!.*chrome)/i.test(m)}),"./node_modules/core-js/internals/environment-user-agent.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=m.navigator,p=y&&y.userAgent;d.exports=p?String(p):""}),"./node_modules/core-js/internals/environment-v8-version.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/environment-user-agent.js"),p=m.process,j=m.Deno,b=p&&p.versions||j&&j.version,w=b&&b.v8,B,L;w&&(B=w.split("."),L=B[0]>0&&B[0]<4?1:+(B[0]+B[1])),!L&&y&&(B=y.match(/Edge\/(\d+)/),(!B||B[1]>=74)&&(B=y.match(/Chrome\/(\d+)/),B&&(L=+B[1]))),d.exports=L}),"./node_modules/core-js/internals/environment.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/environment-user-agent.js"),p=o("./node_modules/core-js/internals/classof-raw.js"),j=function(b){return y.slice(0,b.length)===b};d.exports=(function(){return j("Bun/")?"BUN":j("Cloudflare-Workers")?"CLOUDFLARE":j("Deno/")?"DENO":j("Node.js/")?"NODE":m.Bun&&typeof Bun.version=="string"?"BUN":m.Deno&&typeof Deno.version=="object"?"DENO":p(m.process)==="process"?"NODE":m.window&&m.document?"BROWSER":"REST"})()}),"./node_modules/core-js/internals/export.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,p=o("./node_modules/core-js/internals/create-non-enumerable-property.js"),j=o("./node_modules/core-js/internals/define-built-in.js"),b=o("./node_modules/core-js/internals/define-global-property.js"),w=o("./node_modules/core-js/internals/copy-constructor-properties.js"),B=o("./node_modules/core-js/internals/is-forced.js");d.exports=function(L,Q){var k=L.target,z=L.global,J=L.stat,$,q,X,fe,ee,le;if(z?q=m:J?q=m[k]||b(k,{}):q=m[k]&&m[k].prototype,q)for(X in Q){if(ee=Q[X],L.dontCallGetSet?(le=y(q,X),fe=le&&le.value):fe=q[X],$=B(z?X:k+(J?".":"#")+X,L.forced),!$&&fe!==void 0){if(typeof ee==typeof fe)continue;w(ee,fe)}(L.sham||fe&&fe.sham)&&p(ee,"sham",!0),j(q,X,ee,L)}}}),"./node_modules/core-js/internals/fails.js":(function(d){d.exports=function(h){try{return!!h()}catch{return!0}}}),"./node_modules/core-js/internals/freezing.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=!m(function(){return Object.isExtensible(Object.preventExtensions({}))})}),"./node_modules/core-js/internals/function-apply.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-bind-native.js"),y=Function.prototype,p=y.apply,j=y.call;d.exports=typeof Reflect=="object"&&Reflect.apply||(m?j.bind(p):function(){return j.apply(p,arguments)})}),"./node_modules/core-js/internals/function-bind-context.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this-clause.js"),y=o("./node_modules/core-js/internals/a-callable.js"),p=o("./node_modules/core-js/internals/function-bind-native.js"),j=m(m.bind);d.exports=function(b,w){return y(b),w===void 0?b:p?j(b,w):function(){return b.apply(w,arguments)}}}),"./node_modules/core-js/internals/function-bind-native.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=!m(function(){var y=(function(){}).bind();return typeof y!="function"||y.hasOwnProperty("prototype")})}),"./node_modules/core-js/internals/function-call.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-bind-native.js"),y=Function.prototype.call;d.exports=m?y.bind(y):function(){return y.apply(y,arguments)}}),"./node_modules/core-js/internals/function-name.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/has-own-property.js"),p=Function.prototype,j=m&&Object.getOwnPropertyDescriptor,b=y(p,"name"),w=b&&(function(){}).name==="something",B=b&&(!m||m&&j(p,"name").configurable);d.exports={EXISTS:b,PROPER:w,CONFIGURABLE:B}}),"./node_modules/core-js/internals/function-uncurry-this-accessor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/a-callable.js");d.exports=function(p,j,b){try{return m(y(Object.getOwnPropertyDescriptor(p,j)[b]))}catch{}}}),"./node_modules/core-js/internals/function-uncurry-this-clause.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/classof-raw.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js");d.exports=function(p){if(m(p)==="Function")return y(p)}}),"./node_modules/core-js/internals/function-uncurry-this.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-bind-native.js"),y=Function.prototype,p=y.call,j=m&&y.bind.bind(p,p);d.exports=m?j:function(b){return function(){return p.apply(b,arguments)}}}),"./node_modules/core-js/internals/get-built-in.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=function(j){return y(j)?j:void 0};d.exports=function(j,b){return arguments.length<2?p(m[j]):m[j]&&m[j][b]}}),"./node_modules/core-js/internals/get-iterator-direct.js":(function(d){d.exports=function(h){return{iterator:h,next:h.next,done:!1}}}),"./node_modules/core-js/internals/get-iterator-method.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/classof.js"),y=o("./node_modules/core-js/internals/get-method.js"),p=o("./node_modules/core-js/internals/is-null-or-undefined.js"),j=o("./node_modules/core-js/internals/iterators.js"),b=o("./node_modules/core-js/internals/well-known-symbol.js"),w=b("iterator");d.exports=function(B){if(!p(B))return y(B,w)||y(B,"@@iterator")||j[m(B)]}}),"./node_modules/core-js/internals/get-iterator.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/a-callable.js"),p=o("./node_modules/core-js/internals/an-object.js"),j=o("./node_modules/core-js/internals/try-to-string.js"),b=o("./node_modules/core-js/internals/get-iterator-method.js"),w=TypeError;d.exports=function(B,L){var Q=arguments.length<2?b(B):L;if(y(Q))return p(m(Q,B));throw new w(j(B)+" is not iterable")}}),"./node_modules/core-js/internals/get-json-replacer-function.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/is-array.js"),p=o("./node_modules/core-js/internals/is-callable.js"),j=o("./node_modules/core-js/internals/classof-raw.js"),b=o("./node_modules/core-js/internals/to-string.js"),w=m([].push);d.exports=function(B){if(p(B))return B;if(y(B)){for(var L=B.length,Q=[],k=0;k<L;k++){var z=B[k];typeof z=="string"?w(Q,z):(typeof z=="number"||j(z)==="Number"||j(z)==="String")&&w(Q,b(z))}var J=Q.length,$=!0;return function(q,X){if($)return $=!1,X;if(y(this))return X;for(var fe=0;fe<J;fe++)if(Q[fe]===q)return X}}}}),"./node_modules/core-js/internals/get-method.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-callable.js"),y=o("./node_modules/core-js/internals/is-null-or-undefined.js");d.exports=function(p,j){var b=p[j];return y(b)?void 0:m(b)}}),"./node_modules/core-js/internals/get-set-record.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-callable.js"),y=o("./node_modules/core-js/internals/an-object.js"),p=o("./node_modules/core-js/internals/function-call.js"),j=o("./node_modules/core-js/internals/to-integer-or-infinity.js"),b=o("./node_modules/core-js/internals/get-iterator-direct.js"),w="Invalid size",B=RangeError,L=TypeError,Q=Math.max,k=function(z,J){this.set=z,this.size=Q(J,0),this.has=m(z.has),this.keys=m(z.keys)};k.prototype={getIterator:function(){return b(y(p(this.keys,this.set)))},includes:function(z){return p(this.has,this.set,z)}},d.exports=function(z){y(z);var J=+z.size;if(J!==J)throw new L(w);var $=j(J);if($<0)throw new B(w);return new k(z,$)}}),"./node_modules/core-js/internals/global-this.js":(function(d){var h=function(o){return o&&o.Math===Math&&o};d.exports=h(typeof globalThis=="object"&&globalThis)||h(typeof window=="object"&&window)||h(typeof self=="object"&&self)||h(typeof Lw=="object"&&Lw)||h(typeof this=="object"&&this)||(function(){return this})()||Function("return this")()}),"./node_modules/core-js/internals/has-own-property.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/to-object.js"),p=m({}.hasOwnProperty);d.exports=Object.hasOwn||function(b,w){return p(y(b),w)}}),"./node_modules/core-js/internals/hidden-keys.js":(function(d){d.exports={}}),"./node_modules/core-js/internals/host-report-errors.js":(function(d){d.exports=function(h,o){try{arguments.length===1?console.error(h):console.error(h,o)}catch{}}}),"./node_modules/core-js/internals/html.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/get-built-in.js");d.exports=m("document","documentElement")}),"./node_modules/core-js/internals/ie8-dom-define.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/fails.js"),p=o("./node_modules/core-js/internals/document-create-element.js");d.exports=!m&&!y(function(){return Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a!==7})}),"./node_modules/core-js/internals/indexed-object.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/fails.js"),p=o("./node_modules/core-js/internals/classof-raw.js"),j=Object,b=m("".split);d.exports=y(function(){return!j("z").propertyIsEnumerable(0)})?function(w){return p(w)==="String"?b(w,""):j(w)}:j}),"./node_modules/core-js/internals/inherit-if-required.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-callable.js"),y=o("./node_modules/core-js/internals/is-object.js"),p=o("./node_modules/core-js/internals/object-set-prototype-of.js");d.exports=function(j,b,w){var B,L;return p&&m(B=b.constructor)&&B!==w&&y(L=B.prototype)&&L!==w.prototype&&p(j,L),j}}),"./node_modules/core-js/internals/inspect-source.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/shared-store.js"),j=m(Function.toString);y(p.inspectSource)||(p.inspectSource=function(b){return j(b)}),d.exports=p.inspectSource}),"./node_modules/core-js/internals/internal-metadata.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/hidden-keys.js"),j=o("./node_modules/core-js/internals/is-object.js"),b=o("./node_modules/core-js/internals/has-own-property.js"),w=o("./node_modules/core-js/internals/object-define-property.js").f,B=o("./node_modules/core-js/internals/object-get-own-property-names.js"),L=o("./node_modules/core-js/internals/object-get-own-property-names-external.js"),Q=o("./node_modules/core-js/internals/object-is-extensible.js"),k=o("./node_modules/core-js/internals/uid.js"),z=o("./node_modules/core-js/internals/freezing.js"),J=!1,$=k("meta"),q=0,X=function(re){w(re,$,{value:{objectID:"O"+q++,weakData:{}}})},fe=function(re,ne){if(!j(re))return typeof re=="symbol"?re:(typeof re=="string"?"S":"P")+re;if(!b(re,$)){if(!Q(re))return"F";if(!ne)return"E";X(re)}return re[$].objectID},ee=function(re,ne){if(!b(re,$)){if(!Q(re))return!0;if(!ne)return!1;X(re)}return re[$].weakData},le=function(re){return z&&J&&Q(re)&&!b(re,$)&&X(re),re},ue=function(){te.enable=function(){},J=!0;var re=B.f,ne=y([].splice),oe={};oe[$]=1,re(oe).length&&(B.f=function(se){for(var xe=re(se),Me=0,me=xe.length;Me<me;Me++)if(xe[Me]===$){ne(xe,Me,1);break}return xe},m({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:L.f}))},te=d.exports={enable:ue,fastKey:fe,getWeakData:ee,onFreeze:le};p[$]=!0}),"./node_modules/core-js/internals/internal-state.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/weak-map-basic-detection.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/is-object.js"),j=o("./node_modules/core-js/internals/create-non-enumerable-property.js"),b=o("./node_modules/core-js/internals/has-own-property.js"),w=o("./node_modules/core-js/internals/shared-store.js"),B=o("./node_modules/core-js/internals/shared-key.js"),L=o("./node_modules/core-js/internals/hidden-keys.js"),Q="Object already initialized",k=y.TypeError,z=y.WeakMap,J,$,q,X=function(ue){return q(ue)?$(ue):J(ue,{})},fe=function(ue){return function(te){var re;if(!p(te)||(re=$(te)).type!==ue)throw new k("Incompatible receiver, "+ue+" required");return re}};if(m||w.state){var ee=w.state||(w.state=new z);ee.get=ee.get,ee.has=ee.has,ee.set=ee.set,J=function(ue,te){if(ee.has(ue))throw new k(Q);return te.facade=ue,ee.set(ue,te),te},$=function(ue){return ee.get(ue)||{}},q=function(ue){return ee.has(ue)}}else{var le=B("state");L[le]=!0,J=function(ue,te){if(b(ue,le))throw new k(Q);return te.facade=ue,j(ue,le,te),te},$=function(ue){return b(ue,le)?ue[le]:{}},q=function(ue){return b(ue,le)}}d.exports={set:J,get:$,has:q,enforce:X,getterFor:fe}}),"./node_modules/core-js/internals/is-array-iterator-method.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/well-known-symbol.js"),y=o("./node_modules/core-js/internals/iterators.js"),p=m("iterator"),j=Array.prototype;d.exports=function(b){return b!==void 0&&(y.Array===b||j[p]===b)}}),"./node_modules/core-js/internals/is-array.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/classof-raw.js");d.exports=Array.isArray||function(p){return m(p)==="Array"}}),"./node_modules/core-js/internals/is-callable.js":(function(d){var h=typeof document=="object"&&document.all;d.exports=typeof h>"u"&&h!==void 0?function(o){return typeof o=="function"||o===h}:function(o){return typeof o=="function"}}),"./node_modules/core-js/internals/is-constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/fails.js"),p=o("./node_modules/core-js/internals/is-callable.js"),j=o("./node_modules/core-js/internals/classof.js"),b=o("./node_modules/core-js/internals/get-built-in.js"),w=o("./node_modules/core-js/internals/inspect-source.js"),B=function(){},L=b("Reflect","construct"),Q=/^\s*(?:class|function)\b/,k=m(Q.exec),z=!Q.test(B),J=function(X){if(!p(X))return!1;try{return L(B,[],X),!0}catch{return!1}},$=function(X){if(!p(X))return!1;switch(j(X)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return z||!!k(Q,w(X))}catch{return!0}};$.sham=!0,d.exports=!L||y(function(){var q;return J(J.call)||!J(Object)||!J(function(){q=!0})||q})?$:J}),"./node_modules/core-js/internals/is-forced.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=/#|\.prototype\./,j=function(Q,k){var z=w[b(Q)];return z===L?!0:z===B?!1:y(k)?m(k):!!k},b=j.normalize=function(Q){return String(Q).replace(p,".").toLowerCase()},w=j.data={},B=j.NATIVE="N",L=j.POLYFILL="P";d.exports=j}),"./node_modules/core-js/internals/is-iterable.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/classof.js"),y=o("./node_modules/core-js/internals/has-own-property.js"),p=o("./node_modules/core-js/internals/is-null-or-undefined.js"),j=o("./node_modules/core-js/internals/well-known-symbol.js"),b=o("./node_modules/core-js/internals/iterators.js"),w=j("iterator"),B=Object;d.exports=function(L){if(p(L))return!1;var Q=B(L);return Q[w]!==void 0||"@@iterator"in Q||y(b,m(Q))}}),"./node_modules/core-js/internals/is-null-or-undefined.js":(function(d){d.exports=function(h){return h==null}}),"./node_modules/core-js/internals/is-object.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-callable.js");d.exports=function(y){return typeof y=="object"?y!==null:m(y)}}),"./node_modules/core-js/internals/is-possible-prototype.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-object.js");d.exports=function(y){return m(y)||y===null}}),"./node_modules/core-js/internals/is-pure.js":(function(d){d.exports=!1}),"./node_modules/core-js/internals/is-symbol.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/get-built-in.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/object-is-prototype-of.js"),j=o("./node_modules/core-js/internals/use-symbol-as-uid.js"),b=Object;d.exports=j?function(w){return typeof w=="symbol"}:function(w){var B=m("Symbol");return y(B)&&p(B.prototype,b(w))}}),"./node_modules/core-js/internals/iterate-simple.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js");d.exports=function(y,p,j){for(var b=j?y:y.iterator,w=y.next,B,L;!(B=m(w,b)).done;)if(L=p(B.value),L!==void 0)return L}}),"./node_modules/core-js/internals/iterate.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-bind-context.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/an-object.js"),j=o("./node_modules/core-js/internals/try-to-string.js"),b=o("./node_modules/core-js/internals/is-array-iterator-method.js"),w=o("./node_modules/core-js/internals/length-of-array-like.js"),B=o("./node_modules/core-js/internals/object-is-prototype-of.js"),L=o("./node_modules/core-js/internals/get-iterator.js"),Q=o("./node_modules/core-js/internals/get-iterator-method.js"),k=o("./node_modules/core-js/internals/iterator-close.js"),z=TypeError,J=function(q,X){this.stopped=q,this.result=X},$=J.prototype;d.exports=function(q,X,fe){var ee=fe&&fe.that,le=!!(fe&&fe.AS_ENTRIES),ue=!!(fe&&fe.IS_RECORD),te=!!(fe&&fe.IS_ITERATOR),re=!!(fe&&fe.INTERRUPTED),ne=m(X,ee),oe,se,xe,Me,me,Z,ge,we=function(be){return oe&&k(oe,"normal"),new J(!0,be)},pe=function(be){return le?(p(be),re?ne(be[0],be[1],we):ne(be[0],be[1])):re?ne(be,we):ne(be)};if(ue)oe=q.iterator;else if(te)oe=q;else{if(se=Q(q),!se)throw new z(j(q)+" is not iterable");if(b(se)){for(xe=0,Me=w(q);Me>xe;xe++)if(me=pe(q[xe]),me&&B($,me))return me;return new J(!1)}oe=L(q,se)}for(Z=ue?q.next:oe.next;!(ge=y(Z,oe)).done;){try{me=pe(ge.value)}catch(be){k(oe,"throw",be)}if(typeof me=="object"&&me&&B($,me))return me}return new J(!1)}}),"./node_modules/core-js/internals/iterator-close-all.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/iterator-close.js");d.exports=function(y,p,j){for(var b=y.length-1;b>=0;b--)if(y[b]!==void 0)try{j=m(y[b].iterator,p,j)}catch(w){p="throw",j=w}if(p==="throw")throw j;return j}}),"./node_modules/core-js/internals/iterator-close.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/an-object.js"),p=o("./node_modules/core-js/internals/get-method.js");d.exports=function(j,b,w){var B,L;y(j);try{if(B=p(j,"return"),!B){if(b==="throw")throw w;return w}B=m(B,j)}catch(Q){L=!0,B=Q}if(b==="throw")throw w;if(L)throw B;return y(B),w}}),"./node_modules/core-js/internals/iterator-create-constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,y=o("./node_modules/core-js/internals/object-create.js"),p=o("./node_modules/core-js/internals/create-property-descriptor.js"),j=o("./node_modules/core-js/internals/set-to-string-tag.js"),b=o("./node_modules/core-js/internals/iterators.js"),w=function(){return this};d.exports=function(B,L,Q,k){var z=L+" Iterator";return B.prototype=y(m,{next:p(+!k,Q)}),j(B,z,!1,!0),b[z]=w,B}}),"./node_modules/core-js/internals/iterator-create-proxy.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/object-create.js"),p=o("./node_modules/core-js/internals/create-non-enumerable-property.js"),j=o("./node_modules/core-js/internals/define-built-ins.js"),b=o("./node_modules/core-js/internals/well-known-symbol.js"),w=o("./node_modules/core-js/internals/internal-state.js"),B=o("./node_modules/core-js/internals/get-method.js"),L=o("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,Q=o("./node_modules/core-js/internals/create-iter-result-object.js"),k=o("./node_modules/core-js/internals/iterator-close.js"),z=o("./node_modules/core-js/internals/iterator-close-all.js"),J=b("toStringTag"),$="IteratorHelper",q="WrapForValidIterator",X="normal",fe="throw",ee=w.set,le=function(re){var ne=w.getterFor(re?q:$);return j(y(L),{next:function(){var se=ne(this);if(re)return se.nextHandler();if(se.done)return Q(void 0,!0);try{var xe=se.nextHandler();return se.returnHandlerResult?xe:Q(xe,se.done)}catch(Me){throw se.done=!0,Me}},return:function(){var oe=ne(this),se=oe.iterator;if(oe.done=!0,re){var xe=B(se,"return");return xe?m(xe,se):Q(void 0,!0)}if(oe.inner)try{k(oe.inner.iterator,X)}catch(Me){return k(se,fe,Me)}if(oe.openIters)try{z(oe.openIters,X)}catch(Me){return k(se,fe,Me)}return se&&k(se,X),Q(void 0,!0)}})},ue=le(!0),te=le(!1);p(te,J,"Iterator Helper"),d.exports=function(re,ne,oe){var se=function(Me,me){me?(me.iterator=Me.iterator,me.next=Me.next):me=Me,me.type=ne?q:$,me.returnHandlerResult=!!oe,me.nextHandler=re,me.counter=0,me.done=!1,ee(this,me)};return se.prototype=ne?ue:te,se}}),"./node_modules/core-js/internals/iterator-define.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/is-pure.js"),j=o("./node_modules/core-js/internals/function-name.js"),b=o("./node_modules/core-js/internals/is-callable.js"),w=o("./node_modules/core-js/internals/iterator-create-constructor.js"),B=o("./node_modules/core-js/internals/object-get-prototype-of.js"),L=o("./node_modules/core-js/internals/object-set-prototype-of.js"),Q=o("./node_modules/core-js/internals/set-to-string-tag.js"),k=o("./node_modules/core-js/internals/create-non-enumerable-property.js"),z=o("./node_modules/core-js/internals/define-built-in.js"),J=o("./node_modules/core-js/internals/well-known-symbol.js"),$=o("./node_modules/core-js/internals/iterators.js"),q=o("./node_modules/core-js/internals/iterators-core.js"),X=j.PROPER,fe=j.CONFIGURABLE,ee=q.IteratorPrototype,le=q.BUGGY_SAFARI_ITERATORS,ue=J("iterator"),te="keys",re="values",ne="entries",oe=function(){return this};d.exports=function(se,xe,Me,me,Z,ge,we){w(Me,xe,me);var pe=function(de){if(de===Z&&Qe)return Qe;if(!le&&de&&de in Ne)return Ne[de];switch(de){case te:return function(){return new Me(this,de)};case re:return function(){return new Me(this,de)};case ne:return function(){return new Me(this,de)}}return function(){return new Me(this)}},be=xe+" Iterator",je=!1,Ne=se.prototype,Je=Ne[ue]||Ne["@@iterator"]||Z&&Ne[Z],Qe=!le&&Je||pe(Z),pt=xe==="Array"&&Ne.entries||Je,Te,Ce,_e;if(pt&&(Te=B(pt.call(new se)),Te!==Object.prototype&&Te.next&&(!p&&B(Te)!==ee&&(L?L(Te,ee):b(Te[ue])||z(Te,ue,oe)),Q(Te,be,!0,!0),p&&($[be]=oe))),X&&Z===re&&Je&&Je.name!==re&&(!p&&fe?k(Ne,"name",re):(je=!0,Qe=function(){return y(Je,this)})),Z)if(Ce={values:pe(re),keys:ge?Qe:pe(te),entries:pe(ne)},we)for(_e in Ce)(le||je||!(_e in Ne))&&z(Ne,_e,Ce[_e]);else m({target:xe,proto:!0,forced:le||je},Ce);return(!p||we)&&Ne[ue]!==Qe&&z(Ne,ue,Qe,{name:Z}),$[xe]=Qe,Ce}}),"./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js":(function(d){d.exports=function(h,o){var m=typeof Iterator=="function"&&Iterator.prototype[h];if(m)try{m.call({next:null},o).next()}catch{return!0}}}),"./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js");d.exports=function(y,p){var j=m.Iterator,b=j&&j.prototype,w=b&&b[y],B=!1;if(w)try{w.call({next:function(){return{done:!0}},return:function(){B=!0}},-1)}catch(L){L instanceof p||(B=!1)}if(!B)return w}}),"./node_modules/core-js/internals/iterators-core.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/is-object.js"),j=o("./node_modules/core-js/internals/object-create.js"),b=o("./node_modules/core-js/internals/object-get-prototype-of.js"),w=o("./node_modules/core-js/internals/define-built-in.js"),B=o("./node_modules/core-js/internals/well-known-symbol.js"),L=o("./node_modules/core-js/internals/is-pure.js"),Q=B("iterator"),k=!1,z,J,$;[].keys&&($=[].keys(),"next"in $?(J=b(b($)),J!==Object.prototype&&(z=J)):k=!0);var q=!p(z)||m(function(){var X={};return z[Q].call(X)!==X});q?z={}:L&&(z=j(z)),y(z[Q])||w(z,Q,function(){return this}),d.exports={IteratorPrototype:z,BUGGY_SAFARI_ITERATORS:k}}),"./node_modules/core-js/internals/iterators.js":(function(d){d.exports={}}),"./node_modules/core-js/internals/length-of-array-like.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-length.js");d.exports=function(y){return m(y.length)}}),"./node_modules/core-js/internals/make-built-in.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/fails.js"),p=o("./node_modules/core-js/internals/is-callable.js"),j=o("./node_modules/core-js/internals/has-own-property.js"),b=o("./node_modules/core-js/internals/descriptors.js"),w=o("./node_modules/core-js/internals/function-name.js").CONFIGURABLE,B=o("./node_modules/core-js/internals/inspect-source.js"),L=o("./node_modules/core-js/internals/internal-state.js"),Q=L.enforce,k=L.get,z=String,J=Object.defineProperty,$=m("".slice),q=m("".replace),X=m([].join),fe=b&&!y(function(){return J(function(){},"length",{value:8}).length!==8}),ee=String(String).split("String"),le=d.exports=function(ue,te,re){$(z(te),0,7)==="Symbol("&&(te="["+q(z(te),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),re&&re.getter&&(te="get "+te),re&&re.setter&&(te="set "+te),(!j(ue,"name")||w&&ue.name!==te)&&(b?J(ue,"name",{value:te,configurable:!0}):ue.name=te),fe&&re&&j(re,"arity")&&ue.length!==re.arity&&J(ue,"length",{value:re.arity});try{re&&j(re,"constructor")&&re.constructor?b&&J(ue,"prototype",{writable:!1}):ue.prototype&&(ue.prototype=void 0)}catch{}var ne=Q(ue);return j(ne,"source")||(ne.source=X(ee,typeof te=="string"?te:"")),ue};Function.prototype.toString=le(function(){return p(this)&&k(this).source||B(this)},"toString")}),"./node_modules/core-js/internals/math-trunc.js":(function(d){var h=Math.ceil,o=Math.floor;d.exports=Math.trunc||function(y){var p=+y;return(p>0?o:h)(p)}}),"./node_modules/core-js/internals/microtask.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/safe-get-built-in.js"),p=o("./node_modules/core-js/internals/function-bind-context.js"),j=o("./node_modules/core-js/internals/task.js").set,b=o("./node_modules/core-js/internals/queue.js"),w=o("./node_modules/core-js/internals/environment-is-ios.js"),B=o("./node_modules/core-js/internals/environment-is-ios-pebble.js"),L=o("./node_modules/core-js/internals/environment-is-webos-webkit.js"),Q=o("./node_modules/core-js/internals/environment-is-node.js"),k=m.MutationObserver||m.WebKitMutationObserver,z=m.document,J=m.process,$=m.Promise,q=y("queueMicrotask"),X,fe,ee,le,ue;if(!q){var te=new b,re=function(){var ne,oe;for(Q&&(ne=J.domain)&&ne.exit();oe=te.get();)try{oe()}catch(se){throw te.head&&X(),se}ne&&ne.enter()};!w&&!Q&&!L&&k&&z?(fe=!0,ee=z.createTextNode(""),new k(re).observe(ee,{characterData:!0}),X=function(){ee.data=fe=!fe}):!B&&$&&$.resolve?(le=$.resolve(void 0),le.constructor=$,ue=p(le.then,le),X=function(){ue(re)}):Q?X=function(){J.nextTick(re)}:(j=p(j,m),X=function(){j(re)}),q=function(ne){te.head||X(),te.add(ne)}}d.exports=q}),"./node_modules/core-js/internals/new-promise-capability.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-callable.js"),y=TypeError,p=function(j){var b,w;this.promise=new j(function(B,L){if(b!==void 0||w!==void 0)throw new y("Bad Promise constructor");b=B,w=L}),this.resolve=m(b),this.reject=m(w)};d.exports.f=function(j){return new p(j)}}),"./node_modules/core-js/internals/object-assign.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/function-call.js"),j=o("./node_modules/core-js/internals/fails.js"),b=o("./node_modules/core-js/internals/object-keys.js"),w=o("./node_modules/core-js/internals/object-get-own-property-symbols.js"),B=o("./node_modules/core-js/internals/object-property-is-enumerable.js"),L=o("./node_modules/core-js/internals/to-object.js"),Q=o("./node_modules/core-js/internals/indexed-object.js"),k=Object.assign,z=Object.defineProperty,J=y([].concat);d.exports=!k||j(function(){if(m&&k({b:1},k(z({},"a",{enumerable:!0,get:function(){z(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var $={},q={},X=Symbol("assign detection"),fe="abcdefghijklmnopqrst";return $[X]=7,fe.split("").forEach(function(ee){q[ee]=ee}),k({},$)[X]!==7||b(k({},q)).join("")!==fe})?function(q,X){for(var fe=L(q),ee=arguments.length,le=1,ue=w.f,te=B.f;ee>le;)for(var re=Q(arguments[le++]),ne=ue?J(b(re),ue(re)):b(re),oe=ne.length,se=0,xe;oe>se;)xe=ne[se++],(!m||p(te,re,xe))&&(fe[xe]=re[xe]);return fe}:k}),"./node_modules/core-js/internals/object-create.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/an-object.js"),y=o("./node_modules/core-js/internals/object-define-properties.js"),p=o("./node_modules/core-js/internals/enum-bug-keys.js"),j=o("./node_modules/core-js/internals/hidden-keys.js"),b=o("./node_modules/core-js/internals/html.js"),w=o("./node_modules/core-js/internals/document-create-element.js"),B=o("./node_modules/core-js/internals/shared-key.js"),L=">",Q="<",k="prototype",z="script",J=B("IE_PROTO"),$=function(){},q=function(ue){return Q+z+L+ue+Q+"/"+z+L},X=function(ue){ue.write(q("")),ue.close();var te=ue.parentWindow.Object;return ue=null,te},fe=function(){var ue=w("iframe"),te="java"+z+":",re;return ue.style.display="none",b.appendChild(ue),ue.src=String(te),re=ue.contentWindow.document,re.open(),re.write(q("document.F=Object")),re.close(),re.F},ee,le=function(){try{ee=new ActiveXObject("htmlfile")}catch{}le=typeof document<"u"?document.domain&&ee?X(ee):fe():X(ee);for(var ue=p.length;ue--;)delete le[k][p[ue]];return le()};j[J]=!0,d.exports=Object.create||function(te,re){var ne;return te!==null?($[k]=m(te),ne=new $,$[k]=null,ne[J]=te):ne=le(),re===void 0?ne:y.f(ne,re)}}),"./node_modules/core-js/internals/object-define-properties.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/v8-prototype-define-bug.js"),p=o("./node_modules/core-js/internals/object-define-property.js"),j=o("./node_modules/core-js/internals/an-object.js"),b=o("./node_modules/core-js/internals/to-indexed-object.js"),w=o("./node_modules/core-js/internals/object-keys.js");h.f=m&&!y?Object.defineProperties:function(L,Q){j(L);for(var k=b(Q),z=w(Q),J=z.length,$=0,q;J>$;)p.f(L,q=z[$++],k[q]);return L}}),"./node_modules/core-js/internals/object-define-property.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/ie8-dom-define.js"),p=o("./node_modules/core-js/internals/v8-prototype-define-bug.js"),j=o("./node_modules/core-js/internals/an-object.js"),b=o("./node_modules/core-js/internals/to-property-key.js"),w=TypeError,B=Object.defineProperty,L=Object.getOwnPropertyDescriptor,Q="enumerable",k="configurable",z="writable";h.f=m?p?function($,q,X){if(j($),q=b(q),j(X),typeof $=="function"&&q==="prototype"&&"value"in X&&z in X&&!X[z]){var fe=L($,q);fe&&fe[z]&&($[q]=X.value,X={configurable:k in X?X[k]:fe[k],enumerable:Q in X?X[Q]:fe[Q],writable:!1})}return B($,q,X)}:B:function($,q,X){if(j($),q=b(q),j(X),y)try{return B($,q,X)}catch{}if("get"in X||"set"in X)throw new w("Accessors not supported");return"value"in X&&($[q]=X.value),$}}),"./node_modules/core-js/internals/object-get-own-property-descriptor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/object-property-is-enumerable.js"),j=o("./node_modules/core-js/internals/create-property-descriptor.js"),b=o("./node_modules/core-js/internals/to-indexed-object.js"),w=o("./node_modules/core-js/internals/to-property-key.js"),B=o("./node_modules/core-js/internals/has-own-property.js"),L=o("./node_modules/core-js/internals/ie8-dom-define.js"),Q=Object.getOwnPropertyDescriptor;h.f=m?Q:function(z,J){if(z=b(z),J=w(J),L)try{return Q(z,J)}catch{}if(B(z,J))return j(!y(p.f,z,J),z[J])}}),"./node_modules/core-js/internals/object-get-own-property-names-external.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/classof-raw.js"),y=o("./node_modules/core-js/internals/to-indexed-object.js"),p=o("./node_modules/core-js/internals/object-get-own-property-names.js").f,j=o("./node_modules/core-js/internals/array-slice.js"),b=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],w=function(B){try{return p(B)}catch{return j(b)}};d.exports.f=function(L){return b&&m(L)==="Window"?w(L):p(y(L))}}),"./node_modules/core-js/internals/object-get-own-property-names.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/object-keys-internal.js"),y=o("./node_modules/core-js/internals/enum-bug-keys.js"),p=y.concat("length","prototype");h.f=Object.getOwnPropertyNames||function(b){return m(b,p)}}),"./node_modules/core-js/internals/object-get-own-property-symbols.js":(function(d,h){h.f=Object.getOwnPropertySymbols}),"./node_modules/core-js/internals/object-get-prototype-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/has-own-property.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/to-object.js"),j=o("./node_modules/core-js/internals/shared-key.js"),b=o("./node_modules/core-js/internals/correct-prototype-getter.js"),w=j("IE_PROTO"),B=Object,L=B.prototype;d.exports=b?B.getPrototypeOf:function(Q){var k=p(Q);if(m(k,w))return k[w];var z=k.constructor;return y(z)&&k instanceof z?z.prototype:k instanceof B?L:null}}),"./node_modules/core-js/internals/object-is-extensible.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/is-object.js"),p=o("./node_modules/core-js/internals/classof-raw.js"),j=o("./node_modules/core-js/internals/array-buffer-non-extensible.js"),b=Object.isExtensible,w=m(function(){});d.exports=w||j?function(L){return!y(L)||j&&p(L)==="ArrayBuffer"?!1:b?b(L):!0}:b}),"./node_modules/core-js/internals/object-is-prototype-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js");d.exports=m({}.isPrototypeOf)}),"./node_modules/core-js/internals/object-keys-internal.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/has-own-property.js"),p=o("./node_modules/core-js/internals/to-indexed-object.js"),j=o("./node_modules/core-js/internals/array-includes.js").indexOf,b=o("./node_modules/core-js/internals/hidden-keys.js"),w=m([].push);d.exports=function(B,L){var Q=p(B),k=0,z=[],J;for(J in Q)!y(b,J)&&y(Q,J)&&w(z,J);for(;L.length>k;)y(Q,J=L[k++])&&(~j(z,J)||w(z,J));return z}}),"./node_modules/core-js/internals/object-keys.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/object-keys-internal.js"),y=o("./node_modules/core-js/internals/enum-bug-keys.js");d.exports=Object.keys||function(j){return m(j,y)}}),"./node_modules/core-js/internals/object-property-is-enumerable.js":(function(d,h){var o={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,y=m&&!o.call({1:2},1);h.f=y?function(j){var b=m(this,j);return!!b&&b.enumerable}:o}),"./node_modules/core-js/internals/object-set-prototype-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),y=o("./node_modules/core-js/internals/is-object.js"),p=o("./node_modules/core-js/internals/require-object-coercible.js"),j=o("./node_modules/core-js/internals/a-possible-prototype.js");d.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var b=!1,w={},B;try{B=m(Object.prototype,"__proto__","set"),B(w,[]),b=w instanceof Array}catch{}return function(Q,k){return p(Q),j(k),y(Q)&&(b?B(Q,k):Q.__proto__=k),Q}})():void 0)}),"./node_modules/core-js/internals/object-to-string.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-string-tag-support.js"),y=o("./node_modules/core-js/internals/classof.js");d.exports=m?{}.toString:function(){return"[object "+y(this)+"]"}}),"./node_modules/core-js/internals/ordinary-to-primitive.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/is-object.js"),j=TypeError;d.exports=function(b,w){var B,L;if(w==="string"&&y(B=b.toString)&&!p(L=m(B,b))||y(B=b.valueOf)&&!p(L=m(B,b))||w!=="string"&&y(B=b.toString)&&!p(L=m(B,b)))return L;throw new j("Can't convert object to primitive value")}}),"./node_modules/core-js/internals/own-keys.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/get-built-in.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/object-get-own-property-names.js"),j=o("./node_modules/core-js/internals/object-get-own-property-symbols.js"),b=o("./node_modules/core-js/internals/an-object.js"),w=y([].concat);d.exports=m("Reflect","ownKeys")||function(L){var Q=p.f(b(L)),k=j.f;return k?w(Q,k(L)):Q}}),"./node_modules/core-js/internals/path.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js");d.exports=m}),"./node_modules/core-js/internals/perform.js":(function(d){d.exports=function(h){try{return{error:!1,value:h()}}catch(o){return{error:!0,value:o}}}}),"./node_modules/core-js/internals/promise-constructor-detection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/promise-native-constructor.js"),p=o("./node_modules/core-js/internals/is-callable.js"),j=o("./node_modules/core-js/internals/is-forced.js"),b=o("./node_modules/core-js/internals/inspect-source.js"),w=o("./node_modules/core-js/internals/well-known-symbol.js"),B=o("./node_modules/core-js/internals/environment.js"),L=o("./node_modules/core-js/internals/is-pure.js"),Q=o("./node_modules/core-js/internals/environment-v8-version.js"),k=y&&y.prototype,z=w("species"),J=!1,$=p(m.PromiseRejectionEvent),q=j("Promise",function(){var X=b(y),fe=X!==String(y);if(!fe&&Q===66||L&&!(k.catch&&k.finally))return!0;if(!Q||Q<51||!/native code/.test(X)){var ee=new y(function(te){te(1)}),le=function(te){te(function(){},function(){})},ue=ee.constructor={};if(ue[z]=le,J=ee.then(function(){})instanceof le,!J)return!0}return!fe&&(B==="BROWSER"||B==="DENO")&&!$});d.exports={CONSTRUCTOR:q,REJECTION_EVENT:$,SUBCLASSING:J}}),"./node_modules/core-js/internals/promise-native-constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js");d.exports=m.Promise}),"./node_modules/core-js/internals/promise-resolve.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/an-object.js"),y=o("./node_modules/core-js/internals/is-object.js"),p=o("./node_modules/core-js/internals/new-promise-capability.js");d.exports=function(j,b){if(m(j),y(b)&&b.constructor===j)return b;var w=p.f(j),B=w.resolve;return B(b),w.promise}}),"./node_modules/core-js/internals/promise-statics-incorrect-iteration.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/promise-native-constructor.js"),y=o("./node_modules/core-js/internals/check-correctness-of-iteration.js"),p=o("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;d.exports=p||!y(function(j){m.all(j).then(void 0,function(){})})}),"./node_modules/core-js/internals/queue.js":(function(d){var h=function(){this.head=null,this.tail=null};h.prototype={add:function(o){var m={item:o,next:null},y=this.tail;y?y.next=m:this.head=m,this.tail=m},get:function(){var o=this.head;if(o){var m=this.head=o.next;return m===null&&(this.tail=null),o.item}}},d.exports=h}),"./node_modules/core-js/internals/regexp-exec.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/to-string.js"),j=o("./node_modules/core-js/internals/regexp-flags.js"),b=o("./node_modules/core-js/internals/regexp-sticky-helpers.js"),w=o("./node_modules/core-js/internals/shared.js"),B=o("./node_modules/core-js/internals/object-create.js"),L=o("./node_modules/core-js/internals/internal-state.js").get,Q=o("./node_modules/core-js/internals/regexp-unsupported-dot-all.js"),k=o("./node_modules/core-js/internals/regexp-unsupported-ncg.js"),z=w("native-string-replace",String.prototype.replace),J=RegExp.prototype.exec,$=J,q=y("".charAt),X=y("".indexOf),fe=y("".replace),ee=y("".slice),le=(function(){var ne=/a/,oe=/b*/g;return m(J,ne,"a"),m(J,oe,"a"),ne.lastIndex!==0||oe.lastIndex!==0})(),ue=b.BROKEN_CARET,te=/()??/.exec("")[1]!==void 0,re=le||te||ue||Q||k;re&&($=function(oe){var se=this,xe=L(se),Me=p(oe),me=xe.raw,Z,ge,we,pe,be,je,Ne;if(me)return me.lastIndex=se.lastIndex,Z=m($,me,Me),se.lastIndex=me.lastIndex,Z;var Je=xe.groups,Qe=ue&&se.sticky,pt=m(j,se),Te=se.source,Ce=0,_e=Me;if(Qe&&(pt=fe(pt,"y",""),X(pt,"g")===-1&&(pt+="g"),_e=ee(Me,se.lastIndex),se.lastIndex>0&&(!se.multiline||se.multiline&&q(Me,se.lastIndex-1)!==`
`)&&(Te="(?: "+Te+")",_e=" "+_e,Ce++),ge=new RegExp("^(?:"+Te+")",pt)),te&&(ge=new RegExp("^"+Te+"$(?!\\s)",pt)),le&&(we=se.lastIndex),pe=m(J,Qe?ge:se,_e),Qe?pe?(pe.input=ee(pe.input,Ce),pe[0]=ee(pe[0],Ce),pe.index=se.lastIndex,se.lastIndex+=pe[0].length):se.lastIndex=0:le&&pe&&(se.lastIndex=se.global?pe.index+pe[0].length:we),te&&pe&&pe.length>1&&m(z,pe[0],ge,function(){for(be=1;be<arguments.length-2;be++)arguments[be]===void 0&&(pe[be]=void 0)}),pe&&Je)for(pe.groups=je=B(null),be=0;be<Je.length;be++)Ne=Je[be],je[Ne[0]]=pe[Ne[1]];return pe}),d.exports=$}),"./node_modules/core-js/internals/regexp-flags-detection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/fails.js"),p=m.RegExp,j=!y(function(){var b=!0;try{p(".","d")}catch{b=!1}var w={},B="",L=b?"dgimsy":"gimsy",Q=function($,q){Object.defineProperty(w,$,{get:function(){return B+=q,!0}})},k={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};b&&(k.hasIndices="d");for(var z in k)Q(z,k[z]);var J=Object.getOwnPropertyDescriptor(p.prototype,"flags").get.call(w);return J!==L||B!==L});d.exports={correct:j}}),"./node_modules/core-js/internals/regexp-flags.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/an-object.js");d.exports=function(){var y=m(this),p="";return y.hasIndices&&(p+="d"),y.global&&(p+="g"),y.ignoreCase&&(p+="i"),y.multiline&&(p+="m"),y.dotAll&&(p+="s"),y.unicode&&(p+="u"),y.unicodeSets&&(p+="v"),y.sticky&&(p+="y"),p}}),"./node_modules/core-js/internals/regexp-get-flags.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/has-own-property.js"),p=o("./node_modules/core-js/internals/object-is-prototype-of.js"),j=o("./node_modules/core-js/internals/regexp-flags-detection.js"),b=o("./node_modules/core-js/internals/regexp-flags.js"),w=RegExp.prototype;d.exports=j.correct?function(B){return B.flags}:function(B){return!j.correct&&p(w,B)&&!y(B,"flags")?m(b,B):B.flags}}),"./node_modules/core-js/internals/regexp-sticky-helpers.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=y.RegExp,j=m(function(){var B=p("a","y");return B.lastIndex=2,B.exec("abcd")!==null}),b=j||m(function(){return!p("a","y").sticky}),w=j||m(function(){var B=p("^r","gy");return B.lastIndex=2,B.exec("str")!==null});d.exports={BROKEN_CARET:w,MISSED_STICKY:b,UNSUPPORTED_Y:j}}),"./node_modules/core-js/internals/regexp-unsupported-dot-all.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=y.RegExp;d.exports=m(function(){var j=p(".","s");return!(j.dotAll&&j.test(`
`)&&j.flags==="s")})}),"./node_modules/core-js/internals/regexp-unsupported-ncg.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=y.RegExp;d.exports=m(function(){var j=p("(?<a>b)","g");return j.exec("b").groups.a!=="b"||"b".replace(j,"$<a>c")!=="bc"})}),"./node_modules/core-js/internals/require-object-coercible.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-null-or-undefined.js"),y=TypeError;d.exports=function(p){if(m(p))throw new y("Can't call method on "+p);return p}}),"./node_modules/core-js/internals/safe-get-built-in.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/descriptors.js"),p=Object.getOwnPropertyDescriptor;d.exports=function(j){if(!y)return m[j];var b=p(m,j);return b&&b.value}}),"./node_modules/core-js/internals/schedulers-fix.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/function-apply.js"),p=o("./node_modules/core-js/internals/is-callable.js"),j=o("./node_modules/core-js/internals/environment.js"),b=o("./node_modules/core-js/internals/environment-user-agent.js"),w=o("./node_modules/core-js/internals/array-slice.js"),B=o("./node_modules/core-js/internals/validate-arguments-length.js"),L=m.Function,Q=/MSIE .\./.test(b)||j==="BUN"&&(function(){var k=m.Bun.version.split(".");return k.length<3||k[0]==="0"&&(k[1]<3||k[1]==="3"&&k[2]==="0")})();d.exports=function(k,z){var J=z?2:1;return Q?function($,q){var X=B(arguments.length,1)>J,fe=p($)?$:L($),ee=X?w(arguments,J):[],le=X?function(){y(fe,this,ee)}:fe;return z?k(le,q):k(le)}:k}}),"./node_modules/core-js/internals/set-clone.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/set-helpers.js"),y=o("./node_modules/core-js/internals/set-iterate.js"),p=m.Set,j=m.add;d.exports=function(b){var w=new p;return y(b,function(B){j(w,B)}),w}}),"./node_modules/core-js/internals/set-difference.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-helpers.js"),p=o("./node_modules/core-js/internals/set-clone.js"),j=o("./node_modules/core-js/internals/set-size.js"),b=o("./node_modules/core-js/internals/get-set-record.js"),w=o("./node_modules/core-js/internals/set-iterate.js"),B=o("./node_modules/core-js/internals/iterate-simple.js"),L=y.has,Q=y.remove;d.exports=function(z){var J=m(this),$=b(z),q=p(J);return j(J)<=$.size?w(J,function(X){$.includes(X)&&Q(q,X)}):B($.getIterator(),function(X){L(q,X)&&Q(q,X)}),q}}),"./node_modules/core-js/internals/set-helpers.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=Set.prototype;d.exports={Set,add:m(y.add),has:m(y.has),remove:m(y.delete),proto:y}}),"./node_modules/core-js/internals/set-intersection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-helpers.js"),p=o("./node_modules/core-js/internals/set-size.js"),j=o("./node_modules/core-js/internals/get-set-record.js"),b=o("./node_modules/core-js/internals/set-iterate.js"),w=o("./node_modules/core-js/internals/iterate-simple.js"),B=y.Set,L=y.add,Q=y.has;d.exports=function(z){var J=m(this),$=j(z),q=new B;return p(J)>$.size?w($.getIterator(),function(X){Q(J,X)&&L(q,X)}):b(J,function(X){$.includes(X)&&L(q,X)}),q}}),"./node_modules/core-js/internals/set-is-disjoint-from.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-helpers.js").has,p=o("./node_modules/core-js/internals/set-size.js"),j=o("./node_modules/core-js/internals/get-set-record.js"),b=o("./node_modules/core-js/internals/set-iterate.js"),w=o("./node_modules/core-js/internals/iterate-simple.js"),B=o("./node_modules/core-js/internals/iterator-close.js");d.exports=function(Q){var k=m(this),z=j(Q);if(p(k)<=z.size)return b(k,function($){if(z.includes($))return!1},!0)!==!1;var J=z.getIterator();return w(J,function($){if(y(k,$))return B(J,"normal",!1)})!==!1}}),"./node_modules/core-js/internals/set-is-subset-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-size.js"),p=o("./node_modules/core-js/internals/set-iterate.js"),j=o("./node_modules/core-js/internals/get-set-record.js");d.exports=function(w){var B=m(this),L=j(w);return y(B)>L.size?!1:p(B,function(Q){if(!L.includes(Q))return!1},!0)!==!1}}),"./node_modules/core-js/internals/set-is-superset-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-helpers.js").has,p=o("./node_modules/core-js/internals/set-size.js"),j=o("./node_modules/core-js/internals/get-set-record.js"),b=o("./node_modules/core-js/internals/iterate-simple.js"),w=o("./node_modules/core-js/internals/iterator-close.js");d.exports=function(L){var Q=m(this),k=j(L);if(p(Q)<k.size)return!1;var z=k.getIterator();return b(z,function(J){if(!y(Q,J))return w(z,"normal",!1)})!==!1}}),"./node_modules/core-js/internals/set-iterate.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/iterate-simple.js"),p=o("./node_modules/core-js/internals/set-helpers.js"),j=p.Set,b=p.proto,w=m(b.forEach),B=m(b.keys),L=B(new j).next;d.exports=function(Q,k,z){return z?y({iterator:B(Q),next:L},k):w(Q,k)}}),"./node_modules/core-js/internals/set-size.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),y=o("./node_modules/core-js/internals/set-helpers.js");d.exports=m(y.proto,"size","get")||function(p){return p.size}}),"./node_modules/core-js/internals/set-species.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/get-built-in.js"),y=o("./node_modules/core-js/internals/define-built-in-accessor.js"),p=o("./node_modules/core-js/internals/well-known-symbol.js"),j=o("./node_modules/core-js/internals/descriptors.js"),b=p("species");d.exports=function(w){var B=m(w);j&&B&&!B[b]&&y(B,b,{configurable:!0,get:function(){return this}})}}),"./node_modules/core-js/internals/set-symmetric-difference.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-helpers.js"),p=o("./node_modules/core-js/internals/set-clone.js"),j=o("./node_modules/core-js/internals/get-set-record.js"),b=o("./node_modules/core-js/internals/iterate-simple.js"),w=y.add,B=y.has,L=y.remove;d.exports=function(k){var z=m(this),J=j(k).getIterator(),$=p(z);return b(J,function(q){B(z,q)?L($,q):w($,q)}),$}}),"./node_modules/core-js/internals/set-to-string-tag.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/object-define-property.js").f,y=o("./node_modules/core-js/internals/has-own-property.js"),p=o("./node_modules/core-js/internals/well-known-symbol.js"),j=p("toStringTag");d.exports=function(b,w,B){b&&!B&&(b=b.prototype),b&&!y(b,j)&&m(b,j,{configurable:!0,value:w})}}),"./node_modules/core-js/internals/set-union.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-helpers.js").add,p=o("./node_modules/core-js/internals/set-clone.js"),j=o("./node_modules/core-js/internals/get-set-record.js"),b=o("./node_modules/core-js/internals/iterate-simple.js");d.exports=function(B){var L=m(this),Q=j(B).getIterator(),k=p(L);return b(Q,function(z){y(k,z)}),k}}),"./node_modules/core-js/internals/shared-key.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/shared.js"),y=o("./node_modules/core-js/internals/uid.js"),p=m("keys");d.exports=function(j){return p[j]||(p[j]=y(j))}}),"./node_modules/core-js/internals/shared-store.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-pure.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/define-global-property.js"),j="__core-js_shared__",b=d.exports=y[j]||p(j,{});(b.versions||(b.versions=[])).push({version:"3.45.1",mode:m?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"})}),"./node_modules/core-js/internals/shared.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/shared-store.js");d.exports=function(y,p){return m[y]||(m[y]=p||{})}}),"./node_modules/core-js/internals/species-constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/an-object.js"),y=o("./node_modules/core-js/internals/a-constructor.js"),p=o("./node_modules/core-js/internals/is-null-or-undefined.js"),j=o("./node_modules/core-js/internals/well-known-symbol.js"),b=j("species");d.exports=function(w,B){var L=m(w).constructor,Q;return L===void 0||p(Q=m(L)[b])?B:y(Q)}}),"./node_modules/core-js/internals/string-html-forced.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=function(y){return m(function(){var p=""[y]('"');return p!==p.toLowerCase()||p.split('"').length>3})}}),"./node_modules/core-js/internals/string-multibyte.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/to-integer-or-infinity.js"),p=o("./node_modules/core-js/internals/to-string.js"),j=o("./node_modules/core-js/internals/require-object-coercible.js"),b=m("".charAt),w=m("".charCodeAt),B=m("".slice),L=function(Q){return function(k,z){var J=p(j(k)),$=y(z),q=J.length,X,fe;return $<0||$>=q?Q?"":void 0:(X=w(J,$),X<55296||X>56319||$+1===q||(fe=w(J,$+1))<56320||fe>57343?Q?b(J,$):X:Q?B(J,$,$+2):(X-55296<<10)+(fe-56320)+65536)}};d.exports={codeAt:L(!1),charAt:L(!0)}}),"./node_modules/core-js/internals/string-trim.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/require-object-coercible.js"),p=o("./node_modules/core-js/internals/to-string.js"),j=o("./node_modules/core-js/internals/whitespaces.js"),b=m("".replace),w=RegExp("^["+j+"]+"),B=RegExp("(^|[^"+j+"])["+j+"]+$"),L=function(Q){return function(k){var z=p(y(k));return Q&1&&(z=b(z,w,"")),Q&2&&(z=b(z,B,"$1")),z}};d.exports={start:L(1),end:L(2),trim:L(3)}}),"./node_modules/core-js/internals/symbol-constructor-detection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/environment-v8-version.js"),y=o("./node_modules/core-js/internals/fails.js"),p=o("./node_modules/core-js/internals/global-this.js"),j=p.String;d.exports=!!Object.getOwnPropertySymbols&&!y(function(){var b=Symbol("symbol detection");return!j(b)||!(Object(b)instanceof Symbol)||!Symbol.sham&&m&&m<41})}),"./node_modules/core-js/internals/symbol-define-to-primitive.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/get-built-in.js"),p=o("./node_modules/core-js/internals/well-known-symbol.js"),j=o("./node_modules/core-js/internals/define-built-in.js");d.exports=function(){var b=y("Symbol"),w=b&&b.prototype,B=w&&w.valueOf,L=p("toPrimitive");w&&!w[L]&&j(w,L,function(Q){return m(B,this)},{arity:1})}}),"./node_modules/core-js/internals/symbol-registry-detection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/symbol-constructor-detection.js");d.exports=m&&!!Symbol.for&&!!Symbol.keyFor}),"./node_modules/core-js/internals/task.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/function-apply.js"),p=o("./node_modules/core-js/internals/function-bind-context.js"),j=o("./node_modules/core-js/internals/is-callable.js"),b=o("./node_modules/core-js/internals/has-own-property.js"),w=o("./node_modules/core-js/internals/fails.js"),B=o("./node_modules/core-js/internals/html.js"),L=o("./node_modules/core-js/internals/array-slice.js"),Q=o("./node_modules/core-js/internals/document-create-element.js"),k=o("./node_modules/core-js/internals/validate-arguments-length.js"),z=o("./node_modules/core-js/internals/environment-is-ios.js"),J=o("./node_modules/core-js/internals/environment-is-node.js"),$=m.setImmediate,q=m.clearImmediate,X=m.process,fe=m.Dispatch,ee=m.Function,le=m.MessageChannel,ue=m.String,te=0,re={},ne="onreadystatechange",oe,se,xe,Me;w(function(){oe=m.location});var me=function(pe){if(b(re,pe)){var be=re[pe];delete re[pe],be()}},Z=function(pe){return function(){me(pe)}},ge=function(pe){me(pe.data)},we=function(pe){m.postMessage(ue(pe),oe.protocol+"//"+oe.host)};(!$||!q)&&($=function(be){k(arguments.length,1);var je=j(be)?be:ee(be),Ne=L(arguments,1);return re[++te]=function(){y(je,void 0,Ne)},se(te),te},q=function(be){delete re[be]},J?se=function(pe){X.nextTick(Z(pe))}:fe&&fe.now?se=function(pe){fe.now(Z(pe))}:le&&!z?(xe=new le,Me=xe.port2,xe.port1.onmessage=ge,se=p(Me.postMessage,Me)):m.addEventListener&&j(m.postMessage)&&!m.importScripts&&oe&&oe.protocol!=="file:"&&!w(we)?(se=we,m.addEventListener("message",ge,!1)):ne in Q("script")?se=function(pe){B.appendChild(Q("script"))[ne]=function(){B.removeChild(this),me(pe)}}:se=function(pe){setTimeout(Z(pe),0)}),d.exports={set:$,clear:q}}),"./node_modules/core-js/internals/this-number-value.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js");d.exports=m(1.1.valueOf)}),"./node_modules/core-js/internals/to-absolute-index.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-integer-or-infinity.js"),y=Math.max,p=Math.min;d.exports=function(j,b){var w=m(j);return w<0?y(w+b,0):p(w,b)}}),"./node_modules/core-js/internals/to-indexed-object.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/indexed-object.js"),y=o("./node_modules/core-js/internals/require-object-coercible.js");d.exports=function(p){return m(y(p))}}),"./node_modules/core-js/internals/to-integer-or-infinity.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/math-trunc.js");d.exports=function(y){var p=+y;return p!==p||p===0?0:m(p)}}),"./node_modules/core-js/internals/to-length.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-integer-or-infinity.js"),y=Math.min;d.exports=function(p){var j=m(p);return j>0?y(j,9007199254740991):0}}),"./node_modules/core-js/internals/to-object.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/require-object-coercible.js"),y=Object;d.exports=function(p){return y(m(p))}}),"./node_modules/core-js/internals/to-primitive.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/is-object.js"),p=o("./node_modules/core-js/internals/is-symbol.js"),j=o("./node_modules/core-js/internals/get-method.js"),b=o("./node_modules/core-js/internals/ordinary-to-primitive.js"),w=o("./node_modules/core-js/internals/well-known-symbol.js"),B=TypeError,L=w("toPrimitive");d.exports=function(Q,k){if(!y(Q)||p(Q))return Q;var z=j(Q,L),J;if(z){if(k===void 0&&(k="default"),J=m(z,Q,k),!y(J)||p(J))return J;throw new B("Can't convert object to primitive value")}return k===void 0&&(k="number"),b(Q,k)}}),"./node_modules/core-js/internals/to-property-key.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-primitive.js"),y=o("./node_modules/core-js/internals/is-symbol.js");d.exports=function(p){var j=m(p,"string");return y(j)?j:j+""}}),"./node_modules/core-js/internals/to-set-like.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/get-built-in.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/is-iterable.js"),j=o("./node_modules/core-js/internals/is-object.js"),b=m("Set"),w=function(B){return j(B)&&typeof B.size=="number"&&y(B.has)&&y(B.keys)};d.exports=function(B){return w(B)?B:p(B)?new b(B):B}}),"./node_modules/core-js/internals/to-string-tag-support.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/well-known-symbol.js"),y=m("toStringTag"),p={};p[y]="z",d.exports=String(p)==="[object z]"}),"./node_modules/core-js/internals/to-string.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/classof.js"),y=String;d.exports=function(p){if(m(p)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return y(p)}}),"./node_modules/core-js/internals/try-to-string.js":(function(d){var h=String;d.exports=function(o){try{return h(o)}catch{return"Object"}}}),"./node_modules/core-js/internals/uid.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=0,p=Math.random(),j=m(1.1.toString);d.exports=function(b){return"Symbol("+(b===void 0?"":b)+")_"+j(++y+p,36)}}),"./node_modules/core-js/internals/use-symbol-as-uid.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/symbol-constructor-detection.js");d.exports=m&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}),"./node_modules/core-js/internals/v8-prototype-define-bug.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/fails.js");d.exports=m&&y(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})}),"./node_modules/core-js/internals/validate-arguments-length.js":(function(d){var h=TypeError;d.exports=function(o,m){if(o<m)throw new h("Not enough arguments");return o}}),"./node_modules/core-js/internals/weak-map-basic-detection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=m.WeakMap;d.exports=y(p)&&/native code/.test(String(p))}),"./node_modules/core-js/internals/well-known-symbol-define.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/path.js"),y=o("./node_modules/core-js/internals/has-own-property.js"),p=o("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),j=o("./node_modules/core-js/internals/object-define-property.js").f;d.exports=function(b){var w=m.Symbol||(m.Symbol={});y(w,b)||j(w,b,{value:p.f(b)})}}),"./node_modules/core-js/internals/well-known-symbol-wrapped.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/well-known-symbol.js");h.f=m}),"./node_modules/core-js/internals/well-known-symbol.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/shared.js"),p=o("./node_modules/core-js/internals/has-own-property.js"),j=o("./node_modules/core-js/internals/uid.js"),b=o("./node_modules/core-js/internals/symbol-constructor-detection.js"),w=o("./node_modules/core-js/internals/use-symbol-as-uid.js"),B=m.Symbol,L=y("wks"),Q=w?B.for||B:B&&B.withoutSetter||j;d.exports=function(k){return p(L,k)||(L[k]=b&&p(B,k)?B[k]:Q("Symbol."+k)),L[k]}}),"./node_modules/core-js/internals/whitespaces.js":(function(d){d.exports=`	
\v\f\r \u2028\u2029\uFEFF`}),"./node_modules/core-js/modules/es.array.concat.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/fails.js"),p=o("./node_modules/core-js/internals/is-array.js"),j=o("./node_modules/core-js/internals/is-object.js"),b=o("./node_modules/core-js/internals/to-object.js"),w=o("./node_modules/core-js/internals/length-of-array-like.js"),B=o("./node_modules/core-js/internals/does-not-exceed-safe-integer.js"),L=o("./node_modules/core-js/internals/create-property.js"),Q=o("./node_modules/core-js/internals/array-species-create.js"),k=o("./node_modules/core-js/internals/array-method-has-species-support.js"),z=o("./node_modules/core-js/internals/well-known-symbol.js"),J=o("./node_modules/core-js/internals/environment-v8-version.js"),$=z("isConcatSpreadable"),q=J>=51||!y(function(){var ee=[];return ee[$]=!1,ee.concat()[0]!==ee}),X=function(ee){if(!j(ee))return!1;var le=ee[$];return le!==void 0?!!le:p(ee)},fe=!q||!k("concat");m({target:"Array",proto:!0,arity:1,forced:fe},{concat:function(le){var ue=b(this),te=Q(ue,0),re=0,ne,oe,se,xe,Me;for(ne=-1,se=arguments.length;ne<se;ne++)if(Me=ne===-1?ue:arguments[ne],X(Me))for(xe=w(Me),B(re+xe),oe=0;oe<xe;oe++,re++)oe in Me&&L(te,re,Me[oe]);else B(re+1),L(te,re++,Me);return te.length=re,te}})}),"./node_modules/core-js/modules/es.array.from.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/array-from.js"),p=o("./node_modules/core-js/internals/check-correctness-of-iteration.js"),j=!p(function(b){Array.from(b)});m({target:"Array",stat:!0,forced:j},{from:y})}),"./node_modules/core-js/modules/es.array.iterator.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-indexed-object.js"),y=o("./node_modules/core-js/internals/add-to-unscopables.js"),p=o("./node_modules/core-js/internals/iterators.js"),j=o("./node_modules/core-js/internals/internal-state.js"),b=o("./node_modules/core-js/internals/object-define-property.js").f,w=o("./node_modules/core-js/internals/iterator-define.js"),B=o("./node_modules/core-js/internals/create-iter-result-object.js"),L=o("./node_modules/core-js/internals/is-pure.js"),Q=o("./node_modules/core-js/internals/descriptors.js"),k="Array Iterator",z=j.set,J=j.getterFor(k);d.exports=w(Array,"Array",function(q,X){z(this,{type:k,target:m(q),index:0,kind:X})},function(){var q=J(this),X=q.target,fe=q.index++;if(!X||fe>=X.length)return q.target=null,B(void 0,!0);switch(q.kind){case"keys":return B(fe,!1);case"values":return B(X[fe],!1)}return B([fe,X[fe]],!1)},"values");var $=p.Arguments=p.Array;if(y("keys"),y("values"),y("entries"),!L&&Q&&$.name!=="values")try{b($,"name",{value:"values"})}catch{}}),"./node_modules/core-js/modules/es.array.join.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/indexed-object.js"),j=o("./node_modules/core-js/internals/to-indexed-object.js"),b=o("./node_modules/core-js/internals/array-method-is-strict.js"),w=y([].join),B=p!==Object,L=B||!b("join",",");m({target:"Array",proto:!0,forced:L},{join:function(k){return w(j(this),k===void 0?",":k)}})}),"./node_modules/core-js/modules/es.array.map.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/array-iteration.js").map,p=o("./node_modules/core-js/internals/array-method-has-species-support.js"),j=p("map");m({target:"Array",proto:!0,forced:!j},{map:function(w){return y(this,w,arguments.length>1?arguments[1]:void 0)}})}),"./node_modules/core-js/modules/es.array.slice.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/is-array.js"),p=o("./node_modules/core-js/internals/is-constructor.js"),j=o("./node_modules/core-js/internals/is-object.js"),b=o("./node_modules/core-js/internals/to-absolute-index.js"),w=o("./node_modules/core-js/internals/length-of-array-like.js"),B=o("./node_modules/core-js/internals/to-indexed-object.js"),L=o("./node_modules/core-js/internals/create-property.js"),Q=o("./node_modules/core-js/internals/well-known-symbol.js"),k=o("./node_modules/core-js/internals/array-method-has-species-support.js"),z=o("./node_modules/core-js/internals/array-slice.js"),J=k("slice"),$=Q("species"),q=Array,X=Math.max;m({target:"Array",proto:!0,forced:!J},{slice:function(ee,le){var ue=B(this),te=w(ue),re=b(ee,te),ne=b(le===void 0?te:le,te),oe,se,xe;if(y(ue)&&(oe=ue.constructor,p(oe)&&(oe===q||y(oe.prototype))?oe=void 0:j(oe)&&(oe=oe[$],oe===null&&(oe=void 0)),oe===q||oe===void 0))return z(ue,re,ne);for(se=new(oe===void 0?q:oe)(X(ne-re,0)),xe=0;re<ne;re++,xe++)re in ue&&L(se,xe,ue[re]);return se.length=xe,se}})}),"./node_modules/core-js/modules/es.function.name.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/function-name.js").EXISTS,p=o("./node_modules/core-js/internals/function-uncurry-this.js"),j=o("./node_modules/core-js/internals/define-built-in-accessor.js"),b=Function.prototype,w=p(b.toString),B=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,L=p(B.exec),Q="name";m&&!y&&j(b,Q,{configurable:!0,get:function(){try{return L(B,w(this))[1]}catch{return""}}})}),"./node_modules/core-js/modules/es.iterator.constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/an-instance.js"),j=o("./node_modules/core-js/internals/an-object.js"),b=o("./node_modules/core-js/internals/is-callable.js"),w=o("./node_modules/core-js/internals/object-get-prototype-of.js"),B=o("./node_modules/core-js/internals/define-built-in-accessor.js"),L=o("./node_modules/core-js/internals/create-property.js"),Q=o("./node_modules/core-js/internals/fails.js"),k=o("./node_modules/core-js/internals/has-own-property.js"),z=o("./node_modules/core-js/internals/well-known-symbol.js"),J=o("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,$=o("./node_modules/core-js/internals/descriptors.js"),q=o("./node_modules/core-js/internals/is-pure.js"),X="constructor",fe="Iterator",ee=z("toStringTag"),le=TypeError,ue=y[fe],te=q||!b(ue)||ue.prototype!==J||!Q(function(){ue({})}),re=function(){if(p(this,J),w(this)===J)throw new le("Abstract class Iterator not directly constructable")},ne=function(oe,se){$?B(J,oe,{configurable:!0,get:function(){return se},set:function(xe){if(j(this),this===J)throw new le("You can't redefine this property");k(this,oe)?this[oe]=xe:L(this,oe,xe)}}):J[oe]=se};k(J,ee)||ne(ee,fe),(te||!k(J,X)||J[X]===Object)&&ne(X,re),re.prototype=J,m({global:!0,constructor:!0,forced:te},{Iterator:re})}),"./node_modules/core-js/modules/es.iterator.for-each.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/iterate.js"),j=o("./node_modules/core-js/internals/a-callable.js"),b=o("./node_modules/core-js/internals/an-object.js"),w=o("./node_modules/core-js/internals/get-iterator-direct.js"),B=o("./node_modules/core-js/internals/iterator-close.js"),L=o("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),Q=L("forEach",TypeError);m({target:"Iterator",proto:!0,real:!0,forced:Q},{forEach:function(z){b(this);try{j(z)}catch(q){B(this,"throw",q)}if(Q)return y(Q,this,z);var J=w(this),$=0;p(J,function(q){z(q,$++)},{IS_RECORD:!0})}})}),"./node_modules/core-js/modules/es.iterator.map.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/a-callable.js"),j=o("./node_modules/core-js/internals/an-object.js"),b=o("./node_modules/core-js/internals/get-iterator-direct.js"),w=o("./node_modules/core-js/internals/iterator-create-proxy.js"),B=o("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),L=o("./node_modules/core-js/internals/iterator-close.js"),Q=o("./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js"),k=o("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),z=o("./node_modules/core-js/internals/is-pure.js"),J=!z&&!Q("map",function(){}),$=!z&&!J&&k("map",TypeError),q=z||J||$,X=w(function(){var fe=this.iterator,ee=j(y(this.next,fe)),le=this.done=!!ee.done;if(!le)return B(fe,this.mapper,[ee.value,this.counter++],!0)});m({target:"Iterator",proto:!0,real:!0,forced:q},{map:function(ee){j(this);try{p(ee)}catch(le){L(this,"throw",le)}return $?y($,this,ee):new X(b(this),{mapper:ee})}})}),"./node_modules/core-js/modules/es.json.stringify.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/get-built-in.js"),p=o("./node_modules/core-js/internals/function-apply.js"),j=o("./node_modules/core-js/internals/function-call.js"),b=o("./node_modules/core-js/internals/function-uncurry-this.js"),w=o("./node_modules/core-js/internals/fails.js"),B=o("./node_modules/core-js/internals/is-callable.js"),L=o("./node_modules/core-js/internals/is-symbol.js"),Q=o("./node_modules/core-js/internals/array-slice.js"),k=o("./node_modules/core-js/internals/get-json-replacer-function.js"),z=o("./node_modules/core-js/internals/symbol-constructor-detection.js"),J=String,$=y("JSON","stringify"),q=b(/./.exec),X=b("".charAt),fe=b("".charCodeAt),ee=b("".replace),le=b(1.1.toString),ue=/[\uD800-\uDFFF]/g,te=/^[\uD800-\uDBFF]$/,re=/^[\uDC00-\uDFFF]$/,ne=!z||w(function(){var Me=y("Symbol")("stringify detection");return $([Me])!=="[null]"||$({a:Me})!=="{}"||$(Object(Me))!=="{}"}),oe=w(function(){return $("\uDF06\uD834")!=='"\\udf06\\ud834"'||$("\uDEAD")!=='"\\udead"'}),se=function(Me,me){var Z=Q(arguments),ge=k(me);if(!(!B(ge)&&(Me===void 0||L(Me))))return Z[1]=function(we,pe){if(B(ge)&&(pe=j(ge,this,J(we),pe)),!L(pe))return pe},p($,null,Z)},xe=function(Me,me,Z){var ge=X(Z,me-1),we=X(Z,me+1);return q(te,Me)&&!q(re,we)||q(re,Me)&&!q(te,ge)?"\\u"+le(fe(Me,0),16):Me};$&&m({target:"JSON",stat:!0,arity:3,forced:ne||oe},{stringify:function(me,Z,ge){var we=Q(arguments),pe=p(ne?se:$,null,we);return oe&&typeof pe=="string"?ee(pe,ue,xe):pe}})}),"./node_modules/core-js/modules/es.number.constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/is-pure.js"),p=o("./node_modules/core-js/internals/descriptors.js"),j=o("./node_modules/core-js/internals/global-this.js"),b=o("./node_modules/core-js/internals/path.js"),w=o("./node_modules/core-js/internals/function-uncurry-this.js"),B=o("./node_modules/core-js/internals/is-forced.js"),L=o("./node_modules/core-js/internals/has-own-property.js"),Q=o("./node_modules/core-js/internals/inherit-if-required.js"),k=o("./node_modules/core-js/internals/object-is-prototype-of.js"),z=o("./node_modules/core-js/internals/is-symbol.js"),J=o("./node_modules/core-js/internals/to-primitive.js"),$=o("./node_modules/core-js/internals/fails.js"),q=o("./node_modules/core-js/internals/object-get-own-property-names.js").f,X=o("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,fe=o("./node_modules/core-js/internals/object-define-property.js").f,ee=o("./node_modules/core-js/internals/this-number-value.js"),le=o("./node_modules/core-js/internals/string-trim.js").trim,ue="Number",te=j[ue],re=b[ue],ne=te.prototype,oe=j.TypeError,se=w("".slice),xe=w("".charCodeAt),Me=function(be){var je=J(be,"number");return typeof je=="bigint"?je:me(je)},me=function(be){var je=J(be,"number"),Ne,Je,Qe,pt,Te,Ce,_e,de;if(z(je))throw new oe("Cannot convert a Symbol value to a number");if(typeof je=="string"&&je.length>2){if(je=le(je),Ne=xe(je,0),Ne===43||Ne===45){if(Je=xe(je,2),Je===88||Je===120)return NaN}else if(Ne===48){switch(xe(je,1)){case 66:case 98:Qe=2,pt=49;break;case 79:case 111:Qe=8,pt=55;break;default:return+je}for(Te=se(je,2),Ce=Te.length,_e=0;_e<Ce;_e++)if(de=xe(Te,_e),de<48||de>pt)return NaN;return parseInt(Te,Qe)}}return+je},Z=B(ue,!te(" 0o1")||!te("0b1")||te("+0x1")),ge=function(be){return k(ne,be)&&$(function(){ee(be)})},we=function(je){var Ne=arguments.length<1?0:te(Me(je));return ge(this)?Q(Object(Ne),this,we):Ne};we.prototype=ne,Z&&!y&&(ne.constructor=we),m({global:!0,constructor:!0,wrap:!0,forced:Z},{Number:we});var pe=function(be,je){for(var Ne=p?q(je):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Je=0,Qe;Ne.length>Je;Je++)L(je,Qe=Ne[Je])&&!L(be,Qe)&&fe(be,Qe,X(je,Qe))};y&&re&&pe(b[ue],re),(Z||y)&&pe(b[ue],te)}),"./node_modules/core-js/modules/es.object.assign.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/object-assign.js");m({target:"Object",stat:!0,arity:2,forced:Object.assign!==y},{assign:y})}),"./node_modules/core-js/modules/es.object.get-own-property-symbols.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/symbol-constructor-detection.js"),p=o("./node_modules/core-js/internals/fails.js"),j=o("./node_modules/core-js/internals/object-get-own-property-symbols.js"),b=o("./node_modules/core-js/internals/to-object.js"),w=!y||p(function(){j.f(1)});m({target:"Object",stat:!0,forced:w},{getOwnPropertySymbols:function(L){var Q=j.f;return Q?Q(b(L)):[]}})}),"./node_modules/core-js/modules/es.object.keys.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/to-object.js"),p=o("./node_modules/core-js/internals/object-keys.js"),j=o("./node_modules/core-js/internals/fails.js"),b=j(function(){p(1)});m({target:"Object",stat:!0,forced:b},{keys:function(B){return p(y(B))}})}),"./node_modules/core-js/modules/es.object.to-string.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-string-tag-support.js"),y=o("./node_modules/core-js/internals/define-built-in.js"),p=o("./node_modules/core-js/internals/object-to-string.js");m||y(Object.prototype,"toString",p,{unsafe:!0})}),"./node_modules/core-js/modules/es.promise.all.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/a-callable.js"),j=o("./node_modules/core-js/internals/new-promise-capability.js"),b=o("./node_modules/core-js/internals/perform.js"),w=o("./node_modules/core-js/internals/iterate.js"),B=o("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");m({target:"Promise",stat:!0,forced:B},{all:function(Q){var k=this,z=j.f(k),J=z.resolve,$=z.reject,q=b(function(){var X=p(k.resolve),fe=[],ee=0,le=1;w(Q,function(ue){var te=ee++,re=!1;le++,y(X,k,ue).then(function(ne){re||(re=!0,fe[te]=ne,--le||J(fe))},$)}),--le||J(fe)});return q.error&&$(q.value),z.promise}})}),"./node_modules/core-js/modules/es.promise.catch.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/is-pure.js"),p=o("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,j=o("./node_modules/core-js/internals/promise-native-constructor.js"),b=o("./node_modules/core-js/internals/get-built-in.js"),w=o("./node_modules/core-js/internals/is-callable.js"),B=o("./node_modules/core-js/internals/define-built-in.js"),L=j&&j.prototype;if(m({target:"Promise",proto:!0,forced:p,real:!0},{catch:function(k){return this.then(void 0,k)}}),!y&&w(j)){var Q=b("Promise").prototype.catch;L.catch!==Q&&B(L,"catch",Q,{unsafe:!0})}}),"./node_modules/core-js/modules/es.promise.constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/is-pure.js"),p=o("./node_modules/core-js/internals/environment-is-node.js"),j=o("./node_modules/core-js/internals/global-this.js"),b=o("./node_modules/core-js/internals/path.js"),w=o("./node_modules/core-js/internals/function-call.js"),B=o("./node_modules/core-js/internals/define-built-in.js"),L=o("./node_modules/core-js/internals/object-set-prototype-of.js"),Q=o("./node_modules/core-js/internals/set-to-string-tag.js"),k=o("./node_modules/core-js/internals/set-species.js"),z=o("./node_modules/core-js/internals/a-callable.js"),J=o("./node_modules/core-js/internals/is-callable.js"),$=o("./node_modules/core-js/internals/is-object.js"),q=o("./node_modules/core-js/internals/an-instance.js"),X=o("./node_modules/core-js/internals/species-constructor.js"),fe=o("./node_modules/core-js/internals/task.js").set,ee=o("./node_modules/core-js/internals/microtask.js"),le=o("./node_modules/core-js/internals/host-report-errors.js"),ue=o("./node_modules/core-js/internals/perform.js"),te=o("./node_modules/core-js/internals/queue.js"),re=o("./node_modules/core-js/internals/internal-state.js"),ne=o("./node_modules/core-js/internals/promise-native-constructor.js"),oe=o("./node_modules/core-js/internals/promise-constructor-detection.js"),se=o("./node_modules/core-js/internals/new-promise-capability.js"),xe="Promise",Me=oe.CONSTRUCTOR,me=oe.REJECTION_EVENT,Z=oe.SUBCLASSING,ge=re.getterFor(xe),we=re.set,pe=ne&&ne.prototype,be=ne,je=pe,Ne=j.TypeError,Je=j.document,Qe=j.process,pt=se.f,Te=pt,Ce=!!(Je&&Je.createEvent&&j.dispatchEvent),_e="unhandledrejection",de="rejectionhandled",dt=0,st=1,nt=2,at=1,Dt=2,yt,qe,Tt,ns,Ts=function(lt){var Gt;return $(lt)&&J(Gt=lt.then)?Gt:!1},vs=function(lt,Gt){var Yt=Gt.value,Cs=Gt.state===st,rs=Cs?lt.ok:lt.fail,Is=lt.resolve,on=lt.reject,ws=lt.domain,St,qt,Pt;try{rs?(Cs||(Gt.rejection===Dt&&mt(Gt),Gt.rejection=at),rs===!0?St=Yt:(ws&&ws.enter(),St=rs(Yt),ws&&(ws.exit(),Pt=!0)),St===lt.promise?on(new Ne("Promise-chain cycle")):(qt=Ts(St))?w(qt,St,Is,on):Is(St)):on(Yt)}catch(gs){ws&&!Pt&&ws.exit(),on(gs)}},Ns=function(lt,Gt){lt.notified||(lt.notified=!0,ee(function(){for(var Yt=lt.reactions,Cs;Cs=Yt.get();)vs(Cs,lt);lt.notified=!1,Gt&&!lt.rejection&&De(lt)}))},et=function(lt,Gt,Yt){var Cs,rs;Ce?(Cs=Je.createEvent("Event"),Cs.promise=Gt,Cs.reason=Yt,Cs.initEvent(lt,!1,!0),j.dispatchEvent(Cs)):Cs={promise:Gt,reason:Yt},!me&&(rs=j["on"+lt])?rs(Cs):lt===_e&&le("Unhandled promise rejection",Yt)},De=function(lt){w(fe,j,function(){var Gt=lt.facade,Yt=lt.value,Cs=rt(lt),rs;if(Cs&&(rs=ue(function(){p?Qe.emit("unhandledRejection",Yt,Gt):et(_e,Gt,Yt)}),lt.rejection=p||rt(lt)?Dt:at,rs.error))throw rs.value})},rt=function(lt){return lt.rejection!==at&&!lt.parent},mt=function(lt){w(fe,j,function(){var Gt=lt.facade;p?Qe.emit("rejectionHandled",Gt):et(de,Gt,lt.value)})},ls=function(lt,Gt,Yt){return function(Cs){lt(Gt,Cs,Yt)}},Ht=function(lt,Gt,Yt){lt.done||(lt.done=!0,Yt&&(lt=Yt),lt.value=Gt,lt.state=nt,Ns(lt,!0))},Kt=function(lt,Gt,Yt){if(!lt.done){lt.done=!0,Yt&&(lt=Yt);try{if(lt.facade===Gt)throw new Ne("Promise can't be resolved itself");var Cs=Ts(Gt);Cs?ee(function(){var rs={done:!1};try{w(Cs,Gt,ls(Kt,rs,lt),ls(Ht,rs,lt))}catch(Is){Ht(rs,Is,lt)}}):(lt.value=Gt,lt.state=st,Ns(lt,!1))}catch(rs){Ht({done:!1},rs,lt)}}};if(Me&&(be=function(Gt){q(this,je),z(Gt),w(yt,this);var Yt=ge(this);try{Gt(ls(Kt,Yt),ls(Ht,Yt))}catch(Cs){Ht(Yt,Cs)}},je=be.prototype,yt=function(Gt){we(this,{type:xe,done:!1,notified:!1,parent:!1,reactions:new te,rejection:!1,state:dt,value:null})},yt.prototype=B(je,"then",function(Gt,Yt){var Cs=ge(this),rs=pt(X(this,be));return Cs.parent=!0,rs.ok=J(Gt)?Gt:!0,rs.fail=J(Yt)&&Yt,rs.domain=p?Qe.domain:void 0,Cs.state===dt?Cs.reactions.add(rs):ee(function(){vs(rs,Cs)}),rs.promise}),qe=function(){var lt=new yt,Gt=ge(lt);this.promise=lt,this.resolve=ls(Kt,Gt),this.reject=ls(Ht,Gt)},se.f=pt=function(lt){return lt===be||lt===Tt?new qe(lt):Te(lt)},!y&&J(ne)&&pe!==Object.prototype)){ns=pe.then,Z||B(pe,"then",function(Gt,Yt){var Cs=this;return new be(function(rs,Is){w(ns,Cs,rs,Is)}).then(Gt,Yt)},{unsafe:!0});try{delete pe.constructor}catch{}L&&L(pe,je)}m({global:!0,constructor:!0,wrap:!0,forced:Me},{Promise:be}),Tt=b.Promise,Q(be,xe,!1,!0),k(xe)}),"./node_modules/core-js/modules/es.promise.js":(function(d,h,o){o("./node_modules/core-js/modules/es.promise.constructor.js"),o("./node_modules/core-js/modules/es.promise.all.js"),o("./node_modules/core-js/modules/es.promise.catch.js"),o("./node_modules/core-js/modules/es.promise.race.js"),o("./node_modules/core-js/modules/es.promise.reject.js"),o("./node_modules/core-js/modules/es.promise.resolve.js")}),"./node_modules/core-js/modules/es.promise.race.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/a-callable.js"),j=o("./node_modules/core-js/internals/new-promise-capability.js"),b=o("./node_modules/core-js/internals/perform.js"),w=o("./node_modules/core-js/internals/iterate.js"),B=o("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");m({target:"Promise",stat:!0,forced:B},{race:function(Q){var k=this,z=j.f(k),J=z.reject,$=b(function(){var q=p(k.resolve);w(Q,function(X){y(q,k,X).then(z.resolve,J)})});return $.error&&J($.value),z.promise}})}),"./node_modules/core-js/modules/es.promise.reject.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/new-promise-capability.js"),p=o("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;m({target:"Promise",stat:!0,forced:p},{reject:function(b){var w=y.f(this),B=w.reject;return B(b),w.promise}})}),"./node_modules/core-js/modules/es.promise.resolve.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/get-built-in.js"),p=o("./node_modules/core-js/internals/is-pure.js"),j=o("./node_modules/core-js/internals/promise-native-constructor.js"),b=o("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,w=o("./node_modules/core-js/internals/promise-resolve.js"),B=y("Promise"),L=p&&!b;m({target:"Promise",stat:!0,forced:p||b},{resolve:function(k){return w(L&&this===B?j:this,k)}})}),"./node_modules/core-js/modules/es.regexp.exec.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/regexp-exec.js");m({target:"RegExp",proto:!0,forced:/./.exec!==y},{exec:y})}),"./node_modules/core-js/modules/es.regexp.test.js":(function(d,h,o){o("./node_modules/core-js/modules/es.regexp.exec.js");var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/is-callable.js"),j=o("./node_modules/core-js/internals/an-object.js"),b=o("./node_modules/core-js/internals/to-string.js"),w=(function(){var L=!1,Q=/[ac]/;return Q.exec=function(){return L=!0,/./.exec.apply(this,arguments)},Q.test("abc")===!0&&L})(),B=/./.test;m({target:"RegExp",proto:!0,forced:!w},{test:function(L){var Q=j(this),k=b(L),z=Q.exec;if(!p(z))return y(B,Q,k);var J=y(z,Q,k);return J===null?!1:(j(J),!0)}})}),"./node_modules/core-js/modules/es.regexp.to-string.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-name.js").PROPER,y=o("./node_modules/core-js/internals/define-built-in.js"),p=o("./node_modules/core-js/internals/an-object.js"),j=o("./node_modules/core-js/internals/to-string.js"),b=o("./node_modules/core-js/internals/fails.js"),w=o("./node_modules/core-js/internals/regexp-get-flags.js"),B="toString",L=RegExp.prototype,Q=L[B],k=b(function(){return Q.call({source:"a",flags:"b"})!=="/a/b"}),z=m&&Q.name!==B;(k||z)&&y(L,B,function(){var $=p(this),q=j($.source),X=j(w($));return"/"+q+"/"+X},{unsafe:!0})}),"./node_modules/core-js/modules/es.set.constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/collection.js"),y=o("./node_modules/core-js/internals/collection-strong.js");m("Set",function(p){return function(){return p(this,arguments.length?arguments[0]:void 0)}},y)}),"./node_modules/core-js/modules/es.set.js":(function(d,h,o){o("./node_modules/core-js/modules/es.set.constructor.js")}),"./node_modules/core-js/modules/es.string.iterator.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/string-multibyte.js").charAt,y=o("./node_modules/core-js/internals/to-string.js"),p=o("./node_modules/core-js/internals/internal-state.js"),j=o("./node_modules/core-js/internals/iterator-define.js"),b=o("./node_modules/core-js/internals/create-iter-result-object.js"),w="String Iterator",B=p.set,L=p.getterFor(w);j(String,"String",function(Q){B(this,{type:w,string:y(Q),index:0})},function(){var k=L(this),z=k.string,J=k.index,$;return J>=z.length?b(void 0,!0):($=m(z,J),k.index+=$.length,b($,!1))})}),"./node_modules/core-js/modules/es.string.link.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/create-html.js"),p=o("./node_modules/core-js/internals/string-html-forced.js");m({target:"String",proto:!0,forced:p("link")},{link:function(b){return y(this,"a","href",b)}})}),"./node_modules/core-js/modules/es.symbol.constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/function-call.js"),j=o("./node_modules/core-js/internals/function-uncurry-this.js"),b=o("./node_modules/core-js/internals/is-pure.js"),w=o("./node_modules/core-js/internals/descriptors.js"),B=o("./node_modules/core-js/internals/symbol-constructor-detection.js"),L=o("./node_modules/core-js/internals/fails.js"),Q=o("./node_modules/core-js/internals/has-own-property.js"),k=o("./node_modules/core-js/internals/object-is-prototype-of.js"),z=o("./node_modules/core-js/internals/an-object.js"),J=o("./node_modules/core-js/internals/to-indexed-object.js"),$=o("./node_modules/core-js/internals/to-property-key.js"),q=o("./node_modules/core-js/internals/to-string.js"),X=o("./node_modules/core-js/internals/create-property-descriptor.js"),fe=o("./node_modules/core-js/internals/object-create.js"),ee=o("./node_modules/core-js/internals/object-keys.js"),le=o("./node_modules/core-js/internals/object-get-own-property-names.js"),ue=o("./node_modules/core-js/internals/object-get-own-property-names-external.js"),te=o("./node_modules/core-js/internals/object-get-own-property-symbols.js"),re=o("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),ne=o("./node_modules/core-js/internals/object-define-property.js"),oe=o("./node_modules/core-js/internals/object-define-properties.js"),se=o("./node_modules/core-js/internals/object-property-is-enumerable.js"),xe=o("./node_modules/core-js/internals/define-built-in.js"),Me=o("./node_modules/core-js/internals/define-built-in-accessor.js"),me=o("./node_modules/core-js/internals/shared.js"),Z=o("./node_modules/core-js/internals/shared-key.js"),ge=o("./node_modules/core-js/internals/hidden-keys.js"),we=o("./node_modules/core-js/internals/uid.js"),pe=o("./node_modules/core-js/internals/well-known-symbol.js"),be=o("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),je=o("./node_modules/core-js/internals/well-known-symbol-define.js"),Ne=o("./node_modules/core-js/internals/symbol-define-to-primitive.js"),Je=o("./node_modules/core-js/internals/set-to-string-tag.js"),Qe=o("./node_modules/core-js/internals/internal-state.js"),pt=o("./node_modules/core-js/internals/array-iteration.js").forEach,Te=Z("hidden"),Ce="Symbol",_e="prototype",de=Qe.set,dt=Qe.getterFor(Ce),st=Object[_e],nt=y.Symbol,at=nt&&nt[_e],Dt=y.RangeError,yt=y.TypeError,qe=y.QObject,Tt=re.f,ns=ne.f,Ts=ue.f,vs=se.f,Ns=j([].push),et=me("symbols"),De=me("op-symbols"),rt=me("wks"),mt=!qe||!qe[_e]||!qe[_e].findChild,ls=function(ws,St,qt){var Pt=Tt(st,St);Pt&&delete st[St],ns(ws,St,qt),Pt&&ws!==st&&ns(st,St,Pt)},Ht=w&&L(function(){return fe(ns({},"a",{get:function(){return ns(this,"a",{value:7}).a}})).a!==7})?ls:ns,Kt=function(ws,St){var qt=et[ws]=fe(at);return de(qt,{type:Ce,tag:ws,description:St}),w||(qt.description=St),qt},lt=function(St,qt,Pt){St===st&&lt(De,qt,Pt),z(St);var gs=$(qt);return z(Pt),Q(et,gs)?(Pt.enumerable?(Q(St,Te)&&St[Te][gs]&&(St[Te][gs]=!1),Pt=fe(Pt,{enumerable:X(0,!1)})):(Q(St,Te)||ns(St,Te,X(1,fe(null))),St[Te][gs]=!0),Ht(St,gs,Pt)):ns(St,gs,Pt)},Gt=function(St,qt){z(St);var Pt=J(qt),gs=ee(Pt).concat(on(Pt));return pt(gs,function(Rs){(!w||p(Cs,Pt,Rs))&&lt(St,Rs,Pt[Rs])}),St},Yt=function(St,qt){return qt===void 0?fe(St):Gt(fe(St),qt)},Cs=function(St){var qt=$(St),Pt=p(vs,this,qt);return this===st&&Q(et,qt)&&!Q(De,qt)?!1:Pt||!Q(this,qt)||!Q(et,qt)||Q(this,Te)&&this[Te][qt]?Pt:!0},rs=function(St,qt){var Pt=J(St),gs=$(qt);if(!(Pt===st&&Q(et,gs)&&!Q(De,gs))){var Rs=Tt(Pt,gs);return Rs&&Q(et,gs)&&!(Q(Pt,Te)&&Pt[Te][gs])&&(Rs.enumerable=!0),Rs}},Is=function(St){var qt=Ts(J(St)),Pt=[];return pt(qt,function(gs){!Q(et,gs)&&!Q(ge,gs)&&Ns(Pt,gs)}),Pt},on=function(ws){var St=ws===st,qt=Ts(St?De:J(ws)),Pt=[];return pt(qt,function(gs){Q(et,gs)&&(!St||Q(st,gs))&&Ns(Pt,et[gs])}),Pt};B||(nt=function(){if(k(at,this))throw new yt("Symbol is not a constructor");var St=!arguments.length||arguments[0]===void 0?void 0:q(arguments[0]),qt=we(St),Pt=function(gs){var Rs=this===void 0?y:this;Rs===st&&p(Pt,De,gs),Q(Rs,Te)&&Q(Rs[Te],qt)&&(Rs[Te][qt]=!1);var Nn=X(1,gs);try{Ht(Rs,qt,Nn)}catch(ys){if(!(ys instanceof Dt))throw ys;ls(Rs,qt,Nn)}};return w&&mt&&Ht(st,qt,{configurable:!0,set:Pt}),Kt(qt,St)},at=nt[_e],xe(at,"toString",function(){return dt(this).tag}),xe(nt,"withoutSetter",function(ws){return Kt(we(ws),ws)}),se.f=Cs,ne.f=lt,oe.f=Gt,re.f=rs,le.f=ue.f=Is,te.f=on,be.f=function(ws){return Kt(pe(ws),ws)},w&&(Me(at,"description",{configurable:!0,get:function(){return dt(this).description}}),b||xe(st,"propertyIsEnumerable",Cs,{unsafe:!0}))),m({global:!0,constructor:!0,wrap:!0,forced:!B,sham:!B},{Symbol:nt}),pt(ee(rt),function(ws){je(ws)}),m({target:Ce,stat:!0,forced:!B},{useSetter:function(){mt=!0},useSimple:function(){mt=!1}}),m({target:"Object",stat:!0,forced:!B,sham:!w},{create:Yt,defineProperty:lt,defineProperties:Gt,getOwnPropertyDescriptor:rs}),m({target:"Object",stat:!0,forced:!B},{getOwnPropertyNames:Is}),Ne(),Je(nt,Ce),ge[Te]=!0}),"./node_modules/core-js/modules/es.symbol.description.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/descriptors.js"),p=o("./node_modules/core-js/internals/global-this.js"),j=o("./node_modules/core-js/internals/function-uncurry-this.js"),b=o("./node_modules/core-js/internals/has-own-property.js"),w=o("./node_modules/core-js/internals/is-callable.js"),B=o("./node_modules/core-js/internals/object-is-prototype-of.js"),L=o("./node_modules/core-js/internals/to-string.js"),Q=o("./node_modules/core-js/internals/define-built-in-accessor.js"),k=o("./node_modules/core-js/internals/copy-constructor-properties.js"),z=p.Symbol,J=z&&z.prototype;if(y&&w(z)&&(!("description"in J)||z().description!==void 0)){var $={},q=function(){var ne=arguments.length<1||arguments[0]===void 0?void 0:L(arguments[0]),oe=B(J,this)?new z(ne):ne===void 0?z():z(ne);return ne===""&&($[oe]=!0),oe};k(q,z),q.prototype=J,J.constructor=q;var X=String(z("description detection"))==="Symbol(description detection)",fe=j(J.valueOf),ee=j(J.toString),le=/^Symbol\((.*)\)[^)]+$/,ue=j("".replace),te=j("".slice);Q(J,"description",{configurable:!0,get:function(){var ne=fe(this);if(b($,ne))return"";var oe=ee(ne),se=X?te(oe,7,-1):ue(oe,le,"$1");return se===""?void 0:se}}),m({global:!0,constructor:!0,forced:!0},{Symbol:q})}}),"./node_modules/core-js/modules/es.symbol.for.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/get-built-in.js"),p=o("./node_modules/core-js/internals/has-own-property.js"),j=o("./node_modules/core-js/internals/to-string.js"),b=o("./node_modules/core-js/internals/shared.js"),w=o("./node_modules/core-js/internals/symbol-registry-detection.js"),B=b("string-to-symbol-registry"),L=b("symbol-to-string-registry");m({target:"Symbol",stat:!0,forced:!w},{for:function(Q){var k=j(Q);if(p(B,k))return B[k];var z=y("Symbol")(k);return B[k]=z,L[z]=k,z}})}),"./node_modules/core-js/modules/es.symbol.iterator.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/well-known-symbol-define.js");m("iterator")}),"./node_modules/core-js/modules/es.symbol.js":(function(d,h,o){o("./node_modules/core-js/modules/es.symbol.constructor.js"),o("./node_modules/core-js/modules/es.symbol.for.js"),o("./node_modules/core-js/modules/es.symbol.key-for.js"),o("./node_modules/core-js/modules/es.json.stringify.js"),o("./node_modules/core-js/modules/es.object.get-own-property-symbols.js")}),"./node_modules/core-js/modules/es.symbol.key-for.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/has-own-property.js"),p=o("./node_modules/core-js/internals/is-symbol.js"),j=o("./node_modules/core-js/internals/try-to-string.js"),b=o("./node_modules/core-js/internals/shared.js"),w=o("./node_modules/core-js/internals/symbol-registry-detection.js"),B=b("symbol-to-string-registry");m({target:"Symbol",stat:!0,forced:!w},{keyFor:function(Q){if(!p(Q))throw new TypeError(j(Q)+" is not a symbol");if(y(B,Q))return B[Q]}})}),"./node_modules/core-js/modules/esnext.iterator.constructor.js":(function(d,h,o){o("./node_modules/core-js/modules/es.iterator.constructor.js")}),"./node_modules/core-js/modules/esnext.iterator.for-each.js":(function(d,h,o){o("./node_modules/core-js/modules/es.iterator.for-each.js")}),"./node_modules/core-js/modules/esnext.iterator.map.js":(function(d,h,o){o("./node_modules/core-js/modules/es.iterator.map.js")}),"./node_modules/core-js/modules/esnext.set.add-all.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/a-set.js"),p=o("./node_modules/core-js/internals/set-helpers.js").add;m({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var b=y(this),w=0,B=arguments.length;w<B;w++)p(b,arguments[w]);return b}})}),"./node_modules/core-js/modules/esnext.set.delete-all.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/a-set.js"),p=o("./node_modules/core-js/internals/set-helpers.js").remove;m({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var b=y(this),w=!0,B,L=0,Q=arguments.length;L<Q;L++)B=p(b,arguments[L]),w=w&&B;return!!w}})}),"./node_modules/core-js/modules/esnext.set.difference.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-difference.js");m({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/esnext.set.every.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-bind-context.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-iterate.js");m({target:"Set",proto:!0,real:!0,forced:!0},{every:function(w){var B=p(this),L=y(w,arguments.length>1?arguments[1]:void 0);return j(B,function(Q){if(!L(Q,Q,B))return!1},!0)!==!1}})}),"./node_modules/core-js/modules/esnext.set.filter.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-bind-context.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-helpers.js"),b=o("./node_modules/core-js/internals/set-iterate.js"),w=j.Set,B=j.add;m({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(Q){var k=p(this),z=y(Q,arguments.length>1?arguments[1]:void 0),J=new w;return b(k,function($){z($,$,k)&&B(J,$)}),J}})}),"./node_modules/core-js/modules/esnext.set.find.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-bind-context.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-iterate.js");m({target:"Set",proto:!0,real:!0,forced:!0},{find:function(w){var B=p(this),L=y(w,arguments.length>1?arguments[1]:void 0),Q=j(B,function(k){if(L(k,k,B))return{value:k}},!0);return Q&&Q.value}})}),"./node_modules/core-js/modules/esnext.set.intersection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-intersection.js");m({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/esnext.set.is-disjoint-from.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-is-disjoint-from.js");m({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/esnext.set.is-subset-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-is-subset-of.js");m({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/esnext.set.is-superset-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-is-superset-of.js");m({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/esnext.set.join.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-iterate.js"),b=o("./node_modules/core-js/internals/to-string.js"),w=y([].join),B=y([].push);m({target:"Set",proto:!0,real:!0,forced:!0},{join:function(Q){var k=p(this),z=Q===void 0?",":b(Q),J=[];return j(k,function($){B(J,$)}),w(J,z)}})}),"./node_modules/core-js/modules/esnext.set.map.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-bind-context.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-helpers.js"),b=o("./node_modules/core-js/internals/set-iterate.js"),w=j.Set,B=j.add;m({target:"Set",proto:!0,real:!0,forced:!0},{map:function(Q){var k=p(this),z=y(Q,arguments.length>1?arguments[1]:void 0),J=new w;return b(k,function($){B(J,z($,$,k))}),J}})}),"./node_modules/core-js/modules/esnext.set.reduce.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/a-callable.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-iterate.js"),b=TypeError;m({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(B){var L=p(this),Q=arguments.length<2,k=Q?void 0:arguments[1];if(y(B),j(L,function(z){Q?(Q=!1,k=z):k=B(k,z,z,L)}),Q)throw new b("Reduce of empty set with no initial value");return k}})}),"./node_modules/core-js/modules/esnext.set.some.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-bind-context.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-iterate.js");m({target:"Set",proto:!0,real:!0,forced:!0},{some:function(w){var B=p(this),L=y(w,arguments.length>1?arguments[1]:void 0);return j(B,function(Q){if(L(Q,Q,B))return!0},!0)===!0}})}),"./node_modules/core-js/modules/esnext.set.symmetric-difference.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-symmetric-difference.js");m({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/esnext.set.union.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-union.js");m({target:"Set",proto:!0,real:!0,forced:!0},{union:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/web.dom-collections.for-each.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/dom-iterables.js"),p=o("./node_modules/core-js/internals/dom-token-list-prototype.js"),j=o("./node_modules/core-js/internals/array-for-each.js"),b=o("./node_modules/core-js/internals/create-non-enumerable-property.js"),w=function(L){if(L&&L.forEach!==j)try{b(L,"forEach",j)}catch{L.forEach=j}};for(var B in y)y[B]&&w(m[B]&&m[B].prototype);w(p)}),"./node_modules/core-js/modules/web.dom-collections.iterator.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/dom-iterables.js"),p=o("./node_modules/core-js/internals/dom-token-list-prototype.js"),j=o("./node_modules/core-js/modules/es.array.iterator.js"),b=o("./node_modules/core-js/internals/create-non-enumerable-property.js"),w=o("./node_modules/core-js/internals/set-to-string-tag.js"),B=o("./node_modules/core-js/internals/well-known-symbol.js"),L=B("iterator"),Q=j.values,k=function(J,$){if(J){if(J[L]!==Q)try{b(J,L,Q)}catch{J[L]=Q}if(w(J,$,!0),y[$]){for(var q in j)if(J[q]!==j[q])try{b(J,q,j[q])}catch{J[q]=j[q]}}}};for(var z in y)k(m[z]&&m[z].prototype,z);k(p,"DOMTokenList")}),"./node_modules/core-js/modules/web.set-interval.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/schedulers-fix.js"),j=p(y.setInterval,!0);m({global:!0,bind:!0,forced:y.setInterval!==j},{setInterval:j})}),"./node_modules/core-js/modules/web.set-timeout.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/schedulers-fix.js"),j=p(y.setTimeout,!0);m({global:!0,bind:!0,forced:y.setTimeout!==j},{setTimeout:j})}),"./node_modules/core-js/modules/web.timers.js":(function(d,h,o){o("./node_modules/core-js/modules/web.set-interval.js"),o("./node_modules/core-js/modules/web.set-timeout.js")}),"./src/plugin/hyperlinks.js":(function(d,h,o){o.r(h),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.string.link.js"),o("./node_modules/core-js/modules/esnext.iterator.constructor.js"),o("./node_modules/core-js/modules/esnext.iterator.for-each.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js");var m=o("./src/worker.js"),y=o("./src/utils.js"),p=[],j={toContainer:m.default.prototype.toContainer,toPdf:m.default.prototype.toPdf};m.default.prototype.toContainer=function(){return j.toContainer.call(this).then(function(){if(this.opt.enableLinks){var B=this.prop.container,L=B.querySelectorAll("a"),Q=(0,y.unitConvert)(B.getBoundingClientRect(),this.prop.pageSize.k);p=[],Array.prototype.forEach.call(L,function(k){for(var z=k.getClientRects(),J=0;J<z.length;J++){var $=(0,y.unitConvert)(z[J],this.prop.pageSize.k);$.left-=Q.left,$.top-=Q.top;var q=Math.floor($.top/this.prop.pageSize.inner.height)+1,X=this.opt.margin[0]+$.top%this.prop.pageSize.inner.height,fe=this.opt.margin[1]+$.left;p.push({page:q,top:X,left:fe,clientRect:$,link:k})}},this)}})},m.default.prototype.toPdf=function(){return j.toPdf.call(this).then(function(){if(this.opt.enableLinks){p.forEach(function(L){this.prop.pdf.setPage(L.page),this.prop.pdf.link(L.left,L.top,L.clientRect.width,L.clientRect.height,{url:L.link.href})},this);var B=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(B)}})}}),"./src/plugin/jspdf-plugin.js":(function(d,h,o){o.r(h),o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.symbol.description.js"),o("./node_modules/core-js/modules/es.symbol.iterator.js"),o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.string.iterator.js"),o("./node_modules/core-js/modules/web.dom-collections.iterator.js");var m=o("jspdf");function y(p){"@babel/helpers - typeof";return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},y(p)}m.jsPDF.getPageSize=function(p,j,b){if(y(p)==="object"){var w=p;p=w.orientation,j=w.unit||j,b=w.format||b}j=j||"mm",b=b||"a4",p=(""+(p||"P")).toLowerCase();var B=(""+b).toLowerCase(),L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(j){case"pt":var Q=1;break;case"mm":var Q=72/25.4;break;case"cm":var Q=72/2.54;break;case"in":var Q=72;break;case"px":var Q=72/96;break;case"pc":var Q=12;break;case"em":var Q=12;break;case"ex":var Q=6;break;default:throw"Invalid unit: "+j}if(L.hasOwnProperty(B))var k=L[B][1]/Q,z=L[B][0]/Q;else try{var k=b[1],z=b[0]}catch{throw new Error("Invalid format: "+b)}if(p==="p"||p==="portrait"){if(p="p",z>k){var J=z;z=k,k=J}}else if(p==="l"||p==="landscape"){if(p="l",k>z){var J=z;z=k,k=J}}else throw"Invalid orientation: "+p;var $={width:z,height:k,unit:j,k:Q};return $},h.default=m.jsPDF}),"./src/plugin/pagebreaks.js":(function(d,h,o){o.r(h),o("./node_modules/core-js/modules/es.array.concat.js"),o("./node_modules/core-js/modules/es.array.join.js"),o("./node_modules/core-js/modules/es.array.slice.js"),o("./node_modules/core-js/modules/es.object.keys.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/esnext.iterator.constructor.js"),o("./node_modules/core-js/modules/esnext.iterator.for-each.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js");var m=o("./src/worker.js"),y=o("./src/utils.js"),p={toContainer:m.default.prototype.toContainer};m.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},m.default.prototype.toContainer=function(){return p.toContainer.call(this).then(function(){var w=this.prop.container,B=this.prop.pageSize.inner.px.height,L=[].concat(this.opt.pagebreak.mode),Q={avoidAll:L.indexOf("avoid-all")!==-1,css:L.indexOf("css")!==-1,legacy:L.indexOf("legacy")!==-1},k={},z=this;["before","after","avoid"].forEach(function(q){var X=Q.avoidAll&&q==="avoid";k[q]=X?[]:[].concat(z.opt.pagebreak[q]||[]),k[q].length>0&&(k[q]=Array.prototype.slice.call(w.querySelectorAll(k[q].join(", "))))});var J=w.querySelectorAll(".html2pdf__page-break");J=Array.prototype.slice.call(J);var $=w.querySelectorAll("*");Array.prototype.forEach.call($,function(X){var fe={before:!1,after:Q.legacy&&J.indexOf(X)!==-1,avoid:Q.avoidAll};if(Q.css){var ee=window.getComputedStyle(X),le=["always","page","left","right"],ue=["avoid","avoid-page"];fe={before:fe.before||le.indexOf(ee.breakBefore||ee.pageBreakBefore)!==-1,after:fe.after||le.indexOf(ee.breakAfter||ee.pageBreakAfter)!==-1,avoid:fe.avoid||ue.indexOf(ee.breakInside||ee.pageBreakInside)!==-1}}Object.keys(fe).forEach(function(xe){fe[xe]=fe[xe]||k[xe].indexOf(X)!==-1});var te=X.getBoundingClientRect();if(fe.avoid&&!fe.before){var re=Math.floor(te.top/B),ne=Math.floor(te.bottom/B),oe=Math.abs(te.bottom-te.top)/B;ne!==re&&oe<=1&&(fe.before=!0)}if(fe.before){var se=(0,y.createElement)("div",{style:{display:"block",height:B-te.top%B+"px"}});X.parentNode.insertBefore(se,X)}if(fe.after){var se=(0,y.createElement)("div",{style:{display:"block",height:B-te.bottom%B+"px"}});X.parentNode.insertBefore(se,X.nextSibling)}})})}}),"./src/snapdom/clone.js":(function(d,h,o){o.r(h),o.d(h,{deepCloneBasic:function(){return b}}),o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.symbol.description.js"),o("./node_modules/core-js/modules/es.symbol.iterator.js"),o("./node_modules/core-js/modules/es.array.concat.js"),o("./node_modules/core-js/modules/es.array.from.js"),o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/core-js/modules/es.array.slice.js"),o("./node_modules/core-js/modules/es.function.name.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.regexp.exec.js"),o("./node_modules/core-js/modules/es.regexp.test.js"),o("./node_modules/core-js/modules/es.regexp.to-string.js"),o("./node_modules/core-js/modules/es.set.js"),o("./node_modules/core-js/modules/es.string.iterator.js"),o("./node_modules/core-js/modules/esnext.set.add-all.js"),o("./node_modules/core-js/modules/esnext.set.delete-all.js"),o("./node_modules/core-js/modules/esnext.set.difference.js"),o("./node_modules/core-js/modules/esnext.set.every.js"),o("./node_modules/core-js/modules/esnext.set.filter.js"),o("./node_modules/core-js/modules/esnext.set.find.js"),o("./node_modules/core-js/modules/esnext.set.intersection.js"),o("./node_modules/core-js/modules/esnext.set.is-disjoint-from.js"),o("./node_modules/core-js/modules/esnext.set.is-subset-of.js"),o("./node_modules/core-js/modules/esnext.set.is-superset-of.js"),o("./node_modules/core-js/modules/esnext.set.join.js"),o("./node_modules/core-js/modules/esnext.set.map.js"),o("./node_modules/core-js/modules/esnext.set.reduce.js"),o("./node_modules/core-js/modules/esnext.set.some.js"),o("./node_modules/core-js/modules/esnext.set.symmetric-difference.js"),o("./node_modules/core-js/modules/esnext.set.union.js"),o("./node_modules/core-js/modules/web.dom-collections.iterator.js");function m(w,B){var L=typeof Symbol<"u"&&w[Symbol.iterator]||w["@@iterator"];if(!L){if(Array.isArray(w)||(L=y(w))||B){L&&(w=L);var Q=0,k=function(){};return{s:k,n:function(){return Q>=w.length?{done:!0}:{done:!1,value:w[Q++]}},e:function(X){throw X},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var z,J=!0,$=!1;return{s:function(){L=L.call(w)},n:function(){var X=L.next();return J=X.done,X},e:function(X){$=!0,z=X},f:function(){try{J||L.return==null||L.return()}finally{if($)throw z}}}}function y(w,B){if(w){if(typeof w=="string")return p(w,B);var L={}.toString.call(w).slice(8,-1);return L==="Object"&&w.constructor&&(L=w.constructor.name),L==="Map"||L==="Set"?Array.from(w):L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L)?p(w,B):void 0}}function p(w,B){(B==null||B>w.length)&&(B=w.length);for(var L=0,Q=Array(B);L<B;L++)Q[L]=w[L];return Q}function j(w,B){try{var L=w.currentSrc||w.src||"";if(!L)return;B.setAttribute("src",L),B.removeAttribute("srcset"),B.removeAttribute("sizes"),B.loading="eager",B.decoding="sync"}catch{}}function b(w){if(!w)throw new Error("Invalid node");var B=new Set,L=null;if(w.nodeType===Node.TEXT_NODE||w.nodeType!==Node.ELEMENT_NODE)return w.cloneNode(!0);if(w.tagName==="IFRAME"){var Q=document.createElement("div");return Q.style.cssText="width:".concat(w.offsetWidth,"px;height:").concat(w.offsetHeight,"px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;"),Q}if(w.tagName==="CANVAS"){var k=w.toDataURL(),z=document.createElement("img");return z.src=k,z.width=w.width,z.height=w.height,z}var J;try{J=w.cloneNode(!1),w.tagName==="IMG"&&j(w,J)}catch(Ce){throw console.error("[Snapdom] Failed to clone node:",w,Ce),Ce}if(w instanceof HTMLTextAreaElement){J.textContent=w.value,J.value=w.value;var $=w.getBoundingClientRect();return J.style.boxSizing="border-box",J.style.width="".concat($.width,"px"),J.style.height="".concat($.height,"px"),J}if(w instanceof HTMLInputElement&&(w.hasAttribute("value")&&(J.value=w.value,J.setAttribute("value",w.value)),w.checked!==void 0&&(J.checked=w.checked,w.checked&&J.setAttribute("checked",""),w.indeterminate&&(J.indeterminate=w.indeterminate))),w instanceof HTMLSelectElement&&(L=w.value),w.shadowRoot){var q=Array.from(w.shadowRoot.querySelectorAll("slot")).length>0;if(!q){var X=document.createDocumentFragment(),fe=m(w.shadowRoot.childNodes),ee;try{for(fe.s();!(ee=fe.n()).done;){var le=ee.value;if(!(le.nodeType===Node.ELEMENT_NODE&&le.tagName==="STYLE")){var ue=b(le);ue&&X.appendChild(ue)}}}catch(Ce){fe.e(Ce)}finally{fe.f()}J.appendChild(X)}}if(w.tagName==="SLOT"){var te,re=((te=w.assignedNodes)===null||te===void 0?void 0:te.call(w,{flatten:!0}))||[],ne=re.length>0?re:Array.from(w.childNodes),oe=document.createDocumentFragment(),se=m(ne),xe;try{for(se.s();!(xe=se.n()).done;){var Me=xe.value,me=b(Me);me&&oe.appendChild(me)}}catch(Ce){se.e(Ce)}finally{se.f()}return oe}var Z=m(w.childNodes),ge;try{for(Z.s();!(ge=Z.n()).done;){var we=ge.value;if(!B.has(we)){var pe=b(we);pe&&J.appendChild(pe)}}}catch(Ce){Z.e(Ce)}finally{Z.f()}if(L!==null&&J instanceof HTMLSelectElement){J.value=L;var be=m(J.options),je;try{for(be.s();!(je=be.n()).done;){var Ne=je.value;Ne.value===L?Ne.setAttribute("selected",""):Ne.removeAttribute("selected")}}catch(Ce){be.e(Ce)}finally{be.f()}}var Je=w.scrollLeft,Qe=w.scrollTop,pt=Je||Qe;if(pt&&J instanceof HTMLElement){J.style.overflow="hidden",J.style.scrollbarWidth="none",J.style.msOverflowStyle="none";var Te=document.createElement("div");for(Te.style.transform="translate(".concat(-Je,"px, ").concat(-Qe,"px)"),Te.style.willChange="transform",Te.style.display="inline-block",Te.style.width="100%";J.firstChild;)Te.appendChild(J.firstChild);J.appendChild(Te)}return J}}),"./src/utils.js":(function(d,h,o){o.r(h),o.d(h,{createElement:function(){return p},objType:function(){return y},toPx:function(){return b},unitConvert:function(){return j}}),o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.symbol.description.js"),o("./node_modules/core-js/modules/es.symbol.iterator.js"),o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/core-js/modules/es.number.constructor.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.string.iterator.js"),o("./node_modules/core-js/modules/web.dom-collections.iterator.js");function m(w){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},m(w)}var y=function(B){var L=m(B);return L==="undefined"?"undefined":L==="string"||B instanceof String?"string":L==="number"||B instanceof Number?"number":L==="function"||B instanceof Function?"function":B&&B.constructor===Array?"array":B&&B.nodeType===1?"element":L==="object"?"object":"unknown"},p=function(B,L){var Q=document.createElement(B);if(L.className&&(Q.className=L.className),L.innerHTML){Q.innerHTML=L.innerHTML;for(var k=Q.getElementsByTagName("script"),z=k.length;z-- >0;null)k[z].parentNode.removeChild(k[z])}for(var J in L.style)Q.style[J]=L.style[J];return Q},j=function(B,L){if(y(B)==="number")return B*72/96/L;var Q={};for(var k in B)Q[k]=B[k]*72/96/L;return Q},b=function(B,L){return Math.floor(B*L/72*96)}}),"./src/worker.js":(function(d,h,o){o.r(h),o("./node_modules/core-js/modules/es.array.concat.js"),o("./node_modules/core-js/modules/es.array.map.js"),o("./node_modules/core-js/modules/es.function.name.js"),o("./node_modules/core-js/modules/es.json.stringify.js"),o("./node_modules/core-js/modules/es.object.assign.js"),o("./node_modules/core-js/modules/es.object.keys.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.promise.js"),o("./node_modules/core-js/modules/es.regexp.to-string.js"),o("./node_modules/core-js/modules/esnext.iterator.constructor.js"),o("./node_modules/core-js/modules/esnext.iterator.for-each.js"),o("./node_modules/core-js/modules/esnext.iterator.map.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js"),o("./node_modules/core-js/modules/web.timers.js");var m=o("jspdf"),y=o("html2canvas"),p=o.n(y),j=o("./src/snapdom/clone.js"),b=o("./src/utils.js"),w=function B(L){var Q=Object.assign(B.convert(Promise.resolve()),JSON.parse(JSON.stringify(B.template))),k=B.convert(Promise.resolve(),Q);return k=k.setProgress(1,B,1,[B]),k=k.set(L),k};w.prototype=Object.create(Promise.prototype),w.prototype.constructor=w,w.convert=function(L,Q){return L.__proto__=Q||w.prototype,L},w.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},w.prototype.from=function(L,Q){function k(z){switch((0,b.objType)(z)){case"string":return"string";case"element":return z.nodeName.toLowerCase&&z.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(Q=Q||k(L),Q){case"string":return this.set({src:(0,b.createElement)("div",{innerHTML:L})});case"element":return this.set({src:L});case"canvas":return this.set({canvas:L});case"img":return this.set({img:L});default:return this.error("Unknown source type.")}})},w.prototype.to=function(L){switch(L){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},w.prototype.toContainer=function(){var L=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(L).then(function(){var k={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},z={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};k.opacity=0;var J=(0,j.deepCloneBasic)(this.prop.src);return this.prop.overlay=(0,b.createElement)("div",{className:"html2pdf__overlay",style:k}),this.prop.container=(0,b.createElement)("div",{className:"html2pdf__container",style:z}),this.prop.container.appendChild(J),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),new Promise(function($){return setTimeout($,10)})})},w.prototype.toCanvas=function(){var L=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(L).then(function(){var k=Object.assign({},this.opt.html2canvas);return delete k.onrendered,p()(this.prop.container,k)}).then(function(k){var z=this.opt.html2canvas.onrendered||function(){};z(k),this.prop.canvas=k,document.body.removeChild(this.prop.overlay)})},w.prototype.toImg=function(){var L=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(L).then(function(){var k=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=k})},w.prototype.toPdf=function(){var L=[function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(L).then(function(){var k=this.prop.canvas,z=this.opt,J=k.height,$=Math.floor(k.width*this.prop.pageSize.inner.ratio),q=Math.ceil(J/$),X=this.prop.pageSize.inner.height,fe=document.createElement("canvas"),ee=fe.getContext("2d");fe.width=k.width,fe.height=$,this.prop.pdf=this.prop.pdf||new m.jsPDF(z.jsPDF);for(var le=0;le<q;le++){le===q-1&&J%$!==0&&(fe.height=J%$,X=fe.height*this.prop.pageSize.inner.width/fe.width);var ue=fe.width,te=fe.height;ee.fillStyle="white",ee.fillRect(0,0,ue,te),ee.drawImage(k,0,le*$,ue,te,0,0,ue,te),le&&this.prop.pdf.addPage();var re=fe.toDataURL("image/"+z.image.type,z.image.quality);this.prop.pdf.addImage(re,z.image.type,z.margin[1],z.margin[0],this.prop.pageSize.inner.width,X)}})},w.prototype.output=function(L,Q,k){return k=k||"pdf",k.toLowerCase()==="img"||k.toLowerCase()==="image"?this.outputImg(L,Q):this.outputPdf(L,Q)},w.prototype.outputPdf=function(L,Q){var k=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(k).then(function(){return this.prop.pdf.output(L,Q)})},w.prototype.outputImg=function(L,Q){var k=[function(){return this.prop.img||this.toImg()}];return this.thenList(k).then(function(){switch(L){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+L+'" is not supported.'}})},w.prototype.save=function(L){var Q=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(Q).set(L?{filename:L}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},w.prototype.set=function(L){if((0,b.objType)(L)!=="object")return this;var Q=Object.keys(L||{}).map(function(k){switch(k){case"margin":return this.setMargin.bind(this,L.margin);case"jsPDF":return function(){return this.opt.jsPDF=L.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,L.pageSize);default:return k in w.template.prop?function(){this.prop[k]=L[k]}:function(){this.opt[k]=L[k]}}},this);return this.then(function(){return this.thenList(Q)})},w.prototype.get=function(L,Q){return this.then(function(){var z=L in w.template.prop?this.prop[L]:this.opt[L];return Q?Q(z):z})},w.prototype.setMargin=function(L){return this.then(function(){switch((0,b.objType)(L)){case"number":L=[L,L,L,L];case"array":if(L.length===2&&(L=[L[0],L[1],L[0],L[1]]),L.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=L}).then(this.setPageSize)},w.prototype.setPageSize=function(L){return this.then(function(){L=L||m.jsPDF.getPageSize(this.opt.jsPDF),L.hasOwnProperty("inner")||(L.inner={width:L.width-this.opt.margin[1]-this.opt.margin[3],height:L.height-this.opt.margin[0]-this.opt.margin[2]},L.inner.px={width:(0,b.toPx)(L.inner.width,L.k),height:(0,b.toPx)(L.inner.height,L.k)},L.inner.ratio=L.inner.height/L.inner.width),this.prop.pageSize=L})},w.prototype.setProgress=function(L,Q,k,z){return L!=null&&(this.progress.val=L),Q!=null&&(this.progress.state=Q),k!=null&&(this.progress.n=k),z!=null&&(this.progress.stack=z),this.progress.ratio=this.progress.val/this.progress.state,this},w.prototype.updateProgress=function(L,Q,k,z){return this.setProgress(L?this.progress.val+L:null,Q||null,k?this.progress.n+k:null,z?this.progress.stack.concat(z):null)},w.prototype.then=function(L,Q){var k=this;return this.thenCore(L,Q,function(J,$){return k.updateProgress(null,null,1,[J]),Promise.prototype.then.call(this,function(X){return k.updateProgress(null,J),X}).then(J,$).then(function(X){return k.updateProgress(1),X})})},w.prototype.thenCore=function(L,Q,k){k=k||Promise.prototype.then;var z=this;L&&(L=L.bind(z)),Q&&(Q=Q.bind(z));var J=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise",$=J?z:w.convert(Object.assign({},z),Promise.prototype),q=k.call($,L,Q);return w.convert(q,z.__proto__)},w.prototype.thenExternal=function(L,Q){return Promise.prototype.then.call(this,L,Q)},w.prototype.thenList=function(L){var Q=this;return L.forEach(function(z){Q=Q.thenCore(z)}),Q},w.prototype.catch=function(B){B&&(B=B.bind(this));var L=Promise.prototype.catch.call(this,B);return w.convert(L,this)},w.prototype.catchExternal=function(L){return Promise.prototype.catch.call(this,L)},w.prototype.error=function(L){return this.then(function(){throw new Error(L)})},w.prototype.using=w.prototype.set,w.prototype.saveAs=w.prototype.save,w.prototype.export=w.prototype.output,w.prototype.run=w.prototype.then,h.default=w}),html2canvas:(function(d){d.exports=r}),jspdf:(function(d){d.exports=n})},c={};function A(d){var h=c[d];if(h!==void 0)return h.exports;var o=c[d]={exports:{}};return i[d].call(o.exports,o,o.exports,A),o.exports}(function(){A.n=function(d){var h=d&&d.__esModule?function(){return d.default}:function(){return d};return A.d(h,{a:h}),h}})(),(function(){A.d=function(d,h){for(var o in h)A.o(h,o)&&!A.o(d,o)&&Object.defineProperty(d,o,{enumerable:!0,get:h[o]})}})(),(function(){A.o=function(d,h){return Object.prototype.hasOwnProperty.call(d,h)}})(),(function(){A.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}})();var u={};return(function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/A.r(u);var d=A("./src/worker.js");A("./src/plugin/jspdf-plugin.js"),A("./src/plugin/pagebreaks.js"),A("./src/plugin/hyperlinks.js");var h=function o(m,y){var p=new o.Worker(y);return m?p.from(m).save():p};h.Worker=d.default,u.default=h})(),u=u.default,u})()})})(fv)),fv.exports}var RG=IG();const Qd=o1(RG),bu=Object.freeze(Object.defineProperty({__proto__:null,default:Qd},Symbol.toStringTag,{value:"Module"}));function Um(t,s){return 2*t+s}function Lm(t,s){return t*s/9}const Dv="/image.png",OG=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),Hr=t=>(t||"").toString().toUpperCase(),dR={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},Cy={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},UG=(t,s)=>{const n=Hr(t.product),r=Hr(t.name),i=Hr(t.category),c=Hr(t.subCategory),u=(dR[s]||[s.toUpperCase()]).some(o=>n.includes(o)||r.includes(o)||i.includes(o)||c.includes(o)),d=Cy[s],h=d&&Hr(n).includes(Hr(d));return u||h},Pp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function LG(){const{shops:t,materials:s,products:n}=ei(),{toast:r}=ma(),[i,c]=S.useState(1),A=typeof window<"u"&&window.location.search.includes("step=11"),[u,d]=S.useState(""),[h,o]=S.useState(""),[m,y]=S.useState(null),[p,j]=S.useState(null),[b,w]=S.useState(null),[B,L]=S.useState(null),[Q,k]=S.useState(null),[z,J]=S.useState(null),[$,q]=S.useState(1),[X,fe]=S.useState(7),[ee,le]=S.useState(3),[ue,te]=S.useState(6),[re,ne]=S.useState(2),[oe,se]=S.useState([]),[xe,Me]=S.useState([]);S.useEffect(()=>{ct("/api/accumulated-products/doors",{headers:{}}).then(N=>N.json()).then(N=>{Me(N.data||[])}).catch(N=>console.error("Failed to load accumulated products",N))},[]),S.useEffect(()=>{if(typeof window<"u"){const x=new URLSearchParams(window.location.search).get("step");if(x){const I=parseInt(x,10);I>=1&&I<=12&&c(I)}}},[]),S.useEffect(()=>{i===12&&ct("/api/accumulated-products/doors",{headers:{}}).then(N=>N.json()).then(N=>{const x=N.data||[];Me(x),console.debug("Restored doors_accumulated_products for Step 12:",x.length)}).catch(N=>console.error("Failed to load accumulated products for Step 12",N))},[i]);const me=N=>{const x=N?.doorType??b,I=N?.panelType??p,F=N?.subOption??B;if(!x)return null;const _=be.find(ae=>ae.value===x);let U=_?_.label:Cy[x]||x;/door/i.test(U)||(U=`${U} Door`);const P=I==="panel"?"With Panel":"Without Panel",K=F?` - ${F}`:"";return`${P}  ${U}${K}`},Z=()=>{const N=(h||"").toString();if(!b&&!N)return null;const x=N||me(),I=N||Cy[b]||b,F=b?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(b):Hr(x).includes("GLASS")||Hr(x).includes("STILE");return{label:x,productName:I,requiresGlazing:F}},ge=()=>{const N=(h||"").toString();if(!b&&!N||!s.length)return[];const x=N||(b?Cy[b]:"");let I=[];if(x&&(I=s.filter(_=>{const U=(_.product||"").toString();if(!U||!x)return!1;const P=Hr(U),K=Hr(x);return P.includes(K)||K.includes(P)})),(!I||I.length===0)&&!N&&(I=b?s.filter(_=>UG(_,b)):s.filter(_=>{const U=(_.product||"").toString();if(!x)return!1;const P=Hr(U),K=Hr(x);return P.includes(K)||K.includes(P)})),I.length===0)return[];const F=new Map;for(const _ of I){const U=`${Hr(_.product)}__${Hr(_.name)}__${OG(_.code)}`,P=F.get(U);(!P||(_.rate||0)<(P.rate||0))&&F.set(U,_)}return Array.from(F.values())},we={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},pe=["Single Glass","Double Glass"],be=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],je=(N,x)=>{const I=$||1,F=X||7,_=ee||3,U=ue||6,P=re||2,K=Um(F,_),ae=N.toLowerCase();let Fe=0;return ae.includes("frame")||ae.includes("door frame")?Fe=K*I:ae.includes("door")&&(ae.includes("panel")||ae.includes("shutter")||ae.includes("flush")||ae.includes("wooden"))?Fe=I:ae.includes("hinge")?Fe=I*3:ae.includes("lock")||ae.includes("handle")||ae.includes("stopper")||ae.includes("bolt")?Fe=I:ae.includes("glass")?Fe=Lm(U,P)*I:Fe=I,Math.max(1,Math.ceil(Fe))},Ne=(N,x)=>{const I=N||oe,F=x||nt;return I.map(_=>{let U=Qe.find(xs=>xs.id===_.materialId);if(U||(U=s.find(xs=>xs.id===_.materialId)||null),!U)return null;const P=s.find(xs=>{const Gs=Hr(xs.product)===Hr(U.product),Rn=Hr(xs.name)===Hr(U.name),V=xs.shopId===_.selectedShopId,ye=Pp(xs)===(_.selectedBrand||"Generic");return Gs&&Rn&&V&&ye})||U,K=t.find(xs=>xs.id===_.selectedShopId),ae=_.rowId||(_.batchId?`${_.batchId}-${P.id}`:P.id),Fe=F[ae]||F[P.id]||F[U.id],Ye=je(P.name,P.unit),tt=Fe?.quantity??Ye,Ft=Fe?.supplyRate??P.rate??0,Zt=Fe?.installRate??0,as=(rn||[]).find(xs=>xs.rowId===ae||`${xs.batchId||""}-${xs.id}`===ae);return{id:P.id,batchId:_.batchId,rowId:ae,name:P.name,quantity:tt,unit:P.unit,rate:Ft,shopId:_.selectedShopId,shopName:K?.name||"Unknown",installRate:Zt,doorType:as?.doorType||as?.door_type||void 0,panelType:as?.panelType||as?.panel_type||void 0,subOption:as?.subOption||as?.sub_option||void 0,glazingType:as?.glazingType||as?.glazing_type||void 0,productLabel:as?.productLabel||void 0}}).filter(_=>_!==null)},Je=()=>Ne().reduce((N,x)=>N+x.quantity*x.rate,0),Qe=ge(),pt=N=>(N?.name||N?.title||N?.label||N?.productName||N?.product||"").toString(),Te=N=>(N?.category||N?.type||N?.group||N?.section||"").toString(),_e=N=>Dd(N)==="civilwall",de=N=>{const x=Hr(N);return x.includes("FLUSH")?"flush":x.includes("WPC")?"wpc":x.includes("STILE")||x.includes("ALUMIN")?"stile":x.includes("GLASS PANEL")?"glasspanel":x.includes("GLASS")?"glassdoor":x.includes("WOOD")||x.includes("TEAK")?"wooden":null},dt=(n||[]).filter(_e).slice().sort((N,x)=>{const I=pt(N),F=pt(x);return I.localeCompare(F)}),st=N=>{const x=pt(N);d(N.id||x),o(x);const I=de(x);w(I||b),L(null),k(null),J(null),se([]),at({}),Pt({}),Rs({}),c(6)},[nt,at]=S.useState({}),[Dt,yt]=S.useState([]),[qe,Tt]=S.useState({}),[ns,Ts]=S.useState("Concept Trunk Interiors"),[vs,Ns]=S.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[et,De]=S.useState("33ASOPS5560M1Z1"),[rt,mt]=S.useState(""),[ls,Ht]=S.useState(new Date().toISOString().slice(0,10)),[Kt,lt]=S.useState(""),[Gt,Yt]=S.useState("50% Advance and 50% on Completion"),[Cs,rs]=S.useState(""),[Is,on]=S.useState(""),[ws,St]=S.useState(""),[qt,Pt]=S.useState({}),[gs,Rs]=S.useState({}),[Nn,ys]=S.useState({}),[Ln,Zs]=S.useState({}),[En,Ls]=S.useState({}),[Bs,Ms]=S.useState({}),[Os,ot]=S.useState([]),[Rt,Mt]=S.useState([]),[kt,fs]=S.useState(""),[ms,Ds]=S.useState([]),[js,Lt]=S.useState([]),[Hs,Wr]=S.useState([]),[sr,ds]=S.useState(!1);S.useEffect(()=>{(async()=>{if(rt)try{const x=await ct(`/api/estimator-step9-items?session_id=${rt}&estimator=civilwall`,{headers:{}});if(x.ok){const _=await x.json();Ds(_.items||[])}const I=await ct(`/api/estimator-step11-groups?session_id=${rt}&estimator=civilwall`,{headers:{}});if(I.ok){const _=await I.json();Lt(_.items||[])}const F=await ct(`/api/estimator-step12-qa-selection?session_id=${rt}&estimator=civilwall`,{headers:{}});if(F.ok){const _=await F.json();Wr(_.items||[])}}catch(x){console.warn("Failed to load data from DB:",x)}})()},[rt]),S.useEffect(()=>{if(i===7){const N=Ne(),x={};N.forEach(I=>{x[I.id]={quantity:I.quantity||0,supplyRate:I.rate||0,installRate:0}}),at(x)}},[i,oe]),S.useEffect(()=>{if(i===9){const N=Ne(Dt,qe);if(N.length>0){const x=N[0].shopId,I=t.find(F=>F.id===x);if(I){const F=[I.name||"",I.address||"",I.area||"",I.city||"",I.state||"",I.pincode||"",I.gstNo?`GSTIN: ${I.gstNo}`:"",I.phone||""].filter(Boolean);St(F.join(`
`))}}}},[i,Dt,qe,oe,t]),S.useEffect(()=>{if(i===9){yn();const N=[],x={},I={},F={};if(rn&&rn.length>0)for(const _ of rn){const U=_.rowId||`${_.batchId||""}-${_.id}`;N.findIndex(K=>K.materialId===_.id&&K.rowId===U&&(K.batchId||"")===(_.batchId||""))===-1&&(N.push({materialId:_.id,selectedShopId:_.shopId||"",selectedBrand:_.brand||void 0,batchId:_.batchId,rowId:U}),x[U]={quantity:Number(_.quantity||0),supplyRate:Number(_.supplyRate??_.rate??0),installRate:Number(_.installRate||0)},_.description&&(I[U]=_.description),_.location&&(F[U]=_.location))}if(ms&&ms.length>0)for(const _ of ms){if(!s.find(tt=>tt.id===_.material_id))continue;const P=_.material_id,K=_.row_id||(_.batch_id?`${_.batch_id}-${P}`:P),ae=_.shop_id||"",Fe=_.brand||void 0;N.findIndex(tt=>tt.materialId===P&&(tt.batchId||"")===(_.batch_id||"")&&(tt.rowId||"")===K)===-1&&(N.push({materialId:P,selectedShopId:ae,selectedBrand:Fe,batchId:_.batch_id||(_.row_id?K.replace(`-${P}`,""):void 0)}),x[K]={quantity:Number(_.quantity||0),supplyRate:Number(_.supply_rate||_.rate||0),installRate:Number(_.install_rate||0)},_.description&&(I[K]=_.description),_.location&&(F[K]=_.location))}oe&&oe.length>0&&oe.forEach(_=>{if(N.findIndex(P=>P.materialId===_.materialId&&P.batchId===_.batchId)===-1){N.push(_);const P=s.find(K=>K.id===_.materialId);if(P){const K=_.batchId?`${_.batchId}-${_.materialId}`:_.materialId;x[K]={quantity:nt[_.materialId]?.quantity??P.quantity??1,supplyRate:nt[_.materialId]?.supplyRate??P.rate??0,installRate:nt[_.materialId]?.installRate??0}}}}),N.length>0&&yt(N),Object.keys(x).length>0&&Tt(x),Object.keys(I).length>0&&Pt(_=>({..._,...I})),Object.keys(F).length>0&&Rs(_=>({..._,...F}))}},[i,oe,ms]),S.useEffect(()=>{i===11&&(async()=>{if(rt)try{const x=await ct(`/api/estimator-step11-groups?session_id=${rt}&estimator=civilwall`,{headers:{}});if(x.ok){const F=(await x.json()).items||[],_={},U={},P={},K={};F.forEach(ae=>{const Fe=s.find(Ye=>Ye.name===ae.item);Fe&&(_[Fe.id]=Number(ae.supply_rate||0),U[Fe.id]=Number(ae.install_rate||0),P[Fe.id]=Number(ae.qty||0),K[Fe.id]=ae.unit||"")}),Ms(ae=>({...ae,..._})),Ls(ae=>({...ae,...U})),ys(ae=>({...ae,...P})),Zs(ae=>({...ae,...K}))}}catch(x){console.warn("Failed to load step 11 data:",x)}})()},[i,rt,js]);const mn=S.useRef(null);S.useEffect(()=>{yn().catch(()=>{})},[]),S.useEffect(()=>{(async()=>{if(rt)try{const x=await ct(`/api/estimator-step9-items?session_id=${rt}&estimator=civilwall`,{headers:{}});if(x.ok){const I=await x.json(),F=I.items.map(_=>({id:_.material_id,rowId:_.row_id,batchId:_.batch_id,name:_.name,unit:_.unit,quantity:_.quantity,supplyRate:_.supply_rate,installRate:_.install_rate,shopId:_.shop_id,shopName:_.shop_name,description:_.description,location:_.location,doorType:_.door_type,panelType:_.panel_type,subOption:_.sub_option,glazingType:_.glazing_type}));if(Ps(F),I.items.length>0){const _=I.items[0];is({doorType:_.door_type,panelType:_.panel_type,subOption:_.sub_option,glazingType:_.glazing_type,count:_.qty,height:_.height,width:_.width,glassHeight:_.glass_height,glassWidth:_.glass_width,subtotal:_.subtotal,sgst:_.sgst,cgst:_.cgst,round_off:_.round_off,grand_total:_.grand_total})}}}catch(x){console.warn("Failed to load step 9 from DB",x)}})()},[rt]),S.useEffect(()=>(mn.current&&clearTimeout(mn.current),mn.current=setTimeout(async()=>{new Date().toISOString();try{if(!rt)return;const N=Ne().map((x,I)=>{const F=x.rowId||(x.batchId?`${x.batchId}-${x.id}`:x.id);return{estimator:"civilwall",session_id:rt,s_no:I+1,row_id:String(F),batch_id:x.batchId||null,material_id:x.id,name:x.name,unit:x.unit,quantity:Number(nt[x.id]?.quantity??x.quantity??0),supply_rate:Number(nt[x.id]?.supplyRate??x.rate??0),install_rate:Number(nt[x.id]?.installRate??0),shop_id:x.shopId||"",shop_name:x.shopName||"",description:qt[x.id]||"",location:gs[x.id]||"",door_type:b,panel_type:p,sub_option:B,glazing_type:z,qty:$,height:X,width:ee,glass_height:ue,glass_width:re}});await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"civilwall",session_id:rt,items:N})})}catch{}},800),()=>{mn.current&&clearTimeout(mn.current)}),[oe,nt,qt,gs,b,p,B,z,$,X,ee,ue,re,rt]);const cr=N=>{const x=Qe.find(ae=>ae.id===N);if(!x)return;if(oe.find(ae=>ae.materialId===N)){se(ae=>ae.filter(Fe=>Fe.materialId!==N));return}const F=s.filter(ae=>Hr(ae.product)===Hr(x.product)&&Hr(ae.name)===Hr(x.name)).map(ae=>({brand:Pp(ae),shopId:ae.shopId,rate:ae.rate||0})),U=Array.from(new Set(F.map(ae=>ae.brand))).sort()[0]||"Generic",K=F.filter(ae=>ae.brand===U).sort((ae,Fe)=>ae.rate-Fe.rate)[0];K?.shopId&&se(ae=>[...ae,{materialId:N,selectedShopId:K.shopId,selectedBrand:U}])},nr=(N,x)=>{se(I=>I.map(F=>F.materialId===N?{...F,selectedShopId:x}:F))},sn=(N,x)=>{const I=Qe.find(U=>U.id===N);if(!I)return;const _=s.filter(U=>Hr(U.product)===Hr(I.product)&&Hr(U.name)===Hr(I.name)).map(U=>({brand:Pp(U),shopId:U.shopId,rate:U.rate||0})).filter(U=>U.brand===x).sort((U,P)=>U.rate-P.rate)[0]?.shopId||"";se(U=>U.map(P=>P.materialId===N?{...P,selectedBrand:x,selectedShopId:_||P.selectedShopId}:P))},[gn,qn]=S.useState([]),Yr=()=>{const N=(i===9?Ne(Dt,qe):Ne()).map(x=>x.rowId||x.id);qn(x=>x.length===N.length?[]:N)},Gr=async()=>{if(gn.length!==0){try{const N=[],x=[];for(const I of gn){const F=rn?.find(_=>`${_.batchId||""}-${_.id}`===I);if(F&&F.id){const _=ms.find(U=>U.id===F.id);_&&N.push(_)}else{const _=Dt.find(U=>`${U.batchId||""}-${U.materialId}`===I);_&&x.push(_)}}if(N.length>0&&rt&&(await ct("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:rt,estimator:"civilwall",items:N})}),Ps(I=>I?I.filter(F=>!N.some(_=>_.id===F.id)):null)),x.length>0&&yt(I=>I.filter(F=>!x.some(_=>`${_.batchId||""}-${_.materialId}`==`${F.batchId||""}-${F.materialId}`))),yt(I=>I.filter(F=>!gn.includes(`${F.batchId||""}-${F.materialId}`))),Tt(I=>{const F={...I};return gn.forEach(_=>delete F[_]),F}),rt){const F=await(await ct(`/api/estimator-step9-items?session_id=${rt}&estimator=civilwall`,{headers:{}})).json();Ds(F.items||[])}r({title:"Success",description:`${gn.length} item(s) deleted successfully!`})}catch(N){console.warn("Failed to delete items",N),r({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}qn([])}},[ra,gr]=S.useState([]),Ks=S.useRef(""),[en,Es]=S.useState(null),[rn,Ps]=S.useState(null),[wr,Ze]=S.useState({}),[us,is]=S.useState(null),yn=async()=>{try{const N=await ct("/api/boq");if(N.status===401){gr([]),Ks.current!=="401"&&(Ks.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!N.ok){const F=await N.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${F||N.status}`)}if(!(N.headers.get("content-type")||"").includes("application/json")){const F=await N.text().catch(()=>"");console.warn("/api/boq returned non-json:",F),gr([]);return}const I=await N.json();gr(I.boqs||[]),Ks.current=""}catch(N){console.error("fetchSavedBoqs",N);const x=String(N?.message||N||"");if(!x)return;Ks.current!==x&&(Ks.current=x,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},Jn=async()=>{try{if(!rt)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const N={estimator:"civilwall",billNo:rt,doorType:b,panelType:p,subOption:B,glazingType:z,qty:$,height:X,width:ee,glassHeight:ue,glassWidth:re,materials:rn&&rn.length>0?rn:Ne(),subtotal:vt,sgst:ut,cgst:Pe,roundOff:Bt,grandTotal:_t},x=await ct("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!x.ok){const _=await x.text().catch(()=>"");throw new Error(_||"save failed")}const I=x.headers.get("content-type")||"";let F=null;if(I.includes("application/json"))F=await x.json();else{const _=await x.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",_),F={boq:null}}return await yn(),Es(F?.boq||F?.boqs?.[0]||null),!0}catch(N){return console.error("handleSaveBOQ",N),!1}},zn=async N=>{try{if(!(await ct(`/api/boq/${N}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await yn()}catch(x){console.error("handleDeleteSavedBoq",x)}},ua=()=>{c(1),w(null),j(null),L(null),k(null),q(1),fe(7),le(3),te(0),ne(0),ot([]),ys({}),Pt({}),Rs({}),Zs({}),Ms({}),Ls({}),Ze({}),Es(null)},ga=async()=>{ds(!0);try{let N=js||[];if(rt)try{const U=await ct(`/api/estimator-step11-groups?session_id=${rt}&estimator=civilwall`);U.ok&&(N=(await U.json()).items||[],Lt(N))}catch(U){console.warn("Failed to refresh step11 items before save",U)}const x=Qs.map(U=>({estimator:"civilwall",session_id:rt,group_key:(U.groupKey||`${U.doorType||"door"}||${U.panelType||""}||${U.subOption||""}`)+"::"+(U.name||""),group_id:U.groupId||`group_${U.groupKey||""}`,item_name:U.name,unit:U.unit,quantity:U.quantity,location:U.location||"",description:U.description||"",supply_rate:Bs[U.id]||U.supplyRate||0,install_rate:En[U.id]||U.installRate||0,supply_amount:(U.quantity||0)*(Bs[U.id]||U.supplyRate||0),install_amount:(U.quantity||0)*(En[U.id]||U.installRate||0),supply_subtotal:Qs.reduce((P,K)=>P+(K.quantity||0)*(Bs[K.id]||K.supplyRate||0),0),install_subtotal:Qs.reduce((P,K)=>P+(K.quantity||0)*(En[K.id]||K.installRate||0),0),sgst:ut,cgst:Pe,round_off:Bt,grand_total:Qs.reduce((P,K)=>P+(K.quantity||0)*((Bs[K.id]||K.supplyRate||0)+(En[K.id]||K.installRate||0)),0)+ut+Pe+Bt})),I=new Set((N||[]).map(U=>U.group_key||U.groupKey)),F=x.filter(U=>!I.has(U.group_key));if(F.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),ds(!1),!0;const _=await ct("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:F})});if(!_.ok){const U=await _.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${U||_.statusText}`,variant:"destructive"}),ds(!1),!1}try{const U=await ct(`/api/estimator-step11-groups?session_id=${rt}&estimator=civilwall`);if(U.ok){const P=await U.json();Lt(P.items||[])}}catch(U){console.warn("Failed to reload step11 items after save",U)}return Me([]),r({title:"Success",description:"Step 11 saved to database."}),ds(!1),!0}catch(N){return console.error("handleSaveAccumulatedBOQ",N),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),ds(!1),!1}},ha=N=>{if(mt(N.bill_no||""),w(N.door_type||null),j(N.panel_type||null),L(N.sub_option||null),J(N.glazing_type||null),q(N.qty||1),fe(N.height||7),le(N.width||3),te(N.glass_height||6),ne(N.glass_width||2),Array.isArray(N.materials)){const x=N.materials.map(I=>({materialId:I.id,selectedShopId:I.shopId||I.shop_id||I.shopId||"",selectedBrand:I.shopName||I.brand||I.selectedBrand||void 0}));se(x.filter(Boolean))}Es(N)},Tr=(N,x)=>{if(i===9){Tt(I=>({...I,[N]:{...I[N]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(x))}}));return}at(I=>({...I,[N]:{...I[N]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(x))}}))},$a=(N,x)=>{if(i===9){Tt(I=>({...I,[N]:{...I[N]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(x)),installRate:I[N]?.installRate||0}}));return}at(I=>({...I,[N]:{...I[N]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(x)),installRate:I[N]?.installRate||0}}))},ya=(N,x)=>{if(i===9){Tt(I=>({...I,[N]:{...I[N]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(x)),supplyRate:I[N]?.supplyRate||0}}));return}at(I=>({...I,[N]:{...I[N]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(x)),supplyRate:I[N]?.supplyRate||0}}))},rr=()=>{const N=document.getElementById("boq-pdf");if(!N){alert("BOQ content not found");return}setTimeout(()=>{Qd().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:x=>x.className?.toString().includes("bg-")||x.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(N).save().catch(x=>{console.error("PDF Export Error:",x),alert("PDF export failed. Check console.")})},100)},oa=async()=>{const N=document.getElementById("boq-final-pdf");if(!N){alert("Final BOQ content not found");return}const x=(await Yc(async()=>{const{default:I}=await Promise.resolve().then(()=>bu);return{default:I}},void 0)).default;x().set({margin:10,filename:`BOQ-${rt||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(N).save()},Ga=()=>{const N=Ne(),x=Z(),I=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${p==="panel"?"With Panel":"Without Panel"} - ${x?.label}`,`Dimensions: ${X}ft  ${ee}ft (Count: ${$})`,...z?[`Glazing: ${z}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];N.forEach((K,ae)=>{const Fe=K.quantity*K.rate;I.push(`${ae+1},"${K.name}","${K.unit}",${K.quantity},${K.rate},"${K.shopName}",${Fe}`)}),I.push("",`TOTAL COST,,,${Je().toFixed(2)}`);const F=I.join(`
`),_=new Blob([F],{type:"text/csv"}),U=window.URL.createObjectURL(_),P=document.createElement("a");P.href=U,P.download=`BOQ-Doors-${new Date().getTime()}.csv`,P.click(),URL.revokeObjectURL(U)},fi=()=>{const N=Qs||[],x=[];x.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),N.forEach((P,K)=>{const ae=Number(P.supplyRate??P.rate??0),Fe=Number(P.installRate??0),Ye=Number(P.quantity||0),tt=Ye*ae,Ft=Ye*Fe,Zt=(P.location||gs[P.id]||"").toString().replace(/"/g,'""'),as=(P.description||qt[P.id]||P.name||"").toString().replace(/"/g,'""'),Rn=(me({doorType:P.doorType||P.door_type,panelType:P.panelType||P.panel_type,subOption:P.subOption||P.sub_option,glazingType:P.glazingType||P.glazing_type})||P.name||"").replace(/"/g,'""');x.push(`${K+1},"${Rn}","${Zt}","${as}",${P.unit},${Ye},${ae.toFixed(2)},${Fe.toFixed(2)},${tt.toFixed(2)},${Ft.toFixed(2)}`)});const I=x.join(`
`),F=new Blob([I],{type:"text/csv"}),_=window.URL.createObjectURL(F),U=document.createElement("a");U.href=_,U.download=`BOQ-Doors-Step11-${new Date().getTime()}.csv`,U.click(),URL.revokeObjectURL(_)},xa=async()=>{const N=Ne(Dt,qe).map(P=>{const K=P.rowId||`${P.batchId}-${P.id}`;return{id:P.id,rowId:K,batchId:P.batchId||null,name:P.name,productLabel:P.productLabel||null,product_label:P.productLabel||null,unit:P.unit,quantity:qe[K]?.quantity??qe[P.id]?.quantity??P.quantity,supplyRate:qe[K]?.supplyRate??qe[P.id]?.supplyRate??P.rate,installRate:qe[K]?.installRate??qe[P.id]?.installRate??P.installRate??0,shopId:P.shopId,shopName:P.shopName,description:qt[K]||qt[P.id]||"",location:gs[K]||gs[P.id]||"",doorType:P.doorType,panelType:P.panelType,subOption:P.subOption,glazingType:P.glazingType,isSaved:P.isSaved||!1}}),x=N.filter(P=>!P.isSaved);if(x.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let I=rt;(!I||I.trim()==="")&&(I=`DOOR-${Date.now()}`,mt(I));const F=us||(()=>{const P=N.reduce((tt,Ft)=>tt+Number(Ft.quantity||0)*(Number(Ft.supplyRate||0)+Number(Ft.installRate||0)),0),K=P*.09,ae=P*.09,Fe=Math.round(P+K+ae)-(P+K+ae),Ye=P+K+ae+Fe;return{subtotal:P,sgst:K,cgst:ae,round_off:Fe,grand_total:Ye}})(),_={id:`local-${Date.now()}`,estimator:"civilwall",bill_no:I,door_type:us?.doorType||us?.door_type||b,panel_type:us?.panelType||us?.panel_type||p,sub_option:us?.subOption||us?.sub_option||B,glazing_type:us?.glazingType||us?.glazing_type||z,qty:us?.count||us?.qty||$,height:us?.height||X,width:us?.width||ee,glass_height:us?.glassHeight||us?.glass_height||ue,glass_width:us?.glassWidth||us?.glass_width||re,materials:N,subtotal:F.subtotal,sgst:F.sgst,cgst:F.cgst,round_off:F.round_off,grand_total:F.grand_total,created_at:new Date().toISOString()};Es(_),Ps(N);try{is(P=>({...P||{},...F}))}catch{}const U=x.map((P,K)=>({estimator:"civilwall",session_id:I,s_no:K+1,row_id:String(P.rowId||`${P.batchId||""}-${P.id}`),batch_id:P.batchId||null,material_id:P.id,name:P.name,unit:P.unit,quantity:Number(P.quantity||0),supply_rate:Number(P.supplyRate||0),install_rate:Number(P.installRate||0),shop_id:P.shopId||"",shop_name:P.shopName||"",description:P.description||"",location:P.location||"",door_type:P.doorType||us?.doorType||us?.door_type||b||null,panel_type:P.panelType||us?.panelType||us?.panel_type||p||null,sub_option:P.subOption||us?.subOption||us?.sub_option||B||null,glazing_type:P.glazingType||us?.glazingType||us?.glazing_type||z||null,qty:us?.count||us?.qty||$,height:us?.height||X,width:us?.width||ee,glass_height:us?.glassHeight||us?.glass_height||ue,glass_width:us?.glassWidth||us?.glass_width||re,subtotal:F.subtotal,sgst:F.sgst,cgst:F.cgst,round_off:F.round_off,grand_total:F.grand_total}));try{await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"civilwall",session_id:I,items:U})});const K=await(await ct(`/api/estimator-step9-items?session_id=${I}&estimator=civilwall`,{headers:{}})).json();Ds(K.items||[]);const ae=(rn||[]).map(Fe=>x.some(tt=>Fe.rowId===tt.rowId||`${Fe.batchId||""}-${Fe.id}`==`${tt.batchId||""}-${tt.id}`)?{...Fe,isSaved:!0}:Fe);Ps(ae),r({title:"Success",description:`${x.length} new material(s) saved successfully to database!`})}catch(P){console.warn("Failed to save step 9 to DB",P),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},ie=N=>{let x=5381;for(let I=0;I<N.length;I+=1)x=(x<<5)+x^N.charCodeAt(I);return Math.abs(x>>>0).toString(36)},G=()=>{const N=JSON.stringify({doorType:b,panelType:p,subOption:B,glazingType:z,count:$,height:X,width:ee,glassHeight:ue,glassWidth:re,selectedMaterials:(oe||[]).map(x=>({materialId:x.materialId,selectedShopId:x.selectedShopId,selectedBrand:x.selectedBrand})),editable:Object.keys(nt||{}).sort().map(x=>({id:x,...nt[x]}))});return`batch-${ie(N)}`},ve=()=>{const N=G(),x=Ne(oe,nt).map(P=>({id:P.id,rowId:`${N}-${P.id}`,batchId:N,name:P.name,unit:P.unit,quantity:nt[P.id]?.quantity??P.quantity,supplyRate:nt[P.id]?.supplyRate??P.rate,installRate:nt[P.id]?.installRate??0,shopId:P.shopId,shopName:P.shopName,description:qt[P.id]||"",location:gs[P.id]||"",doorType:b,productLabel:h||me(),panelType:p,subOption:B,glazingType:z,isSaved:!1}));if(x.length===0){c(9);return}const _=[...(rn||[]||[]).filter(P=>P.batchId!==N),...x];Ps(_),yt((oe||[]).map(P=>({materialId:P.materialId,selectedShopId:P.selectedShopId,selectedBrand:P.selectedBrand,batchId:N})));const U={};_.forEach(P=>{const K=P.rowId||`${P.batchId}-${P.id}`;U[K]={quantity:Number(P.quantity||0),supplyRate:Number(P.supplyRate||P.rate||0),installRate:Number(P.installRate||0)}}),Tt(U);try{const P=Je(),K=P*.09,ae=P*.09,Fe=Math.round(P+K+ae)-(P+K+ae),Ye=P+K+ae+Fe;is({doorType:b,panelType:p,subOption:B,glazingType:z,count:$,height:X,width:ee,glassHeight:ue,glassWidth:re,subtotal:P,sgst:K,cgst:ae,round_off:Fe,grand_total:Ye})}catch{}c(9)},Le=i===9||i===11?rn||[]:Ne(),Xe=i===9?qe:nt,vt=Le.reduce((N,x)=>N+x.quantity*((Xe[x.id]?.supplyRate??x.rate)+(Xe[x.id]?.installRate??x.installRate??0)),0),ut=vt*.09,Pe=vt*.09,Bt=Math.round(vt+ut+Pe)-(vt+ut+Pe),_t=vt+ut+Pe+Bt,xn=xe.length>0?xe.flatMap(N=>N.materials||[]):rn&&rn.length>0?rn:Le&&Le.length>0?Le:en&&en.materials&&en.materials.length>0?Array.isArray(en.materials)?en.materials:JSON.parse(en.materials||"[]"):Le,Dn=(()=>{const N=new Map;for(const I of xn||[]){const F=I.productLabel||I.doorType||I.door_type||us?.doorType||us?.door_type||b||"door",_=I.panelType||I.panel_type||us?.panelType||us?.panel_type||p||"",U=I.subOption||I.sub_option||us?.subOption||us?.sub_option||"",P=`${F}||${_}||${U}`;N.has(P)||N.set(P,[]),N.get(P).push(I)}const x=[];for(const[I,F]of N.entries()){const[_,U,P]=I.split("||"),K=`group_${I}`,ae=qt[K]||"",Fe=gs[K]||"";let Ye=Number(wr[K]??us?.count??us?.qty??$??1);const tt=String(ae).match(/Qty:\s*(\d+(?:\.\d+)?)/);tt&&(wr[K]===void 0||wr[K]===null)&&(Ye=Number(tt[1]));const Ft=F.reduce((V,ye)=>V+Number(ye.quantity||0)*Number(ye.supplyRate??ye.rate??0),0),Zt=Ye>0?Ft/Ye:Ft,as=F.reduce((V,ye)=>V+Number(ye.quantity||0)*Number(ye.installRate??0),0),xs=Ye>0?as/Ye:as,Gs=F[0]&&F[0].productLabel||me({doorType:_,panelType:U,subOption:P})||_,Rn=String(ae).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();x.push({id:K,groupKey:I,name:Gs,location:Fe||"",description:Rn||"",unit:"pcs",quantity:Ye,supplyRate:Number(Zt||0),installRate:Number(En[K]??xs??0),supplyAmount:Number(Zt*Ye||0),installAmount:Number((En[K]??xs)*Ye||0)})}return x})();(js||[]).filter(N=>N.item||N.item_name).map((N,x)=>{const I=N.group_key||N.groupKey||`${N.door_type||N.doorType||"door"}||${N.panel_type||N.panelType||""}||${N.sub_option||N.subOption||""}`;return{id:N.id,groupKey:I,name:N.productLabel||N.item_name||N.item||N.name||N.door_label||N.doorType||N.door_type||"Door",location:N.location||"",description:N.description||"",unit:N.unit||"pcs",quantity:Number(N.quantity??N.qty??1),supplyRate:Number(N.supply_rate??N.supplyRate??0),installRate:Number(N.install_rate??N.installRate??0),supplyAmount:Number(N.supply_amount??0),installAmount:Number(N.install_amount??0),doorType:N.door_type||N.doorType,panelType:N.panel_type||N.panelType,subOption:N.sub_option||N.subOption}});const Qs=(xe.length===0?Dn.filter(N=>!(js||[]).some(I=>(I.group_key||I.groupKey||`${I.door_type||""}||${I.panel_type||""}||${I.sub_option||""}`)===N.groupKey)):xe.map((N,x)=>({id:`accumulated_${x}`,groupKey:`${N.doorType||"door"}||${N.panelType||""}||${N.subOption||""}`,name:N.productLabel||N.materials?.[0]?.productLabel||N.doorLabel||me({doorType:N.doorType,panelType:N.panelType,subOption:N.subOption})||N.doorType,location:N.location||"",description:N.description||"",unit:"pcs",quantity:N.count||1,supplyRate:N.materials?.reduce((I,F)=>I+Number(F.quantity||0)*Number(F.supplyRate??F.rate??0),0)||0,installRate:N.materials?.reduce((I,F)=>I+Number(F.quantity||0)*Number(F.installRate??0),0)||0,supplyAmount:N.materials?.reduce((I,F)=>I+Number(F.quantity||0)*Number(F.supplyRate??F.rate??0),0)||0,installAmount:N.materials?.reduce((I,F)=>I+Number(F.quantity||0)*Number(F.installRate??0),0)||0})))||[],Qn=Qs.filter(N=>Rt.includes(N.id)),kn=Qs.reduce((N,x)=>{const I=Number(Nn[x.id]??(x.quantity||0)),F=Number(Bs[x.id]??x.supplyRate??x.rate??0);return N+I*F},0);Qs.reduce((N,x)=>{const I=Number(Nn[x.id]??(x.quantity||0));return N+I*Number(x.installRate||0)},0);const Wn=Qn.reduce((N,x)=>{const I=Number(Nn[x.id]??(x.quantity||0)),F=Number(Bs[x.id]??x.supplyRate??x.rate??0);return N+I*F},0);en&&en.bill_no;const Xr=en&&en.created_at?new Date(en.created_at).toISOString().slice(0,10):ls,v=N=>{if(!N)return!1;const x=(N.name||"").toString().trim(),I=Number(N.quantity||0),F=Number(N.supplyRate??N.rate??0),_=Number(N.installRate??0),U=(N.description||"").toString().trim(),P=(N.location||"").toString().trim();return!!x||I>0||F>0||_>0||!!U||!!P};return(xe||[]).map(N=>{const x=(N.materials||[]).filter(v),I=x.reduce((_,U)=>_+Number(U.quantity||0)*Number(U.supplyRate??U.rate??0),0),F=x.reduce((_,U)=>_+Number(U.quantity||0)*Number(U.installRate??0),0);return{...N,materials:x,supplySubtotal:I,installSubtotal:F,subtotal:I+F}}).filter(N=>(N.materials||[]).length>0),e.jsx(ka,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Civil Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(ks,{className:"border-border/50",children:e.jsx(Ws,{className:"pt-8 min-h-96",children:e.jsxs(Fl,{mode:"wait",children:[i===1&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Civil Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:dt.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No products found under Electrical sub-category in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Door."})]}):e.jsx("div",{className:"grid gap-3",children:dt.map(N=>{const x=pt(N),I=(N?.id||x).toString(),F=u===I;return e.jsx(Be,{variant:F?"default":"outline",onClick:()=>st(N),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:x||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Te(N)})]})},I)})})})]},"step-select-product"),i===11&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Dv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Xr})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all-groups",checked:(()=>{const N=(Qs||[]).map(x=>x.id);return N.length>0&&N.every(x=>Os.includes(x))})(),onCheckedChange:N=>{ot(N?(Qs||[]).map(x=>x.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Qs||[]).map((N,x)=>{const I=Number(Bs[N.id]??N.supplyRate??N.rate??0),F=Number(En[N.id]??N.installRate??0);let _=Number(Nn[N.id]??(N.quantity||0));const U=_*I,P=_*F;return gs[N.id]??N.location,qt[N.id]??N.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{checked:Os.includes(N.id),onCheckedChange:()=>{ot(K=>K.includes(N.id)?K.filter(ae=>ae!==N.id):[...K,N.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:x+1}),e.jsx("td",{className:"border px-2 py-1",children:N.productLabel||N.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx($e,{value:gs[N.id]??N.location??"",onChange:K=>Rs(ae=>({...ae,[N.id]:K.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:qt[N.id]??N.description??"",onChange:K=>Pt(ae=>({...ae,[N.id]:K.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{value:Ln[N.id]??N.unit??"",onChange:K=>Zs(ae=>({...ae,[N.id]:K.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",value:_,onChange:K=>ys(ae=>({...ae,[N.id]:Number(K.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:I,onChange:K=>Ms(ae=>({...ae,[N.id]:Number(K.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:F,onChange:K=>Ls(ae=>({...ae,[N.id]:Number(K.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",U.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",P.toFixed(2)]})]},N.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(kn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!A&&e.jsx(Be,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Be,{variant:"destructive",disabled:Os.length===0,onClick:async()=>{if(console.log("Delete selected:",Os),js.length>0&&rt)try{await ct("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Os,estimator:"civilwall"})});const N=await ct(`/api/estimator-step11-groups?session_id=${rt}&estimator=civilwall`,{headers:{}});if(N.ok){const x=await N.json();Lt(x.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(N){console.warn("Failed to delete step 11 from DB",N),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(xe.length===0)if(en){console.log("Deleting from saved BOQ");const N=Os.map(_=>_.replace("group_","")),x=Array.isArray(en.materials)?en.materials:JSON.parse(en.materials||"[]");console.log("Current materials:",x.length);const I=x.filter(_=>{const U=_.doorType||_.door_type||us?.doorType||us?.door_type||b||"door",P=_.panelType||_.panel_type||us?.panelType||us?.panel_type||p||"",K=_.subOption||_.sub_option||us?.subOption||us?.sub_option||B||"",ae=`${U}||${P}||${K}`,Fe=N.includes(ae);return console.log("Checking material:",_.id||_.name,ae,"match:",Fe),!Fe});console.log("Filtered materials:",I.length);const F={...en,materials:I};Es(F),ct("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)}).then(()=>console.log("Saved updated BOQ")).catch(_=>console.error("Error saving BOQ:",_))}else{console.log("Deleting from Step 11 saved materials");const N=Os.map(F=>F.replace("group_","")),I=((rn&&rn.length>0?rn:Le)||[]).filter(F=>{const _=F.doorType||F.door_type||us?.doorType||us?.door_type||b||"door",U=F.panelType||F.panel_type||us?.panelType||us?.panel_type||p||"",P=F.subOption||F.sub_option||us?.subOption||us?.sub_option||B||"",K=`${_}||${U}||${P}`;return!N.includes(K)});Ps(I)}else if(xe.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",xe.length);let N;if(Os.some(x=>x.startsWith("accumulated_"))){const x=Os.filter(I=>I.startsWith("accumulated_")).map(I=>parseInt(I.replace("accumulated_",""))).sort((I,F)=>F-I);N=[...xe],x.forEach(I=>{I>=0&&I<N.length&&N.splice(I,1)})}else{const x=Os.map(I=>I.replace("group_",""));N=xe.filter(I=>{const F=`${I.doorType||"door"}||${I.panelType||""}||${I.subOption||""}`,_=x.includes(F);return console.log("Checking product:",I.id,F,"match:",_),!_})}console.log("Accumulated products after:",N.length),Me(N),ct("/api/accumulated-products/doors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:N})}).catch(x=>console.error("Failed to save accumulated products after delete",x))}ot([])},children:"Delete Selected"}),e.jsx(Be,{onClick:ua,children:"Add Product"}),e.jsx(Be,{onClick:ga,disabled:sr,children:"Save"}),e.jsx(Be,{onClick:async()=>{Mt(Os);const N=(Qn||[]).map((x,I)=>{const F=Number(Bs[x.id]??x.supplyRate??x.rate??0),_=Number(En[x.id]??x.installRate??0);let U=Number(Nn[x.id]??(x.quantity||0));return{s_no:I+1,item:x.name,location:gs[x.id]??x.location??"",description:qt[x.id]??x.description??"",unit:Ln[x.id]??x.unit??"",qty:U,supply_rate:F,install_rate:_,supply_amount:U*F,install_amount:U*_}});try{const x=await ct(`/api/estimator-step12-qa-selection?session_id=${rt}&estimator=civilwall`,{headers:{}});let I=[];x.ok&&(I=(await x.json()).items||[]);const F=N.filter(P=>!I.some(K=>K.item===P.item&&K.description===P.description&&K.unit===P.unit));if(F.length===0){c(12);return}await ct("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"civilwall",session_id:rt,items:F})});const U=await(await ct(`/api/estimator-step12-qa-selection?session_id=${rt}&estimator=civilwall`,{headers:{}})).json();Wr(U.items||[]),r({title:"Success",description:`${F.length} new material(s) saved successfully to database!`}),c(12)}catch(x){console.warn("Failed to save step 12 to DB",x),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),i===4&&b&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(we[b]||[]).map(N=>e.jsx(Be,{onClick:()=>{L(N),k(null)},className:`w-full text-black ${B===N?"bg-cyan-500":"bg-white"}`,children:N},N))}),b==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:pe.map(N=>e.jsx(Be,{onClick:()=>k(N),className:`w-full text-black ${Q===N?"bg-cyan-500":"bg-white"}`,children:N},N))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(3),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{onClick:()=>c(5),disabled:!B||b==="flush"&&B==="With Vision Panel"&&!Q,children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),i===5&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"count",children:"Count"}),e.jsx($e,{id:"count",type:"number",placeholder:"1",value:$||"",onChange:N=>q(N.target.value?parseFloat(N.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"height",children:"Height"}),e.jsx($e,{id:"height",type:"number",placeholder:"7",value:X||"",onChange:N=>fe(N.target.value?parseFloat(N.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"width",children:"Width"}),e.jsx($e,{id:"width",type:"number",placeholder:"3",value:ee||"",onChange:N=>le(N.target.value?parseFloat(N.target.value):null)})]})]}),Z()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(Ve,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx($e,{id:"glassHeight",type:"number",placeholder:"72",value:ue||"",onChange:N=>te(N.target.value?parseFloat(N.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx($e,{id:"glassWidth",type:"number",placeholder:"24",value:re||"",onChange:N=>ne(N.target.value?parseFloat(N.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(Z()?.requiresGlazing?4:3),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{disabled:!$||!X||!ee||Z()?.requiresGlazing&&(!ue||!re),onClick:()=>c(6),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),i===6&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Z()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Fn,{id:"select-all-materials",checked:oe.length===Qe.length&&Qe.length>0,onCheckedChange:N=>{if(N){const x=Qe.map(I=>{const F=s.filter(K=>Hr(K.product)===Hr(I.product)&&Hr(K.name)===Hr(I.name)).map(K=>({id:K.id,brand:Pp(K),shopId:K.shopId,rate:K.rate,unit:K.unit,shopName:t.find(ae=>ae.id===K.shopId)?.name||"Unknown"})),U=Array.from(new Set(F.map(K=>K.brand))).sort()[0]||"Generic",P=F.filter(K=>K.brand===U).sort((K,ae)=>(K.rate||0)-(ae.rate||0));return{materialId:I.id,selectedBrand:U,selectedShopId:P[0]?.shopId||""}});se(x)}else se([])}}),e.jsx(Ve,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Qe.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",b||h||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(b?dR[b]||[b]:[h||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(N=>N.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Qe.map(N=>{const x=oe.some(ae=>ae.materialId===N.id),I=oe.find(ae=>ae.materialId===N.id),F=s.filter(ae=>Hr(ae.product)===Hr(N.product)&&Hr(ae.name)===Hr(N.name)).map(ae=>({id:ae.id,brand:Pp(ae),shopId:ae.shopId,rate:ae.rate,unit:ae.unit,shopName:t.find(Fe=>Fe.id===ae.shopId)?.name||"Unknown"})),_=Array.from(new Set(F.map(ae=>ae.brand))).sort(),P=oe.find(ae=>ae.materialId===N.id)?.selectedBrand||_[0]||"Generic",K=F.filter(ae=>ae.brand===P).sort((ae,Fe)=>(ae.rate||0)-(Fe.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fn,{id:N.id,checked:x,onCheckedChange:()=>cr(N.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:N.id,className:"font-medium cursor-pointer",children:N.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:N.code}),x&&_.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Ve,{className:"text-xs",children:"Select Brand:"}),e.jsxs(Bn,{value:P,onValueChange:ae=>sn(N.id,ae),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:_.map(ae=>e.jsx(dn,{value:ae,children:ae},ae))})]})]}),x&&K.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Ve,{className:"text-xs",children:"Select Shop:"}),e.jsxs(Bn,{value:I?.selectedShopId||K[0].shopId,onValueChange:ae=>nr(N.id,ae),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:K.map(ae=>e.jsxs(dn,{value:ae.shopId||"",children:[ae.shopName," - ",ae.rate,"/",N.unit,ae.rate===K[0].rate&&" (Best)"]},ae.shopId))})]})]})]})]})},N.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(1),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{disabled:oe.length===0,onClick:()=>c(7),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),i===7&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:Ne().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),Ne().map(N=>{const x=oe.find(F=>F.materialId===N.id),I=s.find(F=>F.id===N.id);return e.jsxs("div",{className:Vs("p-3 border rounded grid grid-cols-8 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:N.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:x?.selectedBrand||I?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx($e,{type:"number",value:nt[N.id]?.quantity??N.quantity,onChange:F=>Tr(N.id,parseInt(F.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:N.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:N.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx($e,{type:"number",value:nt[N.id]?.supplyRate??N.rate,onChange:F=>$a(N.id,parseFloat(F.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((nt[N.id]?.quantity??N.quantity)*((nt[N.id]?.supplyRate??N.rate)+(nt[N.id]?.installRate??0))).toFixed(2)]})]},N.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(6),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{onClick:()=>c(8),disabled:Ne().length===0,children:["Next: Generate BOM"," ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),i===8&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(Wo,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||me()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[X," ft  ",ee," ft (Qty: ",$,")"]})]}),z&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:z})]}),Z()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[ue,'"  ',re,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(N=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:N==="Qty"||N.includes("Rate")||N.includes("Amount")?"right":"left"},children:N},N))})}),e.jsx("tbody",{children:Ne().map((N,x)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:x+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:N.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:N.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:N.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:N.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:N.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(N.quantity*N.rate).toFixed(2)})]},N.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:oe.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:Ne().reduce((N,x)=>N+x.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",Je().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Be,{onClick:()=>c(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:Ga,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(hi,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:rr,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Be,{onClick:()=>ve(),disabled:Ne().length===0,children:["Add to BOM ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{c(1),d(""),o(""),j(null),w(null),J(null),q(1),fe(7),le(3),te(6),ne(2),se([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(er,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),i===12&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Dv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Xr})})]}),!Qn||Qn.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Qn||[]).map((N,x)=>{const I=Number(Bs[N.id]??N.supplyRate??N.rate??0),F=Number(En[N.id]??N.installRate??0);let _=Number(Nn[N.id]??(N.quantity||0));const U=_*I,P=_*F,K=gs[N.id]??N.location??"",ae=qt[N.id]??N.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:x+1}),e.jsx("td",{className:"border px-2 py-1",children:N.productLabel||N.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:K||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:ae||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Ln[N.id]??N.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:_}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",I.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",F.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",U.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",P.toFixed(2)]})]},N.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Wn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Be,{onClick:async()=>{if(Hs.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const N=await ct(`/api/estimator-step12-qa-selection?session_id=${rt}&estimator=civilwall`,{headers:{}});let x=[];N.ok&&(x=(await N.json()).items||[]);const F=(Qn||[]).map((P,K)=>{const ae=Number(Bs[P.id]??P.supplyRate??P.rate??0),Fe=Number(En[P.id]??P.installRate??0),Ye=Number(Nn[P.id]??(P.quantity||0));return{s_no:K+1,item:P.name,location:gs[P.id]??P.location??"",description:qt[P.id]??P.description??"",unit:Ln[P.id]??P.unit??"",qty:Ye,supply_rate:ae,install_rate:Fe,supply_amount:Ye*ae,install_amount:Ye*Fe}}).filter(P=>!x.some(K=>K.item===P.item&&K.description===P.description&&K.unit===P.unit));if(F.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await ct("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"civilwall",session_id:rt,items:F})});const U=await(await ct(`/api/estimator-step12-qa-selection?session_id=${rt}&estimator=civilwall`,{headers:{}})).json();Wr(U.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(N){console.warn("Failed to save step 12 to DB",N),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Be,{onClick:()=>c(1),children:"Add More Products"}),e.jsx(Be,{onClick:fi,children:"Export Excel"})]})]},"step-qa-boq"),i===10&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill No"}),e.jsx($e,{value:rt,onChange:N=>mt(N.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill Date"}),e.jsx($e,{type:"date",value:ls,onChange:N=>Ht(N.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Due Date"}),e.jsx($e,{type:"date",value:Kt,onChange:N=>lt(N.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Name"}),e.jsx($e,{value:Cs,onChange:N=>rs(N.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Address"}),e.jsx($e,{value:Is,onChange:N=>on(N.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Terms & Conditions"}),e.jsx($e,{value:Gt,onChange:N=>Yt(N.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Ve,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:kt,onChange:N=>fs(N.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),Ne().map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))]}),kt&&e.jsx($e,{placeholder:"Enter description for selected material",value:qt[kt]||"",onChange:N=>Pt(x=>({...x,[kt]:N.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:Dv,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",rt]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:ws})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",ls]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",Kt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",Gt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",Cs]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(N=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:N},N))})}),e.jsx("tbody",{children:Le.map((N,x)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N.id&&qt[N.id]||N.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(N.quantity||0)*Number(N.rate||0)||0).toFixed(2)})]},N.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:vt.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:ut.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Pe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:Bt.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",_t.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",_t.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Be,{onClick:oa,children:"Export PDF"})]})]}),i===9&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{variant:"destructive",onClick:Gr,disabled:gn.length===0,children:"Delete Selected"}),e.jsx(Be,{type:"button",onClick:xa,disabled:Le.length===0,children:"Save"}),e.jsx(Be,{onClick:async()=>{const N=Ne(Dt,qe),x=gn.length>0?N.filter(U=>gn.includes(U.rowId||`${U.batchId}-${U.id}`)):N,I=x.map(U=>{const P=U.rowId||`${U.batchId||""}-${U.id}`;return{id:U.id,rowId:P,batchId:U.batchId,name:U.name,unit:U.unit,quantity:qe[P]?.quantity??qe[U.id]?.quantity??U.quantity,supplyRate:qe[P]?.supplyRate??qe[U.id]?.supplyRate??U.rate,installRate:qe[P]?.installRate??qe[U.id]?.installRate??U.installRate??0,shopId:U.shopId,shopName:U.shopName,description:qt[P]||qt[U.id]||"",location:gs[P]||gs[U.id]||"",doorType:U.doorType,panelType:U.panelType,subOption:U.subOption,glazingType:U.glazingType}});if(I.length===0)return;const F=x[0],_={id:`local-${Date.now()}`,estimator:"civilwall",bill_no:rt,door_type:F?.doorType||us?.doorType||us?.door_type||b,panel_type:F?.panelType||us?.panelType||us?.panel_type||p,sub_option:F?.subOption||us?.subOption||us?.sub_option||B,glazing_type:F?.glazingType||us?.glazingType||us?.glazing_type||z,qty:us?.count||us?.qty||$,height:us?.height||X,width:us?.width||ee,glass_height:us?.glassHeight||us?.glass_height||ue,glass_width:us?.glassWidth||us?.glass_width||re,materials:I,subtotal:I.reduce((U,P)=>U+Number(P.quantity||0)*(Number(P.supplyRate||0)+Number(P.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};Es(_);try{await Jn()}catch{}qn([]),c(11)},disabled:Le.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{className:"text-sm font-semibold",children:"Saved BOQs"}),ra.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:ra.map(N=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:N.bill_no||`${N.estimator} - ${N.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(N.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{onClick:()=>ha(N),size:"sm",children:"Load"}),e.jsx(Be,{variant:"destructive",onClick:()=>zn(N.id),size:"sm",children:"Delete"})]})]},N.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all",checked:(()=>{const N=(i===9?Ne(Dt,qe):Ne()).map(x=>x.rowId||x.id);return gn.length===N.length&&N.length>0})(),onCheckedChange:Yr})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const N=new Map,x=new Map;Le.forEach(_=>{const U=_.doorType||_.door_type||us?.doorType||us?.door_type||b||"door",P=_.panelType||_.panel_type||us?.panelType||us?.panel_type||p||"",K=_.subOption||_.sub_option||us?.subOption||us?.sub_option||"",ae=`${U}||${P}||${K}`;if(N.has(ae)||N.set(ae,[]),N.get(ae).push(_),!x.has(ae)){const Ye=(N.get(ae)||[])[0]?.productLabel||`${P==="panel"?"With Panel":"Without Panel"}  ${U}${K?" ("+K+")":""}`;x.set(ae,{label:Ye})}});const I=[];let F=0;for(const[_,U]of N.entries()){const P=U.map(tt=>tt.rowId||`${tt.batchId||""}-${tt.id}`),K=P.every(tt=>gn.includes(tt)),ae=`group_${_}`,Fe=qt[ae]||"",Ye=Number(wr[ae]??us?.count??us?.qty??$??1);I.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{id:`group-${_}`,checked:K,onCheckedChange:()=>{qn(K?tt=>tt.filter(Ft=>!P.includes(Ft)):tt=>Array.from(new Set([...tt,...P])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:x.get(_)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx($e,{placeholder:"Group description",value:Fe?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:tt=>Pt(Ft=>({...Ft,[ae]:tt.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",className:"h-8 text-center",value:wr[ae]??Ye,onChange:tt=>{const Ft=tt.target.value?parseFloat(tt.target.value):0;Ze(Zt=>({...Zt,[ae]:Ft})),Pt(Zt=>{const as=(Zt[ae]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...Zt,[ae]:as?as+`
Qty: `+Ft:"Qty: "+Ft}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${_}`));for(const tt of U){F+=1;const Ft=tt.rowId||`${tt.batchId}-${tt.id}`,Zt=Number(Xe[Ft]?.supplyRate??Xe[tt.id]?.supplyRate??tt.rate??0),as=Number(Xe[Ft]?.installRate??Xe[tt.id]?.installRate??tt.installRate??0),xs=Zt+as,Gs=Number(Xe[Ft]?.quantity??Xe[tt.id]?.quantity??tt.quantity??0),Rn=Gs*xs,V=qt[Ft]??qt[tt.id]??tt.description??"",ye=String(V).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();I.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:F}),e.jsx("td",{className:"border px-2 py-1",children:tt.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:qt[Ft]??qt[tt.id]??ye,onChange:He=>Pt(it=>({...it,[Ft]:He.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Ln[Ft]??Ln[tt.id]??tt.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",className:"h-8 text-center",value:Gs,onChange:He=>Tr(Ft,He.target.value?parseFloat(He.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:xs,onChange:He=>{const it=parseFloat(He.target.value||"0"),bt=Number(Xe[Ft]?.supplyRate??Xe[tt.id]?.supplyRate??Zt),es=Math.max(0,it-bt);$a(Ft,bt),ya(Ft,es)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Rn.toFixed(2)]})]},Ft))}}return I})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(8),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Be,{onClick:()=>c(10),children:"Finalize PO"}),e.jsxs(Be,{onClick:rr,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const Qv="/image.png",DG=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),Kr=t=>(t||"").toString().toUpperCase(),AR={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},Ey={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},QG=(t,s)=>{const n=Kr(t.product),r=Kr(t.name),i=Kr(t.category),c=Kr(t.subCategory),u=(AR[s]||[s.toUpperCase()]).some(o=>n.includes(o)||r.includes(o)||i.includes(o)||c.includes(o)),d=Ey[s],h=d&&Kr(n).includes(Kr(d));return u||h},kp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function _G(){const{shops:t,materials:s,products:n}=ei(),{toast:r}=ma(),[i,c]=S.useState(1),A=typeof window<"u"&&window.location.search.includes("step=11"),[u,d]=S.useState(""),[h,o]=S.useState(""),[m,y]=S.useState(null),[p,j]=S.useState(null),[b,w]=S.useState(null),[B,L]=S.useState(null),[Q,k]=S.useState(null),[z,J]=S.useState(null),[$,q]=S.useState(1),[X,fe]=S.useState(7),[ee,le]=S.useState(3),[ue,te]=S.useState(6),[re,ne]=S.useState(2),[oe,se]=S.useState([]),[xe,Me]=S.useState([]);S.useEffect(()=>{ct("/api/accumulated-products/flooring",{headers:{}}).then(v=>v.json()).then(v=>{Me(v.data||[])}).catch(v=>console.error("Failed to load accumulated products",v))},[]),S.useEffect(()=>{if(typeof window<"u"){const N=new URLSearchParams(window.location.search).get("step");if(N){const x=parseInt(N,10);x>=1&&x<=12&&c(x)}}},[]),S.useEffect(()=>{i===12&&ct("/api/accumulated-products/flooring",{headers:{}}).then(v=>v.json()).then(v=>{const N=v.data||[];Me(N),console.debug("Restored flooring_accumulated_products for Step 12:",N.length)}).catch(v=>console.error("Failed to load accumulated products for Step 12",v))},[i]);const me=v=>{const N=v?.doorType??b,x=v?.panelType??p,I=v?.subOption??B;if(!N)return null;const F=be.find(K=>K.value===N);let _=F?F.label:Ey[N]||N;/door/i.test(_)||(_=`${_} Door`);const U=x==="panel"?"With Panel":"Without Panel",P=I?` - ${I}`:"";return`${U}  ${_}${P}`},Z=()=>{const v=(h||"").toString();if(!b&&!v)return null;const N=v||me(),x=v||Ey[b]||b,I=b?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(b):Kr(N).includes("GLASS")||Kr(N).includes("STILE");return{label:N,productName:x,requiresGlazing:I}},ge=()=>{const v=(h||"").toString();if(!b&&!v||!s.length)return[];const N=v||(b?Ey[b]:"");let x=[];if(N&&(x=s.filter(F=>{const _=(F.product||"").toString();if(!_||!N)return!1;const U=Kr(_),P=Kr(N);return U.includes(P)||P.includes(U)})),(!x||x.length===0)&&!v&&(x=b?s.filter(F=>QG(F,b)):s.filter(F=>{const _=(F.product||"").toString();if(!N)return!1;const U=Kr(_),P=Kr(N);return U.includes(P)||P.includes(U)})),x.length===0)return[];const I=new Map;for(const F of x){const _=`${Kr(F.product)}__${Kr(F.name)}__${DG(F.code)}`,U=I.get(_);(!U||(F.rate||0)<(U.rate||0))&&I.set(_,F)}return Array.from(I.values())},we={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},pe=["Single Glass","Double Glass"],be=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],je=(v,N)=>{const x=$||1,I=X||7,F=ee||3,_=ue||6,U=re||2,P=Um(I,F),K=v.toLowerCase();let ae=0;return K.includes("frame")||K.includes("door frame")?ae=P*x:K.includes("door")&&(K.includes("panel")||K.includes("shutter")||K.includes("flush")||K.includes("wooden"))?ae=x:K.includes("hinge")?ae=x*3:K.includes("lock")||K.includes("handle")||K.includes("stopper")||K.includes("bolt")?ae=x:K.includes("glass")?ae=Lm(_,U)*x:ae=x,Math.max(1,Math.ceil(ae))},Ne=(v,N)=>{const x=v||oe,I=Array.from(new Map((x||[]).map(_=>[_.rowId||`${_.batchId||""}|${_.materialId}|${_.selectedShopId||""}|${_.selectedBrand||""}`,_])).values()),F=N||st;return I.map(_=>{let U=Qe.find(xs=>xs.id===_.materialId);if(U||(U=s.find(xs=>xs.id===_.materialId)||null),!U)return null;const P=s.find(xs=>{const Gs=Kr(xs.product)===Kr(U.product),Rn=Kr(xs.name)===Kr(U.name),V=xs.shopId===_.selectedShopId,ye=kp(xs)===(_.selectedBrand||"Generic");return Gs&&Rn&&V&&ye})||U,K=t.find(xs=>xs.id===_.selectedShopId),ae=_.rowId||(_.batchId?`${_.batchId}-${P.id}`:P.id),Fe=F[ae]||F[P.id]||F[U.id],Ye=je(P.name,P.unit),tt=Fe?.quantity??Ye,Ft=Fe?.supplyRate??P.rate??0,Zt=Fe?.installRate??0,as=(Es||[]).find(xs=>xs.rowId===ae||`${xs.batchId||""}-${xs.id}`===ae);return{id:P.id,batchId:_.batchId,rowId:ae,name:P.name,quantity:tt,unit:P.unit,rate:Ft,shopId:_.selectedShopId,shopName:K?.name||"Unknown",installRate:Zt,doorType:as?.doorType||as?.door_type||void 0,panelType:as?.panelType||as?.panel_type||void 0,subOption:as?.subOption||as?.sub_option||void 0,glazingType:as?.glazingType||as?.glazing_type||void 0,productLabel:as?.productLabel||void 0}}).filter(_=>_!==null)},Je=()=>Ne().reduce((v,N)=>v+N.quantity*N.rate,0),Qe=ge(),pt=v=>(v?.name||v?.title||v?.label||v?.productName||v?.product||"").toString(),Te=v=>(v?.category||v?.type||v?.group||v?.section||"").toString(),Ce=v=>Dd(v)==="flooring",_e=v=>{const N=Kr(v);return N.includes("FLUSH")?"flush":N.includes("WPC")?"wpc":N.includes("STILE")||N.includes("ALUMIN")?"stile":N.includes("GLASS PANEL")?"glasspanel":N.includes("GLASS")?"glassdoor":N.includes("WOOD")||N.includes("TEAK")?"wooden":null},de=(n||[]).filter(Ce).slice().sort((v,N)=>{const x=pt(v),I=pt(N);return x.localeCompare(I)}),dt=v=>{const N=pt(v);d(v.id||N),o(N);const x=_e(N);w(x||b),L(null),k(null),J(null),se([]),nt({}),qt({}),gs({}),c(6)},[st,nt]=S.useState({}),[at,Dt]=S.useState([]),[yt,qe]=S.useState({}),[Tt,ns]=S.useState("Concept Trunk Interiors"),[Ts,vs]=S.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[Ns,et]=S.useState("33ASOPS5560M1Z1"),[De,rt]=S.useState(""),[mt,ls]=S.useState(new Date().toISOString().slice(0,10)),[Ht,Kt]=S.useState(""),[lt,Gt]=S.useState("50% Advance and 50% on Completion"),[Yt,Cs]=S.useState(""),[rs,Is]=S.useState(""),[on,ws]=S.useState(""),[St,qt]=S.useState({}),[Pt,gs]=S.useState({}),[Rs,Nn]=S.useState({}),[ys,Ln]=S.useState({}),[Zs,En]=S.useState({}),[Ls,Bs]=S.useState({}),[Ms,Os]=S.useState([]),[ot,Rt]=S.useState([]),[Mt,kt]=S.useState(""),[fs,ms]=S.useState([]),[Ds,js]=S.useState([]),[Lt,Hs]=S.useState([]),[Wr,sr]=S.useState(!1);S.useEffect(()=>{(async()=>{if(De)try{const N=await ct(`/api/estimator-step9-items?session_id=${De}&estimator=flooring`,{headers:{}});if(N.ok){const F=await N.json();ms(F.items||[])}const x=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=flooring`,{headers:{}});if(x.ok){const F=await x.json();js(F.items||[])}const I=await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=flooring`,{headers:{}});if(I.ok){const F=await I.json();Hs(F.items||[])}}catch(N){console.warn("Failed to load data from DB:",N)}})()},[De]),S.useEffect(()=>{if(i===7){const v=Ne(),N={};v.forEach(x=>{N[x.id]={quantity:x.quantity||0,supplyRate:x.rate||0,installRate:0}}),nt(N)}},[i,oe]),S.useEffect(()=>{if(i===9){const v=Ne(at,yt);if(v.length>0){const N=v[0].shopId,x=t.find(I=>I.id===N);if(x){const I=[x.name||"",x.address||"",x.area||"",x.city||"",x.state||"",x.pincode||"",x.gstNo?`GSTIN: ${x.gstNo}`:"",x.phone||""].filter(Boolean);ws(I.join(`
`))}}}},[i,at,yt,oe,t]),S.useEffect(()=>{if(i===9){is();const v=[],N={},x={},I={};if(Es&&Es.length>0)for(const F of Es){const _=F.rowId||`${F.batchId||""}-${F.id}`;v.findIndex(P=>P.materialId===F.id&&P.rowId===_&&(P.batchId||"")===(F.batchId||""))===-1&&(v.push({materialId:F.id,selectedShopId:F.shopId||"",selectedBrand:F.brand||void 0,batchId:F.batchId,rowId:_}),N[_]={quantity:Number(F.quantity||0),supplyRate:Number(F.supplyRate??F.rate??0),installRate:Number(F.installRate||0)},F.description&&(x[_]=F.description),F.location&&(I[_]=F.location))}if(fs&&fs.length>0)for(const F of fs){if(!s.find(Ye=>Ye.id===F.material_id))continue;const U=F.material_id,P=F.row_id||(F.batch_id?`${F.batch_id}-${U}`:U),K=F.shop_id||"",ae=F.brand||void 0;v.findIndex(Ye=>Ye.materialId===U&&(Ye.batchId||"")===(F.batch_id||"")&&(Ye.rowId||"")===P)===-1&&(v.push({materialId:U,selectedShopId:K,selectedBrand:ae,batchId:F.batch_id||(F.row_id?P.replace(`-${U}`,""):void 0)}),N[P]={quantity:Number(F.quantity||0),supplyRate:Number(F.supply_rate||F.rate||0),installRate:Number(F.install_rate||0)},F.description&&(x[P]=F.description),F.location&&(I[P]=F.location))}oe&&oe.length>0&&oe.forEach(F=>{if(v.findIndex(U=>U.materialId===F.materialId&&U.batchId===F.batchId)===-1){v.push(F);const U=s.find(P=>P.id===F.materialId);if(U){const P=F.batchId?`${F.batchId}-${F.materialId}`:F.materialId;N[P]={quantity:st[F.materialId]?.quantity??U.quantity??1,supplyRate:st[F.materialId]?.supplyRate??U.rate??0,installRate:st[F.materialId]?.installRate??0}}}}),v.length>0&&Dt(v),Object.keys(N).length>0&&qe(N),Object.keys(x).length>0&&qt(F=>({...F,...x})),Object.keys(I).length>0&&gs(F=>({...F,...I}))}},[i,oe,fs]),S.useEffect(()=>{i===11&&(async()=>{if(De)try{const N=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=flooring`,{headers:{}});if(N.ok){const I=(await N.json()).items||[],F={},_={},U={},P={};I.forEach(K=>{const ae=s.find(Fe=>Fe.name===K.item);ae&&(F[ae.id]=Number(K.supply_rate||0),_[ae.id]=Number(K.install_rate||0),U[ae.id]=Number(K.qty||0),P[ae.id]=K.unit||"")}),Bs(K=>({...K,...F})),En(K=>({...K,..._})),Nn(K=>({...K,...U})),Ln(K=>({...K,...P}))}}catch(N){console.warn("Failed to load step 11 data:",N)}})()},[i,De,Ds]);const ds=S.useRef(null);S.useEffect(()=>{is().catch(()=>{})},[]),S.useEffect(()=>{(async()=>{if(De)try{const N=await ct(`/api/estimator-step9-items?session_id=${De}&estimator=flooring`,{headers:{}});if(N.ok){const x=await N.json(),I=x.items.map(F=>({id:F.material_id,rowId:F.row_id,batchId:F.batch_id,name:F.name,unit:F.unit,quantity:F.quantity,supplyRate:F.supply_rate,installRate:F.install_rate,shopId:F.shop_id,shopName:F.shop_name,description:F.description,location:F.location,doorType:F.door_type,panelType:F.panel_type,subOption:F.sub_option,glazingType:F.glazing_type}));if(rn(I),x.items.length>0){const F=x.items[0];us({doorType:F.door_type,panelType:F.panel_type,subOption:F.sub_option,glazingType:F.glazing_type,count:F.qty,height:F.height,width:F.width,glassHeight:F.glass_height,glassWidth:F.glass_width,subtotal:F.subtotal,sgst:F.sgst,cgst:F.cgst,round_off:F.round_off,grand_total:F.grand_total})}}}catch(N){console.warn("Failed to load step 9 from DB",N)}})()},[De]),S.useEffect(()=>(ds.current&&clearTimeout(ds.current),ds.current=setTimeout(async()=>{new Date().toISOString();try{if(!De)return;const v=Ne().map((N,x)=>{const I=N.rowId||(N.batchId?`${N.batchId}-${N.id}`:N.id);return{estimator:"flooring",session_id:De,s_no:x+1,row_id:String(I),batch_id:N.batchId||null,material_id:N.id,name:N.name,unit:N.unit,quantity:Number(st[N.id]?.quantity??N.quantity??0),supply_rate:Number(st[N.id]?.supplyRate??N.rate??0),install_rate:Number(st[N.id]?.installRate??0),shop_id:N.shopId||"",shop_name:N.shopName||"",description:St[N.id]||"",location:Pt[N.id]||"",door_type:b,panel_type:p,sub_option:B,glazing_type:z,qty:$,height:X,width:ee,glass_height:ue,glass_width:re}});await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"flooring",session_id:De,items:v})})}catch{}},800),()=>{ds.current&&clearTimeout(ds.current)}),[oe,st,St,Pt,b,p,B,z,$,X,ee,ue,re,De]);const mn=v=>{const N=Qe.find(K=>K.id===v);if(!N)return;if(oe.find(K=>K.materialId===v)){se(K=>K.filter(ae=>ae.materialId!==v));return}const I=s.filter(K=>Kr(K.product)===Kr(N.product)&&Kr(K.name)===Kr(N.name)).map(K=>({brand:kp(K),shopId:K.shopId,rate:K.rate||0})),_=Array.from(new Set(I.map(K=>K.brand))).sort()[0]||"Generic",P=I.filter(K=>K.brand===_).sort((K,ae)=>K.rate-ae.rate)[0];P?.shopId&&se(K=>[...K,{materialId:v,selectedShopId:P.shopId,selectedBrand:_}])},cr=(v,N)=>{se(x=>x.map(I=>I.materialId===v?{...I,selectedShopId:N}:I))},nr=(v,N)=>{const x=Qe.find(_=>_.id===v);if(!x)return;const F=s.filter(_=>Kr(_.product)===Kr(x.product)&&Kr(_.name)===Kr(x.name)).map(_=>({brand:kp(_),shopId:_.shopId,rate:_.rate||0})).filter(_=>_.brand===N).sort((_,U)=>_.rate-U.rate)[0]?.shopId||"";se(_=>_.map(U=>U.materialId===v?{...U,selectedBrand:N,selectedShopId:F||U.selectedShopId}:U))},[sn,gn]=S.useState([]),qn=()=>{const v=(i===9?Ne(at,yt):Ne()).map(N=>N.rowId||N.id);gn(N=>N.length===v.length?[]:v)},Yr=async()=>{if(sn.length!==0){try{const v=[],N=[];for(const x of sn){const I=Es?.find(F=>`${F.batchId||""}-${F.id}`===x);if(I&&I.id){const F=fs.find(_=>_.id===I.id);F&&v.push(F)}else{const F=at.find(_=>`${_.batchId||""}-${_.materialId}`===x);F&&N.push(F)}}if(v.length>0&&De&&(await ct("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:De,estimator:"flooring",items:v})}),rn(x=>x?x.filter(I=>!v.some(F=>F.id===I.id)):null)),N.length>0&&Dt(x=>x.filter(I=>!N.some(F=>`${F.batchId||""}-${F.materialId}`==`${I.batchId||""}-${I.materialId}`))),Dt(x=>x.filter(I=>!sn.includes(`${I.batchId||""}-${I.materialId}`))),qe(x=>{const I={...x};return sn.forEach(F=>delete I[F]),I}),De){const I=await(await ct(`/api/estimator-step9-items?session_id=${De}&estimator=flooring`,{headers:{}})).json();ms(I.items||[])}r({title:"Success",description:`${sn.length} item(s) deleted successfully!`})}catch(v){console.warn("Failed to delete items",v),r({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}gn([])}},[Gr,ra]=S.useState([]),gr=S.useRef(""),[Ks,en]=S.useState(null),[Es,rn]=S.useState(null),[Ps,wr]=S.useState({}),[Ze,us]=S.useState(null),is=async()=>{try{const v=await ct("/api/boq");if(v.status===401){ra([]),gr.current!=="401"&&(gr.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!v.ok){const I=await v.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${I||v.status}`)}if(!(v.headers.get("content-type")||"").includes("application/json")){const I=await v.text().catch(()=>"");console.warn("/api/boq returned non-json:",I),ra([]);return}const x=await v.json();ra(x.boqs||[]),gr.current=""}catch(v){console.error("fetchSavedBoqs",v);const N=String(v?.message||v||"");if(!N)return;gr.current!==N&&(gr.current=N,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},yn=async()=>{try{if(!De)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const v={estimator:"flooring",billNo:De,doorType:b,panelType:p,subOption:B,glazingType:z,qty:$,height:X,width:ee,glassHeight:ue,glassWidth:re,materials:Es&&Es.length>0?Es:Ne(),subtotal:Xe,sgst:vt,cgst:ut,roundOff:Pe,grandTotal:Bt},N=await ct("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!N.ok){const F=await N.text().catch(()=>"");throw new Error(F||"save failed")}const x=N.headers.get("content-type")||"";let I=null;if(x.includes("application/json"))I=await N.json();else{const F=await N.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",F),I={boq:null}}return await is(),en(I?.boq||I?.boqs?.[0]||null),!0}catch(v){return console.error("handleSaveBOQ",v),!1}},Jn=async v=>{try{if(!(await ct(`/api/boq/${v}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await is()}catch(N){console.error("handleDeleteSavedBoq",N)}},zn=()=>{c(1),w(null),j(null),L(null),k(null),q(1),fe(7),le(3),te(0),ne(0),Os([]),Nn({}),qt({}),gs({}),Ln({}),Bs({}),En({}),wr({}),en(null)},ua=async()=>{sr(!0);try{let v=Ds||[];if(De)try{const _=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=flooring`);_.ok&&(v=(await _.json()).items||[],js(v))}catch(_){console.warn("Failed to refresh step11 items before save",_)}const N=ps.map(_=>({estimator:"flooring",session_id:De,group_key:(_.groupKey||`${_.doorType||"door"}||${_.panelType||""}||${_.subOption||""}`)+"::"+(_.name||""),group_id:_.groupId||`group_${_.groupKey||""}`,item_name:_.name,unit:_.unit,quantity:_.quantity,location:_.location||"",description:_.description||"",supply_rate:Ls[_.id]||_.supplyRate||0,install_rate:Zs[_.id]||_.installRate||0,supply_amount:(_.quantity||0)*(Ls[_.id]||_.supplyRate||0),install_amount:(_.quantity||0)*(Zs[_.id]||_.installRate||0),supply_subtotal:ps.reduce((U,P)=>U+(P.quantity||0)*(Ls[P.id]||P.supplyRate||0),0),install_subtotal:ps.reduce((U,P)=>U+(P.quantity||0)*(Zs[P.id]||P.installRate||0),0),sgst:vt,cgst:ut,round_off:Pe,grand_total:ps.reduce((U,P)=>U+(P.quantity||0)*((Ls[P.id]||P.supplyRate||0)+(Zs[P.id]||P.installRate||0)),0)+vt+ut+Pe})),x=new Set((v||[]).map(_=>_.group_key||_.groupKey)),I=N.filter(_=>!x.has(_.group_key));if(I.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),sr(!1),!0;const F=await ct("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:I})});if(!F.ok){const _=await F.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${_||F.statusText}`,variant:"destructive"}),sr(!1),!1}try{const _=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=flooring`);if(_.ok){const U=await _.json();js(U.items||[])}}catch(_){console.warn("Failed to reload step11 items after save",_)}return Me([]),r({title:"Success",description:"Step 11 saved to database."}),sr(!1),!0}catch(v){return console.error("handleSaveAccumulatedBOQ",v),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),sr(!1),!1}},ga=v=>{if(rt(v.bill_no||""),w(v.door_type||null),j(v.panel_type||null),L(v.sub_option||null),J(v.glazing_type||null),q(v.qty||1),fe(v.height||7),le(v.width||3),te(v.glass_height||6),ne(v.glass_width||2),Array.isArray(v.materials)){const N=v.materials.map(x=>({materialId:x.id,selectedShopId:x.shopId||x.shop_id||x.shopId||"",selectedBrand:x.shopName||x.brand||x.selectedBrand||void 0}));se(N.filter(Boolean))}en(v)},ha=(v,N)=>{if(i===9){qe(x=>({...x,[v]:{...x[v]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(N))}}));return}nt(x=>({...x,[v]:{...x[v]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(N))}}))},Tr=(v,N)=>{if(i===9){qe(x=>({...x,[v]:{...x[v]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(N)),installRate:x[v]?.installRate||0}}));return}nt(x=>({...x,[v]:{...x[v]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(N)),installRate:x[v]?.installRate||0}}))},$a=(v,N)=>{if(i===9){qe(x=>({...x,[v]:{...x[v]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(N)),supplyRate:x[v]?.supplyRate||0}}));return}nt(x=>({...x,[v]:{...x[v]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(N)),supplyRate:x[v]?.supplyRate||0}}))},ya=()=>{const v=document.getElementById("boq-pdf");if(!v){alert("BOQ content not found");return}setTimeout(()=>{Qd().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:N=>N.className?.toString().includes("bg-")||N.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(v).save().catch(N=>{console.error("PDF Export Error:",N),alert("PDF export failed. Check console.")})},100)},rr=async()=>{const v=document.getElementById("boq-final-pdf");if(!v){alert("Final BOQ content not found");return}const N=(await Yc(async()=>{const{default:x}=await Promise.resolve().then(()=>bu);return{default:x}},void 0)).default;N().set({margin:10,filename:`BOQ-${De||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(v).save()},oa=()=>{const v=Ne(),N=Z(),x=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${p==="panel"?"With Panel":"Without Panel"} - ${N?.label}`,`Dimensions: ${X}ft  ${ee}ft (Count: ${$})`,...z?[`Glazing: ${z}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];v.forEach((P,K)=>{const ae=P.quantity*P.rate;x.push(`${K+1},"${P.name}","${P.unit}",${P.quantity},${P.rate},"${P.shopName}",${ae}`)}),x.push("",`TOTAL COST,,,${Je().toFixed(2)}`);const I=x.join(`
`),F=new Blob([I],{type:"text/csv"}),_=window.URL.createObjectURL(F),U=document.createElement("a");U.href=_,U.download=`BOQ-Doors-${new Date().getTime()}.csv`,U.click(),URL.revokeObjectURL(_)},Ga=()=>{const v=ps||[],N=[];N.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),v.forEach((U,P)=>{const K=Number(U.supplyRate??U.rate??0),ae=Number(U.installRate??0),Fe=Number(U.quantity||0),Ye=Fe*K,tt=Fe*ae,Ft=(U.location||Pt[U.id]||"").toString().replace(/"/g,'""'),Zt=(U.description||St[U.id]||U.name||"").toString().replace(/"/g,'""'),Gs=(me({doorType:U.doorType||U.door_type,panelType:U.panelType||U.panel_type,subOption:U.subOption||U.sub_option,glazingType:U.glazingType||U.glazing_type})||U.name||"").replace(/"/g,'""');N.push(`${P+1},"${Gs}","${Ft}","${Zt}",${U.unit},${Fe},${K.toFixed(2)},${ae.toFixed(2)},${Ye.toFixed(2)},${tt.toFixed(2)}`)});const x=N.join(`
`),I=new Blob([x],{type:"text/csv"}),F=window.URL.createObjectURL(I),_=document.createElement("a");_.href=F,_.download=`BOQ-Doors-Step11-${new Date().getTime()}.csv`,_.click(),URL.revokeObjectURL(F)},fi=async()=>{const v=Ne(at,yt).map(U=>{const P=U.rowId||`${U.batchId}-${U.id}`;return{id:U.id,rowId:P,batchId:U.batchId||null,name:U.name,productLabel:U.productLabel||null,product_label:U.productLabel||null,unit:U.unit,quantity:yt[P]?.quantity??yt[U.id]?.quantity??U.quantity,supplyRate:yt[P]?.supplyRate??yt[U.id]?.supplyRate??U.rate,installRate:yt[P]?.installRate??yt[U.id]?.installRate??U.installRate??0,shopId:U.shopId,shopName:U.shopName,description:St[P]||St[U.id]||"",location:Pt[P]||Pt[U.id]||"",doorType:U.doorType,panelType:U.panelType,subOption:U.subOption,glazingType:U.glazingType,isSaved:U.isSaved||!1}}),N=v.filter(U=>!U.isSaved);if(N.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let x=De;(!x||x.trim()==="")&&(x=`DOOR-${Date.now()}`,rt(x));const I=Ze||(()=>{const U=v.reduce((Ye,tt)=>Ye+Number(tt.quantity||0)*(Number(tt.supplyRate||0)+Number(tt.installRate||0)),0),P=U*.09,K=U*.09,ae=Math.round(U+P+K)-(U+P+K),Fe=U+P+K+ae;return{subtotal:U,sgst:P,cgst:K,round_off:ae,grand_total:Fe}})(),F={id:`local-${Date.now()}`,estimator:"flooring",bill_no:x,door_type:Ze?.doorType||Ze?.door_type||b,panel_type:Ze?.panelType||Ze?.panel_type||p,sub_option:Ze?.subOption||Ze?.sub_option||B,glazing_type:Ze?.glazingType||Ze?.glazing_type||z,qty:Ze?.count||Ze?.qty||$,height:Ze?.height||X,width:Ze?.width||ee,glass_height:Ze?.glassHeight||Ze?.glass_height||ue,glass_width:Ze?.glassWidth||Ze?.glass_width||re,materials:v,subtotal:I.subtotal,sgst:I.sgst,cgst:I.cgst,round_off:I.round_off,grand_total:I.grand_total,created_at:new Date().toISOString()};en(F),rn(v);try{us(U=>({...U||{},...I}))}catch{}const _=N.map((U,P)=>({estimator:"flooring",session_id:x,s_no:P+1,row_id:String(U.rowId||`${U.batchId||""}-${U.id}`),batch_id:U.batchId||null,material_id:U.id,name:U.name,unit:U.unit,quantity:Number(U.quantity||0),supply_rate:Number(U.supplyRate||0),install_rate:Number(U.installRate||0),shop_id:U.shopId||"",shop_name:U.shopName||"",description:U.description||"",location:U.location||"",door_type:U.doorType||Ze?.doorType||Ze?.door_type||b||null,panel_type:U.panelType||Ze?.panelType||Ze?.panel_type||p||null,sub_option:U.subOption||Ze?.subOption||Ze?.sub_option||B||null,glazing_type:U.glazingType||Ze?.glazingType||Ze?.glazing_type||z||null,qty:Ze?.count||Ze?.qty||$,height:Ze?.height||X,width:Ze?.width||ee,glass_height:Ze?.glassHeight||Ze?.glass_height||ue,glass_width:Ze?.glassWidth||Ze?.glass_width||re,subtotal:I.subtotal,sgst:I.sgst,cgst:I.cgst,round_off:I.round_off,grand_total:I.grand_total}));try{await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"flooring",session_id:x,items:_})});const P=await(await ct(`/api/estimator-step9-items?session_id=${x}&estimator=flooring`,{headers:{}})).json();ms(P.items||[]);const K=(Es||[]).map(ae=>N.some(Ye=>ae.rowId===Ye.rowId||`${ae.batchId||""}-${ae.id}`==`${Ye.batchId||""}-${Ye.id}`)?{...ae,isSaved:!0}:ae);rn(K),r({title:"Success",description:`${N.length} new material(s) saved successfully to database!`})}catch(U){console.warn("Failed to save step 9 to DB",U),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},xa=v=>{let N=5381;for(let x=0;x<v.length;x+=1)N=(N<<5)+N^v.charCodeAt(x);return Math.abs(N>>>0).toString(36)},ie=()=>{const v=JSON.stringify({doorType:b,panelType:p,subOption:B,glazingType:z,count:$,height:X,width:ee,glassHeight:ue,glassWidth:re,selectedMaterials:(oe||[]).map(N=>({materialId:N.materialId,selectedShopId:N.selectedShopId,selectedBrand:N.selectedBrand})),editable:Object.keys(st||{}).sort().map(N=>({id:N,...st[N]}))});return`batch-${xa(v)}`},G=()=>{const v=ie(),N=Ne(oe,st).map(P=>({id:P.id,rowId:`${v}-${P.id}`,batchId:v,name:P.name,unit:P.unit,quantity:st[P.id]?.quantity??P.quantity,supplyRate:st[P.id]?.supplyRate??P.rate,installRate:st[P.id]?.installRate??0,shopId:P.shopId,shopName:P.shopName,description:St[P.id]||"",location:Pt[P.id]||"",doorType:b,productLabel:h||me(),panelType:p,subOption:B,glazingType:z,isSaved:!1}));if(N.length===0){c(9);return}const F=[...(Es||[]||[]).filter(P=>P.batchId!==v),...N],_=Array.from(new Map((F||[]).map(P=>[P.rowId||`${P.batchId||""}-${P.id}`,P])).values());rn(_),Dt((oe||[]).map(P=>({materialId:P.materialId,selectedShopId:P.selectedShopId,selectedBrand:P.selectedBrand,batchId:v})));const U={};_.forEach(P=>{const K=P.rowId||`${P.batchId}-${P.id}`;U[K]={quantity:Number(P.quantity||0),supplyRate:Number(P.supplyRate||P.rate||0),installRate:Number(P.installRate||0)}}),qe(U);try{const P=Je(),K=P*.09,ae=P*.09,Fe=Math.round(P+K+ae)-(P+K+ae),Ye=P+K+ae+Fe;us({doorType:b,panelType:p,subOption:B,glazingType:z,count:$,height:X,width:ee,glassHeight:ue,glassWidth:re,subtotal:P,sgst:K,cgst:ae,round_off:Fe,grand_total:Ye})}catch{}c(9)},ve=i===9||i===11?Es||[]:Ne(),Le=i===9?yt:st,Xe=ve.reduce((v,N)=>v+N.quantity*((Le[N.id]?.supplyRate??N.rate)+(Le[N.id]?.installRate??N.installRate??0)),0),vt=Xe*.09,ut=Xe*.09,Pe=Math.round(Xe+vt+ut)-(Xe+vt+ut),Bt=Xe+vt+ut+Pe,_t=xe.length>0?xe.flatMap(v=>v.materials||[]):Es&&Es.length>0?Es:ve&&ve.length>0?ve:Ks&&Ks.materials&&Ks.materials.length>0?Array.isArray(Ks.materials)?Ks.materials:JSON.parse(Ks.materials||"[]"):ve,xn=(()=>{const v=new Map;for(const x of _t||[]){const I=x.productLabel||x.doorType||x.door_type||Ze?.doorType||Ze?.door_type||b||"door",F=x.panelType||x.panel_type||Ze?.panelType||Ze?.panel_type||p||"",_=x.subOption||x.sub_option||Ze?.subOption||Ze?.sub_option||"",U=`${I}||${F}||${_}`;v.has(U)||v.set(U,[]),v.get(U).push(x)}const N=[];for(const[x,I]of v.entries()){const[F,_,U]=x.split("||"),P=`group_${x}`,K=St[P]||"",ae=Pt[P]||"";let Fe=Number(Ps[P]??Ze?.count??Ze?.qty??$??1);const Ye=String(K).match(/Qty:\s*(\d+(?:\.\d+)?)/);Ye&&(Ps[P]===void 0||Ps[P]===null)&&(Fe=Number(Ye[1]));const tt=I.reduce((Rn,V)=>Rn+Number(V.quantity||0)*Number(V.supplyRate??V.rate??0),0),Ft=Fe>0?tt/Fe:tt,Zt=I.reduce((Rn,V)=>Rn+Number(V.quantity||0)*Number(V.installRate??0),0),as=Fe>0?Zt/Fe:Zt,xs=I[0]&&I[0].productLabel||me({doorType:F,panelType:_,subOption:U})||F,Gs=String(K).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();N.push({id:P,groupKey:x,name:xs,location:ae||"",description:Gs||"",unit:"pcs",quantity:Fe,supplyRate:Number(Ft||0),installRate:Number(Zs[P]??as??0),supplyAmount:Number(Ft*Fe||0),installAmount:Number((Zs[P]??as)*Fe||0)})}return N})();(Ds||[]).filter(v=>v.item||v.item_name).map((v,N)=>{const x=v.group_key||v.groupKey||`${v.door_type||v.doorType||"door"}||${v.panel_type||v.panelType||""}||${v.sub_option||v.subOption||""}`;return{id:v.id,groupKey:x,name:v.productLabel||v.item_name||v.item||v.name||v.door_label||v.doorType||v.door_type||"Door",location:v.location||"",description:v.description||"",unit:v.unit||"pcs",quantity:Number(v.quantity??v.qty??1),supplyRate:Number(v.supply_rate??v.supplyRate??0),installRate:Number(v.install_rate??v.installRate??0),supplyAmount:Number(v.supply_amount??0),installAmount:Number(v.install_amount??0),doorType:v.door_type||v.doorType,panelType:v.panel_type||v.panelType,subOption:v.sub_option||v.subOption}});const ps=(xe.length===0?xn.filter(v=>!(Ds||[]).some(x=>(x.group_key||x.groupKey||`${x.door_type||""}||${x.panel_type||""}||${x.sub_option||""}`)===v.groupKey)):xe.map((v,N)=>({id:`accumulated_${N}`,groupKey:`${v.doorType||"door"}||${v.panelType||""}||${v.subOption||""}`,name:v.productLabel||v.materials?.[0]?.productLabel||v.doorLabel||me({doorType:v.doorType,panelType:v.panelType,subOption:v.subOption})||v.doorType,location:v.location||"",description:v.description||"",unit:"pcs",quantity:v.count||1,supplyRate:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.supplyRate??I.rate??0),0)||0,installRate:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.installRate??0),0)||0,supplyAmount:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.supplyRate??I.rate??0),0)||0,installAmount:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.installRate??0),0)||0})))||[],Qs=ps.filter(v=>ot.includes(v.id)),Qn=ps.reduce((v,N)=>{const x=Number(Rs[N.id]??(N.quantity||0)),I=Number(Ls[N.id]??N.supplyRate??N.rate??0);return v+x*I},0);ps.reduce((v,N)=>{const x=Number(Rs[N.id]??(N.quantity||0));return v+x*Number(N.installRate||0)},0);const kn=Qs.reduce((v,N)=>{const x=Number(Rs[N.id]??(N.quantity||0)),I=Number(Ls[N.id]??N.supplyRate??N.rate??0);return v+x*I},0);Ks&&Ks.bill_no;const Wn=Ks&&Ks.created_at?new Date(Ks.created_at).toISOString().slice(0,10):mt,Xr=v=>{if(!v)return!1;const N=(v.name||"").toString().trim(),x=Number(v.quantity||0),I=Number(v.supplyRate??v.rate??0),F=Number(v.installRate??0),_=(v.description||"").toString().trim(),U=(v.location||"").toString().trim();return!!N||x>0||I>0||F>0||!!_||!!U};return(xe||[]).map(v=>{const N=(v.materials||[]).filter(Xr),x=N.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.supplyRate??_.rate??0),0),I=N.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.installRate??0),0);return{...v,materials:N,supplySubtotal:x,installSubtotal:I,subtotal:x+I}}).filter(v=>(v.materials||[]).length>0),e.jsx(ka,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Flooring Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(ks,{className:"border-border/50",children:e.jsx(Ws,{className:"pt-8 min-h-96",children:e.jsxs(Fl,{mode:"wait",children:[i===1&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Flooring Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:de.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No electrical products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have subCategory set to Electrical (or contains Electrical)."})]}):e.jsx("div",{className:"grid gap-3",children:de.map(v=>{const N=pt(v),x=(v?.id||N).toString(),I=u===x;return e.jsx(Be,{variant:I?"default":"outline",onClick:()=>dt(v),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:N||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Te(v)})]})},x)})})})]},"step-select-product"),i===11&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Qv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Wn})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all-groups",checked:(()=>{const v=(ps||[]).map(N=>N.id);return v.length>0&&v.every(N=>Ms.includes(N))})(),onCheckedChange:v=>{Os(v?(ps||[]).map(N=>N.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(ps||[]).map((v,N)=>{const x=Number(Ls[v.id]??v.supplyRate??v.rate??0),I=Number(Zs[v.id]??v.installRate??0);let F=Number(Rs[v.id]??(v.quantity||0));const _=F*x,U=F*I;return Pt[v.id]??v.location,St[v.id]??v.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{checked:Ms.includes(v.id),onCheckedChange:()=>{Os(P=>P.includes(v.id)?P.filter(K=>K!==v.id):[...P,v.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:N+1}),e.jsx("td",{className:"border px-2 py-1",children:v.productLabel||v.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx($e,{value:Pt[v.id]??v.location??"",onChange:P=>gs(K=>({...K,[v.id]:P.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:St[v.id]??v.description??"",onChange:P=>qt(K=>({...K,[v.id]:P.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{value:ys[v.id]??v.unit??"",onChange:P=>Ln(K=>({...K,[v.id]:P.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",value:F,onChange:P=>Nn(K=>({...K,[v.id]:Number(P.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:x,onChange:P=>Bs(K=>({...K,[v.id]:Number(P.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:I,onChange:P=>En(K=>({...K,[v.id]:Number(P.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",U.toFixed(2)]})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Qn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!A&&e.jsx(Be,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Be,{variant:"destructive",disabled:Ms.length===0,onClick:async()=>{if(console.log("Delete selected:",Ms),Ds.length>0&&De)try{await ct("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Ms,estimator:"flooring"})});const v=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=flooring`,{headers:{}});if(v.ok){const N=await v.json();js(N.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(v){console.warn("Failed to delete step 11 from DB",v),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(xe.length===0)if(Ks){console.log("Deleting from saved BOQ");const v=Ms.map(F=>F.replace("group_","")),N=Array.isArray(Ks.materials)?Ks.materials:JSON.parse(Ks.materials||"[]");console.log("Current materials:",N.length);const x=N.filter(F=>{const _=F.doorType||F.door_type||Ze?.doorType||Ze?.door_type||b||"door",U=F.panelType||F.panel_type||Ze?.panelType||Ze?.panel_type||p||"",P=F.subOption||F.sub_option||Ze?.subOption||Ze?.sub_option||B||"",K=`${_}||${U}||${P}`,ae=v.includes(K);return console.log("Checking material:",F.id||F.name,K,"match:",ae),!ae});console.log("Filtered materials:",x.length);const I={...Ks,materials:x};en(I),ct("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}).then(()=>console.log("Saved updated BOQ")).catch(F=>console.error("Error saving BOQ:",F))}else{console.log("Deleting from Step 11 saved materials");const v=Ms.map(I=>I.replace("group_","")),x=((Es&&Es.length>0?Es:ve)||[]).filter(I=>{const F=I.doorType||I.door_type||Ze?.doorType||Ze?.door_type||b||"door",_=I.panelType||I.panel_type||Ze?.panelType||Ze?.panel_type||p||"",U=I.subOption||I.sub_option||Ze?.subOption||Ze?.sub_option||B||"",P=`${F}||${_}||${U}`;return!v.includes(P)});rn(x)}else if(xe.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",xe.length);let v;if(Ms.some(N=>N.startsWith("accumulated_"))){const N=Ms.filter(x=>x.startsWith("accumulated_")).map(x=>parseInt(x.replace("accumulated_",""))).sort((x,I)=>I-x);v=[...xe],N.forEach(x=>{x>=0&&x<v.length&&v.splice(x,1)})}else{const N=Ms.map(x=>x.replace("group_",""));v=xe.filter(x=>{const I=`${x.doorType||"door"}||${x.panelType||""}||${x.subOption||""}`,F=N.includes(I);return console.log("Checking product:",x.id,I,"match:",F),!F})}console.log("Accumulated products after:",v.length),Me(v),ct("/api/accumulated-products/flooring",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:v})}).catch(N=>console.error("Failed to save accumulated products after delete",N))}Os([])},children:"Delete Selected"}),e.jsx(Be,{onClick:zn,children:"Add Product"}),e.jsx(Be,{onClick:ua,disabled:Wr,children:"Save"}),e.jsx(Be,{onClick:async()=>{Rt(Ms);const v=(Qs||[]).map((N,x)=>{const I=Number(Ls[N.id]??N.supplyRate??N.rate??0),F=Number(Zs[N.id]??N.installRate??0);let _=Number(Rs[N.id]??(N.quantity||0));return{s_no:x+1,item:N.name,location:Pt[N.id]??N.location??"",description:St[N.id]??N.description??"",unit:ys[N.id]??N.unit??"",qty:_,supply_rate:I,install_rate:F,supply_amount:_*I,install_amount:_*F}});try{const N=await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=flooring`,{headers:{}});let x=[];N.ok&&(x=(await N.json()).items||[]);const I=v.filter(U=>!x.some(P=>P.item===U.item&&P.description===U.description&&P.unit===U.unit));if(I.length===0){c(12);return}await ct("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"flooring",session_id:De,items:I})});const _=await(await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=flooring`,{headers:{}})).json();Hs(_.items||[]),r({title:"Success",description:`${I.length} new material(s) saved successfully to database!`}),c(12)}catch(N){console.warn("Failed to save step 12 to DB",N),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),i===4&&b&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(we[b]||[]).map(v=>e.jsx(Be,{onClick:()=>{L(v),k(null)},className:`w-full text-black ${B===v?"bg-cyan-500":"bg-white"}`,children:v},v))}),b==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:pe.map(v=>e.jsx(Be,{onClick:()=>k(v),className:`w-full text-black ${Q===v?"bg-cyan-500":"bg-white"}`,children:v},v))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(3),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{onClick:()=>c(5),disabled:!B||b==="flush"&&B==="With Vision Panel"&&!Q,children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),i===5&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"count",children:"Count"}),e.jsx($e,{id:"count",type:"number",placeholder:"1",value:$||"",onChange:v=>q(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"height",children:"Height"}),e.jsx($e,{id:"height",type:"number",placeholder:"7",value:X||"",onChange:v=>fe(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"width",children:"Width"}),e.jsx($e,{id:"width",type:"number",placeholder:"3",value:ee||"",onChange:v=>le(v.target.value?parseFloat(v.target.value):null)})]})]}),Z()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(Ve,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx($e,{id:"glassHeight",type:"number",placeholder:"72",value:ue||"",onChange:v=>te(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx($e,{id:"glassWidth",type:"number",placeholder:"24",value:re||"",onChange:v=>ne(v.target.value?parseFloat(v.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(Z()?.requiresGlazing?4:3),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{disabled:!$||!X||!ee||Z()?.requiresGlazing&&(!ue||!re),onClick:()=>c(6),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),i===6&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Z()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Fn,{id:"select-all-materials",checked:oe.length===Qe.length&&Qe.length>0,onCheckedChange:v=>{if(v){const N=Qe.map(x=>{const I=s.filter(P=>Kr(P.product)===Kr(x.product)&&Kr(P.name)===Kr(x.name)).map(P=>({id:P.id,brand:kp(P),shopId:P.shopId,rate:P.rate,unit:P.unit,shopName:t.find(K=>K.id===P.shopId)?.name||"Unknown"})),_=Array.from(new Set(I.map(P=>P.brand))).sort()[0]||"Generic",U=I.filter(P=>P.brand===_).sort((P,K)=>(P.rate||0)-(K.rate||0));return{materialId:x.id,selectedBrand:_,selectedShopId:U[0]?.shopId||""}});se(N)}else se([])}}),e.jsx(Ve,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Qe.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",b||h||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(b?AR[b]||[b]:[h||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(v=>v.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Qe.map(v=>{const N=oe.some(K=>K.materialId===v.id),x=oe.find(K=>K.materialId===v.id),I=s.filter(K=>Kr(K.product)===Kr(v.product)&&Kr(K.name)===Kr(v.name)).map(K=>({id:K.id,brand:kp(K),shopId:K.shopId,rate:K.rate,unit:K.unit,shopName:t.find(ae=>ae.id===K.shopId)?.name||"Unknown"})),F=Array.from(new Set(I.map(K=>K.brand))).sort(),U=oe.find(K=>K.materialId===v.id)?.selectedBrand||F[0]||"Generic",P=I.filter(K=>K.brand===U).sort((K,ae)=>(K.rate||0)-(ae.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fn,{id:v.id,checked:N,onCheckedChange:()=>mn(v.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:v.id,className:"font-medium cursor-pointer",children:v.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.code}),N&&F.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Ve,{className:"text-xs",children:"Select Brand:"}),e.jsxs(Bn,{value:U,onValueChange:K=>nr(v.id,K),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:F.map(K=>e.jsx(dn,{value:K,children:K},K))})]})]}),N&&P.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Ve,{className:"text-xs",children:"Select Shop:"}),e.jsxs(Bn,{value:x?.selectedShopId||P[0].shopId,onValueChange:K=>cr(v.id,K),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:P.map(K=>e.jsxs(dn,{value:K.shopId||"",children:[K.shopName," - ",K.rate,"/",v.unit,K.rate===P[0].rate&&" (Best)"]},K.shopId))})]})]})]})]})},v.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(1),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{disabled:oe.length===0,onClick:()=>c(7),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),i===7&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:Ne().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),Ne().map(v=>{const N=oe.find(I=>I.materialId===v.id),x=s.find(I=>I.id===v.id);return e.jsxs("div",{className:Vs("p-3 border rounded grid grid-cols-8 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:v.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:N?.selectedBrand||x?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx($e,{type:"number",value:st[v.id]?.quantity??v.quantity,onChange:I=>ha(v.id,parseInt(I.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:v.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:v.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx($e,{type:"number",value:st[v.id]?.supplyRate??v.rate,onChange:I=>Tr(v.id,parseFloat(I.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((st[v.id]?.quantity??v.quantity)*((st[v.id]?.supplyRate??v.rate)+(st[v.id]?.installRate??0))).toFixed(2)]})]},v.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(6),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{onClick:()=>c(8),disabled:Ne().length===0,children:["Next: Generate BOM"," ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),i===8&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(Wo,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||me()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[X," ft  ",ee," ft (Qty: ",$,")"]})]}),z&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:z})]}),Z()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[ue,'"  ',re,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(v=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:v==="Qty"||v.includes("Rate")||v.includes("Amount")?"right":"left"},children:v},v))})}),e.jsx("tbody",{children:Ne().map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:N+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:v.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:v.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:v.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:v.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:v.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(v.quantity*v.rate).toFixed(2)})]},v.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:oe.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:Ne().reduce((v,N)=>v+N.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",Je().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Be,{onClick:()=>c(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:oa,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(hi,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:ya,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Be,{onClick:()=>G(),disabled:Ne().length===0,children:["Add to BOM ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{c(1),d(""),o(""),j(null),w(null),J(null),q(1),fe(7),le(3),te(6),ne(2),se([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(er,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),i===12&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Qv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Wn})})]}),!Qs||Qs.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Qs||[]).map((v,N)=>{const x=Number(Ls[v.id]??v.supplyRate??v.rate??0),I=Number(Zs[v.id]??v.installRate??0);let F=Number(Rs[v.id]??(v.quantity||0));const _=F*x,U=F*I,P=Pt[v.id]??v.location??"",K=St[v.id]??v.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:N+1}),e.jsx("td",{className:"border px-2 py-1",children:v.productLabel||v.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:P||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:K||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:ys[v.id]??v.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:F}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",x.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",I.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",U.toFixed(2)]})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(kn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Be,{onClick:async()=>{if(Lt.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const v=await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=flooring`,{headers:{}});let N=[];v.ok&&(N=(await v.json()).items||[]);const I=(Qs||[]).map((U,P)=>{const K=Number(Ls[U.id]??U.supplyRate??U.rate??0),ae=Number(Zs[U.id]??U.installRate??0),Fe=Number(Rs[U.id]??(U.quantity||0));return{s_no:P+1,item:U.name,location:Pt[U.id]??U.location??"",description:St[U.id]??U.description??"",unit:ys[U.id]??U.unit??"",qty:Fe,supply_rate:K,install_rate:ae,supply_amount:Fe*K,install_amount:Fe*ae}}).filter(U=>!N.some(P=>P.item===U.item&&P.description===U.description&&P.unit===U.unit));if(I.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await ct("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"flooring",session_id:De,items:I})});const _=await(await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=flooring`,{headers:{}})).json();Hs(_.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(v){console.warn("Failed to save step 12 to DB",v),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Be,{onClick:()=>c(1),children:"Add More Products"}),e.jsx(Be,{onClick:Ga,children:"Export Excel"})]})]},"step-qa-boq"),i===10&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill No"}),e.jsx($e,{value:De,onChange:v=>rt(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill Date"}),e.jsx($e,{type:"date",value:mt,onChange:v=>ls(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Due Date"}),e.jsx($e,{type:"date",value:Ht,onChange:v=>Kt(v.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Name"}),e.jsx($e,{value:Yt,onChange:v=>Cs(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Address"}),e.jsx($e,{value:rs,onChange:v=>Is(v.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Terms & Conditions"}),e.jsx($e,{value:lt,onChange:v=>Gt(v.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Ve,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Mt,onChange:v=>kt(v.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),Ne().map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]}),Mt&&e.jsx($e,{placeholder:"Enter description for selected material",value:St[Mt]||"",onChange:v=>qt(N=>({...N,[Mt]:v.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:Qv,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",De]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:on})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",mt]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",Ht]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",lt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",Yt]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(v=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:v},v))})}),e.jsx("tbody",{children:ve.map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.id&&St[v.id]||v.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(v.quantity||0)*Number(v.rate||0)||0).toFixed(2)})]},v.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:Xe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:vt.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:ut.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:Pe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Bt.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Bt.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Be,{onClick:rr,children:"Export PDF"})]})]}),i===9&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{variant:"destructive",onClick:Yr,disabled:sn.length===0,children:"Delete Selected"}),e.jsx(Be,{type:"button",onClick:fi,disabled:ve.length===0,children:"Save"}),e.jsx(Be,{onClick:async()=>{const v=Ne(at,yt),N=sn.length>0?v.filter(_=>sn.includes(_.rowId||`${_.batchId}-${_.id}`)):v,x=N.map(_=>{const U=_.rowId||`${_.batchId||""}-${_.id}`;return{id:_.id,rowId:U,batchId:_.batchId,name:_.name,unit:_.unit,quantity:yt[U]?.quantity??yt[_.id]?.quantity??_.quantity,supplyRate:yt[U]?.supplyRate??yt[_.id]?.supplyRate??_.rate,installRate:yt[U]?.installRate??yt[_.id]?.installRate??_.installRate??0,shopId:_.shopId,shopName:_.shopName,description:St[U]||St[_.id]||"",location:Pt[U]||Pt[_.id]||"",doorType:_.doorType,panelType:_.panelType,subOption:_.subOption,glazingType:_.glazingType}});if(x.length===0)return;const I=N[0],F={id:`local-${Date.now()}`,estimator:"flooring",bill_no:De,door_type:I?.doorType||Ze?.doorType||Ze?.door_type||b,panel_type:I?.panelType||Ze?.panelType||Ze?.panel_type||p,sub_option:I?.subOption||Ze?.subOption||Ze?.sub_option||B,glazing_type:I?.glazingType||Ze?.glazingType||Ze?.glazing_type||z,qty:Ze?.count||Ze?.qty||$,height:Ze?.height||X,width:Ze?.width||ee,glass_height:Ze?.glassHeight||Ze?.glass_height||ue,glass_width:Ze?.glassWidth||Ze?.glass_width||re,materials:x,subtotal:x.reduce((_,U)=>_+Number(U.quantity||0)*(Number(U.supplyRate||0)+Number(U.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};en(F);try{await yn()}catch{}gn([]),c(11)},disabled:ve.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{className:"text-sm font-semibold",children:"Saved BOQs"}),Gr.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:Gr.map(v=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:v.bill_no||`${v.estimator} - ${v.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(v.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{onClick:()=>ga(v),size:"sm",children:"Load"}),e.jsx(Be,{variant:"destructive",onClick:()=>Jn(v.id),size:"sm",children:"Delete"})]})]},v.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all",checked:(()=>{const v=(i===9?Ne(at,yt):Ne()).map(N=>N.rowId||N.id);return sn.length===v.length&&v.length>0})(),onCheckedChange:qn})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const v=new Map,N=new Map;ve.forEach(F=>{const _=F.doorType||F.door_type||Ze?.doorType||Ze?.door_type||b||"door",U=F.panelType||F.panel_type||Ze?.panelType||Ze?.panel_type||p||"",P=F.subOption||F.sub_option||Ze?.subOption||Ze?.sub_option||"",K=`${_}||${U}||${P}`;if(v.has(K)||v.set(K,[]),v.get(K).push(F),!N.has(K)){const Fe=(v.get(K)||[])[0]?.productLabel||`${U==="panel"?"With Panel":"Without Panel"}  ${_}${P?" ("+P+")":""}`;N.set(K,{label:Fe})}});const x=[];let I=0;for(const[F,_]of v.entries()){const U=_.map(Ye=>Ye.rowId||`${Ye.batchId||""}-${Ye.id}`),P=U.every(Ye=>sn.includes(Ye)),K=`group_${F}`,ae=St[K]||"",Fe=Number(Ps[K]??Ze?.count??Ze?.qty??$??1);x.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{id:`group-${F}`,checked:P,onCheckedChange:()=>{gn(P?Ye=>Ye.filter(tt=>!U.includes(tt)):Ye=>Array.from(new Set([...Ye,...U])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:N.get(F)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx($e,{placeholder:"Group description",value:ae?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:Ye=>qt(tt=>({...tt,[K]:Ye.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",className:"h-8 text-center",value:Ps[K]??Fe,onChange:Ye=>{const tt=Ye.target.value?parseFloat(Ye.target.value):0;wr(Ft=>({...Ft,[K]:tt})),qt(Ft=>{const Zt=(Ft[K]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...Ft,[K]:Zt?Zt+`
Qty: `+tt:"Qty: "+tt}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${F}`));for(const Ye of _){I+=1;const tt=Ye.rowId||`${Ye.batchId}-${Ye.id}`,Ft=Number(Le[tt]?.supplyRate??Le[Ye.id]?.supplyRate??Ye.rate??0),Zt=Number(Le[tt]?.installRate??Le[Ye.id]?.installRate??Ye.installRate??0),as=Ft+Zt,xs=Number(Le[tt]?.quantity??Le[Ye.id]?.quantity??Ye.quantity??0),Gs=xs*as,Rn=St[tt]??St[Ye.id]??Ye.description??"",V=String(Rn).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();x.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:I}),e.jsx("td",{className:"border px-2 py-1",children:Ye.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:St[tt]??St[Ye.id]??V,onChange:ye=>qt(He=>({...He,[tt]:ye.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:ys[tt]??ys[Ye.id]??Ye.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",className:"h-8 text-center",value:xs,onChange:ye=>ha(tt,ye.target.value?parseFloat(ye.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:as,onChange:ye=>{const He=parseFloat(ye.target.value||"0"),it=Number(Le[tt]?.supplyRate??Le[Ye.id]?.supplyRate??Ft),bt=Math.max(0,He-it);Tr(tt,it),$a(tt,bt)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Gs.toFixed(2)]})]},tt))}}return x})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(8),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Be,{onClick:()=>c(10),children:"Finalize PO"}),e.jsxs(Be,{onClick:ya,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const _v="/image.png",MG=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),zr=t=>(t||"").toString().toUpperCase(),uR={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},Ty={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},PG=(t,s)=>{const n=zr(t.product),r=zr(t.name),i=zr(t.category),c=zr(t.subCategory),u=(uR[s]||[s.toUpperCase()]).some(o=>n.includes(o)||r.includes(o)||i.includes(o)||c.includes(o)),d=Ty[s],h=d&&zr(n).includes(zr(d));return u||h},Hp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function kG(){const{shops:t,materials:s,products:n}=ei(),{toast:r}=ma(),[i,c]=S.useState(1),A=typeof window<"u"&&window.location.search.includes("step=11"),[u,d]=S.useState(""),[h,o]=S.useState(""),[m,y]=S.useState(null),[p,j]=S.useState(null),[b,w]=S.useState(null),[B,L]=S.useState(null),[Q,k]=S.useState(null),[z,J]=S.useState(null),[$,q]=S.useState(1),[X,fe]=S.useState(7),[ee,le]=S.useState(3),[ue,te]=S.useState(6),[re,ne]=S.useState(2),[oe,se]=S.useState([]),[xe,Me]=S.useState([]);S.useEffect(()=>{ct("/api/accumulated-products/doors",{headers:{}}).then(v=>v.json()).then(v=>{Me(v.data||[])}).catch(v=>console.error("Failed to load accumulated products",v))},[]),S.useEffect(()=>{if(typeof window<"u"){const N=new URLSearchParams(window.location.search).get("step");if(N){const x=parseInt(N,10);x>=1&&x<=12&&c(x)}}},[]),S.useEffect(()=>{i===12&&ct("/api/accumulated-products/doors",{headers:{}}).then(v=>v.json()).then(v=>{const N=v.data||[];Me(N),console.debug("Restored doors_accumulated_products for Step 12:",N.length)}).catch(v=>console.error("Failed to load accumulated products for Step 12",v))},[i]);const me=v=>{const N=v?.doorType??b,x=v?.panelType??p,I=v?.subOption??B;if(!N)return null;const F=be.find(K=>K.value===N);let _=F?F.label:Ty[N]||N;/door/i.test(_)||(_=`${_} Door`);const U=x==="panel"?"With Panel":"Without Panel",P=I?` - ${I}`:"";return`${U}  ${_}${P}`},Z=()=>{const v=(h||"").toString();if(!b&&!v)return null;const N=v||me(),x=v||Ty[b]||b,I=b?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(b):zr(N).includes("GLASS")||zr(N).includes("STILE");return{label:N,productName:x,requiresGlazing:I}},ge=()=>{const v=(h||"").toString();if(!b&&!v||!s.length)return[];const N=v||(b?Ty[b]:"");let x=[];if(N&&(x=s.filter(F=>{const _=(F.product||"").toString();if(!_||!N)return!1;const U=zr(_),P=zr(N);return U.includes(P)||P.includes(U)})),(!x||x.length===0)&&!v&&(x=b?s.filter(F=>PG(F,b)):s.filter(F=>{const _=(F.product||"").toString();if(!N)return!1;const U=zr(_),P=zr(N);return U.includes(P)||P.includes(U)})),x.length===0)return[];const I=new Map;for(const F of x){const _=`${zr(F.product)}__${zr(F.name)}__${MG(F.code)}`,U=I.get(_);(!U||(F.rate||0)<(U.rate||0))&&I.set(_,F)}return Array.from(I.values())},we={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},pe=["Single Glass","Double Glass"],be=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],je=(v,N)=>{const x=$||1,I=X||7,F=ee||3,_=ue||6,U=re||2,P=Um(I,F),K=v.toLowerCase();let ae=0;return K.includes("frame")||K.includes("door frame")?ae=P*x:K.includes("door")&&(K.includes("panel")||K.includes("shutter")||K.includes("flush")||K.includes("wooden"))?ae=x:K.includes("hinge")?ae=x*3:K.includes("lock")||K.includes("handle")||K.includes("stopper")||K.includes("bolt")?ae=x:K.includes("glass")?ae=Lm(_,U)*x:ae=x,Math.max(1,Math.ceil(ae))},Ne=(v,N)=>{const x=v||oe,I=N||st;return x.map(F=>{let _=Qe.find(as=>as.id===F.materialId);if(_||(_=s.find(as=>as.id===F.materialId)||null),!_)return null;const U=s.find(as=>{const xs=zr(as.product)===zr(_.product),Gs=zr(as.name)===zr(_.name),Rn=as.shopId===F.selectedShopId,V=Hp(as)===(F.selectedBrand||"Generic");return xs&&Gs&&Rn&&V})||_,P=t.find(as=>as.id===F.selectedShopId),K=F.rowId||(F.batchId?`${F.batchId}-${U.id}`:U.id),ae=I[K]||I[U.id]||I[_.id],Fe=je(U.name,U.unit),Ye=ae?.quantity??Fe,tt=ae?.supplyRate??U.rate??0,Ft=ae?.installRate??0,Zt=(Es||[]).find(as=>as.rowId===K||`${as.batchId||""}-${as.id}`===K);return{id:U.id,batchId:F.batchId,rowId:K,name:U.name,quantity:Ye,unit:U.unit,rate:tt,shopId:F.selectedShopId,shopName:P?.name||"Unknown",installRate:Ft,doorType:Zt?.doorType||Zt?.door_type||void 0,panelType:Zt?.panelType||Zt?.panel_type||void 0,subOption:Zt?.subOption||Zt?.sub_option||void 0,glazingType:Zt?.glazingType||Zt?.glazing_type||void 0,productLabel:Zt?.productLabel||void 0}}).filter(F=>F!==null)},Je=()=>Ne().reduce((v,N)=>v+N.quantity*N.rate,0),Qe=ge(),pt=v=>(v?.name||v?.title||v?.label||v?.productName||v?.product||"").toString(),Te=v=>(v?.category||v?.type||v?.group||v?.section||"").toString(),Ce=v=>Dd(v)==="falseceiling",_e=v=>{const N=zr(v);return N.includes("FLUSH")?"flush":N.includes("WPC")?"wpc":N.includes("STILE")||N.includes("ALUMIN")?"stile":N.includes("GLASS PANEL")?"glasspanel":N.includes("GLASS")?"glassdoor":N.includes("WOOD")||N.includes("TEAK")?"wooden":null},de=(n||[]).filter(Ce).slice().sort((v,N)=>{const x=pt(v),I=pt(N);return x.localeCompare(I)}),dt=v=>{const N=pt(v);d(v.id||N),o(N);const x=_e(N);w(x||b),L(null),k(null),J(null),se([]),nt({}),qt({}),gs({}),c(6)},[st,nt]=S.useState({}),[at,Dt]=S.useState([]),[yt,qe]=S.useState({}),[Tt,ns]=S.useState("Concept Trunk Interiors"),[Ts,vs]=S.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[Ns,et]=S.useState("33ASOPS5560M1Z1"),[De,rt]=S.useState(""),[mt,ls]=S.useState(new Date().toISOString().slice(0,10)),[Ht,Kt]=S.useState(""),[lt,Gt]=S.useState("50% Advance and 50% on Completion"),[Yt,Cs]=S.useState(""),[rs,Is]=S.useState(""),[on,ws]=S.useState(""),[St,qt]=S.useState({}),[Pt,gs]=S.useState({}),[Rs,Nn]=S.useState({}),[ys,Ln]=S.useState({}),[Zs,En]=S.useState({}),[Ls,Bs]=S.useState({}),[Ms,Os]=S.useState([]),[ot,Rt]=S.useState([]),[Mt,kt]=S.useState(""),[fs,ms]=S.useState([]),[Ds,js]=S.useState([]),[Lt,Hs]=S.useState([]),[Wr,sr]=S.useState(!1);S.useEffect(()=>{(async()=>{if(De)try{const N=await ct(`/api/estimator-step9-items?session_id=${De}&estimator=falseceiling`,{headers:{}});if(N.ok){const F=await N.json();ms(F.items||[])}const x=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=falseceiling`,{headers:{}});if(x.ok){const F=await x.json();js(F.items||[])}const I=await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=falseceiling`,{headers:{}});if(I.ok){const F=await I.json();Hs(F.items||[])}}catch(N){console.warn("Failed to load data from DB:",N)}})()},[De]),S.useEffect(()=>{if(i===7){const v=Ne(),N={};v.forEach(x=>{N[x.id]={quantity:x.quantity||0,supplyRate:x.rate||0,installRate:0}}),nt(N)}},[i,oe]),S.useEffect(()=>{if(i===9){const v=Ne(at,yt);if(v.length>0){const N=v[0].shopId,x=t.find(I=>I.id===N);if(x){const I=[x.name||"",x.address||"",x.area||"",x.city||"",x.state||"",x.pincode||"",x.gstNo?`GSTIN: ${x.gstNo}`:"",x.phone||""].filter(Boolean);ws(I.join(`
`))}}}},[i,at,yt,oe,t]),S.useEffect(()=>{if(i===9){is();const v=[],N={},x={},I={};if(Es&&Es.length>0)for(const F of Es){const _=F.rowId||`${F.batchId||""}-${F.id}`;v.findIndex(P=>P.materialId===F.id&&P.rowId===_&&(P.batchId||"")===(F.batchId||""))===-1&&(v.push({materialId:F.id,selectedShopId:F.shopId||"",selectedBrand:F.brand||void 0,batchId:F.batchId,rowId:_}),N[_]={quantity:Number(F.quantity||0),supplyRate:Number(F.supplyRate??F.rate??0),installRate:Number(F.installRate||0)},F.description&&(x[_]=F.description),F.location&&(I[_]=F.location))}if(fs&&fs.length>0)for(const F of fs){if(!s.find(Ye=>Ye.id===F.material_id))continue;const U=F.material_id,P=F.row_id||(F.batch_id?`${F.batch_id}-${U}`:U),K=F.shop_id||"",ae=F.brand||void 0;v.findIndex(Ye=>Ye.materialId===U&&(Ye.batchId||"")===(F.batch_id||"")&&(Ye.rowId||"")===P)===-1&&(v.push({materialId:U,selectedShopId:K,selectedBrand:ae,batchId:F.batch_id||(F.row_id?P.replace(`-${U}`,""):void 0)}),N[P]={quantity:Number(F.quantity||0),supplyRate:Number(F.supply_rate||F.rate||0),installRate:Number(F.install_rate||0)},F.description&&(x[P]=F.description),F.location&&(I[P]=F.location))}oe&&oe.length>0&&oe.forEach(F=>{if(v.findIndex(U=>U.materialId===F.materialId&&U.batchId===F.batchId)===-1){v.push(F);const U=s.find(P=>P.id===F.materialId);if(U){const P=F.batchId?`${F.batchId}-${F.materialId}`:F.materialId;N[P]={quantity:st[F.materialId]?.quantity??U.quantity??1,supplyRate:st[F.materialId]?.supplyRate??U.rate??0,installRate:st[F.materialId]?.installRate??0}}}}),v.length>0&&Dt(v),Object.keys(N).length>0&&qe(N),Object.keys(x).length>0&&qt(F=>({...F,...x})),Object.keys(I).length>0&&gs(F=>({...F,...I}))}},[i,oe,fs]),S.useEffect(()=>{i===11&&(async()=>{if(De)try{const N=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=falseceiling`,{headers:{}});if(N.ok){const I=(await N.json()).items||[],F={},_={},U={},P={};I.forEach(K=>{const ae=s.find(Fe=>Fe.name===K.item);ae&&(F[ae.id]=Number(K.supply_rate||0),_[ae.id]=Number(K.install_rate||0),U[ae.id]=Number(K.qty||0),P[ae.id]=K.unit||"")}),Bs(K=>({...K,...F})),En(K=>({...K,..._})),Nn(K=>({...K,...U})),Ln(K=>({...K,...P}))}}catch(N){console.warn("Failed to load step 11 data:",N)}})()},[i,De,Ds]);const ds=S.useRef(null);S.useEffect(()=>{is().catch(()=>{})},[]),S.useEffect(()=>{(async()=>{if(De)try{const N=await ct(`/api/estimator-step9-items?session_id=${De}&estimator=falseceiling`,{headers:{}});if(N.ok){const x=await N.json(),I=x.items.map(F=>({id:F.material_id,rowId:F.row_id,batchId:F.batch_id,name:F.name,unit:F.unit,quantity:F.quantity,supplyRate:F.supply_rate,installRate:F.install_rate,shopId:F.shop_id,shopName:F.shop_name,description:F.description,location:F.location,doorType:F.door_type,panelType:F.panel_type,subOption:F.sub_option,glazingType:F.glazing_type}));if(rn(I),x.items.length>0){const F=x.items[0];us({doorType:F.door_type,panelType:F.panel_type,subOption:F.sub_option,glazingType:F.glazing_type,count:F.qty,height:F.height,width:F.width,glassHeight:F.glass_height,glassWidth:F.glass_width,subtotal:F.subtotal,sgst:F.sgst,cgst:F.cgst,round_off:F.round_off,grand_total:F.grand_total})}}}catch(N){console.warn("Failed to load step 9 from DB",N)}})()},[De]),S.useEffect(()=>(ds.current&&clearTimeout(ds.current),ds.current=setTimeout(async()=>{new Date().toISOString();try{if(!De)return;const v=Ne().map((N,x)=>{const I=N.rowId||(N.batchId?`${N.batchId}-${N.id}`:N.id);return{estimator:"falseceiling",session_id:De,s_no:x+1,row_id:String(I),batch_id:N.batchId||null,material_id:N.id,name:N.name,unit:N.unit,quantity:Number(st[N.id]?.quantity??N.quantity??0),supply_rate:Number(st[N.id]?.supplyRate??N.rate??0),install_rate:Number(st[N.id]?.installRate??0),shop_id:N.shopId||"",shop_name:N.shopName||"",description:St[N.id]||"",location:Pt[N.id]||"",door_type:b,panel_type:p,sub_option:B,glazing_type:z,qty:$,height:X,width:ee,glass_height:ue,glass_width:re}});await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"falseceiling",session_id:De,items:v})})}catch{}},800),()=>{ds.current&&clearTimeout(ds.current)}),[oe,st,St,Pt,b,p,B,z,$,X,ee,ue,re,De]);const mn=v=>{const N=Qe.find(K=>K.id===v);if(!N)return;if(oe.find(K=>K.materialId===v)){se(K=>K.filter(ae=>ae.materialId!==v));return}const I=s.filter(K=>zr(K.product)===zr(N.product)&&zr(K.name)===zr(N.name)).map(K=>({brand:Hp(K),shopId:K.shopId,rate:K.rate||0})),_=Array.from(new Set(I.map(K=>K.brand))).sort()[0]||"Generic",P=I.filter(K=>K.brand===_).sort((K,ae)=>K.rate-ae.rate)[0];P?.shopId&&se(K=>[...K,{materialId:v,selectedShopId:P.shopId,selectedBrand:_}])},cr=(v,N)=>{se(x=>x.map(I=>I.materialId===v?{...I,selectedShopId:N}:I))},nr=(v,N)=>{const x=Qe.find(_=>_.id===v);if(!x)return;const F=s.filter(_=>zr(_.product)===zr(x.product)&&zr(_.name)===zr(x.name)).map(_=>({brand:Hp(_),shopId:_.shopId,rate:_.rate||0})).filter(_=>_.brand===N).sort((_,U)=>_.rate-U.rate)[0]?.shopId||"";se(_=>_.map(U=>U.materialId===v?{...U,selectedBrand:N,selectedShopId:F||U.selectedShopId}:U))},[sn,gn]=S.useState([]),qn=()=>{const v=(i===9?Ne(at,yt):Ne()).map(N=>N.rowId||N.id);gn(N=>N.length===v.length?[]:v)},Yr=async()=>{if(sn.length!==0){try{const v=[],N=[];for(const x of sn){const I=Es?.find(F=>`${F.batchId||""}-${F.id}`===x);if(I&&I.id){const F=fs.find(_=>_.id===I.id);F&&v.push(F)}else{const F=at.find(_=>`${_.batchId||""}-${_.materialId}`===x);F&&N.push(F)}}if(v.length>0&&De&&(await ct("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:De,estimator:"falseceiling",items:v})}),rn(x=>x?x.filter(I=>!v.some(F=>F.id===I.id)):null)),N.length>0&&Dt(x=>x.filter(I=>!N.some(F=>`${F.batchId||""}-${F.materialId}`==`${I.batchId||""}-${I.materialId}`))),Dt(x=>x.filter(I=>!sn.includes(`${I.batchId||""}-${I.materialId}`))),qe(x=>{const I={...x};return sn.forEach(F=>delete I[F]),I}),De){const I=await(await ct(`/api/estimator-step9-items?session_id=${De}&estimator=falseceiling`,{headers:{}})).json();ms(I.items||[])}r({title:"Success",description:`${sn.length} item(s) deleted successfully!`})}catch(v){console.warn("Failed to delete items",v),r({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}gn([])}},[Gr,ra]=S.useState([]),gr=S.useRef(""),[Ks,en]=S.useState(null),[Es,rn]=S.useState(null),[Ps,wr]=S.useState({}),[Ze,us]=S.useState(null),is=async()=>{try{const v=await ct("/api/boq");if(v.status===401){ra([]),gr.current!=="401"&&(gr.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!v.ok){const I=await v.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${I||v.status}`)}if(!(v.headers.get("content-type")||"").includes("application/json")){const I=await v.text().catch(()=>"");console.warn("/api/boq returned non-json:",I),ra([]);return}const x=await v.json();ra(x.boqs||[]),gr.current=""}catch(v){console.error("fetchSavedBoqs",v);const N=String(v?.message||v||"");if(!N)return;gr.current!==N&&(gr.current=N,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},yn=async()=>{try{if(!De)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const v={estimator:"falseceiling",billNo:De,doorType:b,panelType:p,subOption:B,glazingType:z,qty:$,height:X,width:ee,glassHeight:ue,glassWidth:re,materials:Es&&Es.length>0?Es:Ne(),subtotal:Xe,sgst:vt,cgst:ut,roundOff:Pe,grandTotal:Bt},N=await ct("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!N.ok){const F=await N.text().catch(()=>"");throw new Error(F||"save failed")}const x=N.headers.get("content-type")||"";let I=null;if(x.includes("application/json"))I=await N.json();else{const F=await N.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",F),I={boq:null}}return await is(),en(I?.boq||I?.boqs?.[0]||null),!0}catch(v){return console.error("handleSaveBOQ",v),!1}},Jn=async v=>{try{if(!(await ct(`/api/boq/${v}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await is()}catch(N){console.error("handleDeleteSavedBoq",N)}},zn=()=>{c(1),w(null),j(null),L(null),k(null),q(1),fe(7),le(3),te(0),ne(0),Os([]),Nn({}),qt({}),gs({}),Ln({}),Bs({}),En({}),wr({}),en(null)},ua=async()=>{sr(!0);try{let v=Ds||[];if(De)try{const _=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=falseceiling`);_.ok&&(v=(await _.json()).items||[],js(v))}catch(_){console.warn("Failed to refresh step11 items before save",_)}const N=ps.map(_=>({estimator:"falseceiling",session_id:De,group_key:(_.groupKey||`${_.doorType||"door"}||${_.panelType||""}||${_.subOption||""}`)+"::"+(_.name||""),group_id:_.groupId||`group_${_.groupKey||""}`,item_name:_.name,unit:_.unit,quantity:_.quantity,location:_.location||"",description:_.description||"",supply_rate:Ls[_.id]||_.supplyRate||0,install_rate:Zs[_.id]||_.installRate||0,supply_amount:(_.quantity||0)*(Ls[_.id]||_.supplyRate||0),install_amount:(_.quantity||0)*(Zs[_.id]||_.installRate||0),supply_subtotal:ps.reduce((U,P)=>U+(P.quantity||0)*(Ls[P.id]||P.supplyRate||0),0),install_subtotal:ps.reduce((U,P)=>U+(P.quantity||0)*(Zs[P.id]||P.installRate||0),0),sgst:vt,cgst:ut,round_off:Pe,grand_total:ps.reduce((U,P)=>U+(P.quantity||0)*((Ls[P.id]||P.supplyRate||0)+(Zs[P.id]||P.installRate||0)),0)+vt+ut+Pe})),x=new Set((v||[]).map(_=>_.group_key||_.groupKey)),I=N.filter(_=>!x.has(_.group_key));if(I.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),sr(!1),!0;const F=await ct("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:I})});if(!F.ok){const _=await F.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${_||F.statusText}`,variant:"destructive"}),sr(!1),!1}try{const _=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=falseceiling`);if(_.ok){const U=await _.json();js(U.items||[])}}catch(_){console.warn("Failed to reload step11 items after save",_)}return Me([]),r({title:"Success",description:"Step 11 saved to database."}),sr(!1),!0}catch(v){return console.error("handleSaveAccumulatedBOQ",v),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),sr(!1),!1}},ga=v=>{if(rt(v.bill_no||""),w(v.door_type||null),j(v.panel_type||null),L(v.sub_option||null),J(v.glazing_type||null),q(v.qty||1),fe(v.height||7),le(v.width||3),te(v.glass_height||6),ne(v.glass_width||2),Array.isArray(v.materials)){const N=v.materials.map(x=>({materialId:x.id,selectedShopId:x.shopId||x.shop_id||x.shopId||"",selectedBrand:x.shopName||x.brand||x.selectedBrand||void 0}));se(N.filter(Boolean))}en(v)},ha=(v,N)=>{if(i===9){qe(x=>({...x,[v]:{...x[v]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(N))}}));return}nt(x=>({...x,[v]:{...x[v]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(N))}}))},Tr=(v,N)=>{if(i===9){qe(x=>({...x,[v]:{...x[v]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(N)),installRate:x[v]?.installRate||0}}));return}nt(x=>({...x,[v]:{...x[v]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(N)),installRate:x[v]?.installRate||0}}))},$a=(v,N)=>{if(i===9){qe(x=>({...x,[v]:{...x[v]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(N)),supplyRate:x[v]?.supplyRate||0}}));return}nt(x=>({...x,[v]:{...x[v]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(N)),supplyRate:x[v]?.supplyRate||0}}))},ya=()=>{const v=document.getElementById("boq-pdf");if(!v){alert("BOQ content not found");return}setTimeout(()=>{Qd().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:N=>N.className?.toString().includes("bg-")||N.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(v).save().catch(N=>{console.error("PDF Export Error:",N),alert("PDF export failed. Check console.")})},100)},rr=async()=>{const v=document.getElementById("boq-final-pdf");if(!v){alert("Final BOQ content not found");return}const N=(await Yc(async()=>{const{default:x}=await Promise.resolve().then(()=>bu);return{default:x}},void 0)).default;N().set({margin:10,filename:`BOQ-${De||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(v).save()},oa=()=>{const v=Ne(),N=Z(),x=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${p==="panel"?"With Panel":"Without Panel"} - ${N?.label}`,`Dimensions: ${X}ft  ${ee}ft (Count: ${$})`,...z?[`Glazing: ${z}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];v.forEach((P,K)=>{const ae=P.quantity*P.rate;x.push(`${K+1},"${P.name}","${P.unit}",${P.quantity},${P.rate},"${P.shopName}",${ae}`)}),x.push("",`TOTAL COST,,,${Je().toFixed(2)}`);const I=x.join(`
`),F=new Blob([I],{type:"text/csv"}),_=window.URL.createObjectURL(F),U=document.createElement("a");U.href=_,U.download=`BOQ-FalseCeiling-${new Date().getTime()}.csv`,U.click(),URL.revokeObjectURL(_)},Ga=()=>{const v=ps||[],N=[];N.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),v.forEach((U,P)=>{const K=Number(U.supplyRate??U.rate??0),ae=Number(U.installRate??0),Fe=Number(U.quantity||0),Ye=Fe*K,tt=Fe*ae,Ft=(U.location||Pt[U.id]||"").toString().replace(/"/g,'""'),Zt=(U.description||St[U.id]||U.name||"").toString().replace(/"/g,'""'),Gs=(me({doorType:U.doorType||U.door_type,panelType:U.panelType||U.panel_type,subOption:U.subOption||U.sub_option,glazingType:U.glazingType||U.glazing_type})||U.name||"").replace(/"/g,'""');N.push(`${P+1},"${Gs}","${Ft}","${Zt}",${U.unit},${Fe},${K.toFixed(2)},${ae.toFixed(2)},${Ye.toFixed(2)},${tt.toFixed(2)}`)});const x=N.join(`
`),I=new Blob([x],{type:"text/csv"}),F=window.URL.createObjectURL(I),_=document.createElement("a");_.href=F,_.download=`BOQ-FalseCeiling-Step11-${new Date().getTime()}.csv`,_.click(),URL.revokeObjectURL(F)},fi=async()=>{const v=Ne(at,yt).map(U=>{const P=U.rowId||`${U.batchId}-${U.id}`;return{id:U.id,rowId:P,batchId:U.batchId||null,name:U.name,productLabel:U.productLabel||null,product_label:U.productLabel||null,unit:U.unit,quantity:yt[P]?.quantity??yt[U.id]?.quantity??U.quantity,supplyRate:yt[P]?.supplyRate??yt[U.id]?.supplyRate??U.rate,installRate:yt[P]?.installRate??yt[U.id]?.installRate??U.installRate??0,shopId:U.shopId,shopName:U.shopName,description:St[P]||St[U.id]||"",location:Pt[P]||Pt[U.id]||"",doorType:U.doorType,panelType:U.panelType,subOption:U.subOption,glazingType:U.glazingType,isSaved:U.isSaved||!1}}),N=v.filter(U=>!U.isSaved);if(N.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let x=De;(!x||x.trim()==="")&&(x=`DOOR-${Date.now()}`,rt(x));const I=Ze||(()=>{const U=v.reduce((Ye,tt)=>Ye+Number(tt.quantity||0)*(Number(tt.supplyRate||0)+Number(tt.installRate||0)),0),P=U*.09,K=U*.09,ae=Math.round(U+P+K)-(U+P+K),Fe=U+P+K+ae;return{subtotal:U,sgst:P,cgst:K,round_off:ae,grand_total:Fe}})(),F={id:`local-${Date.now()}`,estimator:"falseceiling",bill_no:x,door_type:Ze?.doorType||Ze?.door_type||b,panel_type:Ze?.panelType||Ze?.panel_type||p,sub_option:Ze?.subOption||Ze?.sub_option||B,glazing_type:Ze?.glazingType||Ze?.glazing_type||z,qty:Ze?.count||Ze?.qty||$,height:Ze?.height||X,width:Ze?.width||ee,glass_height:Ze?.glassHeight||Ze?.glass_height||ue,glass_width:Ze?.glassWidth||Ze?.glass_width||re,materials:v,subtotal:I.subtotal,sgst:I.sgst,cgst:I.cgst,round_off:I.round_off,grand_total:I.grand_total,created_at:new Date().toISOString()};en(F),rn(v);try{us(U=>({...U||{},...I}))}catch{}const _=N.map((U,P)=>({estimator:"falseceiling",session_id:x,s_no:P+1,row_id:String(U.rowId||`${U.batchId||""}-${U.id}`),batch_id:U.batchId||null,material_id:U.id,name:U.name,unit:U.unit,quantity:Number(U.quantity||0),supply_rate:Number(U.supplyRate||0),install_rate:Number(U.installRate||0),shop_id:U.shopId||"",shop_name:U.shopName||"",description:U.description||"",location:U.location||"",door_type:U.doorType||Ze?.doorType||Ze?.door_type||b||null,panel_type:U.panelType||Ze?.panelType||Ze?.panel_type||p||null,sub_option:U.subOption||Ze?.subOption||Ze?.sub_option||B||null,glazing_type:U.glazingType||Ze?.glazingType||Ze?.glazing_type||z||null,qty:Ze?.count||Ze?.qty||$,height:Ze?.height||X,width:Ze?.width||ee,glass_height:Ze?.glassHeight||Ze?.glass_height||ue,glass_width:Ze?.glassWidth||Ze?.glass_width||re,subtotal:I.subtotal,sgst:I.sgst,cgst:I.cgst,round_off:I.round_off,grand_total:I.grand_total}));try{await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"falseceiling",session_id:x,items:_})});const P=await(await ct(`/api/estimator-step9-items?session_id=${x}&estimator=falseceiling`,{headers:{}})).json();ms(P.items||[]);const K=(Es||[]).map(ae=>N.some(Ye=>ae.rowId===Ye.rowId||`${ae.batchId||""}-${ae.id}`==`${Ye.batchId||""}-${Ye.id}`)?{...ae,isSaved:!0}:ae);rn(K),r({title:"Success",description:`${N.length} new material(s) saved successfully to database!`})}catch(U){console.warn("Failed to save step 9 to DB",U),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},xa=v=>{let N=5381;for(let x=0;x<v.length;x+=1)N=(N<<5)+N^v.charCodeAt(x);return Math.abs(N>>>0).toString(36)},ie=()=>{const v=JSON.stringify({doorType:b,panelType:p,subOption:B,glazingType:z,count:$,height:X,width:ee,glassHeight:ue,glassWidth:re,selectedMaterials:(oe||[]).map(N=>({materialId:N.materialId,selectedShopId:N.selectedShopId,selectedBrand:N.selectedBrand})),editable:Object.keys(st||{}).sort().map(N=>({id:N,...st[N]}))});return`batch-${xa(v)}`},G=()=>{const v=ie(),N=Array.from(new Map((oe||[]).map(ae=>[ae.materialId,ae])).values()),x=Ne(N,st).map(ae=>({id:ae.id,rowId:`${v}-${ae.id}`,batchId:v,name:ae.name,unit:ae.unit,quantity:st[ae.id]?.quantity??ae.quantity,supplyRate:st[ae.id]?.supplyRate??ae.rate,installRate:st[ae.id]?.installRate??0,shopId:ae.shopId,shopName:ae.shopName,description:St[ae.id]||"",location:Pt[ae.id]||"",doorType:b,productLabel:h||me(),panelType:p,subOption:B,glazingType:z,isSaved:!1})),I=Array.from(new Map(x.map(ae=>[ae.id,ae])).values());if(I.length===0){c(9);return}const U=[...(Es||[]||[]).filter(ae=>ae.batchId!==v),...I],P=Array.from(new Map(U.map(ae=>[ae.rowId||`${ae.batchId}-${ae.id}`,ae])).values());rn(P),Dt(N.map(ae=>({materialId:ae.materialId,selectedShopId:ae.selectedShopId,selectedBrand:ae.selectedBrand,batchId:v})));const K={};P.forEach(ae=>{const Fe=ae.rowId||`${ae.batchId}-${ae.id}`;K[Fe]={quantity:Number(ae.quantity||0),supplyRate:Number(ae.supplyRate||ae.rate||0),installRate:Number(ae.installRate||0)}}),qe(K);try{const ae=Je(),Fe=ae*.09,Ye=ae*.09,tt=Math.round(ae+Fe+Ye)-(ae+Fe+Ye),Ft=ae+Fe+Ye+tt;us({doorType:b,panelType:p,subOption:B,glazingType:z,count:$,height:X,width:ee,glassHeight:ue,glassWidth:re,subtotal:ae,sgst:Fe,cgst:Ye,round_off:tt,grand_total:Ft})}catch{}c(9)},ve=i===9||i===11?Es||[]:Ne(),Le=i===9?yt:st,Xe=ve.reduce((v,N)=>v+N.quantity*((Le[N.id]?.supplyRate??N.rate)+(Le[N.id]?.installRate??N.installRate??0)),0),vt=Xe*.09,ut=Xe*.09,Pe=Math.round(Xe+vt+ut)-(Xe+vt+ut),Bt=Xe+vt+ut+Pe,_t=xe.length>0?xe.flatMap(v=>v.materials||[]):Es&&Es.length>0?Es:ve&&ve.length>0?ve:Ks&&Ks.materials&&Ks.materials.length>0?Array.isArray(Ks.materials)?Ks.materials:JSON.parse(Ks.materials||"[]"):ve,xn=(()=>{const v=new Map;for(const x of _t||[]){const I=x.productLabel||x.doorType||x.door_type||Ze?.doorType||Ze?.door_type||b||"door",F=x.panelType||x.panel_type||Ze?.panelType||Ze?.panel_type||p||"",_=x.subOption||x.sub_option||Ze?.subOption||Ze?.sub_option||"",U=`${I}||${F}||${_}`;v.has(U)||v.set(U,[]),v.get(U).push(x)}const N=[];for(const[x,I]of v.entries()){const[F,_,U]=x.split("||"),P=`group_${x}`,K=St[P]||"",ae=Pt[P]||"";let Fe=Number(Ps[P]??Ze?.count??Ze?.qty??$??1);const Ye=String(K).match(/Qty:\s*(\d+(?:\.\d+)?)/);Ye&&(Ps[P]===void 0||Ps[P]===null)&&(Fe=Number(Ye[1]));const tt=I.reduce((Rn,V)=>Rn+Number(V.quantity||0)*Number(V.supplyRate??V.rate??0),0),Ft=Fe>0?tt/Fe:tt,Zt=I.reduce((Rn,V)=>Rn+Number(V.quantity||0)*Number(V.installRate??0),0),as=Fe>0?Zt/Fe:Zt,xs=I[0]&&I[0].productLabel||me({doorType:F,panelType:_,subOption:U})||F,Gs=String(K).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();N.push({id:P,groupKey:x,name:xs,location:ae||"",description:Gs||"",unit:"pcs",quantity:Fe,supplyRate:Number(Ft||0),installRate:Number(Zs[P]??as??0),supplyAmount:Number(Ft*Fe||0),installAmount:Number((Zs[P]??as)*Fe||0)})}return N})();(Ds||[]).filter(v=>v.item||v.item_name).map((v,N)=>{const x=v.group_key||v.groupKey||`${v.door_type||v.doorType||"door"}||${v.panel_type||v.panelType||""}||${v.sub_option||v.subOption||""}`;return{id:v.id,groupKey:x,name:v.productLabel||v.item_name||v.item||v.name||v.door_label||v.doorType||v.door_type||"Door",location:v.location||"",description:v.description||"",unit:v.unit||"pcs",quantity:Number(v.quantity??v.qty??1),supplyRate:Number(v.supply_rate??v.supplyRate??0),installRate:Number(v.install_rate??v.installRate??0),supplyAmount:Number(v.supply_amount??0),installAmount:Number(v.install_amount??0),doorType:v.door_type||v.doorType,panelType:v.panel_type||v.panelType,subOption:v.sub_option||v.subOption}});const ps=(xe.length===0?xn.filter(v=>!(Ds||[]).some(x=>(x.group_key||x.groupKey||`${x.door_type||""}||${x.panel_type||""}||${x.sub_option||""}`)===v.groupKey)):xe.map((v,N)=>({id:`accumulated_${N}`,groupKey:`${v.doorType||"door"}||${v.panelType||""}||${v.subOption||""}`,name:v.productLabel||v.materials?.[0]?.productLabel||v.doorLabel||me({doorType:v.doorType,panelType:v.panelType,subOption:v.subOption})||v.doorType,location:v.location||"",description:v.description||"",unit:"pcs",quantity:v.count||1,supplyRate:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.supplyRate??I.rate??0),0)||0,installRate:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.installRate??0),0)||0,supplyAmount:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.supplyRate??I.rate??0),0)||0,installAmount:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.installRate??0),0)||0})))||[],Qs=ps.filter(v=>ot.includes(v.id)),Qn=ps.reduce((v,N)=>{const x=Number(Rs[N.id]??(N.quantity||0)),I=Number(Ls[N.id]??N.supplyRate??N.rate??0);return v+x*I},0);ps.reduce((v,N)=>{const x=Number(Rs[N.id]??(N.quantity||0));return v+x*Number(N.installRate||0)},0);const kn=Qs.reduce((v,N)=>{const x=Number(Rs[N.id]??(N.quantity||0)),I=Number(Ls[N.id]??N.supplyRate??N.rate??0);return v+x*I},0);Ks&&Ks.bill_no;const Wn=Ks&&Ks.created_at?new Date(Ks.created_at).toISOString().slice(0,10):mt,Xr=v=>{if(!v)return!1;const N=(v.name||"").toString().trim(),x=Number(v.quantity||0),I=Number(v.supplyRate??v.rate??0),F=Number(v.installRate??0),_=(v.description||"").toString().trim(),U=(v.location||"").toString().trim();return!!N||x>0||I>0||F>0||!!_||!!U};return(xe||[]).map(v=>{const N=(v.materials||[]).filter(Xr),x=N.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.supplyRate??_.rate??0),0),I=N.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.installRate??0),0);return{...v,materials:N,supplySubtotal:x,installSubtotal:I,subtotal:x+I}}).filter(v=>(v.materials||[]).length>0),e.jsx(ka,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"False Ceiling Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(ks,{className:"border-border/50",children:e.jsx(Ws,{className:"pt-8 min-h-96",children:e.jsxs(Fl,{mode:"wait",children:[i===1&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select False Ceiling Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:de.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No false ceiling products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Door."})]}):e.jsx("div",{className:"grid gap-3",children:de.map(v=>{const N=pt(v),x=(v?.id||N).toString(),I=u===x;return e.jsx(Be,{variant:I?"default":"outline",onClick:()=>dt(v),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:N||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Te(v)})]})},x)})})})]},"step-select-product"),i===11&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:_v,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Wn})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all-groups",checked:(()=>{const v=(ps||[]).map(N=>N.id);return v.length>0&&v.every(N=>Ms.includes(N))})(),onCheckedChange:v=>{Os(v?(ps||[]).map(N=>N.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(ps||[]).map((v,N)=>{const x=Number(Ls[v.id]??v.supplyRate??v.rate??0),I=Number(Zs[v.id]??v.installRate??0);let F=Number(Rs[v.id]??(v.quantity||0));const _=F*x,U=F*I;return Pt[v.id]??v.location,St[v.id]??v.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{checked:Ms.includes(v.id),onCheckedChange:()=>{Os(P=>P.includes(v.id)?P.filter(K=>K!==v.id):[...P,v.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:N+1}),e.jsx("td",{className:"border px-2 py-1",children:v.productLabel||v.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx($e,{value:Pt[v.id]??v.location??"",onChange:P=>gs(K=>({...K,[v.id]:P.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:St[v.id]??v.description??"",onChange:P=>qt(K=>({...K,[v.id]:P.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{value:ys[v.id]??v.unit??"",onChange:P=>Ln(K=>({...K,[v.id]:P.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",value:F,onChange:P=>Nn(K=>({...K,[v.id]:Number(P.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:x,onChange:P=>Bs(K=>({...K,[v.id]:Number(P.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:I,onChange:P=>En(K=>({...K,[v.id]:Number(P.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",U.toFixed(2)]})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Qn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!A&&e.jsx(Be,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Be,{variant:"destructive",disabled:Ms.length===0,onClick:async()=>{if(console.log("Delete selected:",Ms),Ds.length>0&&De)try{await ct("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Ms,estimator:"falseceiling"})});const v=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=falseceiling`,{headers:{}});if(v.ok){const N=await v.json();js(N.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(v){console.warn("Failed to delete step 11 from DB",v),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(xe.length===0)if(Ks){console.log("Deleting from saved BOQ");const v=Ms.map(F=>F.replace("group_","")),N=Array.isArray(Ks.materials)?Ks.materials:JSON.parse(Ks.materials||"[]");console.log("Current materials:",N.length);const x=N.filter(F=>{const _=F.doorType||F.door_type||Ze?.doorType||Ze?.door_type||b||"door",U=F.panelType||F.panel_type||Ze?.panelType||Ze?.panel_type||p||"",P=F.subOption||F.sub_option||Ze?.subOption||Ze?.sub_option||B||"",K=`${_}||${U}||${P}`,ae=v.includes(K);return console.log("Checking material:",F.id||F.name,K,"match:",ae),!ae});console.log("Filtered materials:",x.length);const I={...Ks,materials:x};en(I),ct("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}).then(()=>console.log("Saved updated BOQ")).catch(F=>console.error("Error saving BOQ:",F))}else{console.log("Deleting from Step 11 saved materials");const v=Ms.map(I=>I.replace("group_","")),x=((Es&&Es.length>0?Es:ve)||[]).filter(I=>{const F=I.doorType||I.door_type||Ze?.doorType||Ze?.door_type||b||"door",_=I.panelType||I.panel_type||Ze?.panelType||Ze?.panel_type||p||"",U=I.subOption||I.sub_option||Ze?.subOption||Ze?.sub_option||B||"",P=`${F}||${_}||${U}`;return!v.includes(P)});rn(x)}else if(xe.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",xe.length);let v;if(Ms.some(N=>N.startsWith("accumulated_"))){const N=Ms.filter(x=>x.startsWith("accumulated_")).map(x=>parseInt(x.replace("accumulated_",""))).sort((x,I)=>I-x);v=[...xe],N.forEach(x=>{x>=0&&x<v.length&&v.splice(x,1)})}else{const N=Ms.map(x=>x.replace("group_",""));v=xe.filter(x=>{const I=`${x.doorType||"door"}||${x.panelType||""}||${x.subOption||""}`,F=N.includes(I);return console.log("Checking product:",x.id,I,"match:",F),!F})}console.log("Accumulated products after:",v.length),Me(v),ct("/api/accumulated-products/doors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:v})}).catch(N=>console.error("Failed to save accumulated products after delete",N))}Os([])},children:"Delete Selected"}),e.jsx(Be,{onClick:zn,children:"Add Product"}),e.jsx(Be,{onClick:ua,disabled:Wr,children:"Save"}),e.jsx(Be,{onClick:async()=>{Rt(Ms);const v=(Qs||[]).map((N,x)=>{const I=Number(Ls[N.id]??N.supplyRate??N.rate??0),F=Number(Zs[N.id]??N.installRate??0);let _=Number(Rs[N.id]??(N.quantity||0));return{s_no:x+1,item:N.name,location:Pt[N.id]??N.location??"",description:St[N.id]??N.description??"",unit:ys[N.id]??N.unit??"",qty:_,supply_rate:I,install_rate:F,supply_amount:_*I,install_amount:_*F}});try{const N=await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=falseceiling`,{headers:{}});let x=[];N.ok&&(x=(await N.json()).items||[]);const I=v.filter(U=>!x.some(P=>P.item===U.item&&P.description===U.description&&P.unit===U.unit));if(I.length===0){c(12);return}await ct("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"falseceiling",session_id:De,items:I})});const _=await(await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=falseceiling`,{headers:{}})).json();Hs(_.items||[]),r({title:"Success",description:`${I.length} new material(s) saved successfully to database!`}),c(12)}catch(N){console.warn("Failed to save step 12 to DB",N),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),i===4&&b&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(we[b]||[]).map(v=>e.jsx(Be,{onClick:()=>{L(v),k(null)},className:`w-full text-black ${B===v?"bg-cyan-500":"bg-white"}`,children:v},v))}),b==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:pe.map(v=>e.jsx(Be,{onClick:()=>k(v),className:`w-full text-black ${Q===v?"bg-cyan-500":"bg-white"}`,children:v},v))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(3),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{onClick:()=>c(5),disabled:!B||b==="flush"&&B==="With Vision Panel"&&!Q,children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),i===5&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"count",children:"Count"}),e.jsx($e,{id:"count",type:"number",placeholder:"1",value:$||"",onChange:v=>q(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"height",children:"Height"}),e.jsx($e,{id:"height",type:"number",placeholder:"7",value:X||"",onChange:v=>fe(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"width",children:"Width"}),e.jsx($e,{id:"width",type:"number",placeholder:"3",value:ee||"",onChange:v=>le(v.target.value?parseFloat(v.target.value):null)})]})]}),Z()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(Ve,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx($e,{id:"glassHeight",type:"number",placeholder:"72",value:ue||"",onChange:v=>te(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx($e,{id:"glassWidth",type:"number",placeholder:"24",value:re||"",onChange:v=>ne(v.target.value?parseFloat(v.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(Z()?.requiresGlazing?4:3),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{disabled:!$||!X||!ee||Z()?.requiresGlazing&&(!ue||!re),onClick:()=>c(6),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),i===6&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Z()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Fn,{id:"select-all-materials",checked:oe.length===Qe.length&&Qe.length>0,onCheckedChange:v=>{if(v){const N=Qe.map(x=>{const I=s.filter(P=>zr(P.product)===zr(x.product)&&zr(P.name)===zr(x.name)).map(P=>({id:P.id,brand:Hp(P),shopId:P.shopId,rate:P.rate,unit:P.unit,shopName:t.find(K=>K.id===P.shopId)?.name||"Unknown"})),_=Array.from(new Set(I.map(P=>P.brand))).sort()[0]||"Generic",U=I.filter(P=>P.brand===_).sort((P,K)=>(P.rate||0)-(K.rate||0));return{materialId:x.id,selectedBrand:_,selectedShopId:U[0]?.shopId||""}});se(N)}else se([])}}),e.jsx(Ve,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Qe.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",b||h||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(b?uR[b]||[b]:[h||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(v=>v.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Qe.map(v=>{const N=oe.some(K=>K.materialId===v.id),x=oe.find(K=>K.materialId===v.id),I=s.filter(K=>zr(K.product)===zr(v.product)&&zr(K.name)===zr(v.name)).map(K=>({id:K.id,brand:Hp(K),shopId:K.shopId,rate:K.rate,unit:K.unit,shopName:t.find(ae=>ae.id===K.shopId)?.name||"Unknown"})),F=Array.from(new Set(I.map(K=>K.brand))).sort(),U=oe.find(K=>K.materialId===v.id)?.selectedBrand||F[0]||"Generic",P=I.filter(K=>K.brand===U).sort((K,ae)=>(K.rate||0)-(ae.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fn,{id:v.id,checked:N,onCheckedChange:()=>mn(v.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:v.id,className:"font-medium cursor-pointer",children:v.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.code}),N&&F.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Ve,{className:"text-xs",children:"Select Brand:"}),e.jsxs(Bn,{value:U,onValueChange:K=>nr(v.id,K),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:F.map(K=>e.jsx(dn,{value:K,children:K},K))})]})]}),N&&P.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Ve,{className:"text-xs",children:"Select Shop:"}),e.jsxs(Bn,{value:x?.selectedShopId||P[0].shopId,onValueChange:K=>cr(v.id,K),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:P.map(K=>e.jsxs(dn,{value:K.shopId||"",children:[K.shopName," - ",K.rate,"/",v.unit,K.rate===P[0].rate&&" (Best)"]},K.shopId))})]})]})]})]})},v.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(1),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{disabled:oe.length===0,onClick:()=>c(7),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),i===7&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:Ne().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),Ne().map(v=>{const N=oe.find(I=>I.materialId===v.id),x=s.find(I=>I.id===v.id);return e.jsxs("div",{className:Vs("p-3 border rounded grid grid-cols-8 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:v.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:N?.selectedBrand||x?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx($e,{type:"number",value:st[v.id]?.quantity??v.quantity,onChange:I=>ha(v.id,parseInt(I.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:v.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:v.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx($e,{type:"number",value:st[v.id]?.supplyRate??v.rate,onChange:I=>Tr(v.id,parseFloat(I.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((st[v.id]?.quantity??v.quantity)*((st[v.id]?.supplyRate??v.rate)+(st[v.id]?.installRate??0))).toFixed(2)]})]},v.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(6),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{onClick:()=>c(8),disabled:Ne().length===0,children:["Next: Generate BOM"," ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),i===8&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(Wo,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||me()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[X," ft  ",ee," ft (Qty: ",$,")"]})]}),z&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:z})]}),Z()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[ue,'"  ',re,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(v=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:v==="Qty"||v.includes("Rate")||v.includes("Amount")?"right":"left"},children:v},v))})}),e.jsx("tbody",{children:Ne().map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:N+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:v.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:v.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:v.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:v.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:v.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(v.quantity*v.rate).toFixed(2)})]},v.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:oe.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:Ne().reduce((v,N)=>v+N.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",Je().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Be,{onClick:()=>c(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:oa,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(hi,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:ya,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Be,{onClick:()=>G(),disabled:Ne().length===0,children:["Add to BOM ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{c(1),d(""),o(""),j(null),w(null),J(null),q(1),fe(7),le(3),te(6),ne(2),se([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(er,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),i===12&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:_v,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Wn})})]}),!Qs||Qs.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Qs||[]).map((v,N)=>{const x=Number(Ls[v.id]??v.supplyRate??v.rate??0),I=Number(Zs[v.id]??v.installRate??0);let F=Number(Rs[v.id]??(v.quantity||0));const _=F*x,U=F*I,P=Pt[v.id]??v.location??"",K=St[v.id]??v.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:N+1}),e.jsx("td",{className:"border px-2 py-1",children:v.productLabel||v.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:P||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:K||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:ys[v.id]??v.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:F}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",x.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",I.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",U.toFixed(2)]})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(kn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Be,{onClick:async()=>{if(Lt.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const v=await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=falseceiling`,{headers:{}});let N=[];v.ok&&(N=(await v.json()).items||[]);const I=(Qs||[]).map((U,P)=>{const K=Number(Ls[U.id]??U.supplyRate??U.rate??0),ae=Number(Zs[U.id]??U.installRate??0),Fe=Number(Rs[U.id]??(U.quantity||0));return{s_no:P+1,item:U.name,location:Pt[U.id]??U.location??"",description:St[U.id]??U.description??"",unit:ys[U.id]??U.unit??"",qty:Fe,supply_rate:K,install_rate:ae,supply_amount:Fe*K,install_amount:Fe*ae}}).filter(U=>!N.some(P=>P.item===U.item&&P.description===U.description&&P.unit===U.unit));if(I.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await ct("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"falseceiling",session_id:De,items:I})});const _=await(await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=falseceiling`,{headers:{}})).json();Hs(_.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(v){console.warn("Failed to save step 12 to DB",v),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Be,{onClick:()=>c(1),children:"Add More Products"}),e.jsx(Be,{onClick:Ga,children:"Export Excel"})]})]},"step-qa-boq"),i===10&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill No"}),e.jsx($e,{value:De,onChange:v=>rt(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill Date"}),e.jsx($e,{type:"date",value:mt,onChange:v=>ls(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Due Date"}),e.jsx($e,{type:"date",value:Ht,onChange:v=>Kt(v.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Name"}),e.jsx($e,{value:Yt,onChange:v=>Cs(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Address"}),e.jsx($e,{value:rs,onChange:v=>Is(v.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Terms & Conditions"}),e.jsx($e,{value:lt,onChange:v=>Gt(v.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Ve,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Mt,onChange:v=>kt(v.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),Ne().map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]}),Mt&&e.jsx($e,{placeholder:"Enter description for selected material",value:St[Mt]||"",onChange:v=>qt(N=>({...N,[Mt]:v.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:_v,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",De]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:on})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",mt]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",Ht]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",lt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",Yt]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(v=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:v},v))})}),e.jsx("tbody",{children:ve.map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.id&&St[v.id]||v.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(v.quantity||0)*Number(v.rate||0)||0).toFixed(2)})]},v.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:Xe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:vt.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:ut.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:Pe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Bt.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Bt.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Be,{onClick:rr,children:"Export PDF"})]})]}),i===9&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{variant:"destructive",onClick:Yr,disabled:sn.length===0,children:"Delete Selected"}),e.jsx(Be,{type:"button",onClick:fi,disabled:ve.length===0,children:"Save"}),e.jsx(Be,{onClick:async()=>{const v=Ne(at,yt),N=sn.length>0?v.filter(_=>sn.includes(_.rowId||`${_.batchId}-${_.id}`)):v,x=N.map(_=>{const U=_.rowId||`${_.batchId||""}-${_.id}`;return{id:_.id,rowId:U,batchId:_.batchId,name:_.name,unit:_.unit,quantity:yt[U]?.quantity??yt[_.id]?.quantity??_.quantity,supplyRate:yt[U]?.supplyRate??yt[_.id]?.supplyRate??_.rate,installRate:yt[U]?.installRate??yt[_.id]?.installRate??_.installRate??0,shopId:_.shopId,shopName:_.shopName,description:St[U]||St[_.id]||"",location:Pt[U]||Pt[_.id]||"",doorType:_.doorType,panelType:_.panelType,subOption:_.subOption,glazingType:_.glazingType}});if(x.length===0)return;const I=N[0],F={id:`local-${Date.now()}`,estimator:"falseceiling",bill_no:De,door_type:I?.doorType||Ze?.doorType||Ze?.door_type||b,panel_type:I?.panelType||Ze?.panelType||Ze?.panel_type||p,sub_option:I?.subOption||Ze?.subOption||Ze?.sub_option||B,glazing_type:I?.glazingType||Ze?.glazingType||Ze?.glazing_type||z,qty:Ze?.count||Ze?.qty||$,height:Ze?.height||X,width:Ze?.width||ee,glass_height:Ze?.glassHeight||Ze?.glass_height||ue,glass_width:Ze?.glassWidth||Ze?.glass_width||re,materials:x,subtotal:x.reduce((_,U)=>_+Number(U.quantity||0)*(Number(U.supplyRate||0)+Number(U.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};en(F);try{await yn()}catch{}gn([]),c(11)},disabled:ve.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{className:"text-sm font-semibold",children:"Saved BOQs"}),Gr.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:Gr.map(v=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:v.bill_no||`${v.estimator} - ${v.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(v.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{onClick:()=>ga(v),size:"sm",children:"Load"}),e.jsx(Be,{variant:"destructive",onClick:()=>Jn(v.id),size:"sm",children:"Delete"})]})]},v.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all",checked:(()=>{const v=(i===9?Ne(at,yt):Ne()).map(N=>N.rowId||N.id);return sn.length===v.length&&v.length>0})(),onCheckedChange:qn})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const v=new Map,N=new Map;ve.forEach(F=>{const _=F.doorType||F.door_type||Ze?.doorType||Ze?.door_type||b||"door",U=F.panelType||F.panel_type||Ze?.panelType||Ze?.panel_type||p||"",P=F.subOption||F.sub_option||Ze?.subOption||Ze?.sub_option||"",K=`${_}||${U}||${P}`;if(v.has(K)||v.set(K,[]),v.get(K).push(F),!N.has(K)){const Fe=(v.get(K)||[])[0]?.productLabel||`${U==="panel"?"With Panel":"Without Panel"}  ${_}${P?" ("+P+")":""}`;N.set(K,{label:Fe})}});const x=[];let I=0;for(const[F,_]of v.entries()){const U=_.map(Ye=>Ye.rowId||`${Ye.batchId||""}-${Ye.id}`),P=U.every(Ye=>sn.includes(Ye)),K=`group_${F}`,ae=St[K]||"",Fe=Number(Ps[K]??Ze?.count??Ze?.qty??$??1);x.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{id:`group-${F}`,checked:P,onCheckedChange:()=>{gn(P?Ye=>Ye.filter(tt=>!U.includes(tt)):Ye=>Array.from(new Set([...Ye,...U])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:N.get(F)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx($e,{placeholder:"Group description",value:ae?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:Ye=>qt(tt=>({...tt,[K]:Ye.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",className:"h-8 text-center",value:Ps[K]??Fe,onChange:Ye=>{const tt=Ye.target.value?parseFloat(Ye.target.value):0;wr(Ft=>({...Ft,[K]:tt})),qt(Ft=>{const Zt=(Ft[K]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...Ft,[K]:Zt?Zt+`
Qty: `+tt:"Qty: "+tt}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${F}`));for(const Ye of _){I+=1;const tt=Ye.rowId||`${Ye.batchId}-${Ye.id}`,Ft=Number(Le[tt]?.supplyRate??Le[Ye.id]?.supplyRate??Ye.rate??0),Zt=Number(Le[tt]?.installRate??Le[Ye.id]?.installRate??Ye.installRate??0),as=Ft+Zt,xs=Number(Le[tt]?.quantity??Le[Ye.id]?.quantity??Ye.quantity??0),Gs=xs*as,Rn=St[tt]??St[Ye.id]??Ye.description??"",V=String(Rn).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();x.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:I}),e.jsx("td",{className:"border px-2 py-1",children:Ye.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:St[tt]??St[Ye.id]??V,onChange:ye=>qt(He=>({...He,[tt]:ye.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:ys[tt]??ys[Ye.id]??Ye.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",className:"h-8 text-center",value:xs,onChange:ye=>ha(tt,ye.target.value?parseFloat(ye.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:as,onChange:ye=>{const He=parseFloat(ye.target.value||"0"),it=Number(Le[tt]?.supplyRate??Le[Ye.id]?.supplyRate??Ft),bt=Math.max(0,He-it);Tr(tt,it),$a(tt,bt)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Gs.toFixed(2)]})]},tt))}}return x})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(8),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Be,{onClick:()=>c(10),children:"Finalize PO"}),e.jsxs(Be,{onClick:ya,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const ay="/image.png";function HG(){const{shops:t,materials:s,products:n}=ei(),{toast:r}=ma();S.useMemo(()=>n?n.filter(ot=>Dd(ot)==="painting").map(ot=>ot.id):[],[n]);const[i,c]=S.useState(1),[A,u]=S.useState(null),[d,h]=S.useState(""),[o,m]=S.useState(20),[y,p]=S.useState(10),[j,b]=S.useState([]),[w,B]=S.useState({}),[L,Q]=S.useState(`PNT-${Math.floor(Math.random()*1e4)}`),[k,z]=S.useState(new Date().toISOString().split("T")[0]),[J,$]=S.useState(""),[q,X]=S.useState(""),[fe,ee]=S.useState(""),[le,ue]=S.useState("Payment: 50% Advance, 50% on Completion"),[te,re]=S.useState(`Main Showroom
Chennai`),[ne,oe]=S.useState({}),[se,xe]=S.useState(""),[Me,me]=S.useState([]),[Z,ge]=S.useState(!1),we=S.useMemo(()=>{if(!s||!A||!n)return[];const ot=n.find(Rt=>Rt.id===A);return ot?s.filter(Rt=>{const Mt=ot.name?.toLowerCase()||"",kt=(Rt.product||"").toLowerCase();return(Rt.subCategory||"").toLowerCase()==="painting"&&(kt.includes(Mt)||kt===A)}):[]},[s,A,n]),pe=ot=>{const Rt=o*y;return ot.code?.includes("PAINT")?Math.ceil(Rt/100):ot.code?.includes("PUTTY")?Math.ceil(Rt/50):1},be=()=>j.map(ot=>{const Rt=s.find(ms=>ms.id===ot.materialId),Mt=t.find(ms=>ms.id===ot.selectedShopId),kt=Rt?.id?w[Rt.id]?.quantity??pe(Rt):pe(Rt),fs=Rt?.id?w[Rt.id]?.rate??(Rt?.rate||0):Rt?.rate||0;return{...Rt,quantity:kt,rate:fs,shopName:Mt?.name||"Market",amount:kt*fs}}),je=be(),Ne=je.reduce((ot,Rt)=>ot+Rt.amount,0),Je=Ne*.09,Qe=Ne*.09,pt=Ne+Je+Qe,Te=Math.round(pt)-pt,Ce=()=>{const ot=Lt=>{try{const Hs=document.createElement("canvas").getContext("2d");return Hs?(Hs.fillStyle=Lt,Hs.fillStyle):Lt}catch{return"#000"}},Rt=document.createElement("div");Rt.style.width="210mm",Rt.style.minHeight="297mm",Rt.style.padding="20mm",Rt.style.background=ot("#fff"),Rt.style.color=ot("#000"),Rt.style.fontFamily="Arial, sans-serif",Rt.style.fontSize="12px";const Mt=document.createElement("div");Mt.style.display="flex",Mt.style.justifyContent="space-between",Mt.style.alignItems="center";const kt=document.createElement("img");kt.src=ay,kt.style.height="60px";const fs=document.createElement("div");fs.innerHTML='<h2 style="margin:0">Concept Trunk Interiors</h2><div>12/36A, Indira Nagar, Medavakkam, Chennai  600100</div>',fs.style.textAlign="center",fs.style.flex="1",fs.style.marginLeft="20px",Mt.appendChild(kt),Mt.appendChild(fs),Rt.appendChild(Mt),Rt.appendChild(document.createElement("hr"));const ms=document.getElementById("boq-add-table-pdf");if(!ms)return alert("Table not found for PDF export");const Ds=ms.cloneNode(!0),js=Lt=>{const Hs=getComputedStyle(Lt);return Lt.style.backgroundColor=ot(Hs.backgroundColor),Lt.style.color=ot(Hs.color),Lt.style.fontFamily=Hs.fontFamily,Lt.style.fontSize=Hs.fontSize,Lt.style.fontWeight=Hs.fontWeight,Lt.style.border=Hs.border,Lt.style.padding=Hs.padding,Lt.style.margin=Hs.margin,Lt.style.textAlign=Hs.textAlign,Lt.style.lineHeight=Hs.lineHeight,Array.from(Lt.children).forEach(Wr=>js(Wr)),Lt};js(Ds),Ds.style.marginTop="20px",Rt.appendChild(Ds),Qd().from(Rt).set({margin:0,filename:`BOQ_${L}.pdf`,html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).save()},_e=()=>{const ot=document.getElementById("boq-final-pdf");ot&&Qd().from(ot).set({margin:0,filename:`Painting_Invoice_${L}.pdf`}).save()},de=S.useMemo(()=>!A||!n?"":n.find(Rt=>Rt.id===A)?.name||"",[A,n]),dt=S.useMemo(()=>o*y,[o,y]),st=2,nt="wall",at=()=>be().reduce((ot,Rt)=>ot+Rt.amount,0),Dt=()=>{alert("Export to Excel feature coming soon")},yt=()=>{Ce()},qe=()=>{c(9)},[Tt,ns]=S.useState([]),Ts=be(),vs=dt,Ns=()=>{const ot=j.filter(Rt=>!Tt.includes(Rt.materialId));b(ot),ns([])},et=async()=>{const ot=be().map(Mt=>({id:Mt.id,name:Mt.name,productLabel:Mt.productLabel||null,product_label:Mt.productLabel||null,unit:Mt.unit,quantity:Yt[Mt.id]??Mt.quantity,rate:rs[Mt.id]??Mt.rate,shopId:Mt.shopId,shopName:Mt.shopName,description:ne[Mt.id]||""}));if(ot.length===0){alert("No materials to save");return}const Rt={id:`paint-${Date.now()}`,estimator:"painting",bill_no:L,area:vs,coats:st,materials:ot,subtotal:ot.reduce((Mt,kt)=>Mt+Number(kt.quantity||0)*Number(kt.rate||0),0),created_at:new Date().toISOString()};try{const Mt=await fetch("/api/estimator/step9-cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Rt})});if(!Mt.ok){const fs=await Mt.text();throw new Error(fs||"Failed to save")}const kt=await Mt.json();Kt(Rt),alert("Saved to cart successfully")}catch(Mt){console.error("Save step9 error",Mt),alert("Save failed: "+(Mt?.message||Mt))}},De=()=>{},rt=()=>{Tt.length===Ts.length?ns([]):ns(Ts.map(ot=>ot.id||""))},mt=ot=>{Tt.includes(ot)?ns(Rt=>Rt.filter(Mt=>Mt!==ot)):ns(Rt=>[...Rt,ot])},ls=(ot,Rt)=>{B(Mt=>({...Mt,[ot]:{...Mt[ot],quantity:Rt}}))},Ht=(ot,Rt)=>{B(Mt=>({...Mt,[ot]:{...Mt[ot],rate:Rt}}))},Kt=ot=>{console.log("BOQ saved:",ot)},[lt,Gt]=S.useState([]),[Yt,Cs]=S.useState({}),[rs,Is]=S.useState({}),[on,ws]=S.useState({}),[St,qt]=S.useState({}),Pt=be(),gs=S.useMemo(()=>{if(!Pt||Pt.length===0)return[];const ot=d||Pt[0]?.product||"Painting Project",Rt=Pt.reduce((kt,fs)=>{const ms=rs[fs.id]??fs.rate??0;return kt+Number(fs.quantity||0)*Number(ms)},0),Mt=Pt.reduce((kt,fs)=>{const ms=on[fs.id]??0;return kt+Number(fs.quantity||0)*Number(ms)},0);return[{id:"painting_product",name:ot,location:"",description:ne.product||"",unit:"project",quantity:1,supplyRate:Rt,installRate:Mt,supplyAmount:Rt,installAmount:Mt}]},[Pt,rs,on,ne,d]),Rs=k,Nn=()=>{const ot=j.filter(Rt=>!lt.includes(Rt.materialId));b(ot),Gt([])},ys=async()=>{ge(!0);try{let ot=Me||[];if(L)try{const ms=await ct(`/api/estimator-step11-groups?session_id=${L}&estimator=painting`);ms.ok&&(ot=(await ms.json()).items||[],me(ot))}catch(ms){console.warn("Failed to refresh step11 items before save",ms)}const Rt=gs.map(ms=>({estimator:"painting",session_id:L,group_key:ms.name,group_id:`group_${ms.id}`,item_name:ms.name,unit:ms.unit,quantity:ms.quantity,location:ms.location||"",description:ne.product||"",supply_rate:ms.supplyRate,install_rate:ms.installRate,supply_amount:ms.supplyAmount,install_amount:ms.installAmount,supply_subtotal:ms.supplyAmount,install_subtotal:ms.installAmount,sgst:Je,cgst:Qe,round_off:Te,grand_total:ms.supplyAmount+ms.installAmount+Je+Qe+Te})),Mt=new Set((ot||[]).map(ms=>ms.group_key||ms.groupKey)),kt=Rt.filter(ms=>!Mt.has(ms.group_key));if(kt.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),ge(!1),!0;const fs=await ct("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:kt})});if(!fs.ok){const ms=await fs.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${ms||fs.statusText}`,variant:"destructive"}),ge(!1),!1}try{const ms=await ct(`/api/estimator-step11-groups?session_id=${L}&estimator=painting`);if(ms.ok){const Ds=await ms.json();me(Ds.items||[])}}catch(ms){console.warn("Failed to reload step11 items after save",ms)}return r({title:"Success",description:"Step 11 saved to database."}),ge(!1),!0}catch(ot){return console.error("handleSavePaintingBOQ",ot),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),ge(!1),!1}},Ln=Pt,Zs=Ln.reduce((ot,Rt)=>{const Mt=Number(Yt[Rt.id]??Rt.quantity??0),kt=Number(rs[Rt.id]??Rt.supplyRate??Rt.rate??0);return ot+Mt*kt},0),En=()=>{alert("Export to Excel coming soon")},[Ls,Bs]=S.useState({}),Ms=(ot,Rt)=>{b(Mt=>Mt.map(kt=>kt.materialId===ot?{...kt,selectedBrand:Rt}:kt))},Os=(ot,Rt)=>{b(Mt=>Mt.map(kt=>kt.materialId===ot?{...kt,selectedShopId:Rt}:kt))};return e.jsx(ka,{children:e.jsx("div",{className:"max-w-6xl mx-auto space-y-8 pb-20",children:e.jsxs(Fl,{mode:"wait",children:[i===1&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Painting Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a painting product to continue"}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n?.filter(ot=>ot.subcategory?.toLowerCase()==="painting").map(ot=>{const Rt=A===ot.id;return e.jsx(ks,{onClick:()=>{u(ot.id),h(ot.name||ot.label||"Painting"),c(6)},className:Vs("cursor-pointer border-2 transition-all",Rt?"border-primary bg-primary/10":"border-border bg-white"),children:e.jsxs(Ws,{className:"p-6 flex items-center gap-4",children:[e.jsx(jL,{className:Vs("h-6 w-6",Rt?"text-primary":"text-muted-foreground")}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:ot.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:ot.subcategory})]})]})},ot.id)}),(!n||n.filter(ot=>ot.subcategory?.toLowerCase()==="painting").length===0)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No painting products found"})]})]},"step-1-painting"),i===6&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Available materials for painting. Best price shop is pre-selected."}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Fn,{checked:j.length===we.length&&we.length>0,onCheckedChange:ot=>{b(ot?we.map(Rt=>{const kt=s.filter(fs=>fs.name===Rt.name&&fs.product===Rt.product).map(fs=>({id:fs.id,brand:fs.product,shopId:fs.shopId,rate:fs.rate})).sort((fs,ms)=>(fs.rate||0)-(ms.rate||0))[0];return{materialId:Rt.id,selectedShopId:kt?.shopId||"",selectedBrand:kt?.brand||"Generic"}}):[])}}),e.jsx("span",{className:"font-semibold",children:"Select All Materials"})]}),e.jsx("div",{className:"space-y-3 max-h-500 overflow-y-auto border rounded-lg p-4 bg-white",children:we.map(ot=>{const Rt=j.some(js=>js.materialId===ot.id),Mt=j.find(js=>js.materialId===ot.id),kt=s.filter(js=>js.name===ot.name&&js.product===ot.product).map(js=>({id:js.id,brand:js.brandName||"Generic",shopId:js.shopId||"",rate:js.rate,unit:js.unit,shopName:t.find(Lt=>Lt.id===js.shopId)?.name||"Unknown"})),fs=Array.from(new Set(kt.map(js=>js.brand))).sort(),ms=Mt?.selectedBrand||fs[0]||"Generic",Ds=kt.filter(js=>js.brand===ms).sort((js,Lt)=>(js.rate||0)-(Lt.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fn,{id:ot.id,checked:Rt,onCheckedChange:()=>{b(Rt?js=>js.filter(Lt=>Lt.materialId!==ot.id):js=>[...js,{materialId:ot.id,selectedShopId:Ds[0]?.shopId||"",selectedBrand:ms}])}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:ot.id,className:"font-medium cursor-pointer",children:ot.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[ot.code,"  ",ot.unit]}),Rt&&fs.length>0&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(Ve,{className:"text-xs",children:"Brand:"}),e.jsxs(Bn,{value:ms,onValueChange:js=>Ms(ot.id,js),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:fs.map(js=>e.jsx(dn,{value:js,children:js},js))})]})]}),Ds.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(Ve,{className:"text-xs",children:"Shop:"}),e.jsxs(Bn,{value:Mt?.selectedShopId||Ds[0].shopId,onValueChange:js=>Os(ot.id,js),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:Ds.map(js=>e.jsxs(dn,{value:js.shopId||"",children:[js.shopName," - ",js.rate,"/",js.unit,js.rate===Ds[0].rate&&" (Best)"]},js.shopId))})]})]})]})]})]})},ot.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(1),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{disabled:j.length===0,onClick:()=>c(7),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step6"),i===7&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Review and edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:j.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-xs font-semibold text-muted-foreground uppercase",children:[e.jsx("div",{className:"col-span-2",children:"Material"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),j.map(ot=>{const Rt=s.find(Ds=>Ds.id===ot.materialId);if(!Rt)return null;const Mt=t.find(Ds=>Ds.id===ot.selectedShopId),kt=w[Rt.id]?.quantity??pe(Rt)??1,fs=w[Rt.id]?.rate??Rt.rate??0,ms=kt*fs;return e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-3 border rounded items-center",children:[e.jsx("span",{className:"col-span-2 font-medium",children:Rt.name}),e.jsx("div",{className:"text-center font-semibold",children:ot.selectedBrand||"-"}),e.jsx("div",{className:"text-center",children:e.jsx($e,{type:"number",className:"w-20 mx-auto h-8",value:kt,onChange:Ds=>B(js=>({...js,[Rt.id]:{...js[Rt.id],quantity:Number(Ds.target.value||0)}}))})}),e.jsx("span",{className:"text-center text-muted-foreground",children:Rt.unit}),e.jsx("div",{className:"text-center font-semibold",children:Mt?.name||"-"}),e.jsx("div",{className:"text-center",children:e.jsx($e,{type:"number",className:"w-20 mx-auto h-8",value:fs,onChange:Ds=>B(js=>({...js,[Rt.id]:{...js[Rt.id],rate:Number(Ds.target.value||0)}}))})}),e.jsxs("div",{className:"text-right font-semibold",children:["",ms.toFixed(2)]})]},Rt.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(6),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{onClick:()=>c(8),disabled:j.length===0,children:["Generate BOM ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"painting-step7"),i===8&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:64,height:64,backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(Wo,{size:32})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Bill of Materials(BOM)"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:16},children:[e.jsx("div",{className:"border rounded-lg mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"PAINT TYPE"}),e.jsx("p",{className:"font-semibold",children:de})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"AREA"}),e.jsxs("p",{className:"font-semibold",children:[dt," sq.ft"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"COATS"}),e.jsx("p",{className:"font-semibold",children:st})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"SURFACE"}),e.jsx("p",{className:"font-semibold capitalize",children:nt})]})]})}),e.jsx("div",{className:"border rounded-lg overflow-hidden mb-4",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Materials Schedule"}),e.jsxs("table",{className:"w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsx("tr",{children:["S.No","Material","Brand","Unit","Qty","Rate ()","Shop","Amount ()"].map(ot=>e.jsx("th",{className:"border px-2 py-2 text-left",children:ot},ot))})}),e.jsx("tbody",{children:be().map((ot,Rt)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",children:Rt+1}),e.jsx("td",{className:"border px-2 py-2 font-medium",children:ot.name}),e.jsx("td",{className:"border px-2 py-2",children:ot.brandName||"-"}),e.jsx("td",{className:"border px-2 py-2 text-center",children:ot.unit}),e.jsx("td",{className:"border px-2 py-2 text-center",children:ot.quantity}),e.jsx("td",{className:"border px-2 py-2 text-right",children:ot.rate}),e.jsx("td",{className:"border px-2 py-2",children:ot.shopName||"-"}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",(ot.quantity*ot.rate).toFixed(2)]})]},ot.id))})]})]})}),e.jsxs("div",{className:"border rounded-lg p-4 flex justify-between bg-blue-50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Materials"}),e.jsx("p",{className:"font-semibold",children:be().length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Quantity"}),e.jsx("p",{className:"font-semibold",children:be().reduce((ot,Rt)=>ot+Rt.quantity,0)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Grand Total"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:["",at().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-end pt-4",children:[e.jsx(Be,{variant:"outline",onClick:()=>c(7),children:"Back"}),e.jsxs("button",{onClick:Dt,className:"flex items-center gap-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600",children:[e.jsx(hi,{className:"w-4 h-4"}),"Export Excel"]}),e.jsxs("button",{onClick:yt,className:"flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600",children:[e.jsx(hi,{className:"w-4 h-4"}),"Export PDF"]}),e.jsxs(Be,{onClick:()=>qe(),children:["Add to BOM ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"painting-step8"),i===9&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-widest text-muted-foreground",children:"Painting Estimator"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Add to BOQ"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Review selected painting materials before finalizing BOQ"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{variant:"destructive",onClick:Ns,disabled:Tt.length===0,children:"Delete Selected"}),e.jsx(Be,{onClick:et,disabled:be().length===0,children:"Save"}),e.jsx(Be,{onClick:async()=>{const ot=be().map(Mt=>({id:Mt.id,name:Mt.name,unit:Mt.unit,quantity:Yt[Mt.id]??Mt.quantity,supplyRate:rs[Mt.id]??Mt.rate,shopId:Mt.shopId,shopName:Mt.shopName,description:ne[Mt.id]||""}));if(ot.length===0)return;const Rt={id:`paint-${Date.now()}`,estimator:"painting",bill_no:L,area:vs,coats:st,materials:ot,subtotal:ot.reduce((Mt,kt)=>Mt+Number(kt.quantity||0)*Number(kt.supplyRate||0),0),created_at:new Date().toISOString()};Kt(Rt);try{await De()}catch{}ns([]),c(11)},disabled:be().length===0,children:"Add to BOQ"})]})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Fn,{checked:(()=>{const ot=be().map(Rt=>Rt.id);return ot.length>0&&ot.every(Rt=>Tt.includes(Rt))})(),onCheckedChange:rt})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2 text-center",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2 text-center",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const ot=be(),Rt=new Map,Mt=new Map;ot.forEach(Ds=>{const js=Ds.product||de||"Painting";Rt.has(js)||Rt.set(js,[]),Rt.get(js).push(Ds),Mt.has(js)||Mt.set(js,{label:js})});const kt=[];let fs=0;const ms=Array.from(Rt.entries());for(const[Ds,js]of ms){const Lt=js.map(ds=>ds.id),Hs=Lt.length>0&&Lt.every(ds=>Tt.includes(ds)),Wr=`group_${Ds}`,sr=ne[Wr]||"";kt.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{id:`group-${Ds}`,checked:Hs,onCheckedChange:()=>{ns(Hs?ds=>ds.filter(mn=>!Lt.includes(mn)):ds=>Array.from(new Set([...ds,...Lt])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:Mt.get(Ds)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx($e,{placeholder:"Group description",value:sr?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:ds=>oe(mn=>({...mn,[Wr]:ds.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${Ds}`)),js.forEach(ds=>{fs+=1;const mn=Yt[ds.id]??ds.quantity,cr=rs[ds.id]??ds.rate,nr=Number(mn||0)*Number(cr||0);kt.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{checked:Tt.includes(ds.id),onCheckedChange:()=>mt(ds.id)})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:fs}),e.jsx("td",{className:"border px-2 py-1 font-medium",children:ds.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450},children:e.jsx("textarea",{className:"h-20 w-full p-2 border rounded",placeholder:"Description",value:ne[ds.id]??"",onChange:sn=>oe(gn=>({...gn,[ds.id]:sn.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:ds.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",className:"h-8 text-center",value:mn,onChange:sn=>ls(ds.id,Number(sn.target.value||0))})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",className:"h-8 text-right",value:cr,onChange:sn=>Ht(ds.id,Number(sn.target.value||0))})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-semibold",children:["",nr.toFixed(2)]})]},ds.id))})}return kt})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(8),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Be,{onClick:()=>c(11),disabled:be().length===0,children:"Finalize PO"}),e.jsxs(Be,{onClick:yt,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"painting-step-add-to-boq"),i===11&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:ay,alt:"logo",className:"h-14"}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("h1",{className:"text-lg font-bold",children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"BILL OF QUANTITIES (PAINTING)"})]}),e.jsx("div",{className:"text-right text-xs",children:Rs})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-slate-100",children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2 text-center",children:e.jsx(Fn,{checked:gs.length>0&&gs.every(ot=>lt.includes(ot.id)),onCheckedChange:ot=>Gt(ot?gs.map(Rt=>Rt.id):[])})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{className:"bg-slate-50",children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Install"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Install"})]})]}),e.jsx("tbody",{children:gs.map((ot,Rt)=>{const Mt=Number(ot.quantity??1),kt=Number(ot.supplyRate??0),fs=Number(ot.installRate??0);return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{checked:lt.includes(ot.id),onCheckedChange:()=>Gt(ms=>ms.includes(ot.id)?ms.filter(Ds=>Ds!==ot.id):[...ms,ot.id])})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Rt+1}),e.jsx("td",{className:"border px-2 py-1 font-medium",children:ot.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{value:ot.location??"",onChange:ms=>oe(Ds=>({...Ds,location:ms.target.value})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{value:ne.product??ot.description??"",onChange:ms=>oe(Ds=>({...Ds,product:ms.target.value})),className:"w-full min-h-16 border rounded p-2"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:ot.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Mt}),e.jsx("td",{className:"border px-2 py-1",children:e.jsxs("div",{className:"text-right",children:["",kt.toFixed(2)]})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsxs("div",{className:"text-right",children:["",fs.toFixed(2)]})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-semibold",children:["",(Mt*kt).toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-semibold",children:["",(Mt*fs).toFixed(2)]})]},ot.id)})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Be,{variant:"destructive",disabled:!lt.length,onClick:Nn,children:"Delete Selected"}),e.jsx(Be,{onClick:ys,children:"Save"}),e.jsx(Be,{onClick:()=>c(1),children:"Add Product"}),e.jsx(Be,{onClick:()=>c(12),children:"Create BOQ"})]})]},"step11-painting-finalize-boq"),i===12&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:ay,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES  PAINTING"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Rs})})]}),!Ln||Ln.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No finalized painting BOQ lines found. Complete Step 11 first."}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Material"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:Ln.map((ot,Rt)=>{const Mt=Number(rs[ot.id]??ot.supplyRate??ot.rate??0),kt=Number(on[ot.id]??ot.installRate??0),fs=Number(Yt[ot.id]??ot.quantity??0),ms=fs*Mt,Ds=fs*kt,js=Ls[ot.id]??ot.location??"",Lt=ne[ot.id]??ot.description??"",Hs=St[ot.id]??ot.unit??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:Rt+1}),e.jsx("td",{className:"border px-2 py-1 font-medium",children:ot.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:js}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"whitespace-pre-wrap",children:Lt})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Hs}),e.jsx("td",{className:"border px-2 py-1 text-center",children:fs}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",Mt.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",kt.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",ms.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Ds.toFixed(2)]})]},ot.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Zs||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Be,{onClick:()=>c(1),children:"Add More Painting Items"}),e.jsx(Be,{onClick:En,children:"Export Excel"})]})]},"step-12-qa-boq-painting"),i===10&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill No"}),e.jsx($e,{value:L,onChange:ot=>Q(ot.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill Date"}),e.jsx($e,{type:"date",value:k,onChange:ot=>z(ot.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Due Date"}),e.jsx($e,{type:"date",value:J,onChange:ot=>$(ot.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Name"}),e.jsx($e,{value:q,onChange:ot=>X(ot.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Address"}),e.jsx($e,{value:fe,onChange:ot=>ee(ot.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Terms & Conditions"}),e.jsx($e,{value:le,onChange:ot=>ue(ot.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Ve,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:se,onChange:ot=>xe(ot.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),je.map(ot=>e.jsx("option",{value:ot.id,children:ot.name},ot.id))]}),se&&e.jsx($e,{placeholder:"Enter description for selected material",value:ne[se]||"",onChange:ot=>oe(Rt=>({...Rt,[se]:ot.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:ay,alt:"Logo",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",L]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar, Medavakkam, Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:te})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",k]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",J]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",le]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer"})," : ",q]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(ot=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:ot},ot))})}),e.jsx("tbody",{children:je.map((ot,Rt)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:Rt+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:ot.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:ot.id&&ne[ot.id]||ot.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"3208"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:ot.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:ot.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:ot.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:ot.amount.toFixed(2)})]},Rt))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:250},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:Ne.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Je.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Qe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:Te.toFixed(2)})]}),e.jsxs("tr",{style:{borderTop:"1px solid #000"},children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Math.round(pt).toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Be,{onClick:_e,children:"Export PDF"})]})]})]})})})}function KG(t){const s=t.subcategory?.toLowerCase()||"",n=t.name?.toLowerCase()||"";return n.includes("flush")||s.includes("flush")?"flush-door":n.includes("wpc")||s.includes("wpc")?"wpc-door":n.includes("glass")||s.includes("glass")?"glass-door":n.includes("wood")||s.includes("wood")?"wooden-door":n.includes("stile")||s.includes("stile")?"stile-door":"flush-door"}const Mv="/image.png",zG=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),Vr=t=>(t||"").toString().toUpperCase(),hR={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},pf={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},VG=(t,s)=>{const n=Vr(t.product),r=Vr(t.name),i=Vr(t.category),c=Vr(t.subCategory),u=(hR[s]||[s.toUpperCase()]).some(o=>n.includes(o)||r.includes(o)||i.includes(o)||c.includes(o)),d=pf[s],h=d&&Vr(n).includes(Vr(d));return u||h},Kp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function $G(){const[,t]=bo(),{shops:s,materials:n,products:r}=ei(),{toast:i}=ma(),[c,A]=S.useState(1),u=typeof window<"u"&&window.location.search.includes("step=11"),[d,h]=S.useState(""),[o,m]=S.useState(""),[y,p]=S.useState(null),[j,b]=S.useState(null),[w,B]=S.useState(null),[L,Q]=S.useState(null),[k,z]=S.useState(null),[J,$]=S.useState(null),[q,X]=S.useState(1),[fe,ee]=S.useState(7),[le,ue]=S.useState(3),[te,re]=S.useState(6),[ne,oe]=S.useState(2),[se,xe]=S.useState([]),[Me,me]=S.useState([]);S.useEffect(()=>{ct("/api/accumulated-products/doors",{headers:{}}).then(x=>x.json()).then(x=>{me(x.data||[])}).catch(x=>console.error("Failed to load accumulated products",x))},[]),S.useEffect(()=>{if(typeof window<"u"){const I=new URLSearchParams(window.location.search).get("step");if(I){const F=parseInt(I,10);F>=1&&F<=12&&A(F)}}},[]),S.useEffect(()=>{if(typeof window<"u"&&c===11){const I=new URLSearchParams(window.location.search).get("product");I&&(async()=>{try{const _=await ct(`/api/products/${I}`,{headers:{}});if(_.ok){const P=(await _.json()).product,K=KG(P);K&&(B(K),m(P.name),h(P.id))}}catch(_){console.error("Failed to load product data:",_)}})()}},[c]),S.useEffect(()=>{c===12&&ct("/api/accumulated-products/doors",{headers:{}}).then(x=>x.json()).then(x=>{const I=x.data||[];me(I),console.debug("Restored doors_accumulated_products for Step 12:",I.length)}).catch(x=>console.error("Failed to load accumulated products for Step 12",x))},[c]);const Z=x=>{const I=x?.doorType??w;if(!I)return null;const F=Ne.find(U=>U.value===I);let _=F?F.label:pf[I]||I;return/door/i.test(_)||(_=`${_} Door`),_},ge=x=>{const I=x?.doorType??w,F=x?.panelType??j,_=x?.subOption??L;if(!I)return null;const U=Ne.find(Fe=>Fe.value===I);let P=U?U.label:pf[I]||I;/door/i.test(P)||(P=`${P} Door`);const K=F==="panel"?"With Panel":"Without Panel",ae=_?` - ${_}`:"";return`${K}  ${P}${ae}`},we=()=>{const x=(o||"").toString();if(!w&&!x)return null;const I=x||ge(),F=x||pf[w]||w,_=w?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(w):Vr(I).includes("GLASS")||Vr(I).includes("STILE");return{label:I,productName:F,requiresGlazing:_}},pe=()=>{const x=(o||"").toString();if(!w&&!x||!n.length)return[];const I=x||(w?pf[w]:"");let F=[];if(I&&(F=n.filter(U=>{const P=(U.product||"").toString();if(!P||!I)return!1;const K=Vr(P),ae=Vr(I);return K.includes(ae)||ae.includes(K)})),(!F||F.length===0)&&!x&&(F=w?n.filter(U=>VG(U,w)):n.filter(U=>{const P=(U.product||"").toString();if(!I)return!1;const K=Vr(P),ae=Vr(I);return K.includes(ae)||ae.includes(K)})),F.length===0)return[];const _=new Map;for(const U of F){const P=`${Vr(U.product)}__${Vr(U.name)}__${zG(U.code)}`,K=_.get(P);(!K||(U.rate||0)<(K.rate||0))&&_.set(P,U)}return Array.from(_.values())},be={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},je=["Single Glass","Double Glass"],Ne=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],Je=(x,I)=>{const F=q||1,_=fe||7,U=le||3,P=te||6,K=ne||2,ae=Um(_,U),Fe=x.toLowerCase();let Ye=0;return Fe.includes("frame")||Fe.includes("door frame")?Ye=ae*F:Fe.includes("door")&&(Fe.includes("panel")||Fe.includes("shutter")||Fe.includes("flush")||Fe.includes("wooden"))?Ye=F:Fe.includes("hinge")?Ye=F*3:Fe.includes("lock")||Fe.includes("handle")||Fe.includes("stopper")||Fe.includes("bolt")?Ye=F:Fe.includes("glass")?Ye=Lm(P,K)*F:Ye=F,Math.max(1,Math.ceil(Ye))},Qe=(x,I)=>{const F=x||se,_=I||at;return F.map(U=>{let P=Te.find(Gs=>Gs.id===U.materialId);if(P||(P=n.find(Gs=>Gs.id===U.materialId)||null),!P)return null;const K=n.find(Gs=>{const Rn=Vr(Gs.product)===Vr(P.product),V=Vr(Gs.name)===Vr(P.name),ye=Gs.shopId===U.selectedShopId,He=Kp(Gs)===(U.selectedBrand||"Generic");return Rn&&V&&ye&&He})||P,ae=s.find(Gs=>Gs.id===U.selectedShopId),Fe=U.rowId||(U.batchId?`${U.batchId}-${K.id}`:K.id),Ye=_[Fe]||_[K.id]||_[P.id],tt=Je(K.name,K.unit),Ft=Ye?.quantity??tt,Zt=Ye?.supplyRate??K.rate??0,as=Ye?.installRate??0,xs=(Ps||[]).find(Gs=>Gs.rowId===Fe||`${Gs.batchId||""}-${Gs.id}`===Fe);return{id:K.id,batchId:U.batchId,rowId:Fe,name:K.name,quantity:Ft,unit:K.unit,rate:Zt,shopId:U.selectedShopId,shopName:ae?.name||"Unknown",installRate:as,doorType:xs?.doorType||xs?.door_type||void 0,panelType:xs?.panelType||xs?.panel_type||void 0,subOption:xs?.subOption||xs?.sub_option||void 0,glazingType:xs?.glazingType||xs?.glazing_type||void 0,productLabel:xs?.productLabel||void 0}}).filter(U=>U!==null)},pt=()=>Qe().reduce((x,I)=>x+I.quantity*I.rate,0),Te=pe(),Ce=x=>(x?.name||x?.title||x?.label||x?.productName||x?.product||"").toString(),_e=x=>(x?.category||x?.type||x?.group||x?.section||"").toString(),de=x=>Dd(x)==="doors",dt=x=>{const I=Vr(x);return I.includes("FLUSH")?"flush":I.includes("WPC")?"wpc":I.includes("STILE")||I.includes("ALUMIN")?"stile":I.includes("GLASS PANEL")?"glasspanel":I.includes("GLASS")?"glassdoor":I.includes("WOOD")||I.includes("TEAK")?"wooden":null},st=(r||[]).filter(de).slice().sort((x,I)=>{const F=Ce(x),_=Ce(I);return F.localeCompare(_)}),nt=x=>{const I=Ce(x);h(x.id||I),m(I);const F=dt(I);B(F||w),Q(null),z(null),$(null),xe([]),Dt({}),gs({}),Nn({}),A(6)},[at,Dt]=S.useState({}),[yt,qe]=S.useState([]),[Tt,ns]=S.useState({}),[Ts,vs]=S.useState("Concept Trunk Interiors"),[Ns,et]=S.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[De,rt]=S.useState("33ASOPS5560M1Z1"),[mt,ls]=S.useState(""),[Ht,Kt]=S.useState(new Date().toISOString().slice(0,10)),[lt,Gt]=S.useState(""),[Yt,Cs]=S.useState("50% Advance and 50% on Completion"),[rs,Is]=S.useState(""),[on,ws]=S.useState(""),[St,qt]=S.useState(""),[Pt,gs]=S.useState({}),[Rs,Nn]=S.useState({}),[ys,Ln]=S.useState({}),[Zs,En]=S.useState({}),[Ls,Bs]=S.useState({}),[Ms,Os]=S.useState({}),[ot,Rt]=S.useState([]),[Mt,kt]=S.useState([]),[fs,ms]=S.useState(""),[Ds,js]=S.useState([]),[Lt,Hs]=S.useState([]),[Wr,sr]=S.useState([]),[ds,mn]=S.useState(!1);S.useEffect(()=>{(async()=>{if(mt)try{const I=await ct(`/api/estimator-step9-items?session_id=${mt}&estimator=doors`,{headers:{}});if(I.ok){const U=await I.json();js(U.items||[])}const F=await ct(`/api/estimator-step11-groups?session_id=${mt}&estimator=doors`,{headers:{}});if(F.ok){const U=await F.json();Hs(U.items||[])}const _=await ct(`/api/estimator-step12-qa-selection?session_id=${mt}&estimator=doors`,{headers:{}});if(_.ok){const U=await _.json();sr(U.items||[])}}catch(I){console.warn("Failed to load data from DB:",I)}})()},[mt]),S.useEffect(()=>{if(c===7){const x=Qe(),I={};x.forEach(F=>{I[F.id]={quantity:F.quantity||0,supplyRate:F.rate||0,installRate:0}}),Dt(I)}},[c,se]),S.useEffect(()=>{if(c===9){const x=Qe(yt,Tt);if(x.length>0){const I=x[0].shopId,F=s.find(_=>_.id===I);if(F){const _=[F.name||"",F.address||"",F.area||"",F.city||"",F.state||"",F.pincode||"",F.gstNo?`GSTIN: ${F.gstNo}`:"",F.phone||""].filter(Boolean);qt(_.join(`
`))}}}},[c,yt,Tt,se,s]),S.useEffect(()=>{if(c===9){Jn();const x=[],I={},F={},_={};if(Ps&&Ps.length>0)for(const U of Ps){const P=U.rowId||`${U.batchId||""}-${U.id}`;x.findIndex(ae=>ae.materialId===U.id&&ae.rowId===P&&(ae.batchId||"")===(U.batchId||""))===-1&&(x.push({materialId:U.id,selectedShopId:U.shopId||"",selectedBrand:U.brand||void 0,batchId:U.batchId,rowId:P}),I[P]={quantity:Number(U.quantity||0),supplyRate:Number(U.supplyRate??U.rate??0),installRate:Number(U.installRate||0)},U.description&&(F[P]=U.description),U.location&&(_[P]=U.location))}if(Ds&&Ds.length>0)for(const U of Ds){if(!n.find(Ft=>Ft.id===U.material_id))continue;const K=U.material_id,ae=U.row_id||(U.batch_id?`${U.batch_id}-${K}`:K),Fe=U.shop_id||"",Ye=U.brand||void 0;x.findIndex(Ft=>Ft.materialId===K&&(Ft.batchId||"")===(U.batch_id||"")&&(Ft.rowId||"")===ae)===-1&&(x.push({materialId:K,selectedShopId:Fe,selectedBrand:Ye,batchId:U.batch_id||(U.row_id?ae.replace(`-${K}`,""):void 0)}),I[ae]={quantity:Number(U.quantity||0),supplyRate:Number(U.supply_rate||U.rate||0),installRate:Number(U.install_rate||0)},U.description&&(F[ae]=U.description),U.location&&(_[ae]=U.location))}se&&se.length>0&&se.forEach(U=>{if(x.findIndex(K=>K.materialId===U.materialId&&K.batchId===U.batchId)===-1){x.push(U);const K=n.find(ae=>ae.id===U.materialId);if(K){const ae=U.batchId?`${U.batchId}-${U.materialId}`:U.materialId;I[ae]={quantity:at[U.materialId]?.quantity??K.quantity??1,supplyRate:at[U.materialId]?.supplyRate??K.rate??0,installRate:at[U.materialId]?.installRate??0}}}}),x.length>0&&qe(x),Object.keys(I).length>0&&ns(I),Object.keys(F).length>0&&gs(U=>({...U,...F})),Object.keys(_).length>0&&Nn(U=>({...U,..._}))}},[c,se,Ds]),S.useEffect(()=>{c===11&&(async()=>{if(mt)try{const I=await ct(`/api/estimator-step11-groups?session_id=${mt}&estimator=doors`,{headers:{}});if(I.ok){const _=(await I.json()).items||[],U={},P={},K={},ae={};_.forEach(Fe=>{const Ye=n.find(tt=>tt.name===Fe.item);Ye&&(U[Ye.id]=Number(Fe.supply_rate||0),P[Ye.id]=Number(Fe.install_rate||0),K[Ye.id]=Number(Fe.qty||0),ae[Ye.id]=Fe.unit||"")}),Os(Fe=>({...Fe,...U})),Bs(Fe=>({...Fe,...P})),Ln(Fe=>({...Fe,...K})),En(Fe=>({...Fe,...ae}))}}catch(I){console.warn("Failed to load step 11 data:",I)}})()},[c,mt,Lt]);const cr=S.useRef(null);S.useEffect(()=>{Jn().catch(()=>{})},[]),S.useEffect(()=>{(async()=>{if(mt)try{const I=await ct(`/api/estimator-step9-items?session_id=${mt}&estimator=doors`,{headers:{}});if(I.ok){const F=await I.json(),_=F.items.map(U=>({id:U.material_id,rowId:U.row_id,batchId:U.batch_id,name:U.name,unit:U.unit,quantity:U.quantity,supplyRate:U.supply_rate,installRate:U.install_rate,shopId:U.shop_id,shopName:U.shop_name,description:U.description,location:U.location,doorType:U.door_type,panelType:U.panel_type,subOption:U.sub_option,glazingType:U.glazing_type}));if(wr(_),F.items.length>0){const U=F.items[0];yn({doorType:U.door_type,panelType:U.panel_type,subOption:U.sub_option,glazingType:U.glazing_type,count:U.qty,height:U.height,width:U.width,glassHeight:U.glass_height,glassWidth:U.glass_width,subtotal:U.subtotal,sgst:U.sgst,cgst:U.cgst,round_off:U.round_off,grand_total:U.grand_total})}}}catch(I){console.warn("Failed to load step 9 from DB",I)}})()},[mt]),S.useEffect(()=>(cr.current&&clearTimeout(cr.current),cr.current=setTimeout(async()=>{new Date().toISOString();try{if(!mt)return;const x=Qe().map((I,F)=>{const _=I.rowId||(I.batchId?`${I.batchId}-${I.id}`:I.id);return{estimator:"doors",session_id:mt,s_no:F+1,row_id:String(_),batch_id:I.batchId||null,material_id:I.id,name:I.name,unit:I.unit,quantity:Number(at[I.id]?.quantity??I.quantity??0),supply_rate:Number(at[I.id]?.supplyRate??I.rate??0),install_rate:Number(at[I.id]?.installRate??0),shop_id:I.shopId||"",shop_name:I.shopName||"",description:Pt[I.id]||"",location:Rs[I.id]||"",door_type:w,panel_type:j,sub_option:L,glazing_type:J,qty:q,height:fe,width:le,glass_height:te,glass_width:ne}});await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"doors",session_id:mt,items:x})})}catch{}},800),()=>{cr.current&&clearTimeout(cr.current)}),[se,at,Pt,Rs,w,j,L,J,q,fe,le,te,ne,mt]);const nr=x=>{const I=Te.find(Fe=>Fe.id===x);if(!I)return;if(se.find(Fe=>Fe.materialId===x)){xe(Fe=>Fe.filter(Ye=>Ye.materialId!==x));return}const _=n.filter(Fe=>Vr(Fe.product)===Vr(I.product)&&Vr(Fe.name)===Vr(I.name)).map(Fe=>({brand:Kp(Fe),shopId:Fe.shopId,rate:Fe.rate||0})),P=Array.from(new Set(_.map(Fe=>Fe.brand))).sort()[0]||"Generic",ae=_.filter(Fe=>Fe.brand===P).sort((Fe,Ye)=>Fe.rate-Ye.rate)[0];ae?.shopId&&xe(Fe=>[...Fe,{materialId:x,selectedShopId:ae.shopId,selectedBrand:P}])},sn=(x,I)=>{xe(F=>F.map(_=>_.materialId===x?{..._,selectedShopId:I}:_))},gn=(x,I)=>{const F=Te.find(P=>P.id===x);if(!F)return;const U=n.filter(P=>Vr(P.product)===Vr(F.product)&&Vr(P.name)===Vr(F.name)).map(P=>({brand:Kp(P),shopId:P.shopId,rate:P.rate||0})).filter(P=>P.brand===I).sort((P,K)=>P.rate-K.rate)[0]?.shopId||"";xe(P=>P.map(K=>K.materialId===x?{...K,selectedBrand:I,selectedShopId:U||K.selectedShopId}:K))},[qn,Yr]=S.useState([]),Gr=()=>{const x=(c===9?Qe(yt,Tt):Qe()).map(I=>I.rowId||I.id);Yr(I=>I.length===x.length?[]:x)},ra=async()=>{if(qn.length!==0){try{const x=[],I=[];for(const F of qn){const _=Ps?.find(U=>`${U.batchId||""}-${U.id}`===F);if(_&&_.id){const U=Ds.find(P=>P.id===_.id);U&&x.push(U)}else{const U=yt.find(P=>`${P.batchId||""}-${P.materialId}`===F);U&&I.push(U)}}if(x.length>0&&mt&&(await ct("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:mt,estimator:"doors",items:x})}),wr(F=>F?F.filter(_=>!x.some(U=>U.id===_.id)):null)),I.length>0&&qe(F=>F.filter(_=>!I.some(U=>`${U.batchId||""}-${U.materialId}`==`${_.batchId||""}-${_.materialId}`))),qe(F=>F.filter(_=>!qn.includes(`${_.batchId||""}-${_.materialId}`))),ns(F=>{const _={...F};return qn.forEach(U=>delete _[U]),_}),mt){const _=await(await ct(`/api/estimator-step9-items?session_id=${mt}&estimator=doors`,{headers:{}})).json();js(_.items||[])}i({title:"Success",description:`${qn.length} item(s) deleted successfully!`})}catch(x){console.warn("Failed to delete items",x),i({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}Yr([])}},[gr,Ks]=S.useState([]),en=S.useRef(""),[Es,rn]=S.useState(null),[Ps,wr]=S.useState(null),[Ze,us]=S.useState({}),[is,yn]=S.useState(null),Jn=async()=>{try{const x=await ct("/api/boq");if(x.status===401){Ks([]),en.current!=="401"&&(en.current="401",i({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!x.ok){const _=await x.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${_||x.status}`)}if(!(x.headers.get("content-type")||"").includes("application/json")){const _=await x.text().catch(()=>"");console.warn("/api/boq returned non-json:",_),Ks([]);return}const F=await x.json();Ks(F.boqs||[]),en.current=""}catch(x){console.error("fetchSavedBoqs",x);const I=String(x?.message||x||"");if(!I)return;en.current!==I&&(en.current=I,i({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},zn=async()=>{try{if(!mt)return i({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const x={estimator:"doors",billNo:mt,doorType:w,panelType:j,subOption:L,glazingType:J,qty:q,height:fe,width:le,glassHeight:te,glassWidth:ne,materials:Ps&&Ps.length>0?Ps:Qe(),subtotal:ut,sgst:Pe,cgst:Bt,roundOff:_t,grandTotal:xn},I=await ct("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!I.ok){const U=await I.text().catch(()=>"");throw new Error(U||"save failed")}const F=I.headers.get("content-type")||"";let _=null;if(F.includes("application/json"))_=await I.json();else{const U=await I.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",U),_={boq:null}}return await Jn(),rn(_?.boq||_?.boqs?.[0]||null),!0}catch(x){return console.error("handleSaveBOQ",x),!1}},ua=async x=>{try{if(!(await ct(`/api/boq/${x}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await Jn()}catch(I){console.error("handleDeleteSavedBoq",I)}},ga=()=>{A(1),B(null),b(null),Q(null),z(null),X(1),ee(7),ue(3),re(0),oe(0),Rt([]),Ln({}),gs({}),Nn({}),En({}),Os({}),Bs({}),us({}),rn(null)},ha=async()=>{mn(!0);try{let x=Lt||[];if(mt)try{const P=await ct(`/api/estimator-step11-groups?session_id=${mt}&estimator=doors`);P.ok&&(x=(await P.json()).items||[],Hs(x))}catch(P){console.warn("Failed to refresh step11 items before save",P)}const I=Qn.map(P=>({estimator:"doors",session_id:mt,group_key:(P.groupKey||`${P.doorType||"door"}||${P.panelType||""}||${P.subOption||""}`)+"::"+(P.name||""),group_id:P.groupId||`group_${P.groupKey||""}`,item_name:P.name,unit:P.unit,quantity:P.quantity,location:P.location||"",description:P.description||"",supply_rate:Ms[P.id]||P.supplyRate||0,install_rate:Ls[P.id]||P.installRate||0,supply_amount:(P.quantity||0)*(Ms[P.id]||P.supplyRate||0),install_amount:(P.quantity||0)*(Ls[P.id]||P.installRate||0),supply_subtotal:Qn.reduce((K,ae)=>K+(ae.quantity||0)*(Ms[ae.id]||ae.supplyRate||0),0),install_subtotal:Qn.reduce((K,ae)=>K+(ae.quantity||0)*(Ls[ae.id]||ae.installRate||0),0),sgst:Pe,cgst:Bt,round_off:_t,grand_total:Qn.reduce((K,ae)=>K+(ae.quantity||0)*((Ms[ae.id]||ae.supplyRate||0)+(Ls[ae.id]||ae.installRate||0)),0)+Pe+Bt+_t})),F=new Set((x||[]).map(P=>P.group_key||P.groupKey)),_=I.filter(P=>!F.has(P.group_key));if(_.length===0)return i({title:"No changes",description:"No new Step 11 items to save."}),mn(!1),!0;const U=await ct("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:_})});if(!U.ok){const P=await U.text().catch(()=>"");return i({title:"Error",description:`Failed saving Step 11: ${P||U.statusText}`,variant:"destructive"}),mn(!1),!1}try{const P=await ct(`/api/estimator-step11-groups?session_id=${mt}&estimator=doors`);if(P.ok){const K=await P.json();Hs(K.items||[])}}catch(P){console.warn("Failed to reload step11 items after save",P)}return me([]),i({title:"Success",description:"Step 11 saved to database."}),mn(!1),!0}catch(x){return console.error("handleSaveAccumulatedBOQ",x),i({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),mn(!1),!1}},Tr=x=>{if(ls(x.bill_no||""),B(x.door_type||null),b(x.panel_type||null),Q(x.sub_option||null),$(x.glazing_type||null),X(x.qty||1),ee(x.height||7),ue(x.width||3),re(x.glass_height||6),oe(x.glass_width||2),Array.isArray(x.materials)){const I=x.materials.map(F=>({materialId:F.id,selectedShopId:F.shopId||F.shop_id||F.shopId||"",selectedBrand:F.shopName||F.brand||F.selectedBrand||void 0}));xe(I.filter(Boolean))}rn(x)},$a=(x,I)=>{if(c===9){ns(F=>({...F,[x]:{...F[x]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(I))}}));return}Dt(F=>({...F,[x]:{...F[x]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(I))}}))},ya=(x,I)=>{if(c===9){ns(F=>({...F,[x]:{...F[x]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(I)),installRate:F[x]?.installRate||0}}));return}Dt(F=>({...F,[x]:{...F[x]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(I)),installRate:F[x]?.installRate||0}}))},rr=(x,I)=>{if(c===9){ns(F=>({...F,[x]:{...F[x]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(I)),supplyRate:F[x]?.supplyRate||0}}));return}Dt(F=>({...F,[x]:{...F[x]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(I)),supplyRate:F[x]?.supplyRate||0}}))},oa=()=>{const x=document.getElementById("boq-pdf");if(!x){alert("BOQ content not found");return}setTimeout(()=>{Qd().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:I=>I.className?.toString().includes("bg-")||I.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(x).save().catch(I=>{console.error("PDF Export Error:",I),alert("PDF export failed. Check console.")})},100)},Ga=async()=>{const x=document.getElementById("boq-final-pdf");if(!x){alert("Final BOQ content not found");return}const I=(await Yc(async()=>{const{default:F}=await Promise.resolve().then(()=>bu);return{default:F}},void 0)).default;I().set({margin:10,filename:`BOQ-${mt||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(x).save()},fi=()=>{const x=Qe(),I=we(),F=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${j==="panel"?"With Panel":"Without Panel"} - ${I?.label}`,`Dimensions: ${fe}ft  ${le}ft (Count: ${q})`,...J?[`Glazing: ${J}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];x.forEach((ae,Fe)=>{const Ye=ae.quantity*ae.rate;F.push(`${Fe+1},"${ae.name}","${ae.unit}",${ae.quantity},${ae.rate},"${ae.shopName}",${Ye}`)}),F.push("",`TOTAL COST,,,${pt().toFixed(2)}`);const _=F.join(`
`),U=new Blob([_],{type:"text/csv"}),P=window.URL.createObjectURL(U),K=document.createElement("a");K.href=P,K.download=`BOQ-Doors-${new Date().getTime()}.csv`,K.click(),URL.revokeObjectURL(P)},xa=()=>{const x=Qn||[],I=[];I.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),x.forEach((K,ae)=>{const Fe=Number(K.supplyRate??K.rate??0),Ye=Number(K.installRate??0),tt=Number(K.quantity||0),Ft=tt*Fe,Zt=tt*Ye,as=(K.location||Rs[K.id]||"").toString().replace(/"/g,'""'),xs=(K.description||Pt[K.id]||K.name||"").toString().replace(/"/g,'""'),V=(ge({doorType:K.doorType||K.door_type,panelType:K.panelType||K.panel_type,subOption:K.subOption||K.sub_option,glazingType:K.glazingType||K.glazing_type})||K.name||"").replace(/"/g,'""');I.push(`${ae+1},"${V}","${as}","${xs}",${K.unit},${tt},${Fe.toFixed(2)},${Ye.toFixed(2)},${Ft.toFixed(2)},${Zt.toFixed(2)}`)});const F=I.join(`
`),_=new Blob([F],{type:"text/csv"}),U=window.URL.createObjectURL(_),P=document.createElement("a");P.href=U,P.download=`BOQ-Doors-Step11-${new Date().getTime()}.csv`,P.click(),URL.revokeObjectURL(U)},ie=async()=>{const x=Qe(yt,Tt).map(Fe=>{const Ye=Fe.rowId||`${Fe.batchId}-${Fe.id}`;return{id:Fe.id,rowId:Ye,batchId:Fe.batchId||null,name:Fe.name,unit:Fe.unit,quantity:Tt[Ye]?.quantity??Tt[Fe.id]?.quantity??Fe.quantity,supplyRate:Tt[Ye]?.supplyRate??Tt[Fe.id]?.supplyRate??Fe.rate,installRate:Tt[Ye]?.installRate??Tt[Fe.id]?.installRate??Fe.installRate??0,shopId:Fe.shopId,shopName:Fe.shopName,description:Pt[Ye]||Pt[Fe.id]||"",location:Rs[Ye]||Rs[Fe.id]||"",doorType:Fe.doorType,panelType:Fe.panelType,subOption:Fe.subOption,glazingType:Fe.glazingType,isSaved:Fe.isSaved||!1}}),I=x.filter(Fe=>!Fe.isSaved);if(I.length===0){i({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let F=mt;const U=(typeof window<"u"?new URLSearchParams(window.location.search):new URLSearchParams).get("project");U&&U.trim()!==""?(F=U,ls(F)):(!F||F.trim()==="")&&(F=`DOOR-${Date.now()}`,ls(F));const P=is||(()=>{const Fe=x.reduce((as,xs)=>as+Number(xs.quantity||0)*(Number(xs.supplyRate||0)+Number(xs.installRate||0)),0),Ye=Fe*.09,tt=Fe*.09,Ft=Math.round(Fe+Ye+tt)-(Fe+Ye+tt),Zt=Fe+Ye+tt+Ft;return{subtotal:Fe,sgst:Ye,cgst:tt,round_off:Ft,grand_total:Zt}})(),K={id:`local-${Date.now()}`,estimator:"doors",bill_no:F,door_type:is?.doorType||is?.door_type||w,panel_type:is?.panelType||is?.panel_type||j,sub_option:is?.subOption||is?.sub_option||L,glazing_type:is?.glazingType||is?.glazing_type||J,qty:is?.count||is?.qty||q,height:is?.height||fe,width:is?.width||le,glass_height:is?.glassHeight||is?.glass_height||te,glass_width:is?.glassWidth||is?.glass_width||ne,materials:x,subtotal:P.subtotal,sgst:P.sgst,cgst:P.cgst,round_off:P.round_off,grand_total:P.grand_total,created_at:new Date().toISOString()};rn(K),wr(x);try{yn(Fe=>({...Fe||{},...P}))}catch{}const ae=I.map((Fe,Ye)=>({estimator:"doors",session_id:F,s_no:Ye+1,row_id:String(Fe.rowId||`${Fe.batchId||""}-${Fe.id}`),batch_id:Fe.batchId||null,material_id:Fe.id,name:Fe.name,unit:Fe.unit,quantity:Number(Fe.quantity||0),supply_rate:Number(Fe.supplyRate||0),install_rate:Number(Fe.installRate||0),shop_id:Fe.shopId||"",shop_name:Fe.shopName||"",description:Fe.description||"",location:Fe.location||"",door_type:Fe.doorType||is?.doorType||is?.door_type||w||null,panel_type:Fe.panelType||is?.panelType||is?.panel_type||j||null,sub_option:Fe.subOption||is?.subOption||is?.sub_option||L||null,glazing_type:Fe.glazingType||is?.glazingType||is?.glazing_type||J||null,qty:is?.count||is?.qty||q,height:is?.height||fe,width:is?.width||le,glass_height:is?.glassHeight||is?.glass_height||te,glass_width:is?.glassWidth||is?.glass_width||ne,subtotal:P.subtotal,sgst:P.sgst,cgst:P.cgst,round_off:P.round_off,grand_total:P.grand_total}));try{await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"doors",session_id:F,items:ae})});const Ye=await(await ct(`/api/estimator-step9-items?session_id=${F}&estimator=doors`,{headers:{}})).json();js(Ye.items||[]);const tt=(Ps||[]).map(Ft=>I.some(as=>Ft.rowId===as.rowId||`${Ft.batchId||""}-${Ft.id}`==`${as.batchId||""}-${as.id}`)?{...Ft,isSaved:!0}:Ft);wr(tt),i({title:"Success",description:`${I.length} new material(s) saved successfully to database!`})}catch(Fe){console.warn("Failed to save step 9 to DB",Fe),i({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},G=x=>{let I=5381;for(let F=0;F<x.length;F+=1)I=(I<<5)+I^x.charCodeAt(F);return Math.abs(I>>>0).toString(36)},ve=()=>{const x=JSON.stringify({doorType:w,panelType:j,subOption:L,glazingType:J,count:q,height:fe,width:le,glassHeight:te,glassWidth:ne,selectedMaterials:(se||[]).map(I=>({materialId:I.materialId,selectedShopId:I.selectedShopId,selectedBrand:I.selectedBrand})),editable:Object.keys(at||{}).sort().map(I=>({id:I,...at[I]}))});return`batch-${G(x)}`},Le=()=>{const I=`${ve()}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,F=Qe(se,at).map(tt=>({id:tt.id,rowId:`${I}-${tt.id}`,batchId:I,name:tt.name,unit:tt.unit,quantity:at[tt.id]?.quantity??tt.quantity,supplyRate:at[tt.id]?.supplyRate??tt.rate,installRate:at[tt.id]?.installRate??0,shopId:tt.shopId,shopName:tt.shopName,description:Pt[tt.id]||"",location:Rs[tt.id]||"",doorType:w,panelType:j,subOption:L,glazingType:J,isSaved:!1}));if(F.length===0){A(9);return}const _=new Set((Ps||[]).map(tt=>tt.id)),U=F.filter(tt=>!_.has(tt.id));if(U.length===0){A(9);return}const K=[...Ps||[],...U],ae=new Map;for(const tt of K){const Ft=`${tt.id}`;ae.has(Ft)||ae.set(Ft,tt)}const Fe=Array.from(ae.values());wr(Fe),qe(Fe.map(tt=>({materialId:tt.id,selectedShopId:tt.shopId||"",selectedBrand:tt.brand||void 0,batchId:tt.batchId,rowId:tt.rowId})));const Ye={};Fe.forEach(tt=>{const Ft=tt.rowId||`${tt.batchId}-${tt.id}`;Ye[Ft]={quantity:Number(tt.quantity||0),supplyRate:Number(tt.supplyRate||tt.rate||0),installRate:Number(tt.installRate||0)}}),ns(Ye);try{const tt=pt(),Ft=tt*.09,Zt=tt*.09,as=Math.round(tt+Ft+Zt)-(tt+Ft+Zt),xs=tt+Ft+Zt+as;yn({doorType:w,panelType:j,subOption:L,glazingType:J,count:q,height:fe,width:le,glassHeight:te,glassWidth:ne,subtotal:tt,sgst:Ft,cgst:Zt,round_off:as,grand_total:xs})}catch{}xe([]),Dt({}),gs(tt=>{const Ft={...tt};return Object.keys(Ft).forEach(Zt=>{Zt.startsWith("group_")||delete Ft[Zt]}),Ft}),Nn(tt=>{const Ft={...tt};return Object.keys(Ft).forEach(Zt=>{Zt.startsWith("group_")||delete Ft[Zt]}),Ft}),A(9)},Xe=c===9||c===11?Qe(yt,Tt):Qe(),vt=c===9?Tt:at,ut=Xe.reduce((x,I)=>x+I.quantity*((vt[I.id]?.supplyRate??I.rate)+(vt[I.id]?.installRate??I.installRate??0)),0),Pe=ut*.09,Bt=ut*.09,_t=Math.round(ut+Pe+Bt)-(ut+Pe+Bt),xn=ut+Pe+Bt+_t,Dn=Me.length>0?Me.flatMap(x=>x.materials||[]):Ps&&Ps.length>0?Ps:Xe&&Xe.length>0?Xe:Es&&Es.materials&&Es.materials.length>0?Array.isArray(Es.materials)?Es.materials:JSON.parse(Es.materials||"[]"):Xe,ps=(()=>{const x=new Map;for(const F of Dn||[]){const _=F.doorType||F.door_type||is?.doorType||is?.door_type||w||"door",U=F.panelType||F.panel_type||is?.panelType||is?.panel_type||j||"",P=F.subOption||F.sub_option||is?.subOption||is?.sub_option||"",K=`${_}||${U}||${P}`;x.has(K)||x.set(K,[]),x.get(K).push(F)}const I=[];for(const[F,_]of x.entries()){const[U,P,K]=F.split("||"),ae=`group_${F}`,Fe=Pt[ae]||"",Ye=Rs[ae]||"";let tt=Number(Ze[ae]??is?.count??is?.qty??q??1);const Ft=String(Fe).match(/Qty:\s*(\d+(?:\.\d+)?)/);Ft&&(Ze[ae]===void 0||Ze[ae]===null)&&(tt=Number(Ft[1]));const Zt=_.reduce((ye,He)=>ye+Number(He.quantity||0)*Number(He.supplyRate??He.rate??0),0),as=tt>0?Zt/tt:Zt,xs=_.reduce((ye,He)=>ye+Number(He.quantity||0)*Number(He.installRate??0),0),Gs=tt>0?xs/tt:xs,Rn=Z({doorType:U})||U,V=String(Fe).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();I.push({id:ae,groupKey:F,name:Rn,location:Ye||"",description:V||"",unit:"pcs",quantity:tt,supplyRate:Number(as||0),installRate:Number(Ls[ae]??Gs??0),supplyAmount:Number(as*tt||0),installAmount:Number((Ls[ae]??Gs)*tt||0)})}return I})();(Lt||[]).filter(x=>x.item||x.item_name).map((x,I)=>{const F=x.group_key||x.groupKey||`${x.door_type||x.doorType||"door"}||${x.panel_type||x.panelType||""}||${x.sub_option||x.subOption||""}`;return{id:x.id,groupKey:F,name:x.item_name||x.item||x.name||x.door_label||x.doorType||x.door_type||"Door",location:x.location||"",description:x.description||"",unit:x.unit||"pcs",quantity:Number(x.quantity??x.qty??1),supplyRate:Number(x.supply_rate??x.supplyRate??0),installRate:Number(x.install_rate??x.installRate??0),supplyAmount:Number(x.supply_amount??0),installAmount:Number(x.install_amount??0),doorType:x.door_type||x.doorType,panelType:x.panel_type||x.panelType,subOption:x.sub_option||x.subOption}});const Qn=(Me.length===0?ps.filter(x=>!(Lt||[]).some(F=>(F.group_key||F.groupKey||`${F.door_type||""}||${F.panel_type||""}||${F.sub_option||""}`)===x.groupKey)):Me.map((x,I)=>({id:`accumulated_${I}`,groupKey:`${x.doorType||"door"}||${x.panelType||""}||${x.subOption||""}`,name:x.doorLabel||ge({doorType:x.doorType,panelType:x.panelType,subOption:x.subOption})||x.doorType,location:x.location||"",description:x.description||"",unit:"pcs",quantity:x.count||1,supplyRate:x.materials?.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.supplyRate??_.rate??0),0)||0,installRate:x.materials?.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.installRate??0),0)||0,supplyAmount:x.materials?.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.supplyRate??_.rate??0),0)||0,installAmount:x.materials?.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.installRate??0),0)||0})))||[],kn=Qn.filter(x=>Mt.includes(x.id)),Wn=Qn.reduce((x,I)=>{const F=Number(ys[I.id]??(I.quantity||0)),_=Number(Ms[I.id]??I.supplyRate??I.rate??0);return x+F*_},0);Qn.reduce((x,I)=>{const F=Number(ys[I.id]??(I.quantity||0));return x+F*Number(I.installRate||0)},0);const Xr=kn.reduce((x,I)=>{const F=Number(ys[I.id]??(I.quantity||0)),_=Number(Ms[I.id]??I.supplyRate??I.rate??0);return x+F*_},0);Es&&Es.bill_no;const v=Es&&Es.created_at?new Date(Es.created_at).toISOString().slice(0,10):Ht,N=x=>{if(!x)return!1;const I=(x.name||"").toString().trim(),F=Number(x.quantity||0),_=Number(x.supplyRate??x.rate??0),U=Number(x.installRate??0),P=(x.description||"").toString().trim(),K=(x.location||"").toString().trim();return!!I||F>0||_>0||U>0||!!P||!!K};return(Me||[]).map(x=>{const I=(x.materials||[]).filter(N),F=I.reduce((U,P)=>U+Number(P.quantity||0)*Number(P.supplyRate??P.rate??0),0),_=I.reduce((U,P)=>U+Number(P.quantity||0)*Number(P.installRate??0),0);return{...x,materials:I,supplySubtotal:F,installSubtotal:_,subtotal:F+_}}).filter(x=>(x.materials||[]).length>0),e.jsx(ka,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Door Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(ks,{className:"border-border/50",children:e.jsx(Ws,{className:"pt-8 min-h-96",children:e.jsxs(Fl,{mode:"wait",children:[c===1&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Door Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:st.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No door products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Door."})]}):e.jsx("div",{className:"grid gap-3",children:st.map(x=>{const I=Ce(x),F=(x?.id||I).toString(),_=d===F;return e.jsx(Be,{variant:_?"default":"outline",onClick:()=>nt(x),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:I||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:_e(x)})]})},F)})})})]},"step-select-product"),c===11&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Mv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:v})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all-groups",checked:(()=>{const x=(Qn||[]).map(I=>I.id);return x.length>0&&x.every(I=>ot.includes(I))})(),onCheckedChange:x=>{Rt(x?(Qn||[]).map(I=>I.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Qn||[]).map((x,I)=>{const F=Number(Ms[x.id]??x.supplyRate??x.rate??0),_=Number(Ls[x.id]??x.installRate??0);let U=Number(ys[x.id]??(x.quantity||0));const P=U*F,K=U*_;return Rs[x.id]??x.location,Pt[x.id]??x.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{checked:ot.includes(x.id),onCheckedChange:()=>{Rt(ae=>ae.includes(x.id)?ae.filter(Fe=>Fe!==x.id):[...ae,x.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:I+1}),e.jsx("td",{className:"border px-2 py-1",children:x.productLabel||x.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx($e,{value:Rs[x.id]??x.location??"",onChange:ae=>Nn(Fe=>({...Fe,[x.id]:ae.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:Pt[x.id]??x.description??"",onChange:ae=>gs(Fe=>({...Fe,[x.id]:ae.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{value:Zs[x.id]??x.unit??"",onChange:ae=>En(Fe=>({...Fe,[x.id]:ae.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",value:U,onChange:ae=>Ln(Fe=>({...Fe,[x.id]:Number(ae.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:F,onChange:ae=>Os(Fe=>({...Fe,[x.id]:Number(ae.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:_,onChange:ae=>Bs(Fe=>({...Fe,[x.id]:Number(ae.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",P.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",K.toFixed(2)]})]},x.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Wn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!u&&e.jsx(Be,{variant:"outline",onClick:()=>A(9),children:"Back"}),e.jsx(Be,{variant:"destructive",disabled:ot.length===0,onClick:async()=>{if(console.log("Delete selected:",ot),Lt.length>0&&mt)try{await ct("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:ot,estimator:"doors"})});const x=await ct(`/api/estimator-step11-groups?session_id=${mt}&estimator=doors`,{headers:{}});if(x.ok){const I=await x.json();Hs(I.items||[])}i({title:"Success",description:"Step 11 data deleted from database!"})}catch(x){console.warn("Failed to delete step 11 from DB",x),i({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(Me.length===0)if(Es){console.log("Deleting from saved BOQ");const x=ot.map(U=>U.replace("group_","")),I=Array.isArray(Es.materials)?Es.materials:JSON.parse(Es.materials||"[]");console.log("Current materials:",I.length);const F=I.filter(U=>{const P=U.doorType||U.door_type||is?.doorType||is?.door_type||w||"door",K=U.panelType||U.panel_type||is?.panelType||is?.panel_type||j||"",ae=U.subOption||U.sub_option||is?.subOption||is?.sub_option||L||"",Fe=`${P}||${K}||${ae}`,Ye=x.includes(Fe);return console.log("Checking material:",U.id||U.name,Fe,"match:",Ye),!Ye});console.log("Filtered materials:",F.length);const _={...Es,materials:F};rn(_),ct("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}).then(()=>console.log("Saved updated BOQ")).catch(U=>console.error("Error saving BOQ:",U))}else{console.log("Deleting from Step 11 saved materials");const x=ot.map(_=>_.replace("group_","")),F=((Ps&&Ps.length>0?Ps:Xe)||[]).filter(_=>{const U=_.doorType||_.door_type||is?.doorType||is?.door_type||w||"door",P=_.panelType||_.panel_type||is?.panelType||is?.panel_type||j||"",K=_.subOption||_.sub_option||is?.subOption||is?.sub_option||L||"",ae=`${U}||${P}||${K}`;return!x.includes(ae)});wr(F)}else if(Me.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",Me.length);let x;if(ot.some(I=>I.startsWith("accumulated_"))){const I=ot.filter(F=>F.startsWith("accumulated_")).map(F=>parseInt(F.replace("accumulated_",""))).sort((F,_)=>_-F);x=[...Me],I.forEach(F=>{F>=0&&F<x.length&&x.splice(F,1)})}else{const I=ot.map(F=>F.replace("group_",""));x=Me.filter(F=>{const _=`${F.doorType||"door"}||${F.panelType||""}||${F.subOption||""}`,U=I.includes(_);return console.log("Checking product:",F.id,_,"match:",U),!U})}console.log("Accumulated products after:",x.length),me(x),ct("/api/accumulated-products/doors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:x})}).catch(I=>console.error("Failed to save accumulated products after delete",I))}Rt([])},children:"Delete Selected"}),e.jsx(Be,{onClick:ga,children:"Add Product"}),e.jsx(Be,{onClick:ha,disabled:ds,children:"Save"}),e.jsx(Be,{onClick:async()=>{kt(ot);const x=(kn||[]).map((I,F)=>{const _=Number(Ms[I.id]??I.supplyRate??I.rate??0),U=Number(Ls[I.id]??I.installRate??0);let P=Number(ys[I.id]??(I.quantity||0));return{s_no:F+1,item:I.name,location:Rs[I.id]??I.location??"",description:Pt[I.id]??I.description??"",unit:Zs[I.id]??I.unit??"",qty:P,supply_rate:_,install_rate:U,supply_amount:P*_,install_amount:P*U}});try{const I=await ct(`/api/estimator-step12-qa-selection?session_id=${mt}&estimator=doors`,{headers:{}});let F=[];I.ok&&(F=(await I.json()).items||[]);const _=x.filter(K=>!F.some(ae=>ae.item===K.item&&ae.description===K.description&&ae.unit===K.unit));if(_.length===0){A(12);return}await ct("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"doors",session_id:mt,items:_})});const P=await(await ct(`/api/estimator-step12-qa-selection?session_id=${mt}&estimator=doors`,{headers:{}})).json();sr(P.items||[]),i({title:"Success",description:`${_.length} new material(s) saved successfully to database!`}),A(12)}catch(I){console.warn("Failed to save step 12 to DB",I),i({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),c===4&&w&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(be[w]||[]).map(x=>e.jsx(Be,{onClick:()=>{Q(x),z(null)},className:`w-full text-black ${L===x?"bg-cyan-500":"bg-white"}`,children:x},x))}),w==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:je.map(x=>e.jsx(Be,{onClick:()=>z(x),className:`w-full text-black ${k===x?"bg-cyan-500":"bg-white"}`,children:x},x))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>A(3),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{onClick:()=>A(5),disabled:!L||w==="flush"&&L==="With Vision Panel"&&!k,children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),c===5&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"count",children:"Count"}),e.jsx($e,{id:"count",type:"number",placeholder:"1",value:q||"",onChange:x=>X(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"height",children:"Height"}),e.jsx($e,{id:"height",type:"number",placeholder:"7",value:fe||"",onChange:x=>ee(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"width",children:"Width"}),e.jsx($e,{id:"width",type:"number",placeholder:"3",value:le||"",onChange:x=>ue(x.target.value?parseFloat(x.target.value):null)})]})]}),we()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(Ve,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx($e,{id:"glassHeight",type:"number",placeholder:"72",value:te||"",onChange:x=>re(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx($e,{id:"glassWidth",type:"number",placeholder:"24",value:ne||"",onChange:x=>oe(x.target.value?parseFloat(x.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>A(we()?.requiresGlazing?4:3),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{disabled:!q||!fe||!le||we()?.requiresGlazing&&(!te||!ne),onClick:()=>A(6),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),c===6&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",we()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Fn,{id:"select-all-materials",checked:se.length===Te.length&&Te.length>0,onCheckedChange:x=>{if(x){const I=Te.map(F=>{const _=n.filter(ae=>Vr(ae.product)===Vr(F.product)&&Vr(ae.name)===Vr(F.name)).map(ae=>({id:ae.id,brand:Kp(ae),shopId:ae.shopId,rate:ae.rate,unit:ae.unit,shopName:s.find(Fe=>Fe.id===ae.shopId)?.name||"Unknown"})),P=Array.from(new Set(_.map(ae=>ae.brand))).sort()[0]||"Generic",K=_.filter(ae=>ae.brand===P).sort((ae,Fe)=>(ae.rate||0)-(Fe.rate||0));return{materialId:F.id,selectedBrand:P,selectedShopId:K[0]?.shopId||""}});xe(I)}else xe([])}}),e.jsx(Ve,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Te.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",w||o||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(w?hR[w]||[w]:[o||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",n.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(n.map(x=>x.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Te.map(x=>{const I=se.some(Fe=>Fe.materialId===x.id),F=se.find(Fe=>Fe.materialId===x.id),_=n.filter(Fe=>Vr(Fe.product)===Vr(x.product)&&Vr(Fe.name)===Vr(x.name)).map(Fe=>({id:Fe.id,brand:Kp(Fe),shopId:Fe.shopId,rate:Fe.rate,unit:Fe.unit,shopName:s.find(Ye=>Ye.id===Fe.shopId)?.name||"Unknown"})),U=Array.from(new Set(_.map(Fe=>Fe.brand))).sort(),K=se.find(Fe=>Fe.materialId===x.id)?.selectedBrand||U[0]||"Generic",ae=_.filter(Fe=>Fe.brand===K).sort((Fe,Ye)=>(Fe.rate||0)-(Ye.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fn,{id:x.id,checked:I,onCheckedChange:()=>nr(x.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:x.id,className:"font-medium cursor-pointer",children:x.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x.code}),I&&U.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Ve,{className:"text-xs",children:"Select Brand:"}),e.jsxs(Bn,{value:K,onValueChange:Fe=>gn(x.id,Fe),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:U.map(Fe=>e.jsx(dn,{value:Fe,children:Fe},Fe))})]})]}),I&&ae.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Ve,{className:"text-xs",children:"Select Shop:"}),e.jsxs(Bn,{value:F?.selectedShopId||ae[0].shopId,onValueChange:Fe=>sn(x.id,Fe),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:ae.map(Fe=>e.jsxs(dn,{value:Fe.shopId||"",children:[Fe.shopName," - ",Fe.rate,"/",x.unit,Fe.rate===ae[0].rate&&" (Best)"]},Fe.shopId))})]})]})]})]})},x.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>A(1),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{disabled:se.length===0,onClick:()=>A(7),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),c===7&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:Qe().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),Qe().map(x=>{const I=se.find(_=>_.materialId===x.id),F=n.find(_=>_.id===x.id);return e.jsxs("div",{className:Vs("p-3 border rounded grid grid-cols-8 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:x.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:I?.selectedBrand||F?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx($e,{type:"number",value:at[x.id]?.quantity??x.quantity,onChange:_=>$a(x.id,parseInt(_.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:x.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:x.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx($e,{type:"number",value:at[x.id]?.supplyRate??x.rate,onChange:_=>ya(x.id,parseFloat(_.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((at[x.id]?.quantity??x.quantity)*((at[x.id]?.supplyRate??x.rate)+(at[x.id]?.installRate??0))).toFixed(2)]})]},x.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>A(6),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{onClick:()=>A(8),disabled:Qe().length===0,children:["Next: Generate BOM"," ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),c===8&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(Wo,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:Z()||"Door"})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[fe," ft  ",le," ft (Qty: ",q,")"]})]}),J&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:J})]}),we()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[te,'"  ',ne,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(x=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:x==="Qty"||x.includes("Rate")||x.includes("Amount")?"right":"left"},children:x},x))})}),e.jsx("tbody",{children:Qe().map((x,I)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:I+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:x.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:x.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:x.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:x.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:x.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(x.quantity*x.rate).toFixed(2)})]},x.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:se.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:Qe().reduce((x,I)=>x+I.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",pt().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Be,{onClick:()=>A(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:fi,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(hi,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:oa,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Be,{onClick:()=>Le(),disabled:Qe().length===0,children:["Add to BOM ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{A(1),h(""),m(""),b(null),B(null),$(null),X(1),ee(7),ue(3),re(6),oe(2),xe([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(er,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),c===12&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Mv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:v})})]}),!kn||kn.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(kn||[]).map((x,I)=>{const F=Number(Ms[x.id]??x.supplyRate??x.rate??0),_=Number(Ls[x.id]??x.installRate??0);let U=Number(ys[x.id]??(x.quantity||0));const P=U*F,K=U*_,ae=Rs[x.id]??x.location??"",Fe=Pt[x.id]??x.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:I+1}),e.jsx("td",{className:"border px-2 py-1",children:x.productLabel||x.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:ae||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:Fe||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Zs[x.id]??x.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:U}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",F.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",P.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",K.toFixed(2)]})]},x.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Xr||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{variant:"outline",onClick:()=>A(11),children:"Back"}),e.jsx(Be,{onClick:async()=>{if(Wr.length>0){i({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const x=await ct(`/api/estimator-step12-qa-selection?session_id=${mt}&estimator=doors`,{headers:{}});let I=[];x.ok&&(I=(await x.json()).items||[]);const _=(kn||[]).map((K,ae)=>{const Fe=Number(Ms[K.id]??K.supplyRate??K.rate??0),Ye=Number(Ls[K.id]??K.installRate??0),tt=Number(ys[K.id]??(K.quantity||0));return{s_no:ae+1,item:K.name,location:Rs[K.id]??K.location??"",description:Pt[K.id]??K.description??"",unit:Zs[K.id]??K.unit??"",qty:tt,supply_rate:Fe,install_rate:Ye,supply_amount:tt*Fe,install_amount:tt*Ye}}).filter(K=>!I.some(ae=>ae.item===K.item&&ae.description===K.description&&ae.unit===K.unit));if(_.length===0){i({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await ct("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"doors",session_id:mt,items:_})});const P=await(await ct(`/api/estimator-step12-qa-selection?session_id=${mt}&estimator=doors`,{headers:{}})).json();sr(P.items||[]),i({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(x){console.warn("Failed to save step 12 to DB",x),i({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Be,{onClick:()=>A(1),children:"Add More Products"}),e.jsx(Be,{onClick:xa,children:"Export Excel"})]})]},"step-qa-boq"),c===10&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill No"}),e.jsx($e,{value:mt,onChange:x=>ls(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill Date"}),e.jsx($e,{type:"date",value:Ht,onChange:x=>Kt(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Due Date"}),e.jsx($e,{type:"date",value:lt,onChange:x=>Gt(x.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Name"}),e.jsx($e,{value:rs,onChange:x=>Is(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Address"}),e.jsx($e,{value:on,onChange:x=>ws(x.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Terms & Conditions"}),e.jsx($e,{value:Yt,onChange:x=>Cs(x.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Ve,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:fs,onChange:x=>ms(x.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),Qe().map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]}),fs&&e.jsx($e,{placeholder:"Enter description for selected material",value:Pt[fs]||"",onChange:x=>gs(I=>({...I,[fs]:x.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:Mv,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",mt]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:St})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",Ht]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",lt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",Yt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",rs]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(x=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:x},x))})}),e.jsx("tbody",{children:Xe.map((x,I)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:I+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.id&&Pt[x.id]||x.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(x.quantity||0)*Number(x.rate||0)||0).toFixed(2)})]},x.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:ut.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Pe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Bt.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:_t.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",xn.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",xn.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{onClick:()=>A(8),variant:"outline",children:"Back"}),e.jsx(Be,{onClick:Ga,children:"Export PDF"})]})]}),c===9&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{variant:"destructive",onClick:ra,disabled:qn.length===0,children:"Delete Selected"}),e.jsx(Be,{type:"button",onClick:ie,disabled:Xe.length===0,children:"Save"}),e.jsx(Be,{onClick:async()=>{const x=Qe(yt,Tt),I=qn.length>0?x.filter(K=>qn.includes(K.rowId||`${K.batchId}-${K.id}`)):x,F=I.map(K=>{const ae=K.rowId||`${K.batchId||""}-${K.id}`;return{id:K.id,rowId:ae,batchId:K.batchId,name:K.name,unit:K.unit,quantity:Tt[ae]?.quantity??Tt[K.id]?.quantity??K.quantity,supplyRate:Tt[ae]?.supplyRate??Tt[K.id]?.supplyRate??K.rate,installRate:Tt[ae]?.installRate??Tt[K.id]?.installRate??K.installRate??0,shopId:K.shopId,shopName:K.shopName,description:Pt[ae]||Pt[K.id]||"",location:Rs[ae]||Rs[K.id]||"",doorType:K.doorType,panelType:K.panelType,subOption:K.subOption,glazingType:K.glazingType}});if(F.length===0)return;const _=I[0],U={id:`local-${Date.now()}`,estimator:"doors",bill_no:mt,door_type:_?.doorType||is?.doorType||is?.door_type||w,panel_type:_?.panelType||is?.panelType||is?.panel_type||j,sub_option:_?.subOption||is?.subOption||is?.sub_option||L,glazing_type:_?.glazingType||is?.glazingType||is?.glazing_type||J,qty:is?.count||is?.qty||q,height:is?.height||fe,width:is?.width||le,glass_height:is?.glassHeight||is?.glass_height||te,glass_width:is?.glassWidth||is?.glass_width||ne,materials:F,subtotal:F.reduce((K,ae)=>K+Number(ae.quantity||0)*(Number(ae.supplyRate||0)+Number(ae.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};rn(U);try{await zn()}catch{}const P=typeof window<"u"?new URLSearchParams(window.location.search).get("project"):null;if(P)try{const K=F.map((xs,Gs)=>({s_no:Gs+1,item:xs.name,description:xs.description,unit:xs.unit,qty:xs.quantity,supply_rate:Number(xs.supplyRate||0),install_rate:Number(xs.installRate||0)})),ae=K.reduce((xs,Gs)=>xs+Number(Gs.qty||0)*(Number(Gs.supply_rate||0)+Number(Gs.install_rate||0)),0),Fe=+(+ae*.09).toFixed(2),Ye=+(+ae*.09).toFixed(2),tt=+(ae+Fe+Ye).toFixed(2),Ft=`${U.sub_option||""}${U.sub_option?"  ":""}${U.door_type||""}`.trim(),Zt={groups:[{id:`g-${Date.now()}`,title:Ft||"Item Group",description:"",unit:"",qty:1,supply_rate:Number(is?.grand_total??tt),install_rate:0,rows:K,totals:{subtotal:ae,sgst:Fe,cgst:Ye,grand_total:tt}}]};(await ct("/api/boq-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:P,estimator:"doors",table_data:Zt})})).ok&&(i({title:"Success",description:"Added to BOQ"}),t(`/create-boq?project=${encodeURIComponent(P)}`))}catch(K){console.error("Failed to save BOQ item:",K),i({title:"Error",description:"Failed to add to BOQ",variant:"destructive"})}Yr([]),A(11)},disabled:Xe.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{className:"text-sm font-semibold",children:"Saved BOQs"}),gr.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:gr.map(x=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.bill_no||`${x.estimator} - ${x.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(x.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{onClick:()=>Tr(x),size:"sm",children:"Load"}),e.jsx(Be,{variant:"destructive",onClick:()=>ua(x.id),size:"sm",children:"Delete"})]})]},x.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all",checked:(()=>{const x=(c===9?Qe(yt,Tt):Qe()).map(I=>I.rowId||I.id);return qn.length===x.length&&x.length>0})(),onCheckedChange:Gr})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const x=new Map,I=new Map;Xe.forEach(U=>{const P=U.doorType||U.door_type||is?.doorType||is?.door_type||w||"door",K=U.panelType||U.panel_type||is?.panelType||is?.panel_type||j||"",ae=U.subOption||U.sub_option||is?.subOption||is?.sub_option||"",Fe=`${P}||${K}||${ae}`;if(x.has(Fe)||x.set(Fe,[]),x.get(Fe).push(U),!I.has(Fe)){const Ye=Ne.find(Zt=>Zt.value===P);let tt=Ye?Ye.label:pf[P]||P;/door/i.test(tt)||(tt=`${tt} Door`);const Ft=`${tt}${ae?" ("+ae+")":""}`;I.set(Fe,{label:Ft})}});const F=[];let _=0;for(const[U,P]of x.entries()){const K=P.map(Ft=>Ft.rowId||`${Ft.batchId||""}-${Ft.id}`),ae=K.every(Ft=>qn.includes(Ft)),Fe=`group_${U}`,Ye=Pt[Fe]||"",tt=Number(Ze[Fe]??is?.count??is?.qty??q??1);F.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{id:`group-${U}`,checked:ae,onCheckedChange:()=>{Yr(ae?Ft=>Ft.filter(Zt=>!K.includes(Zt)):Ft=>Array.from(new Set([...Ft,...K])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:I.get(U)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx($e,{placeholder:"Group description",value:Ye?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:Ft=>gs(Zt=>({...Zt,[Fe]:Ft.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",className:"h-8 text-center",value:Ze[Fe]??tt,onChange:Ft=>{const Zt=Ft.target.value?parseFloat(Ft.target.value):0;us(as=>({...as,[Fe]:Zt})),gs(as=>{const xs=(as[Fe]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...as,[Fe]:xs?xs+`
Qty: `+Zt:"Qty: "+Zt}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${U}`));for(const Ft of P){_+=1;const Zt=Ft.rowId||`${Ft.batchId}-${Ft.id}`,as=Number(vt[Zt]?.supplyRate??vt[Ft.id]?.supplyRate??Ft.rate??0),xs=Number(vt[Zt]?.installRate??vt[Ft.id]?.installRate??Ft.installRate??0),Gs=as+xs,Rn=Number(vt[Zt]?.quantity??vt[Ft.id]?.quantity??Ft.quantity??0),V=Rn*Gs,ye=Pt[Zt]??Pt[Ft.id]??Ft.description??"",He=String(ye).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();F.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:_}),e.jsx("td",{className:"border px-2 py-1",children:Ft.productLabel||Ft.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:Pt[Zt]??Pt[Ft.id]??He,onChange:it=>gs(bt=>({...bt,[Zt]:it.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Zs[Zt]??Zs[Ft.id]??Ft.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",className:"h-8 text-center",value:Rn,onChange:it=>$a(Zt,it.target.value?parseFloat(it.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:Gs,onChange:it=>{const bt=parseFloat(it.target.value||"0"),es=Number(vt[Zt]?.supplyRate??vt[Ft.id]?.supplyRate??as),hs=Math.max(0,bt-es);ya(Zt,es),rr(Zt,hs)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",V.toFixed(2)]})]},Zt))}}return F})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Be,{variant:"outline",onClick:()=>A(8),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Be,{onClick:()=>A(10),children:"Finalize PO"}),e.jsxs(Be,{onClick:oa,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const Pv="/image.png",GG=(t,s,n,r,i)=>{const c=(s||"").toLowerCase(),A=n*r*i;return c==="sqft"?Math.ceil(A):i||1},qG={roller:["Manual - Translucent","Manual - Blackout","Motorized - Translucent","Motorized - Blackout"],zebra:["Manual - Blackout","Motorized - Blackout"],roman:["Manual - Translucent","Manual - Blackout"],venetian:["Aluminium 25mm","Aluminium 50mm","Faux Wood"],vertical:["Standard Fabric","Dim-out Fabric"],wooden:["Natural Wood 35mm","Natural Wood 50mm","Bamboo"]},WG=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),_r=t=>(t||"").toString().toUpperCase(),YG={roller:["ROLLER","ROLLER BLIND","ROLLER BLINDS","CHAIN","TUBE"],zebra:["ZEBRA","DAY NIGHT","DAY-NIGHT","SHEER","D/N"],roman:["ROMAN","ROMAN BLIND","ROMAN BLINDS","PLEATED"],venetian:["VENETIAN","SLAT","ALUMINIUM SLAT","WOOD SLAT"],vertical:["VERTICAL","LOUVER","VERTICAL BLIND","VERTICAL BLINDS"],wooden:["WOOD","BAMBOO","WOODEN","WOODEN BLIND","WOODEN BLINDS"]},Fy={roller:"Roller Blind",zebra:"Zebra Blind",roman:"Roman Blind",venetian:"Venetian Blind",vertical:"Vertical Blind",wooden:"Wooden Blind"},XG=[{value:"roller",label:"Roller Blinds"},{value:"zebra",label:"Zebra Blinds"},{value:"roman",label:"Roman Blinds"},{value:"venetian",label:"Venetian Blinds"},{value:"vertical",label:"Vertical Blinds"},{value:"wooden",label:"Wooden Blinds"}],JG=(t,s)=>{const n=_r(t.product),r=_r(t.name),i=_r(t.category),c=_r(t.subCategory),u=(YG[s]||[s.toUpperCase()]).some(o=>n.includes(o)||r.includes(o)||i.includes(o)||c.includes(o)),d=Fy[s],h=d&&_r(n).includes(_r(d));return u||h},uf=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function ZG(){const{shops:t,materials:s,products:n}=ei(),{toast:r}=ma(),i=S.useRef(""),c=S.useRef(null),[A,u]=S.useState(1),d=typeof window<"u"&&window.location.search.includes("step=11"),[h,o]=S.useState(""),[m,y]=S.useState(""),[p,j]=S.useState(null),[b,w]=S.useState(null),[B,L]=S.useState(1),[Q,k]=S.useState(4),[z,J]=S.useState(4),[$,q]=S.useState([]),[X,fe]=S.useState([]),[ee,le]=S.useState([]),[ue,te]=S.useState([]),[re,ne]=S.useState(null),[oe,se]=S.useState(null),[xe,Me]=S.useState(null),[me,Z]=S.useState({}),[ge,we]=S.useState([]),[pe,be]=S.useState({}),[je,Ne]=S.useState("Concept Trunk Interiors"),[Je,Qe]=S.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[pt,Te]=S.useState("33ASOPS5560M1Z1"),[Ce,_e]=S.useState(""),[de,dt]=S.useState(new Date().toISOString().slice(0,10)),[st,nt]=S.useState(""),[at,Dt]=S.useState("50% Advance and 50% on Completion"),[yt,qe]=S.useState(""),[Tt,ns]=S.useState(""),[Ts,vs]=S.useState(""),[Ns,et]=S.useState({}),[De,rt]=S.useState({}),[mt,ls]=S.useState({}),[Ht,Kt]=S.useState({}),[lt,Gt]=S.useState({}),[Yt,Cs]=S.useState({}),[rs,Is]=S.useState([]),[on,ws]=S.useState([]),[St,qt]=S.useState(""),[Pt,gs]=S.useState([]),[Rs,Nn]=S.useState([]),[ys,Ln]=S.useState([]),[Zs,En]=S.useState(!1);S.useEffect(()=>{ct("/api/accumulated-products/blinds",{headers:{}}).then(G=>G.json()).then(G=>{fe(G.data||[])}).catch(G=>console.error("Failed to load accumulated products",G))},[]),S.useEffect(()=>{if(typeof window<"u"){const ve=new URLSearchParams(window.location.search).get("step");if(ve){const Le=parseInt(ve,10);Le>=1&&Le<=12&&u(Le)}}},[]),S.useEffect(()=>{A===12&&ct("/api/accumulated-products/blinds",{headers:{}}).then(G=>G.json()).then(G=>{const ve=G.data||[];fe(ve),console.debug("Restored blinds_accumulated_products for Step 12:",ve.length)}).catch(G=>console.error("Failed to load accumulated products for Step 12",G))},[A]);const Ls=G=>{const ve=G?.blindType??p,Le=G?.subOption??b;if(!ve)return null;const Xe=XG.find(Pe=>Pe.value===ve);let vt=Xe?Xe.label:Fy[ve]||ve;/blind/i.test(vt)||(vt=`${vt} Blind`);const ut=Le?` - ${Le}`:"";return`${vt}${ut}`},Bs=()=>{const G=(m||"").toString();if(!p&&!G)return null;const ve=G||Ls(),Le=G||Fy[p]||p;return{label:ve,productName:Le}},Ms=()=>{const G=(m||"").toString();if(!p&&!G||!s.length)return[];const ve=G||(p?Fy[p]:"");let Le=[];if(ve&&(Le=s.filter(vt=>{const ut=(vt.product||"").toString();if(!ut||!ve)return!1;const Pe=_r(ut),Bt=_r(ve);return Pe.includes(Bt)||Bt.includes(Pe)})),(!Le||Le.length===0)&&!G&&(Le=p?s.filter(vt=>JG(vt,p)):s.filter(vt=>{const ut=(vt.product||"").toString();if(!ve)return!1;const Pe=_r(ut),Bt=_r(ve);return Pe.includes(Bt)||Bt.includes(Pe)})),Le.length===0)return[];const Xe=new Map;for(const vt of Le){const ut=`${_r(vt.product)}__${_r(vt.name)}__${WG(vt.code)}`,Pe=Xe.get(ut);(!Pe||(vt.rate||0)<(Pe.rate||0))&&Xe.set(ut,vt)}return Array.from(Xe.values())},Os=(G,ve)=>{const Le=G||$,Xe=ve||me;return Le.map(vt=>{let ut=Mt.find(Wn=>Wn.id===vt.materialId);if(ut||(ut=s.find(Wn=>Wn.id===vt.materialId)),!ut)return null;const Pe=s.find(Wn=>{const Xr=_r(Wn.product)===_r(ut.product),v=_r(Wn.name)===_r(ut.name),N=Wn.shopId===vt.selectedShopId,x=uf(Wn)===(vt.selectedBrand||"Generic");return Xr&&v&&N&&x})||ut,Bt=t.find(Wn=>Wn.id===vt.selectedShopId),_t=vt.rowId||(vt.batchId?`${vt.batchId}-${Pe.id}`:Pe.id),xn=Xe[_t]||Xe[Pe.id]||Xe[ut.id],Dn=GG(Pe.name,Pe.unit,z||4,Q||4,B||1),ps=xn?.quantity??Dn,Qs=xn?.supplyRate??Pe.rate??0,Qn=xn?.installRate??0,kn=(oe||[]).find(Wn=>Wn.rowId===_t||`${Wn.batchId||""}-${Wn.id}`===_t);return{id:Pe.id,batchId:vt.batchId,rowId:_t,name:Pe.name,quantity:ps,unit:Pe.unit,rate:Qs,shopId:vt.selectedShopId,shopName:Bt?.name||"Unknown",installRate:Qn,blindType:kn?.blindType||kn?.blind_type||void 0,subOption:kn?.subOption||kn?.sub_option||void 0,productLabel:kn?.productLabel||void 0}}).filter(vt=>vt!==null)},ot=()=>Os().reduce((G,ve)=>G+ve.quantity*(ve.rate+(ve.installRate||0)),0),Rt=G=>{q(G?Mt.map(ve=>({materialId:ve.id,selectedShopId:ve.shopId,selectedBrand:uf(ve)||"Generic"})):[])},Mt=Ms(),kt=G=>(G?.name||G?.title||G?.label||G?.productName||G?.product||"").toString(),fs=G=>(G?.category_name||G?.category||G?.type||G?.group||G?.section||"").toString(),ms=G=>{const ve=_r(kt(G)),Le=_r(fs(G)),Xe=_r(G?.subcategory_name||G?.subCategory?.name||G?.subcategory||G?.subCategory||""),vt=ve.includes("BLIND")||ve.includes("BLINDS")||ve.includes("ROLLER")||ve.includes("ZEBRA")||ve.includes("ROMAN")||ve.includes("VENETIAN")||ve.includes("VERTICAL")||ve.includes("CHICK")||Le.includes("BLIND")||Le.includes("BLINDS")||Xe.includes("BLIND")||Xe.includes("BLINDS"),Pe=!(ve.includes("BLIND")||ve.includes("BLINDS")||Le.includes("BLIND")||Le.includes("BLINDS")||Xe.includes("BLIND")||Xe.includes("BLINDS"))&&(ve.includes("DOOR")||ve.includes("PIPE")||ve.includes("PLUMB")||ve.includes("ELECTRICAL")||ve.includes("SWITCH")||ve.includes("SOCKET")||ve.includes("CEILING")||ve.includes("GYPSUM")||ve.includes("FLOORING")||ve.includes("PAINT")||ve.includes("CIVIL")||ve.includes("WALL")||Le.includes("DOOR")||Le.includes("PIPE")||Le.includes("PLUMB")||Le.includes("ELECTRICAL")||Le.includes("CEILING")||Le.includes("FLOORING")||Le.includes("PAINT")||Le.includes("CIVIL")||Xe.includes("DOOR")||Xe.includes("PIPE")||Xe.includes("PLUMB")||Xe.includes("ELECTRICAL")||Xe.includes("CEILING")||Xe.includes("FLOORING")||Xe.includes("PAINT"));return vt&&!Pe},Ds=G=>{const ve=_r(G);return ve.includes("ROLLER")?"roller":ve.includes("ZEBRA")||ve.includes("DAY")||ve.includes("NIGHT")?"zebra":ve.includes("ROMAN")?"roman":ve.includes("VENETIAN")?"venetian":ve.includes("VERTICAL")?"vertical":ve.includes("WOOD")||ve.includes("BAMBOO")?"wooden":null},js=(n||[]).filter(ms).slice().sort((G,ve)=>{const Le=kt(G),Xe=kt(ve);return Le.localeCompare(Xe)}),Lt=G=>{const ve=kt(G);o(G.id||ve),y(ve);const Le=Ds(ve);j(Le||p),w(null),q([]),Z({}),et({}),rt({}),u(6)};S.useEffect(()=>{A===9&&cr()},[A]),S.useEffect(()=>{(async()=>{if(Ce)try{const ve=await ct(`/api/estimator-step9-items?session_id=${Ce}&estimator=blinds`,{headers:{}});if(ve.ok){const ut=(await ve.json()).items||[];if(gs(ut),ut.length>0){const Pe=ut[0];se(ut.map(Bt=>({id:Bt.material_id,rowId:Bt.row_id,batchId:Bt.batch_id,name:Bt.name,unit:Bt.unit,quantity:Bt.quantity,supplyRate:Bt.supply_rate,installRate:Bt.install_rate,shopId:Bt.shop_id,shopName:Bt.shop_name,description:Bt.description,location:Bt.location,blindType:Bt.blind_type||Bt.door_type,subOption:Bt.sub_option}))),Me({blindType:Pe.blind_type||Pe.door_type,subOption:Pe.sub_option,count:Pe.qty,height:Pe.height,width:Pe.width,subtotal:Pe.subtotal,sgst:Pe.sgst,cgst:Pe.cgst,round_off:Pe.round_off,grand_total:Pe.grand_total})}}const Le=await ct(`/api/estimator-step11-groups?session_id=${Ce}&estimator=blinds`,{headers:{}});if(Le.ok){const vt=await Le.json();Nn(vt.items||[])}const Xe=await ct(`/api/estimator-step12-qa-selection?session_id=${Ce}&estimator=blinds`,{headers:{}});if(Xe.ok){const vt=await Xe.json();Ln(vt.items||[])}}catch(ve){console.warn("Failed to load data from DB:",ve)}})()},[Ce]),S.useEffect(()=>(c.current&&clearTimeout(c.current),c.current=setTimeout(async()=>{try{if(!Ce)return;const G=Os().map((ve,Le)=>{const Xe=ve.rowId||(ve.batchId?`${ve.batchId}-${ve.id}`:ve.id);return{estimator:"blinds",session_id:Ce,s_no:Le+1,row_id:String(Xe),batch_id:ve.batchId||null,material_id:ve.id,name:ve.name,unit:ve.unit,quantity:Number(me[ve.id]?.quantity??ve.quantity??0),supply_rate:Number(me[ve.id]?.supplyRate??ve.rate??0),install_rate:Number(me[ve.id]?.installRate??0),shop_id:ve.shopId||"",shop_name:ve.shopName||"",description:Ns[ve.id]||"",location:De[ve.id]||"",blind_type:p,sub_option:b,qty:B,height:Q,width:z}});await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"blinds",session_id:Ce,items:G})})}catch{}},800),()=>{c.current&&clearTimeout(c.current)}),[$,me,Ns,De,p,b,B,Q,z,Ce]);const Hs=G=>{const ve=Mt.find(_t=>_t.id===G);if(!ve)return;if($.find(_t=>_t.materialId===G)){q(_t=>_t.filter(xn=>xn.materialId!==G));return}const Xe=s.filter(_t=>_r(_t.product)===_r(ve.product)&&_r(_t.name)===_r(ve.name)).map(_t=>({brand:uf(_t),shopId:_t.shopId,rate:_t.rate||0})),ut=Array.from(new Set(Xe.map(_t=>_t.brand))).sort()[0]||"Generic",Bt=Xe.filter(_t=>_t.brand===ut).sort((_t,xn)=>_t.rate-xn.rate)[0];Bt?.shopId&&q(_t=>[..._t,{materialId:G,selectedShopId:Bt.shopId,selectedBrand:ut}])},Wr=(G,ve)=>{q(Le=>Le.map(Xe=>Xe.materialId===G?{...Xe,selectedShopId:ve}:Xe))},sr=(G,ve)=>{const Le=Mt.find(ut=>ut.id===G);if(!Le)return;const vt=s.filter(ut=>_r(ut.product)===_r(Le.product)&&_r(ut.name)===_r(Le.name)).map(ut=>({brand:uf(ut),shopId:ut.shopId,rate:ut.rate||0})).filter(ut=>ut.brand===ve).sort((ut,Pe)=>ut.rate-Pe.rate)[0]?.shopId||"";q(ut=>ut.map(Pe=>Pe.materialId===G?{...Pe,selectedBrand:ve,selectedShopId:vt||Pe.selectedShopId}:Pe))},[ds,mn]=S.useState({}),cr=async()=>{try{const G=await ct("/api/boq");if(G.status===401){te([]),i.current!=="401"&&(i.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!G.ok){const Xe=await G.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${Xe||G.status}`)}if(!(G.headers.get("content-type")||"").includes("application/json")){const Xe=await G.text().catch(()=>"");console.warn("/api/boq returned non-json:",Xe),te([]);return}const Le=await G.json();te(Le.boqs||[]),i.current=""}catch(G){console.error("fetchSavedBoqs",G);const ve=String(G?.message||G||"");if(!ve)return;i.current!==ve&&(i.current=ve,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},nr=async()=>{try{if(!Ce)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const G={estimator:"blinds",blindType:p,subOption:b,qty:B,height:Q,width:z,materials:oe&&oe.length>0?oe:Os(),subtotal:Jn,sgst:zn,cgst:ua,roundOff:ga,grandTotal:ha},ve=await ct("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!ve.ok){const vt=await ve.text().catch(()=>"");throw new Error(vt||"save failed")}const Le=ve.headers.get("content-type")||"";let Xe=null;if(Le.includes("application/json"))Xe=await ve.json();else{const vt=await ve.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",vt),Xe={boq:null}}return await cr(),ne(Xe?.boq||Xe?.boqs?.[0]||null),!0}catch(G){return console.error("handleSaveBOQ",G),!1}},sn=async G=>{try{if(!(await ct(`/api/boq/${G}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await cr()}catch(ve){console.error("handleDeleteSavedBoq",ve)}},gn=()=>{u(1),j(null),w(null),L(1),k(4),J(4),Is([]),ls({}),et({}),rt({}),Kt({}),Cs({}),Gt({}),mn({}),ne(null)},qn=async()=>{En(!0);try{let G=Rs||[];if(Ce)try{const ut=await ct(`/api/estimator-step11-groups?session_id=${Ce}&estimator=blinds`);ut.ok&&(G=(await ut.json()).items||[],Nn(G))}catch(ut){console.warn("Failed to refresh step11 items before save",ut)}const ve=(rr||[]).map(ut=>({estimator:"blinds",session_id:Ce,group_key:(ut.groupKey||`${ut.blindType||"blind"}||${ut.subOption||""}`)+"::"+(ut.name||""),group_id:ut.groupId||`group_${ut.groupKey||""}`,item_name:ut.name,unit:ut.unit,quantity:ut.quantity,location:ut.location||"",description:ut.description||"",supply_rate:Yt[ut.id]||ut.supplyRate||0,install_rate:lt[ut.id]||ut.installRate||0,supply_amount:(ut.quantity||0)*(Yt[ut.id]||ut.supplyRate||0),install_amount:(ut.quantity||0)*(lt[ut.id]||ut.installRate||0),supply_subtotal:(rr||[]).reduce((Pe,Bt)=>Pe+(Bt.quantity||0)*(Yt[Bt.id]||Bt.supplyRate||0),0),install_subtotal:(rr||[]).reduce((Pe,Bt)=>Pe+(Bt.quantity||0)*(lt[Bt.id]||Bt.installRate||0),0),sgst:zn,cgst:ua,round_off:ga,grand_total:(rr||[]).reduce((Pe,Bt)=>Pe+(Bt.quantity||0)*((Yt[Bt.id]||Bt.supplyRate||0)+(lt[Bt.id]||Bt.installRate||0)),0)+zn+ua+ga})),Le=new Set((G||[]).map(ut=>ut.group_key||ut.groupKey)),Xe=ve.filter(ut=>!Le.has(ut.group_key));if(Xe.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),En(!1),!0;const vt=await ct("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:Xe})});if(!vt.ok){const ut=await vt.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${ut||vt.statusText}`,variant:"destructive"}),En(!1),!1}try{const ut=await ct(`/api/estimator-step11-groups?session_id=${Ce}&estimator=blinds`);if(ut.ok){const Pe=await ut.json();Nn(Pe.items||[])}}catch(ut){console.warn("Failed to reload step11 items after save",ut)}return fe([]),r({title:"Success",description:"Step 11 saved to database."}),En(!1),!0}catch(G){return console.error("handleSaveAccumulatedBOQ",G),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),En(!1),!1}},Yr=G=>{if(_e(G.bill_no||""),j(G.blind_type||G.door_type||null),w(G.sub_option||null),L(G.qty||1),k(G.height||4),J(G.width||4),Array.isArray(G.materials)){const ve=G.materials.map(Le=>({materialId:Le.id,selectedShopId:Le.shopId||Le.shop_id||"",selectedBrand:Le.shopName||Le.brand||Le.selectedBrand||void 0}));q(ve)}ne(G)},Gr=(G,ve)=>{if(A===9){be(Le=>({...Le,[G]:{...Le[G]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(ve))}}));return}Z(Le=>({...Le,[G]:{...Le[G]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(ve))}}))},ra=(G,ve)=>{if(A===9){be(Le=>({...Le,[G]:{...Le[G]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(ve)),installRate:Le[G]?.installRate||0}}));return}Z(Le=>({...Le,[G]:{...Le[G]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(ve)),installRate:Le[G]?.installRate||0}}))},gr=(G,ve)=>{if(A===9){be(Le=>({...Le,[G]:{...Le[G]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(ve)),supplyRate:Le[G]?.supplyRate||0}}));return}Z(Le=>({...Le,[G]:{...Le[G]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(ve)),supplyRate:Le[G]?.supplyRate||0}}))},Ks=()=>{const G=document.getElementById("boq-pdf");if(!G){alert("BOQ content not found");return}setTimeout(()=>{Qd().set({margin:[10,10,10,10],filename:"Blinds_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:ve=>ve.className?.toString().includes("bg-")||ve.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(G).save().catch(ve=>{console.error("PDF Export Error:",ve),alert("PDF export failed. Check console.")})},100)},en=async()=>{const G=document.getElementById("boq-final-pdf");if(!G){alert("Final BOQ content not found");return}const ve=(await Yc(async()=>{const{default:Le}=await Promise.resolve().then(()=>bu);return{default:Le}},void 0)).default;ve().set({margin:10,filename:`BOQ-${Ce||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(G).save()},Es=()=>{const G=Os(),ve=Bs(),Le=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Blind Type: ${ve?.label}`,`Dimensions: ${Q}ft  ${z}ft (Count: ${B})`,"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];G.forEach((Bt,_t)=>{const xn=Bt.quantity*Bt.rate;Le.push(`${_t+1},"${Bt.name}","${Bt.unit}",${Bt.quantity},${Bt.rate},"${Bt.shopName}",${xn}`)}),Le.push("",`TOTAL COST,,,${ot().toFixed(2)}`);const Xe=Le.join(`
`),vt=new Blob([Xe],{type:"text/csv"}),ut=window.URL.createObjectURL(vt),Pe=document.createElement("a");Pe.href=ut,Pe.download=`BOQ-Blinds-${new Date().getTime()}.csv`,Pe.click(),URL.revokeObjectURL(ut)},rn=()=>{const G=rr||[],ve=[];ve.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),G.forEach((Pe,Bt)=>{const _t=Number(Pe.supplyRate??Pe.rate??0),xn=Number(Pe.installRate??0),Dn=Number(Pe.quantity||0),ps=Dn*_t,Qs=Dn*xn,Qn=(Pe.location||De[Pe.id]||"").toString().replace(/"/g,'""'),kn=(Pe.description||Ns[Pe.id]||Pe.name||"").toString().replace(/"/g,'""'),v=(Ls({blindType:Pe.blindType||Pe.blind_type||Pe.door_type,subOption:Pe.subOption||Pe.sub_option})||Pe.name||"").replace(/"/g,'""');ve.push(`${Bt+1},"${v}","${Qn}","${kn}",${Pe.unit},${Dn},${_t.toFixed(2)},${xn.toFixed(2)},${ps.toFixed(2)},${Qs.toFixed(2)}`)});const Le=ve.join(`
`),Xe=new Blob([Le],{type:"text/csv"}),vt=window.URL.createObjectURL(Xe),ut=document.createElement("a");ut.href=vt,ut.download=`BOQ-Blinds-Step11-${new Date().getTime()}.csv`,ut.click(),URL.revokeObjectURL(vt)},Ps=async()=>{const G=Os(ge,pe).map(Pe=>{const Bt=Pe.rowId||`${Pe.batchId}-${Pe.id}`;return{id:Pe.id,rowId:Bt,batchId:Pe.batchId||null,name:Pe.name,productLabel:Pe.productLabel||null,product_label:Pe.productLabel||null,unit:Pe.unit,quantity:pe[Bt]?.quantity??pe[Pe.id]?.quantity??Pe.quantity,supplyRate:pe[Bt]?.supplyRate??pe[Pe.id]?.supplyRate??Pe.rate,installRate:pe[Bt]?.installRate??pe[Pe.id]?.installRate??Pe.installRate??0,shopId:Pe.shopId,shopName:Pe.shopName,description:Ns[Bt]||Ns[Pe.id]||"",location:De[Bt]||De[Pe.id]||"",blindType:Pe.blindType||Pe.blind_type||Pe.door_type,subOption:Pe.subOption||Pe.sub_option,isSaved:Pe.isSaved||!1}}),ve=G.filter(Pe=>!Pe.isSaved);if(ve.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let Le=Ce;(!Le||Le.trim()==="")&&(Le=`BLINDS-${Date.now()}`,_e(Le));const Xe=xe||(()=>{const Pe=G.reduce((ps,Qs)=>ps+Number(Qs.quantity||0)*(Number(Qs.supplyRate||0)+Number(Qs.installRate||0)),0),Bt=Pe*.09,_t=Pe*.09,xn=Math.round(Pe+Bt+_t)-(Pe+Bt+_t),Dn=Pe+Bt+_t+xn;return{subtotal:Pe,sgst:Bt,cgst:_t,round_off:xn,grand_total:Dn}})(),vt={id:`local-${Date.now()}`,estimator:"blinds",bill_no:Le,blind_type:xe?.blindType||xe?.blind_type||p,sub_option:xe?.subOption||xe?.sub_option||b,qty:xe?.count||xe?.qty||B,height:xe?.height||Q,width:xe?.width||z,materials:G,subtotal:Xe.subtotal,sgst:Xe.sgst,cgst:Xe.cgst,round_off:Xe.round_off,grand_total:Xe.grand_total,created_at:new Date().toISOString()};ne(vt),se(G);try{Me(Pe=>({...Pe||{},...Xe}))}catch{}const ut=ve.map((Pe,Bt)=>({estimator:"blinds",session_id:Le,s_no:Bt+1,row_id:String(Pe.rowId||`${Pe.batchId||""}-${Pe.id}`),batch_id:Pe.batchId||null,material_id:Pe.id,name:Pe.name,unit:Pe.unit,quantity:Number(Pe.quantity||0),supply_rate:Number(Pe.supplyRate||0),install_rate:Number(Pe.installRate||0),shop_id:Pe.shopId||"",shop_name:Pe.shopName||"",description:Pe.description||"",location:Pe.location||"",blind_type:Pe.blindType||Pe.blind_type||Pe.door_type||xe?.blindType||xe?.blind_type||xe?.door_type||p||null,sub_option:Pe.subOption||xe?.subOption||xe?.sub_option||b||null,qty:xe?.count||xe?.qty||B,height:xe?.height||Q,width:xe?.width||z,subtotal:Xe.subtotal,sgst:Xe.sgst,cgst:Xe.cgst,round_off:Xe.round_off,grand_total:Xe.grand_total}));try{await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"blinds",session_id:Le,items:ut})});const Bt=await(await ct(`/api/estimator-step9-items?session_id=${Le}&estimator=blinds`,{headers:{}})).json();gs(Bt.items||[]);const _t=(oe||[]).map(xn=>ve.some(ps=>xn.rowId===ps.rowId||`${xn.batchId||""}-${xn.id}`==`${ps.batchId||""}-${ps.id}`)?{...xn,isSaved:!0}:xn);se(_t),r({title:"Success",description:`${ve.length} new material(s) saved successfully to database!`})}catch(Pe){console.warn("Failed to save step 9 to DB",Pe),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},wr=G=>{let ve=5381;for(let Le=0;Le<G.length;Le+=1)ve=(ve<<5)+ve^G.charCodeAt(Le);return Math.abs(ve>>>0).toString(36)},Ze=()=>{const G=JSON.stringify({blindType:p,subOption:b,count:B,height:Q,width:z,selectedMaterials:($||[]).map(ve=>({materialId:ve.materialId,selectedShopId:ve.selectedShopId,selectedBrand:ve.selectedBrand})),editable:Object.keys(me||{}).sort().map(ve=>({id:ve,...me[ve]}))});return`batch-${wr(G)}`},us=()=>{const G=Ze(),ve=Os($,me).map(Pe=>({id:Pe.id,rowId:`${G}-${Pe.id}`,batchId:G,name:Pe.name,unit:Pe.unit,quantity:me[Pe.id]?.quantity??Pe.quantity,supplyRate:me[Pe.id]?.supplyRate??Pe.rate,installRate:me[Pe.id]?.installRate??0,shopId:Pe.shopId,shopName:Pe.shopName,description:Ns[Pe.id]||"",location:De[Pe.id]||"",blindType:p,productLabel:m||Ls(),subOption:b,isSaved:!1}));if(ve.length===0){u(9);return}const vt=[...(oe||[]||[]).filter(Pe=>Pe.batchId!==G),...ve];se(vt),we(($||[]).map(Pe=>({materialId:Pe.materialId,selectedShopId:Pe.selectedShopId,selectedBrand:Pe.selectedBrand,batchId:G})));const ut={};vt.forEach(Pe=>{const Bt=Pe.rowId||`${Pe.batchId}-${Pe.id}`;ut[Bt]={quantity:Number(Pe.quantity||0),supplyRate:Number(Pe.supplyRate||Pe.rate||0),installRate:Number(Pe.installRate||0)}}),be(ut);try{const Pe=ot(),Bt=Pe*.09,_t=Pe*.09,xn=Math.round(Pe+Bt+_t)-(Pe+Bt+_t),Dn=Pe+Bt+_t+xn;Me({blindType:p,subOption:b,count:B,height:Q,width:z,subtotal:Pe,sgst:Bt,cgst:_t,round_off:xn,grand_total:Dn})}catch{}u(9)},is=A===9||A===11?oe||[]:Os(),yn=A===9?pe:me,Jn=is.reduce((G,ve)=>G+ve.quantity*((yn[ve.id]?.supplyRate??ve.rate)+(yn[ve.id]?.installRate??ve.installRate??0)),0),zn=Jn*.09,ua=Jn*.09,ga=Math.round(Jn+zn+ua)-(Jn+zn+ua),ha=Jn+zn+ua+ga,Tr=X.length>0?X.flatMap(G=>G.materials||[]):oe&&oe.length>0?oe:is&&is.length>0?is:re&&re.materials&&re.materials.length>0?Array.isArray(re.materials)?re.materials:JSON.parse(re.materials||"[]"):is,$a=(()=>{const G=new Map;for(const Le of Tr||[]){const Xe=Le.productLabel||Le.blindType||Le.blind_type||Le.door_type||xe?.blindType||xe?.blind_type||p||"blind",vt=Le.subOption||Le.sub_option||xe?.subOption||xe?.sub_option||"",ut=`${Xe}||${vt}`;G.has(ut)||G.set(ut,[]),G.get(ut).push(Le)}const ve=[];for(const[Le,Xe]of G.entries()){const[vt,ut,Pe]=Le.split("||"),Bt=`group_${Le}`,_t=Ns[Bt]||"",xn=De[Bt]||"";let Dn=Number(ds[Bt]??xe?.count??xe?.qty??B??1);const ps=String(_t).match(/Qty:\s*(\d+(?:\.\d+)?)/);ps&&(ds[Bt]===void 0||ds[Bt]===null)&&(Dn=Number(ps[1]));const Qs=Xe.reduce((N,x)=>N+Number(x.quantity||0)*Number(x.supplyRate??x.rate??0),0),Qn=Dn>0?Qs/Dn:Qs,kn=Xe.reduce((N,x)=>N+Number(x.quantity||0)*Number(x.installRate??0),0),Wn=Dn>0?kn/Dn:kn,Xr=Xe[0]&&Xe[0].productLabel||Ls({blindType:vt,subOption:Pe})||vt,v=String(_t).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();ve.push({id:Bt,groupKey:Le,name:Xr,location:xn||"",description:v||"",unit:"pcs",quantity:Dn,supplyRate:Number(Qn||0),installRate:Number(lt[Bt]??Wn??0),supplyAmount:Number(Qn*Dn||0),installAmount:Number((lt[Bt]??Wn)*Dn||0)})}return ve})();(Rs||[]).filter(G=>G.item||G.item_name).map((G,ve)=>{const Le=G.group_key||G.groupKey||`${G.door_type||G.blindType||"door"}||${G.panel_type||G.panelType||""}||${G.sub_option||G.subOption||""}`;return{id:G.id,groupKey:Le,name:G.productLabel||G.item_name||G.item||G.name||G.door_label||G.blindType||G.door_type||"Door",location:G.location||"",description:G.description||"",unit:G.unit||"pcs",quantity:Number(G.quantity??G.qty??1),supplyRate:Number(G.supply_rate??G.supplyRate??0),installRate:Number(G.install_rate??G.installRate??0),supplyAmount:Number(G.supply_amount??0),installAmount:Number(G.install_amount??0),blindType:G.door_type||G.blindType,panelType:G.panel_type||G.panelType,subOption:G.sub_option||G.subOption}});const rr=(X.length===0?$a.filter(G=>!(Rs||[]).some(Le=>(Le.group_key||Le.groupKey||`${Le.door_type||""}||${Le.panel_type||""}||${Le.sub_option||""}`)===G.groupKey)):X.map((G,ve)=>({id:`accumulated_${ve}`,groupKey:`${G.blindType||"door"}||${G.panelType||""}||${G.subOption||""}`,name:G.productLabel||G.materials?.[0]?.productLabel||G.doorLabel||Ls({blindType:G.blindType,panelType:G.panelType,subOption:G.subOption})||G.blindType,location:G.location||"",description:G.description||"",unit:"pcs",quantity:G.count||1,supplyRate:G.materials?.reduce((Le,Xe)=>Le+Number(Xe.quantity||0)*Number(Xe.supplyRate??Xe.rate??0),0)||0,installRate:G.materials?.reduce((Le,Xe)=>Le+Number(Xe.quantity||0)*Number(Xe.installRate??0),0)||0,supplyAmount:G.materials?.reduce((Le,Xe)=>Le+Number(Xe.quantity||0)*Number(Xe.supplyRate??Xe.rate??0),0)||0,installAmount:G.materials?.reduce((Le,Xe)=>Le+Number(Xe.quantity||0)*Number(Xe.installRate??0),0)||0})))||[],oa=rr.filter(G=>on.includes(G.id)),Ga=rr.reduce((G,ve)=>{const Le=Number(mt[ve.id]??(ve.quantity||0)),Xe=Number(Yt[ve.id]??ve.supplyRate??ve.rate??0);return G+Le*Xe},0);rr.reduce((G,ve)=>{const Le=Number(mt[ve.id]??(ve.quantity||0));return G+Le*Number(ve.installRate||0)},0);const fi=oa.reduce((G,ve)=>{const Le=Number(mt[ve.id]??(ve.quantity||0)),Xe=Number(Yt[ve.id]??ve.supplyRate??ve.rate??0);return G+Le*Xe},0);re&&re.bill_no;const xa=re&&re.created_at?new Date(re.created_at).toISOString().slice(0,10):de,ie=G=>{if(!G)return!1;const ve=(G.name||"").toString().trim(),Le=Number(G.quantity||0),Xe=Number(G.supplyRate??G.rate??0),vt=Number(G.installRate??0),ut=(G.description||"").toString().trim(),Pe=(G.location||"").toString().trim();return!!ve||Le>0||Xe>0||vt>0||!!ut||!!Pe};return(X||[]).map(G=>{const ve=(G.materials||[]).filter(ie),Le=ve.reduce((vt,ut)=>vt+Number(ut.quantity||0)*Number(ut.supplyRate??ut.rate??0),0),Xe=ve.reduce((vt,ut)=>vt+Number(ut.quantity||0)*Number(ut.installRate??0),0);return{...G,materials:ve,supplySubtotal:Le,installSubtotal:Xe,subtotal:Le+Xe}}).filter(G=>(G.materials||[]).length>0),e.jsx(ka,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Blinds Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(ks,{className:"border-border/50",children:e.jsx(Ws,{className:"pt-8 min-h-96",children:e.jsxs(Fl,{mode:"wait",children:[A===1&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Blind Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:js.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No blinds products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Blind."})]}):e.jsx("div",{className:"grid gap-3",children:js.map(G=>{const ve=kt(G),Le=(G?.id||ve).toString(),Xe=h===Le;return e.jsx(Be,{variant:Xe?"default":"outline",onClick:()=>Lt(G),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:ve||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:fs(G)})]})},Le)})})})]},"step-select-product"),A===11&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Pv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:xa})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all-groups",checked:(()=>{const G=(rr||[]).map(ve=>ve.id);return G.length>0&&G.every(ve=>rs.includes(ve))})(),onCheckedChange:G=>{Is(G?(rr||[]).map(ve=>ve.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(rr||[]).map((G,ve)=>{const Le=Number(Yt[G.id]??G.supplyRate??G.rate??0),Xe=Number(lt[G.id]??G.installRate??0);let vt=Number(mt[G.id]??(G.quantity||0));const ut=vt*Le,Pe=vt*Xe;return De[G.id]??G.location,Ns[G.id]??G.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{checked:rs.includes(G.id),onCheckedChange:()=>{Is(Bt=>Bt.includes(G.id)?Bt.filter(_t=>_t!==G.id):[...Bt,G.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:ve+1}),e.jsx("td",{className:"border px-2 py-1",children:G.productLabel||G.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx($e,{value:De[G.id]??G.location??"",onChange:Bt=>rt(_t=>({..._t,[G.id]:Bt.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:Ns[G.id]??G.description??"",onChange:Bt=>et(_t=>({..._t,[G.id]:Bt.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{value:Ht[G.id]??G.unit??"",onChange:Bt=>Kt(_t=>({..._t,[G.id]:Bt.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",value:vt,onChange:Bt=>ls(_t=>({..._t,[G.id]:Number(Bt.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:Le,onChange:Bt=>Cs(_t=>({..._t,[G.id]:Number(Bt.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:Xe,onChange:Bt=>Gt(_t=>({..._t,[G.id]:Number(Bt.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",ut.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Pe.toFixed(2)]})]},G.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Ga||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!d&&e.jsx(Be,{variant:"outline",onClick:()=>u(9),children:"Back"}),e.jsx(Be,{variant:"destructive",disabled:rs.length===0,onClick:async()=>{if(console.log("Delete selected:",rs),Rs.length>0&&Ce)try{await ct("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:rs,estimator:"blinds"})});const G=await ct(`/api/estimator-step11-groups?session_id=${Ce}&estimator=blinds`,{headers:{}});if(G.ok){const ve=await G.json();Nn(ve.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(G){console.warn("Failed to delete step 11 from DB",G),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(X.length===0)if(re){console.log("Deleting from saved BOQ");const G=rs.map(vt=>vt.replace("group_","")),ve=Array.isArray(re.materials)?re.materials:JSON.parse(re.materials||"[]");console.log("Current materials:",ve.length);const Le=ve.filter(vt=>{const ut=vt.blindType||vt.door_type||xe?.blindType||xe?.door_type||p||"door",Pe=vt.panelType||vt.panel_type||xe?.panelType||xe?.panel_type||panelType||"",Bt=vt.subOption||vt.sub_option||xe?.subOption||xe?.sub_option||b||"",_t=`${ut}||${Pe}||${Bt}`,xn=G.includes(_t);return console.log("Checking material:",vt.id||vt.name,_t,"match:",xn),!xn});console.log("Filtered materials:",Le.length);const Xe={...re,materials:Le};ne(Xe),ct("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xe)}).then(()=>console.log("Saved updated BOQ")).catch(vt=>console.error("Error saving BOQ:",vt))}else{console.log("Deleting from Step 11 saved materials");const G=rs.map(Xe=>Xe.replace("group_","")),Le=((oe&&oe.length>0?oe:is)||[]).filter(Xe=>{const vt=Xe.blindType||Xe.door_type||xe?.blindType||xe?.door_type||p||"door",ut=Xe.panelType||Xe.panel_type||xe?.panelType||xe?.panel_type||panelType||"",Pe=Xe.subOption||Xe.sub_option||xe?.subOption||xe?.sub_option||b||"",Bt=`${vt}||${ut}||${Pe}`;return!G.includes(Bt)});se(Le)}else if(X.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",X.length);let G;if(rs.some(ve=>ve.startsWith("accumulated_"))){const ve=rs.filter(Le=>Le.startsWith("accumulated_")).map(Le=>parseInt(Le.replace("accumulated_",""))).sort((Le,Xe)=>Xe-Le);G=[...X],ve.forEach(Le=>{Le>=0&&Le<G.length&&G.splice(Le,1)})}else{const ve=rs.map(Le=>Le.replace("group_",""));G=X.filter(Le=>{const Xe=`${Le.blindType||"door"}||${Le.panelType||""}||${Le.subOption||""}`,vt=ve.includes(Xe);return console.log("Checking product:",Le.id,Xe,"match:",vt),!vt})}console.log("Accumulated products after:",G.length),fe(G),ct("/api/accumulated-products/doors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:G})}).catch(ve=>console.error("Failed to save accumulated products after delete",ve))}Is([])},children:"Delete Selected"}),e.jsx(Be,{onClick:gn,children:"Add Product"}),e.jsx(Be,{onClick:qn,disabled:Zs,children:"Save"}),e.jsx(Be,{onClick:async()=>{ws(rs);const G=(oa||[]).map((ve,Le)=>{const Xe=Number(Yt[ve.id]??ve.supplyRate??ve.rate??0),vt=Number(lt[ve.id]??ve.installRate??0);let ut=Number(mt[ve.id]??(ve.quantity||0));return{s_no:Le+1,item:ve.name,location:De[ve.id]??ve.location??"",description:Ns[ve.id]??ve.description??"",unit:Ht[ve.id]??ve.unit??"",qty:ut,supply_rate:Xe,install_rate:vt,supply_amount:ut*Xe,install_amount:ut*vt}});try{const ve=await ct(`/api/estimator-step12-qa-selection?session_id=${Ce}&estimator=blinds`,{headers:{}});let Le=[];ve.ok&&(Le=(await ve.json()).items||[]);const Xe=G.filter(Pe=>!Le.some(Bt=>Bt.item===Pe.item&&Bt.description===Pe.description&&Bt.unit===Pe.unit));if(Xe.length===0){u(12);return}await ct("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"blinds",session_id:Ce,items:Xe})});const ut=await(await ct(`/api/estimator-step12-qa-selection?session_id=${Ce}&estimator=blinds`,{headers:{}})).json();Ln(ut.items||[]),r({title:"Success",description:`${Xe.length} new material(s) saved successfully to database!`}),u(12)}catch(ve){console.warn("Failed to save step 12 to DB",ve),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),A===4&&p&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(qG[p]||[]).map(G=>e.jsx(Be,{onClick:()=>{w(G)},className:`w-full text-black ${b===G?"bg-cyan-500":"bg-white"}`,children:G},G))}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>u(3),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{onClick:()=>u(5),disabled:!b,children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),A===5&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Blind Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"count",children:"Count"}),e.jsx($e,{id:"count",type:"number",placeholder:"1",value:B||"",onChange:G=>L(G.target.value?parseFloat(G.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"height",children:"Height"}),e.jsx($e,{id:"height",type:"number",placeholder:"4",value:Q||"",onChange:G=>k(G.target.value?parseFloat(G.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"width",children:"Width"}),e.jsx($e,{id:"width",type:"number",placeholder:"4",value:z||"",onChange:G=>J(G.target.value?parseFloat(G.target.value):null)})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>u(4),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{disabled:!B||!Q||!z,onClick:()=>u(6),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),A===6&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Bs()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Fn,{id:"select-all-materials",checked:$.length===Mt.length&&Mt.length>0,onCheckedChange:G=>{if(G){const ve=Mt.map(Le=>{const Xe=s.filter(Bt=>_r(Bt.product)===_r(Le.product)&&_r(Bt.name)===_r(Le.name)).map(Bt=>({id:Bt.id,brand:uf(Bt),shopId:Bt.shopId,rate:Bt.rate,unit:Bt.unit,shopName:t.find(_t=>_t.id===Bt.shopId)?.name||"Unknown"})),ut=Array.from(new Set(Xe.map(Bt=>Bt.brand))).sort()[0]||"Generic",Pe=Xe.filter(Bt=>Bt.brand===ut).sort((Bt,_t)=>(Bt.rate||0)-(_t.rate||0));return{materialId:Le.id,selectedBrand:ut,selectedShopId:Pe[0]?.shopId||""}});q(ve)}else q([])}}),e.jsx(Ve,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Mt.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this blind type."}),e.jsxs("div",{children:["Door:"," ",p||m||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(p?doorKeywordsByType[p]||[p]:[m||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(G=>G.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Mt.map(G=>{const ve=$.some(_t=>_t.materialId===G.id),Le=$.find(_t=>_t.materialId===G.id),Xe=s.filter(_t=>_r(_t.product)===_r(G.product)&&_r(_t.name)===_r(G.name)).map(_t=>({id:_t.id,brand:uf(_t),shopId:_t.shopId,rate:_t.rate,unit:_t.unit,shopName:t.find(xn=>xn.id===_t.shopId)?.name||"Unknown"})),vt=Array.from(new Set(Xe.map(_t=>_t.brand))).sort(),Pe=$.find(_t=>_t.materialId===G.id)?.selectedBrand||vt[0]||"Generic",Bt=Xe.filter(_t=>_t.brand===Pe).sort((_t,xn)=>(_t.rate||0)-(xn.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fn,{id:G.id,checked:ve,onCheckedChange:()=>Hs(G.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:G.id,className:"font-medium cursor-pointer",children:G.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:G.code}),ve&&vt.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Ve,{className:"text-xs",children:"Select Brand:"}),e.jsxs(Bn,{value:Pe,onValueChange:_t=>sr(G.id,_t),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:vt.map(_t=>e.jsx(dn,{value:_t,children:_t},_t))})]})]}),ve&&Bt.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Ve,{className:"text-xs",children:"Select Shop:"}),e.jsxs(Bn,{value:Le?.selectedShopId||Bt[0].shopId,onValueChange:_t=>Wr(G.id,_t),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:Bt.map(_t=>e.jsxs(dn,{value:_t.shopId||"",children:[_t.shopName," - ",_t.rate,"/",G.unit,_t.rate===Bt[0].rate&&" (Best)"]},_t.shopId))})]})]})]})]})},G.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>u(1),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{disabled:$.length===0,onClick:()=>u(7),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),A===7&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:Os().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),Os().map(G=>{const ve=$.find(Xe=>Xe.materialId===G.id),Le=s.find(Xe=>Xe.id===G.id);return e.jsxs("div",{className:Vs("p-3 border rounded grid grid-cols-8 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:G.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:ve?.selectedBrand||Le?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx($e,{type:"number",value:me[G.id]?.quantity??G.quantity,onChange:Xe=>Gr(G.id,parseInt(Xe.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:G.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:G.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx($e,{type:"number",value:me[G.id]?.supplyRate??G.rate,onChange:Xe=>ra(G.id,parseFloat(Xe.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((me[G.id]?.quantity??G.quantity)*((me[G.id]?.supplyRate??G.rate)+(me[G.id]?.installRate??0))).toFixed(2)]})]},G.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>u(6),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{onClick:()=>u(8),disabled:Os().length===0,children:["Next: Generate BOM"," ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),A===8&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(Wo,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:m||Ls()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[Q," ft  ",z," ft (Qty: ",B,")"]})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(G=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:G==="Qty"||G.includes("Rate")||G.includes("Amount")?"right":"left"},children:G},G))})}),e.jsx("tbody",{children:Os().map((G,ve)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:ve+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:G.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:G.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:G.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:G.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:G.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(G.quantity*G.rate).toFixed(2)})]},G.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:$.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:Os().reduce((G,ve)=>G+ve.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",ot().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Be,{onClick:()=>u(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:Es,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(hi,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:Ks,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Be,{onClick:()=>us(),disabled:Os().length===0,children:["Add to BOM ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{u(1),o(""),y(""),setPanelType(null),j(null),setGlazingType(null),L(1),k(7),J(3),setGlassHeight(6),setGlassWidth(2),q([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(er,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),A===12&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Pv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:xa})})]}),!oa||oa.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(oa||[]).map((G,ve)=>{const Le=Number(Yt[G.id]??G.supplyRate??G.rate??0),Xe=Number(lt[G.id]??G.installRate??0);let vt=Number(mt[G.id]??(G.quantity||0));const ut=vt*Le,Pe=vt*Xe,Bt=De[G.id]??G.location??"",_t=Ns[G.id]??G.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:ve+1}),e.jsx("td",{className:"border px-2 py-1",children:G.productLabel||G.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:Bt||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:_t||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Ht[G.id]??G.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:vt}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",Le.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",Xe.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",ut.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Pe.toFixed(2)]})]},G.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(fi||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{variant:"outline",onClick:()=>u(11),children:"Back"}),e.jsx(Be,{onClick:async()=>{if(ys.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const G=await ct(`/api/estimator-step12-qa-selection?session_id=${Ce}&estimator=blinds`,{headers:{}});let ve=[];G.ok&&(ve=(await G.json()).items||[]);const Xe=(oa||[]).map((Pe,Bt)=>{const _t=Number(Yt[Pe.id]??Pe.supplyRate??Pe.rate??0),xn=Number(lt[Pe.id]??Pe.installRate??0),Dn=Number(mt[Pe.id]??(Pe.quantity||0));return{s_no:Bt+1,item:Pe.name,location:De[Pe.id]??Pe.location??"",description:Ns[Pe.id]??Pe.description??"",unit:Ht[Pe.id]??Pe.unit??"",qty:Dn,supply_rate:_t,install_rate:xn,supply_amount:Dn*_t,install_amount:Dn*xn}}).filter(Pe=>!ve.some(Bt=>Bt.item===Pe.item&&Bt.description===Pe.description&&Bt.unit===Pe.unit));if(Xe.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await ct("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"blinds",session_id:Ce,items:Xe})});const ut=await(await ct(`/api/estimator-step12-qa-selection?session_id=${Ce}&estimator=blinds`,{headers:{}})).json();Ln(ut.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(G){console.warn("Failed to save step 12 to DB",G),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Be,{onClick:()=>u(1),children:"Add More Products"}),e.jsx(Be,{onClick:rn,children:"Export Excel"})]})]},"step-qa-boq"),A===10&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill No"}),e.jsx($e,{value:Ce,onChange:G=>_e(G.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill Date"}),e.jsx($e,{type:"date",value:de,onChange:G=>dt(G.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Due Date"}),e.jsx($e,{type:"date",value:st,onChange:G=>nt(G.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Name"}),e.jsx($e,{value:yt,onChange:G=>qe(G.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Address"}),e.jsx($e,{value:Tt,onChange:G=>ns(G.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Terms & Conditions"}),e.jsx($e,{value:at,onChange:G=>Dt(G.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Ve,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:St,onChange:G=>qt(G.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),Os().map(G=>e.jsx("option",{value:G.id,children:G.name},G.id))]}),St&&e.jsx($e,{placeholder:"Enter description for selected material",value:Ns[St]||"",onChange:G=>et(ve=>({...ve,[St]:G.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:Pv,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",Ce]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:Ts})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",de]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",st]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",at]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",yt]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(G=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:G},G))})}),e.jsx("tbody",{children:is.map((G,ve)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:ve+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:G.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:G.id&&Ns[G.id]||G.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:G.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:G.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:G.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(G.quantity||0)*Number(G.rate||0)||0).toFixed(2)})]},G.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:Jn.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:zn.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:ua.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:ga.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",ha.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",ha.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{onClick:()=>u(8),variant:"outline",children:"Back"}),e.jsx(Be,{onClick:en,children:"Export PDF"})]})]}),A===9&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{variant:"destructive",onClick:()=>{we(G=>G.filter(ve=>{const Le=ve.batchId?`${ve.batchId}-${ve.materialId}`:ve.materialId;return!ee.includes(Le)})),le([])},disabled:ee.length===0,children:"Delete Selected"}),e.jsx(Be,{type:"button",onClick:Ps,disabled:is.length===0,children:"Save"}),e.jsx(Be,{onClick:async()=>{const G=Os(ge,pe),ve=ee.length>0?G.filter(ut=>ee.includes(ut.rowId||`${ut.batchId}-${ut.id}`)):G,Le=ve.map(ut=>{const Pe=ut.rowId||`${ut.batchId||""}-${ut.id}`;return{id:ut.id,rowId:Pe,batchId:ut.batchId,name:ut.name,unit:ut.unit,quantity:pe[Pe]?.quantity??pe[ut.id]?.quantity??ut.quantity,supplyRate:pe[Pe]?.supplyRate??pe[ut.id]?.supplyRate??ut.rate,installRate:pe[Pe]?.installRate??pe[ut.id]?.installRate??ut.installRate??0,shopId:ut.shopId,shopName:ut.shopName,description:Ns[Pe]||Ns[ut.id]||"",location:De[Pe]||De[ut.id]||"",subOption:ut.subOption}});if(Le.length===0)return;const Xe=ve[0],vt={id:`local-${Date.now()}`,estimator:"blinds",bill_no:Ce,blind_type:Xe?.blindType||xe?.blindType||p,sub_option:Xe?.subOption||xe?.subOption||b,qty:Le.length,materials:Le,subtotal:Le.reduce((ut,Pe)=>ut+Number(Pe.quantity||0)*(Number(Pe.supplyRate||0)+Number(Pe.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};ne(vt);try{await nr()}catch{}le([]),u(11)},disabled:is.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{className:"text-sm font-semibold",children:"Saved BOQs"}),ue.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:ue.map(G=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:G.bill_no||`${G.estimator} - ${G.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(G.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{onClick:()=>Yr(G),size:"sm",children:"Load"}),e.jsx(Be,{variant:"destructive",onClick:()=>sn(G.id),size:"sm",children:"Delete"})]})]},G.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all",checked:(()=>{const G=(A===9?Os(ge,pe):Os()).map(ve=>ve.rowId||ve.id);return ee.length===G.length&&G.length>0})(),onCheckedChange:Rt})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const G=new Map,ve=new Map;is.forEach(vt=>{const ut=vt.blindType||vt.door_type||xe?.blindType||xe?.door_type||p||"door",Pe=vt.panelType||vt.panel_type||xe?.panelType||xe?.panel_type||panelType||"",Bt=vt.subOption||vt.sub_option||xe?.subOption||xe?.sub_option||"",_t=`${ut}||${Pe}||${Bt}`;if(G.has(_t)||G.set(_t,[]),G.get(_t).push(vt),!ve.has(_t)){const Dn=(G.get(_t)||[])[0]?.productLabel||`${Pe==="panel"?"With Panel":"Without Panel"}  ${ut}${Bt?" ("+Bt+")":""}`;ve.set(_t,{label:Dn})}});const Le=[];let Xe=0;for(const[vt,ut]of G.entries()){const Pe=ut.map(ps=>ps.rowId||`${ps.batchId||""}-${ps.id}`),Bt=Pe.every(ps=>ee.includes(ps)),_t=`group_${vt}`,xn=Ns[_t]||"",Dn=Number(ds[_t]??xe?.count??xe?.qty??B??1);Le.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{id:`group-${vt}`,checked:Bt,onCheckedChange:()=>{le(Bt?ps=>ps.filter(Qs=>!Pe.includes(Qs)):ps=>Array.from(new Set([...ps,...Pe])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:ve.get(vt)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx($e,{placeholder:"Group description",value:xn?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:ps=>et(Qs=>({...Qs,[_t]:ps.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",className:"h-8 text-center",value:ds[_t]??Dn,onChange:ps=>{const Qs=ps.target.value?parseFloat(ps.target.value):0;mn(Qn=>({...Qn,[_t]:Qs})),et(Qn=>{const kn=(Qn[_t]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...Qn,[_t]:kn?kn+`
Qty: `+Qs:"Qty: "+Qs}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${vt}`));for(const ps of ut){Xe+=1;const Qs=ps.rowId||`${ps.batchId}-${ps.id}`,Qn=Number(yn[Qs]?.supplyRate??yn[ps.id]?.supplyRate??ps.rate??0),kn=Number(yn[Qs]?.installRate??yn[ps.id]?.installRate??ps.installRate??0),Wn=Qn+kn,Xr=Number(yn[Qs]?.quantity??yn[ps.id]?.quantity??ps.quantity??0),v=Xr*Wn,N=Ns[Qs]??Ns[ps.id]??ps.description??"",x=String(N).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();Le.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Xe}),e.jsx("td",{className:"border px-2 py-1",children:ps.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:Ns[Qs]??Ns[ps.id]??x,onChange:I=>et(F=>({...F,[Qs]:I.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Ht[Qs]??Ht[ps.id]??ps.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",className:"h-8 text-center",value:Xr,onChange:I=>Gr(Qs,I.target.value?parseFloat(I.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:Wn,onChange:I=>{const F=parseFloat(I.target.value||"0"),_=Number(yn[Qs]?.supplyRate??yn[ps.id]?.supplyRate??Qn),U=Math.max(0,F-_);ra(Qs,_),gr(Qs,U)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",v.toFixed(2)]})]},Qs))}}return Le})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Be,{variant:"outline",onClick:()=>u(8),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Be,{onClick:()=>u(10),children:"Finalize PO"}),e.jsxs(Be,{onClick:Ks,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const kv="/image.png",eq=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),$r=t=>(t||"").toString().toUpperCase(),fR={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},Iy={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},tq=(t,s)=>{const n=$r(t.product),r=$r(t.name),i=$r(t.category),c=$r(t.subCategory),u=(fR[s]||[s.toUpperCase()]).some(o=>n.includes(o)||r.includes(o)||i.includes(o)||c.includes(o)),d=Iy[s],h=d&&$r(n).includes($r(d));return u||h},zp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function sq(){const{shops:t,materials:s,products:n}=ei(),{toast:r}=ma(),[i,c]=S.useState(1),A=typeof window<"u"&&window.location.search.includes("step=11"),[u,d]=S.useState(""),[h,o]=S.useState(""),[m,y]=S.useState(null),[p,j]=S.useState(null),[b,w]=S.useState(null),[B,L]=S.useState(null),[Q,k]=S.useState(null),[z,J]=S.useState(null),[$,q]=S.useState(1),[X,fe]=S.useState(7),[ee,le]=S.useState(3),[ue,te]=S.useState(6),[re,ne]=S.useState(2),[oe,se]=S.useState([]),[xe,Me]=S.useState([]);S.useEffect(()=>{ct("/api/accumulated-products/electrical",{headers:{}}).then(v=>v.json()).then(v=>{Me(v.data||[])}).catch(v=>console.error("Failed to load accumulated products",v))},[]),S.useEffect(()=>{if(typeof window<"u"){const N=new URLSearchParams(window.location.search).get("step");if(N){const x=parseInt(N,10);x>=1&&x<=12&&c(x)}}},[]),S.useEffect(()=>{i===12&&ct("/api/accumulated-products/electrical",{headers:{}}).then(v=>v.json()).then(v=>{const N=v.data||[];Me(N),console.debug("Restored electrical_accumulated_products for Step 12:",N.length)}).catch(v=>console.error("Failed to load accumulated products for Step 12",v))},[i]);const me=v=>{const N=v?.doorType??b,x=v?.panelType??p,I=v?.subOption??B;if(!N)return null;const F=be.find(K=>K.value===N);let _=F?F.label:Iy[N]||N;/door/i.test(_)||(_=`${_} Door`);const U=x==="panel"?"With Panel":"Without Panel",P=I?` - ${I}`:"";return`${U}  ${_}${P}`},Z=()=>{const v=(h||"").toString();if(!b&&!v)return null;const N=v||me(),x=v||Iy[b]||b,I=b?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(b):$r(N).includes("GLASS")||$r(N).includes("STILE");return{label:N,productName:x,requiresGlazing:I}},ge=()=>{const v=(h||"").toString();if(!b&&!v||!s.length)return[];const N=v||(b?Iy[b]:"");let x=[];if(N&&(x=s.filter(F=>{const _=(F.product||"").toString();if(!_||!N)return!1;const U=$r(_),P=$r(N);return U.includes(P)||P.includes(U)})),(!x||x.length===0)&&!v&&(x=b?s.filter(F=>tq(F,b)):s.filter(F=>{const _=(F.product||"").toString();if(!N)return!1;const U=$r(_),P=$r(N);return U.includes(P)||P.includes(U)})),x.length===0)return[];const I=new Map;for(const F of x){const _=`${$r(F.product)}__${$r(F.name)}__${eq(F.code)}`,U=I.get(_);(!U||(F.rate||0)<(U.rate||0))&&I.set(_,F)}return Array.from(I.values())},we={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},pe=["Single Glass","Double Glass"],be=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],je=(v,N)=>{const x=$||1,I=X||7,F=ee||3,_=ue||6,U=re||2,P=Um(I,F),K=v.toLowerCase();let ae=0;return K.includes("frame")||K.includes("door frame")?ae=P*x:K.includes("door")&&(K.includes("panel")||K.includes("shutter")||K.includes("flush")||K.includes("wooden"))?ae=x:K.includes("hinge")?ae=x*3:K.includes("lock")||K.includes("handle")||K.includes("stopper")||K.includes("bolt")?ae=x:K.includes("glass")?ae=Lm(_,U)*x:ae=x,Math.max(1,Math.ceil(ae))},Ne=(v,N)=>{const x=v||oe,I=N||st;return x.map(F=>{let _=Qe.find(as=>as.id===F.materialId);if(_||(_=s.find(as=>as.id===F.materialId)||null),!_)return null;const U=s.find(as=>{const xs=$r(as.product)===$r(_.product),Gs=$r(as.name)===$r(_.name),Rn=as.shopId===F.selectedShopId,V=zp(as)===(F.selectedBrand||"Generic");return xs&&Gs&&Rn&&V})||_,P=t.find(as=>as.id===F.selectedShopId),K=F.rowId||(F.batchId?`${F.batchId}-${U.id}`:U.id),ae=I[K]||I[U.id]||I[_.id],Fe=je(U.name,U.unit),Ye=ae?.quantity??Fe,tt=ae?.supplyRate??U.rate??0,Ft=ae?.installRate??0,Zt=(Es||[]).find(as=>as.rowId===K||`${as.batchId||""}-${as.id}`===K);return{id:U.id,batchId:F.batchId,rowId:K,name:U.name,quantity:Ye,unit:U.unit,rate:tt,shopId:F.selectedShopId,shopName:P?.name||"Unknown",installRate:Ft,doorType:Zt?.doorType||Zt?.door_type||void 0,panelType:Zt?.panelType||Zt?.panel_type||void 0,subOption:Zt?.subOption||Zt?.sub_option||void 0,glazingType:Zt?.glazingType||Zt?.glazing_type||void 0,productLabel:Zt?.productLabel||void 0}}).filter(F=>F!==null)},Je=()=>Ne().reduce((v,N)=>v+N.quantity*N.rate,0),Qe=ge(),pt=v=>(v?.name||v?.title||v?.label||v?.productName||v?.product||"").toString(),Te=v=>(v?.category||v?.type||v?.group||v?.section||"").toString(),Ce=v=>Dd(v)==="electrical",_e=v=>{const N=$r(v);return N.includes("FLUSH")?"flush":N.includes("WPC")?"wpc":N.includes("STILE")||N.includes("ALUMIN")?"stile":N.includes("GLASS PANEL")?"glasspanel":N.includes("GLASS")?"glassdoor":N.includes("WOOD")||N.includes("TEAK")?"wooden":null},de=(n||[]).filter(Ce).slice().sort((v,N)=>{const x=pt(v),I=pt(N);return x.localeCompare(I)}),dt=v=>{const N=pt(v);d(v.id||N),o(N);const x=_e(N);w(x||b),L(null),k(null),J(null),se([]),nt({}),qt({}),gs({}),c(6)},[st,nt]=S.useState({}),[at,Dt]=S.useState([]),[yt,qe]=S.useState({}),[Tt,ns]=S.useState("Concept Trunk Interiors"),[Ts,vs]=S.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[Ns,et]=S.useState("33ASOPS5560M1Z1"),[De,rt]=S.useState(""),[mt,ls]=S.useState(new Date().toISOString().slice(0,10)),[Ht,Kt]=S.useState(""),[lt,Gt]=S.useState("50% Advance and 50% on Completion"),[Yt,Cs]=S.useState(""),[rs,Is]=S.useState(""),[on,ws]=S.useState(""),[St,qt]=S.useState({}),[Pt,gs]=S.useState({}),[Rs,Nn]=S.useState({}),[ys,Ln]=S.useState({}),[Zs,En]=S.useState({}),[Ls,Bs]=S.useState({}),[Ms,Os]=S.useState([]),[ot,Rt]=S.useState([]),[Mt,kt]=S.useState(""),[fs,ms]=S.useState([]),[Ds,js]=S.useState([]),[Lt,Hs]=S.useState([]),[Wr,sr]=S.useState(!1);S.useEffect(()=>{(async()=>{if(De)try{const N=await ct(`/api/estimator-step9-items?session_id=${De}&estimator=electrical`,{headers:{}});if(N.ok){const F=await N.json();ms(F.items||[])}const x=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=electrical`,{headers:{}});if(x.ok){const F=await x.json();js(F.items||[])}const I=await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=electrical`,{headers:{}});if(I.ok){const F=await I.json();Hs(F.items||[])}}catch(N){console.warn("Failed to load data from DB:",N)}})()},[De]),S.useEffect(()=>{if(i===7){const v=Ne(),N={};v.forEach(x=>{N[x.id]={quantity:x.quantity||0,supplyRate:x.rate||0,installRate:0}}),nt(N)}},[i,oe]),S.useEffect(()=>{if(i===9){const v=Ne(at,yt);if(v.length>0){const N=v[0].shopId,x=t.find(I=>I.id===N);if(x){const I=[x.name||"",x.address||"",x.area||"",x.city||"",x.state||"",x.pincode||"",x.gstNo?`GSTIN: ${x.gstNo}`:"",x.phone||""].filter(Boolean);ws(I.join(`
`))}}}},[i,at,yt,oe,t]),S.useEffect(()=>{if(i===9){is();const v=[],N={},x={},I={};if(Es&&Es.length>0)for(const F of Es){const _=F.rowId||`${F.batchId||""}-${F.id}`;v.findIndex(P=>P.materialId===F.id&&P.rowId===_&&(P.batchId||"")===(F.batchId||""))===-1&&(v.push({materialId:F.id,selectedShopId:F.shopId||"",selectedBrand:F.brand||void 0,batchId:F.batchId,rowId:_}),N[_]={quantity:Number(F.quantity||0),supplyRate:Number(F.supplyRate??F.rate??0),installRate:Number(F.installRate||0)},F.description&&(x[_]=F.description),F.location&&(I[_]=F.location))}if(fs&&fs.length>0)for(const F of fs){if(!s.find(Ye=>Ye.id===F.material_id))continue;const U=F.material_id,P=F.row_id||(F.batch_id?`${F.batch_id}-${U}`:U),K=F.shop_id||"",ae=F.brand||void 0;v.findIndex(Ye=>Ye.materialId===U&&(Ye.batchId||"")===(F.batch_id||"")&&(Ye.rowId||"")===P)===-1&&(v.push({materialId:U,selectedShopId:K,selectedBrand:ae,batchId:F.batch_id||(F.row_id?P.replace(`-${U}`,""):void 0)}),N[P]={quantity:Number(F.quantity||0),supplyRate:Number(F.supply_rate||F.rate||0),installRate:Number(F.install_rate||0)},F.description&&(x[P]=F.description),F.location&&(I[P]=F.location))}oe&&oe.length>0&&oe.forEach(F=>{if(v.findIndex(U=>U.materialId===F.materialId&&U.batchId===F.batchId)===-1){v.push(F);const U=s.find(P=>P.id===F.materialId);if(U){const P=F.batchId?`${F.batchId}-${F.materialId}`:F.materialId;N[P]={quantity:st[F.materialId]?.quantity??U.quantity??1,supplyRate:st[F.materialId]?.supplyRate??U.rate??0,installRate:st[F.materialId]?.installRate??0}}}}),v.length>0&&Dt(v),Object.keys(N).length>0&&qe(N),Object.keys(x).length>0&&qt(F=>({...F,...x})),Object.keys(I).length>0&&gs(F=>({...F,...I}))}},[i,oe,fs]),S.useEffect(()=>{i===11&&(async()=>{if(De)try{const N=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=electrical`,{headers:{}});if(N.ok){const I=(await N.json()).items||[],F={},_={},U={},P={};I.forEach(K=>{const ae=s.find(Fe=>Fe.name===K.item);ae&&(F[ae.id]=Number(K.supply_rate||0),_[ae.id]=Number(K.install_rate||0),U[ae.id]=Number(K.qty||0),P[ae.id]=K.unit||"")}),Bs(K=>({...K,...F})),En(K=>({...K,..._})),Nn(K=>({...K,...U})),Ln(K=>({...K,...P}))}}catch(N){console.warn("Failed to load step 11 data:",N)}})()},[i,De,Ds]);const ds=S.useRef(null);S.useEffect(()=>{is().catch(()=>{})},[]),S.useEffect(()=>{(async()=>{if(De)try{const N=await ct(`/api/estimator-step9-items?session_id=${De}&estimator=electrical`,{headers:{}});if(N.ok){const x=await N.json(),I=x.items.map(F=>({id:F.material_id,rowId:F.row_id,batchId:F.batch_id,name:F.name,unit:F.unit,quantity:F.quantity,supplyRate:F.supply_rate,installRate:F.install_rate,shopId:F.shop_id,shopName:F.shop_name,description:F.description,location:F.location,doorType:F.door_type,panelType:F.panel_type,subOption:F.sub_option,glazingType:F.glazing_type}));if(rn(I),x.items.length>0){const F=x.items[0];us({doorType:F.door_type,panelType:F.panel_type,subOption:F.sub_option,glazingType:F.glazing_type,count:F.qty,height:F.height,width:F.width,glassHeight:F.glass_height,glassWidth:F.glass_width,subtotal:F.subtotal,sgst:F.sgst,cgst:F.cgst,round_off:F.round_off,grand_total:F.grand_total})}}}catch(N){console.warn("Failed to load step 9 from DB",N)}})()},[De]),S.useEffect(()=>(ds.current&&clearTimeout(ds.current),ds.current=setTimeout(async()=>{new Date().toISOString();try{if(!De)return;const v=Ne().map((N,x)=>{const I=N.rowId||(N.batchId?`${N.batchId}-${N.id}`:N.id);return{estimator:"electrical",session_id:De,s_no:x+1,row_id:String(I),batch_id:N.batchId||null,material_id:N.id,name:N.name,unit:N.unit,quantity:Number(st[N.id]?.quantity??N.quantity??0),supply_rate:Number(st[N.id]?.supplyRate??N.rate??0),install_rate:Number(st[N.id]?.installRate??0),shop_id:N.shopId||"",shop_name:N.shopName||"",description:St[N.id]||"",location:Pt[N.id]||"",door_type:b,panel_type:p,sub_option:B,glazing_type:z,qty:$,height:X,width:ee,glass_height:ue,glass_width:re}});await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"electrical",session_id:De,items:v})})}catch{}},800),()=>{ds.current&&clearTimeout(ds.current)}),[oe,st,St,Pt,b,p,B,z,$,X,ee,ue,re,De]);const mn=v=>{const N=Qe.find(K=>K.id===v);if(!N)return;if(oe.find(K=>K.materialId===v)){se(K=>K.filter(ae=>ae.materialId!==v));return}const I=s.filter(K=>$r(K.product)===$r(N.product)&&$r(K.name)===$r(N.name)).map(K=>({brand:zp(K),shopId:K.shopId,rate:K.rate||0})),_=Array.from(new Set(I.map(K=>K.brand))).sort()[0]||"Generic",P=I.filter(K=>K.brand===_).sort((K,ae)=>K.rate-ae.rate)[0];P?.shopId&&se(K=>[...K,{materialId:v,selectedShopId:P.shopId,selectedBrand:_}])},cr=(v,N)=>{se(x=>x.map(I=>I.materialId===v?{...I,selectedShopId:N}:I))},nr=(v,N)=>{const x=Qe.find(_=>_.id===v);if(!x)return;const F=s.filter(_=>$r(_.product)===$r(x.product)&&$r(_.name)===$r(x.name)).map(_=>({brand:zp(_),shopId:_.shopId,rate:_.rate||0})).filter(_=>_.brand===N).sort((_,U)=>_.rate-U.rate)[0]?.shopId||"";se(_=>_.map(U=>U.materialId===v?{...U,selectedBrand:N,selectedShopId:F||U.selectedShopId}:U))},[sn,gn]=S.useState([]),qn=()=>{const v=(i===9?Ne(at,yt):Ne()).map(N=>N.rowId||N.id);gn(N=>N.length===v.length?[]:v)},Yr=async()=>{if(sn.length!==0){try{const v=[],N=[];for(const x of sn){const I=Es?.find(F=>`${F.batchId||""}-${F.id}`===x);if(I&&I.id){const F=fs.find(_=>_.id===I.id);F&&v.push(F)}else{const F=at.find(_=>`${_.batchId||""}-${_.materialId}`===x);F&&N.push(F)}}if(v.length>0&&De&&(await ct("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:De,estimator:"electrical",items:v})}),rn(x=>x?x.filter(I=>!v.some(F=>F.id===I.id)):null)),N.length>0&&Dt(x=>x.filter(I=>!N.some(F=>`${F.batchId||""}-${F.materialId}`==`${I.batchId||""}-${I.materialId}`))),Dt(x=>x.filter(I=>!sn.includes(`${I.batchId||""}-${I.materialId}`))),qe(x=>{const I={...x};return sn.forEach(F=>delete I[F]),I}),De){const I=await(await ct(`/api/estimator-step9-items?session_id=${De}&estimator=electrical`,{headers:{}})).json();ms(I.items||[])}r({title:"Success",description:`${sn.length} item(s) deleted successfully!`})}catch(v){console.warn("Failed to delete items",v),r({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}gn([])}},[Gr,ra]=S.useState([]),gr=S.useRef(""),[Ks,en]=S.useState(null),[Es,rn]=S.useState(null),[Ps,wr]=S.useState({}),[Ze,us]=S.useState(null),is=async()=>{try{const v=await ct("/api/boq");if(v.status===401){ra([]),gr.current!=="401"&&(gr.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!v.ok){const I=await v.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${I||v.status}`)}if(!(v.headers.get("content-type")||"").includes("application/json")){const I=await v.text().catch(()=>"");console.warn("/api/boq returned non-json:",I),ra([]);return}const x=await v.json();ra(x.boqs||[]),gr.current=""}catch(v){console.error("fetchSavedBoqs",v);const N=String(v?.message||v||"");if(!N)return;gr.current!==N&&(gr.current=N,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},yn=async()=>{try{if(!De)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const v={estimator:"electrical",billNo:De,doorType:b,panelType:p,subOption:B,glazingType:z,qty:$,height:X,width:ee,glassHeight:ue,glassWidth:re,materials:Es&&Es.length>0?Es:Ne(),subtotal:Xe,sgst:vt,cgst:ut,roundOff:Pe,grandTotal:Bt},N=await ct("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!N.ok){const F=await N.text().catch(()=>"");throw new Error(F||"save failed")}const x=N.headers.get("content-type")||"";let I=null;if(x.includes("application/json"))I=await N.json();else{const F=await N.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",F),I={boq:null}}return await is(),en(I?.boq||I?.boqs?.[0]||null),!0}catch(v){return console.error("handleSaveBOQ",v),!1}},Jn=async v=>{try{if(!(await ct(`/api/boq/${v}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await is()}catch(N){console.error("handleDeleteSavedBoq",N)}},zn=()=>{c(1),w(null),j(null),L(null),k(null),q(1),fe(7),le(3),te(0),ne(0),Os([]),Nn({}),qt({}),gs({}),Ln({}),Bs({}),En({}),wr({}),en(null)},ua=async()=>{sr(!0);try{let v=Ds||[];if(De)try{const _=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=electrical`);_.ok&&(v=(await _.json()).items||[],js(v))}catch(_){console.warn("Failed to refresh step11 items before save",_)}const N=ps.map(_=>({estimator:"electrical",session_id:De,group_key:(_.groupKey||`${_.doorType||"door"}||${_.panelType||""}||${_.subOption||""}`)+"::"+(_.name||""),group_id:_.groupId||`group_${_.groupKey||""}`,item_name:_.name,unit:_.unit,quantity:_.quantity,location:_.location||"",description:_.description||"",supply_rate:Ls[_.id]||_.supplyRate||0,install_rate:Zs[_.id]||_.installRate||0,supply_amount:(_.quantity||0)*(Ls[_.id]||_.supplyRate||0),install_amount:(_.quantity||0)*(Zs[_.id]||_.installRate||0),supply_subtotal:ps.reduce((U,P)=>U+(P.quantity||0)*(Ls[P.id]||P.supplyRate||0),0),install_subtotal:ps.reduce((U,P)=>U+(P.quantity||0)*(Zs[P.id]||P.installRate||0),0),sgst:vt,cgst:ut,round_off:Pe,grand_total:ps.reduce((U,P)=>U+(P.quantity||0)*((Ls[P.id]||P.supplyRate||0)+(Zs[P.id]||P.installRate||0)),0)+vt+ut+Pe})),x=new Set((v||[]).map(_=>_.group_key||_.groupKey)),I=N.filter(_=>!x.has(_.group_key));if(I.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),sr(!1),!0;const F=await ct("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:I})});if(!F.ok){const _=await F.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${_||F.statusText}`,variant:"destructive"}),sr(!1),!1}try{const _=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=electrical`);if(_.ok){const U=await _.json();js(U.items||[])}}catch(_){console.warn("Failed to reload step11 items after save",_)}return Me([]),r({title:"Success",description:"Step 11 saved to database."}),sr(!1),!0}catch(v){return console.error("handleSaveAccumulatedBOQ",v),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),sr(!1),!1}},ga=v=>{if(rt(v.bill_no||""),w(v.door_type||null),j(v.panel_type||null),L(v.sub_option||null),J(v.glazing_type||null),q(v.qty||1),fe(v.height||7),le(v.width||3),te(v.glass_height||6),ne(v.glass_width||2),Array.isArray(v.materials)){const N=v.materials.map(x=>({materialId:x.id,selectedShopId:x.shopId||x.shop_id||x.shopId||"",selectedBrand:x.shopName||x.brand||x.selectedBrand||void 0}));se(N.filter(Boolean))}en(v)},ha=(v,N)=>{if(i===9){qe(x=>({...x,[v]:{...x[v]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(N))}}));return}nt(x=>({...x,[v]:{...x[v]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(N))}}))},Tr=(v,N)=>{if(i===9){qe(x=>({...x,[v]:{...x[v]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(N)),installRate:x[v]?.installRate||0}}));return}nt(x=>({...x,[v]:{...x[v]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(N)),installRate:x[v]?.installRate||0}}))},$a=(v,N)=>{if(i===9){qe(x=>({...x,[v]:{...x[v]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(N)),supplyRate:x[v]?.supplyRate||0}}));return}nt(x=>({...x,[v]:{...x[v]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(N)),supplyRate:x[v]?.supplyRate||0}}))},ya=()=>{const v=document.getElementById("boq-pdf");if(!v){alert("BOQ content not found");return}setTimeout(()=>{Qd().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:N=>N.className?.toString().includes("bg-")||N.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(v).save().catch(N=>{console.error("PDF Export Error:",N),alert("PDF export failed. Check console.")})},100)},rr=async()=>{const v=document.getElementById("boq-final-pdf");if(!v){alert("Final BOQ content not found");return}const N=(await Yc(async()=>{const{default:x}=await Promise.resolve().then(()=>bu);return{default:x}},void 0)).default;N().set({margin:10,filename:`BOQ-${De||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(v).save()},oa=()=>{const v=Ne(),N=Z(),x=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${p==="panel"?"With Panel":"Without Panel"} - ${N?.label}`,`Dimensions: ${X}ft  ${ee}ft (Count: ${$})`,...z?[`Glazing: ${z}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];v.forEach((P,K)=>{const ae=P.quantity*P.rate;x.push(`${K+1},"${P.name}","${P.unit}",${P.quantity},${P.rate},"${P.shopName}",${ae}`)}),x.push("",`TOTAL COST,,,${Je().toFixed(2)}`);const I=x.join(`
`),F=new Blob([I],{type:"text/csv"}),_=window.URL.createObjectURL(F),U=document.createElement("a");U.href=_,U.download=`BOQ-Doors-${new Date().getTime()}.csv`,U.click(),URL.revokeObjectURL(_)},Ga=()=>{const v=ps||[],N=[];N.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),v.forEach((U,P)=>{const K=Number(U.supplyRate??U.rate??0),ae=Number(U.installRate??0),Fe=Number(U.quantity||0),Ye=Fe*K,tt=Fe*ae,Ft=(U.location||Pt[U.id]||"").toString().replace(/"/g,'""'),Zt=(U.description||St[U.id]||U.name||"").toString().replace(/"/g,'""'),Gs=(me({doorType:U.doorType||U.door_type,panelType:U.panelType||U.panel_type,subOption:U.subOption||U.sub_option,glazingType:U.glazingType||U.glazing_type})||U.name||"").replace(/"/g,'""');N.push(`${P+1},"${Gs}","${Ft}","${Zt}",${U.unit},${Fe},${K.toFixed(2)},${ae.toFixed(2)},${Ye.toFixed(2)},${tt.toFixed(2)}`)});const x=N.join(`
`),I=new Blob([x],{type:"text/csv"}),F=window.URL.createObjectURL(I),_=document.createElement("a");_.href=F,_.download=`BOQ-Doors-Step11-${new Date().getTime()}.csv`,_.click(),URL.revokeObjectURL(F)},fi=async()=>{const v=Ne(at,yt).map(U=>{const P=U.rowId||`${U.batchId}-${U.id}`;return{id:U.id,rowId:P,batchId:U.batchId||null,name:U.name,productLabel:U.productLabel||null,product_label:U.productLabel||null,unit:U.unit,quantity:yt[P]?.quantity??yt[U.id]?.quantity??U.quantity,supplyRate:yt[P]?.supplyRate??yt[U.id]?.supplyRate??U.rate,installRate:yt[P]?.installRate??yt[U.id]?.installRate??U.installRate??0,shopId:U.shopId,shopName:U.shopName,description:St[P]||St[U.id]||"",location:Pt[P]||Pt[U.id]||"",doorType:U.doorType,panelType:U.panelType,subOption:U.subOption,glazingType:U.glazingType,isSaved:U.isSaved||!1}}),N=v.filter(U=>!U.isSaved);if(N.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let x=De;(!x||x.trim()==="")&&(x=`DOOR-${Date.now()}`,rt(x));const I=Ze||(()=>{const U=v.reduce((Ye,tt)=>Ye+Number(tt.quantity||0)*(Number(tt.supplyRate||0)+Number(tt.installRate||0)),0),P=U*.09,K=U*.09,ae=Math.round(U+P+K)-(U+P+K),Fe=U+P+K+ae;return{subtotal:U,sgst:P,cgst:K,round_off:ae,grand_total:Fe}})(),F={id:`local-${Date.now()}`,estimator:"electrical",bill_no:x,door_type:Ze?.doorType||Ze?.door_type||b,panel_type:Ze?.panelType||Ze?.panel_type||p,sub_option:Ze?.subOption||Ze?.sub_option||B,glazing_type:Ze?.glazingType||Ze?.glazing_type||z,qty:Ze?.count||Ze?.qty||$,height:Ze?.height||X,width:Ze?.width||ee,glass_height:Ze?.glassHeight||Ze?.glass_height||ue,glass_width:Ze?.glassWidth||Ze?.glass_width||re,materials:v,subtotal:I.subtotal,sgst:I.sgst,cgst:I.cgst,round_off:I.round_off,grand_total:I.grand_total,created_at:new Date().toISOString()};en(F),rn(v);try{us(U=>({...U||{},...I}))}catch{}const _=N.map((U,P)=>({estimator:"electrical",session_id:x,s_no:P+1,row_id:String(U.rowId||`${U.batchId||""}-${U.id}`),batch_id:U.batchId||null,material_id:U.id,name:U.name,unit:U.unit,quantity:Number(U.quantity||0),supply_rate:Number(U.supplyRate||0),install_rate:Number(U.installRate||0),shop_id:U.shopId||"",shop_name:U.shopName||"",description:U.description||"",location:U.location||"",door_type:U.doorType||Ze?.doorType||Ze?.door_type||b||null,panel_type:U.panelType||Ze?.panelType||Ze?.panel_type||p||null,sub_option:U.subOption||Ze?.subOption||Ze?.sub_option||B||null,glazing_type:U.glazingType||Ze?.glazingType||Ze?.glazing_type||z||null,qty:Ze?.count||Ze?.qty||$,height:Ze?.height||X,width:Ze?.width||ee,glass_height:Ze?.glassHeight||Ze?.glass_height||ue,glass_width:Ze?.glassWidth||Ze?.glass_width||re,subtotal:I.subtotal,sgst:I.sgst,cgst:I.cgst,round_off:I.round_off,grand_total:I.grand_total}));try{await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"electrical",session_id:x,items:_})});const P=await(await ct(`/api/estimator-step9-items?session_id=${x}&estimator=electrical`,{headers:{}})).json();ms(P.items||[]);const K=(Es||[]).map(ae=>N.some(Ye=>ae.rowId===Ye.rowId||`${ae.batchId||""}-${ae.id}`==`${Ye.batchId||""}-${Ye.id}`)?{...ae,isSaved:!0}:ae);rn(K),r({title:"Success",description:`${N.length} new material(s) saved successfully to database!`})}catch(U){console.warn("Failed to save step 9 to DB",U),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},xa=v=>{let N=5381;for(let x=0;x<v.length;x+=1)N=(N<<5)+N^v.charCodeAt(x);return Math.abs(N>>>0).toString(36)},ie=()=>{const v=JSON.stringify({doorType:b,panelType:p,subOption:B,glazingType:z,count:$,height:X,width:ee,glassHeight:ue,glassWidth:re,selectedMaterials:(oe||[]).map(N=>({materialId:N.materialId,selectedShopId:N.selectedShopId,selectedBrand:N.selectedBrand})),editable:Object.keys(st||{}).sort().map(N=>({id:N,...st[N]}))});return`batch-${xa(v)}`},G=()=>{const v=ie(),N=Array.from(new Map((oe||[]).map(ae=>[ae.materialId,ae])).values()),x=Ne(N,st).map(ae=>({id:ae.id,rowId:`${v}-${ae.id}`,batchId:v,name:ae.name,unit:ae.unit,quantity:st[ae.id]?.quantity??ae.quantity,supplyRate:st[ae.id]?.supplyRate??ae.rate,installRate:st[ae.id]?.installRate??0,shopId:ae.shopId,shopName:ae.shopName,description:St[ae.id]||"",location:Pt[ae.id]||"",doorType:b,productLabel:h||me(),panelType:p,subOption:B,glazingType:z,isSaved:!1})),I=Array.from(new Map(x.map(ae=>[ae.id,ae])).values());if(I.length===0){c(9);return}const U=[...(Es||[]||[]).filter(ae=>ae.batchId!==v),...I],P=Array.from(new Map(U.map(ae=>[ae.rowId||`${ae.batchId}-${ae.id}`,ae])).values());rn(P),Dt(N.map(ae=>({materialId:ae.materialId,selectedShopId:ae.selectedShopId,selectedBrand:ae.selectedBrand,batchId:v})));const K={};P.forEach(ae=>{const Fe=ae.rowId||`${ae.batchId}-${ae.id}`;K[Fe]={quantity:Number(ae.quantity||0),supplyRate:Number(ae.supplyRate||ae.rate||0),installRate:Number(ae.installRate||0)}}),qe(K);try{const ae=Je(),Fe=ae*.09,Ye=ae*.09,tt=Math.round(ae+Fe+Ye)-(ae+Fe+Ye),Ft=ae+Fe+Ye+tt;us({doorType:b,panelType:p,subOption:B,glazingType:z,count:$,height:X,width:ee,glassHeight:ue,glassWidth:re,subtotal:ae,sgst:Fe,cgst:Ye,round_off:tt,grand_total:Ft})}catch{}c(9)},ve=i===9||i===11?Es||[]:Ne(),Le=i===9?yt:st,Xe=ve.reduce((v,N)=>v+N.quantity*((Le[N.id]?.supplyRate??N.rate)+(Le[N.id]?.installRate??N.installRate??0)),0),vt=Xe*.09,ut=Xe*.09,Pe=Math.round(Xe+vt+ut)-(Xe+vt+ut),Bt=Xe+vt+ut+Pe,_t=xe.length>0?xe.flatMap(v=>v.materials||[]):Es&&Es.length>0?Es:ve&&ve.length>0?ve:Ks&&Ks.materials&&Ks.materials.length>0?Array.isArray(Ks.materials)?Ks.materials:JSON.parse(Ks.materials||"[]"):ve,xn=(()=>{const v=new Map;for(const x of _t||[]){const I=x.productLabel||x.doorType||x.door_type||Ze?.doorType||Ze?.door_type||b||"door",F=x.panelType||x.panel_type||Ze?.panelType||Ze?.panel_type||p||"",_=x.subOption||x.sub_option||Ze?.subOption||Ze?.sub_option||"",U=`${I}||${F}||${_}`;v.has(U)||v.set(U,[]),v.get(U).push(x)}const N=[];for(const[x,I]of v.entries()){const[F,_,U]=x.split("||"),P=`group_${x}`,K=St[P]||"",ae=Pt[P]||"";let Fe=Number(Ps[P]??Ze?.count??Ze?.qty??$??1);const Ye=String(K).match(/Qty:\s*(\d+(?:\.\d+)?)/);Ye&&(Ps[P]===void 0||Ps[P]===null)&&(Fe=Number(Ye[1]));const tt=I.reduce((Rn,V)=>Rn+Number(V.quantity||0)*Number(V.supplyRate??V.rate??0),0),Ft=Fe>0?tt/Fe:tt,Zt=I.reduce((Rn,V)=>Rn+Number(V.quantity||0)*Number(V.installRate??0),0),as=Fe>0?Zt/Fe:Zt,xs=I[0]&&I[0].productLabel||me({doorType:F,panelType:_,subOption:U})||F,Gs=String(K).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();N.push({id:P,groupKey:x,name:xs,location:ae||"",description:Gs||"",unit:"pcs",quantity:Fe,supplyRate:Number(Ft||0),installRate:Number(Zs[P]??as??0),supplyAmount:Number(Ft*Fe||0),installAmount:Number((Zs[P]??as)*Fe||0)})}return N})();(Ds||[]).filter(v=>v.item||v.item_name).map((v,N)=>{const x=v.group_key||v.groupKey||`${v.door_type||v.doorType||"door"}||${v.panel_type||v.panelType||""}||${v.sub_option||v.subOption||""}`;return{id:v.id,groupKey:x,name:v.productLabel||v.item_name||v.item||v.name||v.door_label||v.doorType||v.door_type||"Door",location:v.location||"",description:v.description||"",unit:v.unit||"pcs",quantity:Number(v.quantity??v.qty??1),supplyRate:Number(v.supply_rate??v.supplyRate??0),installRate:Number(v.install_rate??v.installRate??0),supplyAmount:Number(v.supply_amount??0),installAmount:Number(v.install_amount??0),doorType:v.door_type||v.doorType,panelType:v.panel_type||v.panelType,subOption:v.sub_option||v.subOption}});const ps=(xe.length===0?xn.filter(v=>!(Ds||[]).some(x=>(x.group_key||x.groupKey||`${x.door_type||""}||${x.panel_type||""}||${x.sub_option||""}`)===v.groupKey)):xe.map((v,N)=>({id:`accumulated_${N}`,groupKey:`${v.doorType||"door"}||${v.panelType||""}||${v.subOption||""}`,name:v.productLabel||v.materials?.[0]?.productLabel||v.doorLabel||me({doorType:v.doorType,panelType:v.panelType,subOption:v.subOption})||v.doorType,location:v.location||"",description:v.description||"",unit:"pcs",quantity:v.count||1,supplyRate:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.supplyRate??I.rate??0),0)||0,installRate:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.installRate??0),0)||0,supplyAmount:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.supplyRate??I.rate??0),0)||0,installAmount:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.installRate??0),0)||0})))||[],Qs=ps.filter(v=>ot.includes(v.id)),Qn=ps.reduce((v,N)=>{const x=Number(Rs[N.id]??(N.quantity||0)),I=Number(Ls[N.id]??N.supplyRate??N.rate??0);return v+x*I},0);ps.reduce((v,N)=>{const x=Number(Rs[N.id]??(N.quantity||0));return v+x*Number(N.installRate||0)},0);const kn=Qs.reduce((v,N)=>{const x=Number(Rs[N.id]??(N.quantity||0)),I=Number(Ls[N.id]??N.supplyRate??N.rate??0);return v+x*I},0);Ks&&Ks.bill_no;const Wn=Ks&&Ks.created_at?new Date(Ks.created_at).toISOString().slice(0,10):mt,Xr=v=>{if(!v)return!1;const N=(v.name||"").toString().trim(),x=Number(v.quantity||0),I=Number(v.supplyRate??v.rate??0),F=Number(v.installRate??0),_=(v.description||"").toString().trim(),U=(v.location||"").toString().trim();return!!N||x>0||I>0||F>0||!!_||!!U};return(xe||[]).map(v=>{const N=(v.materials||[]).filter(Xr),x=N.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.supplyRate??_.rate??0),0),I=N.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.installRate??0),0);return{...v,materials:N,supplySubtotal:x,installSubtotal:I,subtotal:x+I}}).filter(v=>(v.materials||[]).length>0),e.jsx(ka,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Electrical Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(ks,{className:"border-border/50",children:e.jsx(Ws,{className:"pt-8 min-h-96",children:e.jsxs(Fl,{mode:"wait",children:[i===1&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Electrical Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:de.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No door products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Door."})]}):e.jsx("div",{className:"grid gap-3",children:de.map(v=>{const N=pt(v),x=(v?.id||N).toString(),I=u===x;return e.jsx(Be,{variant:I?"default":"outline",onClick:()=>dt(v),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:N||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Te(v)})]})},x)})})})]},"step-select-product"),i===11&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:kv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Wn})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all-groups",checked:(()=>{const v=(ps||[]).map(N=>N.id);return v.length>0&&v.every(N=>Ms.includes(N))})(),onCheckedChange:v=>{Os(v?(ps||[]).map(N=>N.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(ps||[]).map((v,N)=>{const x=Number(Ls[v.id]??v.supplyRate??v.rate??0),I=Number(Zs[v.id]??v.installRate??0);let F=Number(Rs[v.id]??(v.quantity||0));const _=F*x,U=F*I;return Pt[v.id]??v.location,St[v.id]??v.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{checked:Ms.includes(v.id),onCheckedChange:()=>{Os(P=>P.includes(v.id)?P.filter(K=>K!==v.id):[...P,v.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:N+1}),e.jsx("td",{className:"border px-2 py-1",children:v.productLabel||v.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx($e,{value:Pt[v.id]??v.location??"",onChange:P=>gs(K=>({...K,[v.id]:P.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:St[v.id]??v.description??"",onChange:P=>qt(K=>({...K,[v.id]:P.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{value:ys[v.id]??v.unit??"",onChange:P=>Ln(K=>({...K,[v.id]:P.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",value:F,onChange:P=>Nn(K=>({...K,[v.id]:Number(P.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:x,onChange:P=>Bs(K=>({...K,[v.id]:Number(P.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:I,onChange:P=>En(K=>({...K,[v.id]:Number(P.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",U.toFixed(2)]})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Qn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!A&&e.jsx(Be,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Be,{variant:"destructive",disabled:Ms.length===0,onClick:async()=>{if(console.log("Delete selected:",Ms),Ds.length>0&&De)try{await ct("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Ms,estimator:"electrical"})});const v=await ct(`/api/estimator-step11-groups?session_id=${De}&estimator=electrical`,{headers:{}});if(v.ok){const N=await v.json();js(N.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(v){console.warn("Failed to delete step 11 from DB",v),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(xe.length===0)if(Ks){console.log("Deleting from saved BOQ");const v=Ms.map(F=>F.replace("group_","")),N=Array.isArray(Ks.materials)?Ks.materials:JSON.parse(Ks.materials||"[]");console.log("Current materials:",N.length);const x=N.filter(F=>{const _=F.doorType||F.door_type||Ze?.doorType||Ze?.door_type||b||"door",U=F.panelType||F.panel_type||Ze?.panelType||Ze?.panel_type||p||"",P=F.subOption||F.sub_option||Ze?.subOption||Ze?.sub_option||B||"",K=`${_}||${U}||${P}`,ae=v.includes(K);return console.log("Checking material:",F.id||F.name,K,"match:",ae),!ae});console.log("Filtered materials:",x.length);const I={...Ks,materials:x};en(I),ct("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}).then(()=>console.log("Saved updated BOQ")).catch(F=>console.error("Error saving BOQ:",F))}else{console.log("Deleting from Step 11 saved materials");const v=Ms.map(I=>I.replace("group_","")),x=((Es&&Es.length>0?Es:ve)||[]).filter(I=>{const F=I.doorType||I.door_type||Ze?.doorType||Ze?.door_type||b||"door",_=I.panelType||I.panel_type||Ze?.panelType||Ze?.panel_type||p||"",U=I.subOption||I.sub_option||Ze?.subOption||Ze?.sub_option||B||"",P=`${F}||${_}||${U}`;return!v.includes(P)});rn(x)}else if(xe.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",xe.length);let v;if(Ms.some(N=>N.startsWith("accumulated_"))){const N=Ms.filter(x=>x.startsWith("accumulated_")).map(x=>parseInt(x.replace("accumulated_",""))).sort((x,I)=>I-x);v=[...xe],N.forEach(x=>{x>=0&&x<v.length&&v.splice(x,1)})}else{const N=Ms.map(x=>x.replace("group_",""));v=xe.filter(x=>{const I=`${x.doorType||"door"}||${x.panelType||""}||${x.subOption||""}`,F=N.includes(I);return console.log("Checking product:",x.id,I,"match:",F),!F})}console.log("Accumulated products after:",v.length),Me(v),ct("/api/accumulated-products/electrical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:v})}).catch(N=>console.error("Failed to save accumulated products after delete",N))}Os([])},children:"Delete Selected"}),e.jsx(Be,{onClick:zn,children:"Add Product"}),e.jsx(Be,{onClick:ua,disabled:Wr,children:"Save"}),e.jsx(Be,{onClick:async()=>{Rt(Ms);const v=(Qs||[]).map((N,x)=>{const I=Number(Ls[N.id]??N.supplyRate??N.rate??0),F=Number(Zs[N.id]??N.installRate??0);let _=Number(Rs[N.id]??(N.quantity||0));return{s_no:x+1,item:N.name,location:Pt[N.id]??N.location??"",description:St[N.id]??N.description??"",unit:ys[N.id]??N.unit??"",qty:_,supply_rate:I,install_rate:F,supply_amount:_*I,install_amount:_*F}});try{const N=await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=electrical`,{headers:{}});let x=[];N.ok&&(x=(await N.json()).items||[]);const I=v.filter(U=>!x.some(P=>P.item===U.item&&P.description===U.description&&P.unit===U.unit));if(I.length===0){c(12);return}await ct("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"electrical",session_id:De,items:I})});const _=await(await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=electrical`,{headers:{}})).json();Hs(_.items||[]),r({title:"Success",description:`${I.length} new material(s) saved successfully to database!`}),c(12)}catch(N){console.warn("Failed to save step 12 to DB",N),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),i===4&&b&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(we[b]||[]).map(v=>e.jsx(Be,{onClick:()=>{L(v),k(null)},className:`w-full text-black ${B===v?"bg-cyan-500":"bg-white"}`,children:v},v))}),b==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:pe.map(v=>e.jsx(Be,{onClick:()=>k(v),className:`w-full text-black ${Q===v?"bg-cyan-500":"bg-white"}`,children:v},v))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(3),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{onClick:()=>c(5),disabled:!B||b==="flush"&&B==="With Vision Panel"&&!Q,children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),i===5&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"count",children:"Count"}),e.jsx($e,{id:"count",type:"number",placeholder:"1",value:$||"",onChange:v=>q(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"height",children:"Height"}),e.jsx($e,{id:"height",type:"number",placeholder:"7",value:X||"",onChange:v=>fe(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"width",children:"Width"}),e.jsx($e,{id:"width",type:"number",placeholder:"3",value:ee||"",onChange:v=>le(v.target.value?parseFloat(v.target.value):null)})]})]}),Z()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(Ve,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx($e,{id:"glassHeight",type:"number",placeholder:"72",value:ue||"",onChange:v=>te(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx($e,{id:"glassWidth",type:"number",placeholder:"24",value:re||"",onChange:v=>ne(v.target.value?parseFloat(v.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(Z()?.requiresGlazing?4:3),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{disabled:!$||!X||!ee||Z()?.requiresGlazing&&(!ue||!re),onClick:()=>c(6),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),i===6&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Z()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Fn,{id:"select-all-materials",checked:oe.length===Qe.length&&Qe.length>0,onCheckedChange:v=>{if(v){const N=Qe.map(x=>{const I=s.filter(P=>$r(P.product)===$r(x.product)&&$r(P.name)===$r(x.name)).map(P=>({id:P.id,brand:zp(P),shopId:P.shopId,rate:P.rate,unit:P.unit,shopName:t.find(K=>K.id===P.shopId)?.name||"Unknown"})),_=Array.from(new Set(I.map(P=>P.brand))).sort()[0]||"Generic",U=I.filter(P=>P.brand===_).sort((P,K)=>(P.rate||0)-(K.rate||0));return{materialId:x.id,selectedBrand:_,selectedShopId:U[0]?.shopId||""}});se(N)}else se([])}}),e.jsx(Ve,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Qe.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",b||h||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(b?fR[b]||[b]:[h||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(v=>v.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Qe.map(v=>{const N=oe.some(K=>K.materialId===v.id),x=oe.find(K=>K.materialId===v.id),I=s.filter(K=>$r(K.product)===$r(v.product)&&$r(K.name)===$r(v.name)).map(K=>({id:K.id,brand:zp(K),shopId:K.shopId,rate:K.rate,unit:K.unit,shopName:t.find(ae=>ae.id===K.shopId)?.name||"Unknown"})),F=Array.from(new Set(I.map(K=>K.brand))).sort(),U=oe.find(K=>K.materialId===v.id)?.selectedBrand||F[0]||"Generic",P=I.filter(K=>K.brand===U).sort((K,ae)=>(K.rate||0)-(ae.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fn,{id:v.id,checked:N,onCheckedChange:()=>mn(v.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:v.id,className:"font-medium cursor-pointer",children:v.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.code}),N&&F.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Ve,{className:"text-xs",children:"Select Brand:"}),e.jsxs(Bn,{value:U,onValueChange:K=>nr(v.id,K),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:F.map(K=>e.jsx(dn,{value:K,children:K},K))})]})]}),N&&P.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Ve,{className:"text-xs",children:"Select Shop:"}),e.jsxs(Bn,{value:x?.selectedShopId||P[0].shopId,onValueChange:K=>cr(v.id,K),children:[e.jsx(wn,{className:"h-8 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:P.map(K=>e.jsxs(dn,{value:K.shopId||"",children:[K.shopName," - ",K.rate,"/",v.unit,K.rate===P[0].rate&&" (Best)"]},K.shopId))})]})]})]})]})},v.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(1),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{disabled:oe.length===0,onClick:()=>c(7),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),i===7&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Ve,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:Ne().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),Ne().map(v=>{const N=oe.find(I=>I.materialId===v.id),x=s.find(I=>I.id===v.id);return e.jsxs("div",{className:Vs("p-3 border rounded grid grid-cols-8 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:v.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:N?.selectedBrand||x?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx($e,{type:"number",value:st[v.id]?.quantity??v.quantity,onChange:I=>ha(v.id,parseInt(I.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:v.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:v.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx($e,{type:"number",value:st[v.id]?.supplyRate??v.rate,onChange:I=>Tr(v.id,parseFloat(I.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((st[v.id]?.quantity??v.quantity)*((st[v.id]?.supplyRate??v.rate)+(st[v.id]?.installRate??0))).toFixed(2)]})]},v.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(6),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Be,{onClick:()=>c(8),disabled:Ne().length===0,children:["Next: Generate BOM"," ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),i===8&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(Wo,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||me()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[X," ft  ",ee," ft (Qty: ",$,")"]})]}),z&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:z})]}),Z()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[ue,'"  ',re,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(v=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:v==="Qty"||v.includes("Rate")||v.includes("Amount")?"right":"left"},children:v},v))})}),e.jsx("tbody",{children:Ne().map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:N+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:v.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:v.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:v.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:v.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:v.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(v.quantity*v.rate).toFixed(2)})]},v.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:oe.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:Ne().reduce((v,N)=>v+N.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",Je().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Be,{onClick:()=>c(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:oa,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(hi,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:ya,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Be,{onClick:()=>G(),disabled:Ne().length===0,children:["Add to BOM ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{c(1),d(""),o(""),j(null),w(null),J(null),q(1),fe(7),le(3),te(6),ne(2),se([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(er,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),i===12&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:kv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Wn})})]}),!Qs||Qs.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Qs||[]).map((v,N)=>{const x=Number(Ls[v.id]??v.supplyRate??v.rate??0),I=Number(Zs[v.id]??v.installRate??0);let F=Number(Rs[v.id]??(v.quantity||0));const _=F*x,U=F*I,P=Pt[v.id]??v.location??"",K=St[v.id]??v.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:N+1}),e.jsx("td",{className:"border px-2 py-1",children:v.productLabel||v.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:P||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:K||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:ys[v.id]??v.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:F}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",x.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",I.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",U.toFixed(2)]})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(kn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Be,{onClick:async()=>{if(Lt.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const v=await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=electrical`,{headers:{}});let N=[];v.ok&&(N=(await v.json()).items||[]);const I=(Qs||[]).map((U,P)=>{const K=Number(Ls[U.id]??U.supplyRate??U.rate??0),ae=Number(Zs[U.id]??U.installRate??0),Fe=Number(Rs[U.id]??(U.quantity||0));return{s_no:P+1,item:U.name,location:Pt[U.id]??U.location??"",description:St[U.id]??U.description??"",unit:ys[U.id]??U.unit??"",qty:Fe,supply_rate:K,install_rate:ae,supply_amount:Fe*K,install_amount:Fe*ae}}).filter(U=>!N.some(P=>P.item===U.item&&P.description===U.description&&P.unit===U.unit));if(I.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await ct("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"electrical",session_id:De,items:I})});const _=await(await ct(`/api/estimator-step12-qa-selection?session_id=${De}&estimator=electrical`,{headers:{}})).json();Hs(_.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(v){console.warn("Failed to save step 12 to DB",v),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Be,{onClick:()=>c(1),children:"Add More Products"}),e.jsx(Be,{onClick:Ga,children:"Export Excel"})]})]},"step-qa-boq"),i===10&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill No"}),e.jsx($e,{value:De,onChange:v=>rt(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill Date"}),e.jsx($e,{type:"date",value:mt,onChange:v=>ls(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Due Date"}),e.jsx($e,{type:"date",value:Ht,onChange:v=>Kt(v.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Name"}),e.jsx($e,{value:Yt,onChange:v=>Cs(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Address"}),e.jsx($e,{value:rs,onChange:v=>Is(v.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Terms & Conditions"}),e.jsx($e,{value:lt,onChange:v=>Gt(v.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Ve,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Mt,onChange:v=>kt(v.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),Ne().map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]}),Mt&&e.jsx($e,{placeholder:"Enter description for selected material",value:St[Mt]||"",onChange:v=>qt(N=>({...N,[Mt]:v.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:kv,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",De]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:on})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",mt]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",Ht]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",lt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",Yt]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(v=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:v},v))})}),e.jsx("tbody",{children:ve.map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.id&&St[v.id]||v.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(v.quantity||0)*Number(v.rate||0)||0).toFixed(2)})]},v.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:Xe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:vt.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:ut.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:Pe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Bt.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Bt.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Be,{onClick:rr,children:"Export PDF"})]})]}),i===9&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{variant:"destructive",onClick:Yr,disabled:sn.length===0,children:"Delete Selected"}),e.jsx(Be,{type:"button",onClick:fi,disabled:ve.length===0,children:"Save"}),e.jsx(Be,{onClick:async()=>{const v=Ne(at,yt),N=sn.length>0?v.filter(_=>sn.includes(_.rowId||`${_.batchId}-${_.id}`)):v,x=N.map(_=>{const U=_.rowId||`${_.batchId||""}-${_.id}`;return{id:_.id,rowId:U,batchId:_.batchId,name:_.name,unit:_.unit,quantity:yt[U]?.quantity??yt[_.id]?.quantity??_.quantity,supplyRate:yt[U]?.supplyRate??yt[_.id]?.supplyRate??_.rate,installRate:yt[U]?.installRate??yt[_.id]?.installRate??_.installRate??0,shopId:_.shopId,shopName:_.shopName,description:St[U]||St[_.id]||"",location:Pt[U]||Pt[_.id]||"",doorType:_.doorType,panelType:_.panelType,subOption:_.subOption,glazingType:_.glazingType}});if(x.length===0)return;const I=N[0],F={id:`local-${Date.now()}`,estimator:"electrical",bill_no:De,door_type:I?.doorType||Ze?.doorType||Ze?.door_type||b,panel_type:I?.panelType||Ze?.panelType||Ze?.panel_type||p,sub_option:I?.subOption||Ze?.subOption||Ze?.sub_option||B,glazing_type:I?.glazingType||Ze?.glazingType||Ze?.glazing_type||z,qty:Ze?.count||Ze?.qty||$,height:Ze?.height||X,width:Ze?.width||ee,glass_height:Ze?.glassHeight||Ze?.glass_height||ue,glass_width:Ze?.glassWidth||Ze?.glass_width||re,materials:x,subtotal:x.reduce((_,U)=>_+Number(U.quantity||0)*(Number(U.supplyRate||0)+Number(U.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};en(F);try{await yn()}catch{}gn([]),c(11)},disabled:ve.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{className:"text-sm font-semibold",children:"Saved BOQs"}),Gr.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:Gr.map(v=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:v.bill_no||`${v.estimator} - ${v.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(v.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{onClick:()=>ga(v),size:"sm",children:"Load"}),e.jsx(Be,{variant:"destructive",onClick:()=>Jn(v.id),size:"sm",children:"Delete"})]})]},v.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all",checked:(()=>{const v=(i===9?Ne(at,yt):Ne()).map(N=>N.rowId||N.id);return sn.length===v.length&&v.length>0})(),onCheckedChange:qn})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const v=new Map,N=new Map;ve.forEach(F=>{const _=F.doorType||F.door_type||Ze?.doorType||Ze?.door_type||b||"door",U=F.panelType||F.panel_type||Ze?.panelType||Ze?.panel_type||p||"",P=F.subOption||F.sub_option||Ze?.subOption||Ze?.sub_option||"",K=`${_}||${U}||${P}`;if(v.has(K)||v.set(K,[]),v.get(K).push(F),!N.has(K)){const Fe=(v.get(K)||[])[0]?.productLabel||`${U==="panel"?"With Panel":"Without Panel"}  ${_}${P?" ("+P+")":""}`;N.set(K,{label:Fe})}});const x=[];let I=0;for(const[F,_]of v.entries()){const U=_.map(Ye=>Ye.rowId||`${Ye.batchId||""}-${Ye.id}`),P=U.every(Ye=>sn.includes(Ye)),K=`group_${F}`,ae=St[K]||"",Fe=Number(Ps[K]??Ze?.count??Ze?.qty??$??1);x.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Fn,{id:`group-${F}`,checked:P,onCheckedChange:()=>{gn(P?Ye=>Ye.filter(tt=>!U.includes(tt)):Ye=>Array.from(new Set([...Ye,...U])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:N.get(F)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx($e,{placeholder:"Group description",value:ae?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:Ye=>qt(tt=>({...tt,[K]:Ye.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",className:"h-8 text-center",value:Ps[K]??Fe,onChange:Ye=>{const tt=Ye.target.value?parseFloat(Ye.target.value):0;wr(Ft=>({...Ft,[K]:tt})),qt(Ft=>{const Zt=(Ft[K]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...Ft,[K]:Zt?Zt+`
Qty: `+tt:"Qty: "+tt}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${F}`));for(const Ye of _){I+=1;const tt=Ye.rowId||`${Ye.batchId}-${Ye.id}`,Ft=Number(Le[tt]?.supplyRate??Le[Ye.id]?.supplyRate??Ye.rate??0),Zt=Number(Le[tt]?.installRate??Le[Ye.id]?.installRate??Ye.installRate??0),as=Ft+Zt,xs=Number(Le[tt]?.quantity??Le[Ye.id]?.quantity??Ye.quantity??0),Gs=xs*as,Rn=St[tt]??St[Ye.id]??Ye.description??"",V=String(Rn).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();x.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:I}),e.jsx("td",{className:"border px-2 py-1",children:Ye.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:St[tt]??St[Ye.id]??V,onChange:ye=>qt(He=>({...He,[tt]:ye.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:ys[tt]??ys[Ye.id]??Ye.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx($e,{type:"number",className:"h-8 text-center",value:xs,onChange:ye=>ha(tt,ye.target.value?parseFloat(ye.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx($e,{type:"number",value:as,onChange:ye=>{const He=parseFloat(ye.target.value||"0"),it=Number(Le[tt]?.supplyRate??Le[Ye.id]?.supplyRate??Ft),bt=Math.max(0,He-it);Tr(tt,it),$a(tt,bt)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Gs.toFixed(2)]})]},tt))}}return x})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(8),children:[e.jsx(er,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Be,{onClick:()=>c(10),children:"Finalize PO"}),e.jsxs(Be,{onClick:ya,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}function nq(){const{shops:t,materials:s,products:n}=ei(),{toast:r}=ma(),[i,c]=S.useState(1),[A,u]=S.useState(""),[d,h]=S.useState(null),[o,m]=S.useState(`PLB-${Math.floor(1e3+Math.random()*9e3)}`),[y,p]=S.useState(new Date().toISOString().slice(0,10)),[j,b]=S.useState([]),[w,B]=S.useState({}),[L,Q]=S.useState({}),[k,z]=S.useState({}),[J,$]=S.useState({}),[q,X]=S.useState({}),[fe,ee]=S.useState([]),[le,ue]=S.useState([]),[te,re]=S.useState(!1);S.useEffect(()=>{(async()=>{if(o)try{const Ce=await ct(`/api/estimator-step9-items?session_id=${o}&estimator=plumbing`);if(Ce.ok){const de=await Ce.json();ee(de.items||[])}const _e=await ct(`/api/estimator-step11-groups?session_id=${o}&estimator=plumbing`);if(_e.ok){const de=await _e.json();ue(de.items||[])}}catch(Ce){console.warn("Failed to load DB data:",Ce)}})()},[o]);const ne=Te=>String(Te||"").toUpperCase(),oe=S.useMemo(()=>(n||[]).filter(Te=>Dd(Te)==="plumbing").sort((Te,Ce)=>{const _e=(Te.name||"").toString(),de=(Ce.name||"").toString();return _e.localeCompare(de)}),[n]),se=Te=>{const Ce=typeof Te=="string"?Te:Te?.name||"";return Ce?s.filter(_e=>{const de=ne(_e.product||""),dt=ne(_e.subCategory||""),st=ne(Ce);return!!(de&&st&&(de.includes(st)||st.includes(de))||dt&&st&&(dt.includes(st)||st.includes(dt)))}):[]},xe=Te=>{const Ce=s.find(de=>de.id===Te);if(!Ce)return[];const _e=s.filter(de=>de.name===Ce.name&&de.code===Ce.code);return Array.from(new Set(_e.map(de=>de.brandName||"Generic"))).sort()},Me=(Te,Ce)=>{const _e=s.find(dt=>dt.id===Te);return _e?s.filter(dt=>dt.name===_e.name&&(Ce?(dt.brandName||"Generic")===Ce:!0)).filter((dt,st,nt)=>nt.findIndex(at=>at.shopId===dt.shopId)===st):[]},Z=j.map(Te=>{const Ce=s.find(nt=>nt.id===Te.materialId),_e=t.find(nt=>nt.id===Te.selectedShopId),de=w[Ce?.id||""]?.quantity??1,dt=w[Ce?.id||""]?.supplyRate??Ce?.rate??0,st=w[Ce?.id||""]?.installRate??0;return{...Ce,quantity:de,supplyRate:dt,installRate:st,shopName:_e?.name||"Market",supplyAmount:de*dt,installAmount:de*st}}),ge=Z.reduce((Te,Ce)=>Te+(Ce.quantity||0)*((Ce.supplyRate||0)+(Ce.installRate||0)),0),we=ge*.09,pe=ge*.09,be=Math.round(ge+we+pe)-(ge+we+pe),je=ge+we+pe+be,Ne=Te=>{if(j.find(_e=>_e.materialId===Te))b(_e=>_e.filter(de=>de.materialId!==Te)),B(_e=>{const de={..._e};return delete de[Te],de});else{const _e=se(A).find(de=>de.id===Te);if(_e){const dt=xe(Te)[0]||"Generic",nt=Me(Te,dt).sort((at,Dt)=>(at.rate||0)-(Dt.rate||0))[0];b(at=>[...at,{materialId:Te,selectedShopId:nt?.shopId||"",selectedBrand:dt}]),B(at=>({...at,[Te]:{quantity:1,supplyRate:nt?.rate||_e.rate||0,installRate:0}}))}}},Je=async()=>{try{if(!o.trim()){r({title:"Error",description:"Please enter a Bill No.",variant:"destructive"});return}const Te=Z.map((de,dt)=>({session_id:o,estimator:"plumbing",s_no:dt+1,material_id:de.id,name:de.name,productLabel:de.productLabel||null,product_label:de.productLabel||null,unit:de.unit||"pcs",quantity:de.quantity,supply_rate:de.supplyRate,install_rate:de.installRate,shop_id:j.find(st=>st.materialId===de.id)?.selectedShopId||"",shop_name:de.shopName,description:L[de.id||""]||"",location:k[de.id||""]||""})),Ce=await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"plumbing",session_id:o,items:Te})});if(!Ce.ok)throw new Error("Save failed");const _e=await Ce.json();ee(_e.items||[]),r({title:"Success",description:"Step 9 saved to database."}),c(11)}catch(Te){console.error("Failed to save step 9",Te),r({title:"Error",description:"Failed to save step 9.",variant:"destructive"})}},Qe=()=>{if(Z.length===0){r({title:"Error",description:"Please select materials first.",variant:"destructive"});return}c(12)},pt=async()=>{re(!0);try{let Te=le||[];if(o)try{const nt=await ct(`/api/estimator-step11-groups?session_id=${o}&estimator=plumbing`);nt.ok&&(Te=(await nt.json()).items||[],ue(Te))}catch(nt){console.warn("Failed to refresh step11 items",nt)}const Ce=Z.map((nt,at)=>({estimator:"plumbing",session_id:o,s_no:at+1,group_key:`plumbing_${nt.id}`,group_id:`group_${nt.id}`,item_name:nt.name,unit:nt.unit||"pcs",quantity:nt.quantity,location:k[nt.id||""]||"",description:L[nt.id||""]||"",supply_rate:J[nt.id||""]||nt.supplyRate||0,install_rate:q[nt.id||""]||nt.installRate||0,supply_amount:nt.quantity*(J[nt.id||""]||nt.supplyRate||0),install_amount:nt.quantity*(q[nt.id||""]||nt.installRate||0),supply_subtotal:Z.reduce((Dt,yt)=>Dt+yt.quantity*(J[yt.id||""]||yt.supplyRate||0),0),install_subtotal:Z.reduce((Dt,yt)=>Dt+yt.quantity*(q[yt.id||""]||yt.installRate||0),0),sgst:we,cgst:pe,round_off:be,grand_total:je})),_e=new Set((Te||[]).map(nt=>nt.group_key)),de=Ce.filter(nt=>!_e.has(nt.group_key));if(de.length===0){r({title:"No changes",description:"No new items to save."}),re(!1);return}if(!(await ct("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:de})})).ok)throw new Error("Save failed");const st=await ct(`/api/estimator-step11-groups?session_id=${o}&estimator=plumbing`);if(st.ok){const nt=await st.json();ue(nt.items||[])}r({title:"Success",description:"Step 11 saved to database."}),re(!1)}catch(Te){console.error("handleSaveStep11",Te),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),re(!1)}};return e.jsx(ka,{children:e.jsxs("div",{className:"max-w-6xl mx-auto p-4 space-y-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Plumbing Estimator"}),e.jsxs(Fl,{mode:"wait",children:[i===1&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Select Products"}),oe.length===0?e.jsx(ks,{className:"p-6 bg-yellow-50 border-yellow-200",children:e.jsx("p",{className:"text-center text-yellow-800",children:"No plumbing materials available in database"})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:oe.map(Te=>{const Ce=Te.name||Te.subcategory||Te.subcategory_name||"",_e=se(Ce).length;return e.jsx(ks,{className:"cursor-pointer border-2 hover:border-primary transition-all hover:shadow-lg",onClick:()=>{u(Ce),h(Te),b([]),B({}),c(2)},children:e.jsxs(Ws,{className:"p-6 text-center",children:[e.jsx("p",{className:"font-bold text-lg",children:Ce}),e.jsxs("p",{className:"text-sm text-slate-500",children:[_e," items available"]})]})},Te.id||Ce)})})})]},"s1"),i===2&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Available materials for ",A,". Best price shop is pre-selected."]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-[600px] overflow-y-auto p-3 border rounded bg-slate-50",children:se(A).map(Te=>{const Ce=j.some(nt=>nt.materialId===Te.id),_e=j.find(nt=>nt.materialId===Te.id),de=xe(Te.id),dt=_e?.selectedBrand||de[0]||"Generic",st=Me(Te.id,dt);return e.jsxs("div",{className:Vs("p-4 border-2 rounded-lg transition-all",Ce?"border-primary bg-white":"border-slate-200 bg-white"),children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Fn,{checked:Ce,onCheckedChange:()=>Ne(Te.id),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold",children:Te.name}),e.jsx("p",{className:"text-xs text-slate-500",children:Te.code})]})]}),Ce&&e.jsxs("div",{className:"mt-4 ml-8 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{className:"text-xs",children:"Select Brand"}),e.jsxs(Bn,{value:dt,onValueChange:nt=>{b(yt=>yt.map(qe=>qe.materialId===Te.id?{...qe,selectedBrand:nt}:qe));const Dt=Me(Te.id,nt).sort((yt,qe)=>(yt.rate||0)-(qe.rate||0))[0];Dt&&b(yt=>yt.map(qe=>qe.materialId===Te.id?{...qe,selectedShopId:Dt.shopId||""}:qe))},children:[e.jsx(wn,{className:"h-8",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:de.map(nt=>e.jsx(dn,{value:nt,children:nt},nt))})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{className:"text-xs",children:"Select Shop"}),e.jsxs(Bn,{value:_e?.selectedShopId||"",onValueChange:nt=>b(at=>at.map(Dt=>Dt.materialId===Te.id?{...Dt,selectedShopId:nt}:Dt)),children:[e.jsx(wn,{className:"h-8",children:e.jsx(Cn,{placeholder:"Choose shop"})}),e.jsx(Sn,{children:st.map(nt=>{const at=t.find(Dt=>Dt.id===nt.shopId);return e.jsxs(dn,{value:nt.shopId||"",children:[at?.name||"Unknown","  ",nt.rate]},nt.id)})})]})]})]})]},Te.id)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(1),className:"flex-1",children:[e.jsx(er,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(Be,{disabled:j.length===0,onClick:()=>c(3),className:"flex-1",children:["Review Materials ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"s2"),i===3&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-900 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-3 text-left",children:"Item"}),e.jsx("th",{className:"border p-3",children:"Brand"}),e.jsx("th",{className:"border p-3",children:"Qty"}),e.jsx("th",{className:"border p-3",children:"Unit"}),e.jsx("th",{className:"border p-3",children:"Shop"}),e.jsx("th",{className:"border p-3 text-right",children:"Rate ()"}),e.jsx("th",{className:"border p-3 text-right",children:"Amount ()"})]})}),e.jsx("tbody",{children:Z.map(Te=>e.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[e.jsx("td",{className:"border p-3 font-bold",children:Te.name}),e.jsx("td",{className:"border p-3 text-center",children:j.find(Ce=>Ce.materialId===Te.id)?.selectedBrand||"Generic"}),e.jsx("td",{className:"border p-3",children:e.jsx($e,{type:"number",min:"1",value:w[Te.id||""]?.quantity??Te.quantity,onChange:Ce=>B(_e=>({..._e,[Te.id]:{..._e[Te.id]||{supplyRate:Te.supplyRate,installRate:0},quantity:Number(Ce.target.value)}})),className:"h-8 w-20 text-center"})}),e.jsx("td",{className:"border p-3 text-center",children:Te.unit}),e.jsx("td",{className:"border p-3 text-sm",children:Te.shopName}),e.jsx("td",{className:"border p-3",children:e.jsx($e,{type:"number",value:w[Te.id||""]?.supplyRate??Te.supplyRate,onChange:Ce=>B(_e=>({..._e,[Te.id]:{..._e[Te.id]||{quantity:1,installRate:0},supplyRate:Number(Ce.target.value)}})),className:"h-8 w-24 text-right"})}),e.jsxs("td",{className:"border p-3 text-right font-bold",children:["",(Number(w[Te.id||""]?.quantity??Te.quantity)*Number(w[Te.id||""]?.supplyRate??Te.supplyRate??0)).toFixed(2)]})]},Te.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-blue-50 rounded font-bold text-lg",children:[e.jsx("span",{children:"Total Cost"}),e.jsxs("span",{children:["",Z.reduce((Te,Ce)=>Te+Number(w[Ce.id||""]?.quantity??Ce.quantity)*Number(w[Ce.id||""]?.supplyRate??Ce.supplyRate??0),0).toFixed(2)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(2),className:"flex-1",children:[e.jsx(er,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(Be,{onClick:()=>c(8),className:"flex-1",children:["Review BOM ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"s3"),i===8&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-green-600 text-3xl",children:""})}),e.jsx("h2",{className:"text-4xl font-bold",children:"Bill of Materials (BOM)"}),e.jsxs("p",{className:"text-slate-600 mt-2",children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsx(ks,{className:"p-6 border-slate-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-semibold uppercase tracking-wide",children:"Product Type"}),e.jsx("p",{className:"text-xl font-bold text-slate-900 mt-1",children:A})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-semibold uppercase tracking-wide",children:"Quantities"}),e.jsxs("p",{className:"text-xl font-bold text-slate-900 mt-1",children:[Z.length," Items"]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Materials Schedule"}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-sm bg-white",children:[e.jsx("thead",{className:"bg-slate-100 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left font-semibold text-slate-700",children:"S.No"}),e.jsx("th",{className:"p-3 text-left font-semibold text-slate-700",children:"Description"}),e.jsx("th",{className:"p-3 text-center font-semibold text-slate-700",children:"Unit"}),e.jsx("th",{className:"p-3 text-center font-semibold text-slate-700",children:"Qty"}),e.jsx("th",{className:"p-3 text-right font-semibold text-slate-700",children:"Rate (#)"}),e.jsx("th",{className:"p-3 text-left font-semibold text-slate-700",children:"Supplier"}),e.jsx("th",{className:"p-3 text-right font-semibold text-slate-700",children:"Amount ()"})]})}),e.jsx("tbody",{children:Z.map((Te,Ce)=>e.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[e.jsx("td",{className:"p-3",children:Ce+1}),e.jsx("td",{className:"p-3 font-medium",children:Te.name}),e.jsx("td",{className:"p-3 text-center",children:Te.unit}),e.jsx("td",{className:"p-3 text-center",children:w[Te.id||""]?.quantity??Te.quantity}),e.jsx("td",{className:"p-3 text-right",children:Number(w[Te.id||""]?.supplyRate??Te.supplyRate??0).toFixed(2)}),e.jsx("td",{className:"p-3",children:Te.shopName||"Market"}),e.jsx("td",{className:"p-3 text-right font-bold",children:(Number(w[Te.id||""]?.quantity??Te.quantity)*Number(w[Te.id||""]?.supplyRate??Te.supplyRate??0)).toFixed(2)})]},Te.id))})]})})]}),e.jsx(ks,{className:"p-6 bg-slate-50 border-slate-200",children:e.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-600 font-semibold uppercase",children:"Total Materials"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-2",children:Z.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-600 font-semibold uppercase",children:"Total Quantity"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-2",children:Z.reduce((Te,Ce)=>Te+(w[Ce.id||""]?.quantity??Ce.quantity),0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-600 font-semibold uppercase",children:"Grand Total"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:["",ge.toFixed(2)]})]})]})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(Be,{variant:"outline",onClick:()=>c(3),children:"Back"}),e.jsx(Be,{className:"bg-green-600 hover:bg-green-700",children:"Export Excel"}),e.jsx(Be,{className:"bg-blue-600 hover:bg-blue-700",children:"Export PDF"}),e.jsxs(Be,{onClick:()=>c(9),className:"bg-blue-600 hover:bg-blue-700",children:["Add to BOM ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]}),e.jsx(Be,{variant:"outline",onClick:()=>{c(1),b([]),B({}),Q({}),z({}),$({}),X({})},children:"New Estimate"})]})]},"s8"),i===9&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Add to BOQ"}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Plumbing Estimator"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(Be,{variant:"destructive",children:"Delete Selected"}),e.jsx(Be,{onClick:Je,className:"bg-slate-600 hover:bg-slate-700",children:"Save"}),e.jsx(Be,{onClick:()=>c(11),className:"bg-blue-600 hover:bg-blue-700",children:"Add to BOQ"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Saved BOQs"}),fe.length===0?e.jsx("p",{className:"text-slate-500",children:"No saved BOQs"}):null,e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-sm bg-white",children:[e.jsx("thead",{className:"bg-slate-100 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:e.jsx(Fn,{})}),e.jsx("th",{className:"p-3 text-left font-semibold",children:"S.No"}),e.jsx("th",{className:"p-3 text-left font-semibold",children:"Item"}),e.jsx("th",{className:"p-3 text-left font-semibold",children:"Description"}),e.jsx("th",{className:"p-3 font-semibold",children:"Unit"}),e.jsx("th",{className:"p-3 font-semibold",children:"Qty"}),e.jsx("th",{className:"p-3 font-semibold",children:"Rate"}),e.jsx("th",{className:"p-3 font-semibold",children:"Amount"})]})}),e.jsx("tbody",{children:Z.map((Te,Ce)=>e.jsxs(Vo.Fragment,{children:[e.jsxs("tr",{className:"border-b bg-slate-50",children:[e.jsx("td",{className:"p-3",children:e.jsx(Fn,{})}),e.jsxs("td",{colSpan:7,className:"p-3",children:[e.jsxs("p",{className:"font-bold text-slate-900",children:[Ce+1,". ",Te.name]}),L[Te.id||""]&&e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Group description"})]})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{}),e.jsx("td",{className:"p-3 text-center",children:Ce+1}),e.jsx("td",{className:"p-3 font-medium",children:Te.name}),e.jsx("td",{className:"p-3",children:e.jsx("textarea",{value:L[Te.id||""]||"",onChange:_e=>Q(de=>({...de,[Te.id]:_e.target.value})),placeholder:"Description",className:"w-full h-12 p-2 rounded border text-xs"})}),e.jsx("td",{className:"p-3 text-center",children:Te.unit}),e.jsx("td",{className:"p-3",children:e.jsx($e,{type:"number",value:w[Te.id||""]?.quantity??Te.quantity,onChange:_e=>B(de=>({...de,[Te.id]:{...de[Te.id]||{supplyRate:Te.supplyRate,installRate:0},quantity:Number(_e.target.value)}})),className:"h-8 w-20 text-center"})}),e.jsx("td",{className:"p-3",children:e.jsx($e,{type:"number",value:w[Te.id||""]?.supplyRate??Te.supplyRate,onChange:_e=>B(de=>({...de,[Te.id]:{...de[Te.id]||{quantity:1,installRate:0},supplyRate:Number(_e.target.value)}})),className:"h-8 w-24 text-right"})}),e.jsxs("td",{className:"p-3 text-right font-bold",children:["",(Number(w[Te.id||""]?.quantity??Te.quantity)*Number(w[Te.id||""]?.supplyRate??Te.supplyRate??0)).toFixed(2)]})]})]},Te.id))})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Be,{variant:"outline",onClick:()=>c(8),children:[e.jsx(er,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsx(Be,{onClick:()=>c(10),className:"bg-blue-600 hover:bg-blue-700",children:"Finalize PO"}),e.jsxs(Be,{className:"bg-blue-600 hover:bg-blue-700",children:["Export PDF ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"s9"),i===10&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Finalize Bill"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-slate-50 rounded border",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill No"}),e.jsx($e,{value:o,onChange:Te=>m(Te.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill Date"}),e.jsx($e,{type:"date",value:y,onChange:Te=>p(Te.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Due Date"}),e.jsx($e,{type:"date",placeholder:"mm/dd/yyyy"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Name"}),e.jsx($e,{placeholder:"Enter customer name"})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Address"}),e.jsx($e,{placeholder:"Enter customer address"})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Terms & Conditions"}),e.jsx($e,{defaultValue:"50% Advance and 50% on Completion"})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Material Description Entry"}),e.jsxs(Bn,{children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select Material"})}),e.jsx(Sn,{children:Z.map(Te=>e.jsx(dn,{value:Te.id||"",children:Te.name},Te.id))})]})]}),e.jsxs("div",{className:"border-t-2 pt-6 mt-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"w-32 h-20 bg-black rounded flex items-center justify-center text-white font-bold text-xs text-center",children:"PLUMBING"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"font-bold text-sm",children:"PLUMBING ESTIMATOR"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-600",children:"BILL"}),e.jsx("p",{className:"font-bold",children:o})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm mb-2",children:"Concept Trunk Interiors"}),e.jsx("p",{className:"text-xs",children:"12/36A, Indira Nagar"}),e.jsx("p",{className:"text-xs",children:"Medavakkam"}),e.jsx("p",{className:"text-xs",children:"Chennai  600100"}),e.jsx("p",{className:"text-xs",children:"GSTIN: 33ASOPS5560M1Z1"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-slate-600",children:["Bill Date: ",y]}),e.jsx("p",{className:"text-xs text-slate-600",children:"Due Date"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Terms: 50% Advance and 50% on Completion"}),e.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Customer Name"})]})]}),e.jsxs("div",{className:"border-t pt-4 mb-6 text-sm",children:[e.jsx("p",{className:"font-bold mb-2",children:"Bill From"}),e.jsx("p",{className:"font-bold",children:"New TamilNadu Steel"}),e.jsx("p",{className:"text-xs",children:"Chennai"}),e.jsx("p",{className:"text-xs",children:"Tamil Nadu"}),e.jsx("p",{className:"text-xs",children:"600100"})]}),e.jsx("div",{className:"overflow-x-auto border rounded mb-6",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-slate-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"S.No"}),e.jsx("th",{className:"p-2 text-left",children:"Item"}),e.jsx("th",{className:"p-2 text-left",children:"Description"}),e.jsx("th",{className:"p-2",children:"HSN"}),e.jsx("th",{className:"p-2",children:"Qty"}),e.jsx("th",{className:"p-2 text-right",children:"Rate"}),e.jsx("th",{className:"p-2 text-left",children:"Supplier"}),e.jsx("th",{className:"p-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:Z.map((Te,Ce)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:Ce+1}),e.jsx("td",{className:"p-2",children:Te.name}),e.jsx("td",{className:"p-2",children:L[Te.id||""]||Te.name}),e.jsx("td",{className:"p-2",children:"7308"}),e.jsx("td",{className:"p-2",children:w[Te.id||""]?.quantity??Te.quantity}),e.jsx("td",{className:"p-2 text-right",children:Number(w[Te.id||""]?.supplyRate??Te.supplyRate??0).toFixed(2)}),e.jsx("td",{className:"p-2",children:Te.shopName||"Market"}),e.jsx("td",{className:"p-2 text-right",children:(Number(w[Te.id||""]?.quantity??Te.quantity)*Number(w[Te.id||""]?.supplyRate??Te.supplyRate??0)).toFixed(2)})]},Te.id))})]})}),e.jsxs("div",{className:"flex justify-end gap-32 text-sm mb-6 font-bold",children:[e.jsxs("div",{children:[e.jsx("p",{children:"Sub Total"}),e.jsx("p",{children:"SGST 9%"}),e.jsx("p",{children:"CGST 9%"}),e.jsx("p",{children:"Round Off"}),e.jsx("p",{className:"border-t pt-1",children:"Total"}),e.jsx("p",{children:"Balance Due"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:["",ge.toFixed(2)]}),e.jsxs("p",{children:["",we.toFixed(2)]}),e.jsxs("p",{children:["",pe.toFixed(2)]}),e.jsxs("p",{children:["",be.toFixed(2)]}),e.jsxs("p",{className:"border-t pt-1",children:["",je.toFixed(2)]}),e.jsxs("p",{children:["",je.toFixed(2)]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-xs",children:"Authorized Signature"}),e.jsx("div",{className:"h-20"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsxs(Be,{onClick:()=>c(11),className:"bg-blue-600 hover:bg-blue-700",children:["Continue ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]}),e.jsxs(Be,{className:"bg-blue-600 hover:bg-blue-700",children:["Export PDF ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"s10"),i===11&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-24 h-24 bg-black rounded flex items-center justify-center text-white font-bold text-xs text-center",children:"PLUMBING"}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-wide",children:"PLUMBING ESTIMATOR"}),e.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:new Date().toISOString().slice(0,10)})})]}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-xs bg-white",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-slate-100 border-b",children:[e.jsx("th",{className:"p-2 text-left",children:"S.No"}),e.jsx("th",{className:"p-2 text-left",children:"Item"}),e.jsx("th",{className:"p-2 text-left",children:"Location"}),e.jsx("th",{className:"p-2 text-left",children:"Description"}),e.jsx("th",{className:"p-2",children:"Unit"}),e.jsx("th",{className:"p-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"p-2 text-center border-l",children:"Rate"}),e.jsx("th",{colSpan:2,className:"p-2 text-center border-l",children:"Amount"})]}),e.jsxs("tr",{className:"bg-slate-50 border-b",children:[e.jsx("th",{colSpan:6}),e.jsx("th",{className:"p-2 border-l text-center text-xs font-semibold",children:"Supply"}),e.jsx("th",{className:"p-2 text-center text-xs font-semibold",children:"Installation"}),e.jsx("th",{className:"p-2 border-l text-center text-xs font-semibold",children:"Supply"}),e.jsx("th",{className:"p-2 text-center text-xs font-semibold",children:"Installation"})]})]}),e.jsx("tbody",{children:Z.map((Te,Ce)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-bold",children:Ce+1}),e.jsx("td",{className:"p-2 font-bold",children:Te.name}),e.jsx("td",{className:"p-2",children:e.jsx($e,{value:k[Te.id||""]||"",onChange:_e=>z(de=>({...de,[Te.id]:_e.target.value})),placeholder:"Location",className:"h-7 text-xs p-1"})}),e.jsx("td",{className:"p-2",children:e.jsx("textarea",{value:L[Te.id||""]||"",onChange:_e=>Q(de=>({...de,[Te.id]:_e.target.value})),placeholder:"Description",className:"w-full h-12 p-1 rounded border text-xs"})}),e.jsx("td",{className:"p-2 text-center",children:Te.unit}),e.jsx("td",{className:"p-2 text-center",children:w[Te.id||""]?.quantity??Te.quantity}),e.jsx("td",{className:"p-2 border-l",children:e.jsx($e,{type:"number",value:J[Te.id||""]||(w[Te.id||""]?.supplyRate??Te.supplyRate??0),onChange:_e=>$(de=>({...de,[Te.id]:Number(_e.target.value)})),className:"h-7 text-xs p-1 text-right w-20"})}),e.jsx("td",{className:"p-2",children:e.jsx($e,{type:"number",value:q[Te.id||""]||0,onChange:_e=>X(de=>({...de,[Te.id]:Number(_e.target.value)})),className:"h-7 text-xs p-1 text-right w-20"})}),e.jsxs("td",{className:"p-2 border-l text-right font-bold",children:["",(Number(w[Te.id||""]?.quantity??Te.quantity)*Number(J[Te.id||""]||(w[Te.id||""]?.supplyRate??Te.supplyRate??0))).toFixed(2)]}),e.jsxs("td",{className:"p-2 text-right font-bold",children:["",(Number(w[Te.id||""]?.quantity??Te.quantity)*Number(q[Te.id||""]||0)).toFixed(2)]})]},Te.id))})]})}),e.jsx("div",{className:"text-right p-4 bg-slate-50 rounded border",children:e.jsxs("p",{className:"font-bold text-slate-900",children:["Subtotal ",e.jsxs("span",{className:"ml-8",children:["",ge.toFixed(2)]})]})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(Be,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Be,{variant:"destructive",children:"Delete Selected"}),e.jsx(Be,{className:"bg-blue-600 hover:bg-blue-700",children:"Add Product"}),e.jsx(Be,{onClick:pt,disabled:te,className:"bg-slate-600 hover:bg-slate-700",children:"Save"}),e.jsx(Be,{onClick:Qe,className:"bg-blue-600 hover:bg-blue-700",children:"Create BOQ"})]})]},"s11"),i===12&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:24},children:[e.jsx("div",{style:{fontSize:20,fontWeight:700,width:56,height:56,backgroundColor:"#000",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:8},children:"PLB"}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:24,fontWeight:700},children:"PLUMBING ESTIMATOR"}),e.jsx("div",{style:{fontSize:13,color:"#666",marginTop:4},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:14,fontWeight:600},children:y})})]}),Z.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No materials selected. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:Z.map((Te,Ce)=>{const _e=Number(J[Te.id||""]||(w[Te.id||""]?.supplyRate??Te.supplyRate??0)),de=Number(q[Te.id||""]||0),dt=Number(w[Te.id||""]?.quantity??Te.quantity??0),st=dt*_e,nt=dt*de,at=k[Te.id||""]||"",Dt=L[Te.id||""]||"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:Ce+1}),e.jsx("td",{className:"border px-2 py-1",children:Te.productLabel||Te.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:at||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:Dt||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Te.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:dt}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",_e.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",de.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",st.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",nt.toFixed(2)]})]},Te.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Z.reduce((Te,Ce)=>{const _e=Number(w[Ce.id||""]?.quantity??Ce.quantity??0),de=Number(q[Ce.id||""]||0);return Te+_e*de},0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(Be,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Be,{onClick:pt,disabled:te,className:"bg-blue-600 hover:bg-blue-700",children:"Save to DB"}),e.jsx(Be,{onClick:()=>{c(1),b([]),B({}),Q({}),z({}),$({}),X({})},className:"bg-blue-600 hover:bg-blue-700",children:"Add More Products"}),e.jsx(Be,{className:"bg-blue-600 hover:bg-blue-700",children:"Export Excel"})]})]},"s12")]})]})})}const rq="/image.png";function Uj({materials:t,estimatorTitle:s,onBack:n,storeShops:r=[],selectedMaterials:i=[],materialDescriptions:c={},onMaterialDescriptionsChange:A}){const[u,d]=S.useState(""),[h,o]=S.useState(new Date().toISOString().slice(0,10)),[m,y]=S.useState(""),[p,j]=S.useState("50% Advance and 50% on Completion"),[b,w]=S.useState(""),[B,L]=S.useState(""),[Q,k]=S.useState(""),[z,J]=S.useState(""),[$,q]=S.useState(c);S.useEffect(()=>{if(t.length>0&&r.length>0&&i.length>0){const re=i[0]?.selectedShopId,ne=r.find(oe=>oe.id===re);if(ne){const oe=[ne.name||"",ne.address||"",ne.area||"",ne.city||"",ne.state||"",ne.pincode||"",ne.gstin?`GSTIN: ${ne.gstin}`:"",ne.phone?`Ph: ${ne.phone}`:""].filter(Boolean);k(oe.join(`
`))}}},[t,r,i]);const X=t.reduce((re,ne)=>re+ne.quantity*ne.rate,0),fe=X*.09,ee=X*.09,le=Math.round((X+fe+ee)*100)/100-(X+fe+ee),ue=X+fe+ee+le,te=async()=>{const re=document.getElementById("boq-final-pdf");if(!re){alert("Final BOQ content not found");return}const ne=(await Yc(async()=>{const{default:oe}=await Promise.resolve().then(()=>bu);return{default:oe}},void 0)).default;ne().set({margin:10,filename:`BOQ-${u||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(re).save()};return e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill No"}),e.jsx($e,{value:u,onChange:re=>d(re.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Bill Date"}),e.jsx($e,{type:"date",value:h,onChange:re=>o(re.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Due Date"}),e.jsx($e,{type:"date",value:m,onChange:re=>y(re.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Name"}),e.jsx($e,{value:b,onChange:re=>w(re.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Customer Address"}),e.jsx($e,{value:B,onChange:re=>L(re.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{children:"Terms & Conditions"}),e.jsx($e,{value:p,onChange:re=>j(re.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(Ve,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:z,onChange:re=>J(re.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),t.map(re=>e.jsx("option",{value:re.id,children:re.name},re.id))]}),z&&e.jsx($e,{placeholder:"Enter description for selected material",value:$[z]||"",onChange:re=>{const ne={...$,[z]:re.target.value};q(ne),A?.(ne)}})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{width:"55%",display:"flex",gap:12},children:[e.jsx("img",{src:rq,alt:"Concept Trunk Interiors",style:{height:60,flexShrink:0}}),e.jsxs("div",{style:{lineHeight:1.4},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap",fontSize:11},children:Q})]})]}),e.jsxs("div",{style:{textAlign:"right",width:"40%"},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:16},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",u||"-"]}),e.jsxs("div",{children:["Bill Date: ",h&&new Date(h).toLocaleDateString("en-GB")]}),e.jsxs("div",{children:["Due Date: ",m&&new Date(m).toLocaleDateString("en-GB")]}),e.jsxs("div",{style:{marginTop:6},children:["Terms: ",p]}),e.jsxs("div",{style:{marginTop:6},children:["Customer: ",b]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{marginBottom:12,lineHeight:1.5},children:[e.jsx("strong",{style:{fontSize:12},children:"Bill To:"}),e.jsxs("div",{style:{fontSize:11,marginTop:4},children:[b,e.jsx("br",{}),B]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","Unit","Qty","Rate","Amount"].map(re=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11,textAlign:re==="Qty"||re==="Rate"||re==="Amount"?"right":"left"},children:re},re))})}),e.jsx("tbody",{children:t.map((re,ne)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"center"},children:ne+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:re.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:$[re.id]||re.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"center"},children:re.unit}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:Number(re.quantity||0).toFixed(0)}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:Number(re.rate||0).toFixed(2)}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right",fontWeight:600},children:(Number(re.quantity||0)*Number(re.rate||0)).toFixed(2)})]},re.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300,borderCollapse:"collapse"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11},children:"Sub Total"}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:11},children:Number(X||0).toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11},children:"SGST 9%"}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:11},children:Number(fe||0).toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11},children:"CGST 9%"}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:11},children:Number(ee||0).toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11},children:"Round Off"}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:11},children:Number(le||0).toFixed(2)})]}),e.jsxs("tr",{style:{borderTop:"2px solid #000",borderBottom:"2px solid #000"},children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11,fontWeight:"bold"},children:"Total"}),e.jsxs("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:12,fontWeight:"bold"},children:["",Number(ue||0).toFixed(2)]})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Be,{onClick:n,variant:"outline",children:"Back"}),e.jsx(Be,{onClick:te,children:"Export PDF"})]})]})}function aq(){const[t,s]=S.useState(1),[n,r]=S.useState(""),[i,c]=S.useState([]),{shops:A}=ei(),[u,d]=S.useState({}),[h,o]=S.useState(""),m=()=>{const y=parseFloat(n)||0;let p=[];p.push({item:"MS Pipe/Tube",description:"Railing / Structural",quantity:y,unit:"rft"}),p.push({item:"Base Plates",description:"Mounting",quantity:Math.ceil(y/4),unit:"nos"}),p.push({item:"Fasteners / Bolts",description:"Fixing",quantity:Math.ceil(y/4)*4,unit:"nos"}),p.push({item:"Paint",description:"Protective coating",quantity:Math.ceil(y/20),unit:"liters"}),c(p),s(2)};return e.jsx(ka,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading text-primary",children:"MS Work Estimator"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate Mild Steel work requirements."})]}),e.jsx(ks,{className:"border-border/50 shadow-lg",children:e.jsx(Ws,{className:"p-6",children:e.jsxs(Fl,{mode:"wait",children:[t===1&&e.jsxs(Ss.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Step 1: Dimensions"}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Total Running Feet"}),e.jsx($e,{type:"number",value:n,onChange:y=>r(y.target.value),placeholder:"e.g. 50"})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(Be,{onClick:m,className:"w-40 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Ef,{className:"mr-2 h-4 w-4"})," Calculate"]})})]},"s1"),t===2&&e.jsxs(Ss.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto text-blue-500",children:e.jsx(Ef,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-2xl font-bold",children:"Material Requirements"})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 bg-muted p-3 text-sm font-medium",children:[e.jsx("div",{className:"col-span-8",children:"Item Description"}),e.jsx("div",{className:"col-span-4 text-right",children:"Qty"})]}),i.map((y,p)=>e.jsxs("div",{className:"grid grid-cols-12 p-4 border-b border-border/50 text-sm items-center",children:[e.jsxs("div",{className:"col-span-8",children:[e.jsx("div",{className:"font-medium text-foreground",children:y.item}),e.jsx("div",{className:"text-xs text-muted-foreground",children:y.description})]}),e.jsxs("div",{className:"col-span-4 text-right font-mono text-lg",children:[y.quantity.toFixed(1)," ",e.jsx("span",{className:"text-xs text-muted-foreground",children:y.unit})]})]},p))]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsx(Be,{variant:"outline",onClick:()=>s(1),className:"w-32",children:"Start Over"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(pa,{href:"/item-master",children:e.jsxs(Be,{className:"w-48 bg-primary text-primary-foreground",children:["Select Materials ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})}),e.jsx(Be,{onClick:()=>s(3),className:"w-40",children:"Generate BOQ"})]})]})]},"s2"),t===3&&e.jsx(Uj,{materials:i.map((y,p)=>({id:String(p),name:y.item,quantity:y.quantity,unit:y.unit,rate:0,shopName:"Computed"})),estimatorTitle:"MS Work Estimator",onBack:()=>s(2),storeShops:A,selectedMaterials:[],materialDescriptions:u,onMaterialDescriptionsChange:d})]})})})]})})}function iq(){const[t,s]=S.useState(1),[n,r]=S.useState(""),[i,c]=S.useState([]),{shops:A}=ei(),[u,d]=S.useState({}),[h,o]=S.useState(""),m=()=>{const y=parseFloat(n)||0;let p=[];p.push({item:"SS 304 Pipe / Tube",description:"Railing / Balustrade",quantity:y,unit:"rft"}),p.push({item:"SS Base Plates",description:"Mounting",quantity:Math.ceil(y/4),unit:"nos"}),p.push({item:"SS Fasteners",description:"Fixing",quantity:Math.ceil(y/4)*4,unit:"nos"}),p.push({item:"Polishing",description:"Finishing",quantity:Math.ceil(y/20),unit:"set"}),c(p),s(2)};return e.jsx(ka,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading text-primary",children:"SS Work Estimator"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate Stainless Steel work requirements."})]}),e.jsx(ks,{className:"border-border/50 shadow-lg",children:e.jsx(Ws,{className:"p-6",children:e.jsxs(Fl,{mode:"wait",children:[t===1&&e.jsxs(Ss.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Step 1: Dimensions"}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Total Running Feet of Railing"}),e.jsx($e,{type:"number",value:n,onChange:y=>r(y.target.value),placeholder:"e.g. 50"})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(Be,{onClick:m,className:"w-40 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Ef,{className:"mr-2 h-4 w-4"})," Calculate"]})})]},"s1"),t===2&&e.jsxs(Ss.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto text-blue-500",children:e.jsx(Ef,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-2xl font-bold",children:"Material Requirements"})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 bg-muted p-3 text-sm font-medium",children:[e.jsx("div",{className:"col-span-8",children:"Item Description"}),e.jsx("div",{className:"col-span-4 text-right",children:"Qty"})]}),i.map((y,p)=>e.jsxs("div",{className:"grid grid-cols-12 p-4 border-b border-border/50 text-sm items-center",children:[e.jsxs("div",{className:"col-span-8",children:[e.jsx("div",{className:"font-medium text-foreground",children:y.item}),e.jsx("div",{className:"text-xs text-muted-foreground",children:y.description})]}),e.jsxs("div",{className:"col-span-4 text-right font-mono text-lg",children:[y.quantity.toFixed(1)," ",e.jsx("span",{className:"text-xs text-muted-foreground",children:y.unit})]})]},p))]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsx(Be,{variant:"outline",onClick:()=>s(1),className:"w-32",children:"Start Over"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(pa,{href:"/item-master",children:e.jsxs(Be,{className:"w-48 bg-primary text-primary-foreground",children:["Select Materials ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})}),e.jsx(Be,{onClick:()=>s(3),className:"w-40",children:"Generate BOQ"})]})]})]},"s2"),t===3&&e.jsx(Uj,{materials:i.map((y,p)=>({id:String(p),name:y.item,quantity:y.quantity,unit:y.unit,rate:0,shopName:"Computed"})),estimatorTitle:"SS Work Estimator",onBack:()=>s(2),storeShops:A,selectedMaterials:[],materialDescriptions:u,onMaterialDescriptionsChange:d})]})})})]})})}function oq(){const[t,s]=S.useState(1),[n,r]=S.useState(""),[i,c]=S.useState([]),{shops:A}=ei(),[u,d]=S.useState({}),[h,o]=S.useState(""),m=()=>{const y=parseFloat(n)||0;let p=[];p.push({item:"Sprinkler Points",description:"1 per 100 sq.ft",quantity:Math.ceil(y/100),unit:"nos"}),p.push({item:"MS Pipe 25mm",description:"Distribution line",quantity:Math.ceil(y/100)*10,unit:"rft"}),p.push({item:"Fire Extinguishers",description:"1 per 1000 sq.ft",quantity:Math.ceil(y/1e3),unit:"nos"}),p.push({item:"Smoke Detectors",description:"1 per 400 sq.ft",quantity:Math.ceil(y/400),unit:"nos"}),c(p),s(2)};return e.jsx(ka,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading text-primary",children:"Fire-Fighting Estimator"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate fire safety system requirements."})]}),e.jsx(ks,{className:"border-border/50 shadow-lg",children:e.jsx(Ws,{className:"p-6",children:e.jsxs(Fl,{mode:"wait",children:[t===1&&e.jsxs(Ss.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Step 1: Floor Area"}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Total Floor Area (sq.ft)"}),e.jsx($e,{type:"number",value:n,onChange:y=>r(y.target.value),placeholder:"e.g. 2000"})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(Be,{onClick:m,className:"w-40 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Ef,{className:"mr-2 h-4 w-4"})," Calculate"]})})]},"s1"),t===2&&e.jsxs(Ss.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto text-blue-500",children:e.jsx(Ef,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-2xl font-bold",children:"Material Requirements"})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 bg-muted p-3 text-sm font-medium",children:[e.jsx("div",{className:"col-span-8",children:"Item Description"}),e.jsx("div",{className:"col-span-4 text-right",children:"Qty"})]}),i.map((y,p)=>e.jsxs("div",{className:"grid grid-cols-12 p-4 border-b border-border/50 text-sm items-center",children:[e.jsxs("div",{className:"col-span-8",children:[e.jsx("div",{className:"font-medium text-foreground",children:y.item}),e.jsx("div",{className:"text-xs text-muted-foreground",children:y.description})]}),e.jsxs("div",{className:"col-span-4 text-right font-mono text-lg",children:[y.quantity.toFixed(1)," ",e.jsx("span",{className:"text-xs text-muted-foreground",children:y.unit})]})]},p))]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsx(Be,{variant:"outline",onClick:()=>s(1),className:"w-32",children:"Start Over"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(pa,{href:"/item-master",children:e.jsxs(Be,{className:"w-48 bg-primary text-primary-foreground",children:["Select Materials ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})}),e.jsx(Be,{onClick:()=>s(3),className:"w-40",children:"Generate BOQ"})]})]})]},"s2"),t===3&&e.jsx(Uj,{materials:i.map((y,p)=>({id:String(p),name:y.item,quantity:y.quantity,unit:y.unit,rate:0,shopName:"Computed"})),estimatorTitle:"Fire Fighting Estimator",onBack:()=>s(2),storeShops:A,selectedMaterials:[],materialDescriptions:u,onMaterialDescriptionsChange:d})]})})})]})})}const lq="/image.png";function cq(){const[,t]=X3("/estimators/:subcategory"),[,s]=bo(),n=t?.subcategory?decodeURIComponent(t.subcategory):"",{shops:r,materials:i,products:c}=ei(),{toast:A}=ma(),[u,d]=S.useState(1),[h,o]=S.useState(""),[m,y]=S.useState(null),[p,j]=S.useState(`${n.toUpperCase().slice(0,3)}-${Math.floor(1e3+Math.random()*9e3)}`),[b,w]=S.useState(new Date().toISOString().slice(0,10)),[B,L]=S.useState(new Date(Date.now()+720*60*60*1e3).toISOString().slice(0,10)),[Q,k]=S.useState(""),[z,J]=S.useState(""),[$,q]=S.useState("1. Payment Terms: 50% advance, 50% on completion"),[X,fe]=S.useState([]),[ee,le]=S.useState({}),[ue,te]=S.useState({}),[re,ne]=S.useState({}),[oe,se]=S.useState([]),[xe,Me]=S.useState(""),[me,Z]=S.useState([]),ge=S.useRef(""),[we,pe]=S.useState([]),[be,je]=S.useState(!1),Ne=n.toLowerCase(),Je=Ne.replace(/[-\s]/g,""),Qe=S.useMemo(()=>{const et=m?.id||m?.name||h||"product";return`group_${String(et).replace(/\s+/g,"_").toLowerCase()}`},[h,m]),pt=S.useMemo(()=>{const et=Kt=>String(Kt||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),De=Kt=>String(Kt||"").toUpperCase().replace(/[^A-Z0-9]+/g,"").trim(),rt=et(n),mt=De(n),ls=(c||[]).filter(Kt=>{const lt=et(Kt.subcategory||Kt.subcategory_name||""),Gt=De(Kt.subcategory||Kt.subcategory_name||"");return lt===rt||lt.includes(rt)||rt.includes(lt)||Gt===mt||Gt.includes(mt)||mt.includes(Gt)}),Ht=new Map;return ls.forEach(Kt=>{const lt=De(Kt.name||Kt.product||Kt.title||"");Ht.has(lt)||Ht.set(lt,Kt)}),Array.from(Ht.values())},[c,n]),Te=et=>{if(!et)return[];const De=lt=>String(lt||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),rt=lt=>String(lt||"").toUpperCase().replace(/[^A-Z0-9]+/g,"").trim(),mt=De(et),ls=rt(et),Ht=(i||[]).filter(lt=>{const Gt=De(lt.product||""),Yt=rt(lt.product||""),Cs=De(lt.subCategory||""),rs=rt(lt.subCategory||"");return Gt===mt||Gt.includes(mt)||Yt===ls||Yt.includes(ls)||Cs===mt||Cs.includes(mt)||rs===ls||rs.includes(ls)}),Kt=new Map;return Ht.forEach(lt=>{const Gt=rt(lt.name||lt.code||lt.product||lt.id);Kt.has(Gt)||Kt.set(Gt,lt)}),Array.from(Kt.values())},Ce=S.useMemo(()=>h?Te(h).filter(et=>X.some(De=>De.materialId===et.id)).map(et=>{const De=X.find(Ht=>Ht.materialId===et.id),rt=(r||[]).find(Ht=>Ht.id===De?.selectedShopId),mt=ee[et.id]?.quantity??1,ls=ee[et.id]?.supplyRate??et.rate??0;return{...et,quantity:mt,supplyRate:ls,installRate:ee[et.id]?.installRate??0,shopName:rt?.name||"Market",shopId:De?.selectedShopId||"",brandName:De?.selectedBrand||et.brandName||"Generic"}}):[],[ee,X,h,i,r]),_e=S.useMemo(()=>Ce.reduce((et,De)=>{const rt=Number(ee[De.id]?.quantity??De.quantity??0),mt=Number(ee[De.id]?.supplyRate??De.supplyRate??0);return et+rt*mt},0),[ee,Ce]),de=S.useMemo(()=>Ce.reduce((et,De)=>{const rt=Number(ee[De.id]?.quantity??De.quantity??0),mt=Number(ee[De.id]?.installRate??De.installRate??0);return et+rt*mt},0),[ee,Ce]),dt=_e+de,st=S.useMemo(()=>{const et=ee[Qe]?.quantity;return Number.isFinite(et)?Number(et):1},[ee,Qe]),nt=S.useMemo(()=>{const et=Math.max(1,st||1);return _e/et},[st,_e]),at=S.useMemo(()=>{const et=Math.max(1,st||1);return de/et},[st,de]),Dt=async()=>{try{const et=await ct("/api/boq");if(et.status===401){Z([]),ge.current!=="401"&&(ge.current="401",A({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!et.ok){const mt=await et.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${mt||et.status}`)}if(!(et.headers.get("content-type")||"").includes("application/json")){Z([]);return}const rt=await et.json();Z(rt.boqs||[]),ge.current=""}catch(et){const De=String(et?.message||et||"");De&&ge.current!==De&&(ge.current=De,console.warn("fetchSavedBoqs",et)),Z([])}};S.useEffect(()=>{u===9&&Dt()},[u]),S.useEffect(()=>{p&&u>=11&&yt()},[p,u]);const yt=async()=>{try{je(!0);const et=await ct(`/api/estimator-step11-groups?session_id=${p}&estimator=${Je}`,{headers:{}});if(et.ok){const De=await et.json();pe(De.items||[])}}catch(et){console.warn("load step11 failed",et)}finally{je(!1)}},qe=et=>{if(!et){se([]);return}const De=[Qe,...Ce.map(rt=>rt.id)];se(De)},Tt=()=>{if(oe.length!==0){if(oe.includes(Qe)){fe([]),le(et=>{const De={...et};return Object.keys(De).forEach(rt=>delete De[rt]),De}),te({}),ne({}),se([]);return}fe(et=>et.filter(De=>!oe.includes(De.materialId))),le(et=>{const De={...et};return oe.forEach(rt=>delete De[rt]),De}),te(et=>{const De={...et};return oe.forEach(rt=>delete De[rt]),De}),ne(et=>{const De={...et};return oe.forEach(rt=>delete De[rt]),De}),se([])}},ns=async()=>{try{if(!p.trim()){A({title:"Error",description:"Please enter a Bill No.",variant:"destructive"});return}const et=Ce.map((rt,mt)=>({session_id:p,estimator:Ne,s_no:mt+1,material_id:rt.id,name:rt.name,unit:rt.unit||"pcs",quantity:Number(ee[rt.id]?.quantity??rt.quantity??0),supply_rate:Number(ee[rt.id]?.supplyRate??rt.supplyRate??0),install_rate:Number(ee[rt.id]?.installRate??rt.installRate??0),shop_id:rt.shopId||"",shop_name:rt.shopName||"",description:ue[rt.id]||"",location:re[rt.id]||"",group_id:Qe,group_name:h||m?.name||"",group_qty:st,group_description:ue[Qe]||""}));if(!(await ct("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:Ne,session_id:p,items:et})})).ok)throw new Error("Save failed");A({title:"Success",description:"Saved."})}catch(et){A({title:"Error",description:et?.message||"Failed to save.",variant:"destructive"})}},Ts=async(et,De)=>{const rt=document.getElementById(et);if(!rt){A({title:"Error",description:"PDF content not found",variant:"destructive"});return}try{const mt=(await Yc(async()=>{const{default:ls}=await Promise.resolve().then(()=>bu);return{default:ls}},void 0)).default;mt().set({margin:[10,10,10,10],filename:De,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:ls=>ls.className?.toString().includes("bg-")||ls.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(rt).save()}catch(mt){console.error("PDF Export Error:",mt),A({title:"Error",description:"PDF export failed. Check console.",variant:"destructive"})}},vs=async()=>{try{je(!0);const et={estimator:Je,session_id:p,s_no:1,group_key:`${Ne}_${Qe}`,group_id:Qe,item_name:h||m?.name||"Product",unit:"pcs",quantity:st,location:re[Qe]||"",description:ue[Qe]||"",supply_rate:nt,install_rate:at,supply_amount:st*nt,install_amount:st*at,supply_subtotal:_e,install_subtotal:de,sgst:dt*.09,cgst:dt*.09,round_off:0,grand_total:dt};if(!(await ct("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:[et]})})).ok)throw new Error("Save failed");await yt(),A({title:"Success",description:"Saved."})}catch(et){A({title:"Error",description:et?.message||"Failed to save.",variant:"destructive"})}finally{je(!1)}},Ns=()=>{d(1),o(""),y(null),fe([]),le({}),te({}),ne({}),se([]),Me(""),pe([]),j(`${n.toUpperCase().slice(0,3)}-${Math.floor(1e3+Math.random()*9e3)}`),w(new Date().toISOString().slice(0,10))};return n?e.jsx(ka,{children:e.jsxs("div",{className:"max-w-6xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold capitalize",children:[n," Estimator"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Complete workflow: Steps 1-11"})]}),e.jsxs(Fl,{mode:"wait",children:[u===1&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Step 1: Select Product"}),pt.length===0?e.jsx(ks,{className:"p-6 bg-yellow-50 border-yellow-200",children:e.jsx("p",{className:"text-center text-yellow-800",children:"No products found for this sub-category in the database."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:pt.map(et=>e.jsx(ks,{className:Vs("cursor-pointer border-2 hover:border-primary transition-all",h===et.name?"border-primary bg-blue-50":"border-gray-200"),onClick:()=>{o(et.name),y(et),fe([]),le({}),te({}),ne({}),se([]),Me("")},children:e.jsxs(Ws,{className:"p-4",children:[e.jsx("p",{className:"font-semibold text-lg",children:et.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[Te(et.name).length," materials available"]})]})},et.id))}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(Be,{onClick:()=>s("/estimators"),variant:"outline",children:"Cancel"}),e.jsxs(Be,{disabled:!h,onClick:()=>d(2),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step1"),u===2&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Available materials for ",h,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded bg-blue-50",children:[e.jsx(Fn,{checked:X.length===Te(h).length&&X.length>0,indeterminate:X.length>0&&X.length<Te(h).length,onCheckedChange:et=>{if(et){const De=ls=>String(ls||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),mt=Te(h).map(ls=>{const Kt=(i||[]).filter(lt=>De(lt.product||"")===De(ls.product||"")&&De(lt.name||"")===De(ls.name||"")).sort((lt,Gt)=>(lt.rate||0)-(Gt.rate||0))[0];return{materialId:ls.id,selectedShopId:Kt?.shopId||"",selectedBrand:ls.brandName||"Generic"}});fe(mt)}else fe([])}}),e.jsx(Ve,{className:"text-sm font-medium",children:"Select All Materials"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-[600px] overflow-y-auto p-3 border rounded bg-gray-50",children:Te(h).map(et=>{const De=X.some(rt=>rt.materialId===et.id);return e.jsx("div",{className:Vs("p-4 border-2 rounded-lg transition-all",De?"border-blue-500 bg-white":"border-gray-200 bg-white"),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Fn,{checked:De,onCheckedChange:()=>{if(De)fe(rt=>rt.filter(mt=>mt.materialId!==et.id));else{const rt=Ht=>String(Ht||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),ls=(i||[]).filter(Ht=>rt(Ht.product||"")===rt(et.product||"")&&rt(Ht.name||"")===rt(et.name||"")).sort((Ht,Kt)=>(Ht.rate||0)-(Kt.rate||0))[0];fe(Ht=>[...Ht,{materialId:et.id,selectedShopId:ls?.shopId||"",selectedBrand:et.brandName||"Generic"}]),le(Ht=>({...Ht,[et.id]:{quantity:1,supplyRate:et.rate||0,installRate:0},[Qe]:Ht[Qe]||{quantity:1,supplyRate:0,installRate:0}}))}}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:et.name}),e.jsx("p",{className:"text-xs text-gray-600",children:et.code}),De&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx(Ve,{className:"text-xs",children:"Select Brand"}),e.jsxs(Bn,{value:X.find(rt=>rt.materialId===et.id)?.selectedBrand||"Generic",onValueChange:rt=>{fe(mt=>mt.map(ls=>ls.materialId===et.id?{...ls,selectedBrand:rt}:ls))},children:[e.jsx(wn,{className:"h-9 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:(()=>{const rt=Kt=>String(Kt||"").trim(),mt=(i||[]).filter(Kt=>rt(Kt.product||"")===rt(et.product||"")&&rt(Kt.name||"")===rt(et.name||"")),ls=new Map;mt.forEach(Kt=>{const lt=Kt.brandName||"Generic",Gt=String(lt).toUpperCase().trim();ls.has(Gt)||ls.set(Gt,lt)});const Ht=Array.from(ls.values());return Ht.length===0&&Ht.push("Generic"),Ht.map(Kt=>e.jsx(dn,{value:Kt,children:Kt},Kt))})()})]})]}),e.jsxs("div",{children:[e.jsx(Ve,{className:"text-xs",children:"Select Shop"}),e.jsxs(Bn,{value:X.find(rt=>rt.materialId===et.id)?.selectedShopId||"",onValueChange:rt=>{fe(mt=>mt.map(ls=>ls.materialId===et.id?{...ls,selectedShopId:rt}:ls))},children:[e.jsx(wn,{className:"h-9 text-xs",children:e.jsx(Cn,{})}),e.jsx(Sn,{children:(()=>{const rt=lt=>String(lt||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),mt=(i||[]).filter(lt=>rt(lt.product||"")===rt(et.product||"")&&rt(lt.name||"")===rt(et.name||"")),ls=X.find(lt=>lt.materialId===et.id)?.selectedBrand||"Generic",Ht=mt.filter(lt=>(lt.brandName||"Generic")===ls).map(lt=>({shopId:lt.shopId,rate:lt.rate,shopName:(r||[]).find(Gt=>Gt.id===lt.shopId)?.name||"Unknown"})).filter(lt=>lt.shopId);return Array.from(new Map(Ht.map(lt=>[lt.shopId,lt])).values()).map(lt=>e.jsxs(dn,{value:lt.shopId,children:[lt.shopName,"  ",lt.rate]},lt.shopId))})()})]})]})]})]})]})},et.id)})}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>d(1),children:[e.jsx(er,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(Be,{disabled:X.length===0,onClick:()=>d(7),children:["Next ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]},"step2"),u===7&&e.jsx(Ss.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-8",children:"Edit quantities or rates before generating BOQ."}),e.jsxs("div",{className:"grid grid-cols-8 gap-4 text-sm text-muted-foreground mb-3",children:[e.jsx("div",{className:"col-span-2",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),e.jsx("div",{className:"space-y-4",children:Ce.map(et=>{const De=Number(ee[et.id]?.quantity??et.quantity??0),rt=Number(ee[et.id]?.supplyRate??et.supplyRate??0),mt=De*rt;return e.jsxs("div",{className:"grid grid-cols-8 gap-4 items-center border rounded-xl p-4",children:[e.jsx("div",{className:"col-span-2 font-medium",children:et.name}),e.jsx("div",{className:"text-center font-semibold",children:et.brandName||"Generic"}),e.jsx("div",{className:"text-center",children:e.jsx($e,{type:"number",value:De,onChange:ls=>le(Ht=>({...Ht,[et.id]:{...Ht[et.id],quantity:Number(ls.target.value||0)}})),className:"w-24 mx-auto"})}),e.jsx("div",{className:"text-center text-muted-foreground",children:et.unit||"pcs"}),e.jsx("div",{className:"text-center font-semibold",children:et.shopName||"-"}),e.jsx("div",{className:"text-center",children:e.jsx($e,{type:"number",value:rt,onChange:ls=>le(Ht=>({...Ht,[et.id]:{...Ht[et.id],supplyRate:Number(ls.target.value||0)}})),className:"w-28 mx-auto"})}),e.jsxs("div",{className:"text-right font-semibold",children:["",mt.toFixed(2)]})]},et.id)})}),e.jsxs("div",{className:"flex justify-between mt-10",children:[e.jsxs(Be,{variant:"outline",onClick:()=>d(2),children:[e.jsx(er,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(Be,{onClick:()=>d(8),disabled:Ce.length===0,className:"bg-blue-600 hover:bg-blue-700",children:["Next: Generate BOM ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]})]})]})},"step7"),u===8&&e.jsxs(Ss.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:64,height:64,backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(Wo,{style:{width:32,height:32}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:16},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:8,marginBottom:16},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:16,padding:16,fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||"Product"})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"TOTAL ITEMS"}),e.jsxs("p",{style:{fontWeight:600},children:[Ce.length," Materials"]})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:8,marginBottom:16,overflow:"hidden"},children:e.jsxs("div",{style:{padding:16},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:8},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(et=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:8,textAlign:et==="Qty"||et.includes("Rate")||et.includes("Amount")?"right":"left"},children:et},et))})}),e.jsx("tbody",{children:Ce.map((et,De)=>{const rt=Number(ee[et.id]?.quantity??et.quantity??0),mt=Number(ee[et.id]?.supplyRate??et.supplyRate??0);return e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8},children:De+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8},children:et.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8,textAlign:"center"},children:et.unit||"pcs"}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8,textAlign:"right"},children:rt}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8,textAlign:"right"},children:mt.toFixed(2)}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8},children:et.shopName||"Market"}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8,textAlign:"right",fontWeight:600},children:(rt*mt).toFixed(2)})]},et.id)})})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:8,padding:16,display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:Ce.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:Ce.reduce((et,De)=>et+Number(ee[De.id]?.quantity??De.quantity??0),0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",dt.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center pt-4",children:[e.jsx(Be,{onClick:()=>d(7),variant:"outline",className:"px-8",children:"Back"}),e.jsxs("button",{onClick:()=>Ts("boq-pdf",`BOM-${p}.pdf`),className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-6 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Be,{onClick:()=>d(9),className:"bg-blue-600 hover:bg-blue-700 px-8",children:["Add to BOM ",e.jsx(tr,{className:"ml-2 h-4 w-4"})]}),e.jsxs(Be,{variant:"secondary",className:"px-8",onClick:Ns,children:[e.jsx(er,{className:"mr-2 h-4 w-4"}),"New Estimate"]})]})]},"step8"),u===9&&e.jsx(Ss.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Be,{variant:"destructive",onClick:Tt,disabled:oe.length===0,className:"bg-red-300 hover:bg-red-400 text-white",children:"Delete Selected"}),e.jsx(Be,{onClick:ns,className:"bg-blue-600 hover:bg-blue-700",disabled:Ce.length===0,children:"Save"}),e.jsx(Be,{onClick:()=>d(11),className:"bg-blue-600 hover:bg-blue-700",disabled:Ce.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Saved BOQs"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:me.length===0?"No saved BOQs":""})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all",checked:(()=>{const et=[Qe,...Ce.map(De=>De.id)];return et.length>0&&oe.length===et.length})(),onCheckedChange:et=>qe(!!et)})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Fn,{checked:oe.includes(Qe),onCheckedChange:et=>{const De=!!et;se(rt=>De?Array.from(new Set([...rt,Qe])):rt.filter(mt=>mt!==Qe))}})}),e.jsx("td",{className:"border px-2 py-2 text-center"}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx("strong",{children:h||m?.name||"Product"})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx($e,{placeholder:"Group description",value:ue[Qe]||"",onChange:et=>te(De=>({...De,[Qe]:et.target.value}))})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx($e,{className:"w-20",value:"pcs",readOnly:!0})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx($e,{type:"number",className:"w-28",value:st,onChange:et=>le(De=>({...De,[Qe]:{...De[Qe]||{quantity:1,supplyRate:0,installRate:0},quantity:Math.max(0,Number(et.target.value||0))}}))})}),e.jsx("td",{className:"border px-2 py-2 text-right"}),e.jsx("td",{className:"border px-2 py-2 text-right"})]}),Ce.map((et,De)=>{const rt=et.id,mt=Number(ee[rt]?.quantity??et.quantity??0),ls=Number(ee[rt]?.supplyRate??et.supplyRate??0),Ht=mt*ls;return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Fn,{checked:oe.includes(rt),onCheckedChange:Kt=>{const lt=!!Kt;se(Gt=>lt?Array.from(new Set([...Gt,rt])):Gt.filter(Yt=>Yt!==rt))}})}),e.jsx("td",{className:"border px-2 py-2 text-center",children:De+1}),e.jsx("td",{className:"border px-2 py-2 font-medium",children:et.name}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Cl,{className:"min-h-[44px]",value:ue[rt]||"",onChange:Kt=>te(lt=>({...lt,[rt]:Kt.target.value})),placeholder:"Description"})}),e.jsx("td",{className:"border px-2 py-2",children:et.unit||"pcs"}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx($e,{type:"number",value:mt,onChange:Kt=>le(lt=>({...lt,[rt]:{...lt[rt],quantity:Math.max(0,Number(Kt.target.value||0))}}))})}),e.jsx("td",{className:"border px-2 py-2 text-right",children:e.jsx($e,{type:"number",className:"text-right",value:ls,onChange:Kt=>le(lt=>({...lt,[rt]:{...lt[rt],supplyRate:Math.max(0,Number(Kt.target.value||0))}}))})}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",Ht.toFixed(2)]})]},rt)})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6",children:[e.jsxs(Be,{variant:"outline",onClick:()=>d(8),className:"px-8",children:[e.jsx(er,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsx(Be,{onClick:()=>d(11),className:"bg-blue-600 hover:bg-blue-700 px-8",children:"Finalize PO"}),e.jsxs(Be,{onClick:()=>Ts("boq-pdf",`BOQ-${p}.pdf`),className:"bg-blue-600 hover:bg-blue-700 px-8",children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]})},"step-add-to-boq"),u===11&&e.jsx(Ss.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border p-8 space-y-6",children:[e.jsxs("div",{id:"boq-final-pdf",style:{width:"100%",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("img",{src:lq,alt:"Concept Trunk Interiors",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right",fontSize:12},children:b})]}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-sm bg-white",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Fn,{id:"select-all-groups",checked:oe.includes(Qe),onCheckedChange:et=>{se(et?[Qe]:[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Fn,{checked:oe.includes(Qe),onCheckedChange:et=>{se(et?[Qe]:[])}})}),e.jsx("td",{className:"border px-2 py-2 text-center",children:"1"}),e.jsx("td",{className:"border px-2 py-2 font-semibold",children:h||m?.name||"Product"}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx($e,{value:re[Qe]||"",onChange:et=>ne(De=>({...De,[Qe]:et.target.value})),placeholder:"Location"})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Cl,{value:ue[Qe]||"",onChange:et=>te(De=>({...De,[Qe]:et.target.value})),placeholder:"Group description",className:"min-h-[44px]"})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx($e,{value:"pcs",readOnly:!0})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx($e,{type:"number",value:st,onChange:et=>le(De=>({...De,[Qe]:{...De[Qe]||{quantity:1,supplyRate:0,installRate:0},quantity:Math.max(0,Number(et.target.value||0))}}))})}),e.jsx("td",{className:"border px-2 py-2 text-center",children:e.jsx($e,{type:"number",value:Number(nt||0).toFixed(2),readOnly:!0})}),e.jsx("td",{className:"border px-2 py-2 text-center",children:e.jsx($e,{type:"number",value:Number(at||0).toFixed(2),readOnly:!0})}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",(st*nt).toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",(st*at).toFixed(2)]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",colSpan:9}),e.jsx("td",{className:"border px-2 py-2 text-right font-semibold",children:"Subtotal"}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",_e.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",de.toFixed(2)]})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(Be,{variant:"outline",onClick:()=>d(9),className:"px-8",children:"Back"}),e.jsx(Be,{variant:"destructive",onClick:()=>{se([Qe]),Tt()},className:"bg-red-300 hover:bg-red-400 text-white px-8",children:"Delete Selected"}),e.jsx(Be,{onClick:()=>d(1),className:"bg-blue-600 hover:bg-blue-700 px-8",children:"Add Product"}),e.jsx(Be,{onClick:vs,disabled:be||Ce.length===0,className:"bg-blue-600 hover:bg-blue-700 px-8",children:be?"Saving...":"Save"}),e.jsx(Be,{onClick:async()=>{await vs(),await Ts("boq-final-pdf",`BOQ-${p}.pdf`)},disabled:be||Ce.length===0,className:"bg-blue-600 hover:bg-blue-700 px-8",children:"Create BOQ"})]}),we.length>0&&e.jsx(ks,{className:"p-4 bg-green-50 border-green-200",children:e.jsxs("p",{className:"text-green-800 font-semibold",children:[" Success! ",we.length," item(s) saved to database"]})})]})},"step11")]})]})}):e.jsx(ka,{children:e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:"text-red-600",children:"Subcategory not found"})})})}function dq(){const[,t]=bo(),{shops:s}=ei();return e.jsx(ka,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading text-primary",children:"Select Supplier"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose a supplier to source your materials from."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(n=>e.jsxs(ks,{className:"group cursor-pointer hover:border-primary/50 transition-all hover:shadow-lg",onClick:()=>t(`/item-master/${n.id}`),children:[e.jsxs("div",{className:"aspect-video w-full overflow-hidden rounded-t-lg relative bg-muted",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center",children:e.jsx(x2,{className:"h-12 w-12 text-primary/30"})}),n.rating&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white px-2 py-1 rounded flex items-center gap-1 text-xs",children:[e.jsx(OL,{className:"h-3 w-3 text-yellow-500 fill-yellow-500"})," ",n.rating]})]}),e.jsxs(ur,{className:"pb-3",children:[e.jsx(hr,{className:"flex justify-between items-start",children:e.jsx("span",{children:n.name})}),e.jsxs(na,{className:"flex items-center gap-1",children:[e.jsx(mL,{className:"h-3 w-3"})," ",n.location]})]}),e.jsxs(Ws,{children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.categories?.map(r=>e.jsx(Bl,{variant:"secondary",className:"text-xs",children:r},r))}),e.jsxs(Be,{className:"w-full group-hover:bg-primary group-hover:text-primary-foreground",children:[e.jsx(x2,{className:"mr-2 h-4 w-4"})," Visit Store"]})]})]},n.id))})]})})}function Aq(){const t=[{name:"Free",price:"$0",description:"For personal use",features:["Access to all estimators","Save up to 3 projects","Basic support"]},{name:"Pro",price:"$29/mo",description:"For contractors & professionals",features:["Unlimited projects","Export to PDF/Excel","Priority support","Client management"],popular:!0},{name:"Enterprise",price:"Custom",description:"For large construction firms",features:["Custom integrations","Dedicated account manager","White-label reports","API access"]}];return e.jsx(ka,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold font-heading",children:"Subscription Plans"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Choose the plan that fits your needs"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:t.map(s=>e.jsxs(ks,{className:`flex flex-col ${s.popular?"border-primary shadow-lg scale-105":""}`,children:[e.jsxs(ur,{children:[e.jsx(hr,{children:s.name}),e.jsx(na,{children:s.description})]}),e.jsxs(Ws,{className:"flex-1",children:[e.jsx("div",{className:"text-3xl font-bold mb-4",children:s.price}),e.jsx("ul",{className:"space-y-2",children:s.features.map(n=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(x1,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:n})]},n))})]}),e.jsx(Ch,{children:e.jsx(Be,{className:"w-full",variant:s.popular?"default":"outline",children:s.price==="Custom"?"Contact Sales":"Subscribe"})})]},s.name))})]})})}function uq(){const{toast:t}=ma(),[s,n]=S.useState([]),[r,i]=S.useState(new Set),[c,A]=S.useState(!0),[u,d]=S.useState("doors");S.useEffect(()=>{h()},[]);const h=async()=>{A(!0);try{const Q=await ct(`/api/estimator-step9-items?estimator=${u}`);if(!Q.ok)throw new Error("Failed to load data");const k=await Q.json();n(k.items||[]),i(new Set),!k.items||k.items.length===0?t({title:"Info",description:"No Step 9 data found."}):t({title:"Success",description:`Loaded ${k.items.length} materials from database.`})}catch(Q){console.error("Load error:",Q),t({title:"Error",description:"Failed to load Step 9 data.",variant:"destructive"})}finally{A(!1)}},o=()=>{const Q=s.reduce(($,q)=>$+(q.quantity*q.rate||0),0),k=Q*.09,z=Q*.09,J=Q+k+z;return{subTotal:Q,sgst:k,cgst:z,grandTotal:J}},{subTotal:m,sgst:y,cgst:p,grandTotal:j}=o(),b=Q=>{const k=new Set(r);k.has(Q)?k.delete(Q):k.add(Q),i(k)},w=()=>{r.size===s.length?i(new Set):i(new Set(s.map((Q,k)=>k)))},B=()=>{const Q=s.filter((k,z)=>!r.has(z));n(Q),i(new Set),t({title:"Success",description:`${r.size} item(s) deleted.`})},L=()=>{const Q=document.getElementById("boq-review-pdf");if(!Q)return;const k=s[0]?.session_id||"BOQ";Qd().set({margin:10,filename:`BOQ_Review_${k}.pdf`,html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(Q).save()};return e.jsx(ka,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"BOQ Review - Step 9"}),e.jsx(ks,{children:e.jsxs(Ws,{className:"pt-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Filter by Estimator Type"}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ve,{children:"Estimator Type"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:u,onChange:Q=>{d(Q.target.value),n([])},children:[e.jsx("option",{value:"doors",children:"Doors"}),e.jsx("option",{value:"flooring",children:"Flooring"})]})]}),e.jsx(Be,{onClick:h,disabled:c,children:c?"Loading...":"Refresh Data"})]})]}),s.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Add to BOQ"}),r.size>0&&e.jsx(e.Fragment,{children:e.jsxs(Be,{variant:"destructive",size:"sm",onClick:B,children:[e.jsx(qc,{className:"mr-2 h-4 w-4"}),"Delete Selected (",r.size,")"]})})]}),e.jsxs("div",{id:"boq-review-pdf",className:"space-y-4",children:[e.jsxs("table",{className:"w-full text-sm border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-100",children:[e.jsx("th",{className:"border px-4 py-2 text-center w-12",children:e.jsx("input",{type:"checkbox",checked:r.size===s.length&&s.length>0,onChange:w,className:"cursor-pointer"})}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"S.No"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Item"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Description"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Unit"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Qty"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:s.map((Q,k)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"border px-4 py-2 text-center",children:e.jsx("input",{type:"checkbox",checked:r.has(k),onChange:()=>b(k),className:"cursor-pointer"})}),e.jsx("td",{className:"border px-4 py-2",children:k+1}),e.jsx("td",{className:"border px-4 py-2 font-medium",children:Q.material_name||"N/A"}),e.jsx("td",{className:"border px-4 py-2 text-xs",children:Q.description||"-"}),e.jsx("td",{className:"border px-4 py-2 text-center",children:"pcs"}),e.jsx("td",{className:"border px-4 py-2 text-right",children:Q.quantity}),e.jsxs("td",{className:"border px-4 py-2 text-right",children:["",(Q.rate||0).toFixed(2)]}),e.jsxs("td",{className:"border px-4 py-2 text-right font-semibold",children:["",((Q.quantity||0)*(Q.rate||0)).toFixed(2)]})]},Q.id||k))})]}),e.jsxs("div",{className:"border-t pt-4 space-y-2 ml-auto w-96",children:[e.jsxs("div",{className:"flex justify-between px-4",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["",m.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between px-4",children:[e.jsx("span",{children:"SGST (9%):"}),e.jsxs("span",{children:["",y.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between px-4",children:[e.jsx("span",{children:"CGST (9%):"}),e.jsxs("span",{children:["",p.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2 font-bold px-4",children:[e.jsx("span",{children:"Grand Total:"}),e.jsxs("span",{children:["",j.toFixed(2)]})]})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs(Be,{onClick:L,className:"flex-1",children:[e.jsx(hi,{className:"mr-2 h-4 w-4"})," Export as PDF"]})})]}),s.length===0&&!c&&e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No materials found. Loading data..."})]})})]})})}function hq({onSelectProduct:t,selectedProjectId:s,open:n,onOpenChange:r}){const[i,c]=S.useState([]),[A,u]=S.useState([]),[d,h]=S.useState(""),[o,m]=S.useState(!0),{toast:y}=ma();S.useEffect(()=>{(async()=>{try{const b=await ct("/api/products",{headers:{}});if(b.ok){const B=((await b.json()).products||[]).map(L=>({id:L.id,name:L.name,code:L.code||"",category:L.category,subcategory:L.subcategory,category_name:L.category_name,subcategory_name:L.subcategory_name,description:L.description}));c(B),u(B)}else y({title:"Error",description:"Failed to load products",variant:"destructive"})}catch(b){console.error("Failed to load products:",b),y({title:"Error",description:"Failed to load products",variant:"destructive"})}finally{m(!1)}})()},[y]),S.useEffect(()=>{if(!d.trim()){u(i);return}const j=d.toLowerCase(),b=i.filter(w=>{const B=w.name?.toLowerCase()||"",L=w.category?.toLowerCase()||"",Q=w.subcategory?.toLowerCase()||"",k=w.category_name?.toLowerCase()||"",z=w.subcategory_name?.toLowerCase()||"",J=w.description?.toLowerCase()||"";return B.includes(j)||L.includes(j)||Q.includes(j)||k.includes(j)||z.includes(j)||J.includes(j)});u(b)},[d,i]);const p=j=>{t(j),r(!1)};return e.jsx(ih,{open:n,onOpenChange:r,children:e.jsxs(iu,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(ou,{children:e.jsx(lu,{children:"Select Product"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{htmlFor:"product-search",children:"Search Products"}),e.jsx($e,{id:"product-search",placeholder:"Search by product name, category, or description...",value:d,onChange:j=>h(j.target.value),className:"mt-2"})]}),o?e.jsx("div",{className:"text-center py-8",children:"Loading products..."}):A.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:i.length===0?"No products available":"No products match your search"}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:A.map(j=>e.jsx(Be,{variant:"outline",onClick:()=>p(j),className:"w-full justify-start h-auto py-3 px-4",children:e.jsxs("div",{className:"text-left space-y-1",children:[e.jsx("div",{className:"font-semibold",children:j.name}),e.jsx("div",{className:"text-xs text-gray-500",children:j.category_name&&j.subcategory_name?`${j.category_name}  ${j.subcategory_name}`:j.category?j.category:"No category"}),j.description&&e.jsx("div",{className:"text-xs text-gray-600",children:j.description})]})},j.id))}),A.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Showing ",A.length," of ",i.length," products"]})]})]})})}function fq({onSelectTemplate:t,open:s,onOpenChange:n}){const[r,i]=S.useState([]),[c,A]=S.useState([]),[u,d]=S.useState(""),[h,o]=S.useState(!0),{toast:m}=ma();S.useEffect(()=>{s&&(async()=>{try{const j=await ct("/api/material-templates",{headers:{}});if(j.ok){const w=(await j.json()).templates||[];i(w),A(w)}else m({title:"Error",description:"Failed to load material templates",variant:"destructive"})}catch(j){console.error("Failed to load material templates:",j),m({title:"Error",description:"Failed to load material templates",variant:"destructive"})}finally{o(!1)}})()},[s,m]),S.useEffect(()=>{if(!u.trim()){A(r);return}const p=u.toLowerCase(),j=r.filter(b=>{const w=b.name?.toLowerCase()||"",B=b.code?.toLowerCase()||"",L=b.category?.toLowerCase()||"",Q=b.subcategory?.toLowerCase()||"",k=b.vendor_category?.toLowerCase()||"";return w.includes(p)||B.includes(p)||L.includes(p)||Q.includes(p)||k.includes(p)});A(j)},[u,r]);const y=p=>{t(p),n(!1)};return e.jsx(ih,{open:s,onOpenChange:n,children:e.jsxs(iu,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(ou,{children:[e.jsx(lu,{children:"Select Material Template"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a material template to add to your BOQ"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ve,{htmlFor:"template-search",children:"Search Material Templates"}),e.jsx($e,{id:"template-search",placeholder:"Search by template name, code, category...",value:u,onChange:p=>d(p.target.value),className:"mt-2"})]}),h?e.jsx("div",{className:"text-center py-8",children:"Loading material templates..."}):c.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:r.length===0?"No material templates available":"No material templates match your search"}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:c.map(p=>e.jsx(Be,{variant:"outline",onClick:()=>y(p),className:"w-full justify-start h-auto py-3 px-4",children:e.jsxs("div",{className:"text-left space-y-1",children:[e.jsx("div",{className:"font-semibold",children:p.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Code: ",p.code,p.category&&`  ${p.category}`,p.subcategory&&`  ${p.subcategory}`]}),p.vendor_category&&e.jsxs("div",{className:"text-xs text-gray-600",children:["Vendor: ",p.vendor_category]}),(p.tax_code_type||p.tax_code_value)&&e.jsxs("div",{className:"text-xs text-gray-600",children:["Tax: ",p.tax_code_type," ",p.tax_code_value]})]})},p.id))}),c.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Showing ",c.length," of ",r.length," material templates"]})]})]})})}function pq({product:t,onClose:s,onAddToBoq:n,open:r}){const[i,c]=S.useState([]),[A,u]=S.useState([]),[d,h]=S.useState(null),[o,m]=S.useState(!0),[y,p]=S.useState(!1),{toast:j}=ma();S.useEffect(()=>{const w=async()=>{try{m(!0);const B=await zo(`/api/step11-products/${encodeURIComponent(t.id)}`);if(console.log("Step 11 Config Data:",B),B.configurations&&B.configurations.length>0){u(B.configurations);const L=B.configurations[0];h(L);const k=(L.items||[]).map((z,J)=>({id:`${L.product.id}_${J}`,bill_no:`TEMPLATE_${t.id}_${L.product.config_name||"default"}_${J}`,estimator:Dd(t)||"generic",group_id:t.id,title:z.material_name||z.name||`Material ${J+1}`,description:z.description||`${t.name} - ${z.material_name||z.name||`Material ${J+1}`}`,unit:z.unit||"pcs",qty:Number(z.qty||z.quantity||1),supply_rate:Number(z.supply_rate||z.rate||0),install_rate:Number(z.install_rate||0),config_id:L.product.id,material_id:z.material_id}));c(k)}else u([]),c([]),j({title:"Configuration Required",description:`No saved configuration found for ${t.name}. You need to create one in Manage Product first.`,action:{label:"Go to Manage Product",onClick:()=>{window.location.href="/admin/manage-product"}}})}catch(B){console.error("Failed to load product snapshot:",B),u([]),c([]),B.message?.includes("HTTP 404")?j({title:"Info",description:`No saved configuration found for ${t.name}. Please configure it in Manage Product first.`}):j({title:"Error",description:"Failed to load product configuration",variant:"destructive"})}finally{m(!1)}};r&&t?.id&&w()},[t,j,r]);const b=w=>{h(w);const L=(w.items||[]).map((Q,k)=>({id:`${w.product.id}_${k}`,bill_no:`TEMPLATE_${t.id}_${w.product.config_name||"default"}_${k}`,estimator:Dd(t)||"generic",group_id:t.id,title:Q.material_name||Q.name||`Material ${k+1}`,description:Q.description||`${t.name} - ${Q.material_name||Q.name||`Material ${k+1}`}`,unit:Q.unit||"pcs",qty:Number(Q.qty||Q.quantity||1),supply_rate:Number(Q.supply_rate||Q.rate||0),install_rate:Number(Q.install_rate||0),config_id:w.product.id,material_id:Q.material_id}));c(L)};return e.jsx(ih,{open:r,onOpenChange:s,children:e.jsxs(iu,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(ou,{children:e.jsxs(lu,{children:[t.name," - Step 11 Configuration"]})}),e.jsxs("div",{className:"space-y-4",children:[t.category&&t.subcategory&&e.jsxs("p",{className:"text-sm text-gray-500",children:[t.category,"  ",t.subcategory]}),o?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading Step 11 data..."}):i.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 space-y-4",children:[e.jsx("div",{className:"text-lg font-medium",children:"No Configuration Found"}),e.jsxs("div",{className:"text-sm",children:["No saved configuration exists for ",e.jsx("strong",{children:t.name}),"."]}),e.jsx("div",{className:"text-sm text-gray-600",children:"You need to create a product configuration in Manage Product first before you can add it to a BOQ."}),e.jsx(Be,{onClick:()=>window.location.href="/admin/manage-product",variant:"outline",className:"mt-4",children:"Go to Manage Product"})]}):e.jsxs(e.Fragment,{children:[A.length>1&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{className:"text-sm font-medium",children:"Select Configuration"}),e.jsxs(Bn,{value:d?.product.id||"",onValueChange:w=>{const B=A.find(L=>L.product.id===w);B&&b(B)},children:[e.jsx(wn,{children:e.jsx(Cn,{placeholder:"Select a configuration"})}),e.jsx(Sn,{children:A.map(w=>e.jsxs(dn,{value:w.product.id,children:[w.product.config_name||"Unnamed Configuration","(Created: ",new Date(w.product.created_at).toLocaleDateString(),")"]},w.product.id))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"font-bold text-lg mb-2",children:[t.name," - Configuration Items"]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Material"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Description"}),e.jsx("th",{className:"px-3 py-2 text-center font-medium",children:"Unit"}),e.jsx("th",{className:"px-3 py-2 text-center font-medium",children:"Qty"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium",children:"Supply Rate"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium",children:"Install Rate"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium",children:"Total"})]})}),e.jsx("tbody",{children:i.map((w,B)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-3 py-2 font-medium",children:w.title}),e.jsx("td",{className:"px-3 py-2 text-gray-600",children:w.description}),e.jsx("td",{className:"px-3 py-2 text-center",children:w.unit}),e.jsx("td",{className:"px-3 py-2 text-center",children:w.qty}),e.jsxs("td",{className:"px-3 py-2 text-right",children:["",w.supply_rate?.toLocaleString()]}),e.jsxs("td",{className:"px-3 py-2 text-right",children:["",w.install_rate?.toLocaleString()]}),e.jsxs("td",{className:"px-3 py-2 text-right font-medium",children:["",((w.supply_rate||0)+(w.install_rate||0)).toLocaleString()]})]},B))}),e.jsx("tfoot",{className:"bg-gray-50 border-t",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"px-3 py-2 font-medium text-right",children:"Grand Total:"}),e.jsxs("td",{className:"px-3 py-2 text-right font-bold",children:["",i.reduce((w,B)=>w+(B.supply_rate||0),0).toLocaleString()]}),e.jsxs("td",{className:"px-3 py-2 text-right font-bold",children:["",i.reduce((w,B)=>w+(B.install_rate||0),0).toLocaleString()]}),e.jsxs("td",{className:"px-3 py-2 text-right font-bold",children:["",i.reduce((w,B)=>w+((B.supply_rate||0)+(B.install_rate||0)),0).toLocaleString()]})]})})]})}),e.jsx("p",{className:"text-xs text-gray-500 italic",children:"These individual material items will be added to the BOQ."})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(Be,{variant:"outline",onClick:s,className:"flex-1",disabled:y,children:"Cancel"}),e.jsx(Be,{onClick:()=>n(i),disabled:i.length===0||y,className:"flex-1",children:y?"Adding...":"Add to BOQ"})]})]})]})]})})}function pR(t,s,n,r,i){r=r||{};var c=1.15,A=i.internal.scaleFactor,u=i.internal.getFontSize()/A,d=i.getLineHeightFactor?i.getLineHeightFactor():c,h=u*d,o=/\r\n|\r|\n/g,m="",y=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(m=typeof t=="string"?t.split(o):t,y=m.length||1),n+=u*(2-c),r.valign==="middle"?n-=y/2*h:r.valign==="bottom"&&(n-=y*h),r.halign==="center"||r.halign==="right"){var p=u;if(r.halign==="center"&&(p*=.5),m&&y>=1){for(var j=0;j<m.length;j++)i.text(m[j],s-i.getStringUnitWidth(m[j])*p,n),n+=h;return i}s-=i.getStringUnitWidth(t)*p}return r.halign==="justify"?i.text(t,s,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(t,s,n),i}var qB={},Cf=(function(){function t(s){this.jsPDFDocument=s,this.userStyles={textColor:s.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:s.internal.getFontSize(),fontStyle:s.internal.getFont().fontStyle,font:s.internal.getFont().fontName,lineWidth:s.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:s.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(s,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=s:qB=s},t.unifyColor=function(s){return Array.isArray(s)?s:typeof s=="number"?[s,s,s]:typeof s=="string"?[s]:null},t.prototype.applyStyles=function(s,n){var r,i,c;n===void 0&&(n=!1),s.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(s.fontStyle);var A=this.jsPDFDocument.internal.getFont(),u=A.fontStyle,d=A.fontName;if(s.font&&(d=s.font),s.fontStyle){u=s.fontStyle;var h=this.getFontList()[d];h&&h.indexOf(u)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(h[0]),u=h[0])}if(this.jsPDFDocument.setFont(d,u),s.fontSize&&this.jsPDFDocument.setFontSize(s.fontSize),!n){var o=t.unifyColor(s.fillColor);o&&(r=this.jsPDFDocument).setFillColor.apply(r,o),o=t.unifyColor(s.textColor),o&&(i=this.jsPDFDocument).setTextColor.apply(i,o),o=t.unifyColor(s.lineColor),o&&(c=this.jsPDFDocument).setDrawColor.apply(c,o),typeof s.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(s.lineWidth)}},t.prototype.splitTextToSize=function(s,n,r){return this.jsPDFDocument.splitTextToSize(s,n,r)},t.prototype.rect=function(s,n,r,i,c){return this.jsPDFDocument.rect(s,n,r,i,c)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(s){return this.jsPDFDocument.getTextWidth(s)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(s){this.jsPDFDocument.setPage(s)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return qB||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var s=this.jsPDFDocument.internal.pageSize;return s.width==null&&(s={width:s.getWidth(),height:s.getHeight()}),s},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var s=this.jsPDFDocument;return s.getLineHeightFactor?s.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(s){return s/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var s=this.jsPDFDocument.internal.getCurrentPageInfo();return s?s.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t})(),r1=function(t,s){return r1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},r1(t,s)};function mR(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r1(t,s);function n(){this.constructor=t}t.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}var gR=(function(t){mR(s,t);function s(n){var r=t.call(this)||this;return r._element=n,r}return s})(Array);function mq(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function gq(t){var s={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return s[t]}function ex(t,s,n){n.applyStyles(s,!0);var r=Array.isArray(t)?t:[t],i=r.map(function(c){return n.getTextWidth(c)}).reduce(function(c,A){return Math.max(c,A)},0);return i}function yR(t,s,n,r){var i=s.settings.tableLineWidth,c=s.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:c});var A=xR(i,!1);A&&t.rect(n.x,n.y,s.getWidth(t.pageSize().width),r.y-n.y,A)}function xR(t,s){var n=t>0,r=s||s===0;return n&&r?"DF":n?"S":r?"F":null}function Mx(t,s){var n,r,i,c;if(t=t||s,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=s}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:s,top:(r=t.top)!==null&&r!==void 0?r:s,right:(i=t.right)!==null&&i!==void 0?i:s,bottom:(c=t.bottom)!==null&&c!==void 0?c:s}):(typeof t!="number"&&(t=s),{top:t,right:t,bottom:t,left:t})}function vR(t,s){var n=Mx(s.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function yq(t,s,n,r,i){var c={},A=1.3333333333333333,u=Hv(s,function(Q){return i.getComputedStyle(Q).backgroundColor});u!=null&&(c.fillColor=u);var d=Hv(s,function(Q){return i.getComputedStyle(Q).color});d!=null&&(c.textColor=d);var h=vq(r,n);h&&(c.cellPadding=h);var o="borderTopColor",m=A*n,y=r.borderTopWidth;if(r.borderBottomWidth===y&&r.borderRightWidth===y&&r.borderLeftWidth===y){var p=(parseFloat(y)||0)/m;p&&(c.lineWidth=p)}else c.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/m,right:(parseFloat(r.borderRightWidth)||0)/m,bottom:(parseFloat(r.borderBottomWidth)||0)/m,left:(parseFloat(r.borderLeftWidth)||0)/m},c.lineWidth.top||(c.lineWidth.right?o="borderRightColor":c.lineWidth.bottom?o="borderBottomColor":c.lineWidth.left&&(o="borderLeftColor"));var j=Hv(s,function(Q){return i.getComputedStyle(Q)[o]});j!=null&&(c.lineColor=j);var b=["left","right","center","justify"];b.indexOf(r.textAlign)!==-1&&(c.halign=r.textAlign),b=["middle","bottom","top"],b.indexOf(r.verticalAlign)!==-1&&(c.valign=r.verticalAlign);var w=parseInt(r.fontSize||"");isNaN(w)||(c.fontSize=w/A);var B=xq(r);B&&(c.fontStyle=B);var L=(r.fontFamily||"").toLowerCase();return t.indexOf(L)!==-1&&(c.font=L),c}function xq(t){var s="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(s="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(s+="italic"),s}function Hv(t,s){var n=bR(t,s);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],c=parseInt(r[4]);return c===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function bR(t,s){var n=s(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:bR(t.parentElement,s):n}function vq(t,s){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/s),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/s/2,c=n.map(function(u){return parseInt(u||"0")/r}),A=Mx(c,0);return i>A.top&&(A.top=i),i>A.bottom&&(A.bottom=i),A}function jR(t,s,n,r,i){var c,A;r===void 0&&(r=!1),i===void 0&&(i=!1);var u;typeof s=="string"?u=n.document.querySelector(s):u=s;var d=Object.keys(t.getFontList()),h=t.scaleFactor(),o=[],m=[],y=[];if(!u)return console.error("Html table could not be found with input: ",s),{head:o,body:m,foot:y};for(var p=0;p<u.rows.length;p++){var j=u.rows[p],b=(A=(c=j?.parentElement)===null||c===void 0?void 0:c.tagName)===null||A===void 0?void 0:A.toLowerCase(),w=bq(d,h,n,j,r,i);w&&(b==="thead"?o.push(w):b==="tfoot"?y.push(w):m.push(w))}return{head:o,body:m,foot:y}}function bq(t,s,n,r,i,c){for(var A=new gR(r),u=0;u<r.cells.length;u++){var d=r.cells[u],h=n.getComputedStyle(d);if(i||h.display!=="none"){var o=void 0;c&&(o=yq(t,d,s,h,n)),A.push({rowSpan:d.rowSpan,colSpan:d.colSpan,styles:o,_element:d,content:jq(d)})}}var m=n.getComputedStyle(r);if(A.length>0&&(i||m.display!=="none"))return A}function jq(t){var s=t.cloneNode(!0);return s.innerHTML=s.innerHTML.replace(/\n/g,"").replace(/ +/g," "),s.innerHTML=s.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),s.innerText||s.textContent||""}function wq(t,s,n){for(var r=0,i=[t,s,n];r<i.length;r++){var c=i[r];c&&typeof c!="object"&&console.error("The options parameter should be of type object, is: "+typeof c),c.startY&&typeof c.startY!="number"&&(console.error("Invalid value for startY option",c.startY),delete c.startY)}}function dA(t,s,n,r,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(t),A=1;A<arguments.length;A++){var u=arguments[A];if(u!=null)for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])}return c}function wR(t,s){var n=new Cf(t),r=n.getDocumentOptions(),i=n.getGlobalOptions();wq(i,r,s);var c=dA({},i,r,s),A;typeof window<"u"&&(A=window);var u=Sq(i,r,s),d=Nq(i,r,s),h=Bq(n,c),o=Eq(n,c,A);return{id:s.tableId,content:o,hooks:d,styles:u,settings:h}}function Sq(t,s,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(d){if(d==="columnStyles"){var h=t[d],o=s[d],m=n[d];r.columnStyles=dA({},h,o,m)}else{var y=[t,s,n],p=y.map(function(j){return j[d]||{}});r[d]=dA({},p[0],p[1],p[2])}},c=0,A=Object.keys(r);c<A.length;c++){var u=A[c];i(u)}return r}function Nq(t,s,n){for(var r=[t,s,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},c=0,A=r;c<A.length;c++){var u=A[c];u.didParseCell&&i.didParseCell.push(u.didParseCell),u.willDrawCell&&i.willDrawCell.push(u.willDrawCell),u.didDrawCell&&i.didDrawCell.push(u.didDrawCell),u.willDrawPage&&i.willDrawPage.push(u.willDrawPage),u.didDrawPage&&i.didDrawPage.push(u.didDrawPage)}return i}function Bq(t,s){var n,r,i,c,A,u,d,h,o,m,y,p,j=Mx(s.margin,40/t.scaleFactor()),b=(n=Cq(t,s.startY))!==null&&n!==void 0?n:j.top,w;s.showFoot===!0?w="everyPage":s.showFoot===!1?w="never":w=(r=s.showFoot)!==null&&r!==void 0?r:"everyPage";var B;s.showHead===!0?B="everyPage":s.showHead===!1?B="never":B=(i=s.showHead)!==null&&i!==void 0?i:"everyPage";var L=(c=s.useCss)!==null&&c!==void 0?c:!1,Q=s.theme||(L?"plain":"striped"),k=!!s.horizontalPageBreak,z=(A=s.horizontalPageBreakRepeat)!==null&&A!==void 0?A:null;return{includeHiddenHtml:(u=s.includeHiddenHtml)!==null&&u!==void 0?u:!1,useCss:L,theme:Q,startY:b,margin:j,pageBreak:(d=s.pageBreak)!==null&&d!==void 0?d:"auto",rowPageBreak:(h=s.rowPageBreak)!==null&&h!==void 0?h:"auto",tableWidth:(o=s.tableWidth)!==null&&o!==void 0?o:"auto",showHead:B,showFoot:w,tableLineWidth:(m=s.tableLineWidth)!==null&&m!==void 0?m:0,tableLineColor:(y=s.tableLineColor)!==null&&y!==void 0?y:200,horizontalPageBreak:k,horizontalPageBreakRepeat:z,horizontalPageBreakBehaviour:(p=s.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function Cq(t,s){var n=t.getLastAutoTable(),r=t.scaleFactor(),i=t.pageNumber(),c=!1;if(n&&n.startPageNumber){var A=n.startPageNumber+n.pageNumber-1;c=A===i}return typeof s=="number"?s:(s==null||s===!1)&&c&&n?.finalY!=null?n.finalY+20/r:null}function Eq(t,s,n){var r=s.head||[],i=s.body||[],c=s.foot||[];if(s.html){var A=s.includeHiddenHtml;if(n){var u=jR(t,s.html,n,A,s.useCss)||{};r=u.head||r,i=u.body||r,c=u.foot||r}else console.error("Cannot parse html in non browser environment")}var d=s.columns||Tq(r,i,c);return{columns:d,head:r,body:i,foot:c}}function Tq(t,s,n){var r=t[0]||s[0]||n[0]||[],i=[];return Object.keys(r).filter(function(c){return c!=="_element"}).forEach(function(c){var A=1,u;Array.isArray(r)?u=r[parseInt(c)]:u=r[c],typeof u=="object"&&!Array.isArray(u)&&(A=u?.colSpan||1);for(var d=0;d<A;d++){var h=void 0;Array.isArray(r)?h=i.length:h=c+(d>0?"_".concat(d):"");var o={dataKey:h};i.push(o)}}),i}var a1=(function(){function t(s,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=s.getDocument()}return t})(),Fq=(function(t){mR(s,t);function s(n,r,i,c,A,u){var d=t.call(this,n,r,u)||this;return d.cell=i,d.row=c,d.column=A,d.section=c.section,d}return s})(a1),Iq=(function(){function t(s,n){this.pageNumber=1,this.id=s.id,this.settings=s.settings,this.styles=s.styles,this.hooks=s.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(s){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(s)},0)},t.prototype.getFootHeight=function(s){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(s)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(s,n,r,i,c,A){for(var u=0,d=n;u<d.length;u++){var h=d[u],o=new Fq(s,this,r,i,c,A),m=h(o)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],m)return!1}return!0},t.prototype.callEndPageHooks=function(s,n){s.applyStyles(s.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var c=i[r];c(new a1(s,this,n))}},t.prototype.callWillDrawPageHooks=function(s,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var c=i[r];c(new a1(s,this,n))}},t.prototype.getWidth=function(s){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,c){return i+c.wrappedWidth},0);return n}else{var r=this.settings.margin;return s-r.left-r.right}},t})(),SR=(function(){function t(s,n,r,i,c){c===void 0&&(c=!1),this.height=0,this.raw=s,s instanceof gR&&(this.raw=s._element,this.element=s._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=c}return t.prototype.getMaxCellHeight=function(s){var n=this;return s.reduce(function(r,i){var c;return Math.max(r,((c=n.cells[i.index])===null||c===void 0?void 0:c.height)||0)},0)},t.prototype.hasRowSpan=function(s){var n=this;return s.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(s,n){return this.getMaxCellHeight(n)<=s},t.prototype.getMinimumRowHeight=function(s,n){var r=this;return s.reduce(function(i,c){var A=r.cells[c.index];if(!A)return 0;var u=n.getLineHeight(A.styles.fontSize),d=A.padding("vertical"),h=d+u;return h>i?h:i},0)},t})(),NR=(function(){function t(s,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=s;var c=s;s!=null&&typeof s=="object"&&!Array.isArray(s)?(this.rowSpan=s.rowSpan||1,this.colSpan=s.colSpan||1,c=(i=s.content)!==null&&i!==void 0?i:s,s._element&&(this.raw=s._element)):(this.rowSpan=1,this.colSpan=1);var A=c!=null?""+c:"",u=/\r\n|\r|\n/g;this.text=A.split(u)}return t.prototype.getTextPos=function(){var s;if(this.styles.valign==="top")s=this.y+this.padding("top");else if(this.styles.valign==="bottom")s=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");s=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:s}},t.prototype.getContentHeight=function(s,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/s*n,c=r*i+this.padding("vertical");return Math.max(c,this.styles.minCellHeight)},t.prototype.padding=function(s){var n=Mx(this.styles.cellPadding,0);return s==="vertical"?n.top+n.bottom:s==="horizontal"?n.left+n.right:n[s]},t})(),Rq=(function(){function t(s,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=s,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(s){for(var n=0,r=0,i=s.allRows();r<i.length;r++){var c=i[r],A=c.cells[this.index];A&&typeof A.styles.cellWidth=="number"&&(n=Math.max(n,A.styles.cellWidth))}return n},t})();function Oq(t,s){Uq(t,s);var n=[],r=0;s.columns.forEach(function(c){var A=c.getMaxCustomCellWidth(s);A?c.width=A:(c.width=c.wrappedWidth,n.push(c)),r+=c.width});var i=s.getWidth(t.pageSize().width)-r;i&&(i=i1(n,i,function(c){return Math.max(c.minReadableWidth,c.minWidth)})),i&&(i=i1(n,i,function(c){return c.minWidth})),i=Math.abs(i),!s.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Dq(s),Qq(s,t),Lq(s)}function Uq(t,s){var n=t.scaleFactor(),r=s.settings.horizontalPageBreak,i=vR(t,s);s.allRows().forEach(function(c){for(var A=0,u=s.columns;A<u.length;A++){var d=u[A],h=c.cells[d.index];if(h){var o=s.hooks.didParseCell;s.callCellHooks(t,o,h,c,d,null);var m=h.padding("horizontal");h.contentWidth=ex(h.text,h.styles,t)+m;var y=ex(h.text.join(" ").split(/[^\S\u00A0]+/),h.styles,t);if(h.minReadableWidth=y+h.padding("horizontal"),typeof h.styles.cellWidth=="number")h.minWidth=h.styles.cellWidth,h.wrappedWidth=h.styles.cellWidth;else if(h.styles.cellWidth==="wrap"||r===!0)h.contentWidth>i?(h.minWidth=i,h.wrappedWidth=i):(h.minWidth=h.contentWidth,h.wrappedWidth=h.contentWidth);else{var p=10/n;h.minWidth=h.styles.minCellWidth||p,h.wrappedWidth=h.contentWidth,h.minWidth>h.wrappedWidth&&(h.wrappedWidth=h.minWidth)}}}}),s.allRows().forEach(function(c){for(var A=0,u=s.columns;A<u.length;A++){var d=u[A],h=c.cells[d.index];if(h&&h.colSpan===1)d.wrappedWidth=Math.max(d.wrappedWidth,h.wrappedWidth),d.minWidth=Math.max(d.minWidth,h.minWidth),d.minReadableWidth=Math.max(d.minReadableWidth,h.minReadableWidth);else{var o=s.styles.columnStyles[d.dataKey]||s.styles.columnStyles[d.index]||{},m=o.cellWidth||o.minCellWidth;m&&typeof m=="number"&&(d.minWidth=m,d.wrappedWidth=m)}h&&(h.colSpan>1&&!d.minWidth&&(d.minWidth=h.minWidth),h.colSpan>1&&!d.wrappedWidth&&(d.wrappedWidth=h.minWidth))}})}function i1(t,s,n){for(var r=s,i=t.reduce(function(p,j){return p+j.wrappedWidth},0),c=0;c<t.length;c++){var A=t[c],u=A.wrappedWidth/i,d=r*u,h=A.width+d,o=n(A),m=h<o?o:h;s-=m-A.width,A.width=m}if(s=Math.round(s*1e10)/1e10,s){var y=t.filter(function(p){return s<0?p.width>n(p):!0});y.length&&(s=i1(y,s,n))}return s}function Lq(t){for(var s={},n=1,r=t.allRows(),i=0;i<r.length;i++)for(var c=r[i],A=0,u=t.columns;A<u.length;A++){var d=u[A],h=s[d.index];if(n>1)n--,delete c.cells[d.index];else if(h)h.cell.height+=c.height,n=h.cell.colSpan,delete c.cells[d.index],h.left--,h.left<=1&&delete s[d.index];else{var o=c.cells[d.index];if(!o)continue;if(o.height=c.height,o.rowSpan>1){var m=r.length-i,y=o.rowSpan>m?m:o.rowSpan;s[d.index]={cell:o,left:y,row:c}}}}}function Dq(t){for(var s=t.allRows(),n=0;n<s.length;n++)for(var r=s[n],i=null,c=0,A=0,u=0;u<t.columns.length;u++){var d=t.columns[u];if(A-=1,A>1&&t.columns[u+1])c+=d.width,delete r.cells[d.index];else if(i){var h=i;delete r.cells[d.index],i=null,h.width=d.width+c}else{var h=r.cells[d.index];if(!h)continue;if(A=h.colSpan,c=0,h.colSpan>1){i=h,c+=d.width;continue}h.width=d.width+c}}}function Qq(t,s){for(var n={count:0,height:0},r=0,i=t.allRows();r<i.length;r++){for(var c=i[r],A=0,u=t.columns;A<u.length;A++){var d=u[A],h=c.cells[d.index];if(h){s.applyStyles(h.styles,!0);var o=h.width-h.padding("horizontal");if(h.styles.overflow==="linebreak")h.text=s.splitTextToSize(h.text,o+1/s.scaleFactor(),{fontSize:h.styles.fontSize});else if(h.styles.overflow==="ellipsize")h.text=WB(h.text,o,h.styles,s,"...");else if(h.styles.overflow==="hidden")h.text=WB(h.text,o,h.styles,s,"");else if(typeof h.styles.overflow=="function"){var m=h.styles.overflow(h.text,o);typeof m=="string"?h.text=[m]:h.text=m}h.contentHeight=h.getContentHeight(s.scaleFactor(),s.getLineHeightFactor());var y=h.contentHeight/h.rowSpan;h.rowSpan>1&&n.count*n.height<y*h.rowSpan?n={height:y,count:h.rowSpan}:n&&n.count>0&&n.height>y&&(y=n.height),y>c.height&&(c.height=y)}}n.count--}}function WB(t,s,n,r,i){return t.map(function(c){return _q(c,s,n,r,i)})}function _q(t,s,n,r,i){var c=1e4*r.scaleFactor();if(s=Math.ceil(s*c)/c,s>=ex(t,n,r))return t;for(;s<ex(t+i,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function BR(t,s){var n=new Cf(t),r=Mq(s,n.scaleFactor()),i=new Iq(s,r);return Oq(n,i),n.applyStyles(n.userStyles),i}function Mq(t,s){var n=t.content,r=kq(n.columns);if(n.head.length===0){var i=YB(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=YB(r,"foot");i&&n.foot.push(i)}var c=t.settings.theme,A=t.styles;return{columns:r,head:Kv("head",n.head,r,A,c,s),body:Kv("body",n.body,r,A,c,s),foot:Kv("foot",n.foot,r,A,c,s)}}function Kv(t,s,n,r,i,c){var A={},u=s.map(function(d,h){for(var o=0,m={},y=0,p=0,j=0,b=n;j<b.length;j++){var w=b[j];if(A[w.index]==null||A[w.index].left===0)if(p===0){var B=void 0;Array.isArray(d)?B=d[w.index-y-o]:B=d[w.dataKey];var L={};typeof B=="object"&&!Array.isArray(B)&&(L=B?.styles||{});var Q=Hq(t,w,h,i,r,c,L),k=new NR(B,Q,t);m[w.dataKey]=k,m[w.index]=k,p=k.colSpan-1,A[w.index]={left:k.rowSpan-1,times:p}}else p--,y++;else A[w.index].left--,p=A[w.index].times,o++}return new SR(d,h,t,m)});return u}function YB(t,s){var n={};return t.forEach(function(r){if(r.raw!=null){var i=Pq(s,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function Pq(t,s){if(t==="head"){if(typeof s=="object")return s.header||null;if(typeof s=="string"||typeof s=="number")return s}else if(t==="foot"&&typeof s=="object")return s.footer;return null}function kq(t){return t.map(function(s,n){var r,i;return typeof s=="object"?i=(r=s.dataKey)!==null&&r!==void 0?r:n:i=n,new Rq(i,s,n)})}function Hq(t,s,n,r,i,c,A){var u=gq(r),d;t==="head"?d=i.headStyles:t==="body"?d=i.bodyStyles:t==="foot"&&(d=i.footStyles);var h=dA({},u.table,u[t],i.styles,d),o=i.columnStyles[s.dataKey]||i.columnStyles[s.index]||{},m=t==="body"?o:{},y=t==="body"&&n%2===0?dA({},u.alternateRow,i.alternateRowStyles):{},p=mq(c),j=dA({},p,h,y,m);return dA(j,A)}function Kq(t,s,n){var r;n===void 0&&(n={});var i=vR(t,s),c=new Map,A=[],u=[],d=[];Array.isArray(s.settings.horizontalPageBreakRepeat)?d=s.settings.horizontalPageBreakRepeat:(typeof s.settings.horizontalPageBreakRepeat=="string"||typeof s.settings.horizontalPageBreakRepeat=="number")&&(d=[s.settings.horizontalPageBreakRepeat]),d.forEach(function(y){var p=s.columns.find(function(j){return j.dataKey===y||j.index===y});p&&!c.has(p.index)&&(c.set(p.index,!0),A.push(p.index),u.push(s.columns[p.index]),i-=p.wrappedWidth)});for(var h=!0,o=(r=n?.start)!==null&&r!==void 0?r:0;o<s.columns.length;){if(c.has(o)){o++;continue}var m=s.columns[o].wrappedWidth;if(h||i>=m)h=!1,A.push(o),u.push(s.columns[o]),i-=m;else break;o++}return{colIndexes:A,columns:u,lastIndex:o-1}}function zq(t,s){for(var n=[],r=0;r<s.columns.length;r++){var i=Kq(t,s,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function CR(t,s){var n=s.settings,r=n.startY,i=n.margin,c={x:i.left,y:r},A=s.getHeadHeight(s.columns)+s.getFootHeight(s.columns),u=r+i.bottom+A;if(n.pageBreak==="avoid"){var d=s.body,h=d.reduce(function(y,p){return y+p.height},0);u+=h}var o=new Cf(t);(n.pageBreak==="always"||n.startY!=null&&u>o.pageSize().height)&&(TR(o),c.y=i.top),s.callWillDrawPageHooks(o,c);var m=dA({},c);s.startPageNumber=o.pageNumber(),n.horizontalPageBreak?Vq(o,s,m,c):(o.applyStyles(o.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&s.head.forEach(function(y){return pA(o,s,y,c,s.columns)}),o.applyStyles(o.userStyles),s.body.forEach(function(y,p){var j=p===s.body.length-1;tx(o,s,y,j,m,c,s.columns)}),o.applyStyles(o.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&s.foot.forEach(function(y){return pA(o,s,y,c,s.columns)})),yR(o,s,m,c),s.callEndPageHooks(o,c),s.finalY=c.y,t.lastAutoTable=s,o.applyStyles(o.userStyles)}function Vq(t,s,n,r){var i=zq(t,s),c=s.settings;if(c.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(h,o){t.applyStyles(t.userStyles),o>0?im(t,s,n,r,h.columns,!0):XB(t,s,r,h.columns),$q(t,s,n,r,h.columns),zv(t,s,r,h.columns)});else for(var A=-1,u=i[0],d=function(){var h=A;if(u){t.applyStyles(t.userStyles);var o=u.columns;A>=0?im(t,s,n,r,o,!0):XB(t,s,r,o),h=JB(t,s,A+1,r,o),zv(t,s,r,o)}var m=h-A;i.slice(1).forEach(function(y){t.applyStyles(t.userStyles),im(t,s,n,r,y.columns,!0),JB(t,s,A+1,r,y.columns,m),zv(t,s,r,y.columns)}),A=h};A<s.body.length-1;)d()}function XB(t,s,n,r){var i=s.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&s.head.forEach(function(c){return pA(t,s,c,n,r)})}function $q(t,s,n,r,i){t.applyStyles(t.userStyles),s.body.forEach(function(c,A){var u=A===s.body.length-1;tx(t,s,c,u,n,r,i)})}function JB(t,s,n,r,i,c){t.applyStyles(t.userStyles),c=c??s.body.length;var A=Math.min(n+c,s.body.length),u=-1;return s.body.slice(n,A).forEach(function(d,h){var o=n+h===s.body.length-1,m=ER(t,s,o,r);d.canEntireRowFit(m,i)&&(pA(t,s,d,r,i),u=n+h)}),u}function zv(t,s,n,r){var i=s.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&s.foot.forEach(function(c){return pA(t,s,c,n,r)})}function Gq(t,s,n){var r=n.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),c=Math.floor((s-i)/r);return Math.max(0,c)}function qq(t,s,n,r){var i={};t.spansMultiplePages=!0,t.height=0;for(var c=0,A=0,u=n.columns;A<u.length;A++){var d=u[A],h=t.cells[d.index];if(h){Array.isArray(h.text)||(h.text=[h.text]);var o=new NR(h.raw,h.styles,h.section);o=dA(o,h),o.text=[];var m=Gq(h,s,r);h.text.length>m&&(o.text=h.text.splice(m,h.text.length));var y=r.scaleFactor(),p=r.getLineHeightFactor();h.contentHeight=h.getContentHeight(y,p),h.contentHeight>=s&&(h.contentHeight=s,o.styles.minCellHeight-=s),h.contentHeight>t.height&&(t.height=h.contentHeight),o.contentHeight=o.getContentHeight(y,p),o.contentHeight>c&&(c=o.contentHeight),i[d.index]=o}}var j=new SR(t.raw,-1,t.section,i,!0);j.height=c;for(var b=0,w=n.columns;b<w.length;b++){var d=w[b],o=j.cells[d.index];o&&(o.height=j.height);var h=t.cells[d.index];h&&(h.height=t.height)}return j}function Wq(t,s,n,r){var i=t.pageSize().height,c=r.settings.margin,A=c.top+c.bottom,u=i-A;s.section==="body"&&(u-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var d=s.getMinimumRowHeight(r.columns,t),h=d<n;if(d>u)return console.error("Will not be able to print row ".concat(s.index," correctly since it's minimum height is larger than page height")),!0;if(!h)return!1;var o=s.hasRowSpan(r.columns),m=s.getMaxCellHeight(r.columns)>u;return m?(o&&console.error("The content of row ".concat(s.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(o||r.settings.rowPageBreak==="avoid")}function tx(t,s,n,r,i,c,A){var u=ER(t,s,r,c);if(n.canEntireRowFit(u,A))pA(t,s,n,c,A);else if(Wq(t,n,u,s)){var d=qq(n,u,s,t);pA(t,s,n,c,A),im(t,s,i,c,A),tx(t,s,d,r,i,c,A)}else im(t,s,i,c,A),tx(t,s,n,r,i,c,A)}function pA(t,s,n,r,i){r.x=s.settings.margin.left;for(var c=0,A=i;c<A.length;c++){var u=A[c],d=n.cells[u.index];if(!d){r.x+=u.width;continue}t.applyStyles(d.styles),d.x=r.x,d.y=r.y;var h=s.callCellHooks(t,s.hooks.willDrawCell,d,n,u,r);if(h===!1){r.x+=u.width;continue}Yq(t,d,r);var o=d.getTextPos();pR(d.text,o.x,o.y,{halign:d.styles.halign,valign:d.styles.valign,maxWidth:Math.ceil(d.width-d.padding("left")-d.padding("right"))},t.getDocument()),s.callCellHooks(t,s.hooks.didDrawCell,d,n,u,r),r.x+=u.width}r.y+=n.height}function Yq(t,s,n){var r=s.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=xR(r.lineWidth,r.fillColor);i&&t.rect(s.x,n.y,s.width,s.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(s.x,n.y,s.width,s.height,"F"),Xq(t,s,n,r.lineWidth))}function Xq(t,s,n,r){var i,c,A,u;r.top&&(i=n.x,c=n.y,A=n.x+s.width,u=n.y,r.right&&(A+=.5*r.right),r.left&&(i-=.5*r.left),d(r.top,i,c,A,u)),r.bottom&&(i=n.x,c=n.y+s.height,A=n.x+s.width,u=n.y+s.height,r.right&&(A+=.5*r.right),r.left&&(i-=.5*r.left),d(r.bottom,i,c,A,u)),r.left&&(i=n.x,c=n.y,A=n.x,u=n.y+s.height,r.top&&(c-=.5*r.top),r.bottom&&(u+=.5*r.bottom),d(r.left,i,c,A,u)),r.right&&(i=n.x+s.width,c=n.y,A=n.x+s.width,u=n.y+s.height,r.top&&(c-=.5*r.top),r.bottom&&(u+=.5*r.bottom),d(r.right,i,c,A,u));function d(h,o,m,y,p){t.getDocument().setLineWidth(h),t.getDocument().line(o,m,y,p,"S")}}function ER(t,s,n,r){var i=s.settings.margin.bottom,c=s.settings.showFoot;return(c==="everyPage"||c==="lastPage"&&n)&&(i+=s.getFootHeight(s.columns)),t.pageSize().height-r.y-i}function im(t,s,n,r,i,c){i===void 0&&(i=[]),c===void 0&&(c=!1),t.applyStyles(t.userStyles),s.settings.showFoot==="everyPage"&&!c&&s.foot.forEach(function(u){return pA(t,s,u,r,i)}),s.callEndPageHooks(t,r);var A=s.settings.margin;yR(t,s,n,r),TR(t),s.pageNumber++,r.x=A.left,r.y=A.top,n.y=A.top,s.callWillDrawPageHooks(t,r),s.settings.showHead==="everyPage"&&(s.head.forEach(function(u){return pA(t,s,u,r,i)}),t.applyStyles(t.userStyles))}function TR(t){var s=t.pageNumber();t.setPage(s+1);var n=t.pageNumber();return n===s?(t.addPage(),!0):!1}function Jq(t){t.API.autoTable=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];var r=s[0],i=wR(this,r),c=BR(this,i);return CR(this,c),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(s,n,r,i){pR(s,n,r,i,this)},t.API.autoTableSetDefaults=function(s){return Cf.setDefaults(s,this),this},t.autoTableSetDefaults=function(s,n){Cf.setDefaults(s,n)},t.API.autoTableHtmlToJson=function(s,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Cf(this),c=jR(i,s,window,n,!1),A=c.head,u=c.body,d=((r=A[0])===null||r===void 0?void 0:r.map(function(h){return h.content}))||[];return{columns:d,rows:u,data:u}}}var Vv;function Zq(t,s){var n=wR(t,s),r=BR(t,n);CR(t,r)}try{if(typeof window<"u"&&window){var ZB=window,eC=ZB.jsPDF||((Vv=ZB.jspdf)===null||Vv===void 0?void 0:Vv.jsPDF);eC&&Jq(eC)}}catch(t){console.error("Could not apply autoTable plugin",t)}function eW(){const[t,s]=S.useState([]),[n,r]=S.useState([]),[i,c]=S.useState([]),[A,u]=S.useState(""),[d,h]=S.useState(""),[o,m]=S.useState(""),[y,p]=S.useState(""),[j,b]=S.useState(null),[w,B]=S.useState(null),[L,Q]=S.useState(!1),[k,z]=S.useState(null),[J,$]=S.useState(!1),[q,X]=S.useState(!1),[fe,ee]=S.useState(null),[le,ue]=S.useState(!0),[te]=bo(),{toast:re}=ma(),[ne,oe]=S.useState({});S.useEffect(()=>{(async()=>{try{const de=await ct("/api/boq-projects",{headers:{}});if(de.ok){const dt=await de.json();s(dt.projects||[])}}catch(de){console.error("Failed to load projects:",de)}finally{ue(!1)}})()},[]),S.useEffect(()=>{if(!j){c([]),B(null),r([]);return}(async()=>{try{const de=await ct(`/api/boq-versions/${encodeURIComponent(j)}`,{headers:{}});if(de.ok){const st=(await de.json()).versions||[];if(c(st),!(w&&st.some(nt=>nt.id===w))){const nt=st.find(at=>at.status==="draft");nt?B(nt.id):st.length>0?B(st[0].id):B(null)}}}catch(de){console.error("Failed to load versions:",de)}})()},[j]),S.useEffect(()=>{if(!w){r([]),oe({});return}(async()=>{try{const de=async st=>{const nt=(st.headers.get("content-type")||"").toLowerCase(),at=await st.text();if(st.status===204||at.trim()==="")return{};if(nt.includes("application/json"))try{return JSON.parse(at)}catch(Tt){throw console.error("safeParseJson: JSON parse failed",{url:st.url,status:st.status,bodySnippet:at.slice(0,300),error:Tt}),new Error("Invalid JSON response from server")}const Dt=at.trim();if(Dt.startsWith("{")||Dt.startsWith("["))try{return JSON.parse(Dt)}catch(Tt){throw console.error("safeParseJson: body looks like JSON but parse failed",{url:st.url,status:st.status,bodySnippet:Dt.slice(0,300),error:Tt}),new Error("Invalid JSON response from server")}console.error("safeParseJson: server returned non-JSON response",{url:st.url,status:st.status,contentType:nt,bodySnippet:at.slice(0,200)});const yt=Dt.startsWith("<!DOCTYPE html")?"Looks like the request hit the frontend dev server (index.html) instead of the backend API. Check VITE_API_BASE_URL and dev server ports.":void 0,qe=`Server returned non-JSON response (status=${st.status})${yt?" - "+yt:""}`;throw new Error(qe)},dt=await ct(`/api/boq-items/version/${encodeURIComponent(w)}`,{headers:{}});if(dt.ok)try{const st=await de(dt);r(st.items||[])}catch(st){re({title:"Error",description:"Failed to parse BOQ items response",variant:"destructive"}),console.error("BOQ items parse error:",st)}else{const st=await dt.text();console.error("Failed to fetch BOQ items:",dt.status,st),re({title:"Error",description:`Failed to load BOQ items (${dt.status})`,variant:"destructive"})}}catch(de){console.error("Failed to load BOQ items:",de),re({title:"Error",description:"Failed to load BOQ items",variant:"destructive"})}})()},[w]),S.useEffect(()=>{try{const _e=typeof te=="string"&&te.split("?")[1]||"",dt=new URLSearchParams(_e).get("project");dt&&dt!==j&&t.find(nt=>nt.id===dt)&&b(dt)}catch{}},[te,t]);const se=()=>{j&&Q(!0)},xe=()=>{j&&X(!0)},Me=_e=>{z(_e),Q(!1),$(!0)},me=_e=>{ee(_e),X(!1),Z(_e)},Z=async _e=>{if(!j||!w){re({title:"Error",description:"Please select a project and version",variant:"destructive"});return}try{const de={title:_e.name,description:_e.name,unit:"pcs",qty:1,supply_rate:0,install_rate:0,location:"Main Area",s_no:1},dt=await ct("/api/boq-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:j,version_id:w,estimator:`material_${_e.id}`,table_data:{product_name:_e.name,step11_items:[de]}})});if(!dt.ok){const at=await dt.text();throw console.error("API response error:",dt.status,at),new Error(`Failed to add material to BOQ: ${dt.status} ${at}`)}const st=await dt.json();console.log("Material added successfully:",st),r(at=>[...at,st]),re({title:"Success",description:`Added ${_e.name} to BOQ`});const nt=await ct(`/api/boq-items/version/${encodeURIComponent(w)}`,{headers:{}});if(nt.ok){const at=await nt.text();if(!(nt.headers.get("content-type")||"").toLowerCase().includes("application/json"))console.error("Reload BOQ items: non-JSON response",{url:nt.url,status:nt.status,bodySnippet:at.slice(0,300)});else try{const yt=JSON.parse(at);console.log("Reloaded BOQ items:",yt),r(yt.items||[])}catch(yt){console.error("Reload BOQ items: JSON parse failed",{url:nt.url,status:nt.status,error:yt,bodySnippet:at.slice(0,300)})}}}catch(de){console.error("Failed to add material to BOQ:",de),re({title:"Error",description:de instanceof Error?de.message:"Failed to add material to BOQ",variant:"destructive"})}},ge=async _e=>{if(console.log("handleAddToBoq called with items:",_e),console.log("Selected project:",j),console.log("Selected product:",k),console.log("Selected version:",w),!j||!k||!w){console.error("Missing required data for adding to BOQ"),re({title:"Error",description:"Please select a project, version, and product",variant:"destructive"});return}try{const de=Dd(k);if(console.log("Estimator type:",de),!de){re({title:"Error",description:"Could not determine estimator type",variant:"destructive"});return}const dt={product_name:k.name,product_id:k.id,category:k.category,subcategory:k.subcategory,step11_items:_e,created_at:new Date().toISOString()},st={project_id:j,version_id:w,estimator:de,table_data:dt};console.log("Sending request to /api/boq-items:",st);const nt=await ct("/api/boq-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(st)});if(console.log("Response status:",nt.status),console.log("Response ok:",nt.ok),nt.ok){const at=await nt.text(),Dt=nt.headers.get("content-type")||"";if(!Dt.toLowerCase().includes("application/json"))throw console.error("Add-to-BOQ: server returned non-JSON response",{url:nt.url,status:nt.status,contentType:Dt,bodySnippet:at.slice(0,500)}),new Error("Server returned non-JSON response when adding BOQ item");let yt;try{yt=JSON.parse(at)}catch(Tt){throw console.error("Add-to-BOQ: JSON parse failed",{url:nt.url,status:nt.status,bodySnippet:at.slice(0,500),error:Tt}),new Error("Invalid JSON response from server when adding BOQ item")}console.log("Item added successfully:",yt),r(Tt=>[...Tt,yt]),re({title:"Success",description:`Added ${_e.length} items to BOQ`}),$(!1),z(null);const qe=await ct(`/api/boq-items/version/${encodeURIComponent(w)}`,{headers:{}});if(qe.ok){const Tt=await qe.text();if(!(qe.headers.get("content-type")||"").toLowerCase().includes("application/json"))console.error("Reload BOQ items: non-JSON response",{url:qe.url,status:qe.status,bodySnippet:Tt.slice(0,300)});else try{const Ts=JSON.parse(Tt);console.log("Reloaded BOQ items:",Ts),r(Ts.items||[])}catch(Ts){console.error("Reload BOQ items: JSON parse failed",{url:qe.url,status:qe.status,error:Ts,bodySnippet:Tt.slice(0,300)})}}}else{const at=await nt.text();throw console.error("API response error:",nt.status,at),new Error(`Failed to add items to BOQ: ${nt.status} ${at}`)}}catch(de){console.error("Failed to add to BOQ:",de),re({title:"Error",description:de instanceof Error?de.message:"Failed to add items to BOQ",variant:"destructive"})}},we=(_e,de,dt)=>{oe(st=>({...st,[_e]:{...st[_e],[de]:dt}}))},pe=(_e,de,dt)=>ne[_e]?.[de]??dt,be=async()=>{if(w)try{if((await ct(`/api/boq-versions/${encodeURIComponent(w)}/save-edits`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({editedFields:ne})})).ok){oe({});try{const de=await ct(`/api/boq-items/version/${encodeURIComponent(w)}`,{headers:{}});if(de.ok){const dt=await de.json();r(dt.items||[]),console.log("BOQ items reloaded after save:",dt.items?.length||0)}}catch(de){console.error("Failed to reload BOQ items after save:",de)}re({title:"Success",description:"Draft saved"})}else throw new Error("Failed to save edits")}catch(_e){console.error("Failed to save project:",_e),re({title:"Error",description:"Failed to save BOQ version",variant:"destructive"})}},je=async()=>{if(w)try{await ct(`/api/boq-versions/${w}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"submitted"})});const _e=await ct(`/api/boq-versions/${encodeURIComponent(j)}`,{headers:{}});if(_e.ok){const de=await _e.json();c(de.versions||[])}re({title:"Success",description:"BOQ version submitted and locked"})}catch(_e){console.error("Failed to submit version:",_e),re({title:"Error",description:"Failed to submit version",variant:"destructive"})}},Ne=async _e=>{if(j)try{const de=i.length>0?i[0].id:null,dt=await ct("/api/boq-versions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:j,copy_from_version:_e?de:null})});if(dt.ok){const st=await dt.json();c(nt=>[st,...nt]),B(st.id),re({title:"Success",description:`Created Version ${st.version_number}`})}}catch(de){console.error("Failed to create version:",de),re({title:"Error",description:"Failed to create version",variant:"destructive"})}},Je=()=>{if(!j||n.length===0){re({title:"Info",description:"No BOQ items to download",variant:"default"});return}try{const _e=["S.No","Item","Description","Unit","Qty","Supply Rate","Install Rate","Supply Amount","Install Amount"],de=[];let dt=1,st=0,nt=0,at=1;n.forEach(Ns=>{const et=Ns.table_data||{},De=et.step11_items||[],rt=et.product_name||Ns.estimator;De.forEach((mt,ls)=>{const Ht=`${Ns.id}-${ls}`,Kt=pe(Ht,"qty",mt.qty||0),lt=pe(Ht,"supply_rate",mt.supply_rate||0),Gt=pe(Ht,"install_rate",mt.install_rate||0),Yt=pe(Ht,"description",mt.description||""),Cs=pe(Ht,"unit",mt.unit||"pcs"),rs=pe(Ht,"location",mt.location||""),Is=Kt*lt,on=Kt*Gt;st+=Is,nt+=on,de.push([at.toString(),mt.title||rt,Yt,Cs,Kt.toString(),lt.toString(),Gt.toString(),Is.toFixed(2),on.toFixed(2)]),at++})}),de.push(["","","","","","","Total",st.toFixed(2),nt.toFixed(2)]);const Dt=[_e.join(","),...de.map(Ns=>Ns.map(et=>et.includes(",")||et.includes('"')||et.includes(`
`)?`"${et.replace(/"/g,'""')}"`:et).join(","))].join(`
`),yt=new Blob([Dt],{type:"text/csv;charset=utf-8;"}),qe=document.createElement("a"),Tt=URL.createObjectURL(yt),ns=pt?.name||"BOQ",Ts=Te?`V${Te.version_number}`:"draft",vs=`${ns}_${Ts}_BOQ.csv`;qe.setAttribute("href",Tt),qe.setAttribute("download",vs),qe.style.visibility="hidden",document.body.appendChild(qe),qe.click(),document.body.removeChild(qe),re({title:"Success",description:`Downloaded ${vs}`})}catch(_e){console.error("Download failed:",_e),re({title:"Error",description:"Failed to download BOQ",variant:"destructive"})}},Qe=async()=>{if(!j||n.length===0){re({title:"Info",description:"No BOQ items to download",variant:"default"});return}try{const _e=[];let de=1;n.forEach(et=>{const De=et.table_data||{},rt=De.step11_items||[],mt=De.product_name||et.estimator;rt.forEach((ls,Ht)=>{const Kt=`${et.id}-${Ht}`,lt=pe(Kt,"qty",ls.qty||0),Gt=pe(Kt,"supply_rate",ls.supply_rate||0),Yt=pe(Kt,"install_rate",ls.install_rate||0),Cs=pe(Kt,"description",ls.description||""),rs=pe(Kt,"unit",ls.unit||"pcs"),Is=pe(Kt,"location",ls.location||""),on=lt*Gt,ws=lt*Yt;_e.push({sno:de,item:ls.title||mt,description:Cs,unit:rs,qty:lt,supply_rate:Gt,install_rate:Yt,supply_amount:on,install_amount:ws}),de++})});const dt="/image.png";let st=null;try{const De=await(await fetch(dt)).blob(),rt=new FileReader;st=await new Promise(mt=>{rt.onloadend=()=>mt(rt.result),rt.onerror=()=>mt(null),rt.readAsDataURL(De)})}catch(et){console.warn("Could not load logo for PDF header",et)}const nt=new bn({orientation:"landscape"}),at=nt.internal.pageSize.getWidth(),Dt=10;if(st){const et=nt.getImageProperties(st),De=24,rt=et.width/et.height*De;nt.addImage(st,"PNG",10,Dt,rt,De)}const yt=at-10;nt.setFontSize(10),nt.setFont(void 0,"bold");const qe=pt?.name||"BOQ",Tt=pt?.client||"-",ns=pt?.budget||"-";nt.text(qe,yt,Dt+6,{align:"right"}),nt.setFontSize(9),nt.setFont(void 0,"normal"),nt.text(`Client: ${Tt}`,yt,Dt+12,{align:"right"}),nt.text(`Budget: ${ns}`,yt,Dt+18,{align:"right"});const Ts=[{header:"S.No",dataKey:"sno"},{header:"Item",dataKey:"item"},{header:"Description",dataKey:"description"},{header:"Unit",dataKey:"unit"},{header:"Qty",dataKey:"qty"},{header:"Supply Rate",dataKey:"supply_rate"},{header:"Install Rate",dataKey:"install_rate"},{header:"Supply Amount",dataKey:"supply_amount"},{header:"Install Amount",dataKey:"install_amount"}];Zq(nt,{head:[Ts.map(et=>et.header)],body:_e.map(et=>Ts.map(De=>et[De.dataKey])),startY:Dt+30,styles:{fontSize:8},headStyles:{fillColor:[64,64,64],textColor:[255,255,255],fontStyle:"bold"},theme:"grid",didDrawPage:et=>{}});const vs=Te?`V${Te.version_number}`:"draft",Ns=`${qe}_${vs}_BOQ.pdf`;nt.save(Ns),re({title:"Success",description:`Downloaded ${Ns}`})}catch(_e){console.error("Failed to generate PDF",_e),re({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}},pt=t.find(_e=>_e.id===j),Te=i.find(_e=>_e.id===w),Ce=Te?.status==="submitted";return le?e.jsx(ka,{children:e.jsx("div",{className:"text-center py-8",children:"Loading projects..."})}):e.jsx(ka,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Create BOQ"}),e.jsx(ks,{children:e.jsxs(Ws,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Select Project"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Ve,{children:"Projects"}),e.jsxs(Bn,{onValueChange:_e=>b(_e||null),children:[e.jsx(wn,{className:"w-full",children:e.jsx(Cn,{placeholder:t.length===0?"No projects":"Select project"})}),e.jsx(Sn,{children:t.map(_e=>e.jsxs(dn,{value:_e.id,children:[_e.name,"  ",_e.client||"(No client)","  ",_e.location||"(No location)"]},_e.id))})]})]}),pt&&e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Budget:"})," ",pt.budget||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",pt.status||"draft"]})]}),j&&e.jsxs("div",{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"BOQ Versions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Bn,{value:w||"",onValueChange:B,children:[e.jsx(wn,{className:"flex-1",children:e.jsx(Cn,{placeholder:"Select version"})}),e.jsx(Sn,{children:i.map(_e=>e.jsxs(dn,{value:_e.id,children:[_e.project_name?`[${_e.project_name}] `:"","V",_e.version_number," (",_e.status==="submitted"?"Locked":"Draft",")"]},_e.id))})]}),w&&e.jsx(Be,{onClick:async()=>{if(w&&confirm("Delete this version and all its BOQ items? This cannot be undone."))try{const _e=await ct(`/api/boq-versions/${encodeURIComponent(w)}`,{method:"DELETE"});if(_e.ok){const de=await ct(`/api/boq-versions/${encodeURIComponent(j)}`,{headers:{}});if(de.ok){const dt=await de.json();c(dt.versions||[]);const st=(dt.versions||[]).find(nt=>nt.status==="draft");st?B(st.id):(dt.versions||[]).length>0?B(dt.versions[0].id):B(null),r([]),re({title:"Deleted",description:"Version removed"})}}else{const de=await _e.text();throw new Error(de||"Failed to delete version")}}catch(_e){console.error("Failed to delete version",_e),re({title:"Error",description:"Failed to delete version",variant:"destructive"})}},variant:"destructive",children:"Delete Version"}),i.length>0&&e.jsx(Be,{onClick:()=>{const _e=i[0];confirm(`Copy items from V${_e.version_number}?`)?Ne(!0):Ne(!1)},variant:"outline",children:"+ New Version"}),i.length===0&&j&&e.jsx(Be,{onClick:()=>Ne(!1),variant:"outline",children:"Create V1"})]}),Te&&e.jsxs("div",{className:"text-sm text-gray-600 space-y-1 bg-blue-50 p-3 rounded",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Project:"})," ",Te.project_name||"Unknown"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Version:"})," V",Te.version_number]}),Te.project_client&&e.jsxs("div",{children:[e.jsx("strong",{children:"Client:"})," ",Te.project_client]}),Te.project_location&&e.jsxs("div",{children:[e.jsx("strong",{children:"Location:"})," ",Te.project_location]}),Ce&&e.jsx("span",{className:"inline-block bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs font-semibold",children:"Submitted (Locked)"}),!Ce&&e.jsx("span",{className:"inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-semibold",children:"Draft (Editable)"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Be,{onClick:se,className:"flex-1",disabled:Ce,size:"sm",children:"Add Product +"}),e.jsx(Be,{onClick:xe,className:"flex-1",disabled:Ce,size:"sm",children:"Add Item"})]}),e.jsx(hq,{open:L,onOpenChange:Q,onSelectProduct:Me,selectedProjectId:j}),e.jsx(fq,{open:q,onOpenChange:X,onSelectTemplate:me}),k&&e.jsx(pq,{product:k,open:J,onClose:()=>{$(!1),setTimeout(()=>{z(null)},300)},onAddToBoq:ge})]})]})}),j&&e.jsx(ks,{children:e.jsxs(Ws,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"BOQ Items"}),n.length===0?e.jsx("div",{className:"text-gray-500 text-center py-4",children:"No products added yet. Click Add Product +"}):e.jsx("div",{className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"border-collapse text-xs min-w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-100 border-b-2 border-gray-300",children:[e.jsx("th",{className:"border px-2 py-2 text-left font-semibold w-10",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2 text-left font-semibold w-64",children:"Item"}),e.jsx("th",{className:"border px-2 py-2 text-left font-semibold w-[600px]",children:"Description"}),e.jsx("th",{className:"border px-2 py-2 text-center font-semibold w-16",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2 text-center font-semibold w-20",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-1 py-2 text-center font-semibold",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-1 py-2 text-center font-semibold",children:"Amount"}),e.jsx("th",{className:"border px-2 py-2 text-center font-semibold w-16",children:"Action"})]}),e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{colSpan:5}),e.jsx("th",{className:"border px-1 py-1 text-center text-xs font-medium w-24",children:"Supply"}),e.jsx("th",{className:"border px-1 py-1 text-center text-xs font-medium w-24",children:"Install"}),e.jsx("th",{className:"border px-1 py-1 text-center text-xs font-medium w-32",children:"Supply"}),e.jsx("th",{className:"border px-1 py-1 text-center text-xs font-medium w-32",children:"Install"}),e.jsx("th",{})]})]}),e.jsx("tbody",{children:(()=>{let _e=0;return n.flatMap((de,dt)=>{let st=de.table_data||{};if(typeof st=="string")try{st=JSON.parse(st)}catch(Dt){console.error("Failed to parse table_data for item",de.id,Dt),st={}}const nt=st.step11_items||[],at=st.product_name||de.estimator;return nt.map((Dt,yt)=>{_e+=1;const qe=`${de.id}-${yt}`,Tt=pe(qe,"qty",Dt.qty||0),ns=pe(qe,"supply_rate",Dt.supply_rate||0),Ts=pe(qe,"install_rate",Dt.install_rate||0),vs=pe(qe,"description",Dt.description||""),Ns=pe(qe,"unit",Dt.unit||"pcs");pe(qe,"location",Dt.location||"");const et=Tt*ns,De=Tt*Ts;return e.jsxs("tr",{className:"border-b border-gray-200 hover:bg-blue-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center text-xs",children:_e}),e.jsx("td",{className:"border px-2 py-1 font-medium text-xs",children:Dt.title||at}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{value:vs,onChange:rt=>we(qe,"description",rt.target.value),disabled:Ce,className:"w-full border rounded px-1 py-0.5 text-xs min-h-[150px] resize-y disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Enter description"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:Ns,onChange:rt=>we(qe,"unit",rt.target.value),disabled:Ce,className:"w-full border rounded px-1 py-0.5 text-xs text-center disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"pcs"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",value:Tt,onChange:rt=>we(qe,"qty",parseFloat(rt.target.value)||0),disabled:Ce,className:"w-full border rounded px-1 py-0.5 text-xs text-center disabled:bg-gray-100 disabled:cursor-not-allowed font-semibold"})}),e.jsx("td",{className:"border px-1 py-1",children:e.jsx("input",{type:"number",value:ns,onChange:rt=>we(qe,"supply_rate",parseFloat(rt.target.value)||0),disabled:Ce,className:"w-full border rounded px-0.5 py-0.5 text-xs text-right disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0"})}),e.jsx("td",{className:"border px-1 py-1",children:e.jsx("input",{type:"number",value:Ts,onChange:rt=>we(qe,"install_rate",parseFloat(rt.target.value)||0),disabled:Ce,className:"w-full border rounded px-0.5 py-0.5 text-xs text-right disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0"})}),e.jsxs("td",{className:"border px-1 py-1 text-right font-medium text-xs",children:["",et.toFixed(2)]}),e.jsxs("td",{className:"border px-1 py-1 text-right font-medium text-xs",children:["",De.toFixed(2)]}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Be,{variant:"outline",size:"xs",disabled:Ce,onClick:async()=>{try{await ct(`/api/boq-items/${de.id}`,{method:"DELETE"}),r(rt=>rt.filter(mt=>mt.id!==de.id)),re({title:"Deleted",description:"BOQ item removed"})}catch{re({title:"Error",description:"Failed to delete item",variant:"destructive"})}},children:"Delete"})})]},qe)})})})()}),n.length>0&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 border-t-2 border-gray-300 font-semibold text-xs",children:[e.jsx("td",{colSpan:7,className:"border px-1 py-1 text-right",children:"Subtotal"}),e.jsxs("td",{className:"border px-1 py-1 text-right",children:["",n.flatMap((_e,de)=>(_e.table_data?.step11_items||[]).map((dt,st)=>{const nt=`${_e.id}-${st}`,at=pe(nt,"qty",dt.qty||0),Dt=pe(nt,"supply_rate",dt.supply_rate||0);return at*Dt})).reduce((_e,de)=>_e+de,0).toFixed(2)]}),e.jsxs("td",{className:"border px-1 py-1 text-right",children:["",n.flatMap((_e,de)=>(_e.table_data?.step11_items||[]).map((dt,st)=>{const nt=`${_e.id}-${st}`,at=pe(nt,"qty",dt.qty||0),Dt=pe(nt,"install_rate",dt.install_rate||0);return at*Dt})).reduce((_e,de)=>_e+de,0).toFixed(2)]}),e.jsx("td",{})]})})]})})]})}),j&&w&&e.jsx(ks,{children:e.jsxs(Ws,{className:"space-y-3 pt-6",children:[Ce?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-4 text-sm text-yellow-800",children:[e.jsx("strong",{children:"This version is locked."})," Submit a new version to make edits."]}):null,e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx(Be,{onClick:be,variant:"outline",disabled:Ce,children:"Save Draft"}),e.jsx(Be,{onClick:je,variant:"default",disabled:Ce||n.length===0,children:"Submit & Lock Version"}),e.jsx(Be,{onClick:Je,variant:"outline",disabled:n.length===0,children:"Download as Excel"}),e.jsx(Be,{onClick:Qe,variant:"outline",disabled:n.length===0,children:"Download as PDF"})]})]})})]})})}function tW(){const[t,s]=S.useState(""),[n,r]=S.useState(""),[i,c]=S.useState(""),[A,u]=S.useState(""),{toast:d}=ma(),[h,o]=S.useState([]),[m,y]=S.useState({}),[p,j]=S.useState({}),[b,w]=S.useState({}),[B,L]=S.useState(new Set);S.useEffect(()=>{(async()=>{try{const q=await ct("/api/boq-projects",{headers:{}});if(q.ok){const X=await q.json();o(X.projects||[])}}catch(q){console.warn("Failed to load projects",q)}})()},[]);const Q=async()=>{if(!t.trim()){d({title:"Error",description:"Project name is required",variant:"destructive"});return}try{const $=await ct("/api/boq-projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.trim(),client:n.trim(),budget:i.trim(),location:A.trim()})});if($.ok){const q=await $.json();s(""),r(""),c(""),u(""),o(X=>[q,...X]),d({title:"Success",description:"Project created"})}else d({title:"Error",description:"Failed to create project",variant:"destructive"})}catch($){console.error("Failed to create project:",$),d({title:"Error",description:"Failed to create project",variant:"destructive"})}},k=async $=>{if(y(q=>({...q,[$]:!q[$]})),!m[$]&&!p[$])try{const q=await ct(`/api/boq-versions/${encodeURIComponent($)}`,{headers:{}});if(q.ok){const X=await q.json();j(fe=>({...fe,[$]:X.versions||[]})),(X.versions||[]).forEach(async fe=>{try{const ee=await ct(`/api/boq-items/version/${encodeURIComponent(fe.id)}`,{headers:{}});if(ee.ok){const le=await ee.json();w(ue=>({...ue,[fe.id]:le.items||[]}))}}catch(ee){console.warn("Failed to load items for version",fe.id,ee)}})}}catch(q){console.warn("Failed to load versions",q)}},z=async $=>{if(confirm("Are you sure you want to delete this project? This cannot be undone."))try{(await ct(`/api/boq-projects/${$}`,{method:"DELETE"})).ok?(o(X=>X.filter(fe=>fe.id!==$)),d({title:"Success",description:"Project deleted"})):d({title:"Error",description:"Failed to delete project",variant:"destructive"})}catch(q){console.error("Failed to delete project:",q),d({title:"Error",description:"Failed to delete project",variant:"destructive"})}},J=$=>{const q=$.flatMap(X=>(X.table_data?.step11_items||[]).map((fe,ee)=>({...fe,_sourceId:X.id,_idx:ee})));return q.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No Step 11 items"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 border-b",children:[e.jsx("th",{className:"border px-2 py-1",children:"S.No"}),e.jsx("th",{className:"border px-2 py-1",children:"Item"}),e.jsx("th",{className:"border px-2 py-1",children:"Description"}),e.jsx("th",{className:"border px-2 py-1",children:"Unit"}),e.jsx("th",{className:"border px-2 py-1",children:"Qty"}),e.jsx("th",{className:"border px-2 py-1",children:"Supply Rate"}),e.jsx("th",{className:"border px-2 py-1",children:"Install Rate"})]})}),e.jsx("tbody",{children:q.map((X,fe)=>e.jsxs("tr",{className:"border-b hover:bg-blue-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:fe+1}),e.jsx("td",{className:"border px-2 py-1",children:X.title||X.bill_no||""}),e.jsx("td",{className:"border px-2 py-1",children:X.description||""}),e.jsx("td",{className:"border px-2 py-1 text-center",children:X.unit||"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-right",children:X.qty??"0"}),e.jsx("td",{className:"border px-2 py-1 text-right",children:X.supply_rate??"0"}),e.jsx("td",{className:"border px-2 py-1 text-right",children:X.install_rate??"0"})]},`${X._sourceId}-${X._idx}`))})]})})};return e.jsx(ka,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Create Project"}),e.jsx(ks,{children:e.jsxs(Ws,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Create New Project"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Project Name"}),e.jsx($e,{value:t,onChange:$=>s($.target.value),placeholder:"Project name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Client Name"}),e.jsx($e,{value:n,onChange:$=>r($.target.value),placeholder:"Client"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Location"}),e.jsx($e,{value:A,onChange:$=>u($.target.value),placeholder:"Location"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Budget"}),e.jsx($e,{value:i,onChange:$=>c($.target.value),placeholder:"Budget"})]})]}),e.jsx(Be,{onClick:Q,children:"Create Project"})]})}),e.jsx(ks,{children:e.jsxs(Ws,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Existing Projects"}),h.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No projects yet."}):e.jsx("ul",{className:"space-y-2",children:h.map($=>e.jsxs("li",{className:"border rounded",children:[e.jsxs("div",{className:"flex items-center justify-between p-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"text-sm px-2",onClick:()=>k($.id),"aria-expanded":!!m[$.id],children:m[$.id]?"":""}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:$.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[$.client||"","  ",$.location||"","  ",$.budget||""]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["V",$.current_version||""]}),e.jsx(Be,{variant:"destructive",size:"sm",onClick:()=>z($.id),children:"Delete"})]})]}),m[$.id]&&e.jsx("div",{className:"p-3 border-t",children:p[$.id]?p[$.id].length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No versions for this project."}):e.jsx("div",{className:"space-y-4",children:p[$.id].map(q=>e.jsxs("div",{className:"border rounded p-3 bg-gray-50 flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:B.has(q.id),onChange:X=>{const fe=new Set(B);X.target.checked?fe.add(q.id):fe.delete(q.id),L(fe)},className:"mt-1 w-4 h-4 cursor-pointer"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"font-medium",children:["V",q.version_number]}),e.jsx("div",{className:`text-xs px-2 py-0.5 rounded ${q.status==="submitted"?"bg-green-100 text-green-800":"bg-gray-100 text-muted-foreground"}`,children:q.status})]}),q.status==="submitted"?e.jsx("div",{className:"mb-2",children:b[q.id]?b[q.id].length>0?J(b[q.id]):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No items in this version"}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading items..."})}):e.jsx("div",{className:"mb-2",children:b[q.id]?b[q.id].length>0?J(b[q.id]):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No items added yet"}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading items..."})})]})]},q.id))}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading versions..."})})]},$.id))})]})})]})})}const sW=[{code:"+91",country:"India"},{code:"+1",country:"USA"},{code:"+44",country:"UK"},{code:"+61",country:"Australia"},{code:"+971",country:"UAE"},{code:"+81",country:"Japan"},{code:"+49",country:"Germany"}],iy=()=>e.jsx("span",{className:"text-red-500 ml-1",children:"*"});function nW(){const{toast:t}=ma(),[s,n]=S.useState([]),[r,i]=S.useState(!0),[c,A]=S.useState(!1),[u,d]=S.useState(!1),[h,o]=S.useState({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:""});S.useEffect(()=>{m()},[]);const m=async()=>{try{const p=localStorage.getItem("authToken"),j=await fetch("/api/supplier/my-shops",{headers:p?{Authorization:`Bearer ${p}`}:{}});if(!j.ok){console.error("load shops failed",j.status),n([]);return}const b=await j.json();n(b.shops||[])}catch(p){console.error("Error loading shops:",p),n([])}finally{i(!1)}},y=async p=>{if(p.preventDefault(),!h.name.trim()){t({title:"Error",description:"Shop name is required",variant:"destructive"});return}if(!h.location.trim()||!h.city.trim()){t({title:"Error",description:"Location and city are required",variant:"destructive"});return}if(!h.contactNumber.trim()){t({title:"Error",description:"Contact number is required",variant:"destructive"});return}A(!0);try{const j=localStorage.getItem("authToken"),b=await fetch("/api/shops",{method:"POST",headers:{"Content-Type":"application/json",Authorization:j?`Bearer ${j}`:void 0},body:JSON.stringify(h)});if(!b.ok){const B=await b.text();throw console.error("submit shop failed",b.status,B),new Error(`Failed to submit shop (${b.status})`)}const w=await b.json();t({title:"Success",description:"Shop submitted for approval. Admin will review and approve it."}),o({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:""}),d(!1),m()}catch(j){console.error("Error submitting shop:",j),t({title:"Error",description:"Failed to submit shop",variant:"destructive"})}finally{A(!1)}};return e.jsx(ka,{children:e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"My Shops"}),e.jsx("p",{className:"text-gray-600",children:"Add and manage your shops. Submit for approval to appear in the system."})]}),e.jsxs("div",{className:"grid gap-8",children:[!u&&e.jsxs(Be,{onClick:()=>d(!0),className:"w-fit bg-blue-600 hover:bg-blue-700",children:[e.jsx(wc,{className:"mr-2 h-4 w-4"})," Add New Shop"]}),u&&e.jsxs(ks,{className:"border-blue-200 bg-blue-50",children:[e.jsxs(ur,{children:[e.jsxs(hr,{className:"text-blue-900 flex items-center gap-2",children:[e.jsx(Sl,{className:"h-5 w-5"})," Add New Shop"]}),e.jsx(na,{className:"text-blue-800",children:"Fill in your shop details and submit for approval"})]}),e.jsx(Ws,{children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Shop Name ",e.jsx(iy,{})]}),e.jsx($e,{placeholder:"Enter shop name",value:h.name,onChange:p=>o({...h,name:p.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Location ",e.jsx(iy,{})]}),e.jsx($e,{placeholder:"Enter location",value:h.location,onChange:p=>o({...h,location:p.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["City ",e.jsx(iy,{})]}),e.jsx($e,{placeholder:"Enter city",value:h.city,onChange:p=>o({...h,city:p.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"State"}),e.jsx($e,{placeholder:"Enter state",value:h.state,onChange:p=>o({...h,state:p.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Country"}),e.jsx($e,{placeholder:"Enter country",value:h.country,onChange:p=>o({...h,country:p.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Pincode"}),e.jsx($e,{placeholder:"Enter pincode",value:h.pincode,onChange:p=>o({...h,pincode:p.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ve,{children:["Phone Number ",e.jsx(iy,{})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Bn,{value:h.phoneCountryCode,onValueChange:p=>o({...h,phoneCountryCode:p}),children:[e.jsx(wn,{className:"w-28",children:e.jsx(Cn,{placeholder:"+91"})}),e.jsx(Sn,{children:sW.map(p=>e.jsx(dn,{value:p.code,children:p.code},p.code))})]}),e.jsx($e,{placeholder:"Enter phone number",value:h.contactNumber,onChange:p=>o({...h,contactNumber:p.target.value}),type:"tel",className:"flex-1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"GST Number"}),e.jsx($e,{placeholder:"Enter GST number",value:h.gstNo,onChange:p=>o({...h,gstNo:p.target.value})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Be,{type:"submit",disabled:c,className:"bg-blue-600 hover:bg-blue-700",children:c?"Submitting...":"Submit for Approval"}),e.jsx(Be,{type:"button",variant:"outline",onClick:()=>d(!1),disabled:c,children:"Cancel"})]})]})})]}),!r&&s.length>0&&e.jsxs(ks,{children:[e.jsxs(ur,{children:[e.jsxs(hr,{children:["My Shops (",s.length,")"]}),e.jsx(na,{children:"List of your submitted and approved shops"})]}),e.jsx(Ws,{children:e.jsx("div",{className:"space-y-3",children:s.map(p=>e.jsxs("div",{className:"p-4 border rounded-lg flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",children:p.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.location,", ",p.city,p.state&&`, ${p.state}`]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p.phoneCountryCode," ",p.contactNumber]}),p.gstNo&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["GST: ",p.gstNo]})]}),e.jsx(Bl,{variant:p.approved?"default":"secondary",children:p.approved?"Approved":"Pending"})]},p.id))})})]}),!r&&s.length===0&&!u&&e.jsx(ks,{children:e.jsx(Ws,{className:"pt-6",children:e.jsx("div",{className:"text-center text-gray-500",children:'No shops submitted yet. Click "Add New Shop" to get started.'})})})]})]})})}function rW({shopName:t="Shop",shopLocation:s=""}){const{toast:n}=ma(),{addSupportMessage:r,deleteMessage:i,supportMessages:c}=ei(),[A,u]=S.useState([]),[d,h]=S.useState(!0),[o,m]=S.useState(!1),[y,p]=S.useState(""),[j,b]=S.useState(""),[w,B]=S.useState("");S.useEffect(()=>{L()},[]);const L=async()=>{try{const z=localStorage.getItem("authToken"),J=await fetch("/api/support-messages",{headers:z?{Authorization:`Bearer ${z}`}:{}});if(!J.ok){console.error("Failed to load messages"),h(!1);return}const $=await J.json();u($.messages||[])}catch(z){console.error("Error loading messages:",z)}finally{h(!1)}},Q=async z=>{if(z.preventDefault(),!y.trim()){n({title:"Error",description:"Please enter your name",variant:"destructive"});return}if(!w.trim()){n({title:"Error",description:"Please enter your message",variant:"destructive"});return}m(!0);try{await r?.(y,w,j),n({title:"Success",description:"Your message has been submitted. Our team will respond shortly."}),p(""),b(""),B(""),await L()}catch{n({title:"Error",description:"Failed to submit message",variant:"destructive"})}finally{m(!1)}},k=async z=>{if(confirm("Are you sure you want to delete this message?"))try{await i?.(z),u(A.filter(J=>J.id!==z)),n({title:"Success",description:"Message deleted"})}catch{n({title:"Error",description:"Failed to delete message",variant:"destructive"})}};return e.jsx(Ej,{shopName:t,shopLocation:s,shopApproved:!0,children:e.jsxs("div",{className:"p-6 lg:p-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(gh,{size:24,className:"text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Messages & Support"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Get help from our technical support team. Submit your questions or issues below."})]}),e.jsxs(ks,{className:"mb-8",children:[e.jsxs(ur,{children:[e.jsx(hr,{children:"Submit a Message"}),e.jsx(na,{children:"Tell us how we can help. Our team typically responds within 24 hours."})]}),e.jsx(Ws,{children:e.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(Ve,{htmlFor:"name",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($e,{id:"name",type:"text",placeholder:"Your name",value:y,onChange:z=>p(z.target.value),required:!0,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(Ve,{htmlFor:"email",children:"Email (Optional)"}),e.jsx($e,{id:"email",type:"email",placeholder:"your.email@example.com",value:j,onChange:z=>b(z.target.value),className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsxs(Ve,{htmlFor:"message",children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Cl,{id:"message",placeholder:"Describe your issue or question in detail...",value:w,onChange:z=>B(z.target.value),required:!0,className:"mt-2 min-h-32"})]}),e.jsx(Be,{type:"submit",disabled:o,className:"w-full bg-blue-600 hover:bg-blue-700",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Xl,{size:16,className:"mr-2 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(EL,{size:16,className:"mr-2"}),"Send Message"]})})]})})]}),e.jsxs(ks,{children:[e.jsxs(ur,{children:[e.jsx(hr,{children:"Your Messages"}),e.jsx(na,{children:"Track your submitted messages and responses"})]}),e.jsx(Ws,{children:d?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Xl,{className:"w-6 h-6 text-blue-600 animate-spin mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Loading messages..."})]}):A.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(gh,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No messages yet. Submit one above to get started!"})]}):e.jsx("div",{className:"space-y-4",children:A.map(z=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:z.sender_name||"Anonymous"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(z.submitted_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsx("button",{onClick:()=>k(z.id),className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition",children:e.jsx(qc,{size:16})})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:z.message}),z.additional_info&&e.jsxs("div",{className:"p-2 bg-blue-50 rounded border border-blue-200 text-xs text-blue-800",children:[e.jsx("strong",{children:"Additional Info:"})," ",z.additional_info]})]},z.id))})})]}),e.jsx(ks,{className:"mt-6",children:e.jsx(Ws,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(mh,{className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:"Response Time"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Our technical support team typically responds to all messages within 24 business hours. For urgent issues, please mark them as priority in your message."})]})]})})})]})})}function aW(){return e.jsxs(eO,{children:[e.jsx(br,{path:"/",component:Lk}),e.jsx(br,{path:"/signup",component:SH}),e.jsx(br,{path:"/forgot-password",component:NH}),e.jsx(br,{path:"/reset-password",component:t9}),e.jsx(br,{path:"/pending-approval",component:pN}),e.jsx(br,{path:"/supplier-pending",component:pN}),e.jsx(br,{path:"/dashboard",component:bz}),e.jsx(br,{path:"/software/dashboard",component:jz}),e.jsx(br,{path:"/purchase/dashboard",component:wz}),e.jsx(br,{path:"/supplier/dashboard",component:TN}),e.jsx(br,{path:"/subscription",component:Aq}),e.jsx(br,{path:"/create-project",component:tW}),e.jsx(br,{path:"/create-boq",component:eW}),e.jsx(br,{path:"/item-master",component:dq}),e.jsx(br,{path:"/boq-review",component:uq}),e.jsx(br,{path:"/estimators/civil-wall",component:LG}),e.jsx(br,{path:"/estimators/flooring",component:_G}),e.jsx(br,{path:"/estimators/false-ceiling",component:kG}),e.jsx(br,{path:"/estimators/painting",component:HG}),e.jsx(br,{path:"/estimators/doors",component:$G}),e.jsx(br,{path:"/estimators/blinds",component:ZG}),e.jsx(br,{path:"/estimators/electrical",component:sq}),e.jsx(br,{path:"/estimators/plumbing",component:nq}),e.jsx(br,{path:"/estimators/ms-work",component:aq}),e.jsx(br,{path:"/estimators/ss-work",component:iq}),e.jsx(br,{path:"/estimators/fire-fighting",component:oq}),e.jsx(br,{path:"/estimators/:subcategory",component:cq}),e.jsx(br,{path:"/admin/dashboard",component:$b}),e.jsx(br,{path:"/admin/manage-materials",component:Tz}),e.jsx(br,{path:"/admin/manage-product",component:Uz}),e.jsx(br,{path:"/admin/vendor-categories",component:Lz}),e.jsx(br,{path:"/admin/supplier-approval",component:FN}),e.jsx(br,{path:"/admin/suppliers",component:FN}),e.jsx(br,{path:"/admin/material-submissions",component:Iz}),e.jsx(br,{path:"/supplier/shops",component:nW}),e.jsx(br,{path:"/supplier/materials",component:yI}),e.jsx(br,{path:"/supplier/support",component:()=>e.jsx(rW,{})}),e.jsx(br,{path:"/supplier/dashboard",component:TN}),e.jsx(br,{component:k6})]})}function iW(){return e.jsx(bO,{client:DO,children:e.jsx(PO,{children:e.jsx(kO,{children:e.jsxs(M6,{children:[e.jsx(FD,{}),e.jsx(aW,{})]})})})})}F3.createRoot(document.getElementById("root")).render(e.jsx(iW,{}));export{Ca as _,Lw as c,o1 as g};
