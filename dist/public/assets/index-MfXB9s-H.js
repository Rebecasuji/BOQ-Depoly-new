function S3(t,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const c=Object.getOwnPropertyDescriptor(r,i);c&&Object.defineProperty(t,i,c.get?c:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const A of c.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&r(A)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();var Dw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function N3(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var s=t.default;if(typeof s=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};n.prototype=s.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var j0={exports:{}},Up={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function B3(){if(Qw)return Up;Qw=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function n(r,i,c){var A=null;if(c!==void 0&&(A=""+c),i.key!==void 0&&(A=""+i.key),"key"in i){c={};for(var u in i)u!=="key"&&(c[u]=i[u])}else c=i;return i=c.ref,{$$typeof:t,type:r,key:A,ref:i!==void 0?i:null,props:c}}return Up.Fragment=s,Up.jsx=n,Up.jsxs=n,Up}var _w;function C3(){return _w||(_w=1,j0.exports=B3()),j0.exports}var e=C3(),w0={exports:{}},Lp={},S0={exports:{}},N0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function E3(){return Mw||(Mw=1,(function(t){function s(se,re){var te=se.length;se.push(re);e:for(;0<te;){var be=te-1>>>1,He=se[be];if(0<i(He,re))se[be]=re,se[te]=He,te=be;else break e}}function n(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var re=se[0],te=se.pop();if(te!==re){se[0]=te;e:for(var be=0,He=se.length,pe=He>>>1;be<pe;){var Y=2*(be+1)-1,me=se[Y],Se=Y+1,je=se[Se];if(0>i(me,te))Se<He&&0>i(je,me)?(se[be]=je,se[Se]=te,be=Se):(se[be]=me,se[Y]=te,be=Y);else if(Se<He&&0>i(je,te))se[be]=je,se[Se]=te,be=Se;else break e}}return re}function i(se,re){var te=se.sortIndex-re.sortIndex;return te!==0?te:se.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var A=Date,u=A.now();t.unstable_now=function(){return A.now()-u}}var d=[],h=[],o=1,m=null,y=3,p=!1,j=!1,b=!1,w=!1,B=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function k(se){for(var re=n(h);re!==null;){if(re.callback===null)r(h);else if(re.startTime<=se)r(h),re.sortIndex=re.expirationTime,s(d,re);else break;re=n(h)}}function K(se){if(b=!1,k(se),!j)if(n(d)!==null)j=!0,ee||(ee=!0,ie());else{var re=n(h);re!==null&&de(K,re.startTime-se)}}var ee=!1,q=-1,G=5,W=-1;function he(){return w?!0:!(t.unstable_now()-W<G)}function Z(){if(w=!1,ee){var se=t.unstable_now();W=se;var re=!0;try{e:{j=!1,b&&(b=!1,U(q),q=-1),p=!0;var te=y;try{t:{for(k(se),m=n(d);m!==null&&!(m.expirationTime>se&&he());){var be=m.callback;if(typeof be=="function"){m.callback=null,y=m.priorityLevel;var He=be(m.expirationTime<=se);if(se=t.unstable_now(),typeof He=="function"){m.callback=He,k(se),re=!0;break t}m===n(d)&&r(d),k(se)}else r(d);m=n(d)}if(m!==null)re=!0;else{var pe=n(h);pe!==null&&de(K,pe.startTime-se),re=!1}}break e}finally{m=null,y=te,p=!1}re=void 0}}finally{re?ie():ee=!1}}}var ie;if(typeof Q=="function")ie=function(){Q(Z)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ae=ce.port2;ce.port1.onmessage=Z,ie=function(){ae.postMessage(null)}}else ie=function(){B(Z,0)};function de(se,re){q=B(function(){se(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(se){switch(y){case 1:case 2:case 3:var re=3;break;default:re=y}var te=y;y=re;try{return se()}finally{y=te}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(se,re){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var te=y;y=se;try{return re()}finally{y=te}},t.unstable_scheduleCallback=function(se,re,te){var be=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?be+te:be):te=be,se){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=te+He,se={id:o++,callback:re,priorityLevel:se,startTime:te,expirationTime:He,sortIndex:-1},te>be?(se.sortIndex=te,s(h,se),n(d)===null&&se===n(h)&&(b?(U(q),q=-1):b=!0,de(K,te-be))):(se.sortIndex=He,s(d,se),j||p||(j=!0,ee||(ee=!0,ie()))),se},t.unstable_shouldYield=he,t.unstable_wrapCallback=function(se){var re=y;return function(){var te=y;y=re;try{return se.apply(this,arguments)}finally{y=te}}}})(N0)),N0}var Pw;function T3(){return Pw||(Pw=1,S0.exports=E3()),S0.exports}var B0={exports:{}},rr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function F3(){if(kw)return rr;kw=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),A=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),o=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function p(pe){return pe===null||typeof pe!="object"?null:(pe=y&&pe[y]||pe["@@iterator"],typeof pe=="function"?pe:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function B(pe,Y,me){this.props=pe,this.context=Y,this.refs=w,this.updater=me||j}B.prototype.isReactComponent={},B.prototype.setState=function(pe,Y){if(typeof pe!="object"&&typeof pe!="function"&&pe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,pe,Y,"setState")},B.prototype.forceUpdate=function(pe){this.updater.enqueueForceUpdate(this,pe,"forceUpdate")};function U(){}U.prototype=B.prototype;function Q(pe,Y,me){this.props=pe,this.context=Y,this.refs=w,this.updater=me||j}var k=Q.prototype=new U;k.constructor=Q,b(k,B.prototype),k.isPureReactComponent=!0;var K=Array.isArray;function ee(){}var q={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function W(pe,Y,me){var Se=me.ref;return{$$typeof:t,type:pe,key:Y,ref:Se!==void 0?Se:null,props:me}}function he(pe,Y){return W(pe.type,Y,pe.props)}function Z(pe){return typeof pe=="object"&&pe!==null&&pe.$$typeof===t}function ie(pe){var Y={"=":"=0",":":"=2"};return"$"+pe.replace(/[=:]/g,function(me){return Y[me]})}var ce=/\/+/g;function ae(pe,Y){return typeof pe=="object"&&pe!==null&&pe.key!=null?ie(""+pe.key):Y.toString(36)}function de(pe){switch(pe.status){case"fulfilled":return pe.value;case"rejected":throw pe.reason;default:switch(typeof pe.status=="string"?pe.then(ee,ee):(pe.status="pending",pe.then(function(Y){pe.status==="pending"&&(pe.status="fulfilled",pe.value=Y)},function(Y){pe.status==="pending"&&(pe.status="rejected",pe.reason=Y)})),pe.status){case"fulfilled":return pe.value;case"rejected":throw pe.reason}}throw pe}function se(pe,Y,me,Se,je){var Le=typeof pe;(Le==="undefined"||Le==="boolean")&&(pe=null);var ge=!1;if(pe===null)ge=!0;else switch(Le){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(pe.$$typeof){case t:case s:ge=!0;break;case o:return ge=pe._init,se(ge(pe._payload),Y,me,Se,je)}}if(ge)return je=je(pe),ge=Se===""?"."+ae(pe,0):Se,K(je)?(me="",ge!=null&&(me=ge.replace(ce,"$&/")+"/"),se(je,Y,me,"",function(Ne){return Ne})):je!=null&&(Z(je)&&(je=he(je,me+(je.key==null||pe&&pe.key===je.key?"":(""+je.key).replace(ce,"$&/")+"/")+ge)),Y.push(je)),1;ge=0;var ye=Se===""?".":Se+":";if(K(pe))for(var we=0;we<pe.length;we++)Se=pe[we],Le=ye+ae(Se,we),ge+=se(Se,Y,me,Le,je);else if(we=p(pe),typeof we=="function")for(pe=we.call(pe),we=0;!(Se=pe.next()).done;)Se=Se.value,Le=ye+ae(Se,we++),ge+=se(Se,Y,me,Le,je);else if(Le==="object"){if(typeof pe.then=="function")return se(de(pe),Y,me,Se,je);throw Y=String(pe),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(pe).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ge}function re(pe,Y,me){if(pe==null)return pe;var Se=[],je=0;return se(pe,Se,"","",function(Le){return Y.call(me,Le,je++)}),Se}function te(pe){if(pe._status===-1){var Y=pe._result;Y=Y(),Y.then(function(me){(pe._status===0||pe._status===-1)&&(pe._status=1,pe._result=me)},function(me){(pe._status===0||pe._status===-1)&&(pe._status=2,pe._result=me)}),pe._status===-1&&(pe._status=0,pe._result=Y)}if(pe._status===1)return pe._result.default;throw pe._result}var be=typeof reportError=="function"?reportError:function(pe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof pe=="object"&&pe!==null&&typeof pe.message=="string"?String(pe.message):String(pe),error:pe});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",pe);return}console.error(pe)},He={map:re,forEach:function(pe,Y,me){re(pe,function(){Y.apply(this,arguments)},me)},count:function(pe){var Y=0;return re(pe,function(){Y++}),Y},toArray:function(pe){return re(pe,function(Y){return Y})||[]},only:function(pe){if(!Z(pe))throw Error("React.Children.only expected to receive a single React element child.");return pe}};return rr.Activity=m,rr.Children=He,rr.Component=B,rr.Fragment=n,rr.Profiler=i,rr.PureComponent=Q,rr.StrictMode=r,rr.Suspense=d,rr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,rr.__COMPILER_RUNTIME={__proto__:null,c:function(pe){return q.H.useMemoCache(pe)}},rr.cache=function(pe){return function(){return pe.apply(null,arguments)}},rr.cacheSignal=function(){return null},rr.cloneElement=function(pe,Y,me){if(pe==null)throw Error("The argument must be a React element, but you passed "+pe+".");var Se=b({},pe.props),je=pe.key;if(Y!=null)for(Le in Y.key!==void 0&&(je=""+Y.key),Y)!G.call(Y,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&Y.ref===void 0||(Se[Le]=Y[Le]);var Le=arguments.length-2;if(Le===1)Se.children=me;else if(1<Le){for(var ge=Array(Le),ye=0;ye<Le;ye++)ge[ye]=arguments[ye+2];Se.children=ge}return W(pe.type,je,Se)},rr.createContext=function(pe){return pe={$$typeof:A,_currentValue:pe,_currentValue2:pe,_threadCount:0,Provider:null,Consumer:null},pe.Provider=pe,pe.Consumer={$$typeof:c,_context:pe},pe},rr.createElement=function(pe,Y,me){var Se,je={},Le=null;if(Y!=null)for(Se in Y.key!==void 0&&(Le=""+Y.key),Y)G.call(Y,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(je[Se]=Y[Se]);var ge=arguments.length-2;if(ge===1)je.children=me;else if(1<ge){for(var ye=Array(ge),we=0;we<ge;we++)ye[we]=arguments[we+2];je.children=ye}if(pe&&pe.defaultProps)for(Se in ge=pe.defaultProps,ge)je[Se]===void 0&&(je[Se]=ge[Se]);return W(pe,Le,je)},rr.createRef=function(){return{current:null}},rr.forwardRef=function(pe){return{$$typeof:u,render:pe}},rr.isValidElement=Z,rr.lazy=function(pe){return{$$typeof:o,_payload:{_status:-1,_result:pe},_init:te}},rr.memo=function(pe,Y){return{$$typeof:h,type:pe,compare:Y===void 0?null:Y}},rr.startTransition=function(pe){var Y=q.T,me={};q.T=me;try{var Se=pe(),je=q.S;je!==null&&je(me,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(ee,be)}catch(Le){be(Le)}finally{Y!==null&&me.types!==null&&(Y.types=me.types),q.T=Y}},rr.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},rr.use=function(pe){return q.H.use(pe)},rr.useActionState=function(pe,Y,me){return q.H.useActionState(pe,Y,me)},rr.useCallback=function(pe,Y){return q.H.useCallback(pe,Y)},rr.useContext=function(pe){return q.H.useContext(pe)},rr.useDebugValue=function(){},rr.useDeferredValue=function(pe,Y){return q.H.useDeferredValue(pe,Y)},rr.useEffect=function(pe,Y){return q.H.useEffect(pe,Y)},rr.useEffectEvent=function(pe){return q.H.useEffectEvent(pe)},rr.useId=function(){return q.H.useId()},rr.useImperativeHandle=function(pe,Y,me){return q.H.useImperativeHandle(pe,Y,me)},rr.useInsertionEffect=function(pe,Y){return q.H.useInsertionEffect(pe,Y)},rr.useLayoutEffect=function(pe,Y){return q.H.useLayoutEffect(pe,Y)},rr.useMemo=function(pe,Y){return q.H.useMemo(pe,Y)},rr.useOptimistic=function(pe,Y){return q.H.useOptimistic(pe,Y)},rr.useReducer=function(pe,Y,me){return q.H.useReducer(pe,Y,me)},rr.useRef=function(pe){return q.H.useRef(pe)},rr.useState=function(pe){return q.H.useState(pe)},rr.useSyncExternalStore=function(pe,Y,me){return q.H.useSyncExternalStore(pe,Y,me)},rr.useTransition=function(){return q.H.useTransition()},rr.version="19.2.0",rr}var Hw;function rx(){return Hw||(Hw=1,B0.exports=F3()),B0.exports}var C0={exports:{}},Po={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw;function I3(){if(zw)return Po;zw=1;var t=rx();function s(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)h+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(s(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function c(d,h,o){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:h,implementation:o}}var A=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Po.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Po.createPortal=function(d,h){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(s(299));return c(d,h,null,o)},Po.flushSync=function(d){var h=A.T,o=r.p;try{if(A.T=null,r.p=2,d)return d()}finally{A.T=h,r.p=o,r.d.f()}},Po.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},Po.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Po.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var o=h.as,m=u(o,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,p=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;o==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:p}):o==="script"&&r.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:p,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Po.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var o=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:o,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},Po.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var o=h.as,m=u(o,h.crossOrigin);r.d.L(d,o,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Po.preloadModule=function(d,h){if(typeof d=="string")if(h){var o=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:o,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},Po.requestFormReset=function(d){r.d.r(d)},Po.unstable_batchedUpdates=function(d,h){return d(h)},Po.useFormState=function(d,h,o){return A.H.useFormState(d,h,o)},Po.useFormStatus=function(){return A.H.useHostTransitionStatus()},Po.version="19.2.0",Po}var Kw;function sC(){if(Kw)return C0.exports;Kw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),C0.exports=I3(),C0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w;function R3(){if($w)return Lp;$w=1;var t=T3(),s=rx(),n=sC();function r(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function c(a){var l=a,f=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(f=l.return),a=l.return;while(a)}return l.tag===3?f:null}function A(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function u(a){if(a.tag===31){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function d(a){if(c(a)!==a)throw Error(r(188))}function h(a){var l=a.alternate;if(!l){if(l=c(a),l===null)throw Error(r(188));return l!==a?null:a}for(var f=a,g=l;;){var D=f.return;if(D===null)break;var H=D.alternate;if(H===null){if(g=D.return,g!==null){f=g;continue}break}if(D.child===H.child){for(H=D.child;H;){if(H===f)return d(D),a;if(H===g)return d(D),l;H=H.sibling}throw Error(r(188))}if(f.return!==g.return)f=D,g=H;else{for(var ue=!1,De=D.child;De;){if(De===f){ue=!0,f=D,g=H;break}if(De===g){ue=!0,g=D,f=H;break}De=De.sibling}if(!ue){for(De=H.child;De;){if(De===f){ue=!0,f=H,g=D;break}if(De===g){ue=!0,g=H,f=D;break}De=De.sibling}if(!ue)throw Error(r(189))}}if(f.alternate!==g)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?a:l}function o(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=o(a),l!==null)return l;a=a.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function ie(a){return a===null||typeof a!="object"?null:(a=Z&&a[Z]||a["@@iterator"],typeof a=="function"?a:null)}var ce=Symbol.for("react.client.reference");function ae(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ce?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case B:return"Profiler";case w:return"StrictMode";case K:return"Suspense";case ee:return"SuspenseList";case W:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case j:return"Portal";case Q:return a.displayName||"Context";case U:return(a._context.displayName||"Context")+".Consumer";case k:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case q:return l=a.displayName||null,l!==null?l:ae(a.type)||"Memo";case G:l=a._payload,a=a._init;try{return ae(a(l))}catch{}}return null}var de=Array.isArray,se=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},be=[],He=-1;function pe(a){return{current:a}}function Y(a){0>He||(a.current=be[He],be[He]=null,He--)}function me(a,l){He++,be[He]=a.current,a.current=l}var Se=pe(null),je=pe(null),Le=pe(null),ge=pe(null);function ye(a,l){switch(me(Le,l),me(je,a),me(Se,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?aw(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=aw(l),a=iw(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Y(Se),me(Se,a)}function we(){Y(Se),Y(je),Y(Le)}function Ne(a){a.memoizedState!==null&&me(ge,a);var l=Se.current,f=iw(l,a.type);l!==f&&(me(je,a),me(Se,f))}function ke(a){je.current===a&&(Y(Se),Y(je)),ge.current===a&&(Y(ge),Fp._currentValue=te)}var Be,Ae;function Qe(a){if(Be===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Be=l&&l[1]||"",Ae=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Be+a+Ae}var le=!1;function ct(a,l){if(!a||le)return"";le=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var ps=function(){throw Error()};if(Object.defineProperty(ps.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ps,[])}catch(Xt){var $t=Xt}Reflect.construct(a,[],ps)}else{try{ps.call()}catch(Xt){$t=Xt}a.call(ps.prototype)}}else{try{throw Error()}catch(Xt){$t=Xt}(ps=a())&&typeof ps.catch=="function"&&ps.catch(function(){})}}catch(Xt){if(Xt&&$t&&typeof Xt.stack=="string")return[Xt.stack,$t.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=g.DetermineComponentFrameRoot(),ue=H[0],De=H[1];if(ue&&De){var pt=ue.split(`
`),zt=De.split(`
`);for(D=g=0;g<pt.length&&!pt[g].includes("DetermineComponentFrameRoot");)g++;for(;D<zt.length&&!zt[D].includes("DetermineComponentFrameRoot");)D++;if(g===pt.length||D===zt.length)for(g=pt.length-1,D=zt.length-1;1<=g&&0<=D&&pt[g]!==zt[D];)D--;for(;1<=g&&0<=D;g--,D--)if(pt[g]!==zt[D]){if(g!==1||D!==1)do if(g--,D--,0>D||pt[g]!==zt[D]){var os=`
`+pt[g].replace(" at new "," at ");return a.displayName&&os.includes("<anonymous>")&&(os=os.replace("<anonymous>",a.displayName)),os}while(1<=g&&0<=D);break}}}finally{le=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?Qe(f):""}function rt(a,l){switch(a.tag){case 26:case 27:case 5:return Qe(a.type);case 16:return Qe("Lazy");case 13:return a.child!==l&&l!==null?Qe("Suspense Fallback"):Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 15:return ct(a.type,!1);case 11:return ct(a.type.render,!1);case 1:return ct(a.type,!0);case 31:return Qe("Activity");default:return""}}function ht(a){try{var l="",f=null;do l+=rt(a,f),f=a,a=a.return;while(a);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var ft=Object.prototype.hasOwnProperty,Jt=t.unstable_scheduleCallback,gt=t.unstable_cancelCallback,tt=t.unstable_shouldYield,Lt=t.unstable_requestPaint,qt=t.unstable_now,Fs=t.unstable_getCurrentPriorityLevel,xs=t.unstable_ImmediatePriority,hs=t.unstable_UserBlockingPriority,it=t.unstable_NormalPriority,Pe=t.unstable_LowPriority,dt=t.unstable_IdlePriority,ze=t.log,Tt=t.unstable_setDisableYieldValue,Je=null,vt=null;function $e(a){if(typeof ze=="function"&&Tt(a),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(Je,a)}catch{}}var St=Math.clz32?Math.clz32:bt,Rt=Math.log,Zt=Math.LN2;function bt(a){return a>>>=0,a===0?32:31-(Rt(a)/Zt|0)|0}var Vt=256,vs=262144,us=4194304;function jt(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function kt(a,l,f){var g=a.pendingLanes;if(g===0)return 0;var D=0,H=a.suspendedLanes,ue=a.pingedLanes;a=a.warmLanes;var De=g&134217727;return De!==0?(g=De&~H,g!==0?D=jt(g):(ue&=De,ue!==0?D=jt(ue):f||(f=De&~a,f!==0&&(D=jt(f))))):(De=g&~H,De!==0?D=jt(De):ue!==0?D=jt(ue):f||(f=g&~a,f!==0&&(D=jt(f)))),D===0?0:l!==0&&l!==D&&(l&H)===0&&(H=D&-D,f=l&-l,H>=f||H===32&&(f&4194048)!==0)?l:D}function Ft(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function is(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ss(){var a=us;return us<<=1,(us&62914560)===0&&(us=4194304),a}function nn(a){for(var l=[],f=0;31>f;f++)l.push(a);return l}function es(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function zs(a,l,f,g,D,H){var ue=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var De=a.entanglements,pt=a.expirationTimes,zt=a.hiddenUpdates;for(f=ue&~f;0<f;){var os=31-St(f),ps=1<<os;De[os]=0,pt[os]=-1;var $t=zt[os];if($t!==null)for(zt[os]=null,os=0;os<$t.length;os++){var Xt=$t[os];Xt!==null&&(Xt.lane&=-536870913)}f&=~ps}g!==0&&Us(a,g,0),H!==0&&D===0&&a.tag!==0&&(a.suspendedLanes|=H&~(ue&~l))}function Us(a,l,f){a.pendingLanes|=l,a.suspendedLanes&=~l;var g=31-St(l);a.entangledLanes|=l,a.entanglements[g]=a.entanglements[g]|1073741824|f&261930}function Vs(a,l){var f=a.entangledLanes|=l;for(a=a.entanglements;f;){var g=31-St(f),D=1<<g;D&l|a[g]&l&&(a[g]|=l),f&=~D}}function Ls(a,l){var f=l&-l;return f=(f&42)!==0?1:js(f),(f&(a.suspendedLanes|l))!==0?0:f}function js(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Os(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Ds(){var a=re.p;return a!==0?a:(a=window.event,a===void 0?32:Tw(a.type))}function ut(a,l){var f=re.p;try{return re.p=a,l()}finally{re.p=f}}var Pt=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Pt,ws="__reactProps$"+Pt,Ts="__reactContainer$"+Pt,ys="__reactEvents$"+Pt,Qs="__reactListeners$"+Pt,Gt="__reactHandles$"+Pt,Ys="__reactResources$"+Pt,Cn="__reactMarker$"+Pt;function na(a){delete a[Kt],delete a[ws],delete a[ys],delete a[Qs],delete a[Gt]}function tr(a){var l=a[Kt];if(l)return l;for(var f=a.parentNode;f;){if(l=f[Ts]||f[Kt]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(a=hw(a);a!==null;){if(f=a[Kt])return f;a=hw(a)}return l}a=f,f=a.parentNode}return null}function Mt(a){if(a=a[Kt]||a[Ts]){var l=a.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return a}return null}function bn(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(r(33))}function Tr(a){var l=a[Ys];return l||(l=a[Ys]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function lr(a){a[Cn]=!0}var Bs=new Set,Js={};function Pn(a,l){kr(a,l),kr(a+"Capture",l)}function kr(a,l){for(Js[a]=l,a=0;a<l.length;a++)Bs.add(l[a])}var jr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ur={},hr={};function qs(a){return ft.call(hr,a)?!0:ft.call(Ur,a)?!1:jr.test(a)?hr[a]=!0:(Ur[a]=!0,!1)}function tn(a,l,f){if(qs(l))if(f===null)a.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+f)}}function Is(a,l,f){if(f===null)a.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+f)}}function dn(a,l,f,g){if(g===null)a.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(l,f,""+g)}}function Hs(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function wr(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function at(a,l,f){var g=Object.getOwnPropertyDescriptor(a.constructor.prototype,l);if(!a.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var D=g.get,H=g.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return D.call(this)},set:function(ue){f=""+ue,H.call(this,ue)}}),Object.defineProperty(a,l,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(ue){f=""+ue},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function ms(a){if(!a._valueTracker){var l=wr(a)?"checked":"value";a._valueTracker=at(a,l,""+a[l])}}function ds(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var f=l.getValue(),g="";return a&&(g=wr(a)?a.checked?"true":"false":a.value),a=g,a!==f?(l.setValue(a),!0):!1}function Nn(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Yn=/[\n"\\]/g;function sr(a){return a.replace(Yn,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ha(a,l,f,g,D,H,ue,De){a.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?a.type=ue:a.removeAttribute("type"),l!=null?ue==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Hs(l)):a.value!==""+Hs(l)&&(a.value=""+Hs(l)):ue!=="submit"&&ue!=="reset"||a.removeAttribute("value"),l!=null?Na(a,ue,Hs(l)):f!=null?Na(a,ue,Hs(f)):g!=null&&a.removeAttribute("value"),D==null&&H!=null&&(a.defaultChecked=!!H),D!=null&&(a.checked=D&&typeof D!="function"&&typeof D!="symbol"),De!=null&&typeof De!="function"&&typeof De!="symbol"&&typeof De!="boolean"?a.name=""+Hs(De):a.removeAttribute("name")}function Ma(a,l,f,g,D,H,ue,De){if(H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(a.type=H),l!=null||f!=null){if(!(H!=="submit"&&H!=="reset"||l!=null)){ms(a);return}f=f!=null?""+Hs(f):"",l=l!=null?""+Hs(l):f,De||l===a.value||(a.value=l),a.defaultValue=l}g=g??D,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=De?a.checked:!!g,a.defaultChecked=!!g,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(a.name=ue),ms(a)}function Na(a,l,f){l==="number"&&Nn(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function cr(a,l,f,g){if(a=a.options,l){l={};for(var D=0;D<f.length;D++)l["$"+f[D]]=!0;for(f=0;f<a.length;f++)D=l.hasOwnProperty("$"+a[f].value),a[f].selected!==D&&(a[f].selected=D),D&&g&&(a[f].defaultSelected=!0)}else{for(f=""+Hs(f),l=null,D=0;D<a.length;D++){if(a[D].value===f){a[D].selected=!0,g&&(a[D].defaultSelected=!0);return}l!==null||a[D].disabled||(l=a[D])}l!==null&&(l.selected=!0)}}function Ka(a,l,f){if(l!=null&&(l=""+Hs(l),l!==a.value&&(a.value=l),f==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=f!=null?""+Hs(f):""}function pa(a,l,f,g){if(l==null){if(g!=null){if(f!=null)throw Error(r(92));if(de(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),l=f}f=Hs(l),a.defaultValue=f,g=a.textContent,g===f&&g!==""&&g!==null&&(a.value=g),ms(a)}function er(a,l){if(l){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=l;return}}a.textContent=l}var oa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pi(a,l,f){var g=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":g?a.setProperty(l,f):typeof f!="number"||f===0||oa.has(l)?l==="float"?a.cssFloat=f:a[l]=(""+f).trim():a[l]=f+"px"}function $a(a,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(a=a.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var D in l)g=l[D],l.hasOwnProperty(D)&&f[D]!==g&&pi(a,D,g)}else for(var H in l)l.hasOwnProperty(H)&&pi(a,H,l[H])}function Va(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ti=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xe=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _e(a){return xe.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function nt(){}var V=null;function Te(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ye=null,Oe=null;function yt(a){var l=Mt(a);if(l&&(a=l.stateNode)){var f=a[ws]||null;e:switch(a=l.stateNode,l.type){case"input":if(ha(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+sr(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var g=f[l];if(g!==a&&g.form===a.form){var D=g[ws]||null;if(!D)throw Error(r(90));ha(g,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(l=0;l<f.length;l++)g=f[l],g.form===a.form&&ds(g)}break e;case"textarea":Ka(a,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&cr(a,!!f.multiple,l,!1)}}}var Qt=!1;function ln(a,l,f){if(Qt)return a(l,f);Qt=!0;try{var g=a(l);return g}finally{if(Qt=!1,(Ye!==null||Oe!==null)&&(so(),Ye&&(l=Ye,a=Oe,Oe=Ye=null,yt(l),a)))for(l=0;l<a.length;l++)yt(a[l])}}function Ln(a,l){var f=a.stateNode;if(f===null)return null;var g=f[ws]||null;if(g===null)return null;f=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if(bs)try{var Dn={};Object.defineProperty(Dn,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",Dn,Dn),window.removeEventListener("test",Dn,Dn)}catch{Ps=!1}var Hn=null,qn=null,Yr=null;function v(){if(Yr)return Yr;var a,l=qn,f=l.length,g,D="value"in Hn?Hn.value:Hn.textContent,H=D.length;for(a=0;a<f&&l[a]===D[a];a++);var ue=f-a;for(g=1;g<=ue&&l[f-g]===D[H-g];g++);return Yr=D.slice(a,1<g?1-g:void 0)}function N(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function x(){return!0}function I(){return!1}function F(a){function l(f,g,D,H,ue){this._reactName=f,this._targetInst=D,this.type=g,this.nativeEvent=H,this.target=ue,this.currentTarget=null;for(var De in a)a.hasOwnProperty(De)&&(f=a[De],this[De]=f?f(H):H[De]);return this.isDefaultPrevented=(H.defaultPrevented!=null?H.defaultPrevented:H.returnValue===!1)?x:I,this.isPropagationStopped=I,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=x)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=x)},persist:function(){},isPersistent:x}),l}var _={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L=F(_),P=m({},_,{view:0,detail:0}),z=F(P),ne,Ie,st,ot=m({},P,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qn,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==st&&(st&&a.type==="mousemove"?(ne=a.screenX-st.screenX,Ie=a.screenY-st.screenY):Ie=ne=0,st=a),ne)},movementY:function(a){return"movementY"in a?a.movementY:Ie}}),Dt=F(ot),rs=m({},ot,{dataTransfer:0}),cs=F(rs),Ns=m({},P,{relatedTarget:0}),Zs=F(Ns),Rn=m({},_,{animationName:0,elapsedTime:0,pseudoElement:0}),$=F(Rn),ve=m({},_,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Ve=F(ve),At=m({},_,{data:0}),Bt=F(At),as={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vn(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=cn[a])?!!l[a]:!1}function Qn(){return vn}var Xn=m({},P,{key:function(a){if(a.key){var l=as[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=N(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?gs[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qn,charCode:function(a){return a.type==="keypress"?N(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?N(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Fr=F(Xn),Fa=m({},ot,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qa=F(Fa),Xr=m({},P,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qn}),mi=F(Xr),si=m({},_,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ci=F(si),Rl=m({},ot,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Yo=F(Rl),Ol=m({},_,{newState:0,oldState:0}),Hd=F(Ol),ad=[9,13,27,32],wo=bs&&"CompositionEvent"in window,So=null;bs&&"documentMode"in document&&(So=document.documentMode);var Zl=bs&&"TextEvent"in window&&!So,Ao=bs&&(!wo||So&&8<So&&11>=So),Ia=" ",yr=!1;function ec(a,l){switch(a){case"keyup":return ad.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tc(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Xo=!1;function ni(a,l){switch(a){case"compositionend":return tc(l);case"keypress":return l.which!==32?null:(yr=!0,Ia);case"textInput":return a=l.data,a===Ia&&yr?null:a;default:return null}}function bi(a,l){if(Xo)return a==="compositionend"||!wo&&ec(a,l)?(a=v(),Yr=qn=Hn=null,Xo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ao&&l.locale!=="ko"?null:l.data;default:return null}}var id={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function No(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!id[a.type]:l==="textarea"}function Lr(a,l,f,g){Ye?Oe?Oe.push(g):Oe=[g]:Ye=g,l=gg(l,"onChange"),0<l.length&&(f=new L("onChange","change",null,f,g),a.push({event:f,listeners:l}))}var Bo=null,ma=null;function Ec(a){Zj(a,0)}function ji(a){var l=bn(a);if(ds(l))return a}function Co(a,l){if(a==="change")return l}var ir=!1;if(bs){var Mi;if(bs){var Jo="oninput"in document;if(!Jo){var Zo=document.createElement("div");Zo.setAttribute("oninput","return;"),Jo=typeof Zo.oninput=="function"}Mi=Jo}else Mi=!1;ir=Mi&&(!document.documentMode||9<document.documentMode)}function ll(){Bo&&(Bo.detachEvent("onpropertychange",Ul),ma=Bo=null)}function Ul(a){if(a.propertyName==="value"&&ji(ma)){var l=[];Lr(l,ma,a,Te(a)),ln(Ec,l)}}function Tc(a,l,f){a==="focusin"?(ll(),Bo=l,ma=f,Bo.attachEvent("onpropertychange",Ul)):a==="focusout"&&ll()}function Pa(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return ji(ma)}function Yi(a,l){if(a==="click")return ji(l)}function Ei(a,l){if(a==="input"||a==="change")return ji(l)}function Ti(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Sr=typeof Object.is=="function"?Object.is:Ti;function Pi(a,l){if(Sr(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var f=Object.keys(a),g=Object.keys(l);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var D=f[g];if(!ft.call(l,D)||!Sr(a[D],l[D]))return!1}return!0}function Fc(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ic(a,l){var f=Fc(a);a=0;for(var g;f;){if(f.nodeType===3){if(g=a+f.textContent.length,a<=l&&g>=l)return{node:f,offset:l-a};a=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Fc(f)}}function el(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?el(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function cl(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=Nn(a.document);l instanceof a.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)a=l.contentWindow;else break;l=Nn(a.document)}return l}function dl(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var tl=bs&&"documentMode"in document&&11>=document.documentMode,Ga=null,Ll=null,ki=null,Xi=!1;function Dr(a,l,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Xi||Ga==null||Ga!==Nn(g)||(g=Ga,"selectionStart"in g&&dl(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ki&&Pi(ki,g)||(ki=g,g=gg(Ll,"onSelect"),0<g.length&&(l=new L("onSelect","select",null,l,f),a.push({event:l,listeners:g}),l.target=Ga)))}function Ir(a,l){var f={};return f[a.toLowerCase()]=l.toLowerCase(),f["Webkit"+a]="webkit"+l,f["Moz"+a]="moz"+l,f}var fa={animationend:Ir("Animation","AnimationEnd"),animationiteration:Ir("Animation","AnimationIteration"),animationstart:Ir("Animation","AnimationStart"),transitionrun:Ir("Transition","TransitionRun"),transitionstart:Ir("Transition","TransitionStart"),transitioncancel:Ir("Transition","TransitionCancel"),transitionend:Ir("Transition","TransitionEnd")},Hr={},sl={};bs&&(sl=document.createElement("div").style,"AnimationEvent"in window||(delete fa.animationend.animation,delete fa.animationiteration.animation,delete fa.animationstart.animation),"TransitionEvent"in window||delete fa.transitionend.transition);function nl(a){if(Hr[a])return Hr[a];if(!fa[a])return a;var l=fa[a],f;for(f in l)if(l.hasOwnProperty(f)&&f in sl)return Hr[a]=l[f];return a}var Rc=nl("animationend"),sc=nl("animationiteration"),Su=nl("animationstart"),Nu=nl("transitionrun"),Bu=nl("transitionstart"),Cu=nl("transitioncancel"),bA=nl("transitionend"),jA=new Map,nc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nc.push("scrollEnd");function uo(a,l){jA.set(a,l),Pn(l,[a])}var od=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},ho=[],Al=0,wA=0;function zd(){for(var a=Al,l=wA=Al=0;l<a;){var f=ho[l];ho[l++]=null;var g=ho[l];ho[l++]=null;var D=ho[l];ho[l++]=null;var H=ho[l];if(ho[l++]=null,g!==null&&D!==null){var ue=g.pending;ue===null?D.next=D:(D.next=ue.next,ue.next=D),g.pending=D}H!==0&&Kd(f,D,H)}}function Oc(a,l,f,g){ho[Al++]=a,ho[Al++]=l,ho[Al++]=f,ho[Al++]=g,wA|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function SA(a,l,f,g){return Oc(a,l,f,g),Hi(a)}function ul(a,l){return Oc(a,null,null,l),Hi(a)}function Kd(a,l,f){a.lanes|=f;var g=a.alternate;g!==null&&(g.lanes|=f);for(var D=!1,H=a.return;H!==null;)H.childLanes|=f,g=H.alternate,g!==null&&(g.childLanes|=f),H.tag===22&&(a=H.stateNode,a===null||a._visibility&1||(D=!0)),a=H,H=H.return;return a.tag===3?(H=a.stateNode,D&&l!==null&&(D=31-St(f),a=H.hiddenUpdates,g=a[D],g===null?a[D]=[l]:g.push(l),l.lane=f|536870912),H):null}function Hi(a){if(50<pr)throw pr=0,Er=null,Error(r(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var Fi={};function NA(a,l,f,g){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(a,l,f,g){return new NA(a,l,f,g)}function Dl(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Eo(a,l){var f=a.alternate;return f===null?(f=zi(a.tag,l,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=l,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,l=a.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function $d(a,l){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,l=f.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function Ql(a,l,f,g,D,H){var ue=0;if(g=a,typeof a=="function")Dl(a)&&(ue=1);else if(typeof a=="string")ue=u3(a,f,Se.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case W:return a=zi(31,f,l,D),a.elementType=W,a.lanes=H,a;case b:return rc(f.children,D,H,l);case w:ue=8,D|=24;break;case B:return a=zi(12,f,l,D|2),a.elementType=B,a.lanes=H,a;case K:return a=zi(13,f,l,D),a.elementType=K,a.lanes=H,a;case ee:return a=zi(19,f,l,D),a.elementType=ee,a.lanes=H,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Q:ue=10;break e;case U:ue=9;break e;case k:ue=11;break e;case q:ue=14;break e;case G:ue=16,g=null;break e}ue=29,f=Error(r(130,a===null?"null":typeof a,"")),g=null}return l=zi(ue,f,l,D),l.elementType=a,l.type=g,l.lanes=H,l}function rc(a,l,f,g){return a=zi(7,a,g,l),a.lanes=f,a}function Vd(a,l,f){return a=zi(6,a,null,l),a.lanes=f,a}function BA(a){var l=zi(18,null,null,0);return l.stateNode=a,l}function ld(a,l,f){return l=zi(4,a.children!==null?a.children:[],a.key,l),l.lanes=f,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var Uc=new WeakMap;function To(a,l){if(typeof a=="object"&&a!==null){var f=Uc.get(a);return f!==void 0?f:(l={value:a,source:l,stack:ht(l)},Uc.set(a,l),l)}return{value:a,source:l,stack:ht(l)}}var cd=[],Lc=0,CA=null,ac=0,Fo=[],Io=0,ic=null,Ro=1,Ji="";function fo(a,l){cd[Lc++]=ac,cd[Lc++]=CA,CA=a,ac=l}function Ih(a,l,f){Fo[Io++]=Ro,Fo[Io++]=Ji,Fo[Io++]=ic,ic=a;var g=Ro;a=Ji;var D=32-St(g)-1;g&=~(1<<D),f+=1;var H=32-St(l)+D;if(30<H){var ue=D-D%5;H=(g&(1<<ue)-1).toString(32),g>>=ue,D-=ue,Ro=1<<32-St(l)+D|f<<D|g,Ji=H+a}else Ro=1<<H|f<<D|g,Ji=a}function Eu(a){a.return!==null&&(fo(a,1),Ih(a,1,0))}function EA(a){for(;a===CA;)CA=cd[--Lc],cd[Lc]=null,ac=cd[--Lc],cd[Lc]=null;for(;a===ic;)ic=Fo[--Io],Fo[Io]=null,Ji=Fo[--Io],Fo[Io]=null,Ro=Fo[--Io],Fo[Io]=null}function Rh(a,l){Fo[Io++]=Ro,Fo[Io++]=Ji,Fo[Io++]=ic,Ro=l.id,Ji=l.overflow,ic=a}var Ii=null,ga=null,xr=!1,Zi=null,ka=!1,ao=Error(r(519));function oc(a){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l(To(l,a)),ao}function Tu(a){var l=a.stateNode,f=a.type,g=a.memoizedProps;switch(l[Kt]=a,l[ws]=g,f){case"dialog":Or("cancel",l),Or("close",l);break;case"iframe":case"object":case"embed":Or("load",l);break;case"video":case"audio":for(f=0;f<Np.length;f++)Or(Np[f],l);break;case"source":Or("error",l);break;case"img":case"image":case"link":Or("error",l),Or("load",l);break;case"details":Or("toggle",l);break;case"input":Or("invalid",l),Ma(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Or("invalid",l);break;case"textarea":Or("invalid",l),pa(l,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||g.suppressHydrationWarning===!0||nw(l.textContent,f)?(g.popover!=null&&(Or("beforetoggle",l),Or("toggle",l)),g.onScroll!=null&&Or("scroll",l),g.onScrollEnd!=null&&Or("scrollend",l),g.onClick!=null&&(l.onclick=nt),l=!0):l=!1,l||oc(a,!0)}function hl(a){for(Ii=a.return;Ii;)switch(Ii.tag){case 5:case 31:case 13:ka=!1;return;case 27:case 3:ka=!0;return;default:Ii=Ii.return}}function Ri(a){if(a!==Ii)return!1;if(!xr)return hl(a),xr=!0,!1;var l=a.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||o0(a.type,a.memoizedProps)),f=!f),f&&ga&&oc(a),hl(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));ga=uw(a)}else if(l===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));ga=uw(a)}else l===27?(l=ga,YA(a.type)?(a=u0,u0=null,ga=a):ga=l):ga=Ii?gc(a.stateNode.nextSibling):null;return!0}function Dc(){ga=Ii=null,xr=!1}function qd(){var a=Zi;return a!==null&&(mt===null?mt=a:mt.push.apply(mt,a),Zi=null),a}function _l(a){Zi===null?Zi=[a]:Zi.push(a)}var TA=pe(null),lc=null,fl=null;function cc(a,l,f){me(TA,l._currentValue),l._currentValue=f}function Oo(a){a._currentValue=TA.current,Y(TA)}function dd(a,l,f){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===f)break;a=a.return}}function pl(a,l,f,g){var D=a.child;for(D!==null&&(D.return=a);D!==null;){var H=D.dependencies;if(H!==null){var ue=D.child;H=H.firstContext;e:for(;H!==null;){var De=H;H=D;for(var pt=0;pt<l.length;pt++)if(De.context===l[pt]){H.lanes|=f,De=H.alternate,De!==null&&(De.lanes|=f),dd(H.return,f,a),g||(ue=null);break e}H=De.next}}else if(D.tag===18){if(ue=D.return,ue===null)throw Error(r(341));ue.lanes|=f,H=ue.alternate,H!==null&&(H.lanes|=f),dd(ue,f,a),ue=null}else ue=D.child;if(ue!==null)ue.return=D;else for(ue=D;ue!==null;){if(ue===a){ue=null;break}if(D=ue.sibling,D!==null){D.return=ue.return,ue=D;break}ue=ue.return}D=ue}}function dc(a,l,f,g){a=null;for(var D=l,H=!1;D!==null;){if(!H){if((D.flags&524288)!==0)H=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var ue=D.alternate;if(ue===null)throw Error(r(387));if(ue=ue.memoizedProps,ue!==null){var De=D.type;Sr(D.pendingProps.value,ue.value)||(a!==null?a.push(De):a=[De])}}else if(D===ge.current){if(ue=D.alternate,ue===null)throw Error(r(387));ue.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(a!==null?a.push(Fp):a=[Fp])}D=D.return}a!==null&&pl(l,a,f,g),l.flags|=262144}function FA(a){for(a=a.firstContext;a!==null;){if(!Sr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ac(a){lc=a,fl=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Oi(a){return Oh(lc,a)}function IA(a,l){return lc===null&&Ac(a),Oh(a,l)}function Oh(a,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},fl===null){if(a===null)throw Error(r(308));fl=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else fl=fl.next=l;return f}var Vf=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(f,g){a.push(g)}};this.abort=function(){l.aborted=!0,a.forEach(function(f){return f()})}},qf=t.unstable_scheduleCallback,Gf=t.unstable_NormalPriority,Wa={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ad(){return{controller:new Vf,data:new Map,refCount:0}}function Gd(a){a.refCount--,a.refCount===0&&qf(Gf,function(){a.controller.abort()})}var ud=null,RA=0,E=0,M=null;function X(a,l){if(ud===null){var f=ud=[];RA=0,E=Jx(),M={status:"pending",value:void 0,then:function(g){f.push(g)}}}return RA++,l.then(oe,oe),l}function oe(){if(--RA===0&&ud!==null){M!==null&&(M.status="fulfilled");var a=ud;ud=null,E=0,M=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function Ee(a,l){var f=[],g={status:"pending",value:null,reason:null,then:function(D){f.push(D)}};return a.then(function(){g.status="fulfilled",g.value=l;for(var D=0;D<f.length;D++)(0,f[D])(l)},function(D){for(g.status="rejected",g.reason=D,D=0;D<f.length;D++)(0,f[D])(void 0)}),g}var Re=se.S;se.S=function(a,l){ns=qt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&X(a,l),Re!==null&&Re(a,l)};var Ue=pe(null);function Me(){var a=Ue.current;return a!==null?a:va.pooledCache}function Ke(a,l){l===null?me(Ue,Ue.current):me(Ue,l.pool)}function et(){var a=Me();return a===null?null:{parent:Wa._currentValue,pool:a}}var xt=Error(r(460)),_t=Error(r(474)),Ze=Error(r(542)),Nt={then:function(){}};function Ct(a){return a=a.status,a==="fulfilled"||a==="rejected"}function ss(a,l,f){switch(f=a[f],f===void 0?a.push(l):f!==l&&(l.then(nt,nt),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Cs(a),a;default:if(typeof l.status=="string")l.then(nt,nt);else{if(a=va,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=l,a.status="pending",a.then(function(g){if(l.status==="pending"){var D=l;D.status="fulfilled",D.value=g}},function(g){if(l.status==="pending"){var D=l;D.status="rejected",D.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Cs(a),a}throw ts=l,xt}}function Ut(a){try{var l=a._init;return l(a._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(ts=f,xt):f}}var ts=null;function ls(){if(ts===null)throw Error(r(459));var a=ts;return ts=null,a}function Cs(a){if(a===xt||a===Ze)throw Error(r(483))}var fs=null,An=0;function sn(a){var l=An;return An+=1,fs===null&&(fs=[]),ss(fs,a,l)}function zn(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function on(a,l){throw l.$$typeof===y?Error(r(525)):(a=Object.prototype.toString.call(l),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function fr(a){function l(It,wt){if(a){var Ht=It.deletions;Ht===null?(It.deletions=[wt],It.flags|=16):Ht.push(wt)}}function f(It,wt){if(!a)return null;for(;wt!==null;)l(It,wt),wt=wt.sibling;return null}function g(It){for(var wt=new Map;It!==null;)It.key!==null?wt.set(It.key,It):wt.set(It.index,It),It=It.sibling;return wt}function D(It,wt){return It=Eo(It,wt),It.index=0,It.sibling=null,It}function H(It,wt,Ht){return It.index=Ht,a?(Ht=It.alternate,Ht!==null?(Ht=Ht.index,Ht<wt?(It.flags|=67108866,wt):Ht):(It.flags|=67108866,wt)):(It.flags|=1048576,wt)}function ue(It){return a&&It.alternate===null&&(It.flags|=67108866),It}function De(It,wt,Ht,As){return wt===null||wt.tag!==6?(wt=Vd(Ht,It.mode,As),wt.return=It,wt):(wt=D(wt,Ht),wt.return=It,wt)}function pt(It,wt,Ht,As){var On=Ht.type;return On===b?os(It,wt,Ht.props.children,As,Ht.key):wt!==null&&(wt.elementType===On||typeof On=="object"&&On!==null&&On.$$typeof===G&&Ut(On)===wt.type)?(wt=D(wt,Ht.props),zn(wt,Ht),wt.return=It,wt):(wt=Ql(Ht.type,Ht.key,Ht.props,null,It.mode,As),zn(wt,Ht),wt.return=It,wt)}function zt(It,wt,Ht,As){return wt===null||wt.tag!==4||wt.stateNode.containerInfo!==Ht.containerInfo||wt.stateNode.implementation!==Ht.implementation?(wt=ld(Ht,It.mode,As),wt.return=It,wt):(wt=D(wt,Ht.children||[]),wt.return=It,wt)}function os(It,wt,Ht,As,On){return wt===null||wt.tag!==7?(wt=rc(Ht,It.mode,As,On),wt.return=It,wt):(wt=D(wt,Ht),wt.return=It,wt)}function ps(It,wt,Ht){if(typeof wt=="string"&&wt!==""||typeof wt=="number"||typeof wt=="bigint")return wt=Vd(""+wt,It.mode,Ht),wt.return=It,wt;if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case p:return Ht=Ql(wt.type,wt.key,wt.props,null,It.mode,Ht),zn(Ht,wt),Ht.return=It,Ht;case j:return wt=ld(wt,It.mode,Ht),wt.return=It,wt;case G:return wt=Ut(wt),ps(It,wt,Ht)}if(de(wt)||ie(wt))return wt=rc(wt,It.mode,Ht,null),wt.return=It,wt;if(typeof wt.then=="function")return ps(It,sn(wt),Ht);if(wt.$$typeof===Q)return ps(It,IA(It,wt),Ht);on(It,wt)}return null}function $t(It,wt,Ht,As){var On=wt!==null?wt.key:null;if(typeof Ht=="string"&&Ht!==""||typeof Ht=="number"||typeof Ht=="bigint")return On!==null?null:De(It,wt,""+Ht,As);if(typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case p:return Ht.key===On?pt(It,wt,Ht,As):null;case j:return Ht.key===On?zt(It,wt,Ht,As):null;case G:return Ht=Ut(Ht),$t(It,wt,Ht,As)}if(de(Ht)||ie(Ht))return On!==null?null:os(It,wt,Ht,As,null);if(typeof Ht.then=="function")return $t(It,wt,sn(Ht),As);if(Ht.$$typeof===Q)return $t(It,wt,IA(It,Ht),As);on(It,Ht)}return null}function Xt(It,wt,Ht,As,On){if(typeof As=="string"&&As!==""||typeof As=="number"||typeof As=="bigint")return It=It.get(Ht)||null,De(wt,It,""+As,On);if(typeof As=="object"&&As!==null){switch(As.$$typeof){case p:return It=It.get(As.key===null?Ht:As.key)||null,pt(wt,It,As,On);case j:return It=It.get(As.key===null?Ht:As.key)||null,zt(wt,It,As,On);case G:return As=Ut(As),Xt(It,wt,Ht,As,On)}if(de(As)||ie(As))return It=It.get(Ht)||null,os(wt,It,As,On,null);if(typeof As.then=="function")return Xt(It,wt,Ht,sn(As),On);if(As.$$typeof===Q)return Xt(It,wt,Ht,IA(wt,As),On);on(wt,As)}return null}function fn(It,wt,Ht,As){for(var On=null,ra=null,wn=wt,dr=wt=0,_r=null;wn!==null&&dr<Ht.length;dr++){wn.index>dr?(_r=wn,wn=null):_r=wn.sibling;var aa=$t(It,wn,Ht[dr],As);if(aa===null){wn===null&&(wn=_r);break}a&&wn&&aa.alternate===null&&l(It,wn),wt=H(aa,wt,dr),ra===null?On=aa:ra.sibling=aa,ra=aa,wn=_r}if(dr===Ht.length)return f(It,wn),xr&&fo(It,dr),On;if(wn===null){for(;dr<Ht.length;dr++)wn=ps(It,Ht[dr],As),wn!==null&&(wt=H(wn,wt,dr),ra===null?On=wn:ra.sibling=wn,ra=wn);return xr&&fo(It,dr),On}for(wn=g(wn);dr<Ht.length;dr++)_r=Xt(wn,It,dr,Ht[dr],As),_r!==null&&(a&&_r.alternate!==null&&wn.delete(_r.key===null?dr:_r.key),wt=H(_r,wt,dr),ra===null?On=_r:ra.sibling=_r,ra=_r);return a&&wn.forEach(function(tu){return l(It,tu)}),xr&&fo(It,dr),On}function Mn(It,wt,Ht,As){if(Ht==null)throw Error(r(151));for(var On=null,ra=null,wn=wt,dr=wt=0,_r=null,aa=Ht.next();wn!==null&&!aa.done;dr++,aa=Ht.next()){wn.index>dr?(_r=wn,wn=null):_r=wn.sibling;var tu=$t(It,wn,aa.value,As);if(tu===null){wn===null&&(wn=_r);break}a&&wn&&tu.alternate===null&&l(It,wn),wt=H(tu,wt,dr),ra===null?On=tu:ra.sibling=tu,ra=tu,wn=_r}if(aa.done)return f(It,wn),xr&&fo(It,dr),On;if(wn===null){for(;!aa.done;dr++,aa=Ht.next())aa=ps(It,aa.value,As),aa!==null&&(wt=H(aa,wt,dr),ra===null?On=aa:ra.sibling=aa,ra=aa);return xr&&fo(It,dr),On}for(wn=g(wn);!aa.done;dr++,aa=Ht.next())aa=Xt(wn,It,dr,aa.value,As),aa!==null&&(a&&aa.alternate!==null&&wn.delete(aa.key===null?dr:aa.key),wt=H(aa,wt,dr),ra===null?On=aa:ra.sibling=aa,ra=aa);return a&&wn.forEach(function(w3){return l(It,w3)}),xr&&fo(It,dr),On}function Ta(It,wt,Ht,As){if(typeof Ht=="object"&&Ht!==null&&Ht.type===b&&Ht.key===null&&(Ht=Ht.props.children),typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case p:e:{for(var On=Ht.key;wt!==null;){if(wt.key===On){if(On=Ht.type,On===b){if(wt.tag===7){f(It,wt.sibling),As=D(wt,Ht.props.children),As.return=It,It=As;break e}}else if(wt.elementType===On||typeof On=="object"&&On!==null&&On.$$typeof===G&&Ut(On)===wt.type){f(It,wt.sibling),As=D(wt,Ht.props),zn(As,Ht),As.return=It,It=As;break e}f(It,wt);break}else l(It,wt);wt=wt.sibling}Ht.type===b?(As=rc(Ht.props.children,It.mode,As,Ht.key),As.return=It,It=As):(As=Ql(Ht.type,Ht.key,Ht.props,null,It.mode,As),zn(As,Ht),As.return=It,It=As)}return ue(It);case j:e:{for(On=Ht.key;wt!==null;){if(wt.key===On)if(wt.tag===4&&wt.stateNode.containerInfo===Ht.containerInfo&&wt.stateNode.implementation===Ht.implementation){f(It,wt.sibling),As=D(wt,Ht.children||[]),As.return=It,It=As;break e}else{f(It,wt);break}else l(It,wt);wt=wt.sibling}As=ld(Ht,It.mode,As),As.return=It,It=As}return ue(It);case G:return Ht=Ut(Ht),Ta(It,wt,Ht,As)}if(de(Ht))return fn(It,wt,Ht,As);if(ie(Ht)){if(On=ie(Ht),typeof On!="function")throw Error(r(150));return Ht=On.call(Ht),Mn(It,wt,Ht,As)}if(typeof Ht.then=="function")return Ta(It,wt,sn(Ht),As);if(Ht.$$typeof===Q)return Ta(It,wt,IA(It,Ht),As);on(It,Ht)}return typeof Ht=="string"&&Ht!==""||typeof Ht=="number"||typeof Ht=="bigint"?(Ht=""+Ht,wt!==null&&wt.tag===6?(f(It,wt.sibling),As=D(wt,Ht),As.return=It,It=As):(f(It,wt),As=Vd(Ht,It.mode,As),As.return=It,It=As),ue(It)):f(It,wt)}return function(It,wt,Ht,As){try{An=0;var On=Ta(It,wt,Ht,As);return fs=null,On}catch(wn){if(wn===xt||wn===Ze)throw wn;var ra=zi(29,wn,null,It.mode);return ra.lanes=As,ra.return=It,ra}finally{}}}var ya=fr(!0),Gn=fr(!1),Yt=!1;function _s(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ra(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function In(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Un(a,l,f){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(ta&2)!==0){var D=g.pending;return D===null?l.next=l:(l.next=D.next,D.next=l),g.pending=l,l=Hi(a),Kd(a,null,f),l}return Oc(a,g,l,f),Hi(a)}function Jr(a,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var g=l.lanes;g&=a.pendingLanes,f|=g,l.lanes=f,Vs(a,f)}}function ri(a,l){var f=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var D=null,H=null;if(f=f.firstBaseUpdate,f!==null){do{var ue={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};H===null?D=H=ue:H=H.next=ue,f=f.next}while(f!==null);H===null?D=H=l:H=H.next=l}else D=H=l;f={baseState:g.baseState,firstBaseUpdate:D,lastBaseUpdate:H,shared:g.shared,callbacks:g.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=l:a.next=l,f.lastBaseUpdate=l}var Ya=!1;function Zr(){if(Ya){var a=M;if(a!==null)throw a}}function ai(a,l,f,g){Ya=!1;var D=a.updateQueue;Yt=!1;var H=D.firstBaseUpdate,ue=D.lastBaseUpdate,De=D.shared.pending;if(De!==null){D.shared.pending=null;var pt=De,zt=pt.next;pt.next=null,ue===null?H=zt:ue.next=zt,ue=pt;var os=a.alternate;os!==null&&(os=os.updateQueue,De=os.lastBaseUpdate,De!==ue&&(De===null?os.firstBaseUpdate=zt:De.next=zt,os.lastBaseUpdate=pt))}if(H!==null){var ps=D.baseState;ue=0,os=zt=pt=null,De=H;do{var $t=De.lane&-536870913,Xt=$t!==De.lane;if(Xt?(Cr&$t)===$t:(g&$t)===$t){$t!==0&&$t===E&&(Ya=!0),os!==null&&(os=os.next={lane:0,tag:De.tag,payload:De.payload,callback:null,next:null});e:{var fn=a,Mn=De;$t=l;var Ta=f;switch(Mn.tag){case 1:if(fn=Mn.payload,typeof fn=="function"){ps=fn.call(Ta,ps,$t);break e}ps=fn;break e;case 3:fn.flags=fn.flags&-65537|128;case 0:if(fn=Mn.payload,$t=typeof fn=="function"?fn.call(Ta,ps,$t):fn,$t==null)break e;ps=m({},ps,$t);break e;case 2:Yt=!0}}$t=De.callback,$t!==null&&(a.flags|=64,Xt&&(a.flags|=8192),Xt=D.callbacks,Xt===null?D.callbacks=[$t]:Xt.push($t))}else Xt={lane:$t,tag:De.tag,payload:De.payload,callback:De.callback,next:null},os===null?(zt=os=Xt,pt=ps):os=os.next=Xt,ue|=$t;if(De=De.next,De===null){if(De=D.shared.pending,De===null)break;Xt=De,De=Xt.next,Xt.next=null,D.lastBaseUpdate=Xt,D.shared.pending=null}}while(!0);os===null&&(pt=ps),D.baseState=pt,D.firstBaseUpdate=zt,D.lastBaseUpdate=os,H===null&&(D.shared.lanes=0),R|=ue,a.lanes=ue,a.memoizedState=ps}}function Ki(a,l){if(typeof a!="function")throw Error(r(191,a));a.call(l)}function ii(a,l){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)Ki(f[a],l)}var Kn=pe(null),Nr=pe(0);function xa(a,l){a=C,me(Nr,a),me(Kn,l),C=a|l.baseLanes}function zr(){me(Nr,C),me(Kn,Kn.current)}function oi(){C=Nr.current,Y(Kn),Y(Nr)}var Oa=pe(null),Br=null;function Xa(a){var l=a.alternate;me(Rr,Rr.current&1),me(Oa,a),Br===null&&(l===null||Kn.current!==null||l.memoizedState!==null)&&(Br=a)}function ea(a){me(Rr,Rr.current),me(Oa,a),Br===null&&(Br=a)}function li(a){a.tag===22?(me(Rr,Rr.current),me(Oa,a),Br===null&&(Br=a)):ci()}function ci(){me(Rr,Rr.current),me(Oa,Oa.current)}function la(a){Y(Oa),Br===a&&(Br=null),Y(Rr)}var Rr=pe(0);function $i(a){for(var l=a;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||d0(f)||A0(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ha=0,En=null,Fn=null,Qr=null,io=!1,po=!1,eo=!1,Ua=0,uc=0,ml=null,hd=0;function ca(){throw Error(r(321))}function OA(a,l){if(l===null)return!1;for(var f=0;f<l.length&&f<a.length;f++)if(!Sr(a[f],l[f]))return!1;return!0}function Fu(a,l,f,g,D,H){return Ha=H,En=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,se.H=a===null||a.memoizedState===null?Vm:kh,eo=!1,H=f(g,D),eo=!1,po&&(H=rl(l,f,g,D)),Wd(a),H}function Wd(a){se.H=Mu;var l=Fn!==null&&Fn.next!==null;if(Ha=0,Qr=Fn=En=null,io=!1,uc=0,ml=null,l)throw Error(r(300));a===null||La||(a=a.dependencies,a!==null&&FA(a)&&(La=!0))}function rl(a,l,f,g){En=a;var D=0;do{if(po&&(ml=null),uc=0,po=!1,25<=D)throw Error(r(301));if(D+=1,Qr=Fn=null,a.updateQueue!=null){var H=a.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}se.H=Hh,H=l(f,g)}while(po);return H}function Iu(){var a=se.H,l=a.useState()[0];return l=typeof l.then=="function"?hc(l):l,a=a.useState()[0],(Fn!==null?Fn.memoizedState:null)!==a&&(En.flags|=1024),l}function UA(){var a=Ua!==0;return Ua=0,a}function LA(a,l,f){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~f}function Yd(a){if(io){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}io=!1}Ha=0,Qr=Fn=En=null,po=!1,uc=Ua=0,ml=null}function gi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qr===null?En.memoizedState=Qr=a:Qr=Qr.next=a,Qr}function Ba(){if(Fn===null){var a=En.alternate;a=a!==null?a.memoizedState:null}else a=Fn.next;var l=Qr===null?En.memoizedState:Qr.next;if(l!==null)Qr=l,Fn=a;else{if(a===null)throw En.alternate===null?Error(r(467)):Error(r(310));Fn=a,a={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},Qr===null?En.memoizedState=Qr=a:Qr=Qr.next=a}return Qr}function Xd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hc(a){var l=uc;return uc+=1,ml===null&&(ml=[]),a=ss(ml,a,l),l=En,(Qr===null?l.memoizedState:Qr.next)===null&&(l=l.alternate,se.H=l===null||l.memoizedState===null?Vm:kh),a}function fd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return hc(a);if(a.$$typeof===Q)return Oi(a)}throw Error(r(438,String(a)))}function wi(a){var l=null,f=En.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var g=En.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(D){return D.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Xd(),En.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(a),g=0;g<a;g++)f[g]=he;return l.index++,f}function Uo(a,l){return typeof l=="function"?l(a):l}function DA(a){var l=Ba();return pd(l,Fn,a)}function pd(a,l,f){var g=a.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=f;var D=a.baseQueue,H=g.pending;if(H!==null){if(D!==null){var ue=D.next;D.next=H.next,H.next=ue}l.baseQueue=D=H,g.pending=null}if(H=a.baseState,D===null)a.memoizedState=H;else{l=D.next;var De=ue=null,pt=null,zt=l,os=!1;do{var ps=zt.lane&-536870913;if(ps!==zt.lane?(Cr&ps)===ps:(Ha&ps)===ps){var $t=zt.revertLane;if($t===0)pt!==null&&(pt=pt.next={lane:0,revertLane:0,gesture:null,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null}),ps===E&&(os=!0);else if((Ha&$t)===$t){zt=zt.next,$t===E&&(os=!0);continue}else ps={lane:0,revertLane:zt.revertLane,gesture:null,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null},pt===null?(De=pt=ps,ue=H):pt=pt.next=ps,En.lanes|=$t,R|=$t;ps=zt.action,eo&&f(H,ps),H=zt.hasEagerState?zt.eagerState:f(H,ps)}else $t={lane:ps,revertLane:zt.revertLane,gesture:zt.gesture,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null},pt===null?(De=pt=$t,ue=H):pt=pt.next=$t,En.lanes|=ps,R|=ps;zt=zt.next}while(zt!==null&&zt!==l);if(pt===null?ue=H:pt.next=De,!Sr(H,a.memoizedState)&&(La=!0,os&&(f=M,f!==null)))throw f;a.memoizedState=H,a.baseState=ue,a.baseQueue=pt,g.lastRenderedState=H}return D===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function QA(a){var l=Ba(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=a;var g=f.dispatch,D=f.pending,H=l.memoizedState;if(D!==null){f.pending=null;var ue=D=D.next;do H=a(H,ue.action),ue=ue.next;while(ue!==D);Sr(H,l.memoizedState)||(La=!0),l.memoizedState=H,l.baseQueue===null&&(l.baseState=H),f.lastRenderedState=H}return[H,g]}function _A(a,l,f){var g=En,D=Ba(),H=xr;if(H){if(f===void 0)throw Error(r(407));f=f()}else f=l();var ue=!Sr((Fn||D).memoizedState,f);if(ue&&(D.memoizedState=f,La=!0),D=D.queue,Qh(Ou.bind(null,g,D,a),[a]),D.getSnapshot!==l||ue||Qr!==null&&Qr.memoizedState.tag&1){if(g.flags|=2048,_c(9,{destroy:void 0},Ru.bind(null,g,D,f,l),null),va===null)throw Error(r(349));H||(Ha&127)!==0||Ml(g,l,f)}return f}function Ml(a,l,f){a.flags|=16384,a={getSnapshot:l,value:f},l=En.updateQueue,l===null?(l=Xd(),En.updateQueue=l,l.stores=[a]):(f=l.stores,f===null?l.stores=[a]:f.push(a))}function Ru(a,l,f,g){l.value=f,l.getSnapshot=g,Uh(l)&&Uu(a)}function Ou(a,l,f){return f(function(){Uh(l)&&Uu(a)})}function Uh(a){var l=a.getSnapshot;a=a.value;try{var f=l();return!Sr(a,f)}catch{return!0}}function Uu(a){var l=ul(a,2);l!==null&&ba(l,a,2)}function Pl(a){var l=gi();if(typeof a=="function"){var f=a;if(a=f(),eo){$e(!0);try{f()}finally{$e(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:a},l}function Lh(a,l,f,g){return a.baseState=f,pd(a,Fn,typeof g=="function"?g:Uo)}function MA(a,l,f,g,D){if(Jd(a))throw Error(r(485));if(a=l.action,a!==null){var H={payload:D,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){H.listeners.push(ue)}};se.T!==null?f(!0):H.isTransition=!1,g(H),f=l.pending,f===null?(H.next=l.pending=H,Lu(l,H)):(H.next=f.next,l.pending=f.next=H)}}function Lu(a,l){var f=l.action,g=l.payload,D=a.state;if(l.isTransition){var H=se.T,ue={};se.T=ue;try{var De=f(D,g),pt=se.S;pt!==null&&pt(ue,De),yi(a,l,De)}catch(zt){Qc(a,l,zt)}finally{H!==null&&ue.types!==null&&(H.types=ue.types),se.T=H}}else try{H=f(D,g),yi(a,l,H)}catch(zt){Qc(a,l,zt)}}function yi(a,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){md(a,l,g)},function(g){return Qc(a,l,g)}):md(a,l,f)}function md(a,l,f){l.status="fulfilled",l.value=f,PA(l),a.state=f,l=a.pending,l!==null&&(f=l.next,f===l?a.pending=null:(f=f.next,l.next=f,Lu(a,f)))}function Qc(a,l,f){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=f,PA(l),l=l.next;while(l!==g)}a.action=null}function PA(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function gd(a,l){return l}function Lo(a,l){if(xr){var f=va.formState;if(f!==null){e:{var g=En;if(xr){if(ga){t:{for(var D=ga,H=ka;D.nodeType!==8;){if(!H){D=null;break t}if(D=gc(D.nextSibling),D===null){D=null;break t}}H=D.data,D=H==="F!"||H==="F"?D:null}if(D){ga=gc(D.nextSibling),g=D.data==="F!";break e}}oc(g)}g=!1}g&&(l=f[0])}}return f=gi(),f.memoizedState=f.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gd,lastRenderedState:l},f.queue=g,f=np.bind(null,En,g),g.dispatch=f,g=Pl(!1),H=_u.bind(null,En,!1,g.queue),g=gi(),D={state:l,dispatch:null,action:a,pending:null},g.queue=D,f=MA.bind(null,En,D,H,f),D.dispatch=f,g.memoizedState=a,[l,f,!1]}function kl(a){var l=Ba();return Hl(l,Fn,a)}function Hl(a,l,f){if(l=pd(a,l,gd)[0],a=DA(Uo)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=hc(l)}catch(ue){throw ue===xt?Ze:ue}else g=l;l=Ba();var D=l.queue,H=D.dispatch;return f!==l.memoizedState&&(En.flags|=2048,_c(9,{destroy:void 0},kA.bind(null,D,f),null)),[g,H,a]}function kA(a,l){a.action=l}function HA(a){var l=Ba(),f=Fn;if(f!==null)return Hl(l,f,a);Ba(),l=l.memoizedState,f=Ba();var g=f.queue.dispatch;return f.memoizedState=a,[l,g,!1]}function _c(a,l,f,g){return a={tag:a,create:f,deps:g,inst:l,next:null},l=En.updateQueue,l===null&&(l=Xd(),En.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=a.next=a:(g=f.next,f.next=a,a.next=g,l.lastEffect=a),a}function Dh(){return Ba().memoizedState}function yd(a,l,f,g){var D=gi();En.flags|=a,D.memoizedState=_c(1|l,{destroy:void 0},f,g===void 0?null:g)}function xd(a,l,f,g){var D=Ba();g=g===void 0?null:g;var H=D.memoizedState.inst;Fn!==null&&g!==null&&OA(g,Fn.memoizedState.deps)?D.memoizedState=_c(l,H,f,g):(En.flags|=a,D.memoizedState=_c(1|l,H,f,g))}function Wf(a,l){yd(8390656,8,a,l)}function Qh(a,l){xd(2048,8,a,l)}function _m(a){En.flags|=4;var l=En.updateQueue;if(l===null)l=Xd(),En.updateQueue=l,l.events=[a];else{var f=l.events;f===null?l.events=[a]:f.push(a)}}function Yf(a){var l=Ba().memoizedState;return _m({ref:l,nextImpl:a}),function(){if((ta&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function _h(a,l){return xd(4,2,a,l)}function Mm(a,l){return xd(4,4,a,l)}function Pm(a,l){if(typeof l=="function"){a=a();var f=l(a);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function km(a,l,f){f=f!=null?f.concat([a]):null,xd(4,4,Pm.bind(null,l,a),f)}function Xf(){}function Du(a,l){var f=Ba();l=l===void 0?null:l;var g=f.memoizedState;return l!==null&&OA(l,g[1])?g[0]:(f.memoizedState=[a,l],a)}function Qu(a,l){var f=Ba();l=l===void 0?null:l;var g=f.memoizedState;if(l!==null&&OA(l,g[1]))return g[0];if(g=a(),eo){$e(!0);try{a()}finally{$e(!1)}}return f.memoizedState=[g,l],g}function Jf(a,l,f){return f===void 0||(Ha&1073741824)!==0&&(Cr&261930)===0?a.memoizedState=l:(a.memoizedState=f,a=xi(),En.lanes|=a,R|=a,f)}function Zf(a,l,f,g){return Sr(f,l)?f:Kn.current!==null?(a=Jf(a,f,g),Sr(a,l)||(La=!0),a):(Ha&42)===0||(Ha&1073741824)!==0&&(Cr&261930)===0?(La=!0,a.memoizedState=f):(a=xi(),En.lanes|=a,R|=a,l)}function Mh(a,l,f,g,D){var H=re.p;re.p=H!==0&&8>H?H:8;var ue=se.T,De={};se.T=De,_u(a,!1,l,f);try{var pt=D(),zt=se.S;if(zt!==null&&zt(De,pt),pt!==null&&typeof pt=="object"&&typeof pt.then=="function"){var os=Ee(pt,g);fc(a,l,os,Bn(a))}else fc(a,l,g,Bn(a))}catch(ps){fc(a,l,{then:function(){},status:"rejected",reason:ps},Bn())}finally{re.p=H,ue!==null&&De.types!==null&&(ue.types=De.types),se.T=ue}}function Hm(){}function Ph(a,l,f,g){if(a.tag!==5)throw Error(r(476));var D=ep(a).queue;Mh(a,D,l,te,f===null?Hm:function(){return zm(a),f(g)})}function ep(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:te},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:f},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function zm(a){var l=ep(a);l.next===null&&(l=a.alternate.memoizedState),fc(a,l.next.queue,{},Bn())}function zA(){return Oi(Fp)}function tp(){return Ba().memoizedState}function sp(){return Ba().memoizedState}function Hx(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var f=Bn();a=In(f);var g=Un(l,a,f);g!==null&&(ba(g,l,f),Jr(g,l,f)),l={cache:Ad()},a.payload=l;return}l=l.return}}function zx(a,l,f){var g=Bn();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Jd(a)?Km(l,f):(f=SA(a,l,f,g),f!==null&&(ba(f,a,g),$m(f,l,g)))}function np(a,l,f){var g=Bn();fc(a,l,f,g)}function fc(a,l,f,g){var D={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Jd(a))Km(l,D);else{var H=a.alternate;if(a.lanes===0&&(H===null||H.lanes===0)&&(H=l.lastRenderedReducer,H!==null))try{var ue=l.lastRenderedState,De=H(ue,f);if(D.hasEagerState=!0,D.eagerState=De,Sr(De,ue))return Oc(a,l,D,0),va===null&&zd(),!1}catch{}finally{}if(f=SA(a,l,D,g),f!==null)return ba(f,a,g),$m(f,l,g),!0}return!1}function _u(a,l,f,g){if(g={lane:2,revertLane:Jx(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Jd(a)){if(l)throw Error(r(479))}else l=SA(a,f,g,2),l!==null&&ba(l,a,2)}function Jd(a){var l=a.alternate;return a===En||l!==null&&l===En}function Km(a,l){po=io=!0;var f=a.pending;f===null?l.next=l:(l.next=f.next,f.next=l),a.pending=l}function $m(a,l,f){if((f&4194048)!==0){var g=l.lanes;g&=a.pendingLanes,f|=g,l.lanes=f,Vs(a,f)}}var Mu={readContext:Oi,use:fd,useCallback:ca,useContext:ca,useEffect:ca,useImperativeHandle:ca,useLayoutEffect:ca,useInsertionEffect:ca,useMemo:ca,useReducer:ca,useRef:ca,useState:ca,useDebugValue:ca,useDeferredValue:ca,useTransition:ca,useSyncExternalStore:ca,useId:ca,useHostTransitionStatus:ca,useFormState:ca,useActionState:ca,useOptimistic:ca,useMemoCache:ca,useCacheRefresh:ca};Mu.useEffectEvent=ca;var Vm={readContext:Oi,use:fd,useCallback:function(a,l){return gi().memoizedState=[a,l===void 0?null:l],a},useContext:Oi,useEffect:Wf,useImperativeHandle:function(a,l,f){f=f!=null?f.concat([a]):null,yd(4194308,4,Pm.bind(null,l,a),f)},useLayoutEffect:function(a,l){return yd(4194308,4,a,l)},useInsertionEffect:function(a,l){yd(4,2,a,l)},useMemo:function(a,l){var f=gi();l=l===void 0?null:l;var g=a();if(eo){$e(!0);try{a()}finally{$e(!1)}}return f.memoizedState=[g,l],g},useReducer:function(a,l,f){var g=gi();if(f!==void 0){var D=f(l);if(eo){$e(!0);try{f(l)}finally{$e(!1)}}}else D=l;return g.memoizedState=g.baseState=D,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:D},g.queue=a,a=a.dispatch=zx.bind(null,En,a),[g.memoizedState,a]},useRef:function(a){var l=gi();return a={current:a},l.memoizedState=a},useState:function(a){a=Pl(a);var l=a.queue,f=np.bind(null,En,l);return l.dispatch=f,[a.memoizedState,f]},useDebugValue:Xf,useDeferredValue:function(a,l){var f=gi();return Jf(f,a,l)},useTransition:function(){var a=Pl(!1);return a=Mh.bind(null,En,a.queue,!0,!1),gi().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,f){var g=En,D=gi();if(xr){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),va===null)throw Error(r(349));(Cr&127)!==0||Ml(g,l,f)}D.memoizedState=f;var H={value:f,getSnapshot:l};return D.queue=H,Wf(Ou.bind(null,g,H,a),[a]),g.flags|=2048,_c(9,{destroy:void 0},Ru.bind(null,g,H,f,l),null),f},useId:function(){var a=gi(),l=va.identifierPrefix;if(xr){var f=Ji,g=Ro;f=(g&~(1<<32-St(g)-1)).toString(32)+f,l="_"+l+"R_"+f,f=Ua++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=hd++,l="_"+l+"r_"+f.toString(32)+"_";return a.memoizedState=l},useHostTransitionStatus:zA,useFormState:Lo,useActionState:Lo,useOptimistic:function(a){var l=gi();l.memoizedState=l.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=_u.bind(null,En,!0,f),f.dispatch=l,[a,l]},useMemoCache:wi,useCacheRefresh:function(){return gi().memoizedState=Hx.bind(null,En)},useEffectEvent:function(a){var l=gi(),f={impl:a};return l.memoizedState=f,function(){if((ta&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},kh={readContext:Oi,use:fd,useCallback:Du,useContext:Oi,useEffect:Qh,useImperativeHandle:km,useInsertionEffect:_h,useLayoutEffect:Mm,useMemo:Qu,useReducer:DA,useRef:Dh,useState:function(){return DA(Uo)},useDebugValue:Xf,useDeferredValue:function(a,l){var f=Ba();return Zf(f,Fn.memoizedState,a,l)},useTransition:function(){var a=DA(Uo)[0],l=Ba().memoizedState;return[typeof a=="boolean"?a:hc(a),l]},useSyncExternalStore:_A,useId:tp,useHostTransitionStatus:zA,useFormState:kl,useActionState:kl,useOptimistic:function(a,l){var f=Ba();return Lh(f,Fn,a,l)},useMemoCache:wi,useCacheRefresh:sp};kh.useEffectEvent=Yf;var Hh={readContext:Oi,use:fd,useCallback:Du,useContext:Oi,useEffect:Qh,useImperativeHandle:km,useInsertionEffect:_h,useLayoutEffect:Mm,useMemo:Qu,useReducer:QA,useRef:Dh,useState:function(){return QA(Uo)},useDebugValue:Xf,useDeferredValue:function(a,l){var f=Ba();return Fn===null?Jf(f,a,l):Zf(f,Fn.memoizedState,a,l)},useTransition:function(){var a=QA(Uo)[0],l=Ba().memoizedState;return[typeof a=="boolean"?a:hc(a),l]},useSyncExternalStore:_A,useId:tp,useHostTransitionStatus:zA,useFormState:HA,useActionState:HA,useOptimistic:function(a,l){var f=Ba();return Fn!==null?Lh(f,Fn,a,l):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:wi,useCacheRefresh:sp};Hh.useEffectEvent=Yf;function zh(a,l,f,g){l=a.memoizedState,f=f(g,l),f=f==null?l:m({},l,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Kh={enqueueSetState:function(a,l,f){a=a._reactInternals;var g=Bn(),D=In(g);D.payload=l,f!=null&&(D.callback=f),l=Un(a,D,g),l!==null&&(ba(l,a,g),Jr(l,a,g))},enqueueReplaceState:function(a,l,f){a=a._reactInternals;var g=Bn(),D=In(g);D.tag=1,D.payload=l,f!=null&&(D.callback=f),l=Un(a,D,g),l!==null&&(ba(l,a,g),Jr(l,a,g))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var f=Bn(),g=In(f);g.tag=2,l!=null&&(g.callback=l),l=Un(a,g,f),l!==null&&(ba(l,a,f),Jr(l,a,f))}};function $h(a,l,f,g,D,H,ue){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,H,ue):l.prototype&&l.prototype.isPureReactComponent?!Pi(f,g)||!Pi(D,H):!0}function rp(a,l,f,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,g),l.state!==a&&Kh.enqueueReplaceState(l,l.state,null)}function vd(a,l){var f=l;if("ref"in l){f={};for(var g in l)g!=="ref"&&(f[g]=l[g])}if(a=a.defaultProps){f===l&&(f=m({},f));for(var D in a)f[D]===void 0&&(f[D]=a[D])}return f}function qm(a){od(a)}function Pu(a){console.error(a)}function ku(a){od(a)}function Hu(a,l){try{var f=a.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function ap(a,l,f){try{var g=a.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function ip(a,l,f){return f=In(f),f.tag=3,f.payload={element:null},f.callback=function(){Hu(a,l)},f}function op(a){return a=In(a),a.tag=3,a}function lp(a,l,f,g){var D=f.type.getDerivedStateFromError;if(typeof D=="function"){var H=g.value;a.payload=function(){return D(H)},a.callback=function(){ap(l,f,g)}}var ue=f.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(a.callback=function(){ap(l,f,g),typeof D!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var De=g.stack;this.componentDidCatch(g.value,{componentStack:De!==null?De:""})})}function Kx(a,l,f,g,D){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=f.alternate,l!==null&&dc(l,f,D,!0),f=Oa.current,f!==null){switch(f.tag){case 31:case 13:return Br===null?jl():f.alternate===null&&O===0&&(O=3),f.flags&=-257,f.flags|=65536,f.lanes=D,g===Nt?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([g]):l.add(g),Wx(a,g,D)),!1;case 22:return f.flags|=65536,g===Nt?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([g]):f.add(g)),Wx(a,g,D)),!1}throw Error(r(435,f.tag))}return Wx(a,g,D),jl(),!1}if(xr)return l=Oa.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=D,g!==ao&&(a=Error(r(422),{cause:g}),_l(To(a,f)))):(g!==ao&&(l=Error(r(423),{cause:g}),_l(To(l,f))),a=a.current.alternate,a.flags|=65536,D&=-D,a.lanes|=D,g=To(g,f),D=ip(a.stateNode,g,D),ri(a,D),O!==4&&(O=2)),!1;var H=Error(r(520),{cause:g});if(H=To(H,f),Ge===null?Ge=[H]:Ge.push(H),O!==4&&(O=2),l===null)return!0;g=To(g,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,a=D&-D,f.lanes|=a,a=ip(f.stateNode,g,a),ri(f,a),!1;case 1:if(l=f.type,H=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(ks===null||!ks.has(H))))return f.flags|=65536,D&=-D,f.lanes|=D,D=op(D),lp(D,a,f,g),ri(f,D),!1}f=f.return}while(f!==null);return!1}var cp=Error(r(461)),La=!1;function Vi(a,l,f,g){l.child=a===null?Gn(l,null,f,g):ya(l,a.child,f,g)}function di(a,l,f,g,D){f=f.render;var H=l.ref;if("ref"in g){var ue={};for(var De in g)De!=="ref"&&(ue[De]=g[De])}else ue=g;return Ac(l),g=Fu(a,l,f,ue,H,D),De=UA(),a!==null&&!La?(LA(a,l,D),Pc(a,l,D)):(xr&&De&&Eu(l),l.flags|=1,Vi(a,l,g,D),l.child)}function bd(a,l,f,g,D){if(a===null){var H=f.type;return typeof H=="function"&&!Dl(H)&&H.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=H,Zd(a,l,H,g,D)):(a=Ql(f.type,null,g,l,l.mode,D),a.ref=l.ref,a.return=l,l.child=a)}if(H=a.child,!gp(a,D)){var ue=H.memoizedProps;if(f=f.compare,f=f!==null?f:Pi,f(ue,g)&&a.ref===l.ref)return Pc(a,l,D)}return l.flags|=1,a=Eo(H,g),a.ref=l.ref,a.return=l,l.child=a}function Zd(a,l,f,g,D){if(a!==null){var H=a.memoizedProps;if(Pi(H,g)&&a.ref===l.ref)if(La=!1,l.pendingProps=g=H,gp(a,D))(a.flags&131072)!==0&&(La=!0);else return l.lanes=a.lanes,Pc(a,l,D)}return Ku(a,l,f,g,D)}function Mc(a,l,f,g){var D=g.children,H=a!==null?a.memoizedState:null;if(a===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(H=H!==null?H.baseLanes|f:f,a!==null){for(g=l.child=a.child,D=0;g!==null;)D=D|g.lanes|g.childLanes,g=g.sibling;g=D&~H}else g=0,l.child=null;return KA(a,l,H,f,g)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&Ke(l,H!==null?H.cachePool:null),H!==null?xa(l,H):zr(),li(l);else return g=l.lanes=536870912,KA(a,l,H!==null?H.baseLanes|f:f,f,g)}else H!==null?(Ke(l,H.cachePool),xa(l,H),ci(),l.memoizedState=null):(a!==null&&Ke(l,null),zr(),ci());return Vi(a,l,D,f),l.child}function gl(a,l){return a!==null&&a.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function KA(a,l,f,g,D){var H=Me();return H=H===null?null:{parent:Wa._currentValue,pool:H},l.memoizedState={baseLanes:f,cachePool:H},a!==null&&Ke(l,null),zr(),li(l),a!==null&&dc(a,l,g,!0),l.childLanes=D,null}function yl(a,l){return l=Vh({mode:l.mode,children:l.children},a.mode),l.ref=a.ref,a.child=l,l.return=a,l}function dp(a,l,f){return ya(l,a.child,null,f),a=yl(l,l.pendingProps),a.flags|=2,la(l),l.memoizedState=null,a}function Gm(a,l,f){var g=l.pendingProps,D=(l.flags&128)!==0;if(l.flags&=-129,a===null){if(xr){if(g.mode==="hidden")return a=yl(l,g),l.lanes=536870912,gl(null,a);if(ea(l),(a=ga)?(a=Aw(a,ka),a=a!==null&&a.data==="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:ic!==null?{id:Ro,overflow:Ji}:null,retryLane:536870912,hydrationErrors:null},f=BA(a),f.return=l,l.child=f,Ii=l,ga=null)):a=null,a===null)throw oc(l);return l.lanes=536870912,null}return yl(l,g)}var H=a.memoizedState;if(H!==null){var ue=H.dehydrated;if(ea(l),D)if(l.flags&256)l.flags&=-257,l=dp(a,l,f);else if(l.memoizedState!==null)l.child=a.child,l.flags|=128,l=null;else throw Error(r(558));else if(La||dc(a,l,f,!1),D=(f&a.childLanes)!==0,La||D){if(g=va,g!==null&&(ue=Ls(g,f),ue!==0&&ue!==H.retryLane))throw H.retryLane=ue,ul(a,ue),ba(g,a,ue),cp;jl(),l=dp(a,l,f)}else a=H.treeContext,ga=gc(ue.nextSibling),Ii=l,xr=!0,Zi=null,ka=!1,a!==null&&Rh(l,a),l=yl(l,g),l.flags|=4096;return l}return a=Eo(a.child,{mode:g.mode,children:g.children}),a.ref=l.ref,l.child=a,a.return=l,a}function zu(a,l){var f=l.ref;if(f===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(a===null||a.ref!==f)&&(l.flags|=4194816)}}function Ku(a,l,f,g,D){return Ac(l),f=Fu(a,l,f,g,void 0,D),g=UA(),a!==null&&!La?(LA(a,l,D),Pc(a,l,D)):(xr&&g&&Eu(l),l.flags|=1,Vi(a,l,f,D),l.child)}function $A(a,l,f,g,D,H){return Ac(l),l.updateQueue=null,f=rl(l,g,f,D),Wd(a),g=UA(),a!==null&&!La?(LA(a,l,H),Pc(a,l,H)):(xr&&g&&Eu(l),l.flags|=1,Vi(a,l,f,H),l.child)}function Ap(a,l,f,g,D){if(Ac(l),l.stateNode===null){var H=Fi,ue=f.contextType;typeof ue=="object"&&ue!==null&&(H=Oi(ue)),H=new f(g,H),l.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=Kh,l.stateNode=H,H._reactInternals=l,H=l.stateNode,H.props=g,H.state=l.memoizedState,H.refs={},_s(l),ue=f.contextType,H.context=typeof ue=="object"&&ue!==null?Oi(ue):Fi,H.state=l.memoizedState,ue=f.getDerivedStateFromProps,typeof ue=="function"&&(zh(l,f,ue,g),H.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(ue=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),ue!==H.state&&Kh.enqueueReplaceState(H,H.state,null),ai(l,g,H,D),Zr(),H.state=l.memoizedState),typeof H.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(a===null){H=l.stateNode;var De=l.memoizedProps,pt=vd(f,De);H.props=pt;var zt=H.context,os=f.contextType;ue=Fi,typeof os=="object"&&os!==null&&(ue=Oi(os));var ps=f.getDerivedStateFromProps;os=typeof ps=="function"||typeof H.getSnapshotBeforeUpdate=="function",De=l.pendingProps!==De,os||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(De||zt!==ue)&&rp(l,H,g,ue),Yt=!1;var $t=l.memoizedState;H.state=$t,ai(l,g,H,D),Zr(),zt=l.memoizedState,De||$t!==zt||Yt?(typeof ps=="function"&&(zh(l,f,ps,g),zt=l.memoizedState),(pt=Yt||$h(l,f,pt,g,$t,zt,ue))?(os||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(l.flags|=4194308)):(typeof H.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=zt),H.props=g,H.state=zt,H.context=ue,g=pt):(typeof H.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{H=l.stateNode,Ra(a,l),ue=l.memoizedProps,os=vd(f,ue),H.props=os,ps=l.pendingProps,$t=H.context,zt=f.contextType,pt=Fi,typeof zt=="object"&&zt!==null&&(pt=Oi(zt)),De=f.getDerivedStateFromProps,(zt=typeof De=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(ue!==ps||$t!==pt)&&rp(l,H,g,pt),Yt=!1,$t=l.memoizedState,H.state=$t,ai(l,g,H,D),Zr();var Xt=l.memoizedState;ue!==ps||$t!==Xt||Yt||a!==null&&a.dependencies!==null&&FA(a.dependencies)?(typeof De=="function"&&(zh(l,f,De,g),Xt=l.memoizedState),(os=Yt||$h(l,f,os,g,$t,Xt,pt)||a!==null&&a.dependencies!==null&&FA(a.dependencies))?(zt||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(g,Xt,pt),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(g,Xt,pt)),typeof H.componentDidUpdate=="function"&&(l.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof H.componentDidUpdate!="function"||ue===a.memoizedProps&&$t===a.memoizedState||(l.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ue===a.memoizedProps&&$t===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Xt),H.props=g,H.state=Xt,H.context=pt,g=os):(typeof H.componentDidUpdate!="function"||ue===a.memoizedProps&&$t===a.memoizedState||(l.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ue===a.memoizedProps&&$t===a.memoizedState||(l.flags|=1024),g=!1)}return H=g,zu(a,l),g=(l.flags&128)!==0,H||g?(H=l.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:H.render(),l.flags|=1,a!==null&&g?(l.child=ya(l,a.child,null,D),l.child=ya(l,null,f,D)):Vi(a,l,f,D),l.memoizedState=H.state,a=l.child):a=Pc(a,l,D),a}function up(a,l,f,g){return Dc(),l.flags|=256,Vi(a,l,f,g),l.child}var eA={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hp(a){return{baseLanes:a,cachePool:et()}}function fp(a,l,f){return a=a!==null?a.childLanes&~f:0,l&&(a|=Fe),a}function Wm(a,l,f){var g=l.pendingProps,D=!1,H=(l.flags&128)!==0,ue;if((ue=H)||(ue=a!==null&&a.memoizedState===null?!1:(Rr.current&2)!==0),ue&&(D=!0,l.flags&=-129),ue=(l.flags&32)!==0,l.flags&=-33,a===null){if(xr){if(D?Xa(l):ci(),(a=ga)?(a=Aw(a,ka),a=a!==null&&a.data!=="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:ic!==null?{id:Ro,overflow:Ji}:null,retryLane:536870912,hydrationErrors:null},f=BA(a),f.return=l,l.child=f,Ii=l,ga=null)):a=null,a===null)throw oc(l);return A0(a)?l.lanes=32:l.lanes=536870912,null}var De=g.children;return g=g.fallback,D?(ci(),D=l.mode,De=Vh({mode:"hidden",children:De},D),g=rc(g,D,f,null),De.return=l,g.return=l,De.sibling=g,l.child=De,g=l.child,g.memoizedState=hp(f),g.childLanes=fp(a,ue,f),l.memoizedState=eA,gl(null,g)):(Xa(l),pp(l,De))}var pt=a.memoizedState;if(pt!==null&&(De=pt.dehydrated,De!==null)){if(H)l.flags&256?(Xa(l),l.flags&=-257,l=$u(a,l,f)):l.memoizedState!==null?(ci(),l.child=a.child,l.flags|=128,l=null):(ci(),De=g.fallback,D=l.mode,g=Vh({mode:"visible",children:g.children},D),De=rc(De,D,f,null),De.flags|=2,g.return=l,De.return=l,g.sibling=De,l.child=g,ya(l,a.child,null,f),g=l.child,g.memoizedState=hp(f),g.childLanes=fp(a,ue,f),l.memoizedState=eA,l=gl(null,g));else if(Xa(l),A0(De)){if(ue=De.nextSibling&&De.nextSibling.dataset,ue)var zt=ue.dgst;ue=zt,g=Error(r(419)),g.stack="",g.digest=ue,_l({value:g,source:null,stack:null}),l=$u(a,l,f)}else if(La||dc(a,l,f,!1),ue=(f&a.childLanes)!==0,La||ue){if(ue=va,ue!==null&&(g=Ls(ue,f),g!==0&&g!==pt.retryLane))throw pt.retryLane=g,ul(a,g),ba(ue,a,g),cp;d0(De)||jl(),l=$u(a,l,f)}else d0(De)?(l.flags|=192,l.child=a.child,l=null):(a=pt.treeContext,ga=gc(De.nextSibling),Ii=l,xr=!0,Zi=null,ka=!1,a!==null&&Rh(l,a),l=pp(l,g.children),l.flags|=4096);return l}return D?(ci(),De=g.fallback,D=l.mode,pt=a.child,zt=pt.sibling,g=Eo(pt,{mode:"hidden",children:g.children}),g.subtreeFlags=pt.subtreeFlags&65011712,zt!==null?De=Eo(zt,De):(De=rc(De,D,f,null),De.flags|=2),De.return=l,g.return=l,g.sibling=De,l.child=g,gl(null,g),g=l.child,De=a.child.memoizedState,De===null?De=hp(f):(D=De.cachePool,D!==null?(pt=Wa._currentValue,D=D.parent!==pt?{parent:pt,pool:pt}:D):D=et(),De={baseLanes:De.baseLanes|f,cachePool:D}),g.memoizedState=De,g.childLanes=fp(a,ue,f),l.memoizedState=eA,gl(a.child,g)):(Xa(l),f=a.child,a=f.sibling,f=Eo(f,{mode:"visible",children:g.children}),f.return=l,f.sibling=null,a!==null&&(ue=l.deletions,ue===null?(l.deletions=[a],l.flags|=16):ue.push(a)),l.child=f,l.memoizedState=null,f)}function pp(a,l){return l=Vh({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function Vh(a,l){return a=zi(22,a,null,l),a.lanes=0,a}function $u(a,l,f){return ya(l,a.child,null,f),a=pp(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function Ym(a,l,f){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),dd(a.return,l,f)}function mp(a,l,f,g,D,H){var ue=a.memoizedState;ue===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:D,treeForkCount:H}:(ue.isBackwards=l,ue.rendering=null,ue.renderingStartTime=0,ue.last=g,ue.tail=f,ue.tailMode=D,ue.treeForkCount=H)}function Xm(a,l,f){var g=l.pendingProps,D=g.revealOrder,H=g.tail;g=g.children;var ue=Rr.current,De=(ue&2)!==0;if(De?(ue=ue&1|2,l.flags|=128):ue&=1,me(Rr,ue),Vi(a,l,g,f),g=xr?ac:0,!De&&a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Ym(a,f,l);else if(a.tag===19)Ym(a,f,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(D){case"forwards":for(f=l.child,D=null;f!==null;)a=f.alternate,a!==null&&$i(a)===null&&(D=f),f=f.sibling;f=D,f===null?(D=l.child,l.child=null):(D=f.sibling,f.sibling=null),mp(l,!1,D,f,H,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,D=l.child,l.child=null;D!==null;){if(a=D.alternate,a!==null&&$i(a)===null){l.child=D;break}a=D.sibling,D.sibling=f,f=D,D=a}mp(l,!0,f,null,H,g);break;case"together":mp(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function Pc(a,l,f){if(a!==null&&(l.dependencies=a.dependencies),R|=l.lanes,(f&l.childLanes)===0)if(a!==null){if(dc(a,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(r(153));if(l.child!==null){for(a=l.child,f=Eo(a,a.pendingProps),l.child=f,f.return=l;a.sibling!==null;)a=a.sibling,f=f.sibling=Eo(a,a.pendingProps),f.return=l;f.sibling=null}return l.child}function gp(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&FA(a)))}function yp(a,l,f){switch(l.tag){case 3:ye(l,l.stateNode.containerInfo),cc(l,Wa,a.memoizedState.cache),Dc();break;case 27:case 5:Ne(l);break;case 4:ye(l,l.stateNode.containerInfo);break;case 10:cc(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,ea(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(Xa(l),l.flags|=128,null):(f&l.child.childLanes)!==0?Wm(a,l,f):(Xa(l),a=Pc(a,l,f),a!==null?a.sibling:null);Xa(l);break;case 19:var D=(a.flags&128)!==0;if(g=(f&l.childLanes)!==0,g||(dc(a,l,f,!1),g=(f&l.childLanes)!==0),D){if(g)return Xm(a,l,f);l.flags|=128}if(D=l.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),me(Rr,Rr.current),g)break;return null;case 22:return l.lanes=0,Mc(a,l,f,l.pendingProps);case 24:cc(l,Wa,a.memoizedState.cache)}return Pc(a,l,f)}function qh(a,l,f){if(a!==null)if(a.memoizedProps!==l.pendingProps)La=!0;else{if(!gp(a,f)&&(l.flags&128)===0)return La=!1,yp(a,l,f);La=(a.flags&131072)!==0}else La=!1,xr&&(l.flags&1048576)!==0&&Ih(l,ac,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(a=Ut(l.elementType),l.type=a,typeof a=="function")Dl(a)?(g=vd(a,g),l.tag=1,l=Ap(null,l,a,g,f)):(l.tag=0,l=Ku(null,l,a,g,f));else{if(a!=null){var D=a.$$typeof;if(D===k){l.tag=11,l=di(null,l,a,g,f);break e}else if(D===q){l.tag=14,l=bd(null,l,a,g,f);break e}}throw l=ae(a)||a,Error(r(306,l,""))}}return l;case 0:return Ku(a,l,l.type,l.pendingProps,f);case 1:return g=l.type,D=vd(g,l.pendingProps),Ap(a,l,g,D,f);case 3:e:{if(ye(l,l.stateNode.containerInfo),a===null)throw Error(r(387));g=l.pendingProps;var H=l.memoizedState;D=H.element,Ra(a,l),ai(l,g,null,f);var ue=l.memoizedState;if(g=ue.cache,cc(l,Wa,g),g!==H.cache&&pl(l,[Wa],f,!0),Zr(),g=ue.element,H.isDehydrated)if(H={element:g,isDehydrated:!1,cache:ue.cache},l.updateQueue.baseState=H,l.memoizedState=H,l.flags&256){l=up(a,l,g,f);break e}else if(g!==D){D=To(Error(r(424)),l),_l(D),l=up(a,l,g,f);break e}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(ga=gc(a.firstChild),Ii=l,xr=!0,Zi=null,ka=!0,f=Gn(l,null,g,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Dc(),g===D){l=Pc(a,l,f);break e}Vi(a,l,g,f)}l=l.child}return l;case 26:return zu(a,l),a===null?(f=gw(l.type,null,l.pendingProps,null))?l.memoizedState=f:xr||(f=l.type,a=l.pendingProps,g=yg(Le.current).createElement(f),g[Kt]=l,g[ws]=a,xo(g,f,a),lr(g),l.stateNode=g):l.memoizedState=gw(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return Ne(l),a===null&&xr&&(g=l.stateNode=fw(l.type,l.pendingProps,Le.current),Ii=l,ka=!0,D=ga,YA(l.type)?(u0=D,ga=gc(g.firstChild)):ga=D),Vi(a,l,l.pendingProps.children,f),zu(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&xr&&((D=g=ga)&&(g=ZR(g,l.type,l.pendingProps,ka),g!==null?(l.stateNode=g,Ii=l,ga=gc(g.firstChild),ka=!1,D=!0):D=!1),D||oc(l)),Ne(l),D=l.type,H=l.pendingProps,ue=a!==null?a.memoizedProps:null,g=H.children,o0(D,H)?g=null:ue!==null&&o0(D,ue)&&(l.flags|=32),l.memoizedState!==null&&(D=Fu(a,l,Iu,null,null,f),Fp._currentValue=D),zu(a,l),Vi(a,l,g,f),l.child;case 6:return a===null&&xr&&((a=f=ga)&&(f=e3(f,l.pendingProps,ka),f!==null?(l.stateNode=f,Ii=l,ga=null,a=!0):a=!1),a||oc(l)),null;case 13:return Wm(a,l,f);case 4:return ye(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=ya(l,null,g,f):Vi(a,l,g,f),l.child;case 11:return di(a,l,l.type,l.pendingProps,f);case 7:return Vi(a,l,l.pendingProps,f),l.child;case 8:return Vi(a,l,l.pendingProps.children,f),l.child;case 12:return Vi(a,l,l.pendingProps.children,f),l.child;case 10:return g=l.pendingProps,cc(l,l.type,g.value),Vi(a,l,g.children,f),l.child;case 9:return D=l.type._context,g=l.pendingProps.children,Ac(l),D=Oi(D),g=g(D),l.flags|=1,Vi(a,l,g,f),l.child;case 14:return bd(a,l,l.type,l.pendingProps,f);case 15:return Zd(a,l,l.type,l.pendingProps,f);case 19:return Xm(a,l,f);case 31:return Gm(a,l,f);case 22:return Mc(a,l,f,l.pendingProps);case 24:return Ac(l),g=Oi(Wa),a===null?(D=Me(),D===null&&(D=va,H=Ad(),D.pooledCache=H,H.refCount++,H!==null&&(D.pooledCacheLanes|=f),D=H),l.memoizedState={parent:g,cache:D},_s(l),cc(l,Wa,D)):((a.lanes&f)!==0&&(Ra(a,l),ai(l,null,null,f),Zr()),D=a.memoizedState,H=l.memoizedState,D.parent!==g?(D={parent:g,cache:g},l.memoizedState=D,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=D),cc(l,Wa,g)):(g=H.cache,cc(l,Wa,g),g!==D.cache&&pl(l,[Wa],f,!0))),Vi(a,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function pc(a){a.flags|=4}function xp(a,l,f,g,D){if((l=(a.mode&32)!==0)&&(l=!1),l){if(a.flags|=16777216,(D&335544128)===D)if(a.stateNode.complete)a.flags|=8192;else if(Hc())a.flags|=8192;else throw ts=Nt,_t}else a.flags&=-16777217}function Jm(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!jw(l))if(Hc())a.flags|=8192;else throw ts=Nt,_t}function Vu(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Ss():536870912,a.lanes|=l,qe|=l)}function qu(a,l){if(!xr)switch(a.tailMode){case"hidden":l=a.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Da(a){var l=a.alternate!==null&&a.alternate.child===a.child,f=0,g=0;if(l)for(var D=a.child;D!==null;)f|=D.lanes|D.childLanes,g|=D.subtreeFlags&65011712,g|=D.flags&65011712,D.return=a,D=D.sibling;else for(D=a.child;D!==null;)f|=D.lanes|D.childLanes,g|=D.subtreeFlags,g|=D.flags,D.return=a,D=D.sibling;return a.subtreeFlags|=g,a.childLanes=f,l}function $x(a,l,f){var g=l.pendingProps;switch(EA(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Da(l),null;case 1:return Da(l),null;case 3:return f=l.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),Oo(Wa),we(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(Ri(l)?pc(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,qd())),Da(l),null;case 26:var D=l.type,H=l.memoizedState;return a===null?(pc(l),H!==null?(Da(l),Jm(l,H)):(Da(l),xp(l,D,null,g,f))):H?H!==a.memoizedState?(pc(l),Da(l),Jm(l,H)):(Da(l),l.flags&=-16777217):(a=a.memoizedProps,a!==g&&pc(l),Da(l),xp(l,D,a,g,f)),null;case 27:if(ke(l),f=Le.current,D=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&pc(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return Da(l),null}a=Se.current,Ri(l)?Tu(l):(a=fw(D,g,f),l.stateNode=a,pc(l))}return Da(l),null;case 5:if(ke(l),D=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&pc(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return Da(l),null}if(H=Se.current,Ri(l))Tu(l);else{var ue=yg(Le.current);switch(H){case 1:H=ue.createElementNS("http://www.w3.org/2000/svg",D);break;case 2:H=ue.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;default:switch(D){case"svg":H=ue.createElementNS("http://www.w3.org/2000/svg",D);break;case"math":H=ue.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;case"script":H=ue.createElement("div"),H.innerHTML="<script><\/script>",H=H.removeChild(H.firstChild);break;case"select":H=typeof g.is=="string"?ue.createElement("select",{is:g.is}):ue.createElement("select"),g.multiple?H.multiple=!0:g.size&&(H.size=g.size);break;default:H=typeof g.is=="string"?ue.createElement(D,{is:g.is}):ue.createElement(D)}}H[Kt]=l,H[ws]=g;e:for(ue=l.child;ue!==null;){if(ue.tag===5||ue.tag===6)H.appendChild(ue.stateNode);else if(ue.tag!==4&&ue.tag!==27&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===l)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===l)break e;ue=ue.return}ue.sibling.return=ue.return,ue=ue.sibling}l.stateNode=H;e:switch(xo(H,D,g),D){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&pc(l)}}return Da(l),xp(l,l.type,a===null?null:a.memoizedProps,l.pendingProps,f),null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==g&&pc(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(r(166));if(a=Le.current,Ri(l)){if(a=l.stateNode,f=l.memoizedProps,g=null,D=Ii,D!==null)switch(D.tag){case 27:case 5:g=D.memoizedProps}a[Kt]=l,a=!!(a.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||nw(a.nodeValue,f)),a||oc(l,!0)}else a=yg(a).createTextNode(g),a[Kt]=l,l.stateNode=a}return Da(l),null;case 31:if(f=l.memoizedState,a===null||a.memoizedState!==null){if(g=Ri(l),f!==null){if(a===null){if(!g)throw Error(r(318));if(a=l.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[Kt]=l}else Dc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Da(l),a=!1}else f=qd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=f),a=!0;if(!a)return l.flags&256?(la(l),l):(la(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Da(l),null;case 13:if(g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(D=Ri(l),g!==null&&g.dehydrated!==null){if(a===null){if(!D)throw Error(r(318));if(D=l.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));D[Kt]=l}else Dc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Da(l),D=!1}else D=qd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=D),D=!0;if(!D)return l.flags&256?(la(l),l):(la(l),null)}return la(l),(l.flags&128)!==0?(l.lanes=f,l):(f=g!==null,a=a!==null&&a.memoizedState!==null,f&&(g=l.child,D=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(D=g.alternate.memoizedState.cachePool.pool),H=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(H=g.memoizedState.cachePool.pool),H!==D&&(g.flags|=2048)),f!==a&&f&&(l.child.flags|=8192),Vu(l,l.updateQueue),Da(l),null);case 4:return we(),a===null&&s0(l.stateNode.containerInfo),Da(l),null;case 10:return Oo(l.type),Da(l),null;case 19:if(Y(Rr),g=l.memoizedState,g===null)return Da(l),null;if(D=(l.flags&128)!==0,H=g.rendering,H===null)if(D)qu(g,!1);else{if(O!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(H=$i(a),H!==null){for(l.flags|=128,qu(g,!1),a=H.updateQueue,l.updateQueue=a,Vu(l,a),l.subtreeFlags=0,a=f,f=l.child;f!==null;)$d(f,a),f=f.sibling;return me(Rr,Rr.current&1|2),xr&&fo(l,g.treeForkCount),l.child}a=a.sibling}g.tail!==null&&qt()>Xs&&(l.flags|=128,D=!0,qu(g,!1),l.lanes=4194304)}else{if(!D)if(a=$i(H),a!==null){if(l.flags|=128,D=!0,a=a.updateQueue,l.updateQueue=a,Vu(l,a),qu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!H.alternate&&!xr)return Da(l),null}else 2*qt()-g.renderingStartTime>Xs&&f!==536870912&&(l.flags|=128,D=!0,qu(g,!1),l.lanes=4194304);g.isBackwards?(H.sibling=l.child,l.child=H):(a=g.last,a!==null?a.sibling=H:l.child=H,g.last=H)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=qt(),a.sibling=null,f=Rr.current,me(Rr,D?f&1|2:f&1),xr&&fo(l,g.treeForkCount),a):(Da(l),null);case 22:case 23:return la(l),oi(),g=l.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(f&536870912)!==0&&(l.flags&128)===0&&(Da(l),l.subtreeFlags&6&&(l.flags|=8192)):Da(l),f=l.updateQueue,f!==null&&Vu(l,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==f&&(l.flags|=2048),a!==null&&Y(Ue),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Oo(Wa),Da(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function Vx(a,l){switch(EA(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Oo(Wa),we(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return ke(l),null;case 31:if(l.memoizedState!==null){if(la(l),l.alternate===null)throw Error(r(340));Dc()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 13:if(la(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Dc()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Y(Rr),null;case 4:return we(),null;case 10:return Oo(l.type),null;case 22:case 23:return la(l),oi(),a!==null&&Y(Ue),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return Oo(Wa),null;case 25:return null;default:return null}}function Zm(a,l){switch(EA(l),l.tag){case 3:Oo(Wa),we();break;case 26:case 27:case 5:ke(l);break;case 4:we();break;case 31:l.memoizedState!==null&&la(l);break;case 13:la(l);break;case 19:Y(Rr);break;case 10:Oo(l.type);break;case 22:case 23:la(l),oi(),a!==null&&Y(Ue);break;case 24:Oo(Wa)}}function tA(a,l){try{var f=l.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var D=g.next;f=D;do{if((f.tag&a)===a){g=void 0;var H=f.create,ue=f.inst;g=H(),ue.destroy=g}f=f.next}while(f!==D)}}catch(De){ja(l,l.return,De)}}function jd(a,l,f){try{var g=l.updateQueue,D=g!==null?g.lastEffect:null;if(D!==null){var H=D.next;g=H;do{if((g.tag&a)===a){var ue=g.inst,De=ue.destroy;if(De!==void 0){ue.destroy=void 0,D=l;var pt=f,zt=De;try{zt()}catch(os){ja(D,pt,os)}}}g=g.next}while(g!==H)}}catch(os){ja(l,l.return,os)}}function Gh(a){var l=a.updateQueue;if(l!==null){var f=a.stateNode;try{ii(l,f)}catch(g){ja(a,a.return,g)}}}function eg(a,l,f){f.props=vd(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(g){ja(a,l,g)}}function Gs(a,l){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof f=="function"?a.refCleanup=f(g):f.current=g}}catch(D){ja(a,l,D)}}function mo(a,l){var f=a.ref,g=a.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(D){ja(a,l,D)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(D){ja(a,l,D)}else f.current=null}function Gu(a){var l=a.type,f=a.memoizedProps,g=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(D){ja(a,a.return,D)}}function Do(a,l,f){try{var g=a.stateNode;qR(g,a.type,f,l),g[ws]=l}catch(D){ja(a,a.return,D)}}function tg(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&YA(a.type)||a.tag===4}function Wr(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||tg(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&YA(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Ca(a,l,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(a),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=nt));else if(g!==4&&(g===27&&YA(a.type)&&(f=a.stateNode,l=null),a=a.child,a!==null))for(Ca(a,l,f),a=a.sibling;a!==null;)Ca(a,l,f),a=a.sibling}function sA(a,l,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?f.insertBefore(a,l):f.appendChild(a);else if(g!==4&&(g===27&&YA(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(sA(a,l,f),a=a.sibling;a!==null;)sA(a,l,f),a=a.sibling}function sg(a){var l=a.stateNode,f=a.memoizedProps;try{for(var g=a.type,D=l.attributes;D.length;)l.removeAttributeNode(D[0]);xo(l,g,f),l[Kt]=a,l[ws]=f}catch(H){ja(a,a.return,H)}}var xl=!1,Si=!1,VA=!1,ng=typeof WeakSet=="function"?WeakSet:Set,qi=null;function rg(a,l){if(a=a.containerInfo,a0=Ng,a=cl(a),dl(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var D=g.anchorOffset,H=g.focusNode;g=g.focusOffset;try{f.nodeType,H.nodeType}catch{f=null;break e}var ue=0,De=-1,pt=-1,zt=0,os=0,ps=a,$t=null;t:for(;;){for(var Xt;ps!==f||D!==0&&ps.nodeType!==3||(De=ue+D),ps!==H||g!==0&&ps.nodeType!==3||(pt=ue+g),ps.nodeType===3&&(ue+=ps.nodeValue.length),(Xt=ps.firstChild)!==null;)$t=ps,ps=Xt;for(;;){if(ps===a)break t;if($t===f&&++zt===D&&(De=ue),$t===H&&++os===g&&(pt=ue),(Xt=ps.nextSibling)!==null)break;ps=$t,$t=ps.parentNode}ps=Xt}f=De===-1||pt===-1?null:{start:De,end:pt}}else f=null}f=f||{start:0,end:0}}else f=null;for(i0={focusedElem:a,selectionRange:f},Ng=!1,qi=l;qi!==null;)if(l=qi,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,qi=a;else for(;qi!==null;){switch(l=qi,H=l.alternate,a=l.flags,l.tag){case 0:if((a&4)!==0&&(a=l.updateQueue,a=a!==null?a.events:null,a!==null))for(f=0;f<a.length;f++)D=a[f],D.ref.impl=D.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&H!==null){a=void 0,f=l,D=H.memoizedProps,H=H.memoizedState,g=f.stateNode;try{var fn=vd(f.type,D);a=g.getSnapshotBeforeUpdate(fn,H),g.__reactInternalSnapshotBeforeUpdate=a}catch(Mn){ja(f,f.return,Mn)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,f=a.nodeType,f===9)c0(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":c0(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=l.sibling,a!==null){a.return=l.return,qi=a;break}qi=l.return}}function ag(a,l,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:vl(a,f),g&4&&tA(5,f);break;case 1:if(vl(a,f),g&4)if(a=f.stateNode,l===null)try{a.componentDidMount()}catch(ue){ja(f,f.return,ue)}else{var D=vd(f.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(D,l,a.__reactInternalSnapshotBeforeUpdate)}catch(ue){ja(f,f.return,ue)}}g&64&&Gh(f),g&512&&Gs(f,f.return);break;case 3:if(vl(a,f),g&64&&(a=f.updateQueue,a!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{ii(a,l)}catch(ue){ja(f,f.return,ue)}}break;case 27:l===null&&g&4&&sg(f);case 26:case 5:vl(a,f),l===null&&g&4&&Gu(f),g&512&&Gs(f,f.return);break;case 12:vl(a,f);break;case 31:vl(a,f),g&4&&bp(a,f);break;case 13:vl(a,f),g&4&&ig(a,f),g&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=LR.bind(null,f),t3(a,f))));break;case 22:if(g=f.memoizedState!==null||xl,!g){l=l!==null&&l.memoizedState!==null||Si,D=xl;var H=Si;xl=g,(Si=l)&&!H?kc(a,f,(f.subtreeFlags&8772)!==0):vl(a,f),xl=D,Si=H}break;case 30:break;default:vl(a,f)}}function vp(a){var l=a.alternate;l!==null&&(a.alternate=null,vp(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&na(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var za=null,go=!1;function mc(a,l,f){for(f=f.child;f!==null;)Wh(a,l,f),f=f.sibling}function Wh(a,l,f){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Je,f)}catch{}switch(f.tag){case 26:Si||mo(f,l),mc(a,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Si||mo(f,l);var g=za,D=go;YA(f.type)&&(za=f.stateNode,go=!1),mc(a,l,f),Cp(f.stateNode),za=g,go=D;break;case 5:Si||mo(f,l);case 6:if(g=za,D=go,za=null,mc(a,l,f),za=g,go=D,za!==null)if(go)try{(za.nodeType===9?za.body:za.nodeName==="HTML"?za.ownerDocument.body:za).removeChild(f.stateNode)}catch(H){ja(f,l,H)}else try{za.removeChild(f.stateNode)}catch(H){ja(f,l,H)}break;case 18:za!==null&&(go?(a=za,cw(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),nf(a)):cw(za,f.stateNode));break;case 4:g=za,D=go,za=f.stateNode.containerInfo,go=!0,mc(a,l,f),za=g,go=D;break;case 0:case 11:case 14:case 15:jd(2,f,l),Si||jd(4,f,l),mc(a,l,f);break;case 1:Si||(mo(f,l),g=f.stateNode,typeof g.componentWillUnmount=="function"&&eg(f,l,g)),mc(a,l,f);break;case 21:mc(a,l,f);break;case 22:Si=(g=Si)||f.memoizedState!==null,mc(a,l,f),Si=g;break;default:mc(a,l,f)}}function bp(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{nf(a)}catch(f){ja(l,l.return,f)}}}function ig(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{nf(a)}catch(f){ja(l,l.return,f)}}function og(a){switch(a.tag){case 31:case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new ng),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new ng),l;default:throw Error(r(435,a.tag))}}function Yh(a,l){var f=og(a);l.forEach(function(g){if(!f.has(g)){f.add(g);var D=DR.bind(null,a,g);g.then(D,D)}})}function Qo(a,l){var f=l.deletions;if(f!==null)for(var g=0;g<f.length;g++){var D=f[g],H=a,ue=l,De=ue;e:for(;De!==null;){switch(De.tag){case 27:if(YA(De.type)){za=De.stateNode,go=!1;break e}break;case 5:za=De.stateNode,go=!1;break e;case 3:case 4:za=De.stateNode.containerInfo,go=!0;break e}De=De.return}if(za===null)throw Error(r(160));Wh(H,ue,D),za=null,go=!1,H=D.alternate,H!==null&&(H.return=null),D.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Wu(l,a),l=l.sibling}var zl=null;function Wu(a,l){var f=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Qo(l,a),Qa(a),g&4&&(jd(3,a,a.return),tA(3,a),jd(5,a,a.return));break;case 1:Qo(l,a),Qa(a),g&512&&(Si||f===null||mo(f,f.return)),g&64&&xl&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var D=zl;if(Qo(l,a),Qa(a),g&512&&(Si||f===null||mo(f,f.return)),g&4){var H=f!==null?f.memoizedState:null;if(g=a.memoizedState,f===null)if(g===null)if(a.stateNode===null){e:{g=a.type,f=a.memoizedProps,D=D.ownerDocument||D;t:switch(g){case"title":H=D.getElementsByTagName("title")[0],(!H||H[Cn]||H[Kt]||H.namespaceURI==="http://www.w3.org/2000/svg"||H.hasAttribute("itemprop"))&&(H=D.createElement(g),D.head.insertBefore(H,D.querySelector("head > title"))),xo(H,g,f),H[Kt]=a,lr(H),g=H;break e;case"link":var ue=vw("link","href",D).get(g+(f.href||""));if(ue){for(var De=0;De<ue.length;De++)if(H=ue[De],H.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&H.getAttribute("rel")===(f.rel==null?null:f.rel)&&H.getAttribute("title")===(f.title==null?null:f.title)&&H.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){ue.splice(De,1);break t}}H=D.createElement(g),xo(H,g,f),D.head.appendChild(H);break;case"meta":if(ue=vw("meta","content",D).get(g+(f.content||""))){for(De=0;De<ue.length;De++)if(H=ue[De],H.getAttribute("content")===(f.content==null?null:""+f.content)&&H.getAttribute("name")===(f.name==null?null:f.name)&&H.getAttribute("property")===(f.property==null?null:f.property)&&H.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&H.getAttribute("charset")===(f.charSet==null?null:f.charSet)){ue.splice(De,1);break t}}H=D.createElement(g),xo(H,g,f),D.head.appendChild(H);break;default:throw Error(r(468,g))}H[Kt]=a,lr(H),g=H}a.stateNode=g}else bw(D,a.type,a.stateNode);else a.stateNode=xw(D,g,a.memoizedProps);else H!==g?(H===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):H.count--,g===null?bw(D,a.type,a.stateNode):xw(D,g,a.memoizedProps)):g===null&&a.stateNode!==null&&Do(a,a.memoizedProps,f.memoizedProps)}break;case 27:Qo(l,a),Qa(a),g&512&&(Si||f===null||mo(f,f.return)),f!==null&&g&4&&Do(a,a.memoizedProps,f.memoizedProps);break;case 5:if(Qo(l,a),Qa(a),g&512&&(Si||f===null||mo(f,f.return)),a.flags&32){D=a.stateNode;try{er(D,"")}catch(fn){ja(a,a.return,fn)}}g&4&&a.stateNode!=null&&(D=a.memoizedProps,Do(a,D,f!==null?f.memoizedProps:D)),g&1024&&(VA=!0);break;case 6:if(Qo(l,a),Qa(a),g&4){if(a.stateNode===null)throw Error(r(162));g=a.memoizedProps,f=a.stateNode;try{f.nodeValue=g}catch(fn){ja(a,a.return,fn)}}break;case 3:if(bg=null,D=zl,zl=xg(l.containerInfo),Qo(l,a),zl=D,Qa(a),g&4&&f!==null&&f.memoizedState.isDehydrated)try{nf(l.containerInfo)}catch(fn){ja(a,a.return,fn)}VA&&(VA=!1,jp(a));break;case 4:g=zl,zl=xg(a.stateNode.containerInfo),Qo(l,a),Qa(a),zl=g;break;case 12:Qo(l,a),Qa(a);break;case 31:Qo(l,a),Qa(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Yh(a,g)));break;case 13:Qo(l,a),Qa(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Ot=qt()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Yh(a,g)));break;case 22:D=a.memoizedState!==null;var pt=f!==null&&f.memoizedState!==null,zt=xl,os=Si;if(xl=zt||D,Si=os||pt,Qo(l,a),Si=os,xl=zt,Qa(a),g&8192)e:for(l=a.stateNode,l._visibility=D?l._visibility&-2:l._visibility|1,D&&(f===null||pt||xl||Si||nA(a)),f=null,l=a;;){if(l.tag===5||l.tag===26){if(f===null){pt=f=l;try{if(H=pt.stateNode,D)ue=H.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{De=pt.stateNode;var ps=pt.memoizedProps.style,$t=ps!=null&&ps.hasOwnProperty("display")?ps.display:null;De.style.display=$t==null||typeof $t=="boolean"?"":(""+$t).trim()}}catch(fn){ja(pt,pt.return,fn)}}}else if(l.tag===6){if(f===null){pt=l;try{pt.stateNode.nodeValue=D?"":pt.memoizedProps}catch(fn){ja(pt,pt.return,fn)}}}else if(l.tag===18){if(f===null){pt=l;try{var Xt=pt.stateNode;D?dw(Xt,!0):dw(pt.stateNode,!1)}catch(fn){ja(pt,pt.return,fn)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=a.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Yh(a,f))));break;case 19:Qo(l,a),Qa(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Yh(a,g)));break;case 30:break;case 21:break;default:Qo(l,a),Qa(a)}}function Qa(a){var l=a.flags;if(l&2){try{for(var f,g=a.return;g!==null;){if(tg(g)){f=g;break}g=g.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var D=f.stateNode,H=Wr(a);sA(a,H,D);break;case 5:var ue=f.stateNode;f.flags&32&&(er(ue,""),f.flags&=-33);var De=Wr(a);sA(a,De,ue);break;case 3:case 4:var pt=f.stateNode.containerInfo,zt=Wr(a);Ca(a,zt,pt);break;default:throw Error(r(161))}}catch(os){ja(a,a.return,os)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function jp(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;jp(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function vl(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)ag(a,l.alternate,l),l=l.sibling}function nA(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:jd(4,l,l.return),nA(l);break;case 1:mo(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&eg(l,l.return,f),nA(l);break;case 27:Cp(l.stateNode);case 26:case 5:mo(l,l.return),nA(l);break;case 22:l.memoizedState===null&&nA(l);break;case 30:nA(l);break;default:nA(l)}a=a.sibling}}function kc(a,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,D=a,H=l,ue=H.flags;switch(H.tag){case 0:case 11:case 15:kc(D,H,f),tA(4,H);break;case 1:if(kc(D,H,f),g=H,D=g.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(zt){ja(g,g.return,zt)}if(g=H,D=g.updateQueue,D!==null){var De=g.stateNode;try{var pt=D.shared.hiddenCallbacks;if(pt!==null)for(D.shared.hiddenCallbacks=null,D=0;D<pt.length;D++)Ki(pt[D],De)}catch(zt){ja(g,g.return,zt)}}f&&ue&64&&Gh(H),Gs(H,H.return);break;case 27:sg(H);case 26:case 5:kc(D,H,f),f&&g===null&&ue&4&&Gu(H),Gs(H,H.return);break;case 12:kc(D,H,f);break;case 31:kc(D,H,f),f&&ue&4&&bp(D,H);break;case 13:kc(D,H,f),f&&ue&4&&ig(D,H);break;case 22:H.memoizedState===null&&kc(D,H,f),Gs(H,H.return);break;case 30:break;default:kc(D,H,f)}l=l.sibling}}function Yu(a,l){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&Gd(f))}function wd(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Gd(a))}function _o(a,l,f,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)lg(a,l,f,g),l=l.sibling}function lg(a,l,f,g){var D=l.flags;switch(l.tag){case 0:case 11:case 15:_o(a,l,f,g),D&2048&&tA(9,l);break;case 1:_o(a,l,f,g);break;case 3:_o(a,l,f,g),D&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Gd(a)));break;case 12:if(D&2048){_o(a,l,f,g),a=l.stateNode;try{var H=l.memoizedProps,ue=H.id,De=H.onPostCommit;typeof De=="function"&&De(ue,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(pt){ja(l,l.return,pt)}}else _o(a,l,f,g);break;case 31:_o(a,l,f,g);break;case 13:_o(a,l,f,g);break;case 23:break;case 22:H=l.stateNode,ue=l.alternate,l.memoizedState!==null?H._visibility&2?_o(a,l,f,g):Xu(a,l):H._visibility&2?_o(a,l,f,g):(H._visibility|=2,Kl(a,l,f,g,(l.subtreeFlags&10256)!==0||!1)),D&2048&&Yu(ue,l);break;case 24:_o(a,l,f,g),D&2048&&wd(l.alternate,l);break;default:_o(a,l,f,g)}}function Kl(a,l,f,g,D){for(D=D&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var H=a,ue=l,De=f,pt=g,zt=ue.flags;switch(ue.tag){case 0:case 11:case 15:Kl(H,ue,De,pt,D),tA(8,ue);break;case 23:break;case 22:var os=ue.stateNode;ue.memoizedState!==null?os._visibility&2?Kl(H,ue,De,pt,D):Xu(H,ue):(os._visibility|=2,Kl(H,ue,De,pt,D)),D&&zt&2048&&Yu(ue.alternate,ue);break;case 24:Kl(H,ue,De,pt,D),D&&zt&2048&&wd(ue.alternate,ue);break;default:Kl(H,ue,De,pt,D)}l=l.sibling}}function Xu(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=a,g=l,D=g.flags;switch(g.tag){case 22:Xu(f,g),D&2048&&Yu(g.alternate,g);break;case 24:Xu(f,g),D&2048&&wd(g.alternate,g);break;default:Xu(f,g)}l=l.sibling}}var Ju=8192;function rA(a,l,f){if(a.subtreeFlags&Ju)for(a=a.child;a!==null;)cg(a,l,f),a=a.sibling}function cg(a,l,f){switch(a.tag){case 26:rA(a,l,f),a.flags&Ju&&a.memoizedState!==null&&h3(f,zl,a.memoizedState,a.memoizedProps);break;case 5:rA(a,l,f);break;case 3:case 4:var g=zl;zl=xg(a.stateNode.containerInfo),rA(a,l,f),zl=g;break;case 22:a.memoizedState===null&&(g=a.alternate,g!==null&&g.memoizedState!==null?(g=Ju,Ju=16777216,rA(a,l,f),Ju=g):rA(a,l,f));break;default:rA(a,l,f)}}function wp(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function Zu(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];qi=g,Ag(g,a)}wp(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)dg(a),a=a.sibling}function dg(a){switch(a.tag){case 0:case 11:case 15:Zu(a),a.flags&2048&&jd(9,a,a.return);break;case 3:Zu(a);break;case 12:Zu(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,Xh(a)):Zu(a);break;default:Zu(a)}}function Xh(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];qi=g,Ag(g,a)}wp(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:jd(8,l,l.return),Xh(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Xh(l));break;default:Xh(l)}a=a.sibling}}function Ag(a,l){for(;qi!==null;){var f=qi;switch(f.tag){case 0:case 11:case 15:jd(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Gd(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,qi=g;else e:for(f=a;qi!==null;){g=qi;var D=g.sibling,H=g.return;if(vp(g),g===f){qi=null;break e}if(D!==null){D.return=H,qi=D;break e}qi=H}}}var qx={getCacheForType:function(a){var l=Oi(Wa),f=l.data.get(a);return f===void 0&&(f=a(),l.data.set(a,f)),f},cacheSignal:function(){return Oi(Wa).controller.signal}},Gx=typeof WeakMap=="function"?WeakMap:Map,ta=0,va=null,vr=null,Cr=0,da=0,al=null,Sd=!1,qA=!1,T=!1,C=0,O=0,R=0,J=0,fe=0,Fe=0,qe=0,Ge=null,mt=null,Et=!1,Ot=0,ns=0,Xs=1/0,Rs=null,ks=null,jn=0,an=null,rn=null,or=0,nr=0,_n=null,en=null,pr=0,Er=null;function Bn(){return(ta&2)!==0&&Cr!==0?Cr&-Cr:se.T!==null?Jx():Ds()}function xi(){if(Fe===0)if((Cr&536870912)===0||xr){var a=vs;vs<<=1,(vs&3932160)===0&&(vs=262144),Fe=a}else Fe=536870912;return a=Oa.current,a!==null&&(a.flags|=32),Fe}function ba(a,l,f){(a===va&&(da===2||da===9)||a.cancelPendingCommit!==null)&&(bl(a,0),yo(a,Cr,Fe,!1)),es(a,f),((ta&2)===0||a!==va)&&(a===va&&((ta&2)===0&&(J|=f),O===4&&yo(a,Cr,Fe,!1)),Cd(a))}function Mo(a,l,f){if((ta&6)!==0)throw Error(r(327));var g=!f&&(l&127)===0&&(l&a.expiredLanes)===0||Ft(a,l),D=g?GA(a,l):zc(a,l,!0),H=g;do{if(D===0){qA&&!g&&yo(a,l,0,!1);break}else{if(f=a.current.alternate,H&&!to(f)){D=zc(a,l,!1),H=!1;continue}if(D===2){if(H=l,a.errorRecoveryDisabledLanes&H)var ue=0;else ue=a.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){l=ue;e:{var De=a;D=Ge;var pt=De.current.memoizedState.isDehydrated;if(pt&&(bl(De,ue).flags|=256),ue=zc(De,ue,!1),ue!==2){if(T&&!pt){De.errorRecoveryDisabledLanes|=H,J|=H,D=4;break e}H=mt,mt=D,H!==null&&(mt===null?mt=H:mt.push.apply(mt,H))}D=ue}if(H=!1,D!==2)continue}}if(D===1){bl(a,0),yo(a,l,0,!0);break}e:{switch(g=a,H=D,H){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:yo(g,l,Fe,!Sd);break e;case 2:mt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(D=Ot+300-qt(),10<D)){if(yo(g,l,Fe,!Sd),kt(g,0,!0)!==0)break e;or=l,g.timeoutHandle=ow(Aa.bind(null,g,f,mt,Rs,Et,l,Fe,J,qe,Sd,H,"Throttled",-0,0),D);break e}Aa(g,f,mt,Rs,Et,l,Fe,J,qe,Sd,H,null,-0,0)}}break}while(!0);Cd(a)}function Aa(a,l,f,g,D,H,ue,De,pt,zt,os,ps,$t,Xt){if(a.timeoutHandle=-1,ps=l.subtreeFlags,ps&8192||(ps&16785408)===16785408){ps={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:nt},cg(l,H,ps);var fn=(H&62914560)===H?Ot-qt():(H&4194048)===H?ns-qt():0;if(fn=f3(ps,fn),fn!==null){or=H,a.cancelPendingCommit=fn(Mj.bind(null,a,l,H,f,g,D,ue,De,pt,os,ps,null,$t,Xt)),yo(a,H,ue,!zt);return}}Mj(a,l,H,f,g,D,ue,De,pt)}function to(a){for(var l=a;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var D=f[g],H=D.getSnapshot;D=D.value;try{if(!Sr(H(),D))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function yo(a,l,f,g){l&=~fe,l&=~J,a.suspendedLanes|=l,a.pingedLanes&=~l,g&&(a.warmLanes|=l),g=a.expirationTimes;for(var D=l;0<D;){var H=31-St(D),ue=1<<H;g[H]=-1,D&=~ue}f!==0&&Us(a,f,l)}function so(){return(ta&6)===0?(Sp(0),!1):!0}function oo(){if(vr!==null){if(da===0)var a=vr.return;else a=vr,fl=lc=null,Yd(a),fs=null,An=0,a=vr;for(;a!==null;)Zm(a.alternate,a),a=a.return;vr=null}}function bl(a,l){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,YR(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),or=0,oo(),va=a,vr=f=Eo(a.current,null),Cr=l,da=0,al=null,Sd=!1,qA=Ft(a,l),T=!1,qe=Fe=fe=J=R=O=0,mt=Ge=null,Et=!1,(l&8)!==0&&(l|=l&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=l;0<g;){var D=31-St(g),H=1<<D;l|=a[D],g&=~H}return C=l,zd(),f}function $l(a,l){En=null,se.H=Mu,l===xt||l===Ze?(l=ls(),da=3):l===_t?(l=ls(),da=4):da=l===cp?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,al=l,vr===null&&(O=1,Hu(a,To(l,a.current)))}function Hc(){var a=Oa.current;return a===null?!0:(Cr&4194048)===Cr?Br===null:(Cr&62914560)===Cr||(Cr&536870912)!==0?a===Br:!1}function Nd(){var a=se.H;return se.H=Mu,a===null?Mu:a}function Bd(){var a=se.A;return se.A=qx,a}function jl(){O=4,Sd||(Cr&4194048)!==Cr&&Oa.current!==null||(qA=!0),(R&134217727)===0&&(J&134217727)===0||va===null||yo(va,Cr,Fe,!1)}function zc(a,l,f){var g=ta;ta|=2;var D=Nd(),H=Bd();(va!==a||Cr!==l)&&(Rs=null,bl(a,l)),l=!1;var ue=O;e:do try{if(da!==0&&vr!==null){var De=vr,pt=al;switch(da){case 8:oo(),ue=6;break e;case 3:case 2:case 9:case 6:Oa.current===null&&(l=!0);var zt=da;if(da=0,al=null,Jh(a,De,pt,zt),f&&qA){ue=0;break e}break;default:zt=da,da=0,al=null,Jh(a,De,pt,zt)}}Kc(),ue=O;break}catch(os){$l(a,os)}while(!0);return l&&a.shellSuspendCounter++,fl=lc=null,ta=g,se.H=D,se.A=H,vr===null&&(va=null,Cr=0,zd()),ue}function Kc(){for(;vr!==null;)Dj(vr)}function GA(a,l){var f=ta;ta|=2;var g=Nd(),D=Bd();va!==a||Cr!==l?(Rs=null,Xs=qt()+500,bl(a,l)):qA=Ft(a,l);e:do try{if(da!==0&&vr!==null){l=vr;var H=al;t:switch(da){case 1:da=0,al=null,Jh(a,l,H,1);break;case 2:case 9:if(Ct(H)){da=0,al=null,Qj(l);break}l=function(){da!==2&&da!==9||va!==a||(da=7),Cd(a)},H.then(l,l);break e;case 3:da=7;break e;case 4:da=5;break e;case 7:Ct(H)?(da=0,al=null,Qj(l)):(da=0,al=null,Jh(a,l,H,7));break;case 5:var ue=null;switch(vr.tag){case 26:ue=vr.memoizedState;case 5:case 27:var De=vr;if(ue?jw(ue):De.stateNode.complete){da=0,al=null;var pt=De.sibling;if(pt!==null)vr=pt;else{var zt=De.return;zt!==null?(vr=zt,ug(zt)):vr=null}break t}}da=0,al=null,Jh(a,l,H,5);break;case 6:da=0,al=null,Jh(a,l,H,6);break;case 8:oo(),O=6;break e;default:throw Error(r(462))}}eh();break}catch(os){$l(a,os)}while(!0);return fl=lc=null,se.H=g,se.A=D,ta=f,vr!==null?0:(va=null,Cr=0,zd(),O)}function eh(){for(;vr!==null&&!tt();)Dj(vr)}function Dj(a){var l=qh(a.alternate,a,C);a.memoizedProps=a.pendingProps,l===null?ug(a):vr=l}function Qj(a){var l=a,f=l.alternate;switch(l.tag){case 15:case 0:l=$A(f,l,l.pendingProps,l.type,void 0,Cr);break;case 11:l=$A(f,l,l.pendingProps,l.type.render,l.ref,Cr);break;case 5:Yd(l);default:Zm(f,l),l=vr=$d(l,C),l=qh(f,l,C)}a.memoizedProps=a.pendingProps,l===null?ug(a):vr=l}function Jh(a,l,f,g){fl=lc=null,Yd(l),fs=null,An=0;var D=l.return;try{if(Kx(a,D,l,f,Cr)){O=1,Hu(a,To(f,a.current)),vr=null;return}}catch(H){if(D!==null)throw vr=D,H;O=1,Hu(a,To(f,a.current)),vr=null;return}l.flags&32768?(xr||g===1?a=!0:qA||(Cr&536870912)!==0?a=!1:(Sd=a=!0,(g===2||g===9||g===3||g===6)&&(g=Oa.current,g!==null&&g.tag===13&&(g.flags|=16384))),_j(l,a)):ug(l)}function ug(a){var l=a;do{if((l.flags&32768)!==0){_j(l,Sd);return}a=l.return;var f=$x(l.alternate,l,C);if(f!==null){vr=f;return}if(l=l.sibling,l!==null){vr=l;return}vr=l=a}while(l!==null);O===0&&(O=5)}function _j(a,l){do{var f=Vx(a.alternate,a);if(f!==null){f.flags&=32767,vr=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(a=a.sibling,a!==null)){vr=a;return}vr=a=f}while(a!==null);O=6,vr=null}function Mj(a,l,f,g,D,H,ue,De,pt){a.cancelPendingCommit=null;do hg();while(jn!==0);if((ta&6)!==0)throw Error(r(327));if(l!==null){if(l===a.current)throw Error(r(177));if(H=l.lanes|l.childLanes,H|=wA,zs(a,f,H,ue,De,pt),a===va&&(vr=va=null,Cr=0),rn=l,an=a,or=f,nr=H,_n=D,en=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,QR(it,function(){return Kj(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=se.T,se.T=null,D=re.p,re.p=2,ue=ta,ta|=4;try{rg(a,l,f)}finally{ta=ue,re.p=D,se.T=g}}jn=1,Pj(),kj(),Hj()}}function Pj(){if(jn===1){jn=0;var a=an,l=rn,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=se.T,se.T=null;var g=re.p;re.p=2;var D=ta;ta|=4;try{Wu(l,a);var H=i0,ue=cl(a.containerInfo),De=H.focusedElem,pt=H.selectionRange;if(ue!==De&&De&&De.ownerDocument&&el(De.ownerDocument.documentElement,De)){if(pt!==null&&dl(De)){var zt=pt.start,os=pt.end;if(os===void 0&&(os=zt),"selectionStart"in De)De.selectionStart=zt,De.selectionEnd=Math.min(os,De.value.length);else{var ps=De.ownerDocument||document,$t=ps&&ps.defaultView||window;if($t.getSelection){var Xt=$t.getSelection(),fn=De.textContent.length,Mn=Math.min(pt.start,fn),Ta=pt.end===void 0?Mn:Math.min(pt.end,fn);!Xt.extend&&Mn>Ta&&(ue=Ta,Ta=Mn,Mn=ue);var It=Ic(De,Mn),wt=Ic(De,Ta);if(It&&wt&&(Xt.rangeCount!==1||Xt.anchorNode!==It.node||Xt.anchorOffset!==It.offset||Xt.focusNode!==wt.node||Xt.focusOffset!==wt.offset)){var Ht=ps.createRange();Ht.setStart(It.node,It.offset),Xt.removeAllRanges(),Mn>Ta?(Xt.addRange(Ht),Xt.extend(wt.node,wt.offset)):(Ht.setEnd(wt.node,wt.offset),Xt.addRange(Ht))}}}}for(ps=[],Xt=De;Xt=Xt.parentNode;)Xt.nodeType===1&&ps.push({element:Xt,left:Xt.scrollLeft,top:Xt.scrollTop});for(typeof De.focus=="function"&&De.focus(),De=0;De<ps.length;De++){var As=ps[De];As.element.scrollLeft=As.left,As.element.scrollTop=As.top}}Ng=!!a0,i0=a0=null}finally{ta=D,re.p=g,se.T=f}}a.current=l,jn=2}}function kj(){if(jn===2){jn=0;var a=an,l=rn,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=se.T,se.T=null;var g=re.p;re.p=2;var D=ta;ta|=4;try{ag(a,l.alternate,l)}finally{ta=D,re.p=g,se.T=f}}jn=3}}function Hj(){if(jn===4||jn===3){jn=0,Lt();var a=an,l=rn,f=or,g=en;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?jn=5:(jn=0,rn=an=null,zj(a,a.pendingLanes));var D=a.pendingLanes;if(D===0&&(ks=null),Os(f),l=l.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Je,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=se.T,D=re.p,re.p=2,se.T=null;try{for(var H=a.onRecoverableError,ue=0;ue<g.length;ue++){var De=g[ue];H(De.value,{componentStack:De.stack})}}finally{se.T=l,re.p=D}}(or&3)!==0&&hg(),Cd(a),D=a.pendingLanes,(f&261930)!==0&&(D&42)!==0?a===Er?pr++:(pr=0,Er=a):pr=0,Sp(0)}}function zj(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,Gd(l)))}function hg(){return Pj(),kj(),Hj(),Kj()}function Kj(){if(jn!==5)return!1;var a=an,l=nr;nr=0;var f=Os(or),g=se.T,D=re.p;try{re.p=32>f?32:f,se.T=null,f=_n,_n=null;var H=an,ue=or;if(jn=0,rn=an=null,or=0,(ta&6)!==0)throw Error(r(331));var De=ta;if(ta|=4,dg(H.current),lg(H,H.current,ue,f),ta=De,Sp(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Je,H)}catch{}return!0}finally{re.p=D,se.T=g,zj(a,l)}}function $j(a,l,f){l=To(f,l),l=ip(a.stateNode,l,2),a=Un(a,l,2),a!==null&&(es(a,2),Cd(a))}function ja(a,l,f){if(a.tag===3)$j(a,a,f);else for(;l!==null;){if(l.tag===3){$j(l,a,f);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ks===null||!ks.has(g))){a=To(f,a),f=op(2),g=Un(l,f,2),g!==null&&(lp(f,g,l,a),es(g,2),Cd(g));break}}l=l.return}}function Wx(a,l,f){var g=a.pingCache;if(g===null){g=a.pingCache=new Gx;var D=new Set;g.set(l,D)}else D=g.get(l),D===void 0&&(D=new Set,g.set(l,D));D.has(f)||(T=!0,D.add(f),a=UR.bind(null,a,l,f),l.then(a,a))}function UR(a,l,f){var g=a.pingCache;g!==null&&g.delete(l),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,va===a&&(Cr&f)===f&&(O===4||O===3&&(Cr&62914560)===Cr&&300>qt()-Ot?(ta&2)===0&&bl(a,0):fe|=f,qe===Cr&&(qe=0)),Cd(a)}function Vj(a,l){l===0&&(l=Ss()),a=ul(a,l),a!==null&&(es(a,l),Cd(a))}function LR(a){var l=a.memoizedState,f=0;l!==null&&(f=l.retryLane),Vj(a,f)}function DR(a,l){var f=0;switch(a.tag){case 31:case 13:var g=a.stateNode,D=a.memoizedState;D!==null&&(f=D.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(l),Vj(a,f)}function QR(a,l){return Jt(a,l)}var fg=null,Zh=null,Yx=!1,pg=!1,Xx=!1,WA=0;function Cd(a){a!==Zh&&a.next===null&&(Zh===null?fg=Zh=a:Zh=Zh.next=a),pg=!0,Yx||(Yx=!0,MR())}function Sp(a,l){if(!Xx&&pg){Xx=!0;do for(var f=!1,g=fg;g!==null;){if(a!==0){var D=g.pendingLanes;if(D===0)var H=0;else{var ue=g.suspendedLanes,De=g.pingedLanes;H=(1<<31-St(42|a)+1)-1,H&=D&~(ue&~De),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(f=!0,Yj(g,H))}else H=Cr,H=kt(g,g===va?H:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(H&3)===0||Ft(g,H)||(f=!0,Yj(g,H));g=g.next}while(f);Xx=!1}}function _R(){qj()}function qj(){pg=Yx=!1;var a=0;WA!==0&&WR()&&(a=WA);for(var l=qt(),f=null,g=fg;g!==null;){var D=g.next,H=Gj(g,l);H===0?(g.next=null,f===null?fg=D:f.next=D,D===null&&(Zh=f)):(f=g,(a!==0||(H&3)!==0)&&(pg=!0)),g=D}jn!==0&&jn!==5||Sp(a),WA!==0&&(WA=0)}function Gj(a,l){for(var f=a.suspendedLanes,g=a.pingedLanes,D=a.expirationTimes,H=a.pendingLanes&-62914561;0<H;){var ue=31-St(H),De=1<<ue,pt=D[ue];pt===-1?((De&f)===0||(De&g)!==0)&&(D[ue]=is(De,l)):pt<=l&&(a.expiredLanes|=De),H&=~De}if(l=va,f=Cr,f=kt(a,a===l?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,f===0||a===l&&(da===2||da===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&gt(g),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||Ft(a,f)){if(l=f&-f,l===a.callbackPriority)return l;switch(g!==null&&gt(g),Os(f)){case 2:case 8:f=hs;break;case 32:f=it;break;case 268435456:f=dt;break;default:f=it}return g=Wj.bind(null,a),f=Jt(f,g),a.callbackPriority=l,a.callbackNode=f,l}return g!==null&&g!==null&&gt(g),a.callbackPriority=2,a.callbackNode=null,2}function Wj(a,l){if(jn!==0&&jn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(hg()&&a.callbackNode!==f)return null;var g=Cr;return g=kt(a,a===va?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(Mo(a,g,l),Gj(a,qt()),a.callbackNode!=null&&a.callbackNode===f?Wj.bind(null,a):null)}function Yj(a,l){if(hg())return null;Mo(a,l,!0)}function MR(){XR(function(){(ta&6)!==0?Jt(xs,_R):qj()})}function Jx(){if(WA===0){var a=E;a===0&&(a=Vt,Vt<<=1,(Vt&261888)===0&&(Vt=256)),WA=a}return WA}function Xj(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:_e(""+a)}function Jj(a,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,a.id&&f.setAttribute("form",a.id),l.parentNode.insertBefore(f,l),a=new FormData(a),f.parentNode.removeChild(f),a}function PR(a,l,f,g,D){if(l==="submit"&&f&&f.stateNode===D){var H=Xj((D[ws]||null).action),ue=g.submitter;ue&&(l=(l=ue[ws]||null)?Xj(l.formAction):ue.getAttribute("formAction"),l!==null&&(H=l,ue=null));var De=new L("action","action",null,g,D);a.push({event:De,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(WA!==0){var pt=ue?Jj(D,ue):new FormData(D);Ph(f,{pending:!0,data:pt,method:D.method,action:H},null,pt)}}else typeof H=="function"&&(De.preventDefault(),pt=ue?Jj(D,ue):new FormData(D),Ph(f,{pending:!0,data:pt,method:D.method,action:H},H,pt))},currentTarget:D}]})}}for(var Zx=0;Zx<nc.length;Zx++){var e0=nc[Zx],kR=e0.toLowerCase(),HR=e0[0].toUpperCase()+e0.slice(1);uo(kR,"on"+HR)}uo(Rc,"onAnimationEnd"),uo(sc,"onAnimationIteration"),uo(Su,"onAnimationStart"),uo("dblclick","onDoubleClick"),uo("focusin","onFocus"),uo("focusout","onBlur"),uo(Nu,"onTransitionRun"),uo(Bu,"onTransitionStart"),uo(Cu,"onTransitionCancel"),uo(bA,"onTransitionEnd"),kr("onMouseEnter",["mouseout","mouseover"]),kr("onMouseLeave",["mouseout","mouseover"]),kr("onPointerEnter",["pointerout","pointerover"]),kr("onPointerLeave",["pointerout","pointerover"]),Pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Np="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Np));function Zj(a,l){l=(l&4)!==0;for(var f=0;f<a.length;f++){var g=a[f],D=g.event;g=g.listeners;e:{var H=void 0;if(l)for(var ue=g.length-1;0<=ue;ue--){var De=g[ue],pt=De.instance,zt=De.currentTarget;if(De=De.listener,pt!==H&&D.isPropagationStopped())break e;H=De,D.currentTarget=zt;try{H(D)}catch(os){od(os)}D.currentTarget=null,H=pt}else for(ue=0;ue<g.length;ue++){if(De=g[ue],pt=De.instance,zt=De.currentTarget,De=De.listener,pt!==H&&D.isPropagationStopped())break e;H=De,D.currentTarget=zt;try{H(D)}catch(os){od(os)}D.currentTarget=null,H=pt}}}}function Or(a,l){var f=l[ys];f===void 0&&(f=l[ys]=new Set);var g=a+"__bubble";f.has(g)||(ew(l,a,2,!1),f.add(g))}function t0(a,l,f){var g=0;l&&(g|=4),ew(f,a,g,l)}var mg="_reactListening"+Math.random().toString(36).slice(2);function s0(a){if(!a[mg]){a[mg]=!0,Bs.forEach(function(f){f!=="selectionchange"&&(zR.has(f)||t0(f,!1,a),t0(f,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[mg]||(l[mg]=!0,t0("selectionchange",!1,l))}}function ew(a,l,f,g){switch(Tw(l)){case 2:var D=g3;break;case 8:D=y3;break;default:D=g0}f=D.bind(null,l,f,a),D=void 0,!Ps||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(D=!0),g?D!==void 0?a.addEventListener(l,f,{capture:!0,passive:D}):a.addEventListener(l,f,!0):D!==void 0?a.addEventListener(l,f,{passive:D}):a.addEventListener(l,f,!1)}function n0(a,l,f,g,D){var H=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var ue=g.tag;if(ue===3||ue===4){var De=g.stateNode.containerInfo;if(De===D)break;if(ue===4)for(ue=g.return;ue!==null;){var pt=ue.tag;if((pt===3||pt===4)&&ue.stateNode.containerInfo===D)return;ue=ue.return}for(;De!==null;){if(ue=tr(De),ue===null)return;if(pt=ue.tag,pt===5||pt===6||pt===26||pt===27){g=H=ue;continue e}De=De.parentNode}}g=g.return}ln(function(){var zt=H,os=Te(f),ps=[];e:{var $t=jA.get(a);if($t!==void 0){var Xt=L,fn=a;switch(a){case"keypress":if(N(f)===0)break e;case"keydown":case"keyup":Xt=Fr;break;case"focusin":fn="focus",Xt=Zs;break;case"focusout":fn="blur",Xt=Zs;break;case"beforeblur":case"afterblur":Xt=Zs;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xt=Dt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xt=cs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xt=mi;break;case Rc:case sc:case Su:Xt=$;break;case bA:Xt=Ci;break;case"scroll":case"scrollend":Xt=z;break;case"wheel":Xt=Yo;break;case"copy":case"cut":case"paste":Xt=Ve;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xt=qa;break;case"toggle":case"beforetoggle":Xt=Hd}var Mn=(l&4)!==0,Ta=!Mn&&(a==="scroll"||a==="scrollend"),It=Mn?$t!==null?$t+"Capture":null:$t;Mn=[];for(var wt=zt,Ht;wt!==null;){var As=wt;if(Ht=As.stateNode,As=As.tag,As!==5&&As!==26&&As!==27||Ht===null||It===null||(As=Ln(wt,It),As!=null&&Mn.push(Bp(wt,As,Ht))),Ta)break;wt=wt.return}0<Mn.length&&($t=new Xt($t,fn,null,f,os),ps.push({event:$t,listeners:Mn}))}}if((l&7)===0){e:{if($t=a==="mouseover"||a==="pointerover",Xt=a==="mouseout"||a==="pointerout",$t&&f!==V&&(fn=f.relatedTarget||f.fromElement)&&(tr(fn)||fn[Ts]))break e;if((Xt||$t)&&($t=os.window===os?os:($t=os.ownerDocument)?$t.defaultView||$t.parentWindow:window,Xt?(fn=f.relatedTarget||f.toElement,Xt=zt,fn=fn?tr(fn):null,fn!==null&&(Ta=c(fn),Mn=fn.tag,fn!==Ta||Mn!==5&&Mn!==27&&Mn!==6)&&(fn=null)):(Xt=null,fn=zt),Xt!==fn)){if(Mn=Dt,As="onMouseLeave",It="onMouseEnter",wt="mouse",(a==="pointerout"||a==="pointerover")&&(Mn=qa,As="onPointerLeave",It="onPointerEnter",wt="pointer"),Ta=Xt==null?$t:bn(Xt),Ht=fn==null?$t:bn(fn),$t=new Mn(As,wt+"leave",Xt,f,os),$t.target=Ta,$t.relatedTarget=Ht,As=null,tr(os)===zt&&(Mn=new Mn(It,wt+"enter",fn,f,os),Mn.target=Ht,Mn.relatedTarget=Ta,As=Mn),Ta=As,Xt&&fn)t:{for(Mn=KR,It=Xt,wt=fn,Ht=0,As=It;As;As=Mn(As))Ht++;As=0;for(var On=wt;On;On=Mn(On))As++;for(;0<Ht-As;)It=Mn(It),Ht--;for(;0<As-Ht;)wt=Mn(wt),As--;for(;Ht--;){if(It===wt||wt!==null&&It===wt.alternate){Mn=It;break t}It=Mn(It),wt=Mn(wt)}Mn=null}else Mn=null;Xt!==null&&tw(ps,$t,Xt,Mn,!1),fn!==null&&Ta!==null&&tw(ps,Ta,fn,Mn,!0)}}e:{if($t=zt?bn(zt):window,Xt=$t.nodeName&&$t.nodeName.toLowerCase(),Xt==="select"||Xt==="input"&&$t.type==="file")var ra=Co;else if(No($t))if(ir)ra=Ei;else{ra=Pa;var wn=Tc}else Xt=$t.nodeName,!Xt||Xt.toLowerCase()!=="input"||$t.type!=="checkbox"&&$t.type!=="radio"?zt&&Va(zt.elementType)&&(ra=Co):ra=Yi;if(ra&&(ra=ra(a,zt))){Lr(ps,ra,f,os);break e}wn&&wn(a,$t,zt),a==="focusout"&&zt&&$t.type==="number"&&zt.memoizedProps.value!=null&&Na($t,"number",$t.value)}switch(wn=zt?bn(zt):window,a){case"focusin":(No(wn)||wn.contentEditable==="true")&&(Ga=wn,Ll=zt,ki=null);break;case"focusout":ki=Ll=Ga=null;break;case"mousedown":Xi=!0;break;case"contextmenu":case"mouseup":case"dragend":Xi=!1,Dr(ps,f,os);break;case"selectionchange":if(tl)break;case"keydown":case"keyup":Dr(ps,f,os)}var dr;if(wo)e:{switch(a){case"compositionstart":var _r="onCompositionStart";break e;case"compositionend":_r="onCompositionEnd";break e;case"compositionupdate":_r="onCompositionUpdate";break e}_r=void 0}else Xo?ec(a,f)&&(_r="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(_r="onCompositionStart");_r&&(Ao&&f.locale!=="ko"&&(Xo||_r!=="onCompositionStart"?_r==="onCompositionEnd"&&Xo&&(dr=v()):(Hn=os,qn="value"in Hn?Hn.value:Hn.textContent,Xo=!0)),wn=gg(zt,_r),0<wn.length&&(_r=new Bt(_r,a,null,f,os),ps.push({event:_r,listeners:wn}),dr?_r.data=dr:(dr=tc(f),dr!==null&&(_r.data=dr)))),(dr=Zl?ni(a,f):bi(a,f))&&(_r=gg(zt,"onBeforeInput"),0<_r.length&&(wn=new Bt("onBeforeInput","beforeinput",null,f,os),ps.push({event:wn,listeners:_r}),wn.data=dr)),PR(ps,a,zt,f,os)}Zj(ps,l)})}function Bp(a,l,f){return{instance:a,listener:l,currentTarget:f}}function gg(a,l){for(var f=l+"Capture",g=[];a!==null;){var D=a,H=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||H===null||(D=Ln(a,f),D!=null&&g.unshift(Bp(a,D,H)),D=Ln(a,l),D!=null&&g.push(Bp(a,D,H))),a.tag===3)return g;a=a.return}return[]}function KR(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function tw(a,l,f,g,D){for(var H=l._reactName,ue=[];f!==null&&f!==g;){var De=f,pt=De.alternate,zt=De.stateNode;if(De=De.tag,pt!==null&&pt===g)break;De!==5&&De!==26&&De!==27||zt===null||(pt=zt,D?(zt=Ln(f,H),zt!=null&&ue.unshift(Bp(f,zt,pt))):D||(zt=Ln(f,H),zt!=null&&ue.push(Bp(f,zt,pt)))),f=f.return}ue.length!==0&&a.push({event:l,listeners:ue})}var $R=/\r\n?/g,VR=/\u0000|\uFFFD/g;function sw(a){return(typeof a=="string"?a:""+a).replace($R,`
`).replace(VR,"")}function nw(a,l){return l=sw(l),sw(a)===l}function Ea(a,l,f,g,D,H){switch(f){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||er(a,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&er(a,""+g);break;case"className":Is(a,"class",g);break;case"tabIndex":Is(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Is(a,f,g);break;case"style":$a(a,g,H);break;case"data":if(l!=="object"){Is(a,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||f!=="href")){a.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=_e(""+g),a.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof H=="function"&&(f==="formAction"?(l!=="input"&&Ea(a,l,"name",D.name,D,null),Ea(a,l,"formEncType",D.formEncType,D,null),Ea(a,l,"formMethod",D.formMethod,D,null),Ea(a,l,"formTarget",D.formTarget,D,null)):(Ea(a,l,"encType",D.encType,D,null),Ea(a,l,"method",D.method,D,null),Ea(a,l,"target",D.target,D,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=_e(""+g),a.setAttribute(f,g);break;case"onClick":g!=null&&(a.onclick=nt);break;case"onScroll":g!=null&&Or("scroll",a);break;case"onScrollEnd":g!=null&&Or("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(D.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}f=_e(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""+g):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":g===!0?a.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,g):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(f,g):a.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(f):a.setAttribute(f,g);break;case"popover":Or("beforetoggle",a),Or("toggle",a),tn(a,"popover",g);break;case"xlinkActuate":dn(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":dn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":dn(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":dn(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":dn(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":dn(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":dn(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":dn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":dn(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":tn(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=ti.get(f)||f,tn(a,f,g))}}function r0(a,l,f,g,D,H){switch(f){case"style":$a(a,g,H);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(D.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"children":typeof g=="string"?er(a,g):(typeof g=="number"||typeof g=="bigint")&&er(a,""+g);break;case"onScroll":g!=null&&Or("scroll",a);break;case"onScrollEnd":g!=null&&Or("scrollend",a);break;case"onClick":g!=null&&(a.onclick=nt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Js.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(D=f.endsWith("Capture"),l=f.slice(2,D?f.length-7:void 0),H=a[ws]||null,H=H!=null?H[f]:null,typeof H=="function"&&a.removeEventListener(l,H,D),typeof g=="function")){typeof H!="function"&&H!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(l,g,D);break e}f in a?a[f]=g:g===!0?a.setAttribute(f,""):tn(a,f,g)}}}function xo(a,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Or("error",a),Or("load",a);var g=!1,D=!1,H;for(H in f)if(f.hasOwnProperty(H)){var ue=f[H];if(ue!=null)switch(H){case"src":g=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Ea(a,l,H,ue,f,null)}}D&&Ea(a,l,"srcSet",f.srcSet,f,null),g&&Ea(a,l,"src",f.src,f,null);return;case"input":Or("invalid",a);var De=H=ue=D=null,pt=null,zt=null;for(g in f)if(f.hasOwnProperty(g)){var os=f[g];if(os!=null)switch(g){case"name":D=os;break;case"type":ue=os;break;case"checked":pt=os;break;case"defaultChecked":zt=os;break;case"value":H=os;break;case"defaultValue":De=os;break;case"children":case"dangerouslySetInnerHTML":if(os!=null)throw Error(r(137,l));break;default:Ea(a,l,g,os,f,null)}}Ma(a,H,De,pt,zt,ue,D,!1);return;case"select":Or("invalid",a),g=ue=H=null;for(D in f)if(f.hasOwnProperty(D)&&(De=f[D],De!=null))switch(D){case"value":H=De;break;case"defaultValue":ue=De;break;case"multiple":g=De;default:Ea(a,l,D,De,f,null)}l=H,f=ue,a.multiple=!!g,l!=null?cr(a,!!g,l,!1):f!=null&&cr(a,!!g,f,!0);return;case"textarea":Or("invalid",a),H=D=g=null;for(ue in f)if(f.hasOwnProperty(ue)&&(De=f[ue],De!=null))switch(ue){case"value":g=De;break;case"defaultValue":D=De;break;case"children":H=De;break;case"dangerouslySetInnerHTML":if(De!=null)throw Error(r(91));break;default:Ea(a,l,ue,De,f,null)}pa(a,g,D,H);return;case"option":for(pt in f)if(f.hasOwnProperty(pt)&&(g=f[pt],g!=null))switch(pt){case"selected":a.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Ea(a,l,pt,g,f,null)}return;case"dialog":Or("beforetoggle",a),Or("toggle",a),Or("cancel",a),Or("close",a);break;case"iframe":case"object":Or("load",a);break;case"video":case"audio":for(g=0;g<Np.length;g++)Or(Np[g],a);break;case"image":Or("error",a),Or("load",a);break;case"details":Or("toggle",a);break;case"embed":case"source":case"link":Or("error",a),Or("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(zt in f)if(f.hasOwnProperty(zt)&&(g=f[zt],g!=null))switch(zt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Ea(a,l,zt,g,f,null)}return;default:if(Va(l)){for(os in f)f.hasOwnProperty(os)&&(g=f[os],g!==void 0&&r0(a,l,os,g,f,void 0));return}}for(De in f)f.hasOwnProperty(De)&&(g=f[De],g!=null&&Ea(a,l,De,g,f,null))}function qR(a,l,f,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,H=null,ue=null,De=null,pt=null,zt=null,os=null;for(Xt in f){var ps=f[Xt];if(f.hasOwnProperty(Xt)&&ps!=null)switch(Xt){case"checked":break;case"value":break;case"defaultValue":pt=ps;default:g.hasOwnProperty(Xt)||Ea(a,l,Xt,null,g,ps)}}for(var $t in g){var Xt=g[$t];if(ps=f[$t],g.hasOwnProperty($t)&&(Xt!=null||ps!=null))switch($t){case"type":H=Xt;break;case"name":D=Xt;break;case"checked":zt=Xt;break;case"defaultChecked":os=Xt;break;case"value":ue=Xt;break;case"defaultValue":De=Xt;break;case"children":case"dangerouslySetInnerHTML":if(Xt!=null)throw Error(r(137,l));break;default:Xt!==ps&&Ea(a,l,$t,Xt,g,ps)}}ha(a,ue,De,pt,zt,os,H,D);return;case"select":Xt=ue=De=$t=null;for(H in f)if(pt=f[H],f.hasOwnProperty(H)&&pt!=null)switch(H){case"value":break;case"multiple":Xt=pt;default:g.hasOwnProperty(H)||Ea(a,l,H,null,g,pt)}for(D in g)if(H=g[D],pt=f[D],g.hasOwnProperty(D)&&(H!=null||pt!=null))switch(D){case"value":$t=H;break;case"defaultValue":De=H;break;case"multiple":ue=H;default:H!==pt&&Ea(a,l,D,H,g,pt)}l=De,f=ue,g=Xt,$t!=null?cr(a,!!f,$t,!1):!!g!=!!f&&(l!=null?cr(a,!!f,l,!0):cr(a,!!f,f?[]:"",!1));return;case"textarea":Xt=$t=null;for(De in f)if(D=f[De],f.hasOwnProperty(De)&&D!=null&&!g.hasOwnProperty(De))switch(De){case"value":break;case"children":break;default:Ea(a,l,De,null,g,D)}for(ue in g)if(D=g[ue],H=f[ue],g.hasOwnProperty(ue)&&(D!=null||H!=null))switch(ue){case"value":$t=D;break;case"defaultValue":Xt=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:D!==H&&Ea(a,l,ue,D,g,H)}Ka(a,$t,Xt);return;case"option":for(var fn in f)if($t=f[fn],f.hasOwnProperty(fn)&&$t!=null&&!g.hasOwnProperty(fn))switch(fn){case"selected":a.selected=!1;break;default:Ea(a,l,fn,null,g,$t)}for(pt in g)if($t=g[pt],Xt=f[pt],g.hasOwnProperty(pt)&&$t!==Xt&&($t!=null||Xt!=null))switch(pt){case"selected":a.selected=$t&&typeof $t!="function"&&typeof $t!="symbol";break;default:Ea(a,l,pt,$t,g,Xt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mn in f)$t=f[Mn],f.hasOwnProperty(Mn)&&$t!=null&&!g.hasOwnProperty(Mn)&&Ea(a,l,Mn,null,g,$t);for(zt in g)if($t=g[zt],Xt=f[zt],g.hasOwnProperty(zt)&&$t!==Xt&&($t!=null||Xt!=null))switch(zt){case"children":case"dangerouslySetInnerHTML":if($t!=null)throw Error(r(137,l));break;default:Ea(a,l,zt,$t,g,Xt)}return;default:if(Va(l)){for(var Ta in f)$t=f[Ta],f.hasOwnProperty(Ta)&&$t!==void 0&&!g.hasOwnProperty(Ta)&&r0(a,l,Ta,void 0,g,$t);for(os in g)$t=g[os],Xt=f[os],!g.hasOwnProperty(os)||$t===Xt||$t===void 0&&Xt===void 0||r0(a,l,os,$t,g,Xt);return}}for(var It in f)$t=f[It],f.hasOwnProperty(It)&&$t!=null&&!g.hasOwnProperty(It)&&Ea(a,l,It,null,g,$t);for(ps in g)$t=g[ps],Xt=f[ps],!g.hasOwnProperty(ps)||$t===Xt||$t==null&&Xt==null||Ea(a,l,ps,$t,g,Xt)}function rw(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function GR(){if(typeof performance.getEntriesByType=="function"){for(var a=0,l=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var D=f[g],H=D.transferSize,ue=D.initiatorType,De=D.duration;if(H&&De&&rw(ue)){for(ue=0,De=D.responseEnd,g+=1;g<f.length;g++){var pt=f[g],zt=pt.startTime;if(zt>De)break;var os=pt.transferSize,ps=pt.initiatorType;os&&rw(ps)&&(pt=pt.responseEnd,ue+=os*(pt<De?1:(De-zt)/(pt-zt)))}if(--g,l+=8*(H+ue)/(D.duration/1e3),a++,10<a)break}}if(0<a)return l/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var a0=null,i0=null;function yg(a){return a.nodeType===9?a:a.ownerDocument}function aw(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iw(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function o0(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var l0=null;function WR(){var a=window.event;return a&&a.type==="popstate"?a===l0?!1:(l0=a,!0):(l0=null,!1)}var ow=typeof setTimeout=="function"?setTimeout:void 0,YR=typeof clearTimeout=="function"?clearTimeout:void 0,lw=typeof Promise=="function"?Promise:void 0,XR=typeof queueMicrotask=="function"?queueMicrotask:typeof lw<"u"?function(a){return lw.resolve(null).then(a).catch(JR)}:ow;function JR(a){setTimeout(function(){throw a})}function YA(a){return a==="head"}function cw(a,l){var f=l,g=0;do{var D=f.nextSibling;if(a.removeChild(f),D&&D.nodeType===8)if(f=D.data,f==="/$"||f==="/&"){if(g===0){a.removeChild(D),nf(l);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Cp(a.ownerDocument.documentElement);else if(f==="head"){f=a.ownerDocument.head,Cp(f);for(var H=f.firstChild;H;){var ue=H.nextSibling,De=H.nodeName;H[Cn]||De==="SCRIPT"||De==="STYLE"||De==="LINK"&&H.rel.toLowerCase()==="stylesheet"||f.removeChild(H),H=ue}}else f==="body"&&Cp(a.ownerDocument.body);f=D}while(f);nf(l)}function dw(a,l){var f=a;a=0;do{var g=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(a===0)break;a--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||a++;f=g}while(f)}function c0(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":c0(f),na(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function ZR(a,l,f,g){for(;a.nodeType===1;){var D=f;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[Cn])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(H=a.getAttribute("rel"),H==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(H!==D.rel||a.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||a.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||a.getAttribute("title")!==(D.title==null?null:D.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(H=a.getAttribute("src"),(H!==(D.src==null?null:D.src)||a.getAttribute("type")!==(D.type==null?null:D.type)||a.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&H&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var H=D.name==null?null:""+D.name;if(D.type==="hidden"&&a.getAttribute("name")===H)return a}else return a;if(a=gc(a.nextSibling),a===null)break}return null}function e3(a,l,f){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=gc(a.nextSibling),a===null))return null;return a}function Aw(a,l){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=gc(a.nextSibling),a===null))return null;return a}function d0(a){return a.data==="$?"||a.data==="$~"}function A0(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function t3(a,l){var f=a.ownerDocument;if(a.data==="$~")a._reactRetry=l;else if(a.data!=="$?"||f.readyState!=="loading")l();else{var g=function(){l(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function gc(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return a}var u0=null;function uw(a){a=a.nextSibling;for(var l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"||f==="/&"){if(l===0)return gc(a.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}a=a.nextSibling}return null}function hw(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return a;l--}else f!=="/$"&&f!=="/&"||l++}a=a.previousSibling}return null}function fw(a,l,f){switch(l=yg(f),a){case"html":if(a=l.documentElement,!a)throw Error(r(452));return a;case"head":if(a=l.head,!a)throw Error(r(453));return a;case"body":if(a=l.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Cp(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);na(a)}var yc=new Map,pw=new Set;function xg(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var aA=re.d;re.d={f:s3,r:n3,D:r3,C:a3,L:i3,m:o3,X:c3,S:l3,M:d3};function s3(){var a=aA.f(),l=so();return a||l}function n3(a){var l=Mt(a);l!==null&&l.tag===5&&l.type==="form"?zm(l):aA.r(a)}var ef=typeof document>"u"?null:document;function mw(a,l,f){var g=ef;if(g&&typeof l=="string"&&l){var D=sr(l);D='link[rel="'+a+'"][href="'+D+'"]',typeof f=="string"&&(D+='[crossorigin="'+f+'"]'),pw.has(D)||(pw.add(D),a={rel:a,crossOrigin:f,href:l},g.querySelector(D)===null&&(l=g.createElement("link"),xo(l,"link",a),lr(l),g.head.appendChild(l)))}}function r3(a){aA.D(a),mw("dns-prefetch",a,null)}function a3(a,l){aA.C(a,l),mw("preconnect",a,l)}function i3(a,l,f){aA.L(a,l,f);var g=ef;if(g&&a&&l){var D='link[rel="preload"][as="'+sr(l)+'"]';l==="image"&&f&&f.imageSrcSet?(D+='[imagesrcset="'+sr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(D+='[imagesizes="'+sr(f.imageSizes)+'"]')):D+='[href="'+sr(a)+'"]';var H=D;switch(l){case"style":H=tf(a);break;case"script":H=sf(a)}yc.has(H)||(a=m({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:a,as:l},f),yc.set(H,a),g.querySelector(D)!==null||l==="style"&&g.querySelector(Ep(H))||l==="script"&&g.querySelector(Tp(H))||(l=g.createElement("link"),xo(l,"link",a),lr(l),g.head.appendChild(l)))}}function o3(a,l){aA.m(a,l);var f=ef;if(f&&a){var g=l&&typeof l.as=="string"?l.as:"script",D='link[rel="modulepreload"][as="'+sr(g)+'"][href="'+sr(a)+'"]',H=D;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":H=sf(a)}if(!yc.has(H)&&(a=m({rel:"modulepreload",href:a},l),yc.set(H,a),f.querySelector(D)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Tp(H)))return}g=f.createElement("link"),xo(g,"link",a),lr(g),f.head.appendChild(g)}}}function l3(a,l,f){aA.S(a,l,f);var g=ef;if(g&&a){var D=Tr(g).hoistableStyles,H=tf(a);l=l||"default";var ue=D.get(H);if(!ue){var De={loading:0,preload:null};if(ue=g.querySelector(Ep(H)))De.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":l},f),(f=yc.get(H))&&h0(a,f);var pt=ue=g.createElement("link");lr(pt),xo(pt,"link",a),pt._p=new Promise(function(zt,os){pt.onload=zt,pt.onerror=os}),pt.addEventListener("load",function(){De.loading|=1}),pt.addEventListener("error",function(){De.loading|=2}),De.loading|=4,vg(ue,l,g)}ue={type:"stylesheet",instance:ue,count:1,state:De},D.set(H,ue)}}}function c3(a,l){aA.X(a,l);var f=ef;if(f&&a){var g=Tr(f).hoistableScripts,D=sf(a),H=g.get(D);H||(H=f.querySelector(Tp(D)),H||(a=m({src:a,async:!0},l),(l=yc.get(D))&&f0(a,l),H=f.createElement("script"),lr(H),xo(H,"link",a),f.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},g.set(D,H))}}function d3(a,l){aA.M(a,l);var f=ef;if(f&&a){var g=Tr(f).hoistableScripts,D=sf(a),H=g.get(D);H||(H=f.querySelector(Tp(D)),H||(a=m({src:a,async:!0,type:"module"},l),(l=yc.get(D))&&f0(a,l),H=f.createElement("script"),lr(H),xo(H,"link",a),f.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},g.set(D,H))}}function gw(a,l,f,g){var D=(D=Le.current)?xg(D):null;if(!D)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=tf(f.href),f=Tr(D).hoistableStyles,g=f.get(l),g||(g={type:"style",instance:null,count:0,state:null},f.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=tf(f.href);var H=Tr(D).hoistableStyles,ue=H.get(a);if(ue||(D=D.ownerDocument||D,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},H.set(a,ue),(H=D.querySelector(Ep(a)))&&!H._p&&(ue.instance=H,ue.state.loading=5),yc.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},yc.set(a,f),H||A3(D,a,f,ue.state))),l&&g===null)throw Error(r(528,""));return ue}if(l&&g!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=sf(f),f=Tr(D).hoistableScripts,g=f.get(l),g||(g={type:"script",instance:null,count:0,state:null},f.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function tf(a){return'href="'+sr(a)+'"'}function Ep(a){return'link[rel="stylesheet"]['+a+"]"}function yw(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function A3(a,l,f,g){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=a.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),xo(l,"link",f),lr(l),a.head.appendChild(l))}function sf(a){return'[src="'+sr(a)+'"]'}function Tp(a){return"script[async]"+a}function xw(a,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var g=a.querySelector('style[data-href~="'+sr(f.href)+'"]');if(g)return l.instance=g,lr(g),g;var D=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),lr(g),xo(g,"style",D),vg(g,f.precedence,a),l.instance=g;case"stylesheet":D=tf(f.href);var H=a.querySelector(Ep(D));if(H)return l.state.loading|=4,l.instance=H,lr(H),H;g=yw(f),(D=yc.get(D))&&h0(g,D),H=(a.ownerDocument||a).createElement("link"),lr(H);var ue=H;return ue._p=new Promise(function(De,pt){ue.onload=De,ue.onerror=pt}),xo(H,"link",g),l.state.loading|=4,vg(H,f.precedence,a),l.instance=H;case"script":return H=sf(f.src),(D=a.querySelector(Tp(H)))?(l.instance=D,lr(D),D):(g=f,(D=yc.get(H))&&(g=m({},f),f0(g,D)),a=a.ownerDocument||a,D=a.createElement("script"),lr(D),xo(D,"link",g),a.head.appendChild(D),l.instance=D);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,vg(g,f.precedence,a));return l.instance}function vg(a,l,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=g.length?g[g.length-1]:null,H=D,ue=0;ue<g.length;ue++){var De=g[ue];if(De.dataset.precedence===l)H=De;else if(H!==D)break}H?H.parentNode.insertBefore(a,H.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(a,l.firstChild))}function h0(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function f0(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var bg=null;function vw(a,l,f){if(bg===null){var g=new Map,D=bg=new Map;D.set(f,g)}else D=bg,g=D.get(f),g||(g=new Map,D.set(f,g));if(g.has(a))return g;for(g.set(a,null),f=f.getElementsByTagName(a),D=0;D<f.length;D++){var H=f[D];if(!(H[Cn]||H[Kt]||a==="link"&&H.getAttribute("rel")==="stylesheet")&&H.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=H.getAttribute(l)||"";ue=a+ue;var De=g.get(ue);De?De.push(H):g.set(ue,[H])}}return g}function bw(a,l,f){a=a.ownerDocument||a,a.head.insertBefore(f,l==="title"?a.querySelector("head > title"):null)}function u3(a,l,f){if(f===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function jw(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function h3(a,l,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var D=tf(g.href),H=l.querySelector(Ep(D));if(H){l=H._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(a.count++,a=jg.bind(a),l.then(a,a)),f.state.loading|=4,f.instance=H,lr(H);return}H=l.ownerDocument||l,g=yw(g),(D=yc.get(D))&&h0(g,D),H=H.createElement("link"),lr(H);var ue=H;ue._p=new Promise(function(De,pt){ue.onload=De,ue.onerror=pt}),xo(H,"link",g),f.instance=H}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(a.count++,f=jg.bind(a),l.addEventListener("load",f),l.addEventListener("error",f))}}var p0=0;function f3(a,l){return a.stylesheets&&a.count===0&&Sg(a,a.stylesheets),0<a.count||0<a.imgCount?function(f){var g=setTimeout(function(){if(a.stylesheets&&Sg(a,a.stylesheets),a.unsuspend){var H=a.unsuspend;a.unsuspend=null,H()}},6e4+l);0<a.imgBytes&&p0===0&&(p0=62500*GR());var D=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Sg(a,a.stylesheets),a.unsuspend)){var H=a.unsuspend;a.unsuspend=null,H()}},(a.imgBytes>p0?50:800)+l);return a.unsuspend=f,function(){a.unsuspend=null,clearTimeout(g),clearTimeout(D)}}:null}function jg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sg(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var wg=null;function Sg(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,wg=new Map,l.forEach(p3,a),wg=null,jg.call(a))}function p3(a,l){if(!(l.state.loading&4)){var f=wg.get(a);if(f)var g=f.get(null);else{f=new Map,wg.set(a,f);for(var D=a.querySelectorAll("link[data-precedence],style[data-precedence]"),H=0;H<D.length;H++){var ue=D[H];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(f.set(ue.dataset.precedence,ue),g=ue)}g&&f.set(null,g)}D=l.instance,ue=D.getAttribute("data-precedence"),H=f.get(ue)||g,H===g&&f.set(null,D),f.set(ue,D),this.count++,g=jg.bind(this),D.addEventListener("load",g),D.addEventListener("error",g),H?H.parentNode.insertBefore(D,H.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(D,a.firstChild)),l.state.loading|=4}}var Fp={$$typeof:Q,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function m3(a,l,f,g,D,H,ue,De,pt){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nn(0),this.hiddenUpdates=nn(null),this.identifierPrefix=g,this.onUncaughtError=D,this.onCaughtError=H,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pt,this.incompleteTransitions=new Map}function ww(a,l,f,g,D,H,ue,De,pt,zt,os,ps){return a=new m3(a,l,f,ue,pt,zt,os,ps,De),l=1,H===!0&&(l|=24),H=zi(3,null,null,l),a.current=H,H.stateNode=a,l=Ad(),l.refCount++,a.pooledCache=l,l.refCount++,H.memoizedState={element:g,isDehydrated:f,cache:l},_s(H),a}function Sw(a){return a?(a=Fi,a):Fi}function Nw(a,l,f,g,D,H){D=Sw(D),g.context===null?g.context=D:g.pendingContext=D,g=In(l),g.payload={element:f},H=H===void 0?null:H,H!==null&&(g.callback=H),f=Un(a,g,l),f!==null&&(ba(f,a,l),Jr(f,a,l))}function Bw(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<l?f:l}}function m0(a,l){Bw(a,l),(a=a.alternate)&&Bw(a,l)}function Cw(a){if(a.tag===13||a.tag===31){var l=ul(a,67108864);l!==null&&ba(l,a,67108864),m0(a,67108864)}}function Ew(a){if(a.tag===13||a.tag===31){var l=Bn();l=js(l);var f=ul(a,l);f!==null&&ba(f,a,l),m0(a,l)}}var Ng=!0;function g3(a,l,f,g){var D=se.T;se.T=null;var H=re.p;try{re.p=2,g0(a,l,f,g)}finally{re.p=H,se.T=D}}function y3(a,l,f,g){var D=se.T;se.T=null;var H=re.p;try{re.p=8,g0(a,l,f,g)}finally{re.p=H,se.T=D}}function g0(a,l,f,g){if(Ng){var D=y0(g);if(D===null)n0(a,l,g,Bg,f),Fw(a,g);else if(v3(D,a,l,f,g))g.stopPropagation();else if(Fw(a,g),l&4&&-1<x3.indexOf(a)){for(;D!==null;){var H=Mt(D);if(H!==null)switch(H.tag){case 3:if(H=H.stateNode,H.current.memoizedState.isDehydrated){var ue=jt(H.pendingLanes);if(ue!==0){var De=H;for(De.pendingLanes|=2,De.entangledLanes|=2;ue;){var pt=1<<31-St(ue);De.entanglements[1]|=pt,ue&=~pt}Cd(H),(ta&6)===0&&(Xs=qt()+500,Sp(0))}}break;case 31:case 13:De=ul(H,2),De!==null&&ba(De,H,2),so(),m0(H,2)}if(H=y0(g),H===null&&n0(a,l,g,Bg,f),H===D)break;D=H}D!==null&&g.stopPropagation()}else n0(a,l,g,null,f)}}function y0(a){return a=Te(a),x0(a)}var Bg=null;function x0(a){if(Bg=null,a=tr(a),a!==null){var l=c(a);if(l===null)a=null;else{var f=l.tag;if(f===13){if(a=A(l),a!==null)return a;a=null}else if(f===31){if(a=u(l),a!==null)return a;a=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return Bg=a,null}function Tw(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fs()){case xs:return 2;case hs:return 8;case it:case Pe:return 32;case dt:return 268435456;default:return 32}default:return 32}}var v0=!1,XA=null,JA=null,ZA=null,Ip=new Map,Rp=new Map,eu=[],x3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fw(a,l){switch(a){case"focusin":case"focusout":XA=null;break;case"dragenter":case"dragleave":JA=null;break;case"mouseover":case"mouseout":ZA=null;break;case"pointerover":case"pointerout":Ip.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rp.delete(l.pointerId)}}function Op(a,l,f,g,D,H){return a===null||a.nativeEvent!==H?(a={blockedOn:l,domEventName:f,eventSystemFlags:g,nativeEvent:H,targetContainers:[D]},l!==null&&(l=Mt(l),l!==null&&Cw(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,D!==null&&l.indexOf(D)===-1&&l.push(D),a)}function v3(a,l,f,g,D){switch(l){case"focusin":return XA=Op(XA,a,l,f,g,D),!0;case"dragenter":return JA=Op(JA,a,l,f,g,D),!0;case"mouseover":return ZA=Op(ZA,a,l,f,g,D),!0;case"pointerover":var H=D.pointerId;return Ip.set(H,Op(Ip.get(H)||null,a,l,f,g,D)),!0;case"gotpointercapture":return H=D.pointerId,Rp.set(H,Op(Rp.get(H)||null,a,l,f,g,D)),!0}return!1}function Iw(a){var l=tr(a.target);if(l!==null){var f=c(l);if(f!==null){if(l=f.tag,l===13){if(l=A(f),l!==null){a.blockedOn=l,ut(a.priority,function(){Ew(f)});return}}else if(l===31){if(l=u(f),l!==null){a.blockedOn=l,ut(a.priority,function(){Ew(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Cg(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var f=y0(a.nativeEvent);if(f===null){f=a.nativeEvent;var g=new f.constructor(f.type,f);V=g,f.target.dispatchEvent(g),V=null}else return l=Mt(f),l!==null&&Cw(l),a.blockedOn=f,!1;l.shift()}return!0}function Rw(a,l,f){Cg(a)&&f.delete(l)}function b3(){v0=!1,XA!==null&&Cg(XA)&&(XA=null),JA!==null&&Cg(JA)&&(JA=null),ZA!==null&&Cg(ZA)&&(ZA=null),Ip.forEach(Rw),Rp.forEach(Rw)}function Eg(a,l){a.blockedOn===l&&(a.blockedOn=null,v0||(v0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,b3)))}var Tg=null;function Ow(a){Tg!==a&&(Tg=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Tg===a&&(Tg=null);for(var l=0;l<a.length;l+=3){var f=a[l],g=a[l+1],D=a[l+2];if(typeof g!="function"){if(x0(g||f)===null)continue;break}var H=Mt(f);H!==null&&(a.splice(l,3),l-=3,Ph(H,{pending:!0,data:D,method:f.method,action:g},g,D))}}))}function nf(a){function l(pt){return Eg(pt,a)}XA!==null&&Eg(XA,a),JA!==null&&Eg(JA,a),ZA!==null&&Eg(ZA,a),Ip.forEach(l),Rp.forEach(l);for(var f=0;f<eu.length;f++){var g=eu[f];g.blockedOn===a&&(g.blockedOn=null)}for(;0<eu.length&&(f=eu[0],f.blockedOn===null);)Iw(f),f.blockedOn===null&&eu.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var D=f[g],H=f[g+1],ue=D[ws]||null;if(typeof H=="function")ue||Ow(f);else if(ue){var De=null;if(H&&H.hasAttribute("formAction")){if(D=H,ue=H[ws]||null)De=ue.formAction;else if(x0(D)!==null)continue}else De=ue.action;typeof De=="function"?f[g+1]=De:(f.splice(g,3),g-=3),Ow(f)}}}function Uw(){function a(H){H.canIntercept&&H.info==="react-transition"&&H.intercept({handler:function(){return new Promise(function(ue){return D=ue})},focusReset:"manual",scroll:"manual"})}function l(){D!==null&&(D(),D=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var H=navigation.currentEntry;H&&H.url!=null&&navigation.navigate(H.url,{state:H.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,D=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),D!==null&&(D(),D=null)}}}function b0(a){this._internalRoot=a}Fg.prototype.render=b0.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,g=Bn();Nw(f,g,a,l,null,null)},Fg.prototype.unmount=b0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;Nw(a.current,2,null,a,null,null),so(),l[Ts]=null}};function Fg(a){this._internalRoot=a}Fg.prototype.unstable_scheduleHydration=function(a){if(a){var l=Ds();a={blockedOn:null,target:a,priority:l};for(var f=0;f<eu.length&&l!==0&&l<eu[f].priority;f++);eu.splice(f,0,a),f===0&&Iw(a)}};var Lw=s.version;if(Lw!=="19.2.0")throw Error(r(527,Lw,"19.2.0"));re.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=h(l),a=a!==null?o(a):null,a=a===null?null:a.stateNode,a};var j3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ig=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ig.isDisabled&&Ig.supportsFiber)try{Je=Ig.inject(j3),vt=Ig}catch{}}return Lp.createRoot=function(a,l){if(!i(a))throw Error(r(299));var f=!1,g="",D=qm,H=Pu,ue=ku;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(D=l.onUncaughtError),l.onCaughtError!==void 0&&(H=l.onCaughtError),l.onRecoverableError!==void 0&&(ue=l.onRecoverableError)),l=ww(a,1,!1,null,null,f,g,null,D,H,ue,Uw),a[Ts]=l.current,s0(a),new b0(l)},Lp.hydrateRoot=function(a,l,f){if(!i(a))throw Error(r(299));var g=!1,D="",H=qm,ue=Pu,De=ku,pt=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(D=f.identifierPrefix),f.onUncaughtError!==void 0&&(H=f.onUncaughtError),f.onCaughtError!==void 0&&(ue=f.onCaughtError),f.onRecoverableError!==void 0&&(De=f.onRecoverableError),f.formState!==void 0&&(pt=f.formState)),l=ww(a,1,!0,l,f??null,g,D,pt,H,ue,De,Uw),l.context=Sw(null),f=l.current,g=Bn(),g=js(g),D=In(g),D.callback=null,Un(f,D,g),f=g,l.current.lanes=f,es(l,f),Cd(l),a[Ts]=l.current,s0(a),new Fg(l)},Lp.version="19.2.0",Lp}var Vw;function O3(){if(Vw)return w0.exports;Vw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),w0.exports=R3(),w0.exports}var U3=O3();function L3(t,s){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,c,A=[],u="",d=t.split("/");for(d[0]||d.shift();i=d.shift();)n=i[0],n==="*"?(A.push(n),u+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=i.indexOf("?",1),c=i.indexOf(".",1),A.push(i.substring(1,~r?r:~c?c:i.length)),u+=~r&&!~c?"(?:/([^/]+?))?":"/([^/]+?)",~c&&(u+=(~r?"?":"")+"\\"+i.substring(c))):u+="/"+i;return{keys:A,pattern:new RegExp("^"+u+(s?"(?=$|/)":"/?$"),"i")}}var S=rx();const Vo=l1(S),xA=S3({__proto__:null,default:Vo},[S]);var E0={exports:{}},T0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qw;function D3(){if(qw)return T0;qw=1;var t=rx();function s(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var n=typeof Object.is=="function"?Object.is:s,r=t.useState,i=t.useEffect,c=t.useLayoutEffect,A=t.useDebugValue;function u(m,y){var p=y(),j=r({inst:{value:p,getSnapshot:y}}),b=j[0].inst,w=j[1];return c(function(){b.value=p,b.getSnapshot=y,d(b)&&w({inst:b})},[m,p,y]),i(function(){return d(b)&&w({inst:b}),m(function(){d(b)&&w({inst:b})})},[m]),A(p),p}function d(m){var y=m.getSnapshot;m=m.value;try{var p=y();return!n(m,p)}catch{return!0}}function h(m,y){return y()}var o=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return T0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:o,T0}var Gw;function Q3(){return Gw||(Gw=1,E0.exports=D3()),E0.exports}var _3=Q3();const M3=xA.useInsertionEffect,P3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",k3=P3?S.useLayoutEffect:S.useEffect,H3=M3||k3,nC=t=>{const s=S.useRef([t,(...n)=>s[0](...n)]).current;return H3(()=>{s[0]=t}),s[1]},z3="popstate",c1="pushState",d1="replaceState",K3="hashchange",Ww=[z3,c1,d1,K3],$3=t=>{for(const s of Ww)addEventListener(s,t);return()=>{for(const s of Ww)removeEventListener(s,t)}},rC=(t,s)=>_3.useSyncExternalStore($3,t,s),V3=()=>location.search,q3=({ssrSearch:t=""}={})=>rC(V3,()=>t),Yw=()=>location.pathname,G3=({ssrPath:t}={})=>rC(Yw,t?()=>t:Yw),W3=(t,{replace:s=!1,state:n=null}={})=>history[s?d1:c1](n,"",t),Y3=(t={})=>[G3(t),W3],Xw=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Xw]>"u"){for(const t of[c1,d1]){const s=history[t];history[t]=function(){const n=s.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Xw,{value:!0})}const X3=(t,s)=>s.toLowerCase().indexOf(t.toLowerCase())?"~"+s:s.slice(t.length)||"/",aC=(t="")=>t==="/"?"":t,J3=(t,s)=>t[0]==="~"?t.slice(1):aC(s)+t,Z3=(t="",s)=>X3(Jw(aC(t)),Jw(s)),Jw=t=>{try{return decodeURI(t)}catch{return t}},iC={hook:Y3,searchHook:q3,parser:L3,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},oC=S.createContext(iC),Lf=()=>S.useContext(oC),lC={},cC=S.createContext(lC),eO=()=>S.useContext(cC),ax=t=>{const[s,n]=t.hook(t);return[Z3(t.base,s),nC((r,i)=>n(J3(r,t.base),i))]},co=()=>ax(Lf()),A1=(t,s,n,r)=>{const{pattern:i,keys:c}=s instanceof RegExp?{keys:!1,pattern:s}:t(s||"*",r),A=i.exec(n)||[],[u,...d]=A;return u!==void 0?[!0,(()=>{const h=c!==!1?Object.fromEntries(c.map((m,y)=>[m,d[y]])):A.groups;let o={...d};return h&&Object.assign(o,h),o})(),...r?[u]:[]]:[!1,null]},tO=t=>A1(Lf().parser,t,co()[0]),sO=({children:t,...s})=>{const n=Lf(),r=s.hook?iC:n;let i=r;const[c,A]=s.ssrPath?.split("?")??[];A&&(s.ssrSearch=A,s.ssrPath=c),s.hrefs=s.hrefs??s.hook?.hrefs;let u=S.useRef({}),d=u.current,h=d;for(let o in r){const m=o==="base"?r[o]+(s[o]||""):s[o]||r[o];d===h&&m!==h[o]&&(u.current=h={...h}),h[o]=m,m!==r[o]&&(i=h)}return S.createElement(oC.Provider,{value:i,children:t})},Zw=({children:t,component:s},n)=>s?S.createElement(s,{params:n}):typeof t=="function"?t(n):t,nO=t=>{let s=S.useRef(lC),n=s.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),s.current=n},mr=({path:t,nest:s,match:n,...r})=>{const i=Lf(),[c]=ax(i),[A,u,d]=n??A1(i.parser,t,c,s),h=nO({...eO(),...u});if(!A)return null;const o=d?S.createElement(sO,{base:d},Zw(r,h)):Zw(r,h);return S.createElement(cC.Provider,{value:h,children:o})},ia=S.forwardRef((t,s)=>{const n=Lf(),[r,i]=ax(n),{to:c="",href:A=c,onClick:u,asChild:d,children:h,className:o,replace:m,state:y,...p}=t,j=nC(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(u?.(w),w.defaultPrevented||(w.preventDefault(),i(A,t)))}),b=n.hrefs(A[0]==="~"?A.slice(1):n.base+A,n);return d&&S.isValidElement(h)?S.cloneElement(h,{onClick:j,href:b}):S.createElement("a",{...p,onClick:j,href:b,className:o?.call?o(r===A):o,children:h,ref:s})}),dC=t=>Array.isArray(t)?t.flatMap(s=>dC(s&&s.type===S.Fragment?s.props.children:s)):[t],rO=({children:t,location:s})=>{const n=Lf(),[r]=ax(n);for(const i of dC(t)){let c=0;if(S.isValidElement(i)&&(c=A1(n.parser,i.props.path,s||r,i.props.nest))[0])return S.cloneElement(i,{match:c})}return null};var jm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mh=typeof window>"u"||"Deno"in globalThis;function jc(){}function aO(t,s){return typeof t=="function"?t(s):t}function Gv(t){return typeof t=="number"&&t>=0&&t!==1/0}function AC(t,s){return Math.max(t+(s||0)-Date.now(),0)}function jf(t,s){return typeof t=="function"?t(s):t}function Wc(t,s){return typeof t=="function"?t(s):t}function e2(t,s){const{type:n="all",exact:r,fetchStatus:i,predicate:c,queryKey:A,stale:u}=t;if(A){if(r){if(s.queryHash!==u1(A,s.options))return!1}else if(!cm(s.queryKey,A))return!1}if(n!=="all"){const d=s.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof u=="boolean"&&s.isStale()!==u||i&&i!==s.state.fetchStatus||c&&!c(s))}function t2(t,s){const{exact:n,status:r,predicate:i,mutationKey:c}=t;if(c){if(!s.options.mutationKey)return!1;if(n){if(lm(s.options.mutationKey)!==lm(c))return!1}else if(!cm(s.options.mutationKey,c))return!1}return!(r&&s.state.status!==r||i&&!i(s))}function u1(t,s){return(s?.queryKeyHashFn||lm)(t)}function lm(t){return JSON.stringify(t,(s,n)=>Yv(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function cm(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?!Object.keys(s).some(n=>!cm(t[n],s[n])):!1}function uC(t,s){if(t===s)return t;const n=s2(t)&&s2(s);if(n||Yv(t)&&Yv(s)){const r=n?t:Object.keys(t),i=r.length,c=n?s:Object.keys(s),A=c.length,u=n?[]:{};let d=0;for(let h=0;h<A;h++){const o=n?h:c[h];(!n&&r.includes(o)||n)&&t[o]===void 0&&s[o]===void 0?(u[o]=void 0,d++):(u[o]=uC(t[o],s[o]),u[o]===t[o]&&t[o]!==void 0&&d++)}return i===A&&d===i?t:u}return s}function Wv(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}function s2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Yv(t){if(!n2(t))return!1;const s=t.constructor;if(s===void 0)return!0;const n=s.prototype;return!(!n2(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function n2(t){return Object.prototype.toString.call(t)==="[object Object]"}function iO(t){return new Promise(s=>{setTimeout(s,t)})}function Xv(t,s,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,s):n.structuralSharing!==!1?uC(t,s):s}function oO(t,s,n=0){const r=[...t,s];return n&&r.length>n?r.slice(1):r}function lO(t,s,n=0){const r=[s,...t];return n&&r.length>n?r.slice(0,-1):r}var h1=Symbol();function hC(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===h1?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var cO=class extends jm{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!mh&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},f1=new cO,dO=class extends jm{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!mh&&window.addEventListener){const s=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Uy=new dO;function Jv(){let t,s;const n=new Promise((i,c)=>{t=i,s=c});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),s(i)},n}function AO(t){return Math.min(1e3*2**t,3e4)}function fC(t){return(t??"online")==="online"?Uy.isOnline():!0}var pC=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function F0(t){return t instanceof pC}function mC(t){let s=!1,n=0,r=!1,i;const c=Jv(),A=b=>{r||(y(new pC(b)),t.abort?.())},u=()=>{s=!0},d=()=>{s=!1},h=()=>f1.isFocused()&&(t.networkMode==="always"||Uy.isOnline())&&t.canRun(),o=()=>fC(t.networkMode)&&t.canRun(),m=b=>{r||(r=!0,t.onSuccess?.(b),i?.(),c.resolve(b))},y=b=>{r||(r=!0,t.onError?.(b),i?.(),c.reject(b))},p=()=>new Promise(b=>{i=w=>{(r||h())&&b(w)},t.onPause?.()}).then(()=>{i=void 0,r||t.onContinue?.()}),j=()=>{if(r)return;let b;const w=n===0?t.initialPromise:void 0;try{b=w??t.fn()}catch(B){b=Promise.reject(B)}Promise.resolve(b).then(m).catch(B=>{if(r)return;const U=t.retry??(mh?0:3),Q=t.retryDelay??AO,k=typeof Q=="function"?Q(n,B):Q,K=U===!0||typeof U=="number"&&n<U||typeof U=="function"&&U(n,B);if(s||!K){y(B);return}n++,t.onFail?.(n,B),iO(k).then(()=>h()?void 0:p()).then(()=>{s?y(B):j()})})};return{promise:c,cancel:A,continue:()=>(i?.(),c),cancelRetry:u,continueRetry:d,canStart:o,start:()=>(o()?j():p().then(j),c)}}function uO(){let t=[],s=0,n=u=>{u()},r=u=>{u()},i=u=>setTimeout(u,0);const c=u=>{s?t.push(u):i(()=>{n(u)})},A=()=>{const u=t;t=[],u.length&&i(()=>{r(()=>{u.forEach(d=>{n(d)})})})};return{batch:u=>{let d;s++;try{d=u()}finally{s--,s||A()}return d},batchCalls:u=>(...d)=>{c(()=>{u(...d)})},schedule:c,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{i=u}}}var jo=uO(),gC=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Gv(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(mh?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},hO=class extends gC{#e;#t;#n;#s;#i;#a;constructor(t){super(),this.#a=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=fO(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,s){const n=Xv(this.state.data,t,this.options);return this.#r({data:n,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),n}setState(t,s){this.#r({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#s?.promise;return this.#s?.cancel(t),s?s.then(jc).catch(jc):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Wc(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===h1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!AC(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}fetch(t,s){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(d=>d.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,r=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},i=()=>{const u=hC(this.options,s),d={queryKey:this.queryKey,meta:this.meta};return r(d),this.#a=!1,this.options.persister?this.options.persister(u,d,this):u(d)},c={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(c),this.options.behavior?.onFetch(c,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#r({type:"fetch",meta:c.fetchOptions?.meta});const A=u=>{F0(u)&&u.silent||this.#r({type:"error",error:u}),F0(u)||(this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this)),this.scheduleGc()};return this.#s=mC({initialPromise:s?.initialPromise,fn:c.fetchFn,abort:n.abort.bind(n),onSuccess:u=>{if(u===void 0){A(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(d){A(d);return}this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),this.scheduleGc()},onError:A,onFail:(u,d)=>{this.#r({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}),this.#s.start()}#r(t){const s=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...yC(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return F0(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=s(this.state),jo.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function yC(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:fC(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function fO(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,n=s!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var pO=class extends jm{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,s,n){const r=s.queryKey,i=s.queryHash??u1(r,s);let c=this.get(i);return c||(c=new hO({cache:this,queryKey:r,queryHash:i,options:t.defaultQueryOptions(s),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(c)),c}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#e.get(t.queryHash);s&&(t.destroy(),s===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){jo.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(n=>e2(s,n))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(n=>e2(t,n)):s}notify(t){jo.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){jo.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){jo.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},mO=class extends gC{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||gO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(s=>s!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=mC({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,i)=>{this.#s({type:"failed",failureCount:r,error:i})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const s=this.state.status==="pending",n=!this.#n.canStart();try{if(!s){this.#s({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#s({type:"pending",context:i,variables:t,isPaused:n})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#s({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#s({type:"error",error:r})}}finally{this.#t.runNext(this)}}#s(t){const s=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),jo.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function gO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yO=class extends jm{constructor(t={}){super(),this.config=t,this.#e=new Map,this.#t=Date.now()}#e;#t;build(t,s,n){const r=new mO({mutationCache:this,mutationId:++this.#t,options:t.defaultMutationOptions(s),state:n});return this.add(r),r}add(t){const s=Rg(t),n=this.#e.get(s)??[];n.push(t),this.#e.set(s,n),this.notify({type:"added",mutation:t})}remove(t){const s=Rg(t);if(this.#e.has(s)){const n=this.#e.get(s)?.filter(r=>r!==t);n&&(n.length===0?this.#e.delete(s):this.#e.set(s,n))}this.notify({type:"removed",mutation:t})}canRun(t){const s=this.#e.get(Rg(t))?.find(n=>n.state.status==="pending");return!s||s===t}runNext(t){return this.#e.get(Rg(t))?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){jo.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...this.#e.values()].flat()}find(t){const s={exact:!0,...t};return this.getAll().find(n=>t2(s,n))}findAll(t={}){return this.getAll().filter(s=>t2(t,s))}notify(t){jo.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return jo.batch(()=>Promise.all(t.map(s=>s.continue().catch(jc))))}};function Rg(t){return t.options.scope?.id??String(t.mutationId)}function r2(t){return{onFetch:(s,n)=>{const r=s.options,i=s.fetchOptions?.meta?.fetchMore?.direction,c=s.state.data?.pages||[],A=s.state.data?.pageParams||[];let u={pages:[],pageParams:[]},d=0;const h=async()=>{let o=!1;const m=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(s.signal.aborted?o=!0:s.signal.addEventListener("abort",()=>{o=!0}),s.signal)})},y=hC(s.options,s.fetchOptions),p=async(j,b,w)=>{if(o)return Promise.reject();if(b==null&&j.pages.length)return Promise.resolve(j);const B={queryKey:s.queryKey,pageParam:b,direction:w?"backward":"forward",meta:s.options.meta};m(B);const U=await y(B),{maxPages:Q}=s.options,k=w?lO:oO;return{pages:k(j.pages,U,Q),pageParams:k(j.pageParams,b,Q)}};if(i&&c.length){const j=i==="backward",b=j?xO:a2,w={pages:c,pageParams:A},B=b(r,w);u=await p(w,B,j)}else{const j=t??c.length;do{const b=d===0?A[0]??r.initialPageParam:a2(r,u);if(d>0&&b==null)break;u=await p(u,b),d++}while(d<j)}return u};s.options.persister?s.fetchFn=()=>s.options.persister?.(h,{queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},n):s.fetchFn=h}}}function a2(t,{pages:s,pageParams:n}){const r=s.length-1;return s.length>0?t.getNextPageParam(s[r],s,n[r],n):void 0}function xO(t,{pages:s,pageParams:n}){return s.length>0?t.getPreviousPageParam?.(s[0],s,n[0],n):void 0}var vO=class{#e;#t;#n;#s;#i;#a;#r;#o;constructor(t={}){this.#e=t.queryCache||new pO,this.#t=t.mutationCache||new yO,this.#n=t.defaultOptions||{},this.#s=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#r=f1.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=Uy.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#r?.(),this.#r=void 0,this.#o?.(),this.#o=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.getQueryData(t.queryKey);if(s===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=this.#e.build(this,n);return t.revalidateIfStale&&r.isStaleByTime(jf(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(s)}}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:s,state:n})=>{const r=n.data;return[s,r]})}setQueryData(t,s,n){const r=this.defaultQueryOptions({queryKey:t}),c=this.#e.get(r.queryHash)?.state.data,A=aO(s,c);if(A!==void 0)return this.#e.build(this,r).setData(A,{...n,manual:!0})}setQueriesData(t,s,n){return jo.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,s,n)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state}removeQueries(t){const s=this.#e;jo.batch(()=>{s.findAll(t).forEach(n=>{s.remove(n)})})}resetQueries(t,s){const n=this.#e,r={type:"active",...t};return jo.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,s)))}cancelQueries(t={},s={}){const n={revert:!0,...s},r=jo.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(jc).catch(jc)}invalidateQueries(t={},s={}){return jo.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,s)})}refetchQueries(t={},s){const n={...s,cancelRefetch:s?.cancelRefetch??!0},r=jo.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()).map(i=>{let c=i.fetch(void 0,n);return n.throwOnError||(c=c.catch(jc)),i.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(r).then(jc)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const n=this.#e.build(this,s);return n.isStaleByTime(jf(s.staleTime,n))?n.fetch(s):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(jc).catch(jc)}fetchInfiniteQuery(t){return t.behavior=r2(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(jc).catch(jc)}ensureInfiniteQueryData(t){return t.behavior=r2(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Uy.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,s){this.#s.set(lm(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#s.values()];let n={};return s.forEach(r=>{cm(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,s){this.#i.set(lm(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#i.values()];let n={};return s.forEach(r=>{cm(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=u1(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.enabled!==!0&&s.queryFn===h1&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},bO=class extends jm{constructor(t,s){super(),this.options=s,this.#e=t,this.#o=null,this.#r=Jv(),this.options.experimental_prefetchInRender||this.#r.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}#e;#t=void 0;#n=void 0;#s=void 0;#i;#a;#r;#o;#p;#u;#h;#c;#d;#l;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),i2(this.#t,this.options)?this.#A():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Zv(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Zv(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#b(),this.#t.removeObserver(this)}setOptions(t,s){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wc(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),n._defaulted&&!Wv(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&o2(this.#t,r,this.options,n)&&this.#A(),this.updateResult(s),i&&(this.#t!==r||Wc(this.options.enabled,this.#t)!==Wc(n.enabled,this.#t)||jf(this.options.staleTime,this.#t)!==jf(n.staleTime,this.#t))&&this.#m();const c=this.#g();i&&(this.#t!==r||Wc(this.options.enabled,this.#t)!==Wc(n.enabled,this.#t)||c!==this.#l)&&this.#y(c)}getOptimisticResult(t){const s=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(s,t);return wO(this,n)&&(this.#s=n,this.#a=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#s}trackResult(t,s){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),s?.(r),t[r])})}),n}trackProp(t){this.#f.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,s);return n.fetch().then(()=>this.createResult(n,s))}fetch(t){return this.#A({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#A(t){this.#j();let s=this.#t.fetch(this.options,t);return t?.throwOnError||(s=s.catch(jc)),s}#m(){this.#v();const t=jf(this.options.staleTime,this.#t);if(mh||this.#s.isStale||!Gv(t))return;const n=AC(this.#s.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#s.isStale||this.updateResult()},n)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#b(),this.#l=t,!(mh||Wc(this.options.enabled,this.#t)===!1||!Gv(this.#l)||this.#l===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||f1.isFocused())&&this.#A()},this.#l))}#x(){this.#m(),this.#y(this.#g())}#v(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#b(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(t,s){const n=this.#t,r=this.options,i=this.#s,c=this.#i,A=this.#a,d=t!==n?t.state:this.#n,{state:h}=t;let o={...h},m=!1,y;if(s._optimisticResults){const q=this.hasListeners(),G=!q&&i2(t,s),W=q&&o2(t,n,s,r);(G||W)&&(o={...o,...yC(h.data,t.options)}),s._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:p,errorUpdatedAt:j,status:b}=o;if(s.select&&o.data!==void 0)if(i&&o.data===c?.data&&s.select===this.#p)y=this.#u;else try{this.#p=s.select,y=s.select(o.data),y=Xv(i?.data,y,s),this.#u=y,this.#o=null}catch(q){this.#o=q}else y=o.data;if(s.placeholderData!==void 0&&y===void 0&&b==="pending"){let q;if(i?.isPlaceholderData&&s.placeholderData===A?.placeholderData)q=i.data;else if(q=typeof s.placeholderData=="function"?s.placeholderData(this.#h?.state.data,this.#h):s.placeholderData,s.select&&q!==void 0)try{q=s.select(q),this.#o=null}catch(G){this.#o=G}q!==void 0&&(b="success",y=Xv(i?.data,q,s),m=!0)}this.#o&&(p=this.#o,y=this.#u,j=Date.now(),b="error");const w=o.fetchStatus==="fetching",B=b==="pending",U=b==="error",Q=B&&w,k=y!==void 0,ee={status:b,fetchStatus:o.fetchStatus,isPending:B,isSuccess:b==="success",isError:U,isInitialLoading:Q,isLoading:Q,data:y,dataUpdatedAt:o.dataUpdatedAt,error:p,errorUpdatedAt:j,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>d.dataUpdateCount||o.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&!B,isLoadingError:U&&!k,isPaused:o.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:U&&k,isStale:p1(t,s),refetch:this.refetch,promise:this.#r};if(this.options.experimental_prefetchInRender){const q=he=>{ee.status==="error"?he.reject(ee.error):ee.data!==void 0&&he.resolve(ee.data)},G=()=>{const he=this.#r=ee.promise=Jv();q(he)},W=this.#r;switch(W.status){case"pending":t.queryHash===n.queryHash&&q(W);break;case"fulfilled":(ee.status==="error"||ee.data!==W.value)&&G();break;case"rejected":(ee.status!=="error"||ee.error!==W.reason)&&G();break}}return ee}updateResult(t){const s=this.#s,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#a=this.options,this.#i.data!==void 0&&(this.#h=this.#t),Wv(n,s))return;this.#s=n;const r={},i=()=>{if(!s)return!0;const{notifyOnChangeProps:c}=this.options,A=typeof c=="function"?c():c;if(A==="all"||!A&&!this.#f.size)return!0;const u=new Set(A??this.#f);return this.options.throwOnError&&u.add("error"),Object.keys(this.#s).some(d=>{const h=d;return this.#s[h]!==s[h]&&u.has(h)})};t?.listeners!==!1&&i()&&(r.listeners=!0),this.#w({...r,...t})}#j(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const s=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#w(t){jo.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function jO(t,s){return Wc(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function i2(t,s){return jO(t,s)||t.state.data!==void 0&&Zv(t,s,s.refetchOnMount)}function Zv(t,s,n){if(Wc(s.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&p1(t,s)}return!1}function o2(t,s,n,r){return(t!==s||Wc(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&p1(t,n)}function p1(t,s){return Wc(s.enabled,t)!==!1&&t.isStaleByTime(jf(s.staleTime,t))}function wO(t,s){return!Wv(t.getCurrentResult(),s)}var xC=S.createContext(void 0),SO=t=>{const s=S.useContext(xC);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},NO=({client:t,children:s})=>(S.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(xC.Provider,{value:t,children:s})),vC=S.createContext(!1),BO=()=>S.useContext(vC);vC.Provider;function CO(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var EO=S.createContext(CO()),TO=()=>S.useContext(EO);function FO(t,s){return typeof t=="function"?t(...s):!!t}function l2(){}var IO=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},RO=t=>{S.useEffect(()=>{t.clearReset()},[t])},OO=({result:t,errorResetBoundary:s,throwOnError:n,query:r})=>t.isError&&!s.isReset()&&!t.isFetching&&r&&FO(n,[t.error,r]),UO=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},LO=(t,s)=>t.isLoading&&t.isFetching&&!s,DO=(t,s)=>t?.suspense&&s.isPending,c2=(t,s,n)=>s.fetchOptimistic(t).catch(()=>{n.clearReset()});function QO(t,s,n){const r=SO(),i=BO(),c=TO(),A=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(A),A._optimisticResults=i?"isRestoring":"optimistic",UO(A),IO(A,c),RO(c);const u=!r.getQueryCache().get(A.queryHash),[d]=S.useState(()=>new s(r,A)),h=d.getOptimisticResult(A);if(S.useSyncExternalStore(S.useCallback(o=>{const m=i?l2:d.subscribe(jo.batchCalls(o));return d.updateResult(),m},[d,i]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),S.useEffect(()=>{d.setOptions(A,{listeners:!1})},[A,d]),DO(A,h))throw c2(A,d,c);if(OO({result:h,errorResetBoundary:c,throwOnError:A.throwOnError,query:r.getQueryCache().get(A.queryHash)}))throw h.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(A,h),A.experimental_prefetchInRender&&!mh&&LO(h,i)&&(u?c2(A,d,c):r.getQueryCache().get(A.queryHash)?.promise)?.catch(l2).finally(()=>{d.updateResult()}),A.notifyOnChangeProps?h:d.trackResult(h)}function Og(t,s){return QO(t,bO)}async function _O(t){if(!t.ok){const s=await t.text()||t.statusText;throw new Error(`${t.status}: ${s}`)}}const MO=({on401:t})=>async({queryKey:s})=>{const n=await fetch(s.join("/"),{credentials:"include"});return await _O(n),await n.json()},PO=new vO({defaultOptions:{queries:{queryFn:MO({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),kO={},HO=kO?.VITE_API_BASE_URL?.replace(/\/+$/,"")||"/api";let cy=null;function d2(t){cy=t}function zO(t){return t.startsWith("/")||(t=`/${t}`),t.startsWith("/api/")?t.replace(/^\/api/,""):t==="/api"?"":t}async function bC(t){const s=t.headers.get("content-type")||"",n=await t.text();if(!t.ok)throw new Error(`HTTP ${t.status} ${t.statusText}
Content-Type: ${s}
Body (first 300 chars):
${n.slice(0,300)}`);if(!s.toLowerCase().includes("application/json"))throw new Error(`Expected JSON but got "${s}".
Body (first 300 chars):
${n.slice(0,300)}

Hint: You're likely hitting the FRONTEND (index.html) instead of the BACKEND API.
Set VITE_API_BASE_URL to your backend '/api' or configure a proxy.`);try{return JSON.parse(n)}catch(r){throw new Error(`JSON parse failed: ${r?.message||r}
Body (first 300 chars):
${n.slice(0,300)}`)}}async function lt(t,s){const n=typeof localStorage<"u"?localStorage.getItem("authToken"):null,r=cy||n,i=r?`${r.slice(0,8)}...${r.slice(-8)}`:null,c=new Headers(s?.headers||{});if(!c.has("Content-Type")&&s?.body&&c.set("Content-Type","application/json"),r){c.set("Authorization",`Bearer ${r}`);try{c.set("authorization",`Bearer ${r}`)}catch{}}const A=zO(t),u=`${HO}${A}`;console.log("[apiFetch]","url:",u,"globalToken?",!!cy,"fallbackToken?",!!n,"token:",i);const d=await fetch(u,{...s||{},headers:c});return d.status===401&&(console.log("[apiFetch] 401 received, clearing globalToken"),cy=null),d}async function $o(t){const s=await lt(t,{method:"GET"});return bC(s)}async function Gl(t,s){const n=await lt(t,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});return bC(n)}const jC=S.createContext(void 0),I0="/api";function KO({children:t}){const[s,n]=S.useState(null),[r,i]=S.useState(null),[c,A]=S.useState(!1),[u,d]=S.useState(null);S.useEffect(()=>{const y=localStorage.getItem("authToken");y&&(i(y),d2(y))},[]),S.useEffect(()=>{(async()=>{if(r)try{const p=await fetch(`${I0}/auth/me`,{headers:{Authorization:`Bearer ${r}`}});if(p.ok){const j=await p.json();n(j)}else i(null),localStorage.removeItem("authToken")}catch(p){console.warn("Failed to restore user from token",p)}})()},[r]),S.useEffect(()=>{d2(r),r&&localStorage.setItem("authToken",r)},[r]);const h=async(y,p)=>{A(!0),d(null);try{const j=await fetch(`${I0}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:y,password:p})});if(!j.ok){let U="Login failed";try{U=(await j.json())?.message||U}catch{}throw new Error(U)}const b=await j.json(),w=b.user,B=b.token;return n(w),i(B),{user:w,token:B}}catch(j){throw d(j?.message||"Login failed"),j}finally{A(!1)}},o=async(y,p,j,b,w,B,U,Q,k,K)=>{A(!0),d(null);try{const ee=await fetch(`${I0}/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:y,password:p,role:j||"user",fullName:b||"",mobileNumber:w||"",department:B||"",employeeCode:U||"",companyName:Q||"",gstNumber:k||"",businessAddress:K||""})});if(!ee.ok){let q="Signup failed";try{q=(await ee.json())?.message||q}catch{}throw new Error(q)}await ee.json()}catch(ee){throw d(ee?.message||"Signup failed"),ee}finally{A(!1)}},m=()=>{n(null),i(null);try{localStorage.removeItem("authToken")}catch{}};return e.jsx(jC.Provider,{value:{user:s,token:r,login:h,signup:o,logout:m,isLoading:c,error:u},children:t})}function ix(){const t=S.useContext(jC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const wC=S.createContext(void 0);function $O({children:t}){const s=ix(),[n,r]=S.useState(null),[i,c]=S.useState([]),[A,u]=S.useState([]),[d,h]=S.useState([]),[o,m]=S.useState([]),[y,p]=S.useState([]),[j,b]=S.useState(()=>{try{return JSON.parse(localStorage.getItem("pendingShopRequests")||"[]")}catch{return[]}}),[w,B]=S.useState(()=>{try{return JSON.parse(localStorage.getItem("pendingMaterialRequests")||"[]")}catch{return[]}}),[U,Q]=S.useState([]),[k,K]=S.useState([]),[ee,q]=S.useState(0),[G,W]=S.useState(0);S.useEffect(()=>{s?.user&&r(s.user)},[s?.user]);const he=ge=>({id:ge.id,name:ge.name,code:ge.code,rate:ge.rate,shopId:ge.shop_id||ge.shopId||null,unit:ge.unit,category:ge.category,brandName:ge.brandname||ge.brandName||"",modelNumber:ge.modelnumber||ge.modelNumber||"",subCategory:ge.subcategory||ge.subCategory||"",product:ge.product||"",technicalSpecification:ge.technicalspecification||ge.technicalSpecification||"",image:ge.image,attributes:ge.attributes||{},disabled:ge.disabled||!1,vendorCategory:ge.vendor_category||ge.vendorCategory||"",taxCodeType:ge.tax_code_type||ge.taxCodeType||null,taxCodeValue:ge.tax_code_value||ge.taxCodeValue||""});S.useEffect(()=>{let ge=!0;return(async()=>{try{const ye=await $o("/shops");ge&&ye?.shops&&c(ye.shops.sort((we,Ne)=>(we.name||"").localeCompare(Ne.name||"")))}catch(ye){console.warn("load shops failed",ye)}try{const ye=await $o("/materials");if(ge&&ye?.materials){const we=ye.materials.map(he);u(we.sort((Ne,ke)=>(Ne.name||"").localeCompare(ke.name||"")))}}catch(ye){console.warn("load materials failed",ye)}try{const ye=await $o("/products");ge&&ye?.products&&h(ye.products.sort((we,Ne)=>(we.name||"").localeCompare(Ne.name||"")))}catch(ye){console.warn("load products failed",ye)}try{const ye=await $o("/shops-pending-approval");ge&&ye?.shops&&m(ye.shops)}catch(ye){console.warn("load pending shops failed",ye)}try{const ye=await $o("/materials-pending-approval");if(ge&&ye?.materials){const we=ye.materials.map(Ne=>({id:Ne.id,material:Ne.material||Ne,status:Ne.status||"pending",submittedBy:Ne.submittedBy||"Unknown",submittedAt:Ne.submittedAt||new Date().toISOString()}));Q(we)}}catch(ye){console.warn("load pending materials failed",ye)}try{const ye=await lt("/material-submissions-pending-approval");if(ge&&ye.ok){const Ne=((await ye.json()).submissions||[]).map(ke=>({id:ke.submission.id,status:"pending",source:"submission",material:{id:ke.submission.id,name:ke.submission.template_name||"Supplier Material",code:ke.submission.template_code||"",rate:ke.submission.rate,unit:ke.submission.unit,category:ke.submission.category||ke.submission.template_category||ke.submission.template_category_name||"",subCategory:ke.submission.subcategory||ke.submission.sub_category||"",brandName:ke.submission.brandname||ke.submission.brandName||ke.submission.brand||ke.submission.make||"",modelNumber:ke.submission.modelnumber||ke.submission.modelNumber||"",technicalSpecification:ke.submission.technicalspecification||ke.submission.technicalSpecification||""},submittedBy:ke.submission.shop_name||"Supplier",submittedAt:ke.submission.created_at,templateId:ke.submission.template_id,shopId:ke.submission.shop_id}));K(Ne)}}catch(ye){console.warn("load supplier material submissions failed",ye)}try{const ye=await $o("/messages");ge&&ye?.messages&&p(ye.messages)}catch(ye){console.warn("load support messages failed",ye)}})(),()=>{ge=!1}},[]),S.useEffect(()=>{try{localStorage.setItem("pendingShopRequests",JSON.stringify(j))}catch{}},[j]),S.useEffect(()=>{try{localStorage.setItem("pendingMaterialRequests",JSON.stringify(w))}catch{}},[w]);const Z=async()=>{const ge=Date.now();if(!(ge-G<5e3||ee>=10||!(typeof localStorage<"u"&&localStorage.getItem("authToken")))){if(q(we=>we+1),W(ge),j.length>0){const we=[];for(const Ne of j){try{const ke=await se(Ne.shop);if(ke&&ke.id){try{const Be=await $o("/shops-pending-approval");Be?.shops&&m(Be.shops)}catch(Be){console.warn("refresh pending shops failed",Be)}continue}}catch(ke){console.warn("flush pending shop failed",ke)}we.push(Ne)}b(we)}if(w.length>0){const we=[];for(const Ne of w){try{const ke=await re(Ne.material);if(ke&&ke.id){try{const Be=await $o("/materials-pending-approval");Be?.materials&&Q(Be.materials)}catch(Be){console.warn("refresh pending materials failed",Be)}continue}}catch(ke){console.warn("flush pending material failed",ke)}we.push(Ne)}B(we)}}};S.useEffect(()=>{const ge=ye=>{ye.key==="authToken"&&ye.newValue&&Z().catch(we=>console.warn("flush failed",we))};return window.addEventListener("storage",ge),()=>window.removeEventListener("storage",ge)},[]),S.useEffect(()=>{n&&j.length+w.length>0&&Z().catch(()=>{})},[n]);const ie=ge=>r(ge),ce=()=>r(null),ae=async ge=>{const ye=await Gl("/shops",ge);if(ye?.shop)return c(we=>[ye.shop,...we]),ye.shop;throw new Error("addShop: server did not return created shop")},de=async ge=>{const ye=await Gl("/materials",ge);if(ye?.material){const we=he(ye.material);return u(Ne=>[we,...Ne]),ye.material}throw new Error("addMaterial: server did not return created material")},se=async ge=>{try{return(await Gl("/shops",ge))?.shop||null}catch(ye){console.warn("[submitShopForApproval] server submit failed, enqueueing locally",ye?.message||ye);const we={id:Math.random().toString(),shop:ge};return b(Ne=>[we,...Ne]),null}},re=async ge=>{try{return(await Gl("/materials",ge))?.material||null}catch(ye){console.warn("[submitMaterialForApproval] server submit failed, enqueueing locally",ye?.message||ye);const we={id:Math.random().toString(),material:ge};return B(Ne=>[we,...Ne]),null}},te=async ge=>{console.log("[deleteShop] attempting to delete shop",ge);try{const ye=await lt(`/shops/${ge}`,{method:"DELETE"});if(console.log("[deleteShop] response status:",ye.status),ye.ok){console.log("[deleteShop] delete successful, removing from local list"),c(we=>we.filter(Ne=>Ne.id!==ge));return}try{const we=await ye.text();console.warn("[deleteShop] failed:",ye.status,we)}catch{console.warn("[deleteShop] failed:",ye.status)}}catch(ye){console.warn("[deleteShop] exception:",ye)}console.log("[deleteShop] re-syncing from server");try{const ye=await $o("/shops");ye?.shops&&c(ye.shops)}catch(ye){console.warn("refresh shops failed",ye)}},be=async ge=>{console.log("[deleteMaterial] attempting to delete material",ge);try{const ye=await lt(`/materials/${ge}`,{method:"DELETE"});if(console.log("[deleteMaterial] response status:",ye.status),ye.ok){console.log("[deleteMaterial] delete successful, removing from local list"),u(we=>we.filter(Ne=>Ne.id!==ge));return}try{const we=await ye.text();console.warn("[deleteMaterial] failed:",ye.status,we)}catch{console.warn("[deleteMaterial] failed:",ye.status)}}catch(ye){console.warn("[deleteMaterial] exception:",ye)}console.log("[deleteMaterial] re-syncing from server");try{const ye=await $o("/materials");ye?.materials&&u(ye.materials.map(he))}catch(ye){console.warn("refresh materials failed",ye)}},He=async ge=>{const ye=await Gl(`/shops/${ge}/approve`,{});try{const we=await $o("/shops");we?.shops&&c(we.shops)}catch(we){console.warn("approveShop refresh failed",we)}return ye?.shop},pe=async(ge,ye)=>{const we=await Gl(`/shops/${ge}/reject`,{reason:ye});try{const Ne=await $o("/shops");Ne?.shops&&c(Ne.shops)}catch(Ne){console.warn("rejectShop refresh failed",Ne)}return we?.shop},Y=async(ge,ye)=>{let we;if(ye==="submission"?we=await lt(`/material-submissions/${ge}/approve`,{method:"POST"}):we=await lt(`/materials/${ge}/approve`,{method:"POST"}),we.ok){ye==="submission"?K(Ne=>Ne.filter(ke=>ke.id!==ge)):Q(Ne=>Ne.filter(ke=>ke.id!==ge));try{const Ne=await $o("/materials");Ne?.materials&&u(Ne.materials.map(he))}catch(Ne){console.warn("approveMaterial refresh failed",Ne)}return we.json()}throw new Error("Approval failed")},me=async(ge,ye,we)=>{let Ne;if(we==="submission"?Ne=await lt(`/material-submissions/${ge}/reject`,{method:"POST",body:JSON.stringify({reason:ye})}):Ne=await lt(`/materials/${ge}/reject`,{method:"POST",body:JSON.stringify({reason:ye})}),Ne.ok){we==="submission"?K(ke=>ke.filter(Be=>Be.id!==ge)):Q(ke=>ke.filter(Be=>Be.id!==ge));try{const ke=await $o("/materials");ke?.materials&&u(ke.materials.map(he))}catch(ke){console.warn("rejectMaterial refresh failed",ke)}return Ne.json()}throw new Error("Rejection failed")},Se=async(ge,ye,we)=>{try{const Ne=await Gl("/messages",{senderName:ge,message:ye,info:we||null});Ne?.message&&p(ke=>[Ne.message,...ke])}catch(Ne){throw console.warn("addSupportMessage failed",Ne),Ne}},je=async ge=>{try{if((await lt(`/messages/${ge}`,{method:"DELETE"})).ok){p(we=>we.filter(Ne=>Ne.id!==ge));return}throw new Error("Failed to delete message")}catch(ye){throw console.warn("deleteMessage failed",ye),ye}},Le={user:n,login:ie,logout:ce,shops:i,materials:A,products:d,approvalRequests:o,supportMessages:y,pendingShops:j,pendingMaterials:w,materialApprovalRequests:[...U||[],...k||[]],supplierSubmissions:k,addShop:ae,addMaterial:de,deleteShop:te,deleteMaterial:be,approveShop:He,rejectShop:pe,approveMaterial:Y,rejectMaterial:me,submitShopForApproval:se,submitMaterialForApproval:re,addSupportMessage:Se,deleteMessage:je};return e.jsx(wC.Provider,{value:Le,children:t})}function fi(){const t=S.useContext(wC);if(!t)throw new Error("useData must be used inside DataProvider");return t}const VO=1,qO=1e6;let R0=0;function GO(){return R0=(R0+1)%Number.MAX_SAFE_INTEGER,R0.toString()}const O0=new Map,A2=t=>{if(O0.has(t))return;const s=setTimeout(()=>{O0.delete(t),Gp({type:"REMOVE_TOAST",toastId:t})},qO);O0.set(t,s)},WO=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,VO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===s.toast.id?{...n,...s.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=s;return n?A2(n):t.toasts.forEach(r=>{A2(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==s.toastId)}}},dy=[];let Ay={toasts:[]};function Gp(t){Ay=WO(Ay,t),dy.forEach(s=>{s(Ay)})}function YO({...t}){const s=GO(),n=i=>Gp({type:"UPDATE_TOAST",toast:{...i,id:s}}),r=()=>Gp({type:"DISMISS_TOAST",toastId:s});return Gp({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:i=>{i||r()}}}),{id:s,dismiss:r,update:n}}function ua(){const[t,s]=S.useState(Ay);return S.useEffect(()=>(dy.push(s),()=>{const n=dy.indexOf(s);n>-1&&dy.splice(n,1)}),[t]),{...t,toast:YO,dismiss:n=>Gp({type:"DISMISS_TOAST",toastId:n})}}var Bh=sC();const SC=l1(Bh);function Yl(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}function u2(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Ch(...t){return s=>{let n=!1;const r=t.map(i=>{const c=u2(i,s);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let i=0;i<r.length;i++){const c=r[i];typeof c=="function"?c():u2(t[i],null)}}}}function Pr(...t){return S.useCallback(Ch(...t),t)}function XO(t,s){const n=S.createContext(s),r=c=>{const{children:A,...u}=c,d=S.useMemo(()=>u,Object.values(u));return e.jsx(n.Provider,{value:d,children:A})};r.displayName=t+"Provider";function i(c){const A=S.useContext(n);if(A)return A;if(s!==void 0)return s;throw new Error(`\`${c}\` must be used within \`${t}\``)}return[r,i]}function Cc(t,s=[]){let n=[];function r(c,A){const u=S.createContext(A),d=n.length;n=[...n,A];const h=m=>{const{scope:y,children:p,...j}=m,b=y?.[t]?.[d]||u,w=S.useMemo(()=>j,Object.values(j));return e.jsx(b.Provider,{value:w,children:p})};h.displayName=c+"Provider";function o(m,y){const p=y?.[t]?.[d]||u,j=S.useContext(p);if(j)return j;if(A!==void 0)return A;throw new Error(`\`${m}\` must be used within \`${c}\``)}return[h,o]}const i=()=>{const c=n.map(A=>S.createContext(A));return function(u){const d=u?.[t]||c;return S.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return i.scopeName=t,[r,JO(i,...s)]}function JO(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(c){const A=r.reduce((u,{useScope:d,scopeName:h})=>{const m=d(c)[`__scope${h}`];return{...u,...m}},{});return S.useMemo(()=>({[`__scope${s.scopeName}`]:A}),[A])}};return n.scopeName=s.scopeName,n}function eb(t){const s=ZO(t),n=S.forwardRef((r,i)=>{const{children:c,...A}=r,u=S.Children.toArray(c),d=u.find(tU);if(d){const h=d.props.children,o=u.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return e.jsx(s,{...A,ref:i,children:S.isValidElement(h)?S.cloneElement(h,void 0,o):null})}return e.jsx(s,{...A,ref:i,children:c})});return n.displayName=`${t}.Slot`,n}function ZO(t){const s=S.forwardRef((n,r)=>{const{children:i,...c}=n;if(S.isValidElement(i)){const A=nU(i),u=sU(c,i.props);return i.type!==S.Fragment&&(u.ref=r?Ch(r,A):A),S.cloneElement(i,u)}return S.Children.count(i)>1?S.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var eU=Symbol("radix.slottable");function tU(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===eU}function sU(t,s){const n={...s};for(const r in s){const i=t[r],c=s[r];/^on[A-Z]/.test(r)?i&&c?n[r]=(...u)=>{c(...u),i(...u)}:i&&(n[r]=i):r==="style"?n[r]={...i,...c}:r==="className"&&(n[r]=[i,c].filter(Boolean).join(" "))}return{...t,...n}}function nU(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function rU(t){const s=t+"CollectionProvider",[n,r]=Cc(s),[i,c]=n(s,{collectionRef:{current:null},itemMap:new Map}),A=b=>{const{scope:w,children:B}=b,U=Vo.useRef(null),Q=Vo.useRef(new Map).current;return e.jsx(i,{scope:w,itemMap:Q,collectionRef:U,children:B})};A.displayName=s;const u=t+"CollectionSlot",d=eb(u),h=Vo.forwardRef((b,w)=>{const{scope:B,children:U}=b,Q=c(u,B),k=Pr(w,Q.collectionRef);return e.jsx(d,{ref:k,children:U})});h.displayName=u;const o=t+"CollectionItemSlot",m="data-radix-collection-item",y=eb(o),p=Vo.forwardRef((b,w)=>{const{scope:B,children:U,...Q}=b,k=Vo.useRef(null),K=Pr(w,k),ee=c(o,B);return Vo.useEffect(()=>(ee.itemMap.set(k,{ref:k,...Q}),()=>void ee.itemMap.delete(k))),e.jsx(y,{[m]:"",ref:K,children:U})});p.displayName=o;function j(b){const w=c(t+"CollectionConsumer",b);return Vo.useCallback(()=>{const U=w.collectionRef.current;if(!U)return[];const Q=Array.from(U.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((ee,q)=>Q.indexOf(ee.ref.current)-Q.indexOf(q.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:A,Slot:h,ItemSlot:p},j,r]}var aU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Md=aU.reduce((t,s)=>{const n=eb(`Primitive.${s}`),r=S.forwardRef((i,c)=>{const{asChild:A,...u}=i,d=A?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...u,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function NC(t,s){t&&Bh.flushSync(()=>t.dispatchEvent(s))}function Wo(t){const s=S.useRef(t);return S.useEffect(()=>{s.current=t}),S.useMemo(()=>(...n)=>s.current?.(...n),[])}function BC(t,s=globalThis?.document){const n=Wo(t);S.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return s.addEventListener("keydown",r,{capture:!0}),()=>s.removeEventListener("keydown",r,{capture:!0})},[n,s])}var iU="DismissableLayer",tb="dismissableLayer.update",oU="dismissableLayer.pointerDownOutside",lU="dismissableLayer.focusOutside",h2,CC=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),EC=S.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:c,onInteractOutside:A,onDismiss:u,...d}=t,h=S.useContext(CC),[o,m]=S.useState(null),y=o?.ownerDocument??globalThis?.document,[,p]=S.useState({}),j=Pr(s,q=>m(q)),b=Array.from(h.layers),[w]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),B=b.indexOf(w),U=o?b.indexOf(o):-1,Q=h.layersWithOutsidePointerEventsDisabled.size>0,k=U>=B,K=dU(q=>{const G=q.target,W=[...h.branches].some(he=>he.contains(G));!k||W||(i?.(q),A?.(q),q.defaultPrevented||u?.())},y),ee=AU(q=>{const G=q.target;[...h.branches].some(he=>he.contains(G))||(c?.(q),A?.(q),q.defaultPrevented||u?.())},y);return BC(q=>{U===h.layers.size-1&&(r?.(q),!q.defaultPrevented&&u&&(q.preventDefault(),u()))},y),S.useEffect(()=>{if(o)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(h2=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(o)),h.layers.add(o),f2(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=h2)}},[o,y,n,h]),S.useEffect(()=>()=>{o&&(h.layers.delete(o),h.layersWithOutsidePointerEventsDisabled.delete(o),f2())},[o,h]),S.useEffect(()=>{const q=()=>p({});return document.addEventListener(tb,q),()=>document.removeEventListener(tb,q)},[]),e.jsx(Md.div,{...d,ref:j,style:{pointerEvents:Q?k?"auto":"none":void 0,...t.style},onFocusCapture:Yl(t.onFocusCapture,ee.onFocusCapture),onBlurCapture:Yl(t.onBlurCapture,ee.onBlurCapture),onPointerDownCapture:Yl(t.onPointerDownCapture,K.onPointerDownCapture)})});EC.displayName=iU;var cU="DismissableLayerBranch",TC=S.forwardRef((t,s)=>{const n=S.useContext(CC),r=S.useRef(null),i=Pr(s,r);return S.useEffect(()=>{const c=r.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),e.jsx(Md.div,{...t,ref:i})});TC.displayName=cU;function dU(t,s=globalThis?.document){const n=Wo(t),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const c=u=>{if(u.target&&!r.current){let d=function(){FC(oU,n,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(s.removeEventListener("click",i.current),i.current=d,s.addEventListener("click",i.current,{once:!0})):d()}else s.removeEventListener("click",i.current);r.current=!1},A=window.setTimeout(()=>{s.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(A),s.removeEventListener("pointerdown",c),s.removeEventListener("click",i.current)}},[s,n]),{onPointerDownCapture:()=>r.current=!0}}function AU(t,s=globalThis?.document){const n=Wo(t),r=S.useRef(!1);return S.useEffect(()=>{const i=c=>{c.target&&!r.current&&FC(lU,n,{originalEvent:c},{discrete:!1})};return s.addEventListener("focusin",i),()=>s.removeEventListener("focusin",i)},[s,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function f2(){const t=new CustomEvent(tb);document.dispatchEvent(t)}function FC(t,s,n,{discrete:r}){const i=n.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&i.addEventListener(t,s,{once:!0}),r?NC(i,c):i.dispatchEvent(c)}var uU=EC,hU=TC,ei=globalThis?.document?S.useLayoutEffect:()=>{},fU="Portal",IC=S.forwardRef((t,s)=>{const{container:n,...r}=t,[i,c]=S.useState(!1);ei(()=>c(!0),[]);const A=n||i&&globalThis?.document?.body;return A?SC.createPortal(e.jsx(Md.div,{...r,ref:s}),A):null});IC.displayName=fU;function pU(t,s){return S.useReducer((n,r)=>s[n][r]??n,t)}var RC=t=>{const{present:s,children:n}=t,r=mU(s),i=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),c=Pr(r.ref,gU(i));return typeof n=="function"||r.isPresent?S.cloneElement(i,{ref:c}):null};RC.displayName="Presence";function mU(t){const[s,n]=S.useState(),r=S.useRef({}),i=S.useRef(t),c=S.useRef("none"),A=t?"mounted":"unmounted",[u,d]=pU(A,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const h=Ug(r.current);c.current=u==="mounted"?h:"none"},[u]),ei(()=>{const h=r.current,o=i.current;if(o!==t){const y=c.current,p=Ug(h);t?d("MOUNT"):p==="none"||h?.display==="none"?d("UNMOUNT"):d(o&&y!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,d]),ei(()=>{if(s){let h;const o=s.ownerDocument.defaultView??window,m=p=>{const b=Ug(r.current).includes(p.animationName);if(p.target===s&&b&&(d("ANIMATION_END"),!i.current)){const w=s.style.animationFillMode;s.style.animationFillMode="forwards",h=o.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=w)})}},y=p=>{p.target===s&&(c.current=Ug(r.current))};return s.addEventListener("animationstart",y),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{o.clearTimeout(h),s.removeEventListener("animationstart",y),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:S.useCallback(h=>{h&&(r.current=getComputedStyle(h)),n(h)},[])}}function Ug(t){return t?.animationName||"none"}function gU(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function yU({prop:t,defaultProp:s,onChange:n=()=>{}}){const[r,i]=xU({defaultProp:s,onChange:n}),c=t!==void 0,A=c?t:r,u=Wo(n),d=S.useCallback(h=>{if(c){const m=typeof h=="function"?h(t):h;m!==t&&u(m)}else i(h)},[c,t,i,u]);return[A,d]}function xU({defaultProp:t,onChange:s}){const n=S.useState(t),[r]=n,i=S.useRef(r),c=Wo(s);return S.useEffect(()=>{i.current!==r&&(c(r),i.current=r)},[r,i,c]),n}var vU="VisuallyHidden",m1=S.forwardRef((t,s)=>e.jsx(Md.span,{...t,ref:s,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));m1.displayName=vU;var g1="ToastProvider",[y1,bU,jU]=rU("Toast"),[OC]=Cc("Toast",[jU]),[wU,ox]=OC(g1),UC=t=>{const{__scopeToast:s,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:c=50,children:A}=t,[u,d]=S.useState(null),[h,o]=S.useState(0),m=S.useRef(!1),y=S.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${g1}\`. Expected non-empty \`string\`.`),e.jsx(y1.Provider,{scope:s,children:e.jsx(wU,{scope:s,label:n,duration:r,swipeDirection:i,swipeThreshold:c,toastCount:h,viewport:u,onViewportChange:d,onToastAdd:S.useCallback(()=>o(p=>p+1),[]),onToastRemove:S.useCallback(()=>o(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:y,children:A})})};UC.displayName=g1;var LC="ToastViewport",SU=["F8"],sb="toast.viewportPause",nb="toast.viewportResume",DC=S.forwardRef((t,s)=>{const{__scopeToast:n,hotkey:r=SU,label:i="Notifications ({hotkey})",...c}=t,A=ox(LC,n),u=bU(n),d=S.useRef(null),h=S.useRef(null),o=S.useRef(null),m=S.useRef(null),y=Pr(s,m,A.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=A.toastCount>0;S.useEffect(()=>{const w=B=>{r.length!==0&&r.every(Q=>B[Q]||B.code===Q)&&m.current?.focus()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),S.useEffect(()=>{const w=d.current,B=m.current;if(j&&w&&B){const U=()=>{if(!A.isClosePausedRef.current){const ee=new CustomEvent(sb);B.dispatchEvent(ee),A.isClosePausedRef.current=!0}},Q=()=>{if(A.isClosePausedRef.current){const ee=new CustomEvent(nb);B.dispatchEvent(ee),A.isClosePausedRef.current=!1}},k=ee=>{!w.contains(ee.relatedTarget)&&Q()},K=()=>{w.contains(document.activeElement)||Q()};return w.addEventListener("focusin",U),w.addEventListener("focusout",k),w.addEventListener("pointermove",U),w.addEventListener("pointerleave",K),window.addEventListener("blur",U),window.addEventListener("focus",Q),()=>{w.removeEventListener("focusin",U),w.removeEventListener("focusout",k),w.removeEventListener("pointermove",U),w.removeEventListener("pointerleave",K),window.removeEventListener("blur",U),window.removeEventListener("focus",Q)}}},[j,A.isClosePausedRef]);const b=S.useCallback(({tabbingDirection:w})=>{const U=u().map(Q=>{const k=Q.ref.current,K=[k,...QU(k)];return w==="forwards"?K:K.reverse()});return(w==="forwards"?U.reverse():U).flat()},[u]);return S.useEffect(()=>{const w=m.current;if(w){const B=U=>{const Q=U.altKey||U.ctrlKey||U.metaKey;if(U.key==="Tab"&&!Q){const K=document.activeElement,ee=U.shiftKey;if(U.target===w&&ee){h.current?.focus();return}const W=b({tabbingDirection:ee?"backwards":"forwards"}),he=W.findIndex(Z=>Z===K);U0(W.slice(he+1))?U.preventDefault():ee?h.current?.focus():o.current?.focus()}};return w.addEventListener("keydown",B),()=>w.removeEventListener("keydown",B)}},[u,b]),e.jsxs(hU,{ref:d,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&e.jsx(rb,{ref:h,onFocusFromOutsideViewport:()=>{const w=b({tabbingDirection:"forwards"});U0(w)}}),e.jsx(y1.Slot,{scope:n,children:e.jsx(Md.ol,{tabIndex:-1,...c,ref:y})}),j&&e.jsx(rb,{ref:o,onFocusFromOutsideViewport:()=>{const w=b({tabbingDirection:"backwards"});U0(w)}})]})});DC.displayName=LC;var QC="ToastFocusProxy",rb=S.forwardRef((t,s)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,c=ox(QC,n);return e.jsx(m1,{"aria-hidden":!0,tabIndex:0,...i,ref:s,style:{position:"fixed"},onFocus:A=>{const u=A.relatedTarget;!c.viewport?.contains(u)&&r()}})});rb.displayName=QC;var lx="Toast",NU="toast.swipeStart",BU="toast.swipeMove",CU="toast.swipeCancel",EU="toast.swipeEnd",_C=S.forwardRef((t,s)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:c,...A}=t,[u=!0,d]=yU({prop:r,defaultProp:i,onChange:c});return e.jsx(RC,{present:n||u,children:e.jsx(IU,{open:u,...A,ref:s,onClose:()=>d(!1),onPause:Wo(t.onPause),onResume:Wo(t.onResume),onSwipeStart:Yl(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Yl(t.onSwipeMove,h=>{const{x:o,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${o}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:Yl(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Yl(t.onSwipeEnd,h=>{const{x:o,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${o}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),d(!1)})})})});_C.displayName=lx;var[TU,FU]=OC(lx,{onClose(){}}),IU=S.forwardRef((t,s)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:c,onClose:A,onEscapeKeyDown:u,onPause:d,onResume:h,onSwipeStart:o,onSwipeMove:m,onSwipeCancel:y,onSwipeEnd:p,...j}=t,b=ox(lx,n),[w,B]=S.useState(null),U=Pr(s,ae=>B(ae)),Q=S.useRef(null),k=S.useRef(null),K=i||b.duration,ee=S.useRef(0),q=S.useRef(K),G=S.useRef(0),{onToastAdd:W,onToastRemove:he}=b,Z=Wo(()=>{w?.contains(document.activeElement)&&b.viewport?.focus(),A()}),ie=S.useCallback(ae=>{!ae||ae===1/0||(window.clearTimeout(G.current),ee.current=new Date().getTime(),G.current=window.setTimeout(Z,ae))},[Z]);S.useEffect(()=>{const ae=b.viewport;if(ae){const de=()=>{ie(q.current),h?.()},se=()=>{const re=new Date().getTime()-ee.current;q.current=q.current-re,window.clearTimeout(G.current),d?.()};return ae.addEventListener(sb,se),ae.addEventListener(nb,de),()=>{ae.removeEventListener(sb,se),ae.removeEventListener(nb,de)}}},[b.viewport,K,d,h,ie]),S.useEffect(()=>{c&&!b.isClosePausedRef.current&&ie(K)},[c,K,b.isClosePausedRef,ie]),S.useEffect(()=>(W(),()=>he()),[W,he]);const ce=S.useMemo(()=>w?$C(w):null,[w]);return b.viewport?e.jsxs(e.Fragment,{children:[ce&&e.jsx(RU,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:ce}),e.jsx(TU,{scope:n,onClose:Z,children:Bh.createPortal(e.jsx(y1.ItemSlot,{scope:n,children:e.jsx(uU,{asChild:!0,onEscapeKeyDown:Yl(u,()=>{b.isFocusedToastEscapeKeyDownRef.current||Z(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(Md.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":c?"open":"closed","data-swipe-direction":b.swipeDirection,...j,ref:U,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Yl(t.onKeyDown,ae=>{ae.key==="Escape"&&(u?.(ae.nativeEvent),ae.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,Z()))}),onPointerDown:Yl(t.onPointerDown,ae=>{ae.button===0&&(Q.current={x:ae.clientX,y:ae.clientY})}),onPointerMove:Yl(t.onPointerMove,ae=>{if(!Q.current)return;const de=ae.clientX-Q.current.x,se=ae.clientY-Q.current.y,re=!!k.current,te=["left","right"].includes(b.swipeDirection),be=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,He=te?be(0,de):0,pe=te?0:be(0,se),Y=ae.pointerType==="touch"?10:2,me={x:He,y:pe},Se={originalEvent:ae,delta:me};re?(k.current=me,Lg(BU,m,Se,{discrete:!1})):p2(me,b.swipeDirection,Y)?(k.current=me,Lg(NU,o,Se,{discrete:!1}),ae.target.setPointerCapture(ae.pointerId)):(Math.abs(de)>Y||Math.abs(se)>Y)&&(Q.current=null)}),onPointerUp:Yl(t.onPointerUp,ae=>{const de=k.current,se=ae.target;if(se.hasPointerCapture(ae.pointerId)&&se.releasePointerCapture(ae.pointerId),k.current=null,Q.current=null,de){const re=ae.currentTarget,te={originalEvent:ae,delta:de};p2(de,b.swipeDirection,b.swipeThreshold)?Lg(EU,p,te,{discrete:!0}):Lg(CU,y,te,{discrete:!0}),re.addEventListener("click",be=>be.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),RU=t=>{const{__scopeToast:s,children:n,...r}=t,i=ox(lx,s),[c,A]=S.useState(!1),[u,d]=S.useState(!1);return LU(()=>A(!0)),S.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:e.jsx(IC,{asChild:!0,children:e.jsx(m1,{...r,children:c&&e.jsxs(e.Fragment,{children:[i.label," ",n]})})})},OU="ToastTitle",MC=S.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t;return e.jsx(Md.div,{...r,ref:s})});MC.displayName=OU;var UU="ToastDescription",PC=S.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t;return e.jsx(Md.div,{...r,ref:s})});PC.displayName=UU;var kC="ToastAction",HC=S.forwardRef((t,s)=>{const{altText:n,...r}=t;return n.trim()?e.jsx(KC,{altText:n,asChild:!0,children:e.jsx(x1,{...r,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${kC}\`. Expected non-empty \`string\`.`),null)});HC.displayName=kC;var zC="ToastClose",x1=S.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t,i=FU(zC,n);return e.jsx(KC,{asChild:!0,children:e.jsx(Md.button,{type:"button",...r,ref:s,onClick:Yl(t.onClick,i.onClose)})})});x1.displayName=zC;var KC=S.forwardRef((t,s)=>{const{__scopeToast:n,altText:r,...i}=t;return e.jsx(Md.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:s})});function $C(t){const s=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&s.push(r.textContent),DU(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",c=r.dataset.radixToastAnnounceExclude==="";if(!i)if(c){const A=r.dataset.radixToastAnnounceAlt;A&&s.push(A)}else s.push(...$C(r))}}),s}function Lg(t,s,n,{discrete:r}){const i=n.originalEvent.currentTarget,c=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});s&&i.addEventListener(t,s,{once:!0}),r?NC(i,c):i.dispatchEvent(c)}var p2=(t,s,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),c=r>i;return s==="left"||s==="right"?c&&r>n:!c&&i>n};function LU(t=()=>{}){const s=Wo(t);ei(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[s])}function DU(t){return t.nodeType===t.ELEMENT_NODE}function QU(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function U0(t){const s=document.activeElement;return t.some(n=>n===s?!0:(n.focus(),document.activeElement!==s))}var _U=UC,VC=DC,qC=_C,GC=MC,WC=PC,YC=HC,XC=x1;function JC(t){var s,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(s=0;s<i;s++)t[s]&&(n=JC(t[s]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ZC(){for(var t,s,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(s=JC(t))&&(r&&(r+=" "),r+=s);return r}const m2=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,g2=ZC,cx=(t,s)=>n=>{var r;if(s?.variants==null)return g2(t,n?.class,n?.className);const{variants:i,defaultVariants:c}=s,A=Object.keys(i).map(h=>{const o=n?.[h],m=c?.[h];if(o===null)return null;const y=m2(o)||m2(m);return i[h][y]}),u=n&&Object.entries(n).reduce((h,o)=>{let[m,y]=o;return y===void 0||(h[m]=y),h},{}),d=s==null||(r=s.compoundVariants)===null||r===void 0?void 0:r.reduce((h,o)=>{let{class:m,className:y,...p}=o;return Object.entries(p).every(j=>{let[b,w]=j;return Array.isArray(w)?w.includes({...c,...u}[b]):{...c,...u}[b]===w})?[...h,m,y]:h},[]);return g2(t,A,d,n?.class,n?.className)};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PU=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,n,r)=>r?r.toUpperCase():n.toLowerCase()),y2=t=>{const s=PU(t);return s.charAt(0).toUpperCase()+s.slice(1)},e5=(...t)=>t.filter((s,n,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===n).join(" ").trim(),kU=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=S.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:c,iconNode:A,...u},d)=>S.createElement("svg",{ref:d,...HU,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:e5("lucide",i),...!c&&!kU(u)&&{"aria-hidden":"true"},...u},[...A.map(([h,o])=>S.createElement(h,o)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=(t,s)=>{const n=S.forwardRef(({className:r,...i},c)=>S.createElement(zU,{ref:c,iconNode:s,className:e5(`lucide-${MU(y2(t))}`,`lucide-${t}`,r),...i}));return n.displayName=y2(t),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],wf=kn("arrow-left",KU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],uy=kn("arrow-right",$U);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"M3 3h18",key:"o7r712"}],["path",{d:"M20 7H8",key:"gd2fo2"}],["path",{d:"M20 11H8",key:"1ynp89"}],["path",{d:"M10 19h10",key:"19hjk5"}],["path",{d:"M8 15h12",key:"1yqzne"}],["path",{d:"M4 3v14",key:"fggqzn"}],["circle",{cx:"4",cy:"19",r:"2",key:"p3m9r0"}]],t5=kn("blinds",VU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 9v6",key:"199k2o"}],["path",{d:"M16 15v6",key:"8rj2es"}],["path",{d:"M16 3v6",key:"1j6rpj"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M8 15v6",key:"1stoo3"}],["path",{d:"M8 3v6",key:"vlvjmk"}]],s5=kn("brick-wall",qU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],wl=kn("building-2",GU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Tf=kn("calculator",WU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],v1=kn("check",YU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],dm=kn("chevron-down",XU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Jn=kn("chevron-left",JU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Zn=kn("chevron-right",ZU);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ly=kn("chevron-up",eL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gh=kn("circle-alert",tL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],lo=kn("circle-check",sL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Dy=kn("circle-x",nL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],aL=kn("circle",rL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ab=kn("clock",iL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],n5=kn("cloud",oL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],cL=kn("copy",lL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]],r5=kn("door-open",dL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],hi=kn("download",AL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],a5=kn("droplets",uL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],fL=kn("hammer",hL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],mL=kn("key-round",pL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],i5=kn("layout-dashboard",gL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],dx=kn("layers",yL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Sl=kn("loader-circle",xL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],o5=kn("log-out",vL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],jL=kn("map-pin",bL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],l5=kn("menu",wL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],yh=kn("message-square",SL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],il=kn("package",NL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]],c5=kn("paint-bucket",BL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],EL=kn("paintbrush",CL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],FL=kn("pencil",TL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],wc=kn("plus",IL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Qy=kn("search",RL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],UL=kn("send",OL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],x2=kn("settings",LL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],d5=kn("shield-alert",DL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],_y=kn("shopping-cart",QL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ML=kn("star",_L);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],v2=kn("store",PL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],HL=kn("tags",kL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Gc=kn("trash-2",zL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],$L=kn("trending-up",KL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qL=kn("triangle-alert",VL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],A5=kn("users",GL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],YL=kn("user",WL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ax=kn("x",XL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],My=kn("zap",JL),b1="-",ZL=t=>{const s=tD(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:A=>{const u=A.split(b1);return u[0]===""&&u.length!==1&&u.shift(),u5(u,s)||eD(A)},getConflictingClassGroupIds:(A,u)=>{const d=n[A]||[];return u&&r[A]?[...d,...r[A]]:d}}},u5=(t,s)=>{if(t.length===0)return s.classGroupId;const n=t[0],r=s.nextPart.get(n),i=r?u5(t.slice(1),r):void 0;if(i)return i;if(s.validators.length===0)return;const c=t.join(b1);return s.validators.find(({validator:A})=>A(c))?.classGroupId},b2=/^\[(.+)\]$/,eD=t=>{if(b2.test(t)){const s=b2.exec(t)[1],n=s?.substring(0,s.indexOf(":"));if(n)return"arbitrary.."+n}},tD=t=>{const{theme:s,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)ib(n[i],r,i,s);return r},ib=(t,s,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const c=i===""?s:j2(s,i);c.classGroupId=n;return}if(typeof i=="function"){if(sD(i)){ib(i(r),s,n,r);return}s.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([c,A])=>{ib(A,j2(s,c),n,r)})})},j2=(t,s)=>{let n=t;return s.split(b1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},sD=t=>t.isThemeGetter,nD=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=new Map,r=new Map;const i=(c,A)=>{n.set(c,A),s++,s>t&&(s=0,r=n,n=new Map)};return{get(c){let A=n.get(c);if(A!==void 0)return A;if((A=r.get(c))!==void 0)return i(c,A),A},set(c,A){n.has(c)?n.set(c,A):i(c,A)}}},ob="!",lb=":",rD=lb.length,aD=t=>{const{prefix:s,experimentalParseClassName:n}=t;let r=i=>{const c=[];let A=0,u=0,d=0,h;for(let j=0;j<i.length;j++){let b=i[j];if(A===0&&u===0){if(b===lb){c.push(i.slice(d,j)),d=j+rD;continue}if(b==="/"){h=j;continue}}b==="["?A++:b==="]"?A--:b==="("?u++:b===")"&&u--}const o=c.length===0?i:i.substring(d),m=iD(o),y=m!==o,p=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:m,maybePostfixModifierPosition:p}};if(s){const i=s+lb,c=r;r=A=>A.startsWith(i)?c(A.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:A,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=c=>n({className:c,parseClassName:i})}return r},iD=t=>t.endsWith(ob)?t.substring(0,t.length-1):t.startsWith(ob)?t.substring(1):t,oD=t=>{const s=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let c=[];return r.forEach(A=>{A[0]==="["||s[A]?(i.push(...c.sort(),A),c=[]):c.push(A)}),i.push(...c.sort()),i}},lD=t=>({cache:nD(t.cacheSize),parseClassName:aD(t),sortModifiers:oD(t),...ZL(t)}),cD=/\s+/,dD=(t,s)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:c}=s,A=[],u=t.trim().split(cD);let d="";for(let h=u.length-1;h>=0;h-=1){const o=u[h],{isExternal:m,modifiers:y,hasImportantModifier:p,baseClassName:j,maybePostfixModifierPosition:b}=n(o);if(m){d=o+(d.length>0?" "+d:d);continue}let w=!!b,B=r(w?j.substring(0,b):j);if(!B){if(!w){d=o+(d.length>0?" "+d:d);continue}if(B=r(j),!B){d=o+(d.length>0?" "+d:d);continue}w=!1}const U=c(y).join(":"),Q=p?U+ob:U,k=Q+B;if(A.includes(k))continue;A.push(k);const K=i(B,w);for(let ee=0;ee<K.length;++ee){const q=K[ee];A.push(Q+q)}d=o+(d.length>0?" "+d:d)}return d};function AD(){let t=0,s,n,r="";for(;t<arguments.length;)(s=arguments[t++])&&(n=h5(s))&&(r&&(r+=" "),r+=n);return r}const h5=t=>{if(typeof t=="string")return t;let s,n="";for(let r=0;r<t.length;r++)t[r]&&(s=h5(t[r]))&&(n&&(n+=" "),n+=s);return n};function uD(t,...s){let n,r,i,c=A;function A(d){const h=s.reduce((o,m)=>m(o),t());return n=lD(h),r=n.cache.get,i=n.cache.set,c=u,u(d)}function u(d){const h=r(d);if(h)return h;const o=dD(d,n);return i(d,o),o}return function(){return c(AD.apply(null,arguments))}}const no=t=>{const s=n=>n[t]||[];return s.isThemeGetter=!0,s},f5=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,p5=/^\((?:(\w[\w-]*):)?(.+)\)$/i,hD=/^\d+\/\d+$/,fD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,gD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rf=t=>hD.test(t),br=t=>!!t&&!Number.isNaN(Number(t)),su=t=>!!t&&Number.isInteger(Number(t)),L0=t=>t.endsWith("%")&&br(t.slice(0,-1)),iA=t=>fD.test(t),xD=()=>!0,vD=t=>pD.test(t)&&!mD.test(t),m5=()=>!1,bD=t=>gD.test(t),jD=t=>yD.test(t),wD=t=>!yn(t)&&!xn(t),SD=t=>Df(t,x5,m5),yn=t=>f5.test(t),th=t=>Df(t,v5,vD),D0=t=>Df(t,TD,br),w2=t=>Df(t,g5,m5),ND=t=>Df(t,y5,jD),Dg=t=>Df(t,b5,bD),xn=t=>p5.test(t),Dp=t=>Qf(t,v5),BD=t=>Qf(t,FD),S2=t=>Qf(t,g5),CD=t=>Qf(t,x5),ED=t=>Qf(t,y5),Qg=t=>Qf(t,b5,!0),Df=(t,s,n)=>{const r=f5.exec(t);return r?r[1]?s(r[1]):n(r[2]):!1},Qf=(t,s,n=!1)=>{const r=p5.exec(t);return r?r[1]?s(r[1]):n:!1},g5=t=>t==="position"||t==="percentage",y5=t=>t==="image"||t==="url",x5=t=>t==="length"||t==="size"||t==="bg-size",v5=t=>t==="length",TD=t=>t==="number",FD=t=>t==="family-name",b5=t=>t==="shadow",ID=()=>{const t=no("color"),s=no("font"),n=no("text"),r=no("font-weight"),i=no("tracking"),c=no("leading"),A=no("breakpoint"),u=no("container"),d=no("spacing"),h=no("radius"),o=no("shadow"),m=no("inset-shadow"),y=no("text-shadow"),p=no("drop-shadow"),j=no("blur"),b=no("perspective"),w=no("aspect"),B=no("ease"),U=no("animate"),Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],K=()=>[...k(),xn,yn],ee=()=>["auto","hidden","clip","visible","scroll"],q=()=>["auto","contain","none"],G=()=>[xn,yn,d],W=()=>[rf,"full","auto",...G()],he=()=>[su,"none","subgrid",xn,yn],Z=()=>["auto",{span:["full",su,xn,yn]},su,xn,yn],ie=()=>[su,"auto",xn,yn],ce=()=>["auto","min","max","fr",xn,yn],ae=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],de=()=>["start","end","center","stretch","center-safe","end-safe"],se=()=>["auto",...G()],re=()=>[rf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...G()],te=()=>[t,xn,yn],be=()=>[...k(),S2,w2,{position:[xn,yn]}],He=()=>["no-repeat",{repeat:["","x","y","space","round"]}],pe=()=>["auto","cover","contain",CD,SD,{size:[xn,yn]}],Y=()=>[L0,Dp,th],me=()=>["","none","full",h,xn,yn],Se=()=>["",br,Dp,th],je=()=>["solid","dashed","dotted","double"],Le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ge=()=>[br,L0,S2,w2],ye=()=>["","none",j,xn,yn],we=()=>["none",br,xn,yn],Ne=()=>["none",br,xn,yn],ke=()=>[br,xn,yn],Be=()=>[rf,"full",...G()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[iA],breakpoint:[iA],color:[xD],container:[iA],"drop-shadow":[iA],ease:["in","out","in-out"],font:[wD],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[iA],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[iA],shadow:[iA],spacing:["px",br],text:[iA],"text-shadow":[iA],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",rf,yn,xn,w]}],container:["container"],columns:[{columns:[br,yn,xn,u]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:K()}],overflow:[{overflow:ee()}],"overflow-x":[{"overflow-x":ee()}],"overflow-y":[{"overflow-y":ee()}],overscroll:[{overscroll:q()}],"overscroll-x":[{"overscroll-x":q()}],"overscroll-y":[{"overscroll-y":q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:W()}],"inset-x":[{"inset-x":W()}],"inset-y":[{"inset-y":W()}],start:[{start:W()}],end:[{end:W()}],top:[{top:W()}],right:[{right:W()}],bottom:[{bottom:W()}],left:[{left:W()}],visibility:["visible","invisible","collapse"],z:[{z:[su,"auto",xn,yn]}],basis:[{basis:[rf,"full","auto",u,...G()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[br,rf,"auto","initial","none",yn]}],grow:[{grow:["",br,xn,yn]}],shrink:[{shrink:["",br,xn,yn]}],order:[{order:[su,"first","last","none",xn,yn]}],"grid-cols":[{"grid-cols":he()}],"col-start-end":[{col:Z()}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":he()}],"row-start-end":[{row:Z()}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ce()}],"auto-rows":[{"auto-rows":ce()}],gap:[{gap:G()}],"gap-x":[{"gap-x":G()}],"gap-y":[{"gap-y":G()}],"justify-content":[{justify:[...ae(),"normal"]}],"justify-items":[{"justify-items":[...de(),"normal"]}],"justify-self":[{"justify-self":["auto",...de()]}],"align-content":[{content:["normal",...ae()]}],"align-items":[{items:[...de(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...de(),{baseline:["","last"]}]}],"place-content":[{"place-content":ae()}],"place-items":[{"place-items":[...de(),"baseline"]}],"place-self":[{"place-self":["auto",...de()]}],p:[{p:G()}],px:[{px:G()}],py:[{py:G()}],ps:[{ps:G()}],pe:[{pe:G()}],pt:[{pt:G()}],pr:[{pr:G()}],pb:[{pb:G()}],pl:[{pl:G()}],m:[{m:se()}],mx:[{mx:se()}],my:[{my:se()}],ms:[{ms:se()}],me:[{me:se()}],mt:[{mt:se()}],mr:[{mr:se()}],mb:[{mb:se()}],ml:[{ml:se()}],"space-x":[{"space-x":G()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":G()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[u,"screen",...re()]}],"min-w":[{"min-w":[u,"screen","none",...re()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[A]},...re()]}],h:[{h:["screen","lh",...re()]}],"min-h":[{"min-h":["screen","lh","none",...re()]}],"max-h":[{"max-h":["screen","lh",...re()]}],"font-size":[{text:["base",n,Dp,th]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,xn,D0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",L0,yn]}],"font-family":[{font:[BD,yn,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,xn,yn]}],"line-clamp":[{"line-clamp":[br,"none",xn,D0]}],leading:[{leading:[c,...G()]}],"list-image":[{"list-image":["none",xn,yn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",xn,yn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:te()}],"text-color":[{text:te()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...je(),"wavy"]}],"text-decoration-thickness":[{decoration:[br,"from-font","auto",xn,th]}],"text-decoration-color":[{decoration:te()}],"underline-offset":[{"underline-offset":[br,"auto",xn,yn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xn,yn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xn,yn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:be()}],"bg-repeat":[{bg:He()}],"bg-size":[{bg:pe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},su,xn,yn],radial:["",xn,yn],conic:[su,xn,yn]},ED,ND]}],"bg-color":[{bg:te()}],"gradient-from-pos":[{from:Y()}],"gradient-via-pos":[{via:Y()}],"gradient-to-pos":[{to:Y()}],"gradient-from":[{from:te()}],"gradient-via":[{via:te()}],"gradient-to":[{to:te()}],rounded:[{rounded:me()}],"rounded-s":[{"rounded-s":me()}],"rounded-e":[{"rounded-e":me()}],"rounded-t":[{"rounded-t":me()}],"rounded-r":[{"rounded-r":me()}],"rounded-b":[{"rounded-b":me()}],"rounded-l":[{"rounded-l":me()}],"rounded-ss":[{"rounded-ss":me()}],"rounded-se":[{"rounded-se":me()}],"rounded-ee":[{"rounded-ee":me()}],"rounded-es":[{"rounded-es":me()}],"rounded-tl":[{"rounded-tl":me()}],"rounded-tr":[{"rounded-tr":me()}],"rounded-br":[{"rounded-br":me()}],"rounded-bl":[{"rounded-bl":me()}],"border-w":[{border:Se()}],"border-w-x":[{"border-x":Se()}],"border-w-y":[{"border-y":Se()}],"border-w-s":[{"border-s":Se()}],"border-w-e":[{"border-e":Se()}],"border-w-t":[{"border-t":Se()}],"border-w-r":[{"border-r":Se()}],"border-w-b":[{"border-b":Se()}],"border-w-l":[{"border-l":Se()}],"divide-x":[{"divide-x":Se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...je(),"hidden","none"]}],"divide-style":[{divide:[...je(),"hidden","none"]}],"border-color":[{border:te()}],"border-color-x":[{"border-x":te()}],"border-color-y":[{"border-y":te()}],"border-color-s":[{"border-s":te()}],"border-color-e":[{"border-e":te()}],"border-color-t":[{"border-t":te()}],"border-color-r":[{"border-r":te()}],"border-color-b":[{"border-b":te()}],"border-color-l":[{"border-l":te()}],"divide-color":[{divide:te()}],"outline-style":[{outline:[...je(),"none","hidden"]}],"outline-offset":[{"outline-offset":[br,xn,yn]}],"outline-w":[{outline:["",br,Dp,th]}],"outline-color":[{outline:te()}],shadow:[{shadow:["","none",o,Qg,Dg]}],"shadow-color":[{shadow:te()}],"inset-shadow":[{"inset-shadow":["none",m,Qg,Dg]}],"inset-shadow-color":[{"inset-shadow":te()}],"ring-w":[{ring:Se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:te()}],"ring-offset-w":[{"ring-offset":[br,th]}],"ring-offset-color":[{"ring-offset":te()}],"inset-ring-w":[{"inset-ring":Se()}],"inset-ring-color":[{"inset-ring":te()}],"text-shadow":[{"text-shadow":["none",y,Qg,Dg]}],"text-shadow-color":[{"text-shadow":te()}],opacity:[{opacity:[br,xn,yn]}],"mix-blend":[{"mix-blend":[...Le(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Le()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[br]}],"mask-image-linear-from-pos":[{"mask-linear-from":ge()}],"mask-image-linear-to-pos":[{"mask-linear-to":ge()}],"mask-image-linear-from-color":[{"mask-linear-from":te()}],"mask-image-linear-to-color":[{"mask-linear-to":te()}],"mask-image-t-from-pos":[{"mask-t-from":ge()}],"mask-image-t-to-pos":[{"mask-t-to":ge()}],"mask-image-t-from-color":[{"mask-t-from":te()}],"mask-image-t-to-color":[{"mask-t-to":te()}],"mask-image-r-from-pos":[{"mask-r-from":ge()}],"mask-image-r-to-pos":[{"mask-r-to":ge()}],"mask-image-r-from-color":[{"mask-r-from":te()}],"mask-image-r-to-color":[{"mask-r-to":te()}],"mask-image-b-from-pos":[{"mask-b-from":ge()}],"mask-image-b-to-pos":[{"mask-b-to":ge()}],"mask-image-b-from-color":[{"mask-b-from":te()}],"mask-image-b-to-color":[{"mask-b-to":te()}],"mask-image-l-from-pos":[{"mask-l-from":ge()}],"mask-image-l-to-pos":[{"mask-l-to":ge()}],"mask-image-l-from-color":[{"mask-l-from":te()}],"mask-image-l-to-color":[{"mask-l-to":te()}],"mask-image-x-from-pos":[{"mask-x-from":ge()}],"mask-image-x-to-pos":[{"mask-x-to":ge()}],"mask-image-x-from-color":[{"mask-x-from":te()}],"mask-image-x-to-color":[{"mask-x-to":te()}],"mask-image-y-from-pos":[{"mask-y-from":ge()}],"mask-image-y-to-pos":[{"mask-y-to":ge()}],"mask-image-y-from-color":[{"mask-y-from":te()}],"mask-image-y-to-color":[{"mask-y-to":te()}],"mask-image-radial":[{"mask-radial":[xn,yn]}],"mask-image-radial-from-pos":[{"mask-radial-from":ge()}],"mask-image-radial-to-pos":[{"mask-radial-to":ge()}],"mask-image-radial-from-color":[{"mask-radial-from":te()}],"mask-image-radial-to-color":[{"mask-radial-to":te()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[br]}],"mask-image-conic-from-pos":[{"mask-conic-from":ge()}],"mask-image-conic-to-pos":[{"mask-conic-to":ge()}],"mask-image-conic-from-color":[{"mask-conic-from":te()}],"mask-image-conic-to-color":[{"mask-conic-to":te()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:be()}],"mask-repeat":[{mask:He()}],"mask-size":[{mask:pe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",xn,yn]}],filter:[{filter:["","none",xn,yn]}],blur:[{blur:ye()}],brightness:[{brightness:[br,xn,yn]}],contrast:[{contrast:[br,xn,yn]}],"drop-shadow":[{"drop-shadow":["","none",p,Qg,Dg]}],"drop-shadow-color":[{"drop-shadow":te()}],grayscale:[{grayscale:["",br,xn,yn]}],"hue-rotate":[{"hue-rotate":[br,xn,yn]}],invert:[{invert:["",br,xn,yn]}],saturate:[{saturate:[br,xn,yn]}],sepia:[{sepia:["",br,xn,yn]}],"backdrop-filter":[{"backdrop-filter":["","none",xn,yn]}],"backdrop-blur":[{"backdrop-blur":ye()}],"backdrop-brightness":[{"backdrop-brightness":[br,xn,yn]}],"backdrop-contrast":[{"backdrop-contrast":[br,xn,yn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",br,xn,yn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[br,xn,yn]}],"backdrop-invert":[{"backdrop-invert":["",br,xn,yn]}],"backdrop-opacity":[{"backdrop-opacity":[br,xn,yn]}],"backdrop-saturate":[{"backdrop-saturate":[br,xn,yn]}],"backdrop-sepia":[{"backdrop-sepia":["",br,xn,yn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":G()}],"border-spacing-x":[{"border-spacing-x":G()}],"border-spacing-y":[{"border-spacing-y":G()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",xn,yn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[br,"initial",xn,yn]}],ease:[{ease:["linear","initial",B,xn,yn]}],delay:[{delay:[br,xn,yn]}],animate:[{animate:["none",U,xn,yn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,xn,yn]}],"perspective-origin":[{"perspective-origin":K()}],rotate:[{rotate:we()}],"rotate-x":[{"rotate-x":we()}],"rotate-y":[{"rotate-y":we()}],"rotate-z":[{"rotate-z":we()}],scale:[{scale:Ne()}],"scale-x":[{"scale-x":Ne()}],"scale-y":[{"scale-y":Ne()}],"scale-z":[{"scale-z":Ne()}],"scale-3d":["scale-3d"],skew:[{skew:ke()}],"skew-x":[{"skew-x":ke()}],"skew-y":[{"skew-y":ke()}],transform:[{transform:[xn,yn,"","none","gpu","cpu"]}],"transform-origin":[{origin:K()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Be()}],"translate-x":[{"translate-x":Be()}],"translate-y":[{"translate-y":Be()}],"translate-z":[{"translate-z":Be()}],"translate-none":["translate-none"],accent:[{accent:te()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:te()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xn,yn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xn,yn]}],fill:[{fill:["none",...te()]}],"stroke-w":[{stroke:[br,Dp,th,D0]}],stroke:[{stroke:["none",...te()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},RD=uD(ID);function $s(...t){return RD(ZC(t))}const OD=_U,j5=S.forwardRef(({className:t,...s},n)=>e.jsx(VC,{ref:n,className:$s("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));j5.displayName=VC.displayName;const UD=cx("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),w5=S.forwardRef(({className:t,variant:s,...n},r)=>e.jsx(qC,{ref:r,className:$s(UD({variant:s}),t),...n}));w5.displayName=qC.displayName;const LD=S.forwardRef(({className:t,...s},n)=>e.jsx(YC,{ref:n,className:$s("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));LD.displayName=YC.displayName;const S5=S.forwardRef(({className:t,...s},n)=>e.jsx(XC,{ref:n,className:$s("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(Ax,{className:"h-4 w-4"})}));S5.displayName=XC.displayName;const N5=S.forwardRef(({className:t,...s},n)=>e.jsx(GC,{ref:n,className:$s("text-sm font-semibold",t),...s}));N5.displayName=GC.displayName;const B5=S.forwardRef(({className:t,...s},n)=>e.jsx(WC,{ref:n,className:$s("text-sm opacity-90",t),...s}));B5.displayName=WC.displayName;function DD(){const{toasts:t}=ua();return e.jsxs(OD,{children:[t.map(function({id:s,title:n,description:r,action:i,...c}){return e.jsxs(w5,{...c,children:[e.jsxs("div",{className:"grid gap-1",children:[n&&e.jsx(N5,{children:n}),r&&e.jsx(B5,{children:r})]}),i,e.jsx(S5,{})]},s)}),e.jsx(j5,{})]})}function af(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}function Q0(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}function QD(t){const s=_D(t),n=S.forwardRef((r,i)=>{const{children:c,...A}=r,u=S.Children.toArray(c),d=u.find(PD);if(d){const h=d.props.children,o=u.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return e.jsx(s,{...A,ref:i,children:S.isValidElement(h)?S.cloneElement(h,void 0,o):null})}return e.jsx(s,{...A,ref:i,children:c})});return n.displayName=`${t}.Slot`,n}function _D(t){const s=S.forwardRef((n,r)=>{const{children:i,...c}=n;if(S.isValidElement(i)){const A=HD(i),u=kD(c,i.props);return i.type!==S.Fragment&&(u.ref=r?Ch(r,A):A),S.cloneElement(i,u)}return S.Children.count(i)>1?S.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var MD=Symbol("radix.slottable");function PD(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===MD}function kD(t,s){const n={...s};for(const r in s){const i=t[r],c=s[r];/^on[A-Z]/.test(r)?i&&c?n[r]=(...u)=>{const d=c(...u);return i(...u),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...c}:r==="className"&&(n[r]=[i,c].filter(Boolean).join(" "))}return{...t,...n}}function HD(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],gr=zD.reduce((t,s)=>{const n=QD(`Primitive.${s}`),r=S.forwardRef((i,c)=>{const{asChild:A,...u}=i,d=A?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...u,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function KD(t,s){t&&Bh.flushSync(()=>t.dispatchEvent(s))}var $D="DismissableLayer",cb="dismissableLayer.update",VD="dismissableLayer.pointerDownOutside",qD="dismissableLayer.focusOutside",N2,C5=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ux=S.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:c,onInteractOutside:A,onDismiss:u,...d}=t,h=S.useContext(C5),[o,m]=S.useState(null),y=o?.ownerDocument??globalThis?.document,[,p]=S.useState({}),j=Pr(s,q=>m(q)),b=Array.from(h.layers),[w]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),B=b.indexOf(w),U=o?b.indexOf(o):-1,Q=h.layersWithOutsidePointerEventsDisabled.size>0,k=U>=B,K=YD(q=>{const G=q.target,W=[...h.branches].some(he=>he.contains(G));!k||W||(i?.(q),A?.(q),q.defaultPrevented||u?.())},y),ee=XD(q=>{const G=q.target;[...h.branches].some(he=>he.contains(G))||(c?.(q),A?.(q),q.defaultPrevented||u?.())},y);return BC(q=>{U===h.layers.size-1&&(r?.(q),!q.defaultPrevented&&u&&(q.preventDefault(),u()))},y),S.useEffect(()=>{if(o)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(N2=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(o)),h.layers.add(o),B2(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=N2)}},[o,y,n,h]),S.useEffect(()=>()=>{o&&(h.layers.delete(o),h.layersWithOutsidePointerEventsDisabled.delete(o),B2())},[o,h]),S.useEffect(()=>{const q=()=>p({});return document.addEventListener(cb,q),()=>document.removeEventListener(cb,q)},[]),e.jsx(gr.div,{...d,ref:j,style:{pointerEvents:Q?k?"auto":"none":void 0,...t.style},onFocusCapture:Q0(t.onFocusCapture,ee.onFocusCapture),onBlurCapture:Q0(t.onBlurCapture,ee.onBlurCapture),onPointerDownCapture:Q0(t.onPointerDownCapture,K.onPointerDownCapture)})});ux.displayName=$D;var GD="DismissableLayerBranch",WD=S.forwardRef((t,s)=>{const n=S.useContext(C5),r=S.useRef(null),i=Pr(s,r);return S.useEffect(()=>{const c=r.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),e.jsx(gr.div,{...t,ref:i})});WD.displayName=GD;function YD(t,s=globalThis?.document){const n=Wo(t),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const c=u=>{if(u.target&&!r.current){let d=function(){E5(VD,n,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(s.removeEventListener("click",i.current),i.current=d,s.addEventListener("click",i.current,{once:!0})):d()}else s.removeEventListener("click",i.current);r.current=!1},A=window.setTimeout(()=>{s.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(A),s.removeEventListener("pointerdown",c),s.removeEventListener("click",i.current)}},[s,n]),{onPointerDownCapture:()=>r.current=!0}}function XD(t,s=globalThis?.document){const n=Wo(t),r=S.useRef(!1);return S.useEffect(()=>{const i=c=>{c.target&&!r.current&&E5(qD,n,{originalEvent:c},{discrete:!1})};return s.addEventListener("focusin",i),()=>s.removeEventListener("focusin",i)},[s,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function B2(){const t=new CustomEvent(cb);document.dispatchEvent(t)}function E5(t,s,n,{discrete:r}){const i=n.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&i.addEventListener(t,s,{once:!0}),r?KD(i,c):i.dispatchEvent(c)}var JD=xA[" useId ".trim().toString()]||(()=>{}),ZD=0;function uu(t){const[s,n]=S.useState(JD());return ei(()=>{n(r=>r??String(ZD++))},[t]),s?`radix-${s}`:""}const eQ=["top","right","bottom","left"],pu=Math.min,Wl=Math.max,Py=Math.round,_g=Math.floor,Ud=t=>({x:t,y:t}),tQ={left:"right",right:"left",bottom:"top",top:"bottom"},sQ={start:"end",end:"start"};function db(t,s,n){return Wl(t,pu(s,n))}function fA(t,s){return typeof t=="function"?t(s):t}function pA(t){return t.split("-")[0]}function _f(t){return t.split("-")[1]}function j1(t){return t==="x"?"y":"x"}function w1(t){return t==="y"?"height":"width"}const nQ=new Set(["top","bottom"]);function Rd(t){return nQ.has(pA(t))?"y":"x"}function S1(t){return j1(Rd(t))}function rQ(t,s,n){n===void 0&&(n=!1);const r=_f(t),i=S1(t),c=w1(i);let A=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return s.reference[c]>s.floating[c]&&(A=ky(A)),[A,ky(A)]}function aQ(t){const s=ky(t);return[Ab(t),s,Ab(s)]}function Ab(t){return t.replace(/start|end/g,s=>sQ[s])}const C2=["left","right"],E2=["right","left"],iQ=["top","bottom"],oQ=["bottom","top"];function lQ(t,s,n){switch(t){case"top":case"bottom":return n?s?E2:C2:s?C2:E2;case"left":case"right":return s?iQ:oQ;default:return[]}}function cQ(t,s,n,r){const i=_f(t);let c=lQ(pA(t),n==="start",r);return i&&(c=c.map(A=>A+"-"+i),s&&(c=c.concat(c.map(Ab)))),c}function ky(t){return t.replace(/left|right|bottom|top/g,s=>tQ[s])}function dQ(t){return{top:0,right:0,bottom:0,left:0,...t}}function T5(t){return typeof t!="number"?dQ(t):{top:t,right:t,bottom:t,left:t}}function Hy(t){const{x:s,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:s,right:s+r,bottom:n+i,x:s,y:n}}function T2(t,s,n){let{reference:r,floating:i}=t;const c=Rd(s),A=S1(s),u=w1(A),d=pA(s),h=c==="y",o=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,y=r[u]/2-i[u]/2;let p;switch(d){case"top":p={x:o,y:r.y-i.height};break;case"bottom":p={x:o,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:m};break;case"left":p={x:r.x-i.width,y:m};break;default:p={x:r.x,y:r.y}}switch(_f(s)){case"start":p[A]-=y*(n&&h?-1:1);break;case"end":p[A]+=y*(n&&h?-1:1);break}return p}const AQ=async(t,s,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:c=[],platform:A}=n,u=c.filter(Boolean),d=await(A.isRTL==null?void 0:A.isRTL(s));let h=await A.getElementRects({reference:t,floating:s,strategy:i}),{x:o,y:m}=T2(h,r,d),y=r,p={},j=0;for(let b=0;b<u.length;b++){const{name:w,fn:B}=u[b],{x:U,y:Q,data:k,reset:K}=await B({x:o,y:m,initialPlacement:r,placement:y,strategy:i,middlewareData:p,rects:h,platform:A,elements:{reference:t,floating:s}});o=U??o,m=Q??m,p={...p,[w]:{...p[w],...k}},K&&j<=50&&(j++,typeof K=="object"&&(K.placement&&(y=K.placement),K.rects&&(h=K.rects===!0?await A.getElementRects({reference:t,floating:s,strategy:i}):K.rects),{x:o,y:m}=T2(h,y,d)),b=-1)}return{x:o,y:m,placement:y,strategy:i,middlewareData:p}};async function Am(t,s){var n;s===void 0&&(s={});const{x:r,y:i,platform:c,rects:A,elements:u,strategy:d}=t,{boundary:h="clippingAncestors",rootBoundary:o="viewport",elementContext:m="floating",altBoundary:y=!1,padding:p=0}=fA(s,t),j=T5(p),w=u[y?m==="floating"?"reference":"floating":m],B=Hy(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(w)))==null||n?w:w.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(u.floating)),boundary:h,rootBoundary:o,strategy:d})),U=m==="floating"?{x:r,y:i,width:A.floating.width,height:A.floating.height}:A.reference,Q=await(c.getOffsetParent==null?void 0:c.getOffsetParent(u.floating)),k=await(c.isElement==null?void 0:c.isElement(Q))?await(c.getScale==null?void 0:c.getScale(Q))||{x:1,y:1}:{x:1,y:1},K=Hy(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:U,offsetParent:Q,strategy:d}):U);return{top:(B.top-K.top+j.top)/k.y,bottom:(K.bottom-B.bottom+j.bottom)/k.y,left:(B.left-K.left+j.left)/k.x,right:(K.right-B.right+j.right)/k.x}}const uQ=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:r,placement:i,rects:c,platform:A,elements:u,middlewareData:d}=s,{element:h,padding:o=0}=fA(t,s)||{};if(h==null)return{};const m=T5(o),y={x:n,y:r},p=S1(i),j=w1(p),b=await A.getDimensions(h),w=p==="y",B=w?"top":"left",U=w?"bottom":"right",Q=w?"clientHeight":"clientWidth",k=c.reference[j]+c.reference[p]-y[p]-c.floating[j],K=y[p]-c.reference[p],ee=await(A.getOffsetParent==null?void 0:A.getOffsetParent(h));let q=ee?ee[Q]:0;(!q||!await(A.isElement==null?void 0:A.isElement(ee)))&&(q=u.floating[Q]||c.floating[j]);const G=k/2-K/2,W=q/2-b[j]/2-1,he=pu(m[B],W),Z=pu(m[U],W),ie=he,ce=q-b[j]-Z,ae=q/2-b[j]/2+G,de=db(ie,ae,ce),se=!d.arrow&&_f(i)!=null&&ae!==de&&c.reference[j]/2-(ae<ie?he:Z)-b[j]/2<0,re=se?ae<ie?ae-ie:ae-ce:0;return{[p]:y[p]+re,data:{[p]:de,centerOffset:ae-de-re,...se&&{alignmentOffset:re}},reset:se}}}),hQ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,r;const{placement:i,middlewareData:c,rects:A,initialPlacement:u,platform:d,elements:h}=s,{mainAxis:o=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:b=!0,...w}=fA(t,s);if((n=c.arrow)!=null&&n.alignmentOffset)return{};const B=pA(i),U=Rd(u),Q=pA(u)===u,k=await(d.isRTL==null?void 0:d.isRTL(h.floating)),K=y||(Q||!b?[ky(u)]:aQ(u)),ee=j!=="none";!y&&ee&&K.push(...cQ(u,b,j,k));const q=[u,...K],G=await Am(s,w),W=[];let he=((r=c.flip)==null?void 0:r.overflows)||[];if(o&&W.push(G[B]),m){const ae=rQ(i,A,k);W.push(G[ae[0]],G[ae[1]])}if(he=[...he,{placement:i,overflows:W}],!W.every(ae=>ae<=0)){var Z,ie;const ae=(((Z=c.flip)==null?void 0:Z.index)||0)+1,de=q[ae];if(de&&(!(m==="alignment"?U!==Rd(de):!1)||he.every(te=>Rd(te.placement)===U?te.overflows[0]>0:!0)))return{data:{index:ae,overflows:he},reset:{placement:de}};let se=(ie=he.filter(re=>re.overflows[0]<=0).sort((re,te)=>re.overflows[1]-te.overflows[1])[0])==null?void 0:ie.placement;if(!se)switch(p){case"bestFit":{var ce;const re=(ce=he.filter(te=>{if(ee){const be=Rd(te.placement);return be===U||be==="y"}return!0}).map(te=>[te.placement,te.overflows.filter(be=>be>0).reduce((be,He)=>be+He,0)]).sort((te,be)=>te[1]-be[1])[0])==null?void 0:ce[0];re&&(se=re);break}case"initialPlacement":se=u;break}if(i!==se)return{reset:{placement:se}}}return{}}}};function F2(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function I2(t){return eQ.some(s=>t[s]>=0)}const fQ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n}=s,{strategy:r="referenceHidden",...i}=fA(t,s);switch(r){case"referenceHidden":{const c=await Am(s,{...i,elementContext:"reference"}),A=F2(c,n.reference);return{data:{referenceHiddenOffsets:A,referenceHidden:I2(A)}}}case"escaped":{const c=await Am(s,{...i,altBoundary:!0}),A=F2(c,n.floating);return{data:{escapedOffsets:A,escaped:I2(A)}}}default:return{}}}}},F5=new Set(["left","top"]);async function pQ(t,s){const{placement:n,platform:r,elements:i}=t,c=await(r.isRTL==null?void 0:r.isRTL(i.floating)),A=pA(n),u=_f(n),d=Rd(n)==="y",h=F5.has(A)?-1:1,o=c&&d?-1:1,m=fA(s,t);let{mainAxis:y,crossAxis:p,alignmentAxis:j}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return u&&typeof j=="number"&&(p=u==="end"?j*-1:j),d?{x:p*o,y:y*h}:{x:y*h,y:p*o}}const mQ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,r;const{x:i,y:c,placement:A,middlewareData:u}=s,d=await pQ(s,t);return A===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:c+d.y,data:{...d,placement:A}}}}},gQ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:r,placement:i}=s,{mainAxis:c=!0,crossAxis:A=!1,limiter:u={fn:w=>{let{x:B,y:U}=w;return{x:B,y:U}}},...d}=fA(t,s),h={x:n,y:r},o=await Am(s,d),m=Rd(pA(i)),y=j1(m);let p=h[y],j=h[m];if(c){const w=y==="y"?"top":"left",B=y==="y"?"bottom":"right",U=p+o[w],Q=p-o[B];p=db(U,p,Q)}if(A){const w=m==="y"?"top":"left",B=m==="y"?"bottom":"right",U=j+o[w],Q=j-o[B];j=db(U,j,Q)}const b=u.fn({...s,[y]:p,[m]:j});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[y]:c,[m]:A}}}}}},yQ=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:r,placement:i,rects:c,middlewareData:A}=s,{offset:u=0,mainAxis:d=!0,crossAxis:h=!0}=fA(t,s),o={x:n,y:r},m=Rd(i),y=j1(m);let p=o[y],j=o[m];const b=fA(u,s),w=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(d){const Q=y==="y"?"height":"width",k=c.reference[y]-c.floating[Q]+w.mainAxis,K=c.reference[y]+c.reference[Q]-w.mainAxis;p<k?p=k:p>K&&(p=K)}if(h){var B,U;const Q=y==="y"?"width":"height",k=F5.has(pA(i)),K=c.reference[m]-c.floating[Q]+(k&&((B=A.offset)==null?void 0:B[m])||0)+(k?0:w.crossAxis),ee=c.reference[m]+c.reference[Q]+(k?0:((U=A.offset)==null?void 0:U[m])||0)-(k?w.crossAxis:0);j<K?j=K:j>ee&&(j=ee)}return{[y]:p,[m]:j}}}},xQ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,r;const{placement:i,rects:c,platform:A,elements:u}=s,{apply:d=()=>{},...h}=fA(t,s),o=await Am(s,h),m=pA(i),y=_f(i),p=Rd(i)==="y",{width:j,height:b}=c.floating;let w,B;m==="top"||m==="bottom"?(w=m,B=y===(await(A.isRTL==null?void 0:A.isRTL(u.floating))?"start":"end")?"left":"right"):(B=m,w=y==="end"?"top":"bottom");const U=b-o.top-o.bottom,Q=j-o.left-o.right,k=pu(b-o[w],U),K=pu(j-o[B],Q),ee=!s.middlewareData.shift;let q=k,G=K;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&(G=Q),(r=s.middlewareData.shift)!=null&&r.enabled.y&&(q=U),ee&&!y){const he=Wl(o.left,0),Z=Wl(o.right,0),ie=Wl(o.top,0),ce=Wl(o.bottom,0);p?G=j-2*(he!==0||Z!==0?he+Z:Wl(o.left,o.right)):q=b-2*(ie!==0||ce!==0?ie+ce:Wl(o.top,o.bottom))}await d({...s,availableWidth:G,availableHeight:q});const W=await A.getDimensions(u.floating);return j!==W.width||b!==W.height?{reset:{rects:!0}}:{}}}};function hx(){return typeof window<"u"}function Mf(t){return I5(t)?(t.nodeName||"").toLowerCase():"#document"}function Jl(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function Pd(t){var s;return(s=(I5(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function I5(t){return hx()?t instanceof Node||t instanceof Jl(t).Node:!1}function Jc(t){return hx()?t instanceof Element||t instanceof Jl(t).Element:!1}function Qd(t){return hx()?t instanceof HTMLElement||t instanceof Jl(t).HTMLElement:!1}function R2(t){return!hx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Jl(t).ShadowRoot}const vQ=new Set(["inline","contents"]);function wm(t){const{overflow:s,overflowX:n,overflowY:r,display:i}=Zc(t);return/auto|scroll|overlay|hidden|clip/.test(s+r+n)&&!vQ.has(i)}const bQ=new Set(["table","td","th"]);function jQ(t){return bQ.has(Mf(t))}const wQ=[":popover-open",":modal"];function fx(t){return wQ.some(s=>{try{return t.matches(s)}catch{return!1}})}const SQ=["transform","translate","scale","rotate","perspective"],NQ=["transform","translate","scale","rotate","perspective","filter"],BQ=["paint","layout","strict","content"];function N1(t){const s=B1(),n=Jc(t)?Zc(t):t;return SQ.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||NQ.some(r=>(n.willChange||"").includes(r))||BQ.some(r=>(n.contain||"").includes(r))}function CQ(t){let s=mu(t);for(;Qd(s)&&!Ff(s);){if(N1(s))return s;if(fx(s))return null;s=mu(s)}return null}function B1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const EQ=new Set(["html","body","#document"]);function Ff(t){return EQ.has(Mf(t))}function Zc(t){return Jl(t).getComputedStyle(t)}function px(t){return Jc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function mu(t){if(Mf(t)==="html")return t;const s=t.assignedSlot||t.parentNode||R2(t)&&t.host||Pd(t);return R2(s)?s.host:s}function R5(t){const s=mu(t);return Ff(s)?t.ownerDocument?t.ownerDocument.body:t.body:Qd(s)&&wm(s)?s:R5(s)}function um(t,s,n){var r;s===void 0&&(s=[]),n===void 0&&(n=!0);const i=R5(t),c=i===((r=t.ownerDocument)==null?void 0:r.body),A=Jl(i);if(c){const u=ub(A);return s.concat(A,A.visualViewport||[],wm(i)?i:[],u&&n?um(u):[])}return s.concat(i,um(i,[],n))}function ub(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function O5(t){const s=Zc(t);let n=parseFloat(s.width)||0,r=parseFloat(s.height)||0;const i=Qd(t),c=i?t.offsetWidth:n,A=i?t.offsetHeight:r,u=Py(n)!==c||Py(r)!==A;return u&&(n=c,r=A),{width:n,height:r,$:u}}function C1(t){return Jc(t)?t:t.contextElement}function Sf(t){const s=C1(t);if(!Qd(s))return Ud(1);const n=s.getBoundingClientRect(),{width:r,height:i,$:c}=O5(s);let A=(c?Py(n.width):n.width)/r,u=(c?Py(n.height):n.height)/i;return(!A||!Number.isFinite(A))&&(A=1),(!u||!Number.isFinite(u))&&(u=1),{x:A,y:u}}const TQ=Ud(0);function U5(t){const s=Jl(t);return!B1()||!s.visualViewport?TQ:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function FQ(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==Jl(t)?!1:s}function xh(t,s,n,r){s===void 0&&(s=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),c=C1(t);let A=Ud(1);s&&(r?Jc(r)&&(A=Sf(r)):A=Sf(t));const u=FQ(c,n,r)?U5(c):Ud(0);let d=(i.left+u.x)/A.x,h=(i.top+u.y)/A.y,o=i.width/A.x,m=i.height/A.y;if(c){const y=Jl(c),p=r&&Jc(r)?Jl(r):r;let j=y,b=ub(j);for(;b&&r&&p!==j;){const w=Sf(b),B=b.getBoundingClientRect(),U=Zc(b),Q=B.left+(b.clientLeft+parseFloat(U.paddingLeft))*w.x,k=B.top+(b.clientTop+parseFloat(U.paddingTop))*w.y;d*=w.x,h*=w.y,o*=w.x,m*=w.y,d+=Q,h+=k,j=Jl(b),b=ub(j)}}return Hy({width:o,height:m,x:d,y:h})}function mx(t,s){const n=px(t).scrollLeft;return s?s.left+n:xh(Pd(t)).left+n}function L5(t,s){const n=t.getBoundingClientRect(),r=n.left+s.scrollLeft-mx(t,n),i=n.top+s.scrollTop;return{x:r,y:i}}function IQ(t){let{elements:s,rect:n,offsetParent:r,strategy:i}=t;const c=i==="fixed",A=Pd(r),u=s?fx(s.floating):!1;if(r===A||u&&c)return n;let d={scrollLeft:0,scrollTop:0},h=Ud(1);const o=Ud(0),m=Qd(r);if((m||!m&&!c)&&((Mf(r)!=="body"||wm(A))&&(d=px(r)),Qd(r))){const p=xh(r);h=Sf(r),o.x=p.x+r.clientLeft,o.y=p.y+r.clientTop}const y=A&&!m&&!c?L5(A,d):Ud(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+o.x+y.x,y:n.y*h.y-d.scrollTop*h.y+o.y+y.y}}function RQ(t){return Array.from(t.getClientRects())}function OQ(t){const s=Pd(t),n=px(t),r=t.ownerDocument.body,i=Wl(s.scrollWidth,s.clientWidth,r.scrollWidth,r.clientWidth),c=Wl(s.scrollHeight,s.clientHeight,r.scrollHeight,r.clientHeight);let A=-n.scrollLeft+mx(t);const u=-n.scrollTop;return Zc(r).direction==="rtl"&&(A+=Wl(s.clientWidth,r.clientWidth)-i),{width:i,height:c,x:A,y:u}}const O2=25;function UQ(t,s){const n=Jl(t),r=Pd(t),i=n.visualViewport;let c=r.clientWidth,A=r.clientHeight,u=0,d=0;if(i){c=i.width,A=i.height;const o=B1();(!o||o&&s==="fixed")&&(u=i.offsetLeft,d=i.offsetTop)}const h=mx(r);if(h<=0){const o=r.ownerDocument,m=o.body,y=getComputedStyle(m),p=o.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,j=Math.abs(r.clientWidth-m.clientWidth-p);j<=O2&&(c-=j)}else h<=O2&&(c+=h);return{width:c,height:A,x:u,y:d}}const LQ=new Set(["absolute","fixed"]);function DQ(t,s){const n=xh(t,!0,s==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,c=Qd(t)?Sf(t):Ud(1),A=t.clientWidth*c.x,u=t.clientHeight*c.y,d=i*c.x,h=r*c.y;return{width:A,height:u,x:d,y:h}}function U2(t,s,n){let r;if(s==="viewport")r=UQ(t,n);else if(s==="document")r=OQ(Pd(t));else if(Jc(s))r=DQ(s,n);else{const i=U5(t);r={x:s.x-i.x,y:s.y-i.y,width:s.width,height:s.height}}return Hy(r)}function D5(t,s){const n=mu(t);return n===s||!Jc(n)||Ff(n)?!1:Zc(n).position==="fixed"||D5(n,s)}function QQ(t,s){const n=s.get(t);if(n)return n;let r=um(t,[],!1).filter(u=>Jc(u)&&Mf(u)!=="body"),i=null;const c=Zc(t).position==="fixed";let A=c?mu(t):t;for(;Jc(A)&&!Ff(A);){const u=Zc(A),d=N1(A);!d&&u.position==="fixed"&&(i=null),(c?!d&&!i:!d&&u.position==="static"&&!!i&&LQ.has(i.position)||wm(A)&&!d&&D5(t,A))?r=r.filter(o=>o!==A):i=u,A=mu(A)}return s.set(t,r),r}function _Q(t){let{element:s,boundary:n,rootBoundary:r,strategy:i}=t;const A=[...n==="clippingAncestors"?fx(s)?[]:QQ(s,this._c):[].concat(n),r],u=A[0],d=A.reduce((h,o)=>{const m=U2(s,o,i);return h.top=Wl(m.top,h.top),h.right=pu(m.right,h.right),h.bottom=pu(m.bottom,h.bottom),h.left=Wl(m.left,h.left),h},U2(s,u,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function MQ(t){const{width:s,height:n}=O5(t);return{width:s,height:n}}function PQ(t,s,n){const r=Qd(s),i=Pd(s),c=n==="fixed",A=xh(t,!0,c,s);let u={scrollLeft:0,scrollTop:0};const d=Ud(0);function h(){d.x=mx(i)}if(r||!r&&!c)if((Mf(s)!=="body"||wm(i))&&(u=px(s)),r){const p=xh(s,!0,c,s);d.x=p.x+s.clientLeft,d.y=p.y+s.clientTop}else i&&h();c&&!r&&i&&h();const o=i&&!r&&!c?L5(i,u):Ud(0),m=A.left+u.scrollLeft-d.x-o.x,y=A.top+u.scrollTop-d.y-o.y;return{x:m,y,width:A.width,height:A.height}}function _0(t){return Zc(t).position==="static"}function L2(t,s){if(!Qd(t)||Zc(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return Pd(t)===n&&(n=n.ownerDocument.body),n}function Q5(t,s){const n=Jl(t);if(fx(t))return n;if(!Qd(t)){let i=mu(t);for(;i&&!Ff(i);){if(Jc(i)&&!_0(i))return i;i=mu(i)}return n}let r=L2(t,s);for(;r&&jQ(r)&&_0(r);)r=L2(r,s);return r&&Ff(r)&&_0(r)&&!N1(r)?n:r||CQ(t)||n}const kQ=async function(t){const s=this.getOffsetParent||Q5,n=this.getDimensions,r=await n(t.floating);return{reference:PQ(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function HQ(t){return Zc(t).direction==="rtl"}const zQ={convertOffsetParentRelativeRectToViewportRelativeRect:IQ,getDocumentElement:Pd,getClippingRect:_Q,getOffsetParent:Q5,getElementRects:kQ,getClientRects:RQ,getDimensions:MQ,getScale:Sf,isElement:Jc,isRTL:HQ};function _5(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function KQ(t,s){let n=null,r;const i=Pd(t);function c(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function A(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),c();const h=t.getBoundingClientRect(),{left:o,top:m,width:y,height:p}=h;if(u||s(),!y||!p)return;const j=_g(m),b=_g(i.clientWidth-(o+y)),w=_g(i.clientHeight-(m+p)),B=_g(o),Q={rootMargin:-j+"px "+-b+"px "+-w+"px "+-B+"px",threshold:Wl(0,pu(1,d))||1};let k=!0;function K(ee){const q=ee[0].intersectionRatio;if(q!==d){if(!k)return A();q?A(!1,q):r=setTimeout(()=>{A(!1,1e-7)},1e3)}q===1&&!_5(h,t.getBoundingClientRect())&&A(),k=!1}try{n=new IntersectionObserver(K,{...Q,root:i.ownerDocument})}catch{n=new IntersectionObserver(K,Q)}n.observe(t)}return A(!0),c}function $Q(t,s,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:c=!0,elementResize:A=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=C1(t),o=i||c?[...h?um(h):[],...um(s)]:[];o.forEach(B=>{i&&B.addEventListener("scroll",n,{passive:!0}),c&&B.addEventListener("resize",n)});const m=h&&u?KQ(h,n):null;let y=-1,p=null;A&&(p=new ResizeObserver(B=>{let[U]=B;U&&U.target===h&&p&&(p.unobserve(s),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var Q;(Q=p)==null||Q.observe(s)})),n()}),h&&!d&&p.observe(h),p.observe(s));let j,b=d?xh(t):null;d&&w();function w(){const B=xh(t);b&&!_5(b,B)&&n(),b=B,j=requestAnimationFrame(w)}return n(),()=>{var B;o.forEach(U=>{i&&U.removeEventListener("scroll",n),c&&U.removeEventListener("resize",n)}),m?.(),(B=p)==null||B.disconnect(),p=null,d&&cancelAnimationFrame(j)}}const VQ=mQ,qQ=gQ,GQ=hQ,WQ=xQ,YQ=fQ,D2=uQ,XQ=yQ,JQ=(t,s,n)=>{const r=new Map,i={platform:zQ,...n},c={...i.platform,_c:r};return AQ(t,s,{...i,platform:c})};var ZQ=typeof document<"u",e6=function(){},hy=ZQ?S.useLayoutEffect:e6;function zy(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,r,i;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(r=n;r--!==0;)if(!zy(t[r],s[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(s).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(s,i[r]))return!1;for(r=n;r--!==0;){const c=i[r];if(!(c==="_owner"&&t.$$typeof)&&!zy(t[c],s[c]))return!1}return!0}return t!==t&&s!==s}function M5(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Q2(t,s){const n=M5(t);return Math.round(s*n)/n}function M0(t){const s=S.useRef(t);return hy(()=>{s.current=t}),s}function t6(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:c,floating:A}={},transform:u=!0,whileElementsMounted:d,open:h}=t,[o,m]=S.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[y,p]=S.useState(r);zy(y,r)||p(r);const[j,b]=S.useState(null),[w,B]=S.useState(null),U=S.useCallback(te=>{te!==ee.current&&(ee.current=te,b(te))},[]),Q=S.useCallback(te=>{te!==q.current&&(q.current=te,B(te))},[]),k=c||j,K=A||w,ee=S.useRef(null),q=S.useRef(null),G=S.useRef(o),W=d!=null,he=M0(d),Z=M0(i),ie=M0(h),ce=S.useCallback(()=>{if(!ee.current||!q.current)return;const te={placement:s,strategy:n,middleware:y};Z.current&&(te.platform=Z.current),JQ(ee.current,q.current,te).then(be=>{const He={...be,isPositioned:ie.current!==!1};ae.current&&!zy(G.current,He)&&(G.current=He,Bh.flushSync(()=>{m(He)}))})},[y,s,n,Z,ie]);hy(()=>{h===!1&&G.current.isPositioned&&(G.current.isPositioned=!1,m(te=>({...te,isPositioned:!1})))},[h]);const ae=S.useRef(!1);hy(()=>(ae.current=!0,()=>{ae.current=!1}),[]),hy(()=>{if(k&&(ee.current=k),K&&(q.current=K),k&&K){if(he.current)return he.current(k,K,ce);ce()}},[k,K,ce,he,W]);const de=S.useMemo(()=>({reference:ee,floating:q,setReference:U,setFloating:Q}),[U,Q]),se=S.useMemo(()=>({reference:k,floating:K}),[k,K]),re=S.useMemo(()=>{const te={position:n,left:0,top:0};if(!se.floating)return te;const be=Q2(se.floating,o.x),He=Q2(se.floating,o.y);return u?{...te,transform:"translate("+be+"px, "+He+"px)",...M5(se.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:be,top:He}},[n,u,se.floating,o.x,o.y]);return S.useMemo(()=>({...o,update:ce,refs:de,elements:se,floatingStyles:re}),[o,ce,de,se,re])}const s6=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&s(r)?r.current!=null?D2({element:r.current,padding:i}).fn(n):{}:r?D2({element:r,padding:i}).fn(n):{}}}},n6=(t,s)=>({...VQ(t),options:[t,s]}),r6=(t,s)=>({...qQ(t),options:[t,s]}),a6=(t,s)=>({...XQ(t),options:[t,s]}),i6=(t,s)=>({...GQ(t),options:[t,s]}),o6=(t,s)=>({...WQ(t),options:[t,s]}),l6=(t,s)=>({...YQ(t),options:[t,s]}),c6=(t,s)=>({...s6(t),options:[t,s]});var d6="Arrow",P5=S.forwardRef((t,s)=>{const{children:n,width:r=10,height:i=5,...c}=t;return e.jsx(gr.svg,{...c,ref:s,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});P5.displayName=d6;var A6=P5;function E1(t){const[s,n]=S.useState(void 0);return ei(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const c=i[0];let A,u;if("borderBoxSize"in c){const d=c.borderBoxSize,h=Array.isArray(d)?d[0]:d;A=h.inlineSize,u=h.blockSize}else A=t.offsetWidth,u=t.offsetHeight;n({width:A,height:u})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),s}var T1="Popper",[k5,gx]=Cc(T1),[u6,H5]=k5(T1),z5=t=>{const{__scopePopper:s,children:n}=t,[r,i]=S.useState(null);return e.jsx(u6,{scope:s,anchor:r,onAnchorChange:i,children:n})};z5.displayName=T1;var K5="PopperAnchor",$5=S.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:r,...i}=t,c=H5(K5,n),A=S.useRef(null),u=Pr(s,A),d=S.useRef(null);return S.useEffect(()=>{const h=d.current;d.current=r?.current||A.current,h!==d.current&&c.onAnchorChange(d.current)}),r?null:e.jsx(gr.div,{...i,ref:u})});$5.displayName=K5;var F1="PopperContent",[h6,f6]=k5(F1),V5=S.forwardRef((t,s)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:c="center",alignOffset:A=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:o=0,sticky:m="partial",hideWhenDetached:y=!1,updatePositionStrategy:p="optimized",onPlaced:j,...b}=t,w=H5(F1,n),[B,U]=S.useState(null),Q=Pr(s,ge=>U(ge)),[k,K]=S.useState(null),ee=E1(k),q=ee?.width??0,G=ee?.height??0,W=r+(c!=="center"?"-"+c:""),he=typeof o=="number"?o:{top:0,right:0,bottom:0,left:0,...o},Z=Array.isArray(h)?h:[h],ie=Z.length>0,ce={padding:he,boundary:Z.filter(m6),altBoundary:ie},{refs:ae,floatingStyles:de,placement:se,isPositioned:re,middlewareData:te}=t6({strategy:"fixed",placement:W,whileElementsMounted:(...ge)=>$Q(...ge,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[n6({mainAxis:i+G,alignmentAxis:A}),d&&r6({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?a6():void 0,...ce}),d&&i6({...ce}),o6({...ce,apply:({elements:ge,rects:ye,availableWidth:we,availableHeight:Ne})=>{const{width:ke,height:Be}=ye.reference,Ae=ge.floating.style;Ae.setProperty("--radix-popper-available-width",`${we}px`),Ae.setProperty("--radix-popper-available-height",`${Ne}px`),Ae.setProperty("--radix-popper-anchor-width",`${ke}px`),Ae.setProperty("--radix-popper-anchor-height",`${Be}px`)}}),k&&c6({element:k,padding:u}),g6({arrowWidth:q,arrowHeight:G}),y&&l6({strategy:"referenceHidden",...ce})]}),[be,He]=W5(se),pe=Wo(j);ei(()=>{re&&pe?.()},[re,pe]);const Y=te.arrow?.x,me=te.arrow?.y,Se=te.arrow?.centerOffset!==0,[je,Le]=S.useState();return ei(()=>{B&&Le(window.getComputedStyle(B).zIndex)},[B]),e.jsx("div",{ref:ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:re?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[te.transformOrigin?.x,te.transformOrigin?.y].join(" "),...te.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(h6,{scope:n,placedSide:be,onArrowChange:K,arrowX:Y,arrowY:me,shouldHideArrow:Se,children:e.jsx(gr.div,{"data-side":be,"data-align":He,...b,ref:Q,style:{...b.style,animation:re?void 0:"none"}})})})});V5.displayName=F1;var q5="PopperArrow",p6={top:"bottom",right:"left",bottom:"top",left:"right"},G5=S.forwardRef(function(s,n){const{__scopePopper:r,...i}=s,c=f6(q5,r),A=p6[c.placedSide];return e.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[A]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:e.jsx(A6,{...i,ref:n,style:{...i.style,display:"block"}})})});G5.displayName=q5;function m6(t){return t!==null}var g6=t=>({name:"transformOrigin",options:t,fn(s){const{placement:n,rects:r,middlewareData:i}=s,A=i.arrow?.centerOffset!==0,u=A?0:t.arrowWidth,d=A?0:t.arrowHeight,[h,o]=W5(n),m={start:"0%",center:"50%",end:"100%"}[o],y=(i.arrow?.x??0)+u/2,p=(i.arrow?.y??0)+d/2;let j="",b="";return h==="bottom"?(j=A?m:`${y}px`,b=`${-d}px`):h==="top"?(j=A?m:`${y}px`,b=`${r.floating.height+d}px`):h==="right"?(j=`${-d}px`,b=A?m:`${p}px`):h==="left"&&(j=`${r.floating.width+d}px`,b=A?m:`${p}px`),{data:{x:j,y:b}}}});function W5(t){const[s,n="center"]=t.split("-");return[s,n]}var y6=z5,Y5=$5,X5=V5,J5=G5,x6="Portal",yx=S.forwardRef((t,s)=>{const{container:n,...r}=t,[i,c]=S.useState(!1);ei(()=>c(!0),[]);const A=n||i&&globalThis?.document?.body;return A?SC.createPortal(e.jsx(gr.div,{...r,ref:s}),A):null});yx.displayName=x6;function v6(t,s){return S.useReducer((n,r)=>s[n][r]??n,t)}var vA=t=>{const{present:s,children:n}=t,r=b6(s),i=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),c=Pr(r.ref,j6(i));return typeof n=="function"||r.isPresent?S.cloneElement(i,{ref:c}):null};vA.displayName="Presence";function b6(t){const[s,n]=S.useState(),r=S.useRef(null),i=S.useRef(t),c=S.useRef("none"),A=t?"mounted":"unmounted",[u,d]=v6(A,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const h=Mg(r.current);c.current=u==="mounted"?h:"none"},[u]),ei(()=>{const h=r.current,o=i.current;if(o!==t){const y=c.current,p=Mg(h);t?d("MOUNT"):p==="none"||h?.display==="none"?d("UNMOUNT"):d(o&&y!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,d]),ei(()=>{if(s){let h;const o=s.ownerDocument.defaultView??window,m=p=>{const b=Mg(r.current).includes(CSS.escape(p.animationName));if(p.target===s&&b&&(d("ANIMATION_END"),!i.current)){const w=s.style.animationFillMode;s.style.animationFillMode="forwards",h=o.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=w)})}},y=p=>{p.target===s&&(c.current=Mg(r.current))};return s.addEventListener("animationstart",y),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{o.clearTimeout(h),s.removeEventListener("animationstart",y),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:S.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function Mg(t){return t?.animationName||"none"}function j6(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var w6=Symbol("radix.slottable");function S6(t){const s=({children:n})=>e.jsx(e.Fragment,{children:n});return s.displayName=`${t}.Slottable`,s.__radixId=w6,s}var Z5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),N6="VisuallyHidden",eE=S.forwardRef((t,s)=>e.jsx(gr.span,{...t,ref:s,style:{...Z5,...t.style}}));eE.displayName=N6;var B6=eE,[xx]=Cc("Tooltip",[gx]),I1=gx(),tE="TooltipProvider",C6=700,_2="tooltip.open",[E6,sE]=xx(tE),nE=t=>{const{__scopeTooltip:s,delayDuration:n=C6,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:c}=t,A=S.useRef(!0),u=S.useRef(!1),d=S.useRef(0);return S.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),e.jsx(E6,{scope:s,isOpenDelayedRef:A,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(d.current),A.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>A.current=!0,r)},[r]),isPointerInTransitRef:u,onPointerInTransitChange:S.useCallback(h=>{u.current=h},[]),disableHoverableContent:i,children:c})};nE.displayName=tE;var rE="Tooltip",[uW,Sm]=xx(rE),hb="TooltipTrigger",T6=S.forwardRef((t,s)=>{const{__scopeTooltip:n,...r}=t,i=Sm(hb,n),c=sE(hb,n),A=I1(n),u=S.useRef(null),d=Pr(s,u,i.onTriggerChange),h=S.useRef(!1),o=S.useRef(!1),m=S.useCallback(()=>h.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),e.jsx(Y5,{asChild:!0,...A,children:e.jsx(gr.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:d,onPointerMove:af(t.onPointerMove,y=>{y.pointerType!=="touch"&&!o.current&&!c.isPointerInTransitRef.current&&(i.onTriggerEnter(),o.current=!0)}),onPointerLeave:af(t.onPointerLeave,()=>{i.onTriggerLeave(),o.current=!1}),onPointerDown:af(t.onPointerDown,()=>{i.open&&i.onClose(),h.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:af(t.onFocus,()=>{h.current||i.onOpen()}),onBlur:af(t.onBlur,i.onClose),onClick:af(t.onClick,i.onClose)})})});T6.displayName=hb;var R1="TooltipPortal",[F6,I6]=xx(R1,{forceMount:void 0}),aE=t=>{const{__scopeTooltip:s,forceMount:n,children:r,container:i}=t,c=Sm(R1,s);return e.jsx(F6,{scope:s,forceMount:n,children:e.jsx(vA,{present:n||c.open,children:e.jsx(yx,{asChild:!0,container:i,children:r})})})};aE.displayName=R1;var If="TooltipContent",iE=S.forwardRef((t,s)=>{const n=I6(If,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...c}=t,A=Sm(If,t.__scopeTooltip);return e.jsx(vA,{present:r||A.open,children:A.disableHoverableContent?e.jsx(oE,{side:i,...c,ref:s}):e.jsx(R6,{side:i,...c,ref:s})})}),R6=S.forwardRef((t,s)=>{const n=Sm(If,t.__scopeTooltip),r=sE(If,t.__scopeTooltip),i=S.useRef(null),c=Pr(s,i),[A,u]=S.useState(null),{trigger:d,onClose:h}=n,o=i.current,{onPointerInTransitChange:m}=r,y=S.useCallback(()=>{u(null),m(!1)},[m]),p=S.useCallback((j,b)=>{const w=j.currentTarget,B={x:j.clientX,y:j.clientY},U=Q6(B,w.getBoundingClientRect()),Q=_6(B,U),k=M6(b.getBoundingClientRect()),K=k6([...Q,...k]);u(K),m(!0)},[m]);return S.useEffect(()=>()=>y(),[y]),S.useEffect(()=>{if(d&&o){const j=w=>p(w,o),b=w=>p(w,d);return d.addEventListener("pointerleave",j),o.addEventListener("pointerleave",b),()=>{d.removeEventListener("pointerleave",j),o.removeEventListener("pointerleave",b)}}},[d,o,p,y]),S.useEffect(()=>{if(A){const j=b=>{const w=b.target,B={x:b.clientX,y:b.clientY},U=d?.contains(w)||o?.contains(w),Q=!P6(B,A);U?y():Q&&(y(),h())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[d,o,A,h,y]),e.jsx(oE,{...t,ref:c})}),[O6,U6]=xx(rE,{isInside:!1}),L6=S6("TooltipContent"),oE=S.forwardRef((t,s)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:c,onPointerDownOutside:A,...u}=t,d=Sm(If,n),h=I1(n),{onClose:o}=d;return S.useEffect(()=>(document.addEventListener(_2,o),()=>document.removeEventListener(_2,o)),[o]),S.useEffect(()=>{if(d.trigger){const m=y=>{y.target?.contains(d.trigger)&&o()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[d.trigger,o]),e.jsx(ux,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:A,onFocusOutside:m=>m.preventDefault(),onDismiss:o,children:e.jsxs(X5,{"data-state":d.stateAttribute,...h,...u,ref:s,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(L6,{children:r}),e.jsx(O6,{scope:n,isInside:!0,children:e.jsx(B6,{id:d.contentId,role:"tooltip",children:i||r})})]})})});iE.displayName=If;var lE="TooltipArrow",D6=S.forwardRef((t,s)=>{const{__scopeTooltip:n,...r}=t,i=I1(n);return U6(lE,n).isInside?null:e.jsx(J5,{...i,...r,ref:s})});D6.displayName=lE;function Q6(t,s){const n=Math.abs(s.top-t.y),r=Math.abs(s.bottom-t.y),i=Math.abs(s.right-t.x),c=Math.abs(s.left-t.x);switch(Math.min(n,r,i,c)){case c:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function _6(t,s,n=5){const r=[];switch(s){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function M6(t){const{top:s,right:n,bottom:r,left:i}=t;return[{x:i,y:s},{x:n,y:s},{x:n,y:r},{x:i,y:r}]}function P6(t,s){const{x:n,y:r}=t;let i=!1;for(let c=0,A=s.length-1;c<s.length;A=c++){const u=s[c],d=s[A],h=u.x,o=u.y,m=d.x,y=d.y;o>r!=y>r&&n<(m-h)*(r-o)/(y-o)+h&&(i=!i)}return i}function k6(t){const s=t.slice();return s.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),H6(s)}function H6(t){if(t.length<=1)return t.slice();const s=[];for(let r=0;r<t.length;r++){const i=t[r];for(;s.length>=2;){const c=s[s.length-1],A=s[s.length-2];if((c.x-A.x)*(i.y-A.y)>=(c.y-A.y)*(i.x-A.x))s.pop();else break}s.push(i)}s.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const c=n[n.length-1],A=n[n.length-2];if((c.x-A.x)*(i.y-A.y)>=(c.y-A.y)*(i.x-A.x))n.pop();else break}n.push(i)}return n.pop(),s.length===1&&n.length===1&&s[0].x===n[0].x&&s[0].y===n[0].y?s:s.concat(n)}var z6=nE,K6=aE,cE=iE;const $6=z6,V6=S.forwardRef(({className:t,sideOffset:s=4,...n},r)=>e.jsx(K6,{children:e.jsx(cE,{ref:r,sideOffset:s,className:$s("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n})}));V6.displayName=cE.displayName;const Ms=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:$s("rounded-xl border bg-card text-card-foreground shadow",t),...s}));Ms.displayName="Card";const Ar=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:$s("flex flex-col space-y-1.5 p-6",t),...s}));Ar.displayName="CardHeader";const ur=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:$s("font-semibold leading-none tracking-tight",t),...s}));ur.displayName="CardTitle";const sa=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:$s("text-sm text-muted-foreground",t),...s}));sa.displayName="CardDescription";const Ws=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:$s("p-6 pt-0",t),...s}));Ws.displayName="CardContent";const Eh=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:$s("flex items-center p-6 pt-0",t),...s}));Eh.displayName="CardFooter";function q6(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(Ms,{className:"w-full max-w-md mx-4",children:e.jsxs(Ws,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(gh,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const O1=S.createContext({});function U1(t){const s=S.useRef(null);return s.current===null&&(s.current=t()),s.current}const L1=typeof window<"u",dE=L1?S.useLayoutEffect:S.useEffect,vx=S.createContext(null);function D1(t,s){t.indexOf(s)===-1&&t.push(s)}function Q1(t,s){const n=t.indexOf(s);n>-1&&t.splice(n,1)}const mA=(t,s,n)=>n>s?s:n<t?t:n;let _1=()=>{};const gA={},AE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function uE(t){return typeof t=="object"&&t!==null}const hE=t=>/^0[^.\s]+$/u.test(t);function M1(t){let s;return()=>(s===void 0&&(s=t()),s)}const Nc=t=>t,G6=(t,s)=>n=>s(t(n)),Nm=(...t)=>t.reduce(G6),hm=(t,s,n)=>{const r=s-t;return r===0?1:(n-t)/r};class P1{constructor(){this.subscriptions=[]}add(s){return D1(this.subscriptions,s),()=>Q1(this.subscriptions,s)}notify(s,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](s,n,r);else for(let c=0;c<i;c++){const A=this.subscriptions[c];A&&A(s,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ld=t=>t*1e3,Sc=t=>t/1e3;function fE(t,s){return s?t*(1e3/s):0}const pE=(t,s,n)=>(((1-3*n+3*s)*t+(3*n-6*s))*t+3*s)*t,W6=1e-7,Y6=12;function X6(t,s,n,r,i){let c,A,u=0;do A=s+(n-s)/2,c=pE(A,r,i)-t,c>0?n=A:s=A;while(Math.abs(c)>W6&&++u<Y6);return A}function Bm(t,s,n,r){if(t===s&&n===r)return Nc;const i=c=>X6(c,0,1,t,n);return c=>c===0||c===1?c:pE(i(c),s,r)}const mE=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,gE=t=>s=>1-t(1-s),yE=Bm(.33,1.53,.69,.99),k1=gE(yE),xE=mE(k1),vE=t=>(t*=2)<1?.5*k1(t):.5*(2-Math.pow(2,-10*(t-1))),H1=t=>1-Math.sin(Math.acos(t)),bE=gE(H1),jE=mE(H1),J6=Bm(.42,0,1,1),Z6=Bm(0,0,.58,1),wE=Bm(.42,0,.58,1),e_=t=>Array.isArray(t)&&typeof t[0]!="number",SE=t=>Array.isArray(t)&&typeof t[0]=="number",t_={linear:Nc,easeIn:J6,easeInOut:wE,easeOut:Z6,circIn:H1,circInOut:jE,circOut:bE,backIn:k1,backInOut:xE,backOut:yE,anticipate:vE},s_=t=>typeof t=="string",M2=t=>{if(SE(t)){_1(t.length===4);const[s,n,r,i]=t;return Bm(s,n,r,i)}else if(s_(t))return t_[t];return t},Pg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function n_(t,s){let n=new Set,r=new Set,i=!1,c=!1;const A=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(o){A.has(o)&&(h.schedule(o),t()),o(u)}const h={schedule:(o,m=!1,y=!1)=>{const j=y&&i?n:r;return m&&A.add(o),j.has(o)||j.add(o),o},cancel:o=>{r.delete(o),A.delete(o)},process:o=>{if(u=o,i){c=!0;return}i=!0,[n,r]=[r,n],n.forEach(d),n.clear(),i=!1,c&&(c=!1,h.process(o))}};return h}const r_=40;function NE(t,s){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},c=()=>n=!0,A=Pg.reduce((Q,k)=>(Q[k]=n_(c),Q),{}),{setup:u,read:d,resolveKeyframes:h,preUpdate:o,update:m,preRender:y,render:p,postRender:j}=A,b=()=>{const Q=gA.useManualTiming?i.timestamp:performance.now();n=!1,gA.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(Q-i.timestamp,r_),1)),i.timestamp=Q,i.isProcessing=!0,u.process(i),d.process(i),h.process(i),o.process(i),m.process(i),y.process(i),p.process(i),j.process(i),i.isProcessing=!1,n&&s&&(r=!1,t(b))},w=()=>{n=!0,r=!0,i.isProcessing||t(b)};return{schedule:Pg.reduce((Q,k)=>{const K=A[k];return Q[k]=(ee,q=!1,G=!1)=>(n||w(),K.schedule(ee,q,G)),Q},{}),cancel:Q=>{for(let k=0;k<Pg.length;k++)A[Pg[k]].cancel(Q)},state:i,steps:A}}const{schedule:ui,cancel:gu,state:vo,steps:P0}=NE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nc,!0);let fy;function a_(){fy=void 0}const Nl={now:()=>(fy===void 0&&Nl.set(vo.isProcessing||gA.useManualTiming?vo.timestamp:performance.now()),fy),set:t=>{fy=t,queueMicrotask(a_)}},BE=t=>s=>typeof s=="string"&&s.startsWith(t),z1=BE("--"),i_=BE("var(--"),K1=t=>i_(t)?o_.test(t.split("/*")[0].trim()):!1,o_=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},fm={...Pf,transform:t=>mA(0,1,t)},kg={...Pf,default:1},Wp=t=>Math.round(t*1e5)/1e5,$1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function l_(t){return t==null}const c_=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,V1=(t,s)=>n=>!!(typeof n=="string"&&c_.test(n)&&n.startsWith(t)||s&&!l_(n)&&Object.prototype.hasOwnProperty.call(n,s)),CE=(t,s,n)=>r=>{if(typeof r!="string")return r;const[i,c,A,u]=r.match($1);return{[t]:parseFloat(i),[s]:parseFloat(c),[n]:parseFloat(A),alpha:u!==void 0?parseFloat(u):1}},d_=t=>mA(0,255,t),k0={...Pf,transform:t=>Math.round(d_(t))},ah={test:V1("rgb","red"),parse:CE("red","green","blue"),transform:({red:t,green:s,blue:n,alpha:r=1})=>"rgba("+k0.transform(t)+", "+k0.transform(s)+", "+k0.transform(n)+", "+Wp(fm.transform(r))+")"};function A_(t){let s="",n="",r="",i="";return t.length>5?(s=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(s=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),s+=s,n+=n,r+=r,i+=i),{red:parseInt(s,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const fb={test:V1("#"),parse:A_,transform:ah.transform},Cm=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),au=Cm("deg"),Dd=Cm("%"),$n=Cm("px"),u_=Cm("vh"),h_=Cm("vw"),P2={...Dd,parse:t=>Dd.parse(t)/100,transform:t=>Dd.transform(t*100)},gf={test:V1("hsl","hue"),parse:CE("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Dd.transform(Wp(s))+", "+Dd.transform(Wp(n))+", "+Wp(fm.transform(r))+")"},Wi={test:t=>ah.test(t)||fb.test(t)||gf.test(t),parse:t=>ah.test(t)?ah.parse(t):gf.test(t)?gf.parse(t):fb.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ah.transform(t):gf.transform(t),getAnimatableNone:t=>{const s=Wi.parse(t);return s.alpha=0,Wi.transform(s)}},f_=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function p_(t){return isNaN(t)&&typeof t=="string"&&(t.match($1)?.length||0)+(t.match(f_)?.length||0)>0}const EE="number",TE="color",m_="var",g_="var(",k2="${}",y_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pm(t){const s=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let c=0;const u=s.replace(y_,d=>(Wi.test(d)?(r.color.push(c),i.push(TE),n.push(Wi.parse(d))):d.startsWith(g_)?(r.var.push(c),i.push(m_),n.push(d)):(r.number.push(c),i.push(EE),n.push(parseFloat(d))),++c,k2)).split(k2);return{values:n,split:u,indexes:r,types:i}}function FE(t){return pm(t).values}function IE(t){const{split:s,types:n}=pm(t),r=s.length;return i=>{let c="";for(let A=0;A<r;A++)if(c+=s[A],i[A]!==void 0){const u=n[A];u===EE?c+=Wp(i[A]):u===TE?c+=Wi.transform(i[A]):c+=i[A]}return c}}const x_=t=>typeof t=="number"?0:Wi.test(t)?Wi.getAnimatableNone(t):t;function v_(t){const s=FE(t);return IE(t)(s.map(x_))}const yu={test:p_,parse:FE,createTransformer:IE,getAnimatableNone:v_};function H0(t,s,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(s-t)*6*n:n<1/2?s:n<2/3?t+(s-t)*(2/3-n)*6:t}function b_({hue:t,saturation:s,lightness:n,alpha:r}){t/=360,s/=100,n/=100;let i=0,c=0,A=0;if(!s)i=c=A=n;else{const u=n<.5?n*(1+s):n+s-n*s,d=2*n-u;i=H0(d,u,t+1/3),c=H0(d,u,t),A=H0(d,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(c*255),blue:Math.round(A*255),alpha:r}}function Ky(t,s){return n=>n>0?s:t}const vi=(t,s,n)=>t+(s-t)*n,z0=(t,s,n)=>{const r=t*t,i=n*(s*s-r)+r;return i<0?0:Math.sqrt(i)},j_=[fb,ah,gf],w_=t=>j_.find(s=>s.test(t));function H2(t){const s=w_(t);if(!s)return!1;let n=s.parse(t);return s===gf&&(n=b_(n)),n}const z2=(t,s)=>{const n=H2(t),r=H2(s);if(!n||!r)return Ky(t,s);const i={...n};return c=>(i.red=z0(n.red,r.red,c),i.green=z0(n.green,r.green,c),i.blue=z0(n.blue,r.blue,c),i.alpha=vi(n.alpha,r.alpha,c),ah.transform(i))},pb=new Set(["none","hidden"]);function S_(t,s){return pb.has(t)?n=>n<=0?t:s:n=>n>=1?s:t}function N_(t,s){return n=>vi(t,s,n)}function q1(t){return typeof t=="number"?N_:typeof t=="string"?K1(t)?Ky:Wi.test(t)?z2:E_:Array.isArray(t)?RE:typeof t=="object"?Wi.test(t)?z2:B_:Ky}function RE(t,s){const n=[...t],r=n.length,i=t.map((c,A)=>q1(c)(c,s[A]));return c=>{for(let A=0;A<r;A++)n[A]=i[A](c);return n}}function B_(t,s){const n={...t,...s},r={};for(const i in n)t[i]!==void 0&&s[i]!==void 0&&(r[i]=q1(t[i])(t[i],s[i]));return i=>{for(const c in r)n[c]=r[c](i);return n}}function C_(t,s){const n=[],r={color:0,var:0,number:0};for(let i=0;i<s.values.length;i++){const c=s.types[i],A=t.indexes[c][r[c]],u=t.values[A]??0;n[i]=u,r[c]++}return n}const E_=(t,s)=>{const n=yu.createTransformer(s),r=pm(t),i=pm(s);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?pb.has(t)&&!i.values.length||pb.has(s)&&!r.values.length?S_(t,s):Nm(RE(C_(r,i),i.values),n):Ky(t,s)};function OE(t,s,n){return typeof t=="number"&&typeof s=="number"&&typeof n=="number"?vi(t,s,n):q1(t)(t,s)}const T_=t=>{const s=({timestamp:n})=>t(n);return{start:(n=!0)=>ui.update(s,n),stop:()=>gu(s),now:()=>vo.isProcessing?vo.timestamp:Nl.now()}},UE=(t,s,n=10)=>{let r="";const i=Math.max(Math.round(s/n),2);for(let c=0;c<i;c++)r+=Math.round(t(c/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},$y=2e4;function G1(t){let s=0;const n=50;let r=t.next(s);for(;!r.done&&s<$y;)s+=n,r=t.next(s);return s>=$y?1/0:s}function F_(t,s=100,n){const r=n({...t,keyframes:[0,s]}),i=Math.min(G1(r),$y);return{type:"keyframes",ease:c=>r.next(i*c).value/s,duration:Sc(i)}}const I_=5;function LE(t,s,n){const r=Math.max(s-I_,0);return fE(n-t(r),s-r)}const Bi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},K0=.001;function R_({duration:t=Bi.duration,bounce:s=Bi.bounce,velocity:n=Bi.velocity,mass:r=Bi.mass}){let i,c,A=1-s;A=mA(Bi.minDamping,Bi.maxDamping,A),t=mA(Bi.minDuration,Bi.maxDuration,Sc(t)),A<1?(i=h=>{const o=h*A,m=o*t,y=o-n,p=mb(h,A),j=Math.exp(-m);return K0-y/p*j},c=h=>{const m=h*A*t,y=m*n+n,p=Math.pow(A,2)*Math.pow(h,2)*t,j=Math.exp(-m),b=mb(Math.pow(h,2),A);return(-i(h)+K0>0?-1:1)*((y-p)*j)/b}):(i=h=>{const o=Math.exp(-h*t),m=(h-n)*t+1;return-K0+o*m},c=h=>{const o=Math.exp(-h*t),m=(n-h)*(t*t);return o*m});const u=5/t,d=U_(i,c,u);if(t=Ld(t),isNaN(d))return{stiffness:Bi.stiffness,damping:Bi.damping,duration:t};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:A*2*Math.sqrt(r*h),duration:t}}}const O_=12;function U_(t,s,n){let r=n;for(let i=1;i<O_;i++)r=r-t(r)/s(r);return r}function mb(t,s){return t*Math.sqrt(1-s*s)}const L_=["duration","bounce"],D_=["stiffness","damping","mass"];function K2(t,s){return s.some(n=>t[n]!==void 0)}function Q_(t){let s={velocity:Bi.velocity,stiffness:Bi.stiffness,damping:Bi.damping,mass:Bi.mass,isResolvedFromDuration:!1,...t};if(!K2(t,D_)&&K2(t,L_))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,c=2*mA(.05,1,1-(t.bounce||0))*Math.sqrt(i);s={...s,mass:Bi.mass,stiffness:i,damping:c}}else{const n=R_(t);s={...s,...n,mass:Bi.mass},s.isResolvedFromDuration=!0}return s}function Vy(t=Bi.visualDuration,s=Bi.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:r,restDelta:i}=n;const c=n.keyframes[0],A=n.keyframes[n.keyframes.length-1],u={done:!1,value:c},{stiffness:d,damping:h,mass:o,duration:m,velocity:y,isResolvedFromDuration:p}=Q_({...n,velocity:-Sc(n.velocity||0)}),j=y||0,b=h/(2*Math.sqrt(d*o)),w=A-c,B=Sc(Math.sqrt(d/o)),U=Math.abs(w)<5;r||(r=U?Bi.restSpeed.granular:Bi.restSpeed.default),i||(i=U?Bi.restDelta.granular:Bi.restDelta.default);let Q;if(b<1){const K=mb(B,b);Q=ee=>{const q=Math.exp(-b*B*ee);return A-q*((j+b*B*w)/K*Math.sin(K*ee)+w*Math.cos(K*ee))}}else if(b===1)Q=K=>A-Math.exp(-B*K)*(w+(j+B*w)*K);else{const K=B*Math.sqrt(b*b-1);Q=ee=>{const q=Math.exp(-b*B*ee),G=Math.min(K*ee,300);return A-q*((j+b*B*w)*Math.sinh(G)+K*w*Math.cosh(G))/K}}const k={calculatedDuration:p&&m||null,next:K=>{const ee=Q(K);if(p)u.done=K>=m;else{let q=K===0?j:0;b<1&&(q=K===0?Ld(j):LE(Q,K,ee));const G=Math.abs(q)<=r,W=Math.abs(A-ee)<=i;u.done=G&&W}return u.value=u.done?A:ee,u},toString:()=>{const K=Math.min(G1(k),$y),ee=UE(q=>k.next(K*q).value,K,30);return K+"ms "+ee},toTransition:()=>{}};return k}Vy.applyToOptions=t=>{const s=F_(t,100,Vy);return t.ease=s.ease,t.duration=Ld(s.duration),t.type="keyframes",t};function gb({keyframes:t,velocity:s=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:c=500,modifyTarget:A,min:u,max:d,restDelta:h=.5,restSpeed:o}){const m=t[0],y={done:!1,value:m},p=G=>u!==void 0&&G<u||d!==void 0&&G>d,j=G=>u===void 0?d:d===void 0||Math.abs(u-G)<Math.abs(d-G)?u:d;let b=n*s;const w=m+b,B=A===void 0?w:A(w);B!==w&&(b=B-m);const U=G=>-b*Math.exp(-G/r),Q=G=>B+U(G),k=G=>{const W=U(G),he=Q(G);y.done=Math.abs(W)<=h,y.value=y.done?B:he};let K,ee;const q=G=>{p(y.value)&&(K=G,ee=Vy({keyframes:[y.value,j(y.value)],velocity:LE(Q,G,y.value),damping:i,stiffness:c,restDelta:h,restSpeed:o}))};return q(0),{calculatedDuration:null,next:G=>{let W=!1;return!ee&&K===void 0&&(W=!0,k(G),q(G)),K!==void 0&&G>=K?ee.next(G-K):(!W&&k(G),y)}}}function __(t,s,n){const r=[],i=n||gA.mix||OE,c=t.length-1;for(let A=0;A<c;A++){let u=i(t[A],t[A+1]);if(s){const d=Array.isArray(s)?s[A]||Nc:s;u=Nm(d,u)}r.push(u)}return r}function M_(t,s,{clamp:n=!0,ease:r,mixer:i}={}){const c=t.length;if(_1(c===s.length),c===1)return()=>s[0];if(c===2&&s[0]===s[1])return()=>s[1];const A=t[0]===t[1];t[0]>t[c-1]&&(t=[...t].reverse(),s=[...s].reverse());const u=__(s,r,i),d=u.length,h=o=>{if(A&&o<t[0])return s[0];let m=0;if(d>1)for(;m<t.length-2&&!(o<t[m+1]);m++);const y=hm(t[m],t[m+1],o);return u[m](y)};return n?o=>h(mA(t[0],t[c-1],o)):h}function P_(t,s){const n=t[t.length-1];for(let r=1;r<=s;r++){const i=hm(0,s,r);t.push(vi(n,1,i))}}function k_(t){const s=[0];return P_(s,t.length-1),s}function H_(t,s){return t.map(n=>n*s)}function z_(t,s){return t.map(()=>s||wE).splice(0,t.length-1)}function Yp({duration:t=300,keyframes:s,times:n,ease:r="easeInOut"}){const i=e_(r)?r.map(M2):M2(r),c={done:!1,value:s[0]},A=H_(n&&n.length===s.length?n:k_(s),t),u=M_(A,s,{ease:Array.isArray(i)?i:z_(s,i)});return{calculatedDuration:t,next:d=>(c.value=u(d),c.done=d>=t,c)}}const K_=t=>t!==null;function W1(t,{repeat:s,repeatType:n="loop"},r,i=1){const c=t.filter(K_),u=i<0||s&&n!=="loop"&&s%2===1?0:c.length-1;return!u||r===void 0?c[u]:r}const $_={decay:gb,inertia:gb,tween:Yp,keyframes:Yp,spring:Vy};function DE(t){typeof t.type=="string"&&(t.type=$_[t.type])}class Y1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,n){return this.finished.then(s,n)}}const V_=t=>t/100;class X1 extends Y1{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Nl.now()&&this.tick(Nl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;DE(s);const{type:n=Yp,repeat:r=0,repeatDelay:i=0,repeatType:c,velocity:A=0}=s;let{keyframes:u}=s;const d=n||Yp;d!==Yp&&typeof u[0]!="number"&&(this.mixKeyframes=Nm(V_,OE(u[0],u[1])),u=[0,100]);const h=d({...s,keyframes:u});c==="mirror"&&(this.mirroredGenerator=d({...s,keyframes:[...u].reverse(),velocity:-A})),h.calculatedDuration===null&&(h.calculatedDuration=G1(h));const{calculatedDuration:o}=h;this.calculatedDuration=o,this.resolvedDuration=o+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(s){const n=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(s,n=!1){const{generator:r,totalDuration:i,mixKeyframes:c,mirroredGenerator:A,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:o,repeat:m,repeatType:y,repeatDelay:p,type:j,onUpdate:b,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-i/this.speed,this.startTime)),n?this.currentTime=s:this.updateTime(s);const B=this.currentTime-h*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?B<0:B>i;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let Q=this.currentTime,k=r;if(m){const G=Math.min(this.currentTime,i)/u;let W=Math.floor(G),he=G%1;!he&&G>=1&&(he=1),he===1&&W--,W=Math.min(W,m+1),!!(W%2)&&(y==="reverse"?(he=1-he,p&&(he-=p/u)):y==="mirror"&&(k=A)),Q=mA(0,1,he)*u}const K=U?{done:!1,value:o[0]}:k.next(Q);c&&(K.value=c(K.value));let{done:ee}=K;!U&&d!==null&&(ee=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ee);return q&&j!==gb&&(K.value=W1(o,this.options,w,this.speed)),b&&b(K.value),q&&this.finish(),K}then(s,n){return this.finished.then(s,n)}get duration(){return Sc(this.calculatedDuration)}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Sc(s)}get time(){return Sc(this.currentTime)}set time(s){s=Ld(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(Nl.now());const n=this.playbackSpeed!==s;this.playbackSpeed=s,n&&(this.time=Sc(this.currentTime))}play(){if(this.isStopped)return;const{driver:s=T_,startTime:n}=this.options;this.driver||(this.driver=s(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Nl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),s.observe(this)}}function q_(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const ih=t=>t*180/Math.PI,yb=t=>{const s=ih(Math.atan2(t[1],t[0]));return xb(s)},G_={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:yb,rotateZ:yb,skewX:t=>ih(Math.atan(t[1])),skewY:t=>ih(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},xb=t=>(t=t%360,t<0&&(t+=360),t),$2=yb,V2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),q2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),W_={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:V2,scaleY:q2,scale:t=>(V2(t)+q2(t))/2,rotateX:t=>xb(ih(Math.atan2(t[6],t[5]))),rotateY:t=>xb(ih(Math.atan2(-t[2],t[0]))),rotateZ:$2,rotate:$2,skewX:t=>ih(Math.atan(t[4])),skewY:t=>ih(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function vb(t){return t.includes("scale")?1:0}function bb(t,s){if(!t||t==="none")return vb(s);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=W_,i=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=G_,i=u}if(!i)return vb(s);const c=r[s],A=i[1].split(",").map(X_);return typeof c=="function"?c(A):A[c]}const Y_=(t,s)=>{const{transform:n="none"}=getComputedStyle(t);return bb(n,s)};function X_(t){return parseFloat(t.trim())}const kf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hf=new Set(kf),G2=t=>t===Pf||t===$n,J_=new Set(["x","y","z"]),Z_=kf.filter(t=>!J_.has(t));function eM(t){const s=[];return Z_.forEach(n=>{const r=t.getValue(n);r!==void 0&&(s.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),s}const ch={width:({x:t},{paddingLeft:s="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),height:({y:t},{paddingTop:s="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>bb(s,"x"),y:(t,{transform:s})=>bb(s,"y")};ch.translateX=ch.x;ch.translateY=ch.y;const dh=new Set;let jb=!1,wb=!1,Sb=!1;function QE(){if(wb){const t=Array.from(dh).filter(r=>r.needsMeasurement),s=new Set(t.map(r=>r.element)),n=new Map;s.forEach(r=>{const i=eM(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),s.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([c,A])=>{r.getValue(c)?.set(A)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}wb=!1,jb=!1,dh.forEach(t=>t.complete(Sb)),dh.clear()}function _E(){dh.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(wb=!0)})}function tM(){Sb=!0,_E(),QE(),Sb=!1}class J1{constructor(s,n,r,i,c,A=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=n,this.name=r,this.motionValue=i,this.element=c,this.isAsync=A}scheduleResolve(){this.state="scheduled",this.isAsync?(dh.add(this),jb||(jb=!0,ui.read(_E),ui.resolveKeyframes(QE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:n,element:r,motionValue:i}=this;if(s[0]===null){const c=i?.get(),A=s[s.length-1];if(c!==void 0)s[0]=c;else if(r&&n){const u=r.readValue(n,A);u!=null&&(s[0]=u)}s[0]===void 0&&(s[0]=A),i&&c===void 0&&i.set(s[0])}q_(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),dh.delete(this)}cancel(){this.state==="scheduled"&&(dh.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sM=t=>t.startsWith("--");function nM(t,s,n){sM(s)?t.style.setProperty(s,n):t.style[s]=n}const rM=M1(()=>window.ScrollTimeline!==void 0),aM={};function iM(t,s){const n=M1(t);return()=>aM[s]??n()}const ME=iM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Vp=([t,s,n,r])=>`cubic-bezier(${t}, ${s}, ${n}, ${r})`,W2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vp([0,.65,.55,1]),circOut:Vp([.55,0,1,.45]),backIn:Vp([.31,.01,.66,-.59]),backOut:Vp([.33,1.53,.69,.99])};function PE(t,s){if(t)return typeof t=="function"?ME()?UE(t,s):"ease-out":SE(t)?Vp(t):Array.isArray(t)?t.map(n=>PE(n,s)||W2.easeOut):W2[t]}function oM(t,s,n,{delay:r=0,duration:i=300,repeat:c=0,repeatType:A="loop",ease:u="easeOut",times:d}={},h=void 0){const o={[s]:n};d&&(o.offset=d);const m=PE(u,i);Array.isArray(m)&&(o.easing=m);const y={delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:c+1,direction:A==="reverse"?"alternate":"normal"};return h&&(y.pseudoElement=h),t.animate(o,y)}function kE(t){return typeof t=="function"&&"applyToOptions"in t}function lM({type:t,...s}){return kE(t)&&ME()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class cM extends Y1{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:n,name:r,keyframes:i,pseudoElement:c,allowFlatten:A=!1,finalKeyframe:u,onComplete:d}=s;this.isPseudoElement=!!c,this.allowFlatten=A,this.options=s,_1(typeof s.type!="string");const h=lM(s);this.animation=oM(n,r,i,h,c),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const o=W1(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(o):nM(n,r,o),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const s=this.animation.effect?.getComputedTiming?.().duration||0;return Sc(Number(s))}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Sc(s)}get time(){return Sc(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=Ld(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,s&&rM()?(this.animation.timeline=s,Nc):n(this)}}const HE={anticipate:vE,backInOut:xE,circInOut:jE};function dM(t){return t in HE}function AM(t){typeof t.ease=="string"&&dM(t.ease)&&(t.ease=HE[t.ease])}const Y2=10;class uM extends cM{constructor(s){AM(s),DE(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:n,onUpdate:r,onComplete:i,element:c,...A}=this.options;if(!n)return;if(s!==void 0){n.set(s);return}const u=new X1({...A,autoplay:!1}),d=Ld(this.finishedTime??this.time);n.setWithVelocity(u.sample(d-Y2).value,u.sample(d).value,Y2),u.stop()}}const X2=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(yu.test(t)||t==="0")&&!t.startsWith("url("));function hM(t){const s=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==s)return!0}function fM(t,s,n,r){const i=t[0];if(i===null)return!1;if(s==="display"||s==="visibility")return!0;const c=t[t.length-1],A=X2(i,s),u=X2(c,s);return!A||!u?!1:hM(t)||(n==="spring"||kE(n))&&r}function Nb(t){t.duration=0,t.type="keyframes"}const pM=new Set(["opacity","clipPath","filter","transform"]),mM=M1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function gM(t){const{motionValue:s,name:n,repeatDelay:r,repeatType:i,damping:c,type:A}=t;if(!(s?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=s.owner.getProps();return mM()&&n&&pM.has(n)&&(n!=="transform"||!h)&&!d&&!r&&i!=="mirror"&&c!==0&&A!=="inertia"}const yM=40;class xM extends Y1{constructor({autoplay:s=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:c=0,repeatType:A="loop",keyframes:u,name:d,motionValue:h,element:o,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Nl.now();const y={autoplay:s,delay:n,type:r,repeat:i,repeatDelay:c,repeatType:A,name:d,motionValue:h,element:o,...m},p=o?.KeyframeResolver||J1;this.keyframeResolver=new p(u,(j,b,w)=>this.onKeyframesResolved(j,b,y,!w),d,h,o),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(s,n,r,i){this.keyframeResolver=void 0;const{name:c,type:A,velocity:u,delay:d,isHandoff:h,onUpdate:o}=r;this.resolvedAt=Nl.now(),fM(s,c,A,u)||((gA.instantAnimations||!d)&&o?.(W1(s,r,n)),s[0]=s[s.length-1],Nb(r),r.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>yM?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:s},p=!h&&gM(y)?new uM({...y,element:y.motionValue.owner.current}):new X1(y);p.finished.then(()=>this.notifyFinished()).catch(Nc),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(s,n){return this.finished.finally(s).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),tM()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const vM=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bM(t){const s=vM.exec(t);if(!s)return[,];const[,n,r,i]=s;return[`--${n??r}`,i]}function zE(t,s,n=1){const[r,i]=bM(t);if(!r)return;const c=window.getComputedStyle(s).getPropertyValue(r);if(c){const A=c.trim();return AE(A)?parseFloat(A):A}return K1(i)?zE(i,s,n+1):i}function Z1(t,s){return t?.[s]??t?.default??t}const KE=new Set(["width","height","top","left","right","bottom",...kf]),jM={test:t=>t==="auto",parse:t=>t},$E=t=>s=>s.test(t),VE=[Pf,$n,Dd,au,h_,u_,jM],J2=t=>VE.find($E(t));function wM(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||hE(t):!0}const SM=new Set(["brightness","contrast","saturate","opacity"]);function NM(t){const[s,n]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[r]=n.match($1)||[];if(!r)return t;const i=n.replace(r,"");let c=SM.has(s)?1:0;return r!==n&&(c*=100),s+"("+c+i+")"}const BM=/\b([a-z-]*)\(.*?\)/gu,Bb={...yu,getAnimatableNone:t=>{const s=t.match(BM);return s?s.map(NM).join(" "):t}},Z2={...Pf,transform:Math.round},CM={rotate:au,rotateX:au,rotateY:au,rotateZ:au,scale:kg,scaleX:kg,scaleY:kg,scaleZ:kg,skew:au,skewX:au,skewY:au,distance:$n,translateX:$n,translateY:$n,translateZ:$n,x:$n,y:$n,z:$n,perspective:$n,transformPerspective:$n,opacity:fm,originX:P2,originY:P2,originZ:$n},ej={borderWidth:$n,borderTopWidth:$n,borderRightWidth:$n,borderBottomWidth:$n,borderLeftWidth:$n,borderRadius:$n,radius:$n,borderTopLeftRadius:$n,borderTopRightRadius:$n,borderBottomRightRadius:$n,borderBottomLeftRadius:$n,width:$n,maxWidth:$n,height:$n,maxHeight:$n,top:$n,right:$n,bottom:$n,left:$n,padding:$n,paddingTop:$n,paddingRight:$n,paddingBottom:$n,paddingLeft:$n,margin:$n,marginTop:$n,marginRight:$n,marginBottom:$n,marginLeft:$n,backgroundPositionX:$n,backgroundPositionY:$n,...CM,zIndex:Z2,fillOpacity:fm,strokeOpacity:fm,numOctaves:Z2},EM={...ej,color:Wi,backgroundColor:Wi,outlineColor:Wi,fill:Wi,stroke:Wi,borderColor:Wi,borderTopColor:Wi,borderRightColor:Wi,borderBottomColor:Wi,borderLeftColor:Wi,filter:Bb,WebkitFilter:Bb},qE=t=>EM[t];function GE(t,s){let n=qE(t);return n!==Bb&&(n=yu),n.getAnimatableNone?n.getAnimatableNone(s):void 0}const TM=new Set(["auto","none","0"]);function FM(t,s,n){let r=0,i;for(;r<t.length&&!i;){const c=t[r];typeof c=="string"&&!TM.has(c)&&pm(c).values.length&&(i=t[r]),r++}if(i&&n)for(const c of s)t[c]=GE(n,i)}class IM extends J1{constructor(s,n,r,i,c){super(s,n,r,i,c,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<s.length;d++){let h=s[d];if(typeof h=="string"&&(h=h.trim(),K1(h))){const o=zE(h,n.current);o!==void 0&&(s[d]=o),d===s.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!KE.has(r)||s.length!==2)return;const[i,c]=s,A=J2(i),u=J2(c);if(A!==u)if(G2(A)&&G2(u))for(let d=0;d<s.length;d++){const h=s[d];typeof h=="string"&&(s[d]=parseFloat(h))}else ch[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:n}=this,r=[];for(let i=0;i<s.length;i++)(s[i]===null||wM(s[i]))&&r.push(i);r.length&&FM(s,r,n)}measureInitialState(){const{element:s,unresolvedKeyframes:n,name:r}=this;if(!s||!s.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ch[r](s.measureViewportBox(),window.getComputedStyle(s.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&s.getValue(r,i).jump(i,!1)}measureEndState(){const{element:s,name:n,unresolvedKeyframes:r}=this;if(!s||!s.current)return;const i=s.getValue(n);i&&i.jump(this.measuredOrigin,!1);const c=r.length-1,A=r[c];r[c]=ch[n](s.measureViewportBox(),window.getComputedStyle(s.current)),A!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=A),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{s.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function RM(t,s,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const WE=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function YE(t){return uE(t)&&"offsetHeight"in t}const eS=30,OM=t=>!isNaN(parseFloat(t));class UM{constructor(s,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Nl.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=n.owner}setCurrent(s){this.current=s,this.updatedAt=Nl.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=OM(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,n){this.events[s]||(this.events[s]=new P1);const r=this.events[s].add(n);return s==="change"?()=>{r(),ui.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,n){this.passiveEffect=s,this.stopPassiveEffect=n}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-r}jump(s,n=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=Nl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>eS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,eS);return fE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(s){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=s(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Rf(t,s){return new UM(t,s)}const{schedule:tj}=NE(queueMicrotask,!1),Vc={x:!1,y:!1};function XE(){return Vc.x||Vc.y}function LM(t){return t==="x"||t==="y"?Vc[t]?null:(Vc[t]=!0,()=>{Vc[t]=!1}):Vc.x||Vc.y?null:(Vc.x=Vc.y=!0,()=>{Vc.x=Vc.y=!1})}function JE(t,s){const n=RM(t),r=new AbortController,i={passive:!0,...s,signal:r.signal};return[n,i,()=>r.abort()]}function tS(t){return!(t.pointerType==="touch"||XE())}function DM(t,s,n={}){const[r,i,c]=JE(t,n),A=u=>{if(!tS(u))return;const{target:d}=u,h=s(d,u);if(typeof h!="function"||!d)return;const o=m=>{tS(m)&&(h(m),d.removeEventListener("pointerleave",o))};d.addEventListener("pointerleave",o,i)};return r.forEach(u=>{u.addEventListener("pointerenter",A,i)}),c}const ZE=(t,s)=>s?t===s?!0:ZE(t,s.parentElement):!1,sj=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,QM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _M(t){return QM.has(t.tagName)||t.tabIndex!==-1}const py=new WeakSet;function sS(t){return s=>{s.key==="Enter"&&t(s)}}function $0(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const MM=(t,s)=>{const n=t.currentTarget;if(!n)return;const r=sS(()=>{if(py.has(n))return;$0(n,"down");const i=sS(()=>{$0(n,"up")}),c=()=>$0(n,"cancel");n.addEventListener("keyup",i,s),n.addEventListener("blur",c,s)});n.addEventListener("keydown",r,s),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),s)};function nS(t){return sj(t)&&!XE()}function PM(t,s,n={}){const[r,i,c]=JE(t,n),A=u=>{const d=u.currentTarget;if(!nS(u))return;py.add(d);const h=s(d,u),o=(p,j)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),py.has(d)&&py.delete(d),nS(p)&&typeof h=="function"&&h(p,{success:j})},m=p=>{o(p,d===window||d===document||n.useGlobalTarget||ZE(d,p.target))},y=p=>{o(p,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",y,i)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",A,i),YE(u)&&(u.addEventListener("focus",h=>MM(h,i)),!_M(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),c}function e4(t){return uE(t)&&"ownerSVGElement"in t}function kM(t){return e4(t)&&t.tagName==="svg"}const Go=t=>!!(t&&t.getVelocity),HM=[...VE,Wi,yu],zM=t=>HM.find($E(t)),nj=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function rS(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function KM(...t){return s=>{let n=!1;const r=t.map(i=>{const c=rS(i,s);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let i=0;i<r.length;i++){const c=r[i];typeof c=="function"?c():rS(t[i],null)}}}}function $M(...t){return S.useCallback(KM(...t),t)}class VM extends S.Component{getSnapshotBeforeUpdate(s){const n=this.props.childRef.current;if(n&&s.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=YE(r)&&r.offsetWidth||0,c=this.props.sizeRef.current;c.height=n.offsetHeight||0,c.width=n.offsetWidth||0,c.top=n.offsetTop,c.left=n.offsetLeft,c.right=i-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function qM({children:t,isPresent:s,anchorX:n,root:r}){const i=S.useId(),c=S.useRef(null),A=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=S.useContext(nj),d=$M(c,t?.ref);return S.useInsertionEffect(()=>{const{width:h,height:o,top:m,left:y,right:p}=A.current;if(s||!c.current||!h||!o)return;const j=n==="left"?`left: ${y}`:`right: ${p}`;c.current.dataset.motionPopId=i;const b=document.createElement("style");u&&(b.nonce=u);const w=r??document.head;return w.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${o}px !important;
            ${j}px !important;
            top: ${m}px !important;
          }
        `),()=>{w.contains(b)&&w.removeChild(b)}},[s]),e.jsx(VM,{isPresent:s,childRef:c,sizeRef:A,children:S.cloneElement(t,{ref:d})})}const GM=({children:t,initial:s,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:c,mode:A,anchorX:u,root:d})=>{const h=U1(WM),o=S.useId();let m=!0,y=S.useMemo(()=>(m=!1,{id:o,initial:s,isPresent:n,custom:i,onExitComplete:p=>{h.set(p,!0);for(const j of h.values())if(!j)return;r&&r()},register:p=>(h.set(p,!1),()=>h.delete(p))}),[n,h,r]);return c&&m&&(y={...y}),S.useMemo(()=>{h.forEach((p,j)=>h.set(j,!1))},[n]),S.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),A==="popLayout"&&(t=e.jsx(qM,{isPresent:n,anchorX:u,root:d,children:t})),e.jsx(vx.Provider,{value:y,children:t})};function WM(){return new Map}function t4(t=!0){const s=S.useContext(vx);if(s===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=s,c=S.useId();S.useEffect(()=>{if(t)return i(c)},[t]);const A=S.useCallback(()=>t&&r&&r(c),[c,r,t]);return!n&&r?[!1,A]:[!0]}const Hg=t=>t.key||"";function aS(t){const s=[];return S.Children.forEach(t,n=>{S.isValidElement(n)&&s.push(n)}),s}const Fl=({children:t,custom:s,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:c="sync",propagate:A=!1,anchorX:u="left",root:d})=>{const[h,o]=t4(A),m=S.useMemo(()=>aS(t),[t]),y=A&&!h?[]:m.map(Hg),p=S.useRef(!0),j=S.useRef(m),b=U1(()=>new Map),[w,B]=S.useState(m),[U,Q]=S.useState(m);dE(()=>{p.current=!1,j.current=m;for(let ee=0;ee<U.length;ee++){const q=Hg(U[ee]);y.includes(q)?b.delete(q):b.get(q)!==!0&&b.set(q,!1)}},[U,y.length,y.join("-")]);const k=[];if(m!==w){let ee=[...m];for(let q=0;q<U.length;q++){const G=U[q],W=Hg(G);y.includes(W)||(ee.splice(q,0,G),k.push(G))}return c==="wait"&&k.length&&(ee=k),Q(aS(ee)),B(m),null}const{forceRender:K}=S.useContext(O1);return e.jsx(e.Fragment,{children:U.map(ee=>{const q=Hg(ee),G=A&&!h?!1:m===U||y.includes(q),W=()=>{if(b.has(q))b.set(q,!0);else return;let he=!0;b.forEach(Z=>{Z||(he=!1)}),he&&(K?.(),Q(j.current),A&&o?.(),r&&r())};return e.jsx(GM,{isPresent:G,initial:!p.current||n?void 0:!1,custom:s,presenceAffectsLayout:i,mode:c,root:d,onExitComplete:G?void 0:W,anchorX:u,children:ee},q)})})},s4=S.createContext({strict:!1}),iS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Of={};for(const t in iS)Of[t]={isEnabled:s=>iS[t].some(n=>!!s[n])};function YM(t){for(const s in t)Of[s]={...Of[s],...t[s]}}const XM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qy(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||XM.has(t)}let n4=t=>!qy(t);function JM(t){typeof t=="function"&&(n4=s=>s.startsWith("on")?!qy(s):t(s))}try{JM(require("@emotion/is-prop-valid").default)}catch{}function ZM(t,s,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(n4(i)||n===!0&&qy(i)||!s&&!qy(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const bx=S.createContext({});function jx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function mm(t){return typeof t=="string"||Array.isArray(t)}const rj=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],aj=["initial",...rj];function wx(t){return jx(t.animate)||aj.some(s=>mm(t[s]))}function r4(t){return!!(wx(t)||t.variants)}function eP(t,s){if(wx(t)){const{initial:n,animate:r}=t;return{initial:n===!1||mm(n)?n:void 0,animate:mm(r)?r:void 0}}return t.inherit!==!1?s:{}}function tP(t){const{initial:s,animate:n}=eP(t,S.useContext(bx));return S.useMemo(()=>({initial:s,animate:n}),[oS(s),oS(n)])}function oS(t){return Array.isArray(t)?t.join(" "):t}const gm={};function sP(t){for(const s in t)gm[s]=t[s],z1(s)&&(gm[s].isCSSVariable=!0)}function a4(t,{layout:s,layoutId:n}){return Hf.has(t)||t.startsWith("origin")||(s||n!==void 0)&&(!!gm[t]||t==="opacity")}const nP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rP=kf.length;function aP(t,s,n){let r="",i=!0;for(let c=0;c<rP;c++){const A=kf[c],u=t[A];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(A.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const h=WE(u,ej[A]);if(!d){i=!1;const o=nP[A]||A;r+=`${o}(${h}) `}n&&(s[A]=h)}}return r=r.trim(),n?r=n(s,i?"":r):i&&(r="none"),r}function ij(t,s,n){const{style:r,vars:i,transformOrigin:c}=t;let A=!1,u=!1;for(const d in s){const h=s[d];if(Hf.has(d)){A=!0;continue}else if(z1(d)){i[d]=h;continue}else{const o=WE(h,ej[d]);d.startsWith("origin")?(u=!0,c[d]=o):r[d]=o}}if(s.transform||(A||n?r.transform=aP(s,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:h="50%",originZ:o=0}=c;r.transformOrigin=`${d} ${h} ${o}`}}const oj=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function i4(t,s,n){for(const r in s)!Go(s[r])&&!a4(r,n)&&(t[r]=s[r])}function iP({transformTemplate:t},s){return S.useMemo(()=>{const n=oj();return ij(n,s,t),Object.assign({},n.vars,n.style)},[s])}function oP(t,s){const n=t.style||{},r={};return i4(r,n,t),Object.assign(r,iP(t,s)),r}function lP(t,s){const n={},r=oP(t,s);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const cP={offset:"stroke-dashoffset",array:"stroke-dasharray"},dP={offset:"strokeDashoffset",array:"strokeDasharray"};function AP(t,s,n=1,r=0,i=!0){t.pathLength=1;const c=i?cP:dP;t[c.offset]=$n.transform(-r);const A=$n.transform(s),u=$n.transform(n);t[c.array]=`${A} ${u}`}function o4(t,{attrX:s,attrY:n,attrScale:r,pathLength:i,pathSpacing:c=1,pathOffset:A=0,...u},d,h,o){if(ij(t,u,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:y}=t;m.transform&&(y.transform=m.transform,delete m.transform),(y.transform||m.transformOrigin)&&(y.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),y.transform&&(y.transformBox=o?.transformBox??"fill-box",delete m.transformBox),s!==void 0&&(m.x=s),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),i!==void 0&&AP(m,i,c,A,!1)}const l4=()=>({...oj(),attrs:{}}),c4=t=>typeof t=="string"&&t.toLowerCase()==="svg";function uP(t,s,n,r){const i=S.useMemo(()=>{const c=l4();return o4(c,s,c4(r),t.transformTemplate,t.style),{...c.attrs,style:{...c.style}}},[s]);if(t.style){const c={};i4(c,t.style,t),i.style={...c,...i.style}}return i}const hP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function lj(t){return typeof t!="string"||t.includes("-")?!1:!!(hP.indexOf(t)>-1||/[A-Z]/u.test(t))}function fP(t,s,n,{latestValues:r},i,c=!1){const u=(lj(t)?uP:lP)(s,r,i,t),d=ZM(s,typeof t=="string",c),h=t!==S.Fragment?{...d,...u,ref:n}:{},{children:o}=s,m=S.useMemo(()=>Go(o)?o.get():o,[o]);return S.createElement(t,{...h,children:m})}function lS(t){const s=[{},{}];return t?.values.forEach((n,r)=>{s[0][r]=n.get(),s[1][r]=n.getVelocity()}),s}function cj(t,s,n,r){if(typeof s=="function"){const[i,c]=lS(r);s=s(n!==void 0?n:t.custom,i,c)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[i,c]=lS(r);s=s(n!==void 0?n:t.custom,i,c)}return s}function my(t){return Go(t)?t.get():t}function pP({scrapeMotionValuesFromProps:t,createRenderState:s},n,r,i){return{latestValues:mP(n,r,i,t),renderState:s()}}function mP(t,s,n,r){const i={},c=r(t,{});for(const y in c)i[y]=my(c[y]);let{initial:A,animate:u}=t;const d=wx(t),h=r4(t);s&&h&&!d&&t.inherit!==!1&&(A===void 0&&(A=s.initial),u===void 0&&(u=s.animate));let o=n?n.initial===!1:!1;o=o||A===!1;const m=o?u:A;if(m&&typeof m!="boolean"&&!jx(m)){const y=Array.isArray(m)?m:[m];for(let p=0;p<y.length;p++){const j=cj(t,y[p]);if(j){const{transitionEnd:b,transition:w,...B}=j;for(const U in B){let Q=B[U];if(Array.isArray(Q)){const k=o?Q.length-1:0;Q=Q[k]}Q!==null&&(i[U]=Q)}for(const U in b)i[U]=b[U]}}}return i}const d4=t=>(s,n)=>{const r=S.useContext(bx),i=S.useContext(vx),c=()=>pP(t,s,r,i);return n?c():U1(c)};function dj(t,s,n){const{style:r}=t,i={};for(const c in r)(Go(r[c])||s.style&&Go(s.style[c])||a4(c,t)||n?.getValue(c)?.liveStyle!==void 0)&&(i[c]=r[c]);return i}const gP=d4({scrapeMotionValuesFromProps:dj,createRenderState:oj});function A4(t,s,n){const r=dj(t,s,n);for(const i in t)if(Go(t[i])||Go(s[i])){const c=kf.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[c]=t[i]}return r}const yP=d4({scrapeMotionValuesFromProps:A4,createRenderState:l4}),xP=Symbol.for("motionComponentSymbol");function yf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function vP(t,s,n){return S.useCallback(r=>{r&&t.onMount&&t.onMount(r),s&&(r?s.mount(r):s.unmount()),n&&(typeof n=="function"?n(r):yf(n)&&(n.current=r))},[s])}const Aj=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bP="framerAppearId",u4="data-"+Aj(bP),h4=S.createContext({});function jP(t,s,n,r,i){const{visualElement:c}=S.useContext(bx),A=S.useContext(s4),u=S.useContext(vx),d=S.useContext(nj).reducedMotion,h=S.useRef(null);r=r||A.renderer,!h.current&&r&&(h.current=r(t,{visualState:s,parent:c,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const o=h.current,m=S.useContext(h4);o&&!o.projection&&i&&(o.type==="html"||o.type==="svg")&&wP(h.current,n,i,m);const y=S.useRef(!1);S.useInsertionEffect(()=>{o&&y.current&&o.update(n,u)});const p=n[u4],j=S.useRef(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return dE(()=>{o&&(y.current=!0,window.MotionIsMounted=!0,o.updateFeatures(),o.scheduleRenderMicrotask(),j.current&&o.animationState&&o.animationState.animateChanges())}),S.useEffect(()=>{o&&(!j.current&&o.animationState&&o.animationState.animateChanges(),j.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),j.current=!1),o.enteringChildren=void 0)}),o}function wP(t,s,n,r){const{layoutId:i,layout:c,drag:A,dragConstraints:u,layoutScroll:d,layoutRoot:h,layoutCrossfade:o}=s;t.projection=new n(t.latestValues,s["data-framer-portal-id"]?void 0:f4(t.parent)),t.projection.setOptions({layoutId:i,layout:c,alwaysMeasureLayout:!!A||u&&yf(u),visualElement:t,animationType:typeof c=="string"?c:"both",initialPromotionConfig:r,crossfade:o,layoutScroll:d,layoutRoot:h})}function f4(t){if(t)return t.options.allowProjection!==!1?t.projection:f4(t.parent)}function V0(t,{forwardMotionProps:s=!1}={},n,r){n&&YM(n);const i=lj(t)?yP:gP;function c(u,d){let h;const o={...S.useContext(nj),...u,layoutId:SP(u)},{isStatic:m}=o,y=tP(u),p=i(u,m);if(!m&&L1){NP();const j=BP(o);h=j.MeasureLayout,y.visualElement=jP(t,p,o,r,j.ProjectionNode)}return e.jsxs(bx.Provider,{value:y,children:[h&&y.visualElement?e.jsx(h,{visualElement:y.visualElement,...o}):null,fP(t,u,vP(p,y.visualElement,d),p,m,s)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const A=S.forwardRef(c);return A[xP]=t,A}function SP({layoutId:t}){const s=S.useContext(O1).id;return s&&t!==void 0?s+"-"+t:t}function NP(t,s){S.useContext(s4).strict}function BP(t){const{drag:s,layout:n}=Of;if(!s&&!n)return{};const r={...s,...n};return{MeasureLayout:s?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function CP(t,s){if(typeof Proxy>"u")return V0;const n=new Map,r=(c,A)=>V0(c,A,t,s),i=(c,A)=>r(c,A);return new Proxy(i,{get:(c,A)=>A==="create"?r:(n.has(A)||n.set(A,V0(A,void 0,t,s)),n.get(A))})}function p4({top:t,left:s,right:n,bottom:r}){return{x:{min:s,max:n},y:{min:t,max:r}}}function EP({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function TP(t,s){if(!s)return t;const n=s({x:t.left,y:t.top}),r=s({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function q0(t){return t===void 0||t===1}function Cb({scale:t,scaleX:s,scaleY:n}){return!q0(t)||!q0(s)||!q0(n)}function nh(t){return Cb(t)||m4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function m4(t){return cS(t.x)||cS(t.y)}function cS(t){return t&&t!=="0%"}function Gy(t,s,n){const r=t-n,i=s*r;return n+i}function dS(t,s,n,r,i){return i!==void 0&&(t=Gy(t,i,r)),Gy(t,n,r)+s}function Eb(t,s=0,n=1,r,i){t.min=dS(t.min,s,n,r,i),t.max=dS(t.max,s,n,r,i)}function g4(t,{x:s,y:n}){Eb(t.x,s.translate,s.scale,s.originPoint),Eb(t.y,n.translate,n.scale,n.originPoint)}const AS=.999999999999,uS=1.0000000000001;function FP(t,s,n,r=!1){const i=n.length;if(!i)return;s.x=s.y=1;let c,A;for(let u=0;u<i;u++){c=n[u],A=c.projectionDelta;const{visualElement:d}=c.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&c.options.layoutScroll&&c.scroll&&c!==c.root&&vf(t,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),A&&(s.x*=A.x.scale,s.y*=A.y.scale,g4(t,A)),r&&nh(c.latestValues)&&vf(t,c.latestValues))}s.x<uS&&s.x>AS&&(s.x=1),s.y<uS&&s.y>AS&&(s.y=1)}function xf(t,s){t.min=t.min+s,t.max=t.max+s}function hS(t,s,n,r,i=.5){const c=vi(t.min,t.max,i);Eb(t,s,n,c,r)}function vf(t,s){hS(t.x,s.x,s.scaleX,s.scale,s.originX),hS(t.y,s.y,s.scaleY,s.scale,s.originY)}function y4(t,s){return p4(TP(t.getBoundingClientRect(),s))}function IP(t,s,n){const r=y4(t,n),{scroll:i}=s;return i&&(xf(r.x,i.offset.x),xf(r.y,i.offset.y)),r}const fS=()=>({translate:0,scale:1,origin:0,originPoint:0}),bf=()=>({x:fS(),y:fS()}),pS=()=>({min:0,max:0}),Ui=()=>({x:pS(),y:pS()}),Tb={current:null},x4={current:!1};function RP(){if(x4.current=!0,!!L1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>Tb.current=t.matches;t.addEventListener("change",s),s()}else Tb.current=!1}const OP=new WeakMap;function UP(t,s,n){for(const r in s){const i=s[r],c=n[r];if(Go(i))t.addValue(r,i);else if(Go(c))t.addValue(r,Rf(i,{owner:t}));else if(c!==i)if(t.hasValue(r)){const A=t.getValue(r);A.liveStyle===!0?A.jump(i):A.hasAnimated||A.set(i)}else{const A=t.getStaticValue(r);t.addValue(r,Rf(A!==void 0?A:i,{owner:t}))}}for(const r in n)s[r]===void 0&&t.removeValue(r);return s}const mS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class LP{scrapeMotionValuesFromProps(s,n,r){return{}}constructor({parent:s,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:c,visualState:A},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=J1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Nl.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,ui.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=A;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=h,this.parent=s,this.props=n,this.presenceContext=r,this.depth=s?s.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!c,this.isControllingVariants=wx(n),this.isVariantNode=r4(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:o,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in m){const p=m[y];d[y]!==void 0&&Go(p)&&p.set(d[y])}}mount(s){this.current=s,OP.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),x4.current||RP(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Tb.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),gu(this.notifyUpdate),gu(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const n=this.features[s];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,n){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const r=Hf.has(s);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",A=>{this.latestValues[s]=A,this.props.onUpdate&&ui.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,s,n)),this.valueSubscriptions.set(s,()=>{i(),c&&c(),n.owner&&n.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in Of){const n=Of[s];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[s]&&i&&r(this.props)&&(this.features[s]=new i(this)),this.features[s]){const c=this.features[s];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ui()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,n){this.latestValues[s]=n}update(s,n){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<mS.length;r++){const i=mS[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const c="on"+i,A=s[c];A&&(this.propEventSubscriptions[i]=this.on(i,A))}this.prevMotionValues=UP(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(s),()=>n.variantChildren.delete(s)}addValue(s,n){const r=this.values.get(s);n!==r&&(r&&this.removeValue(s),this.bindToMotionValue(s,n),this.values.set(s,n),this.latestValues[s]=n.get())}removeValue(s){this.values.delete(s);const n=this.valueSubscriptions.get(s);n&&(n(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,n){if(this.props.values&&this.props.values[s])return this.props.values[s];let r=this.values.get(s);return r===void 0&&n!==void 0&&(r=Rf(n===null?void 0:n,{owner:this}),this.addValue(s,r)),r}readValue(s,n){let r=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return r!=null&&(typeof r=="string"&&(AE(r)||hE(r))?r=parseFloat(r):!zM(r)&&yu.test(n)&&(r=GE(s,n)),this.setBaseTarget(s,Go(r)?r.get():r)),Go(r)?r.get():r}setBaseTarget(s,n){this.baseTarget[s]=n}getBaseTarget(s){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const c=cj(this.props,n,this.presenceContext?.custom);c&&(r=c[s])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,s);return i!==void 0&&!Go(i)?i:this.initialValues[s]!==void 0&&r===void 0?void 0:this.baseTarget[s]}on(s,n){return this.events[s]||(this.events[s]=new P1),this.events[s].add(n)}notify(s,...n){this.events[s]&&this.events[s].notify(...n)}scheduleRenderMicrotask(){tj.render(this.render)}}class v4 extends LP{constructor(){super(...arguments),this.KeyframeResolver=IM}sortInstanceNodePosition(s,n){return s.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(s,n){return s.style?s.style[n]:void 0}removeValueFromRenderState(s,{vars:n,style:r}){delete n[s],delete r[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;Go(s)&&(this.childSubscription=s.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function b4(t,{style:s,vars:n},r,i){const c=t.style;let A;for(A in s)c[A]=s[A];i?.applyProjectionStyles(c,r);for(A in n)c.setProperty(A,n[A])}function DP(t){return window.getComputedStyle(t)}class QP extends v4{constructor(){super(...arguments),this.type="html",this.renderInstance=b4}readValueFromInstance(s,n){if(Hf.has(n))return this.projection?.isProjecting?vb(n):Y_(s,n);{const r=DP(s),i=(z1(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(s,{transformPagePoint:n}){return y4(s,n)}build(s,n,r){ij(s,n,r.transformTemplate)}scrapeMotionValuesFromProps(s,n,r){return dj(s,n,r)}}const j4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _P(t,s,n,r){b4(t,s,void 0,r);for(const i in s.attrs)t.setAttribute(j4.has(i)?i:Aj(i),s.attrs[i])}class MP extends v4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ui}getBaseTargetFromProps(s,n){return s[n]}readValueFromInstance(s,n){if(Hf.has(n)){const r=qE(n);return r&&r.default||0}return n=j4.has(n)?n:Aj(n),s.getAttribute(n)}scrapeMotionValuesFromProps(s,n,r){return A4(s,n,r)}build(s,n,r){o4(s,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(s,n,r,i){_P(s,n,r,i)}mount(s){this.isSVGTag=c4(s.tagName),super.mount(s)}}const PP=(t,s)=>lj(t)?new MP(s):new QP(s,{allowProjection:t!==S.Fragment});function Nf(t,s,n){const r=t.getProps();return cj(r,s,n!==void 0?n:r.custom,t)}const Fb=t=>Array.isArray(t);function kP(t,s,n){t.hasValue(s)?t.getValue(s).set(n):t.addValue(s,Rf(n))}function HP(t){return Fb(t)?t[t.length-1]||0:t}function zP(t,s){const n=Nf(t,s);let{transitionEnd:r={},transition:i={},...c}=n||{};c={...c,...r};for(const A in c){const u=HP(c[A]);kP(t,A,u)}}function KP(t){return!!(Go(t)&&t.add)}function Ib(t,s){const n=t.getValue("willChange");if(KP(n))return n.add(s);if(!n&&gA.WillChange){const r=new gA.WillChange("auto");t.addValue("willChange",r),r.add(s)}}function w4(t){return t.props[u4]}const $P=t=>t!==null;function VP(t,{repeat:s,repeatType:n="loop"},r){const i=t.filter($P),c=s&&n!=="loop"&&s%2===1?0:i.length-1;return i[c]}const qP={type:"spring",stiffness:500,damping:25,restSpeed:10},GP=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),WP={type:"keyframes",duration:.8},YP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},XP=(t,{keyframes:s})=>s.length>2?WP:Hf.has(t)?t.startsWith("scale")?GP(s[1]):qP:YP;function JP({when:t,delay:s,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:c,repeatType:A,repeatDelay:u,from:d,elapsed:h,...o}){return!!Object.keys(o).length}const uj=(t,s,n,r={},i,c)=>A=>{const u=Z1(r,t)||{},d=u.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Ld(d);const o={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:s.getVelocity(),...u,delay:-h,onUpdate:y=>{s.set(y),u.onUpdate&&u.onUpdate(y)},onComplete:()=>{A(),u.onComplete&&u.onComplete()},name:t,motionValue:s,element:c?void 0:i};JP(u)||Object.assign(o,XP(t,o)),o.duration&&(o.duration=Ld(o.duration)),o.repeatDelay&&(o.repeatDelay=Ld(o.repeatDelay)),o.from!==void 0&&(o.keyframes[0]=o.from);let m=!1;if((o.type===!1||o.duration===0&&!o.repeatDelay)&&(Nb(o),o.delay===0&&(m=!0)),(gA.instantAnimations||gA.skipAnimations)&&(m=!0,Nb(o),o.delay=0),o.allowFlatten=!u.type&&!u.ease,m&&!c&&s.get()!==void 0){const y=VP(o.keyframes,u);if(y!==void 0){ui.update(()=>{o.onUpdate(y),o.onComplete()});return}}return u.isSync?new X1(o):new xM(o)};function ZP({protectedKeys:t,needsAnimating:s},n){const r=t.hasOwnProperty(n)&&s[n]!==!0;return s[n]=!1,r}function S4(t,s,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:c=t.getDefaultTransition(),transitionEnd:A,...u}=s;r&&(c=r);const d=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const o in u){const m=t.getValue(o,t.latestValues[o]??null),y=u[o];if(y===void 0||h&&ZP(h,o))continue;const p={delay:n,...Z1(c||{},o)},j=m.get();if(j!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===j&&!p.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const B=w4(t);if(B){const U=window.MotionHandoffAnimation(B,o,ui);U!==null&&(p.startTime=U,b=!0)}}Ib(t,o),m.start(uj(o,m,y,t.shouldReduceMotion&&KE.has(o)?{type:!1}:p,t,b));const w=m.animation;w&&d.push(w)}return A&&Promise.all(d).then(()=>{ui.update(()=>{A&&zP(t,A)})}),d}function N4(t,s,n,r=0,i=1){const c=Array.from(t).sort((h,o)=>h.sortNodePosition(o)).indexOf(s),A=t.size,u=(A-1)*r;return typeof n=="function"?n(c,A):i===1?c*r:u-c*r}function Rb(t,s,n={}){const r=Nf(t,s,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const c=r?()=>Promise.all(S4(t,r,n)):()=>Promise.resolve(),A=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:o,staggerDirection:m}=i;return ek(t,s,d,h,o,m,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[d,h]=u==="beforeChildren"?[c,A]:[A,c];return d().then(()=>h())}else return Promise.all([c(),A(n.delay)])}function ek(t,s,n=0,r=0,i=0,c=1,A){const u=[];for(const d of t.variantChildren)d.notify("AnimationStart",s),u.push(Rb(d,s,{...A,delay:n+(typeof r=="function"?0:r)+N4(t.variantChildren,d,r,i,c)}).then(()=>d.notify("AnimationComplete",s)));return Promise.all(u)}function tk(t,s,n={}){t.notify("AnimationStart",s);let r;if(Array.isArray(s)){const i=s.map(c=>Rb(t,c,n));r=Promise.all(i)}else if(typeof s=="string")r=Rb(t,s,n);else{const i=typeof s=="function"?Nf(t,s,n.custom):s;r=Promise.all(S4(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",s)})}function B4(t,s){if(!Array.isArray(s))return!1;const n=s.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(s[r]!==t[r])return!1;return!0}const sk=aj.length;function C4(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?C4(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const s={};for(let n=0;n<sk;n++){const r=aj[n],i=t.props[r];(mm(i)||i===!1)&&(s[r]=i)}return s}const nk=[...rj].reverse(),rk=rj.length;function ak(t){return s=>Promise.all(s.map(({animation:n,options:r})=>tk(t,n,r)))}function ik(t){let s=ak(t),n=gS(),r=!0;const i=d=>(h,o)=>{const m=Nf(t,o,d==="exit"?t.presenceContext?.custom:void 0);if(m){const{transition:y,transitionEnd:p,...j}=m;h={...h,...j,...p}}return h};function c(d){s=d(t)}function A(d){const{props:h}=t,o=C4(t.parent)||{},m=[],y=new Set;let p={},j=1/0;for(let w=0;w<rk;w++){const B=nk[w],U=n[B],Q=h[B]!==void 0?h[B]:o[B],k=mm(Q),K=B===d?U.isActive:null;K===!1&&(j=w);let ee=Q===o[B]&&Q!==h[B]&&k;if(ee&&r&&t.manuallyAnimateOnMount&&(ee=!1),U.protectedKeys={...p},!U.isActive&&K===null||!Q&&!U.prevProp||jx(Q)||typeof Q=="boolean")continue;const q=ok(U.prevProp,Q);let G=q||B===d&&U.isActive&&!ee&&k||w>j&&k,W=!1;const he=Array.isArray(Q)?Q:[Q];let Z=he.reduce(i(B),{});K===!1&&(Z={});const{prevResolvedValues:ie={}}=U,ce={...ie,...Z},ae=re=>{G=!0,y.has(re)&&(W=!0,y.delete(re)),U.needsAnimating[re]=!0;const te=t.getValue(re);te&&(te.liveStyle=!1)};for(const re in ce){const te=Z[re],be=ie[re];if(p.hasOwnProperty(re))continue;let He=!1;Fb(te)&&Fb(be)?He=!B4(te,be):He=te!==be,He?te!=null?ae(re):y.add(re):te!==void 0&&y.has(re)?ae(re):U.protectedKeys[re]=!0}U.prevProp=Q,U.prevResolvedValues=Z,U.isActive&&(p={...p,...Z}),r&&t.blockInitialAnimation&&(G=!1);const de=ee&&q;G&&(!de||W)&&m.push(...he.map(re=>{const te={type:B};if(typeof re=="string"&&r&&!de&&t.manuallyAnimateOnMount&&t.parent){const{parent:be}=t,He=Nf(be,re);if(be.enteringChildren&&He){const{delayChildren:pe}=He.transition||{};te.delay=N4(be.enteringChildren,t,pe)}}return{animation:re,options:te}}))}if(y.size){const w={};if(typeof h.initial!="boolean"){const B=Nf(t,Array.isArray(h.initial)?h.initial[0]:h.initial);B&&B.transition&&(w.transition=B.transition)}y.forEach(B=>{const U=t.getBaseTarget(B),Q=t.getValue(B);Q&&(Q.liveStyle=!0),w[B]=U??null}),m.push({animation:w})}let b=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?s(m):Promise.resolve()}function u(d,h){if(n[d].isActive===h)return Promise.resolve();t.variantChildren?.forEach(m=>m.animationState?.setActive(d,h)),n[d].isActive=h;const o=A(d);for(const m in n)n[m].protectedKeys={};return o}return{animateChanges:A,setActive:u,setAnimateFunction:c,getState:()=>n,reset:()=>{n=gS()}}}function ok(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!B4(s,t):!1}function sh(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gS(){return{animate:sh(!0),whileInView:sh(),whileHover:sh(),whileTap:sh(),whileDrag:sh(),whileFocus:sh(),exit:sh()}}class vu{constructor(s){this.isMounted=!1,this.node=s}update(){}}class lk extends vu{constructor(s){super(s),s.animationState||(s.animationState=ik(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();jx(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:n}=this.node.prevProps||{};s!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let ck=0;class dk extends vu{constructor(){super(...arguments),this.id=ck++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===r)return;const i=this.node.animationState.setActive("exit",!s);n&&!s&&i.then(()=>{n(this.id)})}mount(){const{register:s,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const Ak={animation:{Feature:lk},exit:{Feature:dk}};function ym(t,s,n,r={passive:!0}){return t.addEventListener(s,n,r),()=>t.removeEventListener(s,n)}function Em(t){return{point:{x:t.pageX,y:t.pageY}}}const uk=t=>s=>sj(s)&&t(s,Em(s));function Xp(t,s,n,r){return ym(t,s,uk(n),r)}const E4=1e-4,hk=1-E4,fk=1+E4,T4=.01,pk=0-T4,mk=0+T4;function ol(t){return t.max-t.min}function gk(t,s,n){return Math.abs(t-s)<=n}function yS(t,s,n,r=.5){t.origin=r,t.originPoint=vi(s.min,s.max,t.origin),t.scale=ol(n)/ol(s),t.translate=vi(n.min,n.max,t.origin)-t.originPoint,(t.scale>=hk&&t.scale<=fk||isNaN(t.scale))&&(t.scale=1),(t.translate>=pk&&t.translate<=mk||isNaN(t.translate))&&(t.translate=0)}function Jp(t,s,n,r){yS(t.x,s.x,n.x,r?r.originX:void 0),yS(t.y,s.y,n.y,r?r.originY:void 0)}function xS(t,s,n){t.min=n.min+s.min,t.max=t.min+ol(s)}function yk(t,s,n){xS(t.x,s.x,n.x),xS(t.y,s.y,n.y)}function vS(t,s,n){t.min=s.min-n.min,t.max=t.min+ol(s)}function Zp(t,s,n){vS(t.x,s.x,n.x),vS(t.y,s.y,n.y)}function bc(t){return[t("x"),t("y")]}const F4=({current:t})=>t?t.ownerDocument.defaultView:null,bS=(t,s)=>Math.abs(t-s);function xk(t,s){const n=bS(t.x,s.x),r=bS(t.y,s.y);return Math.sqrt(n**2+r**2)}class I4{constructor(s,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:c=!1,distanceThreshold:A=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=W0(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,j=xk(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!j)return;const{point:b}=y,{timestamp:w}=vo;this.history.push({...b,timestamp:w});const{onStart:B,onMove:U}=this.handlers;p||(B&&B(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,y)},this.handlePointerMove=(y,p)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=G0(p,this.transformPagePoint),ui.update(this.updatePoint,!0)},this.handlePointerUp=(y,p)=>{this.end();const{onEnd:j,onSessionEnd:b,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=W0(y.type==="pointercancel"?this.lastMoveEventInfo:G0(p,this.transformPagePoint),this.history);this.startEvent&&j&&j(y,B),b&&b(y,B)},!sj(s))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=A,this.contextWindow=i||window;const u=Em(s),d=G0(u,this.transformPagePoint),{point:h}=d,{timestamp:o}=vo;this.history=[{...h,timestamp:o}];const{onSessionStart:m}=n;m&&m(s,W0(d,this.history)),this.removeListeners=Nm(Xp(this.contextWindow,"pointermove",this.handlePointerMove),Xp(this.contextWindow,"pointerup",this.handlePointerUp),Xp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),gu(this.updatePoint)}}function G0(t,s){return s?{point:s(t.point)}:t}function jS(t,s){return{x:t.x-s.x,y:t.y-s.y}}function W0({point:t},s){return{point:t,delta:jS(t,R4(s)),offset:jS(t,vk(s)),velocity:bk(s,.1)}}function vk(t){return t[0]}function R4(t){return t[t.length-1]}function bk(t,s){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=R4(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ld(s)));)n--;if(!r)return{x:0,y:0};const c=Sc(i.timestamp-r.timestamp);if(c===0)return{x:0,y:0};const A={x:(i.x-r.x)/c,y:(i.y-r.y)/c};return A.x===1/0&&(A.x=0),A.y===1/0&&(A.y=0),A}function jk(t,{min:s,max:n},r){return s!==void 0&&t<s?t=r?vi(s,t,r.min):Math.max(t,s):n!==void 0&&t>n&&(t=r?vi(n,t,r.max):Math.min(t,n)),t}function wS(t,s,n){return{min:s!==void 0?t.min+s:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function wk(t,{top:s,left:n,bottom:r,right:i}){return{x:wS(t.x,n,i),y:wS(t.y,s,r)}}function SS(t,s){let n=s.min-t.min,r=s.max-t.max;return s.max-s.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Sk(t,s){return{x:SS(t.x,s.x),y:SS(t.y,s.y)}}function Nk(t,s){let n=.5;const r=ol(t),i=ol(s);return i>r?n=hm(s.min,s.max-r,t.min):r>i&&(n=hm(t.min,t.max-i,s.min)),mA(0,1,n)}function Bk(t,s){const n={};return s.min!==void 0&&(n.min=s.min-t.min),s.max!==void 0&&(n.max=s.max-t.min),n}const Ob=.35;function Ck(t=Ob){return t===!1?t=0:t===!0&&(t=Ob),{x:NS(t,"left","right"),y:NS(t,"top","bottom")}}function NS(t,s,n){return{min:BS(t,s),max:BS(t,n)}}function BS(t,s){return typeof t=="number"?t:t[s]||0}const Ek=new WeakMap;class Tk{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ui(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const c=m=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Em(m).point)},A=(m,y)=>{const{drag:p,dragPropagation:j,onDragStart:b}=this.getProps();if(p&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=LM(p),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bc(B=>{let U=this.getAxisMotionValue(B).get()||0;if(Dd.test(U)){const{projection:Q}=this.visualElement;if(Q&&Q.layout){const k=Q.layout.layoutBox[B];k&&(U=ol(k)*(parseFloat(U)/100))}}this.originPoint[B]=U}),b&&ui.postRender(()=>b(m,y)),Ib(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},u=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y;const{dragPropagation:p,dragDirectionLock:j,onDirectionLock:b,onDrag:w}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:B}=y;if(j&&this.currentDirection===null){this.currentDirection=Fk(B),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",y.point,B),this.updateAxis("y",y.point,B),this.visualElement.render(),w&&w(m,y)},d=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y,this.stop(m,y),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>bc(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:o}=this.getProps();this.panSession=new I4(s,{onSessionStart:c,onStart:A,onMove:u,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:o,distanceThreshold:r,contextWindow:F4(this.visualElement)})}stop(s,n){const r=s||this.latestPointerEvent,i=n||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!i||!r)return;const{velocity:A}=i;this.startAnimation(A);const{onDragEnd:u}=this.getProps();u&&ui.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:s,animationState:n}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(s,n,r){const{drag:i}=this.getProps();if(!r||!zg(s,i,this.currentDirection))return;const c=this.getAxisMotionValue(s);let A=this.originPoint[s]+r[s];this.constraints&&this.constraints[s]&&(A=jk(A,this.constraints[s],this.elastic[s])),c.set(A)}resolveConstraints(){const{dragConstraints:s,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;s&&yf(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&r?this.constraints=wk(r.layoutBox,s):this.constraints=!1,this.elastic=Ck(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&bc(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=Bk(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:n}=this.getProps();if(!s||!yf(s))return!1;const r=s.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const c=IP(r,i.root,this.visualElement.getTransformPagePoint());let A=Sk(i.layout.layoutBox,c);if(n){const u=n(EP(A));this.hasMutatedConstraints=!!u,u&&(A=p4(u))}return A}startAnimation(s){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:c,dragSnapToOrigin:A,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},h=bc(o=>{if(!zg(o,n,this.currentDirection))return;let m=d&&d[o]||{};A&&(m={min:0,max:0});const y=i?200:1e6,p=i?40:1e7,j={type:"inertia",velocity:r?s[o]:0,bounceStiffness:y,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...c,...m};return this.startAxisValueAnimation(o,j)});return Promise.all(h).then(u)}startAxisValueAnimation(s,n){const r=this.getAxisMotionValue(s);return Ib(this.visualElement,s),r.start(uj(s,r,0,n,this.visualElement,!1))}stopAnimation(){bc(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){bc(s=>this.getAxisMotionValue(s).animation?.pause())}getAnimationState(s){return this.getAxisMotionValue(s).animation?.state}getAxisMotionValue(s){const n=`_drag${s.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(s,(r.initial?r.initial[s]:void 0)||0)}snapToCursor(s){bc(n=>{const{drag:r}=this.getProps();if(!zg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,c=this.getAxisMotionValue(n);if(i&&i.layout){const{min:A,max:u}=i.layout.layoutBox[n];c.set(s[n]-vi(A,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!yf(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};bc(A=>{const u=this.getAxisMotionValue(A);if(u&&this.constraints!==!1){const d=u.get();i[A]=Nk({min:d,max:d},this.constraints[A])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),bc(A=>{if(!zg(A,s,null))return;const u=this.getAxisMotionValue(A),{min:d,max:h}=this.constraints[A];u.set(vi(d,h,i[A]))})}addListeners(){if(!this.visualElement.current)return;Ek.set(this.visualElement,this);const s=this.visualElement.current,n=Xp(s,"pointerdown",d=>{const{drag:h,dragListener:o=!0}=this.getProps();h&&o&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();yf(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,c=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ui.read(r);const A=ym(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(bc(o=>{const m=this.getAxisMotionValue(o);m&&(this.originPoint[o]+=d[o].translate,m.set(m.get()+d[o].translate))}),this.visualElement.render())}));return()=>{A(),n(),c(),u&&u()}}getProps(){const s=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:c=!1,dragElastic:A=Ob,dragMomentum:u=!0}=s;return{...s,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:c,dragElastic:A,dragMomentum:u}}}function zg(t,s,n){return(s===!0||s===t)&&(n===null||n===t)}function Fk(t,s=10){let n=null;return Math.abs(t.y)>s?n="y":Math.abs(t.x)>s&&(n="x"),n}class Ik extends vu{constructor(s){super(s),this.removeGroupControls=Nc,this.removeListeners=Nc,this.controls=new Tk(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nc}unmount(){this.removeGroupControls(),this.removeListeners()}}const CS=t=>(s,n)=>{t&&ui.postRender(()=>t(s,n))};class Rk extends vu{constructor(){super(...arguments),this.removePointerDownListener=Nc}onPointerDown(s){this.session=new I4(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:F4(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:CS(s),onStart:CS(n),onMove:r,onEnd:(c,A)=>{delete this.session,i&&ui.postRender(()=>i(c,A))}}}mount(){this.removePointerDownListener=Xp(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ES(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const Qp={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if($n.test(t))t=parseFloat(t);else return t;const n=ES(t,s.target.x),r=ES(t,s.target.y);return`${n}% ${r}%`}},Ok={correct:(t,{treeScale:s,projectionDelta:n})=>{const r=t,i=yu.parse(t);if(i.length>5)return r;const c=yu.createTransformer(t),A=typeof i[0]!="number"?1:0,u=n.x.scale*s.x,d=n.y.scale*s.y;i[0+A]/=u,i[1+A]/=d;const h=vi(u,d,.5);return typeof i[2+A]=="number"&&(i[2+A]/=h),typeof i[3+A]=="number"&&(i[3+A]/=h),c(i)}};let Y0=!1;class Uk extends S.Component{componentDidMount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:c}=s;sP(Lk),c&&(n.group&&n.group.add(c),r&&r.register&&i&&r.register(c),Y0&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),gy.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:n,visualElement:r,drag:i,isPresent:c}=this.props,{projection:A}=r;return A&&(A.isPresent=c,Y0=!0,i||s.layoutDependency!==n||n===void 0||s.isPresent!==c?A.willUpdate():this.safeToRemove(),s.isPresent!==c&&(c?A.promote():A.relegate()||ui.postRender(()=>{const u=A.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),tj.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=s;Y0=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function O4(t){const[s,n]=t4(),r=S.useContext(O1);return e.jsx(Uk,{...t,layoutGroup:r,switchLayoutGroup:S.useContext(h4),isPresent:s,safeToRemove:n})}const Lk={borderRadius:{...Qp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qp,borderTopRightRadius:Qp,borderBottomLeftRadius:Qp,borderBottomRightRadius:Qp,boxShadow:Ok};function Dk(t,s,n){const r=Go(t)?t:Rf(t);return r.start(uj("",r,s,n)),r.animation}const Qk=(t,s)=>t.depth-s.depth;class _k{constructor(){this.children=[],this.isDirty=!1}add(s){D1(this.children,s),this.isDirty=!0}remove(s){Q1(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(Qk),this.isDirty=!1,this.children.forEach(s)}}function Mk(t,s){const n=Nl.now(),r=({timestamp:i})=>{const c=i-n;c>=s&&(gu(r),t(c-s))};return ui.setup(r,!0),()=>gu(r)}const U4=["TopLeft","TopRight","BottomLeft","BottomRight"],Pk=U4.length,TS=t=>typeof t=="string"?parseFloat(t):t,FS=t=>typeof t=="number"||$n.test(t);function kk(t,s,n,r,i,c){i?(t.opacity=vi(0,n.opacity??1,Hk(r)),t.opacityExit=vi(s.opacity??1,0,zk(r))):c&&(t.opacity=vi(s.opacity??1,n.opacity??1,r));for(let A=0;A<Pk;A++){const u=`border${U4[A]}Radius`;let d=IS(s,u),h=IS(n,u);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||FS(d)===FS(h)?(t[u]=Math.max(vi(TS(d),TS(h),r),0),(Dd.test(h)||Dd.test(d))&&(t[u]+="%")):t[u]=h}(s.rotate||n.rotate)&&(t.rotate=vi(s.rotate||0,n.rotate||0,r))}function IS(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const Hk=L4(0,.5,bE),zk=L4(.5,.95,Nc);function L4(t,s,n){return r=>r<t?0:r>s?1:n(hm(t,s,r))}function RS(t,s){t.min=s.min,t.max=s.max}function xc(t,s){RS(t.x,s.x),RS(t.y,s.y)}function OS(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function US(t,s,n,r,i){return t-=s,t=Gy(t,1/n,r),i!==void 0&&(t=Gy(t,1/i,r)),t}function Kk(t,s=0,n=1,r=.5,i,c=t,A=t){if(Dd.test(s)&&(s=parseFloat(s),s=vi(A.min,A.max,s/100)-A.min),typeof s!="number")return;let u=vi(c.min,c.max,r);t===c&&(u-=s),t.min=US(t.min,s,n,u,i),t.max=US(t.max,s,n,u,i)}function LS(t,s,[n,r,i],c,A){Kk(t,s[n],s[r],s[i],s.scale,c,A)}const $k=["x","scaleX","originX"],Vk=["y","scaleY","originY"];function DS(t,s,n,r){LS(t.x,s,$k,n?n.x:void 0,r?r.x:void 0),LS(t.y,s,Vk,n?n.y:void 0,r?r.y:void 0)}function QS(t){return t.translate===0&&t.scale===1}function D4(t){return QS(t.x)&&QS(t.y)}function _S(t,s){return t.min===s.min&&t.max===s.max}function qk(t,s){return _S(t.x,s.x)&&_S(t.y,s.y)}function MS(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function Q4(t,s){return MS(t.x,s.x)&&MS(t.y,s.y)}function PS(t){return ol(t.x)/ol(t.y)}function kS(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class Gk{constructor(){this.members=[]}add(s){D1(this.members,s),s.scheduleRender()}remove(s){if(Q1(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(s){const n=this.members.findIndex(i=>s===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const c=this.members[i];if(c.isPresent!==!1){r=c;break}}return r?(this.promote(r),!0):!1}promote(s,n){const r=this.lead;if(s!==r&&(this.prevLead=r,this.lead=s,s.show(),r)){r.instance&&r.scheduleRender(),s.scheduleRender(),s.resumeFrom=r,n&&(s.resumeFrom.preserveOpacity=!0),r.snapshot&&(s.snapshot=r.snapshot,s.snapshot.latestValues=r.animationValues||r.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:i}=s.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:n,resumingFrom:r}=s;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Wk(t,s,n){let r="";const i=t.x.translate/s.x,c=t.y.translate/s.y,A=n?.z||0;if((i||c||A)&&(r=`translate3d(${i}px, ${c}px, ${A}px) `),(s.x!==1||s.y!==1)&&(r+=`scale(${1/s.x}, ${1/s.y}) `),n){const{transformPerspective:h,rotate:o,rotateX:m,rotateY:y,skewX:p,skewY:j}=n;h&&(r=`perspective(${h}px) ${r}`),o&&(r+=`rotate(${o}deg) `),m&&(r+=`rotateX(${m}deg) `),y&&(r+=`rotateY(${y}deg) `),p&&(r+=`skewX(${p}deg) `),j&&(r+=`skewY(${j}deg) `)}const u=t.x.scale*s.x,d=t.y.scale*s.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const X0=["","X","Y","Z"],Yk=1e3;let Xk=0;function J0(t,s,n,r){const{latestValues:i}=s;i[t]&&(n[t]=i[t],s.setStaticValue(t,0),r&&(r[t]=0))}function _4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const n=w4(s);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:c}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ui,!(i||c))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&_4(r)}function M4({attachResizeListener:t,defaultParent:s,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(A={},u=s?.()){this.id=Xk++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(e8),this.nodes.forEach(r8),this.nodes.forEach(a8),this.nodes.forEach(t8)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=A,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new _k)}addEventListener(A,u){return this.eventHandlers.has(A)||this.eventHandlers.set(A,new P1),this.eventHandlers.get(A).add(u)}notifyListeners(A,...u){const d=this.eventHandlers.get(A);d&&d.notify(...u)}hasListeners(A){return this.eventHandlers.has(A)}mount(A){if(this.instance)return;this.isSVG=e4(A)&&!kM(A),this.instance=A;const{layoutId:u,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(A),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),t){let o,m=0;const y=()=>this.root.updateBlockedByResize=!1;ui.read(()=>{m=window.innerWidth}),t(A,()=>{const p=window.innerWidth;p!==m&&(m=p,this.root.updateBlockedByResize=!0,o&&o(),o=Mk(y,250),gy.hasAnimatedSinceResize&&(gy.hasAnimatedSinceResize=!1,this.nodes.forEach(KS)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||d)&&this.addEventListener("didUpdate",({delta:o,hasLayoutChanged:m,hasRelativeLayoutChanged:y,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||h.getDefaultTransition()||d8,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=h.getProps(),B=!this.targetLayout||!Q4(this.targetLayout,p),U=!m&&y;if(this.options.layoutRoot||this.resumeFrom||U||m&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Q={...Z1(j,"layout"),onPlay:b,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(Q.delay=0,Q.type=!1),this.startAnimation(Q),this.setAnimationOrigin(o,U)}else m||KS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const A=this.getStack();A&&A.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),gu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(i8),this.animationId++)}getTransformTemplate(){const{visualElement:A}=this.options;return A&&A.getProps().transformTemplate}willUpdate(A=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let o=0;o<this.path.length;o++){const m=this.path[o];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),A&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(HS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(zS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(n8),this.nodes.forEach(Jk),this.nodes.forEach(Zk)):this.nodes.forEach(zS),this.clearAllSnapshots();const u=Nl.now();vo.delta=mA(0,1e3/60,u-vo.timestamp),vo.timestamp=u,vo.isProcessing=!0,P0.update.process(vo),P0.preRender.process(vo),P0.render.process(vo),vo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(s8),this.sharedNodes.forEach(o8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ui.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ui.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ol(this.snapshot.measuredBox.x)&&!ol(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const A=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ui(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,A?A.layoutBox:void 0)}updateScroll(A="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===A&&(u=!1),u&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:A,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const A=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!D4(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,o=h!==this.prevTransformTemplateValue;A&&this.instance&&(u||nh(this.latestValues)||o)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(A=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return A&&(d=this.removeTransform(d)),A8(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:A}=this.options;if(!A)return Ui();const u=A.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(u8))){const{scroll:h}=this.root;h&&(xf(u.x,h.offset.x),xf(u.y,h.offset.y))}return u}removeElementScroll(A){const u=Ui();if(xc(u,A),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:o,options:m}=h;h!==this.root&&o&&m.layoutScroll&&(o.wasRoot&&xc(u,A),xf(u.x,o.offset.x),xf(u.y,o.offset.y))}return u}applyTransform(A,u=!1){const d=Ui();xc(d,A);for(let h=0;h<this.path.length;h++){const o=this.path[h];!u&&o.options.layoutScroll&&o.scroll&&o!==o.root&&vf(d,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),nh(o.latestValues)&&vf(d,o.latestValues)}return nh(this.latestValues)&&vf(d,this.latestValues),d}removeTransform(A){const u=Ui();xc(u,A);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!nh(h.latestValues))continue;Cb(h.latestValues)&&h.updateSnapshot();const o=Ui(),m=h.measurePageBox();xc(o,m),DS(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,o)}return nh(this.latestValues)&&DS(u,this.latestValues),u}setTargetDelta(A){this.targetDelta=A,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(A){this.options={...this.options,...A,crossfade:A.crossfade!==void 0?A.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(A=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(A||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:o,layoutId:m}=this.options;if(!(!this.layout||!(o||m))){if(this.resolvedRelativeTargetAt=vo.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ui(),this.relativeTargetOrigin=Ui(),Zp(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),xc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ui(),this.targetWithTransforms=Ui()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yk(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xc(this.target,this.layout.layoutBox),g4(this.target,this.targetDelta)):xc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ui(),this.relativeTargetOrigin=Ui(),Zp(this.relativeTargetOrigin,this.target,y.target),xc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Cb(this.parent.latestValues)||m4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const A=this.getLead(),u=!!this.resumingFrom||this!==A;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===vo.timestamp&&(d=!1),d)return;const{layout:h,layoutId:o}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||o))return;xc(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;FP(this.layoutCorrected,this.treeScale,this.path,u),A.layout&&!A.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(A.target=A.layout.layoutBox,A.targetWithTransforms=Ui());const{target:p}=A;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(OS(this.prevProjectionDelta.x,this.projectionDelta.x),OS(this.prevProjectionDelta.y,this.projectionDelta.y)),Jp(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!kS(this.projectionDelta.x,this.prevProjectionDelta.x)||!kS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(A=!0){if(this.options.visualElement?.scheduleRender(),A){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=bf(),this.projectionDelta=bf(),this.projectionDeltaWithTransform=bf()}setAnimationOrigin(A,u=!1){const d=this.snapshot,h=d?d.latestValues:{},o={...this.latestValues},m=bf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const y=Ui(),p=d?d.source:void 0,j=this.layout?this.layout.source:void 0,b=p!==j,w=this.getStack(),B=!w||w.members.length<=1,U=!!(b&&!B&&this.options.crossfade===!0&&!this.path.some(c8));this.animationProgress=0;let Q;this.mixTargetDelta=k=>{const K=k/1e3;$S(m.x,A.x,K),$S(m.y,A.y,K),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zp(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),l8(this.relativeTarget,this.relativeTargetOrigin,y,K),Q&&qk(this.relativeTarget,Q)&&(this.isProjectionDirty=!1),Q||(Q=Ui()),xc(Q,this.relativeTarget)),b&&(this.animationValues=o,kk(o,h,this.latestValues,K,U,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(A){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(gu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ui.update(()=>{gy.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Rf(0)),this.currentAnimation=Dk(this.motionValue,[0,1e3],{...A,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),A.onUpdate&&A.onUpdate(u)},onStop:()=>{},onComplete:()=>{A.onComplete&&A.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const A=this.getStack();A&&A.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Yk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const A=this.getLead();let{targetWithTransforms:u,target:d,layout:h,latestValues:o}=A;if(!(!u||!d||!h)){if(this!==A&&this.layout&&h&&P4(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Ui();const m=ol(this.layout.layoutBox.x);d.x.min=A.target.x.min,d.x.max=d.x.min+m;const y=ol(this.layout.layoutBox.y);d.y.min=A.target.y.min,d.y.max=d.y.min+y}xc(u,d),vf(u,o),Jp(this.projectionDeltaWithTransform,this.layoutCorrected,u,o)}}registerSharedNode(A,u){this.sharedNodes.has(A)||this.sharedNodes.set(A,new Gk),this.sharedNodes.get(A).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const A=this.getStack();return A?A.lead===this:!0}getLead(){const{layoutId:A}=this.options;return A?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:A}=this.options;return A?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:A}=this.options;if(A)return this.root.sharedNodes.get(A)}promote({needsReset:A,transition:u,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),A&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const A=this.getStack();return A?A.relegate(this):!1}resetSkewAndRotation(){const{visualElement:A}=this.options;if(!A)return;let u=!1;const{latestValues:d}=A;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const h={};d.z&&J0("z",A,h,this.animationValues);for(let o=0;o<X0.length;o++)J0(`rotate${X0[o]}`,A,h,this.animationValues),J0(`skew${X0[o]}`,A,h,this.animationValues);A.render();for(const o in h)A.setStaticValue(o,h[o]),this.animationValues&&(this.animationValues[o]=h[o]);A.scheduleRender()}applyProjectionStyles(A,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){A.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,A.visibility="",A.opacity="",A.pointerEvents=my(u?.pointerEvents)||"",A.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=my(u?.pointerEvents)||""),this.hasProjected&&!nh(this.latestValues)&&(A.transform=d?d({},""):"none",this.hasProjected=!1);return}A.visibility="";const o=h.animationValues||h.latestValues;this.applyTransformsToTarget();let m=Wk(this.projectionDeltaWithTransform,this.treeScale,o);d&&(m=d(o,m)),A.transform=m;const{x:y,y:p}=this.projectionDelta;A.transformOrigin=`${y.origin*100}% ${p.origin*100}% 0`,h.animationValues?A.opacity=h===this?o.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:A.opacity=h===this?o.opacity!==void 0?o.opacity:"":o.opacityExit!==void 0?o.opacityExit:0;for(const j in gm){if(o[j]===void 0)continue;const{correct:b,applyTo:w,isCSSVariable:B}=gm[j],U=m==="none"?o[j]:b(o[j],h);if(w){const Q=w.length;for(let k=0;k<Q;k++)A[w[k]]=U}else B?this.options.visualElement.renderState.vars[j]=U:A[j]=U}this.options.layoutId&&(A.pointerEvents=h===this?my(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(A=>A.currentAnimation?.stop()),this.root.nodes.forEach(HS),this.root.sharedNodes.clear()}}}function Jk(t){t.updateLayout()}function Zk(t){const s=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,c=s.source!==t.layout.source;i==="size"?bc(o=>{const m=c?s.measuredBox[o]:s.layoutBox[o],y=ol(m);m.min=n[o].min,m.max=m.min+y}):P4(i,s.layoutBox,n)&&bc(o=>{const m=c?s.measuredBox[o]:s.layoutBox[o],y=ol(n[o]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[o].max=t.relativeTarget[o].min+y)});const A=bf();Jp(A,n,s.layoutBox);const u=bf();c?Jp(u,t.applyTransform(r,!0),s.measuredBox):Jp(u,n,s.layoutBox);const d=!D4(A);let h=!1;if(!t.resumeFrom){const o=t.getClosestProjectingParent();if(o&&!o.resumeFrom){const{snapshot:m,layout:y}=o;if(m&&y){const p=Ui();Zp(p,s.layoutBox,m.layoutBox);const j=Ui();Zp(j,n,y.layoutBox),Q4(p,j)||(h=!0),o.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=p,t.relativeParent=o)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:u,layoutDelta:A,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function e8(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function t8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function s8(t){t.clearSnapshot()}function HS(t){t.clearMeasurements()}function zS(t){t.isLayoutDirty=!1}function n8(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function KS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function r8(t){t.resolveTargetDelta()}function a8(t){t.calcProjection()}function i8(t){t.resetSkewAndRotation()}function o8(t){t.removeLeadSnapshot()}function $S(t,s,n){t.translate=vi(s.translate,0,n),t.scale=vi(s.scale,1,n),t.origin=s.origin,t.originPoint=s.originPoint}function VS(t,s,n,r){t.min=vi(s.min,n.min,r),t.max=vi(s.max,n.max,r)}function l8(t,s,n,r){VS(t.x,s.x,n.x,r),VS(t.y,s.y,n.y,r)}function c8(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const d8={duration:.45,ease:[.4,0,.1,1]},qS=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),GS=qS("applewebkit/")&&!qS("chrome/")?Math.round:Nc;function WS(t){t.min=GS(t.min),t.max=GS(t.max)}function A8(t){WS(t.x),WS(t.y)}function P4(t,s,n){return t==="position"||t==="preserve-aspect"&&!gk(PS(s),PS(n),.2)}function u8(t){return t!==t.root&&t.scroll?.wasRoot}const h8=M4({attachResizeListener:(t,s)=>ym(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Z0={current:void 0},k4=M4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Z0.current){const t=new h8({});t.mount(window),t.setOptions({layoutScroll:!0}),Z0.current=t}return Z0.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),f8={pan:{Feature:Rk},drag:{Feature:Ik,ProjectionNode:k4,MeasureLayout:O4}};function YS(t,s,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,c=r[i];c&&ui.postRender(()=>c(s,Em(s)))}class p8 extends vu{mount(){const{current:s}=this.node;s&&(this.unmount=DM(s,(n,r)=>(YS(this.node,r,"Start"),i=>YS(this.node,i,"End"))))}unmount(){}}class m8 extends vu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Nm(ym(this.node.current,"focus",()=>this.onFocus()),ym(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function XS(t,s,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),c=r[i];c&&ui.postRender(()=>c(s,Em(s)))}class g8 extends vu{mount(){const{current:s}=this.node;s&&(this.unmount=PM(s,(n,r)=>(XS(this.node,r,"Start"),(i,{success:c})=>XS(this.node,i,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ub=new WeakMap,ev=new WeakMap,y8=t=>{const s=Ub.get(t.target);s&&s(t)},x8=t=>{t.forEach(y8)};function v8({root:t,...s}){const n=t||document;ev.has(n)||ev.set(n,{});const r=ev.get(n),i=JSON.stringify(s);return r[i]||(r[i]=new IntersectionObserver(x8,{root:t,...s})),r[i]}function b8(t,s,n){const r=v8(s);return Ub.set(t,n),r.observe(t),()=>{Ub.delete(t),r.unobserve(t)}}const j8={some:0,all:1};class w8 extends vu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:c}=s,A={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:j8[i]},u=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,c&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:o,onViewportLeave:m}=this.node.getProps(),y=h?o:m;y&&y(d)};return b8(this.node.current,A,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:n}=this.node;["amount","margin","root"].some(S8(s,n))&&this.startObserver()}unmount(){}}function S8({viewport:t={}},{viewport:s={}}={}){return n=>t[n]!==s[n]}const N8={inView:{Feature:w8},tap:{Feature:g8},focus:{Feature:m8},hover:{Feature:p8}},B8={layout:{ProjectionNode:k4,MeasureLayout:O4}},C8={...Ak,...N8,...f8,...B8},Es=CP(C8,PP);var E8=Symbol.for("react.lazy"),Wy=xA[" use ".trim().toString()];function T8(t){return typeof t=="object"&&t!==null&&"then"in t}function H4(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===E8&&"_payload"in t&&T8(t._payload)}function z4(t){const s=I8(t),n=S.forwardRef((r,i)=>{let{children:c,...A}=r;H4(c)&&typeof Wy=="function"&&(c=Wy(c._payload));const u=S.Children.toArray(c),d=u.find(O8);if(d){const h=d.props.children,o=u.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return e.jsx(s,{...A,ref:i,children:S.isValidElement(h)?S.cloneElement(h,void 0,o):null})}return e.jsx(s,{...A,ref:i,children:c})});return n.displayName=`${t}.Slot`,n}var F8=z4("Slot");function I8(t){const s=S.forwardRef((n,r)=>{let{children:i,...c}=n;if(H4(i)&&typeof Wy=="function"&&(i=Wy(i._payload)),S.isValidElement(i)){const A=L8(i),u=U8(c,i.props);return i.type!==S.Fragment&&(u.ref=r?Ch(r,A):A),S.cloneElement(i,u)}return S.Children.count(i)>1?S.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var R8=Symbol("radix.slottable");function O8(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===R8}function U8(t,s){const n={...s};for(const r in s){const i=t[r],c=s[r];/^on[A-Z]/.test(r)?i&&c?n[r]=(...u)=>{const d=c(...u);return i(...u),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...c}:r==="className"&&(n[r]=[i,c].filter(Boolean).join(" "))}return{...t,...n}}function L8(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const D8=cx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground shadow-sm border-destructive-border",outline:" border [border-color:var(--button-outline)] shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent",link:"text-primary underline-offset-4 hover:underline"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ce=S.forwardRef(({className:t,variant:s,size:n,asChild:r=!1,...i},c)=>{const A=r?F8:"button";return e.jsx(A,{className:$s(D8({variant:s,size:n,className:t})),ref:c,...i})});Ce.displayName="Button";const Xe=S.forwardRef(({className:t,type:s,...n},r)=>e.jsx("input",{type:s,className:$s("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Xe.displayName="Input";var Q8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_8=Q8.reduce((t,s)=>{const n=z4(`Primitive.${s}`),r=S.forwardRef((i,c)=>{const{asChild:A,...u}=i,d=A?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...u,ref:c})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),M8="Label",K4=S.forwardRef((t,s)=>e.jsx(_8.label,{...t,ref:s,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));K4.displayName=M8;var $4=K4;const P8=cx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),We=S.forwardRef(({className:t,...s},n)=>e.jsx($4,{ref:n,className:$s(P8(),t),...s}));We.displayName=$4.displayName;function k8(){const[,t]=co(),{login:s}=fi(),{login:n}=ix(),{toast:r}=ua(),[i,c]=S.useState(!1),[A,u]=S.useState(""),[d,h]=S.useState(""),o=async m=>{m.preventDefault(),c(!0);try{const{user:y,token:p}=await n(A,d);switch(s({id:y.id,username:y.username,role:y.role,fullName:y.fullName,approved:y.approved,shopId:y.role==="supplier"?y.shopId:void 0}),y.role){case"admin":t("/admin/dashboard");break;case"software_team":t("/software/dashboard");break;case"purchase_team":t("/purchase/dashboard");break;case"supplier":t("/supplier/dashboard");break;case"pre_sales":t("/create-project");break;default:t("/dashboard")}}catch(y){const p=y?.message||"Invalid email or password. Account must exist.",j=String(p).toLowerCase();if(j.includes("under review")||j.includes("wait for approval")||j.includes("rejected")){t("/supplier-pending"),c(!1);return}r({title:"Login Failed",description:p,variant:"destructive"})}finally{c(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-100 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gray-100 rounded-full blur-3xl"}),e.jsx(Es.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10",children:e.jsxs(Ms,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(Ar,{className:"space-y-2 pb-6 border-b border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-600 flex items-center justify-center text-white",children:e.jsx(wl,{className:"h-6 w-6"})})}),e.jsx(ur,{className:"text-center text-2xl font-bold text-gray-900",children:"BOQ Management System"}),e.jsx(sa,{className:"text-center text-gray-600",children:"Login to access your dashboard"})]}),e.jsx(Ws,{className:"pt-6",children:e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx(Xe,{type:"email",placeholder:"name@example.com",value:A,onChange:m=>u(m.target.value),required:!0,className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{className:"text-sm font-medium text-gray-700",children:"Password"}),e.jsx(Xe,{type:"password",placeholder:"",value:d,onChange:m=>h(m.target.value),required:!0,className:"h-11"})]}),e.jsx(Ce,{type:"submit",className:"w-full h-11 text-base font-semibold bg-blue-600 hover:bg-blue-700",disabled:i,children:i?"Logging in...":"Login"})]})}),e.jsxs(Eh,{className:"flex flex-col gap-4 border-t border-gray-100 pt-6 bg-gray-50/50",children:[e.jsx("div",{className:"text-center text-sm text-gray-600",children:e.jsx(ia,{href:"/forgot-password",className:"text-blue-600 hover:underline font-medium",children:"Forgot Password?"})}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(ia,{href:"/signup",className:"text-blue-600 hover:underline font-medium",children:"Sign Up"})]})]})]})})]})}const Cl=S.forwardRef(({className:t,...s},n)=>e.jsx("textarea",{className:$s("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...s}));Cl.displayName="Textarea";function Lb(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}function Bf(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}function JS(t){const s=H8(t),n=S.forwardRef((r,i)=>{const{children:c,...A}=r,u=S.Children.toArray(c),d=u.find(K8);if(d){const h=d.props.children,o=u.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return e.jsx(s,{...A,ref:i,children:S.isValidElement(h)?S.cloneElement(h,void 0,o):null})}return e.jsx(s,{...A,ref:i,children:c})});return n.displayName=`${t}.Slot`,n}function H8(t){const s=S.forwardRef((n,r)=>{const{children:i,...c}=n;if(S.isValidElement(i)){const A=V8(i),u=$8(c,i.props);return i.type!==S.Fragment&&(u.ref=r?Ch(r,A):A),S.cloneElement(i,u)}return S.Children.count(i)>1?S.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var z8=Symbol("radix.slottable");function K8(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===z8}function $8(t,s){const n={...s};for(const r in s){const i=t[r],c=s[r];/^on[A-Z]/.test(r)?i&&c?n[r]=(...u)=>{const d=c(...u);return i(...u),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...c}:r==="className"&&(n[r]=[i,c].filter(Boolean).join(" "))}return{...t,...n}}function V8(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function V4(t){const s=t+"CollectionProvider",[n,r]=Cc(s),[i,c]=n(s,{collectionRef:{current:null},itemMap:new Map}),A=b=>{const{scope:w,children:B}=b,U=Vo.useRef(null),Q=Vo.useRef(new Map).current;return e.jsx(i,{scope:w,itemMap:Q,collectionRef:U,children:B})};A.displayName=s;const u=t+"CollectionSlot",d=JS(u),h=Vo.forwardRef((b,w)=>{const{scope:B,children:U}=b,Q=c(u,B),k=Pr(w,Q.collectionRef);return e.jsx(d,{ref:k,children:U})});h.displayName=u;const o=t+"CollectionItemSlot",m="data-radix-collection-item",y=JS(o),p=Vo.forwardRef((b,w)=>{const{scope:B,children:U,...Q}=b,k=Vo.useRef(null),K=Pr(w,k),ee=c(o,B);return Vo.useEffect(()=>(ee.itemMap.set(k,{ref:k,...Q}),()=>void ee.itemMap.delete(k))),e.jsx(y,{[m]:"",ref:K,children:U})});p.displayName=o;function j(b){const w=c(t+"CollectionConsumer",b);return Vo.useCallback(()=>{const U=w.collectionRef.current;if(!U)return[];const Q=Array.from(U.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((ee,q)=>Q.indexOf(ee.ref.current)-Q.indexOf(q.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:A,Slot:h,ItemSlot:p},j,r]}var q8=xA[" useInsertionEffect ".trim().toString()]||ei;function G8({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[i,c,A]=W8({defaultProp:s,onChange:n}),u=t!==void 0,d=u?t:i;{const o=S.useRef(t!==void 0);S.useEffect(()=>{const m=o.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),o.current=u},[u,r])}const h=S.useCallback(o=>{if(u){const m=Y8(o)?o(t):o;m!==t&&A.current?.(m)}else c(o)},[u,t,c,A]);return[d,h]}function W8({defaultProp:t,onChange:s}){const[n,r]=S.useState(t),i=S.useRef(n),c=S.useRef(s);return q8(()=>{c.current=s},[s]),S.useEffect(()=>{i.current!==n&&(c.current?.(n),i.current=n)},[n,i]),[n,r,c]}function Y8(t){return typeof t=="function"}var X8=S.createContext(void 0);function Sx(t){const s=S.useContext(X8);return t||s||"ltr"}var tv="rovingFocusGroup.onEntryFocus",J8={bubbles:!1,cancelable:!0},Tm="RovingFocusGroup",[Db,q4,Z8]=V4(Tm),[eH,Nx]=Cc(Tm,[Z8]),[tH,sH]=eH(Tm),G4=S.forwardRef((t,s)=>e.jsx(Db.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Db.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(nH,{...t,ref:s})})}));G4.displayName=Tm;var nH=S.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:c,currentTabStopId:A,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:o=!1,...m}=t,y=S.useRef(null),p=Pr(s,y),j=Sx(c),[b,w]=G8({prop:A,defaultProp:u??null,onChange:d,caller:Tm}),[B,U]=S.useState(!1),Q=Wo(h),k=q4(n),K=S.useRef(!1),[ee,q]=S.useState(0);return S.useEffect(()=>{const G=y.current;if(G)return G.addEventListener(tv,Q),()=>G.removeEventListener(tv,Q)},[Q]),e.jsx(tH,{scope:n,orientation:r,dir:j,loop:i,currentTabStopId:b,onItemFocus:S.useCallback(G=>w(G),[w]),onItemShiftTab:S.useCallback(()=>U(!0),[]),onFocusableItemAdd:S.useCallback(()=>q(G=>G+1),[]),onFocusableItemRemove:S.useCallback(()=>q(G=>G-1),[]),children:e.jsx(gr.div,{tabIndex:B||ee===0?-1:0,"data-orientation":r,...m,ref:p,style:{outline:"none",...t.style},onMouseDown:Bf(t.onMouseDown,()=>{K.current=!0}),onFocus:Bf(t.onFocus,G=>{const W=!K.current;if(G.target===G.currentTarget&&W&&!B){const he=new CustomEvent(tv,J8);if(G.currentTarget.dispatchEvent(he),!he.defaultPrevented){const Z=k().filter(se=>se.focusable),ie=Z.find(se=>se.active),ce=Z.find(se=>se.id===b),de=[ie,ce,...Z].filter(Boolean).map(se=>se.ref.current);X4(de,o)}}K.current=!1}),onBlur:Bf(t.onBlur,()=>U(!1))})})}),W4="RovingFocusGroupItem",Y4=S.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:c,children:A,...u}=t,d=uu(),h=c||d,o=sH(W4,n),m=o.currentTabStopId===h,y=q4(n),{onFocusableItemAdd:p,onFocusableItemRemove:j,currentTabStopId:b}=o;return S.useEffect(()=>{if(r)return p(),()=>j()},[r,p,j]),e.jsx(Db.ItemSlot,{scope:n,id:h,focusable:r,active:i,children:e.jsx(gr.span,{tabIndex:m?0:-1,"data-orientation":o.orientation,...u,ref:s,onMouseDown:Bf(t.onMouseDown,w=>{r?o.onItemFocus(h):w.preventDefault()}),onFocus:Bf(t.onFocus,()=>o.onItemFocus(h)),onKeyDown:Bf(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){o.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const B=iH(w,o.orientation,o.dir);if(B!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let Q=y().filter(k=>k.focusable).map(k=>k.ref.current);if(B==="last")Q.reverse();else if(B==="prev"||B==="next"){B==="prev"&&Q.reverse();const k=Q.indexOf(w.currentTarget);Q=o.loop?oH(Q,k+1):Q.slice(k+1)}setTimeout(()=>X4(Q))}}),children:typeof A=="function"?A({isCurrentTabStop:m,hasTabStop:b!=null}):A})})});Y4.displayName=W4;var rH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function aH(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function iH(t,s,n){const r=aH(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return rH[r]}function X4(t,s=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:s}),document.activeElement!==n))return}function oH(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var J4=G4,Z4=Y4,lH=xA[" useInsertionEffect ".trim().toString()]||ei;function cH({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[i,c,A]=dH({defaultProp:s,onChange:n}),u=t!==void 0,d=u?t:i;{const o=S.useRef(t!==void 0);S.useEffect(()=>{const m=o.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),o.current=u},[u,r])}const h=S.useCallback(o=>{if(u){const m=AH(o)?o(t):o;m!==t&&A.current?.(m)}else c(o)},[u,t,c,A]);return[d,h]}function dH({defaultProp:t,onChange:s}){const[n,r]=S.useState(t),i=S.useRef(n),c=S.useRef(s);return lH(()=>{c.current=s},[s]),S.useEffect(()=>{i.current!==n&&(c.current?.(n),i.current=n)},[n,i]),[n,r,c]}function AH(t){return typeof t=="function"}function hj(t){const s=S.useRef({value:t,previous:t});return S.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var fj="Radio",[uH,eT]=Cc(fj),[hH,fH]=uH(fj),tT=S.forwardRef((t,s)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:c,disabled:A,value:u="on",onCheck:d,form:h,...o}=t,[m,y]=S.useState(null),p=Pr(s,w=>y(w)),j=S.useRef(!1),b=m?h||!!m.closest("form"):!0;return e.jsxs(hH,{scope:n,checked:i,disabled:A,children:[e.jsx(gr.button,{type:"button",role:"radio","aria-checked":i,"data-state":aT(i),"data-disabled":A?"":void 0,disabled:A,value:u,...o,ref:p,onClick:Lb(t.onClick,w=>{i||d?.(),b&&(j.current=w.isPropagationStopped(),j.current||w.stopPropagation())})}),b&&e.jsx(rT,{control:m,bubbles:!j.current,name:r,value:u,checked:i,required:c,disabled:A,form:h,style:{transform:"translateX(-100%)"}})]})});tT.displayName=fj;var sT="RadioIndicator",nT=S.forwardRef((t,s)=>{const{__scopeRadio:n,forceMount:r,...i}=t,c=fH(sT,n);return e.jsx(vA,{present:r||c.checked,children:e.jsx(gr.span,{"data-state":aT(c.checked),"data-disabled":c.disabled?"":void 0,...i,ref:s})})});nT.displayName=sT;var pH="RadioBubbleInput",rT=S.forwardRef(({__scopeRadio:t,control:s,checked:n,bubbles:r=!0,...i},c)=>{const A=S.useRef(null),u=Pr(A,c),d=hj(n),h=E1(s);return S.useEffect(()=>{const o=A.current;if(!o)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==n&&p){const j=new Event("click",{bubbles:r});p.call(o,n),o.dispatchEvent(j)}},[d,n,r]),e.jsx(gr.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:u,style:{...i.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});rT.displayName=pH;function aT(t){return t?"checked":"unchecked"}var mH=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Bx="RadioGroup",[gH]=Cc(Bx,[Nx,eT]),iT=Nx(),oT=eT(),[yH,xH]=gH(Bx),lT=S.forwardRef((t,s)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:c,required:A=!1,disabled:u=!1,orientation:d,dir:h,loop:o=!0,onValueChange:m,...y}=t,p=iT(n),j=Sx(h),[b,w]=cH({prop:c,defaultProp:i??null,onChange:m,caller:Bx});return e.jsx(yH,{scope:n,name:r,required:A,disabled:u,value:b,onValueChange:w,children:e.jsx(J4,{asChild:!0,...p,orientation:d,dir:j,loop:o,children:e.jsx(gr.div,{role:"radiogroup","aria-required":A,"aria-orientation":d,"data-disabled":u?"":void 0,dir:j,...y,ref:s})})})});lT.displayName=Bx;var cT="RadioGroupItem",dT=S.forwardRef((t,s)=>{const{__scopeRadioGroup:n,disabled:r,...i}=t,c=xH(cT,n),A=c.disabled||r,u=iT(n),d=oT(n),h=S.useRef(null),o=Pr(s,h),m=c.value===i.value,y=S.useRef(!1);return S.useEffect(()=>{const p=b=>{mH.includes(b.key)&&(y.current=!0)},j=()=>y.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",j),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",j)}},[]),e.jsx(Z4,{asChild:!0,...u,focusable:!A,active:m,children:e.jsx(tT,{disabled:A,required:c.required,checked:m,...d,...i,name:c.name,ref:o,onCheck:()=>c.onValueChange(i.value),onKeyDown:Lb(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:Lb(i.onFocus,()=>{y.current&&h.current?.click()})})})});dT.displayName=cT;var vH="RadioGroupIndicator",AT=S.forwardRef((t,s)=>{const{__scopeRadioGroup:n,...r}=t,i=oT(n);return e.jsx(nT,{...i,...r,ref:s})});AT.displayName=vH;var uT=lT,hT=dT,bH=AT;const fT=S.forwardRef(({className:t,...s},n)=>e.jsx(uT,{className:$s("grid gap-2",t),...s,ref:n}));fT.displayName=uT.displayName;const pT=S.forwardRef(({className:t,...s},n)=>e.jsx(hT,{ref:n,className:$s("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(bH,{className:"flex items-center justify-center",children:e.jsx(aL,{className:"h-3.5 w-3.5 fill-primary"})})}));pT.displayName=hT.displayName;function ZS(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}var jH=xA[" useInsertionEffect ".trim().toString()]||ei;function wH({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[i,c,A]=SH({defaultProp:s,onChange:n}),u=t!==void 0,d=u?t:i;{const o=S.useRef(t!==void 0);S.useEffect(()=>{const m=o.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),o.current=u},[u,r])}const h=S.useCallback(o=>{if(u){const m=NH(o)?o(t):o;m!==t&&A.current?.(m)}else c(o)},[u,t,c,A]);return[d,h]}function SH({defaultProp:t,onChange:s}){const[n,r]=S.useState(t),i=S.useRef(n),c=S.useRef(s);return jH(()=>{c.current=s},[s]),S.useEffect(()=>{i.current!==n&&(c.current?.(n),i.current=n)},[n,i]),[n,r,c]}function NH(t){return typeof t=="function"}var Cx="Checkbox",[BH]=Cc(Cx),[CH,pj]=BH(Cx);function EH(t){const{__scopeCheckbox:s,checked:n,children:r,defaultChecked:i,disabled:c,form:A,name:u,onCheckedChange:d,required:h,value:o="on",internal_do_not_use_render:m}=t,[y,p]=wH({prop:n,defaultProp:i??!1,onChange:d,caller:Cx}),[j,b]=S.useState(null),[w,B]=S.useState(null),U=S.useRef(!1),Q=j?!!A||!!j.closest("form"):!0,k={checked:y,disabled:c,setChecked:p,control:j,setControl:b,name:u,form:A,value:o,hasConsumerStoppedPropagationRef:U,required:h,defaultChecked:hu(i)?!1:i,isFormControl:Q,bubbleInput:w,setBubbleInput:B};return e.jsx(CH,{scope:s,...k,children:TH(m)?m(k):r})}var mT="CheckboxTrigger",gT=S.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:n,...r},i)=>{const{control:c,value:A,disabled:u,checked:d,required:h,setControl:o,setChecked:m,hasConsumerStoppedPropagationRef:y,isFormControl:p,bubbleInput:j}=pj(mT,t),b=Pr(i,o),w=S.useRef(d);return S.useEffect(()=>{const B=c?.form;if(B){const U=()=>m(w.current);return B.addEventListener("reset",U),()=>B.removeEventListener("reset",U)}},[c,m]),e.jsx(gr.button,{type:"button",role:"checkbox","aria-checked":hu(d)?"mixed":d,"aria-required":h,"data-state":jT(d),"data-disabled":u?"":void 0,disabled:u,value:A,...r,ref:b,onKeyDown:ZS(s,B=>{B.key==="Enter"&&B.preventDefault()}),onClick:ZS(n,B=>{m(U=>hu(U)?!0:!U),j&&p&&(y.current=B.isPropagationStopped(),y.current||B.stopPropagation())})})});gT.displayName=mT;var mj=S.forwardRef((t,s)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:c,required:A,disabled:u,value:d,onCheckedChange:h,form:o,...m}=t;return e.jsx(EH,{__scopeCheckbox:n,checked:i,defaultChecked:c,disabled:u,required:A,onCheckedChange:h,name:r,form:o,value:d,internal_do_not_use_render:({isFormControl:y})=>e.jsxs(e.Fragment,{children:[e.jsx(gT,{...m,ref:s,__scopeCheckbox:n}),y&&e.jsx(bT,{__scopeCheckbox:n})]})})});mj.displayName=Cx;var yT="CheckboxIndicator",xT=S.forwardRef((t,s)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,c=pj(yT,n);return e.jsx(vA,{present:r||hu(c.checked)||c.checked===!0,children:e.jsx(gr.span,{"data-state":jT(c.checked),"data-disabled":c.disabled?"":void 0,...i,ref:s,style:{pointerEvents:"none",...t.style}})})});xT.displayName=yT;var vT="CheckboxBubbleInput",bT=S.forwardRef(({__scopeCheckbox:t,...s},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:c,defaultChecked:A,required:u,disabled:d,name:h,value:o,form:m,bubbleInput:y,setBubbleInput:p}=pj(vT,t),j=Pr(n,p),b=hj(c),w=E1(r);S.useEffect(()=>{const U=y;if(!U)return;const Q=window.HTMLInputElement.prototype,K=Object.getOwnPropertyDescriptor(Q,"checked").set,ee=!i.current;if(b!==c&&K){const q=new Event("click",{bubbles:ee});U.indeterminate=hu(c),K.call(U,hu(c)?!1:c),U.dispatchEvent(q)}},[y,b,c,i]);const B=S.useRef(hu(c)?!1:c);return e.jsx(gr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:A??B.current,required:u,disabled:d,name:h,value:o,form:m,...s,tabIndex:-1,ref:j,style:{...s.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});bT.displayName=vT;function TH(t){return typeof t=="function"}function hu(t){return t==="indeterminate"}function jT(t){return hu(t)?"indeterminate":t?"checked":"unchecked"}const Tn=S.forwardRef(({className:t,...s},n)=>e.jsx(mj,{ref:n,className:$s("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(xT,{className:$s("grid place-content-center text-current"),children:e.jsx(v1,{className:"h-4 w-4"})})}));Tn.displayName=mj.displayName;function FH(){const[,t]=co(),{signup:s}=ix(),{toast:n}=ua(),[r,i]=S.useState(!1),[c,A]=S.useState(null),[u,d]=S.useState({fullName:"",email:"",mobileNumber:"",password:"",confirmPassword:"",companyName:"",gstNumber:"",businessAddress:"",department:"",employeeCode:""}),[h,o]=S.useState(!1),m=[{value:"admin",label:"Admin",icon:x2,description:"Full system access"},{value:"software_team",label:"Software Team",icon:A5,description:"Technical management"},{value:"purchase_team",label:"Purchase Team",icon:_y,description:"Procurement management"},{value:"user_client",label:"User / Client",icon:YL,description:"General system access"},{value:"pre_sales",label:"Pre-Sales",icon:_y,description:"Create projects and BOQs"},{value:"contractor",label:"Contractor",icon:x2,description:"Access sub-categories and estimators"},{value:"supplier",label:"Supplier",icon:wl,description:"Material supplier"}],y=()=>c?!u.fullName.trim()||!u.email.trim()||!u.mobileNumber.trim()?(n({title:"Error",description:"All basic fields are required",variant:"destructive"}),!1):!u.password||u.password!==u.confirmPassword?(n({title:"Error",description:"Passwords do not match",variant:"destructive"}),!1):c==="supplier"&&(!u.companyName||!u.gstNumber||!u.businessAddress)?(n({title:"Error",description:"Supplier details are required",variant:"destructive"}),!1):h?!0:(n({title:"Error",description:"Please confirm the information",variant:"destructive"}),!1):(n({title:"Error",description:"Please select a role",variant:"destructive"}),!1),p=async j=>{if(j.preventDefault(),!!y()){i(!0);try{if(await s(u.email,u.password,c,u.fullName,u.mobileNumber,u.department,u.employeeCode,u.companyName,u.gstNumber,u.businessAddress),c==="supplier"){n({title:"Request Submitted",description:"Your supplier account is waiting for admin approval."}),t("/pending-approval");return}n({title:"Account Created",description:"Please login using your email and password"}),t("/")}catch(b){const w=b?.message||"Create account failed";n({title:"Error",description:w,variant:"destructive"})}finally{i(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:e.jsx(Es.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl",children:e.jsxs(Ms,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(Ar,{className:"text-center pb-6 border-b",children:[e.jsx(ur,{className:"text-3xl font-bold",children:"Create Your Account"}),e.jsx(sa,{children:"Register to access the BOQ Management System"})]}),e.jsx(Ws,{className:"pt-6",children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsx(fT,{value:c||"",onValueChange:j=>A(j),className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(j=>e.jsxs("div",{children:[e.jsx(pT,{value:j.value,id:j.value,className:"peer sr-only"}),e.jsxs(We,{htmlFor:j.value,className:"flex flex-col items-center justify-center rounded-lg border-2 p-4 cursor-pointer peer-data-[state=checked]:border-blue-500",children:[e.jsx(j.icon,{className:"h-6 w-6 mb-2"}),e.jsx("div",{className:"font-medium",children:j.label}),e.jsx("div",{className:"text-xs text-gray-500",children:j.description})]})]},j.value))}),e.jsx(Xe,{placeholder:"Full Name",value:u.fullName,onChange:j=>d({...u,fullName:j.target.value})}),e.jsx(Xe,{placeholder:"Mobile Number",value:u.mobileNumber,onChange:j=>d({...u,mobileNumber:j.target.value})}),e.jsx(Xe,{type:"email",placeholder:"Email",value:u.email,onChange:j=>d({...u,email:j.target.value})}),e.jsx(Xe,{type:"password",placeholder:"Password",value:u.password,onChange:j=>d({...u,password:j.target.value})}),e.jsx(Xe,{type:"password",placeholder:"Confirm Password",value:u.confirmPassword,onChange:j=>d({...u,confirmPassword:j.target.value})}),c==="supplier"&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{placeholder:"Company Name",value:u.companyName,onChange:j=>d({...u,companyName:j.target.value})}),e.jsx(Xe,{placeholder:"GST Number",value:u.gstNumber,onChange:j=>d({...u,gstNumber:j.target.value})}),e.jsx(Cl,{placeholder:"Business Address",value:u.businessAddress,onChange:j=>d({...u,businessAddress:j.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tn,{checked:h,onCheckedChange:j=>o(j===!0)}),e.jsx(We,{children:"I confirm the above information is correct"})]}),e.jsx(Ce,{type:"submit",disabled:r,className:"w-full",children:r?"Creating...":"Create Account"})]})}),e.jsx(Eh,{className:"justify-center",children:e.jsx(ia,{href:"/",className:"text-blue-600 hover:underline",children:"Already have an account? Login"})})]})})})}function IH(){const[,t]=co(),{toast:s}=ua(),[n,r]=S.useState(!1),[i,c]=S.useState(""),A=async u=>{if(u.preventDefault(),!i.trim()){s({title:"Error",description:"Email address is required",variant:"destructive"});return}r(!0);try{if((await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})})).ok)s({title:"Success",description:"Password reset link sent to your email address"}),t("/");else throw new Error("Failed to send reset link")}catch{s({title:"Error",description:"Failed to send reset link. Please try again.",variant:"destructive"})}finally{r(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-100 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gray-100 rounded-full blur-3xl"}),e.jsx(Es.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10",children:e.jsxs(Ms,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(Ar,{className:"space-y-2 pb-6 border-b border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-600 flex items-center justify-center text-white",children:e.jsx(wl,{className:"h-6 w-6"})})}),e.jsx(ur,{className:"text-center text-2xl font-bold text-gray-900",children:"Forgot Password"}),e.jsx(sa,{className:"text-center text-gray-600",children:"Enter your registered email address to receive a password reset link."})]}),e.jsx(Ws,{className:"pt-6",children:e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx(Xe,{type:"email",placeholder:"name@example.com",value:i,onChange:u=>c(u.target.value),required:!0,className:"h-11"})]}),e.jsx(Ce,{type:"submit",className:"w-full h-11 text-base font-semibold bg-blue-600 hover:bg-blue-700",disabled:n,children:n?"Sending...":"Send Reset Link"})]})}),e.jsx(Eh,{className:"justify-center border-t border-gray-100 pt-6 bg-gray-50/50",children:e.jsxs(ia,{href:"/",className:"flex items-center gap-2 text-blue-600 hover:underline font-medium",children:[e.jsx(wf,{className:"h-4 w-4"}),"Back to Login"]})})]})})]})}function wT(t,s){return function(){return t.apply(s,arguments)}}const{toString:RH}=Object.prototype,{getPrototypeOf:gj}=Object,{iterator:Ex,toStringTag:ST}=Symbol,Tx=(t=>s=>{const n=RH.call(s);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),td=t=>(t=t.toLowerCase(),s=>Tx(s)===t),Fx=t=>s=>typeof s===t,{isArray:zf}=Array,Uf=Fx("undefined");function Fm(t){return t!==null&&!Uf(t)&&t.constructor!==null&&!Uf(t.constructor)&&El(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const NT=td("ArrayBuffer");function OH(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&NT(t.buffer),s}const UH=Fx("string"),El=Fx("function"),BT=Fx("number"),Im=t=>t!==null&&typeof t=="object",LH=t=>t===!0||t===!1,yy=t=>{if(Tx(t)!=="object")return!1;const s=gj(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(ST in t)&&!(Ex in t)},DH=t=>{if(!Im(t)||Fm(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},QH=td("Date"),_H=td("File"),MH=td("Blob"),PH=td("FileList"),kH=t=>Im(t)&&El(t.pipe),HH=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||El(t.append)&&((s=Tx(t))==="formdata"||s==="object"&&El(t.toString)&&t.toString()==="[object FormData]"))},zH=td("URLSearchParams"),[KH,$H,VH,qH]=["ReadableStream","Request","Response","Headers"].map(td),GH=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Rm(t,s,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),zf(t))for(r=0,i=t.length;r<i;r++)s.call(null,t[r],r,t);else{if(Fm(t))return;const c=n?Object.getOwnPropertyNames(t):Object.keys(t),A=c.length;let u;for(r=0;r<A;r++)u=c[r],s.call(null,t[u],u,t)}}function CT(t,s){if(Fm(t))return null;s=s.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],s===i.toLowerCase())return i;return null}const oh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ET=t=>!Uf(t)&&t!==oh;function Qb(){const{caseless:t,skipUndefined:s}=ET(this)&&this||{},n={},r=(i,c)=>{if(c==="__proto__"||c==="constructor"||c==="prototype")return;const A=t&&CT(n,c)||c;yy(n[A])&&yy(i)?n[A]=Qb(n[A],i):yy(i)?n[A]=Qb({},i):zf(i)?n[A]=i.slice():(!s||!Uf(i))&&(n[A]=i)};for(let i=0,c=arguments.length;i<c;i++)arguments[i]&&Rm(arguments[i],r);return n}const WH=(t,s,n,{allOwnKeys:r}={})=>(Rm(s,(i,c)=>{n&&El(i)?Object.defineProperty(t,c,{value:wT(i,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,c,{value:i,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),t),YH=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),XH=(t,s,n,r)=>{t.prototype=Object.create(s.prototype,r),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:s.prototype}),n&&Object.assign(t.prototype,n)},JH=(t,s,n,r)=>{let i,c,A;const u={};if(s=s||{},t==null)return s;do{for(i=Object.getOwnPropertyNames(t),c=i.length;c-- >0;)A=i[c],(!r||r(A,t,s))&&!u[A]&&(s[A]=t[A],u[A]=!0);t=n!==!1&&gj(t)}while(t&&(!n||n(t,s))&&t!==Object.prototype);return s},ZH=(t,s,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=s.length;const r=t.indexOf(s,n);return r!==-1&&r===n},e7=t=>{if(!t)return null;if(zf(t))return t;let s=t.length;if(!BT(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=t[s];return n},t7=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&gj(Uint8Array)),s7=(t,s)=>{const r=(t&&t[Ex]).call(t);let i;for(;(i=r.next())&&!i.done;){const c=i.value;s.call(t,c[0],c[1])}},n7=(t,s)=>{let n;const r=[];for(;(n=t.exec(s))!==null;)r.push(n);return r},r7=td("HTMLFormElement"),a7=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),eN=(({hasOwnProperty:t})=>(s,n)=>t.call(s,n))(Object.prototype),i7=td("RegExp"),TT=(t,s)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Rm(n,(i,c)=>{let A;(A=s(i,c,t))!==!1&&(r[c]=A||i)}),Object.defineProperties(t,r)},o7=t=>{TT(t,(s,n)=>{if(El(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(El(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},l7=(t,s)=>{const n={},r=i=>{i.forEach(c=>{n[c]=!0})};return zf(t)?r(t):r(String(t).split(s)),n},c7=()=>{},d7=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function A7(t){return!!(t&&El(t.append)&&t[ST]==="FormData"&&t[Ex])}const u7=t=>{const s=new Array(10),n=(r,i)=>{if(Im(r)){if(s.indexOf(r)>=0)return;if(Fm(r))return r;if(!("toJSON"in r)){s[i]=r;const c=zf(r)?[]:{};return Rm(r,(A,u)=>{const d=n(A,i+1);!Uf(d)&&(c[u]=d)}),s[i]=void 0,c}}return r};return n(t,0)},h7=td("AsyncFunction"),f7=t=>t&&(Im(t)||El(t))&&El(t.then)&&El(t.catch),FT=((t,s)=>t?setImmediate:s?((n,r)=>(oh.addEventListener("message",({source:i,data:c})=>{i===oh&&c===n&&r.length&&r.shift()()},!1),i=>{r.push(i),oh.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",El(oh.postMessage)),p7=typeof queueMicrotask<"u"?queueMicrotask.bind(oh):typeof process<"u"&&process.nextTick||FT,m7=t=>t!=null&&El(t[Ex]),Wt={isArray:zf,isArrayBuffer:NT,isBuffer:Fm,isFormData:HH,isArrayBufferView:OH,isString:UH,isNumber:BT,isBoolean:LH,isObject:Im,isPlainObject:yy,isEmptyObject:DH,isReadableStream:KH,isRequest:$H,isResponse:VH,isHeaders:qH,isUndefined:Uf,isDate:QH,isFile:_H,isBlob:MH,isRegExp:i7,isFunction:El,isStream:kH,isURLSearchParams:zH,isTypedArray:t7,isFileList:PH,forEach:Rm,merge:Qb,extend:WH,trim:GH,stripBOM:YH,inherits:XH,toFlatObject:JH,kindOf:Tx,kindOfTest:td,endsWith:ZH,toArray:e7,forEachEntry:s7,matchAll:n7,isHTMLForm:r7,hasOwnProperty:eN,hasOwnProp:eN,reduceDescriptors:TT,freezeMethods:o7,toObjectSet:l7,toCamelCase:a7,noop:c7,toFiniteNumber:d7,findKey:CT,global:oh,isContextDefined:ET,isSpecCompliantForm:A7,toJSONObject:u7,isAsyncFn:h7,isThenable:f7,setImmediate:FT,asap:p7,isIterable:m7};let Vn=class IT extends Error{static from(s,n,r,i,c,A){const u=new IT(s.message,n||s.code,r,i,c);return u.cause=s,u.name=s.name,A&&Object.assign(u,A),u}constructor(s,n,r,i,c){super(s),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),r&&(this.config=r),i&&(this.request=i),c&&(this.response=c,this.status=c.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Wt.toJSONObject(this.config),code:this.code,status:this.status}}};Vn.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Vn.ERR_BAD_OPTION="ERR_BAD_OPTION";Vn.ECONNABORTED="ECONNABORTED";Vn.ETIMEDOUT="ETIMEDOUT";Vn.ERR_NETWORK="ERR_NETWORK";Vn.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Vn.ERR_DEPRECATED="ERR_DEPRECATED";Vn.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Vn.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Vn.ERR_CANCELED="ERR_CANCELED";Vn.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Vn.ERR_INVALID_URL="ERR_INVALID_URL";const g7=null;function _b(t){return Wt.isPlainObject(t)||Wt.isArray(t)}function RT(t){return Wt.endsWith(t,"[]")?t.slice(0,-2):t}function tN(t,s,n){return t?t.concat(s).map(function(i,c){return i=RT(i),!n&&c?"["+i+"]":i}).join(n?".":""):s}function y7(t){return Wt.isArray(t)&&!t.some(_b)}const x7=Wt.toFlatObject(Wt,{},null,function(s){return/^is[A-Z]/.test(s)});function Ix(t,s,n){if(!Wt.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,n=Wt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,w){return!Wt.isUndefined(w[b])});const r=n.metaTokens,i=n.visitor||o,c=n.dots,A=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&Wt.isSpecCompliantForm(s);if(!Wt.isFunction(i))throw new TypeError("visitor must be a function");function h(j){if(j===null)return"";if(Wt.isDate(j))return j.toISOString();if(Wt.isBoolean(j))return j.toString();if(!d&&Wt.isBlob(j))throw new Vn("Blob is not supported. Use a Buffer instead.");return Wt.isArrayBuffer(j)||Wt.isTypedArray(j)?d&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function o(j,b,w){let B=j;if(j&&!w&&typeof j=="object"){if(Wt.endsWith(b,"{}"))b=r?b:b.slice(0,-2),j=JSON.stringify(j);else if(Wt.isArray(j)&&y7(j)||(Wt.isFileList(j)||Wt.endsWith(b,"[]"))&&(B=Wt.toArray(j)))return b=RT(b),B.forEach(function(Q,k){!(Wt.isUndefined(Q)||Q===null)&&s.append(A===!0?tN([b],k,c):A===null?b:b+"[]",h(Q))}),!1}return _b(j)?!0:(s.append(tN(w,b,c),h(j)),!1)}const m=[],y=Object.assign(x7,{defaultVisitor:o,convertValue:h,isVisitable:_b});function p(j,b){if(!Wt.isUndefined(j)){if(m.indexOf(j)!==-1)throw Error("Circular reference detected in "+b.join("."));m.push(j),Wt.forEach(j,function(B,U){(!(Wt.isUndefined(B)||B===null)&&i.call(s,B,Wt.isString(U)?U.trim():U,b,y))===!0&&p(B,b?b.concat(U):[U])}),m.pop()}}if(!Wt.isObject(t))throw new TypeError("data must be an object");return p(t),s}function sN(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function yj(t,s){this._pairs=[],t&&Ix(t,this,s)}const OT=yj.prototype;OT.append=function(s,n){this._pairs.push([s,n])};OT.toString=function(s){const n=s?function(r){return s.call(this,r,sN)}:sN;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function v7(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function UT(t,s,n){if(!s)return t;const r=n&&n.encode||v7,i=Wt.isFunction(n)?{serialize:n}:n,c=i&&i.serialize;let A;if(c?A=c(s,i):A=Wt.isURLSearchParams(s)?s.toString():new yj(s,i).toString(r),A){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+A}return t}class nN{constructor(){this.handlers=[]}use(s,n,r){return this.handlers.push({fulfilled:s,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){Wt.forEach(this.handlers,function(r){r!==null&&s(r)})}}const xj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},b7=typeof URLSearchParams<"u"?URLSearchParams:yj,j7=typeof FormData<"u"?FormData:null,w7=typeof Blob<"u"?Blob:null,S7={isBrowser:!0,classes:{URLSearchParams:b7,FormData:j7,Blob:w7},protocols:["http","https","file","blob","url","data"]},vj=typeof window<"u"&&typeof document<"u",Mb=typeof navigator=="object"&&navigator||void 0,N7=vj&&(!Mb||["ReactNative","NativeScript","NS"].indexOf(Mb.product)<0),B7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",C7=vj&&window.location.href||"http://localhost",E7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:vj,hasStandardBrowserEnv:N7,hasStandardBrowserWebWorkerEnv:B7,navigator:Mb,origin:C7},Symbol.toStringTag,{value:"Module"})),qo={...E7,...S7};function T7(t,s){return Ix(t,new qo.classes.URLSearchParams,{visitor:function(n,r,i,c){return qo.isNode&&Wt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...s})}function F7(t){return Wt.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function I7(t){const s={},n=Object.keys(t);let r;const i=n.length;let c;for(r=0;r<i;r++)c=n[r],s[c]=t[c];return s}function LT(t){function s(n,r,i,c){let A=n[c++];if(A==="__proto__")return!0;const u=Number.isFinite(+A),d=c>=n.length;return A=!A&&Wt.isArray(i)?i.length:A,d?(Wt.hasOwnProp(i,A)?i[A]=[i[A],r]:i[A]=r,!u):((!i[A]||!Wt.isObject(i[A]))&&(i[A]=[]),s(n,r,i[A],c)&&Wt.isArray(i[A])&&(i[A]=I7(i[A])),!u)}if(Wt.isFormData(t)&&Wt.isFunction(t.entries)){const n={};return Wt.forEachEntry(t,(r,i)=>{s(F7(r),i,n,0)}),n}return null}function R7(t,s,n){if(Wt.isString(t))try{return(s||JSON.parse)(t),Wt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Om={transitional:xj,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,c=Wt.isObject(s);if(c&&Wt.isHTMLForm(s)&&(s=new FormData(s)),Wt.isFormData(s))return i?JSON.stringify(LT(s)):s;if(Wt.isArrayBuffer(s)||Wt.isBuffer(s)||Wt.isStream(s)||Wt.isFile(s)||Wt.isBlob(s)||Wt.isReadableStream(s))return s;if(Wt.isArrayBufferView(s))return s.buffer;if(Wt.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let u;if(c){if(r.indexOf("application/x-www-form-urlencoded")>-1)return T7(s,this.formSerializer).toString();if((u=Wt.isFileList(s))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Ix(u?{"files[]":s}:s,d&&new d,this.formSerializer)}}return c||i?(n.setContentType("application/json",!1),R7(s)):s}],transformResponse:[function(s){const n=this.transitional||Om.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Wt.isResponse(s)||Wt.isReadableStream(s))return s;if(s&&Wt.isString(s)&&(r&&!this.responseType||i)){const A=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(s,this.parseReviver)}catch(u){if(A)throw u.name==="SyntaxError"?Vn.from(u,Vn.ERR_BAD_RESPONSE,this,null,this.response):u}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qo.classes.FormData,Blob:qo.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Wt.forEach(["delete","get","head","post","put","patch"],t=>{Om.headers[t]={}});const O7=Wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),U7=t=>{const s={};let n,r,i;return t&&t.split(`
`).forEach(function(A){i=A.indexOf(":"),n=A.substring(0,i).trim().toLowerCase(),r=A.substring(i+1).trim(),!(!n||s[n]&&O7[n])&&(n==="set-cookie"?s[n]?s[n].push(r):s[n]=[r]:s[n]=s[n]?s[n]+", "+r:r)}),s},rN=Symbol("internals");function _p(t){return t&&String(t).trim().toLowerCase()}function xy(t){return t===!1||t==null?t:Wt.isArray(t)?t.map(xy):String(t)}function L7(t){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)s[r[1]]=r[2];return s}const D7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function sv(t,s,n,r,i){if(Wt.isFunction(r))return r.call(this,s,n);if(i&&(s=n),!!Wt.isString(s)){if(Wt.isString(r))return s.indexOf(r)!==-1;if(Wt.isRegExp(r))return r.test(s)}}function Q7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,r)=>n.toUpperCase()+r)}function _7(t,s){const n=Wt.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,c,A){return this[r].call(this,s,i,c,A)},configurable:!0})})}let Tl=class{constructor(s){s&&this.set(s)}set(s,n,r){const i=this;function c(u,d,h){const o=_p(d);if(!o)throw new Error("header name must be a non-empty string");const m=Wt.findKey(i,o);(!m||i[m]===void 0||h===!0||h===void 0&&i[m]!==!1)&&(i[m||d]=xy(u))}const A=(u,d)=>Wt.forEach(u,(h,o)=>c(h,o,d));if(Wt.isPlainObject(s)||s instanceof this.constructor)A(s,n);else if(Wt.isString(s)&&(s=s.trim())&&!D7(s))A(U7(s),n);else if(Wt.isObject(s)&&Wt.isIterable(s)){let u={},d,h;for(const o of s){if(!Wt.isArray(o))throw TypeError("Object iterator must return a key-value pair");u[h=o[0]]=(d=u[h])?Wt.isArray(d)?[...d,o[1]]:[d,o[1]]:o[1]}A(u,n)}else s!=null&&c(n,s,r);return this}get(s,n){if(s=_p(s),s){const r=Wt.findKey(this,s);if(r){const i=this[r];if(!n)return i;if(n===!0)return L7(i);if(Wt.isFunction(n))return n.call(this,i,r);if(Wt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=_p(s),s){const r=Wt.findKey(this,s);return!!(r&&this[r]!==void 0&&(!n||sv(this,this[r],r,n)))}return!1}delete(s,n){const r=this;let i=!1;function c(A){if(A=_p(A),A){const u=Wt.findKey(r,A);u&&(!n||sv(r,r[u],u,n))&&(delete r[u],i=!0)}}return Wt.isArray(s)?s.forEach(c):c(s),i}clear(s){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const c=n[r];(!s||sv(this,this[c],c,s,!0))&&(delete this[c],i=!0)}return i}normalize(s){const n=this,r={};return Wt.forEach(this,(i,c)=>{const A=Wt.findKey(r,c);if(A){n[A]=xy(i),delete n[c];return}const u=s?Q7(c):String(c).trim();u!==c&&delete n[c],n[u]=xy(i),r[u]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return Wt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=s&&Wt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const r=new this(s);return n.forEach(i=>r.set(i)),r}static accessor(s){const r=(this[rN]=this[rN]={accessors:{}}).accessors,i=this.prototype;function c(A){const u=_p(A);r[u]||(_7(i,A),r[u]=!0)}return Wt.isArray(s)?s.forEach(c):c(s),this}};Tl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Wt.reduceDescriptors(Tl.prototype,({value:t},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[n]=r}}});Wt.freezeMethods(Tl);function nv(t,s){const n=this||Om,r=s||n,i=Tl.from(r.headers);let c=r.data;return Wt.forEach(t,function(u){c=u.call(n,c,i.normalize(),s?s.status:void 0)}),i.normalize(),c}function DT(t){return!!(t&&t.__CANCEL__)}let Um=class extends Vn{constructor(s,n,r){super(s??"canceled",Vn.ERR_CANCELED,n,r),this.name="CanceledError",this.__CANCEL__=!0}};function QT(t,s,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):s(new Vn("Request failed with status code "+n.status,[Vn.ERR_BAD_REQUEST,Vn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function M7(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function P7(t,s){t=t||10;const n=new Array(t),r=new Array(t);let i=0,c=0,A;return s=s!==void 0?s:1e3,function(d){const h=Date.now(),o=r[c];A||(A=h),n[i]=d,r[i]=h;let m=c,y=0;for(;m!==i;)y+=n[m++],m=m%t;if(i=(i+1)%t,i===c&&(c=(c+1)%t),h-A<s)return;const p=o&&h-o;return p?Math.round(y*1e3/p):void 0}}function k7(t,s){let n=0,r=1e3/s,i,c;const A=(h,o=Date.now())=>{n=o,i=null,c&&(clearTimeout(c),c=null),t(...h)};return[(...h)=>{const o=Date.now(),m=o-n;m>=r?A(h,o):(i=h,c||(c=setTimeout(()=>{c=null,A(i)},r-m)))},()=>i&&A(i)]}const Yy=(t,s,n=3)=>{let r=0;const i=P7(50,250);return k7(c=>{const A=c.loaded,u=c.lengthComputable?c.total:void 0,d=A-r,h=i(d),o=A<=u;r=A;const m={loaded:A,total:u,progress:u?A/u:void 0,bytes:d,rate:h||void 0,estimated:h&&u&&o?(u-A)/h:void 0,event:c,lengthComputable:u!=null,[s?"download":"upload"]:!0};t(m)},n)},aN=(t,s)=>{const n=t!=null;return[r=>s[0]({lengthComputable:n,total:t,loaded:r}),s[1]]},iN=t=>(...s)=>Wt.asap(()=>t(...s)),H7=qo.hasStandardBrowserEnv?((t,s)=>n=>(n=new URL(n,qo.origin),t.protocol===n.protocol&&t.host===n.host&&(s||t.port===n.port)))(new URL(qo.origin),qo.navigator&&/(msie|trident)/i.test(qo.navigator.userAgent)):()=>!0,z7=qo.hasStandardBrowserEnv?{write(t,s,n,r,i,c,A){if(typeof document>"u")return;const u=[`${t}=${encodeURIComponent(s)}`];Wt.isNumber(n)&&u.push(`expires=${new Date(n).toUTCString()}`),Wt.isString(r)&&u.push(`path=${r}`),Wt.isString(i)&&u.push(`domain=${i}`),c===!0&&u.push("secure"),Wt.isString(A)&&u.push(`SameSite=${A}`),document.cookie=u.join("; ")},read(t){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function K7(t){return typeof t!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function $7(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function _T(t,s,n){let r=!K7(s);return t&&(r||n==!1)?$7(t,s):s}const oN=t=>t instanceof Tl?{...t}:t;function vh(t,s){s=s||{};const n={};function r(h,o,m,y){return Wt.isPlainObject(h)&&Wt.isPlainObject(o)?Wt.merge.call({caseless:y},h,o):Wt.isPlainObject(o)?Wt.merge({},o):Wt.isArray(o)?o.slice():o}function i(h,o,m,y){if(Wt.isUndefined(o)){if(!Wt.isUndefined(h))return r(void 0,h,m,y)}else return r(h,o,m,y)}function c(h,o){if(!Wt.isUndefined(o))return r(void 0,o)}function A(h,o){if(Wt.isUndefined(o)){if(!Wt.isUndefined(h))return r(void 0,h)}else return r(void 0,o)}function u(h,o,m){if(m in s)return r(h,o);if(m in t)return r(void 0,h)}const d={url:c,method:c,data:c,baseURL:A,transformRequest:A,transformResponse:A,paramsSerializer:A,timeout:A,timeoutMessage:A,withCredentials:A,withXSRFToken:A,adapter:A,responseType:A,xsrfCookieName:A,xsrfHeaderName:A,onUploadProgress:A,onDownloadProgress:A,decompress:A,maxContentLength:A,maxBodyLength:A,beforeRedirect:A,transport:A,httpAgent:A,httpsAgent:A,cancelToken:A,socketPath:A,responseEncoding:A,validateStatus:u,headers:(h,o,m)=>i(oN(h),oN(o),m,!0)};return Wt.forEach(Object.keys({...t,...s}),function(o){if(o==="__proto__"||o==="constructor"||o==="prototype")return;const m=Wt.hasOwnProp(d,o)?d[o]:i,y=m(t[o],s[o],o);Wt.isUndefined(y)&&m!==u||(n[o]=y)}),n}const MT=t=>{const s=vh({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:c,headers:A,auth:u}=s;if(s.headers=A=Tl.from(A),s.url=UT(_T(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&A.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),Wt.isFormData(n)){if(qo.hasStandardBrowserEnv||qo.hasStandardBrowserWebWorkerEnv)A.setContentType(void 0);else if(Wt.isFunction(n.getHeaders)){const d=n.getHeaders(),h=["content-type","content-length"];Object.entries(d).forEach(([o,m])=>{h.includes(o.toLowerCase())&&A.set(o,m)})}}if(qo.hasStandardBrowserEnv&&(r&&Wt.isFunction(r)&&(r=r(s)),r||r!==!1&&H7(s.url))){const d=i&&c&&z7.read(c);d&&A.set(i,d)}return s},V7=typeof XMLHttpRequest<"u",q7=V7&&function(t){return new Promise(function(n,r){const i=MT(t);let c=i.data;const A=Tl.from(i.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:h}=i,o,m,y,p,j;function b(){p&&p(),j&&j(),i.cancelToken&&i.cancelToken.unsubscribe(o),i.signal&&i.signal.removeEventListener("abort",o)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function B(){if(!w)return;const Q=Tl.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),K={data:!u||u==="text"||u==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:Q,config:t,request:w};QT(function(q){n(q),b()},function(q){r(q),b()},K),w=null}"onloadend"in w?w.onloadend=B:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(B)},w.onabort=function(){w&&(r(new Vn("Request aborted",Vn.ECONNABORTED,t,w)),w=null)},w.onerror=function(k){const K=k&&k.message?k.message:"Network Error",ee=new Vn(K,Vn.ERR_NETWORK,t,w);ee.event=k||null,r(ee),w=null},w.ontimeout=function(){let k=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const K=i.transitional||xj;i.timeoutErrorMessage&&(k=i.timeoutErrorMessage),r(new Vn(k,K.clarifyTimeoutError?Vn.ETIMEDOUT:Vn.ECONNABORTED,t,w)),w=null},c===void 0&&A.setContentType(null),"setRequestHeader"in w&&Wt.forEach(A.toJSON(),function(k,K){w.setRequestHeader(K,k)}),Wt.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),u&&u!=="json"&&(w.responseType=i.responseType),h&&([y,j]=Yy(h,!0),w.addEventListener("progress",y)),d&&w.upload&&([m,p]=Yy(d),w.upload.addEventListener("progress",m),w.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(o=Q=>{w&&(r(!Q||Q.type?new Um(null,t,w):Q),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(o),i.signal&&(i.signal.aborted?o():i.signal.addEventListener("abort",o)));const U=M7(i.url);if(U&&qo.protocols.indexOf(U)===-1){r(new Vn("Unsupported protocol "+U+":",Vn.ERR_BAD_REQUEST,t));return}w.send(c||null)})},G7=(t,s)=>{const{length:n}=t=t?t.filter(Boolean):[];if(s||n){let r=new AbortController,i;const c=function(h){if(!i){i=!0,u();const o=h instanceof Error?h:this.reason;r.abort(o instanceof Vn?o:new Um(o instanceof Error?o.message:o))}};let A=s&&setTimeout(()=>{A=null,c(new Vn(`timeout of ${s}ms exceeded`,Vn.ETIMEDOUT))},s);const u=()=>{t&&(A&&clearTimeout(A),A=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(c):h.removeEventListener("abort",c)}),t=null)};t.forEach(h=>h.addEventListener("abort",c));const{signal:d}=r;return d.unsubscribe=()=>Wt.asap(u),d}},W7=function*(t,s){let n=t.byteLength;if(n<s){yield t;return}let r=0,i;for(;r<n;)i=r+s,yield t.slice(r,i),r=i},Y7=async function*(t,s){for await(const n of X7(t))yield*W7(n,s)},X7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:n,value:r}=await s.read();if(n)break;yield r}}finally{await s.cancel()}},lN=(t,s,n,r)=>{const i=Y7(t,s);let c=0,A,u=d=>{A||(A=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:h,value:o}=await i.next();if(h){u(),d.close();return}let m=o.byteLength;if(n){let y=c+=m;n(y)}d.enqueue(new Uint8Array(o))}catch(h){throw u(h),h}},cancel(d){return u(d),i.return()}},{highWaterMark:2})},cN=64*1024,{isFunction:Kg}=Wt,J7=(({Request:t,Response:s})=>({Request:t,Response:s}))(Wt.global),{ReadableStream:dN,TextEncoder:AN}=Wt.global,uN=(t,...s)=>{try{return!!t(...s)}catch{return!1}},Z7=t=>{t=Wt.merge.call({skipUndefined:!0},J7,t);const{fetch:s,Request:n,Response:r}=t,i=s?Kg(s):typeof fetch=="function",c=Kg(n),A=Kg(r);if(!i)return!1;const u=i&&Kg(dN),d=i&&(typeof AN=="function"?(j=>b=>j.encode(b))(new AN):async j=>new Uint8Array(await new n(j).arrayBuffer())),h=c&&u&&uN(()=>{let j=!1;const b=new n(qo.origin,{body:new dN,method:"POST",get duplex(){return j=!0,"half"}}).headers.has("Content-Type");return j&&!b}),o=A&&u&&uN(()=>Wt.isReadableStream(new r("").body)),m={stream:o&&(j=>j.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(j=>{!m[j]&&(m[j]=(b,w)=>{let B=b&&b[j];if(B)return B.call(b);throw new Vn(`Response type '${j}' is not supported`,Vn.ERR_NOT_SUPPORT,w)})});const y=async j=>{if(j==null)return 0;if(Wt.isBlob(j))return j.size;if(Wt.isSpecCompliantForm(j))return(await new n(qo.origin,{method:"POST",body:j}).arrayBuffer()).byteLength;if(Wt.isArrayBufferView(j)||Wt.isArrayBuffer(j))return j.byteLength;if(Wt.isURLSearchParams(j)&&(j=j+""),Wt.isString(j))return(await d(j)).byteLength},p=async(j,b)=>{const w=Wt.toFiniteNumber(j.getContentLength());return w??y(b)};return async j=>{let{url:b,method:w,data:B,signal:U,cancelToken:Q,timeout:k,onDownloadProgress:K,onUploadProgress:ee,responseType:q,headers:G,withCredentials:W="same-origin",fetchOptions:he}=MT(j),Z=s||fetch;q=q?(q+"").toLowerCase():"text";let ie=G7([U,Q&&Q.toAbortSignal()],k),ce=null;const ae=ie&&ie.unsubscribe&&(()=>{ie.unsubscribe()});let de;try{if(ee&&h&&w!=="get"&&w!=="head"&&(de=await p(G,B))!==0){let pe=new n(b,{method:"POST",body:B,duplex:"half"}),Y;if(Wt.isFormData(B)&&(Y=pe.headers.get("content-type"))&&G.setContentType(Y),pe.body){const[me,Se]=aN(de,Yy(iN(ee)));B=lN(pe.body,cN,me,Se)}}Wt.isString(W)||(W=W?"include":"omit");const se=c&&"credentials"in n.prototype,re={...he,signal:ie,method:w.toUpperCase(),headers:G.normalize().toJSON(),body:B,duplex:"half",credentials:se?W:void 0};ce=c&&new n(b,re);let te=await(c?Z(ce,he):Z(b,re));const be=o&&(q==="stream"||q==="response");if(o&&(K||be&&ae)){const pe={};["status","statusText","headers"].forEach(je=>{pe[je]=te[je]});const Y=Wt.toFiniteNumber(te.headers.get("content-length")),[me,Se]=K&&aN(Y,Yy(iN(K),!0))||[];te=new r(lN(te.body,cN,me,()=>{Se&&Se(),ae&&ae()}),pe)}q=q||"text";let He=await m[Wt.findKey(m,q)||"text"](te,j);return!be&&ae&&ae(),await new Promise((pe,Y)=>{QT(pe,Y,{data:He,headers:Tl.from(te.headers),status:te.status,statusText:te.statusText,config:j,request:ce})})}catch(se){throw ae&&ae(),se&&se.name==="TypeError"&&/Load failed|fetch/i.test(se.message)?Object.assign(new Vn("Network Error",Vn.ERR_NETWORK,j,ce,se&&se.response),{cause:se.cause||se}):Vn.from(se,se&&se.code,j,ce,se&&se.response)}}},e9=new Map,PT=t=>{let s=t&&t.env||{};const{fetch:n,Request:r,Response:i}=s,c=[r,i,n];let A=c.length,u=A,d,h,o=e9;for(;u--;)d=c[u],h=o.get(d),h===void 0&&o.set(d,h=u?new Map:Z7(s)),o=h;return h};PT();const bj={http:g7,xhr:q7,fetch:{get:PT}};Wt.forEach(bj,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const hN=t=>`- ${t}`,t9=t=>Wt.isFunction(t)||t===null||t===!1;function s9(t,s){t=Wt.isArray(t)?t:[t];const{length:n}=t;let r,i;const c={};for(let A=0;A<n;A++){r=t[A];let u;if(i=r,!t9(r)&&(i=bj[(u=String(r)).toLowerCase()],i===void 0))throw new Vn(`Unknown adapter '${u}'`);if(i&&(Wt.isFunction(i)||(i=i.get(s))))break;c[u||"#"+A]=i}if(!i){const A=Object.entries(c).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let u=n?A.length>1?`since :
`+A.map(hN).join(`
`):" "+hN(A[0]):"as no adapter specified";throw new Vn("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i}const kT={getAdapter:s9,adapters:bj};function rv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Um(null,t)}function fN(t){return rv(t),t.headers=Tl.from(t.headers),t.data=nv.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),kT.getAdapter(t.adapter||Om.adapter,t)(t).then(function(r){return rv(t),r.data=nv.call(t,t.transformResponse,r),r.headers=Tl.from(r.headers),r},function(r){return DT(r)||(rv(t),r&&r.response&&(r.response.data=nv.call(t,t.transformResponse,r.response),r.response.headers=Tl.from(r.response.headers))),Promise.reject(r)})}const HT="1.13.5",Rx={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Rx[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const pN={};Rx.transitional=function(s,n,r){function i(c,A){return"[Axios v"+HT+"] Transitional option '"+c+"'"+A+(r?". "+r:"")}return(c,A,u)=>{if(s===!1)throw new Vn(i(A," has been removed"+(n?" in "+n:"")),Vn.ERR_DEPRECATED);return n&&!pN[A]&&(pN[A]=!0,console.warn(i(A," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(c,A,u):!0}};Rx.spelling=function(s){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function n9(t,s,n){if(typeof t!="object")throw new Vn("options must be an object",Vn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const c=r[i],A=s[c];if(A){const u=t[c],d=u===void 0||A(u,c,t);if(d!==!0)throw new Vn("option "+c+" must be "+d,Vn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Vn("Unknown option "+c,Vn.ERR_BAD_OPTION)}}const vy={assertOptions:n9,validators:Rx},vc=vy.validators;let Ah=class{constructor(s){this.defaults=s||{},this.interceptors={request:new nN,response:new nN}}async request(s,n){try{return await this._request(s,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const c=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?c&&!String(r.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+c):r.stack=c}catch{}}throw r}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=vh(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:c}=n;r!==void 0&&vy.assertOptions(r,{silentJSONParsing:vc.transitional(vc.boolean),forcedJSONParsing:vc.transitional(vc.boolean),clarifyTimeoutError:vc.transitional(vc.boolean),legacyInterceptorReqResOrdering:vc.transitional(vc.boolean)},!1),i!=null&&(Wt.isFunction(i)?n.paramsSerializer={serialize:i}:vy.assertOptions(i,{encode:vc.function,serialize:vc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),vy.assertOptions(n,{baseUrl:vc.spelling("baseURL"),withXsrfToken:vc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let A=c&&Wt.merge(c.common,c[n.method]);c&&Wt.forEach(["delete","get","head","post","put","patch","common"],j=>{delete c[j]}),n.headers=Tl.concat(A,c);const u=[];let d=!0;this.interceptors.request.forEach(function(b){if(typeof b.runWhen=="function"&&b.runWhen(n)===!1)return;d=d&&b.synchronous;const w=n.transitional||xj;w&&w.legacyInterceptorReqResOrdering?u.unshift(b.fulfilled,b.rejected):u.push(b.fulfilled,b.rejected)});const h=[];this.interceptors.response.forEach(function(b){h.push(b.fulfilled,b.rejected)});let o,m=0,y;if(!d){const j=[fN.bind(this),void 0];for(j.unshift(...u),j.push(...h),y=j.length,o=Promise.resolve(n);m<y;)o=o.then(j[m++],j[m++]);return o}y=u.length;let p=n;for(;m<y;){const j=u[m++],b=u[m++];try{p=j(p)}catch(w){b.call(this,w);break}}try{o=fN.call(this,p)}catch(j){return Promise.reject(j)}for(m=0,y=h.length;m<y;)o=o.then(h[m++],h[m++]);return o}getUri(s){s=vh(this.defaults,s);const n=_T(s.baseURL,s.url,s.allowAbsoluteUrls);return UT(n,s.params,s.paramsSerializer)}};Wt.forEach(["delete","get","head","options"],function(s){Ah.prototype[s]=function(n,r){return this.request(vh(r||{},{method:s,url:n,data:(r||{}).data}))}});Wt.forEach(["post","put","patch"],function(s){function n(r){return function(c,A,u){return this.request(vh(u||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:c,data:A}))}}Ah.prototype[s]=n(),Ah.prototype[s+"Form"]=n(!0)});let r9=class zT{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const r=this;this.promise.then(i=>{if(!r._listeners)return;let c=r._listeners.length;for(;c-- >0;)r._listeners[c](i);r._listeners=null}),this.promise.then=i=>{let c;const A=new Promise(u=>{r.subscribe(u),c=u}).then(i);return A.cancel=function(){r.unsubscribe(c)},A},s(function(c,A,u){r.reason||(r.reason=new Um(c,A,u),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=r=>{s.abort(r)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new zT(function(i){s=i}),cancel:s}}};function a9(t){return function(n){return t.apply(null,n)}}function i9(t){return Wt.isObject(t)&&t.isAxiosError===!0}const Pb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Pb).forEach(([t,s])=>{Pb[s]=t});function KT(t){const s=new Ah(t),n=wT(Ah.prototype.request,s);return Wt.extend(n,Ah.prototype,s,{allOwnKeys:!0}),Wt.extend(n,s,null,{allOwnKeys:!0}),n.create=function(i){return KT(vh(t,i))},n}const _i=KT(Om);_i.Axios=Ah;_i.CanceledError=Um;_i.CancelToken=r9;_i.isCancel=DT;_i.VERSION=HT;_i.toFormData=Ix;_i.AxiosError=Vn;_i.Cancel=_i.CanceledError;_i.all=function(s){return Promise.all(s)};_i.spread=a9;_i.isAxiosError=i9;_i.mergeConfig=vh;_i.AxiosHeaders=Tl;_i.formToJSON=t=>LT(Wt.isHTMLForm(t)?new FormData(t):t);_i.getAdapter=kT.getAdapter;_i.HttpStatusCode=Pb;_i.default=_i;const{Axios:gW,AxiosError:yW,CanceledError:xW,isCancel:vW,CancelToken:bW,VERSION:jW,all:wW,Cancel:SW,isAxiosError:NW,spread:BW,toFormData:CW,AxiosHeaders:EW,HttpStatusCode:TW,formToJSON:FW,getAdapter:IW,mergeConfig:RW}=_i;function o9(){const[,t]=co(),{toast:s}=ua(),[n,r]=S.useState(!1),[i,c]=S.useState(null),[A,u]=S.useState(""),[d,h]=S.useState(""),[o,m]=S.useState(null),[y,p]=S.useState(!1);S.useEffect(()=>{const w=new URLSearchParams(window.location.search).get("token");w?c(w):m("Reset token is missing from the URL. Please use the link sent to your email.")},[]);const j=async b=>{if(b.preventDefault(),m(null),!i){m("Invalid or missing reset token.");return}if(A.length<6){m("Password must be at least 6 characters long.");return}if(A!==d){m("Passwords do not match.");return}r(!0);try{(await _i.post("/api/auth/reset-password",{token:i,newPassword:A})).status===200&&(p(!0),s({title:"Success",description:"Your password has been reset successfully."}),setTimeout(()=>{t("/")},3e3))}catch(w){const B=w.response?.data?.message||"Failed to reset password. The link may have expired.";m(B),s({title:"Error",description:B,variant:"destructive"})}finally{r(!1)}};return y?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-100 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gray-100 rounded-full blur-3xl"}),e.jsx(Es.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10 text-center",children:e.jsx(Ms,{className:"border-2 border-green-200 shadow-2xl bg-white p-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center text-green-600 mb-2",children:e.jsx(lo,{className:"h-10 w-10"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Password Reset Successful"}),e.jsx("p",{className:"text-gray-600",children:"Your password has been updated. You will be redirected to the login page in a few seconds..."}),e.jsx(Ce,{onClick:()=>t("/"),className:"mt-4 bg-blue-600 hover:bg-blue-700",children:"Go to Login Now"})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-100 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gray-100 rounded-full blur-3xl"}),e.jsx(Es.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10",children:e.jsxs(Ms,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(Ar,{className:"space-y-2 pb-6 border-b border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-600 flex items-center justify-center text-white",children:e.jsx(mL,{className:"h-6 w-6"})})}),e.jsx(ur,{className:"text-center text-2xl font-bold text-gray-900",children:"Reset Password"}),e.jsx(sa,{className:"text-center text-gray-600",children:"Enter your new password below to regain access to your account."})]}),e.jsxs(Ws,{className:"pt-6",children:[o&&e.jsxs("div",{className:"mb-6 p-3 rounded-lg bg-red-50 border border-red-100 flex gap-3 text-red-700 text-sm animate-in fade-in slide-in-from-top-2",children:[e.jsx(gh,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("p",{children:o})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{className:"text-sm font-medium text-gray-700",children:"New Password"}),e.jsx(Xe,{type:"password",placeholder:"",value:A,onChange:b=>u(b.target.value),required:!0,disabled:!i||n,className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{className:"text-sm font-medium text-gray-700",children:"Confirm New Password"}),e.jsx(Xe,{type:"password",placeholder:"",value:d,onChange:b=>h(b.target.value),required:!0,disabled:!i||n,className:"h-11"})]}),e.jsx(Ce,{type:"submit",className:"w-full h-11 text-base font-semibold bg-blue-600 hover:bg-blue-700",disabled:!i||n,children:n?"Resetting Password...":"Update Password"})]})]}),e.jsx(Eh,{className:"justify-center border-t border-gray-100 pt-6 bg-gray-50/50",children:e.jsxs(Ce,{variant:"link",onClick:()=>t("/"),className:"text-blue-600 hover:underline font-medium p-0 h-auto",children:[e.jsx(wf,{className:"h-4 w-4 mr-2"}),"Back to Login"]})})]})})]})}function mN(){return co(),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-100 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gray-100 rounded-full blur-3xl"}),e.jsx(Es.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md relative z-10",children:e.jsxs(Ms,{className:"border-2 border-gray-200 shadow-2xl bg-white",children:[e.jsxs(Ar,{className:"space-y-2 pb-6 border-b border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-yellow-500 flex items-center justify-center text-white",children:e.jsx(ab,{className:"h-6 w-6"})})}),e.jsx(ur,{className:"text-center text-2xl font-bold text-gray-900",children:"Account Under Verification"})]}),e.jsx(Ws,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(ab,{className:"h-8 w-8 text-yellow-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Your account is currently under review. You will be able to access the system once your account is approved by the BOQ team."}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"What happens next?"}),e.jsx("br",{})," Our team will review your application",e.jsx("br",{})," You will receive an email notification once approved",e.jsx("br",{})," Approval typically takes 1-2 business days"]})})]})]})}),e.jsx(Eh,{className:"justify-center border-t border-gray-100 pt-6 bg-gray-50/50",children:e.jsxs(ia,{href:"/",className:"flex items-center gap-2 text-blue-600 hover:underline font-medium",children:[e.jsx(wf,{className:"h-4 w-4"}),"Back to Login"]})})]})})]})}const l9=cx("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:"text-foreground border [border-color:var(--badge-outline)]"}},defaultVariants:{variant:"default"}});function Bl({className:t,variant:s,...n}){return e.jsx("div",{className:$s(l9({variant:s}),t),...n})}const gN={BrickWall:s5,DoorOpen:r5,Cloud:n5,Layers:dx,PaintBucket:c5,Blinds:t5,Zap:My,Droplets:a5,Hammer:fL,ShieldAlert:d5},c9=[{icon:s5,label:"Civil ",href:"/estimators/civil-wall"},{icon:r5,label:"Doors",href:"/estimators/doors"},{icon:n5,label:"False Ceiling",href:"/estimators/false-ceiling"},{icon:dx,label:"Flooring",href:"/estimators/flooring"},{icon:c5,label:"Painting",href:"/estimators/painting"},{icon:t5,label:"Blinds",href:"/estimators/blinds"},{icon:My,label:"Electrical",href:"/estimators/electrical"},{icon:a5,label:"Plumbing",href:"/estimators/plumbing"}];function d9(){const[t,s]=co(),[n,r]=S.useState(!0),[i,c]=S.useState(""),[A,u]=S.useState([]),[d,h]=S.useState(!0),{user:o,logout:m,supportMessages:y,materialApprovalRequests:p}=fi(),[j,b]=S.useState(0),[w,B]=S.useState(0),[U,Q]=S.useState(0);S.useEffect(()=>{const ae=async()=>{try{h(!0);const se=await lt("/api/sidebar-subcategories",{headers:{}});if(se.ok){const be=((await se.json()).subcategories||[]).map(He=>({...He,icon:gN[He.icon]||dx}));u(be)}}catch(se){console.warn("Failed to load subcategories:",se),u(c9.map(re=>({id:re.label,name:re.label,href:re.href,icon:Object.entries(gN).find(([te,be])=>be===re.icon)?.[0]||"Layers",category:"Estimators"})))}finally{h(!1)}};ae();const de=setInterval(ae,3e4);return()=>clearInterval(de)},[]),S.useEffect(()=>{(async()=>{try{const ae=await fetch("/api/shops-pending-approval");if(ae.ok){const de=await ae.json();b((de?.shops||[]).filter(se=>se.status==="pending").length)}}catch(ae){console.warn("load shop count failed",ae)}})()},[]),S.useEffect(()=>{try{if(!p){B(0);return}B((p||[]).filter(ae=>ae.status==="pending").length)}catch(ae){console.warn("compute material pending count failed",ae),B(0)}},[p]),S.useEffect(()=>{try{if(!y){Q(0);return}const ae=(y||[]).filter(de=>de.is_read===!1).length;Q(ae||(y||[]).length)}catch(ae){console.warn("compute message count failed",ae),Q(0)}},[y]);const k=()=>{m(),s("/")},K=o?.role==="admin"||o?.role==="software_team",ee=o?.role==="pre_sales",q=o?.role==="contractor",G=o?.role==="admin"||o?.role==="software_team"||o?.role==="purchase_team";o?.role==="supplier"||o?.role;const W=o?.role==="user",he=o?.role==="admin";o?.role==="admin"||o?.role;const ie=typeof window>"u"?null:new URL(window.location.href).searchParams.get("tab"),ce=i?A.filter(ae=>(ae.name||ae.label).toLowerCase().includes(i.toLowerCase())):A;return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{variant:"ghost",size:"icon",className:"fixed top-4 left-4 z-50 md:hidden",onClick:()=>r(!n),children:n?e.jsx(Ax,{className:"h-6 w-6"}):e.jsx(l5,{className:"h-6 w-6"})}),e.jsxs("aside",{className:$s("fixed inset-y-0 left-0 z-40 w-64 transform bg-sidebar border-r border-sidebar-border transition-transform duration-200 ease-in-out md:translate-x-0 flex flex-col",n?"translate-x-0":"-translate-x-full"),children:[e.jsx("div",{className:"flex h-16 items-center justify-center border-b border-sidebar-border bg-sidebar-primary/10",children:e.jsxs("h1",{className:"text-xl font-bold tracking-tight text-sidebar-primary font-heading",children:["BUILD",e.jsx("span",{className:"text-foreground",children:"ESTIMATE"})]})}),e.jsxs("nav",{className:"flex-1 overflow-y-auto py-4 px-3 space-y-1",children:[!ee&&!q&&o?.role!=="supplier"&&e.jsx(ia,{href:"/dashboard",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/dashboard"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),children:[e.jsx(i5,{className:"h-4 w-4"}),"Dashboard"]})}),ee&&e.jsxs(e.Fragment,{children:[e.jsx(ia,{href:"/create-project",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-2 cursor-pointer",t==="/create-project"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(wl,{className:"h-4 w-4"})," Create Project"]})}),e.jsx(ia,{href:"/create-bom",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/create-bom"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(_y,{className:"h-4 w-4"})," Create BOM"]})}),e.jsx(ia,{href:"/finalize-bom",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/finalize-bom"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(lo,{className:"h-4 w-4"})," Finalize BOM"]})}),e.jsx(ia,{href:"/admin/dashboard?tab=create-product",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/admin/dashboard?tab=create-product"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(il,{className:"h-4 w-4"})," Create Product"]})})]}),G&&!ee&&!q&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Admin"}),e.jsx(ia,{href:"/admin/dashboard?tab=materials",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",ie==="materials"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(il,{className:"h-4 w-4"})," Create Item"]})}),e.jsx(ia,{href:"/admin/dashboard?tab=create-product",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",ie==="create-product"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(il,{className:"h-4 w-4"})," Create Product"]})}),e.jsx(ia,{href:"/admin/manage-product",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/admin/manage-product"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(il,{className:"h-4 w-4"})," Manage Product"]})}),e.jsx(ia,{href:"/admin/manage-materials",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/admin/manage-materials"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(il,{className:"h-4 w-4"})," Manage Materials"]})}),e.jsx(ia,{href:"/admin/vendor-categories",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/admin/vendor-categories"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(HL,{className:"h-4 w-4"})," Vendor Categories"]})}),e.jsx(ia,{href:"/admin/dashboard?tab=shops",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",ie==="shops"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(wl,{className:"h-4 w-4"})," Manage Shops"]})}),e.jsx(ia,{href:"/admin/dashboard?tab=approvals",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",ie==="approvals"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(d5,{className:"h-4 w-4"})," Shop Approvals",j>0&&e.jsx(Bl,{variant:"destructive",className:"ml-auto",children:j})]})}),e.jsx(ia,{href:"/admin/dashboard?tab=material-approvals",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",ie==="material-approvals"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(lo,{className:"h-4 w-4"})," Material Approvals",w>0&&e.jsx(Bl,{variant:"destructive",className:"ml-auto",children:w})]})}),he&&e.jsx(ia,{href:"/admin/suppliers",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/admin/suppliers"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(A5,{className:"h-4 w-4"})," Supplier Approvals"]})}),e.jsx(ia,{href:"/admin/dashboard?tab=messages",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",ie==="messages"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(yh,{className:"h-4 w-4"})," Messages",U>0&&e.jsx(Bl,{variant:"secondary",className:"ml-auto",children:U})]})}),he&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 mb-2 mt-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Projects"}),e.jsx(ia,{href:"/create-project",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/create-project"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(wl,{className:"h-4 w-4"})," Create Project"]})}),e.jsx(ia,{href:"/create-bom",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/create-bom"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(_y,{className:"h-4 w-4"})," Create BOM"]})}),e.jsx(ia,{href:"/finalize-bom",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/finalize-bom"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(lo,{className:"h-4 w-4"})," Finalize BOM"]})})]})]}),!ee&&!q&&(o?.role==="supplier"||o?.role==="admin")?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:o?.role==="admin"?"Materials":"Supplier"}),o?.role==="supplier"&&e.jsx(ia,{href:"/supplier/shops",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t==="/supplier/shops"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(wl,{className:"h-4 w-4"})," Add Shop"]})}),o?.role==="supplier"&&e.jsx(ia,{href:"/supplier/materials",children:e.jsxs("span",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors mb-4 cursor-pointer",t==="/supplier/materials"?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent"),onClick:()=>r(!1),children:[e.jsx(il,{className:"h-4 w-4"})," Manage Materials"]})})]}):null,(q||W||K||o?.role==="purchase_team")&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Sub-Categories"}),e.jsx("div",{className:"px-3 mb-2",children:e.jsx("input",{value:i,onChange:ae=>c(ae.target.value),placeholder:"Search Sub-Categories",className:"w-full rounded-md border px-2 py-1 text-sm bg-transparent text-sidebar-foreground placeholder:text-muted-foreground"})}),e.jsx("div",{className:"max-h-[260px] overflow-y-auto pr-1",children:ce.map(ae=>{const de=ae.href||`/estimators/${(ae.name||ae.label).toLowerCase().replace(/[\s/]+/g,"-")}`,se=ae.icon;return e.jsx(ia,{href:de,children:e.jsxs("div",{className:$s("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors cursor-pointer",t===de?"bg-sidebar-primary text-sidebar-primary-foreground shadow-md":"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"),onClick:()=>r(!1),children:[se&&e.jsx(se,{className:"h-4 w-4"}),ae.name||ae.label]})},ae.id||de)})})]}),!ee&&!q&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-6 px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Resources"}),e.jsx(ia,{href:"/subscription",children:e.jsxs("span",{className:"flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium text-sidebar-foreground hover:bg-sidebar-accent cursor-pointer",children:[e.jsx(il,{className:"h-4 w-4"}),"Subscription"]})})]})]}),e.jsxs("div",{className:"border-t border-sidebar-border p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-sidebar-primary/20 flex items-center justify-center text-sidebar-primary font-bold",children:o?.fullName?.[0]?.toUpperCase()||o?.username?.[0]?.toUpperCase()||"U"}),e.jsxs("div",{className:"flex flex-col overflow-hidden",children:[e.jsx("span",{className:"text-sm font-medium text-sidebar-foreground truncate",children:o?.fullName||o?.username||"Guest"}),e.jsx("span",{className:"text-xs text-muted-foreground truncate capitalize",children:o?.role?.replace("_"," ")||"Visitor"})]})]}),e.jsxs(Ce,{variant:"outline",className:"w-full justify-start text-destructive hover:text-destructive",onClick:k,children:[e.jsx(o5,{className:"mr-2 h-4 w-4"})," Log Out"]})]})]})]})}function Sa({children:t}){return e.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[e.jsx(d9,{}),e.jsx("main",{className:"md:pl-64 min-h-screen transition-all duration-200",children:e.jsx("div",{className:"container mx-auto p-4 md:p-8 pt-16 md:pt-8 max-w-7xl",children:t})})]})}function av(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}var A9=xA[" useInsertionEffect ".trim().toString()]||ei;function u9({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[i,c,A]=h9({defaultProp:s,onChange:n}),u=t!==void 0,d=u?t:i;{const o=S.useRef(t!==void 0);S.useEffect(()=>{const m=o.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),o.current=u},[u,r])}const h=S.useCallback(o=>{if(u){const m=f9(o)?o(t):o;m!==t&&A.current?.(m)}else c(o)},[u,t,c,A]);return[d,h]}function h9({defaultProp:t,onChange:s}){const[n,r]=S.useState(t),i=S.useRef(n),c=S.useRef(s);return A9(()=>{c.current=s},[s]),S.useEffect(()=>{i.current!==n&&(c.current?.(n),i.current=n)},[n,i]),[n,r,c]}function f9(t){return typeof t=="function"}var Ox="Tabs",[p9]=Cc(Ox,[Nx]),$T=Nx(),[m9,jj]=p9(Ox),VT=S.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:c,orientation:A="horizontal",dir:u,activationMode:d="automatic",...h}=t,o=Sx(u),[m,y]=u9({prop:r,onChange:i,defaultProp:c??"",caller:Ox});return e.jsx(m9,{scope:n,baseId:uu(),value:m,onValueChange:y,orientation:A,dir:o,activationMode:d,children:e.jsx(gr.div,{dir:o,"data-orientation":A,...h,ref:s})})});VT.displayName=Ox;var qT="TabsList",GT=S.forwardRef((t,s)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,c=jj(qT,n),A=$T(n);return e.jsx(J4,{asChild:!0,...A,orientation:c.orientation,dir:c.dir,loop:r,children:e.jsx(gr.div,{role:"tablist","aria-orientation":c.orientation,...i,ref:s})})});GT.displayName=qT;var WT="TabsTrigger",YT=S.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...c}=t,A=jj(WT,n),u=$T(n),d=ZT(A.baseId,r),h=eF(A.baseId,r),o=r===A.value;return e.jsx(Z4,{asChild:!0,...u,focusable:!i,active:o,children:e.jsx(gr.button,{type:"button",role:"tab","aria-selected":o,"aria-controls":h,"data-state":o?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...c,ref:s,onMouseDown:av(t.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?A.onValueChange(r):m.preventDefault()}),onKeyDown:av(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&A.onValueChange(r)}),onFocus:av(t.onFocus,()=>{const m=A.activationMode!=="manual";!o&&!i&&m&&A.onValueChange(r)})})})});YT.displayName=WT;var XT="TabsContent",JT=S.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,forceMount:i,children:c,...A}=t,u=jj(XT,n),d=ZT(u.baseId,r),h=eF(u.baseId,r),o=r===u.value,m=S.useRef(o);return S.useEffect(()=>{const y=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(y)},[]),e.jsx(vA,{present:i||o,children:({present:y})=>e.jsx(gr.div,{"data-state":o?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!y,id:h,tabIndex:0,...A,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:y&&c})})});JT.displayName=XT;function ZT(t,s){return`${t}-trigger-${s}`}function eF(t,s){return`${t}-content-${s}`}var g9=VT,tF=GT,sF=YT,nF=JT;const y9=g9,x9=S.forwardRef(({className:t,...s},n)=>e.jsx(tF,{ref:n,className:$s("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...s}));x9.displayName=tF.displayName;const v9=S.forwardRef(({className:t,...s},n)=>e.jsx(sF,{ref:n,className:$s("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...s}));v9.displayName=sF.displayName;const iu=S.forwardRef(({className:t,...s},n)=>e.jsx(nF,{ref:n,className:$s("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));iu.displayName=nF.displayName;function yN(t,[s,n]){return Math.min(n,Math.max(s,t))}function bo(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}var iv=0;function rF(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??xN()),document.body.insertAdjacentElement("beforeend",t[1]??xN()),iv++,()=>{iv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),iv--}},[])}function xN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ov="focusScope.autoFocusOnMount",lv="focusScope.autoFocusOnUnmount",vN={bubbles:!1,cancelable:!0},b9="FocusScope",wj=S.forwardRef((t,s)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:c,...A}=t,[u,d]=S.useState(null),h=Wo(i),o=Wo(c),m=S.useRef(null),y=Pr(s,b=>d(b)),p=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let b=function(Q){if(p.paused||!u)return;const k=Q.target;u.contains(k)?m.current=k:ou(m.current,{select:!0})},w=function(Q){if(p.paused||!u)return;const k=Q.relatedTarget;k!==null&&(u.contains(k)||ou(m.current,{select:!0}))},B=function(Q){if(document.activeElement===document.body)for(const K of Q)K.removedNodes.length>0&&ou(u)};document.addEventListener("focusin",b),document.addEventListener("focusout",w);const U=new MutationObserver(B);return u&&U.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",w),U.disconnect()}}},[r,u,p.paused]),S.useEffect(()=>{if(u){jN.add(p);const b=document.activeElement;if(!u.contains(b)){const B=new CustomEvent(ov,vN);u.addEventListener(ov,h),u.dispatchEvent(B),B.defaultPrevented||(j9(C9(aF(u)),{select:!0}),document.activeElement===b&&ou(u))}return()=>{u.removeEventListener(ov,h),setTimeout(()=>{const B=new CustomEvent(lv,vN);u.addEventListener(lv,o),u.dispatchEvent(B),B.defaultPrevented||ou(b??document.body,{select:!0}),u.removeEventListener(lv,o),jN.remove(p)},0)}}},[u,h,o,p]);const j=S.useCallback(b=>{if(!n&&!r||p.paused)return;const w=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,B=document.activeElement;if(w&&B){const U=b.currentTarget,[Q,k]=w9(U);Q&&k?!b.shiftKey&&B===k?(b.preventDefault(),n&&ou(Q,{select:!0})):b.shiftKey&&B===Q&&(b.preventDefault(),n&&ou(k,{select:!0})):B===U&&b.preventDefault()}},[n,r,p.paused]);return e.jsx(gr.div,{tabIndex:-1,...A,ref:y,onKeyDown:j})});wj.displayName=b9;function j9(t,{select:s=!1}={}){const n=document.activeElement;for(const r of t)if(ou(r,{select:s}),document.activeElement!==n)return}function w9(t){const s=aF(t),n=bN(s,t),r=bN(s.reverse(),t);return[n,r]}function aF(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function bN(t,s){for(const n of t)if(!S9(n,{upTo:s}))return n}function S9(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function N9(t){return t instanceof HTMLInputElement&&"select"in t}function ou(t,{select:s=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&N9(t)&&s&&t.select()}}var jN=B9();function B9(){let t=[];return{add(s){const n=t[0];s!==n&&n?.pause(),t=wN(t,s),t.unshift(s)},remove(s){t=wN(t,s),t[0]?.resume()}}}function wN(t,s){const n=[...t],r=n.indexOf(s);return r!==-1&&n.splice(r,1),n}function C9(t){return t.filter(s=>s.tagName!=="A")}function E9(t){const s=T9(t),n=S.forwardRef((r,i)=>{const{children:c,...A}=r,u=S.Children.toArray(c),d=u.find(I9);if(d){const h=d.props.children,o=u.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return e.jsx(s,{...A,ref:i,children:S.isValidElement(h)?S.cloneElement(h,void 0,o):null})}return e.jsx(s,{...A,ref:i,children:c})});return n.displayName=`${t}.Slot`,n}function T9(t){const s=S.forwardRef((n,r)=>{const{children:i,...c}=n;if(S.isValidElement(i)){const A=O9(i),u=R9(c,i.props);return i.type!==S.Fragment&&(u.ref=r?Ch(r,A):A),S.cloneElement(i,u)}return S.Children.count(i)>1?S.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var F9=Symbol("radix.slottable");function I9(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===F9}function R9(t,s){const n={...s};for(const r in s){const i=t[r],c=s[r];/^on[A-Z]/.test(r)?i&&c?n[r]=(...u)=>{const d=c(...u);return i(...u),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...c}:r==="className"&&(n[r]=[i,c].filter(Boolean).join(" "))}return{...t,...n}}function O9(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var U9=xA[" useInsertionEffect ".trim().toString()]||ei;function SN({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[i,c,A]=L9({defaultProp:s,onChange:n}),u=t!==void 0,d=u?t:i;{const o=S.useRef(t!==void 0);S.useEffect(()=>{const m=o.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),o.current=u},[u,r])}const h=S.useCallback(o=>{if(u){const m=D9(o)?o(t):o;m!==t&&A.current?.(m)}else c(o)},[u,t,c,A]);return[d,h]}function L9({defaultProp:t,onChange:s}){const[n,r]=S.useState(t),i=S.useRef(n),c=S.useRef(s);return U9(()=>{c.current=s},[s]),S.useEffect(()=>{i.current!==n&&(c.current?.(n),i.current=n)},[n,i]),[n,r,c]}function D9(t){return typeof t=="function"}var Q9=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},of=new WeakMap,$g=new WeakMap,Vg={},cv=0,iF=function(t){return t&&(t.host||iF(t.parentNode))},_9=function(t,s){return s.map(function(n){if(t.contains(n))return n;var r=iF(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},M9=function(t,s,n,r){var i=_9(s,Array.isArray(t)?t:[t]);Vg[n]||(Vg[n]=new WeakMap);var c=Vg[n],A=[],u=new Set,d=new Set(i),h=function(m){!m||u.has(m)||(u.add(m),h(m.parentNode))};i.forEach(h);var o=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(y){if(u.has(y))o(y);else try{var p=y.getAttribute(r),j=p!==null&&p!=="false",b=(of.get(y)||0)+1,w=(c.get(y)||0)+1;of.set(y,b),c.set(y,w),A.push(y),b===1&&j&&$g.set(y,!0),w===1&&y.setAttribute(n,"true"),j||y.setAttribute(r,"true")}catch(B){console.error("aria-hidden: cannot operate on ",y,B)}})};return o(s),u.clear(),cv++,function(){A.forEach(function(m){var y=of.get(m)-1,p=c.get(m)-1;of.set(m,y),c.set(m,p),y||($g.has(m)||m.removeAttribute(r),$g.delete(m)),p||m.removeAttribute(n)}),cv--,cv||(of=new WeakMap,of=new WeakMap,$g=new WeakMap,Vg={})}},oF=function(t,s,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Q9(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),M9(r,i,n,"aria-hidden")):function(){return null}},Id=function(){return Id=Object.assign||function(s){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(s[c]=n[c])}return s},Id.apply(this,arguments)};function lF(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)s.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function P9(t,s,n){if(n||arguments.length===2)for(var r=0,i=s.length,c;r<i;r++)(c||!(r in s))&&(c||(c=Array.prototype.slice.call(s,0,r)),c[r]=s[r]);return t.concat(c||Array.prototype.slice.call(s))}var by="right-scroll-bar-position",jy="width-before-scroll-bar",k9="with-scroll-bars-hidden",H9="--removed-body-scroll-bar-size";function dv(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function z9(t,s){var n=S.useState(function(){return{value:t,callback:s,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=s,n.facade}var K9=typeof window<"u"?S.useLayoutEffect:S.useEffect,NN=new WeakMap;function $9(t,s){var n=z9(null,function(r){return t.forEach(function(i){return dv(i,r)})});return K9(function(){var r=NN.get(n);if(r){var i=new Set(r),c=new Set(t),A=n.current;i.forEach(function(u){c.has(u)||dv(u,null)}),c.forEach(function(u){i.has(u)||dv(u,A)})}NN.set(n,t)},[t]),n}function V9(t){return t}function q9(t,s){s===void 0&&(s=V9);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(c){var A=s(c,r);return n.push(A),function(){n=n.filter(function(u){return u!==A})}},assignSyncMedium:function(c){for(r=!0;n.length;){var A=n;n=[],A.forEach(c)}n={push:function(u){return c(u)},filter:function(){return n}}},assignMedium:function(c){r=!0;var A=[];if(n.length){var u=n;n=[],u.forEach(c),A=n}var d=function(){var o=A;A=[],o.forEach(c)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(o){A.push(o),h()},filter:function(o){return A=A.filter(o),n}}}};return i}function G9(t){t===void 0&&(t={});var s=q9(null);return s.options=Id({async:!0,ssr:!1},t),s}var cF=function(t){var s=t.sideCar,n=lF(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=s.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Id({},n))};cF.isSideCarExport=!0;function W9(t,s){return t.useMedium(s),cF}var dF=G9(),Av=function(){},Ux=S.forwardRef(function(t,s){var n=S.useRef(null),r=S.useState({onScrollCapture:Av,onWheelCapture:Av,onTouchMoveCapture:Av}),i=r[0],c=r[1],A=t.forwardProps,u=t.children,d=t.className,h=t.removeScrollBar,o=t.enabled,m=t.shards,y=t.sideCar,p=t.noIsolation,j=t.inert,b=t.allowPinchZoom,w=t.as,B=w===void 0?"div":w,U=t.gapMode,Q=lF(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=y,K=$9([n,s]),ee=Id(Id({},Q),i);return S.createElement(S.Fragment,null,o&&S.createElement(k,{sideCar:dF,removeScrollBar:h,shards:m,noIsolation:p,inert:j,setCallbacks:c,allowPinchZoom:!!b,lockRef:n,gapMode:U}),A?S.cloneElement(S.Children.only(u),Id(Id({},ee),{ref:K})):S.createElement(B,Id({},ee,{className:d,ref:K}),u))});Ux.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ux.classNames={fullWidth:jy,zeroRight:by};var Y9=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function X9(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=Y9();return s&&t.setAttribute("nonce",s),t}function J9(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function Z9(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var ez=function(){var t=0,s=null;return{add:function(n){t==0&&(s=X9())&&(J9(s,n),Z9(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},tz=function(){var t=ez();return function(s,n){S.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&n])}},AF=function(){var t=tz(),s=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return s},sz={left:0,top:0,right:0,gap:0},uv=function(t){return parseInt(t||"",10)||0},nz=function(t){var s=window.getComputedStyle(document.body),n=s[t==="padding"?"paddingLeft":"marginLeft"],r=s[t==="padding"?"paddingTop":"marginTop"],i=s[t==="padding"?"paddingRight":"marginRight"];return[uv(n),uv(r),uv(i)]},rz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return sz;var s=nz(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,r-n+s[2]-s[0])}},az=AF(),Cf="data-scroll-locked",iz=function(t,s,n,r){var i=t.left,c=t.top,A=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(k9,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Cf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(A,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(by,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(jy,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(by," .").concat(by,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(jy," .").concat(jy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Cf,`] {
    `).concat(H9,": ").concat(u,`px;
  }
`)},BN=function(){var t=parseInt(document.body.getAttribute(Cf)||"0",10);return isFinite(t)?t:0},oz=function(){S.useEffect(function(){return document.body.setAttribute(Cf,(BN()+1).toString()),function(){var t=BN()-1;t<=0?document.body.removeAttribute(Cf):document.body.setAttribute(Cf,t.toString())}},[])},lz=function(t){var s=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;oz();var c=S.useMemo(function(){return rz(i)},[i]);return S.createElement(az,{styles:iz(c,!s,i,n?"":"!important")})},kb=!1;if(typeof window<"u")try{var qg=Object.defineProperty({},"passive",{get:function(){return kb=!0,!0}});window.addEventListener("test",qg,qg),window.removeEventListener("test",qg,qg)}catch{kb=!1}var lf=kb?{passive:!1}:!1,cz=function(t){return t.tagName==="TEXTAREA"},uF=function(t,s){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!cz(t)&&n[s]==="visible")},dz=function(t){return uF(t,"overflowY")},Az=function(t){return uF(t,"overflowX")},CN=function(t,s){var n=s.ownerDocument,r=s;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=hF(t,r);if(i){var c=fF(t,r),A=c[1],u=c[2];if(A>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},uz=function(t){var s=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[s,n,r]},hz=function(t){var s=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[s,n,r]},hF=function(t,s){return t==="v"?dz(s):Az(s)},fF=function(t,s){return t==="v"?uz(s):hz(s)},fz=function(t,s){return t==="h"&&s==="rtl"?-1:1},pz=function(t,s,n,r,i){var c=fz(t,window.getComputedStyle(s).direction),A=c*r,u=n.target,d=s.contains(u),h=!1,o=A>0,m=0,y=0;do{var p=fF(t,u),j=p[0],b=p[1],w=p[2],B=b-w-c*j;(j||B)&&hF(t,u)&&(m+=B,y+=j),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!d&&u!==document.body||d&&(s.contains(u)||s===u));return(o&&Math.abs(m)<1||!o&&Math.abs(y)<1)&&(h=!0),h},Gg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},EN=function(t){return[t.deltaX,t.deltaY]},TN=function(t){return t&&"current"in t?t.current:t},mz=function(t,s){return t[0]===s[0]&&t[1]===s[1]},gz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},yz=0,cf=[];function xz(t){var s=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),i=S.useState(yz++)[0],c=S.useState(AF)[0],A=S.useRef(t);S.useEffect(function(){A.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var b=P9([t.lockRef.current],(t.shards||[]).map(TN),!0).filter(Boolean);return b.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),b.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var u=S.useCallback(function(b,w){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!A.current.allowPinchZoom;var B=Gg(b),U=n.current,Q="deltaX"in b?b.deltaX:U[0]-B[0],k="deltaY"in b?b.deltaY:U[1]-B[1],K,ee=b.target,q=Math.abs(Q)>Math.abs(k)?"h":"v";if("touches"in b&&q==="h"&&ee.type==="range")return!1;var G=CN(q,ee);if(!G)return!0;if(G?K=q:(K=q==="v"?"h":"v",G=CN(q,ee)),!G)return!1;if(!r.current&&"changedTouches"in b&&(Q||k)&&(r.current=K),!K)return!0;var W=r.current||K;return pz(W,w,b,W==="h"?Q:k)},[]),d=S.useCallback(function(b){var w=b;if(!(!cf.length||cf[cf.length-1]!==c)){var B="deltaY"in w?EN(w):Gg(w),U=s.current.filter(function(K){return K.name===w.type&&(K.target===w.target||w.target===K.shadowParent)&&mz(K.delta,B)})[0];if(U&&U.should){w.cancelable&&w.preventDefault();return}if(!U){var Q=(A.current.shards||[]).map(TN).filter(Boolean).filter(function(K){return K.contains(w.target)}),k=Q.length>0?u(w,Q[0]):!A.current.noIsolation;k&&w.cancelable&&w.preventDefault()}}},[]),h=S.useCallback(function(b,w,B,U){var Q={name:b,delta:w,target:B,should:U,shadowParent:vz(B)};s.current.push(Q),setTimeout(function(){s.current=s.current.filter(function(k){return k!==Q})},1)},[]),o=S.useCallback(function(b){n.current=Gg(b),r.current=void 0},[]),m=S.useCallback(function(b){h(b.type,EN(b),b.target,u(b,t.lockRef.current))},[]),y=S.useCallback(function(b){h(b.type,Gg(b),b.target,u(b,t.lockRef.current))},[]);S.useEffect(function(){return cf.push(c),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:y}),document.addEventListener("wheel",d,lf),document.addEventListener("touchmove",d,lf),document.addEventListener("touchstart",o,lf),function(){cf=cf.filter(function(b){return b!==c}),document.removeEventListener("wheel",d,lf),document.removeEventListener("touchmove",d,lf),document.removeEventListener("touchstart",o,lf)}},[]);var p=t.removeScrollBar,j=t.inert;return S.createElement(S.Fragment,null,j?S.createElement(c,{styles:gz(i)}):null,p?S.createElement(lz,{gapMode:t.gapMode}):null)}function vz(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const bz=W9(dF,xz);var Sj=S.forwardRef(function(t,s){return S.createElement(Ux,Id({},t,{ref:s,sideCar:bz}))});Sj.classNames=Ux.classNames;var jz=[" ","Enter","ArrowUp","ArrowDown"],wz=[" ","Enter"],bh="Select",[Lx,Dx,Sz]=V4(bh),[Kf]=Cc(bh,[Sz,gx]),Qx=gx(),[Nz,bu]=Kf(bh),[Bz,Cz]=Kf(bh),pF=t=>{const{__scopeSelect:s,children:n,open:r,defaultOpen:i,onOpenChange:c,value:A,defaultValue:u,onValueChange:d,dir:h,name:o,autoComplete:m,disabled:y,required:p,form:j}=t,b=Qx(s),[w,B]=S.useState(null),[U,Q]=S.useState(null),[k,K]=S.useState(!1),ee=Sx(h),[q,G]=SN({prop:r,defaultProp:i??!1,onChange:c,caller:bh}),[W,he]=SN({prop:A,defaultProp:u,onChange:d,caller:bh}),Z=S.useRef(null),ie=w?j||!!w.closest("form"):!0,[ce,ae]=S.useState(new Set),de=Array.from(ce).map(se=>se.props.value).join(";");return e.jsx(y6,{...b,children:e.jsxs(Nz,{required:p,scope:s,trigger:w,onTriggerChange:B,valueNode:U,onValueNodeChange:Q,valueNodeHasChildren:k,onValueNodeHasChildrenChange:K,contentId:uu(),value:W,onValueChange:he,open:q,onOpenChange:G,dir:ee,triggerPointerDownPosRef:Z,disabled:y,children:[e.jsx(Lx.Provider,{scope:s,children:e.jsx(Bz,{scope:t.__scopeSelect,onNativeOptionAdd:S.useCallback(se=>{ae(re=>new Set(re).add(se))},[]),onNativeOptionRemove:S.useCallback(se=>{ae(re=>{const te=new Set(re);return te.delete(se),te})},[]),children:n})}),ie?e.jsxs(MF,{"aria-hidden":!0,required:p,tabIndex:-1,name:o,autoComplete:m,value:W,onChange:se=>he(se.target.value),disabled:y,form:j,children:[W===void 0?e.jsx("option",{value:""}):null,Array.from(ce)]},de):null]})})};pF.displayName=bh;var mF="SelectTrigger",gF=S.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,c=Qx(n),A=bu(mF,n),u=A.disabled||r,d=Pr(s,A.onTriggerChange),h=Dx(n),o=S.useRef("touch"),[m,y,p]=kF(b=>{const w=h().filter(Q=>!Q.disabled),B=w.find(Q=>Q.value===A.value),U=HF(w,b,B);U!==void 0&&A.onValueChange(U.value)}),j=b=>{u||(A.onOpenChange(!0),p()),b&&(A.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return e.jsx(Y5,{asChild:!0,...c,children:e.jsx(gr.button,{type:"button",role:"combobox","aria-controls":A.contentId,"aria-expanded":A.open,"aria-required":A.required,"aria-autocomplete":"none",dir:A.dir,"data-state":A.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":PF(A.value)?"":void 0,...i,ref:d,onClick:bo(i.onClick,b=>{b.currentTarget.focus(),o.current!=="mouse"&&j(b)}),onPointerDown:bo(i.onPointerDown,b=>{o.current=b.pointerType;const w=b.target;w.hasPointerCapture(b.pointerId)&&w.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(j(b),b.preventDefault())}),onKeyDown:bo(i.onKeyDown,b=>{const w=m.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&y(b.key),!(w&&b.key===" ")&&jz.includes(b.key)&&(j(),b.preventDefault())})})})});gF.displayName=mF;var yF="SelectValue",xF=S.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:i,children:c,placeholder:A="",...u}=t,d=bu(yF,n),{onValueNodeHasChildrenChange:h}=d,o=c!==void 0,m=Pr(s,d.onValueNodeChange);return ei(()=>{h(o)},[h,o]),e.jsx(gr.span,{...u,ref:m,style:{pointerEvents:"none"},children:PF(d.value)?e.jsx(e.Fragment,{children:A}):c})});xF.displayName=yF;var Ez="SelectIcon",vF=S.forwardRef((t,s)=>{const{__scopeSelect:n,children:r,...i}=t;return e.jsx(gr.span,{"aria-hidden":!0,...i,ref:s,children:r||""})});vF.displayName=Ez;var Tz="SelectPortal",bF=t=>e.jsx(yx,{asChild:!0,...t});bF.displayName=Tz;var jh="SelectContent",jF=S.forwardRef((t,s)=>{const n=bu(jh,t.__scopeSelect),[r,i]=S.useState();if(ei(()=>{i(new DocumentFragment)},[]),!n.open){const c=r;return c?Bh.createPortal(e.jsx(wF,{scope:t.__scopeSelect,children:e.jsx(Lx.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),c):null}return e.jsx(SF,{...t,ref:s})});jF.displayName=jh;var qc=10,[wF,ju]=Kf(jh),Fz="SelectContentImpl",Iz=E9("SelectContent.RemoveScroll"),SF=S.forwardRef((t,s)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:c,onPointerDownOutside:A,side:u,sideOffset:d,align:h,alignOffset:o,arrowPadding:m,collisionBoundary:y,collisionPadding:p,sticky:j,hideWhenDetached:b,avoidCollisions:w,...B}=t,U=bu(jh,n),[Q,k]=S.useState(null),[K,ee]=S.useState(null),q=Pr(s,ge=>k(ge)),[G,W]=S.useState(null),[he,Z]=S.useState(null),ie=Dx(n),[ce,ae]=S.useState(!1),de=S.useRef(!1);S.useEffect(()=>{if(Q)return oF(Q)},[Q]),rF();const se=S.useCallback(ge=>{const[ye,...we]=ie().map(Be=>Be.ref.current),[Ne]=we.slice(-1),ke=document.activeElement;for(const Be of ge)if(Be===ke||(Be?.scrollIntoView({block:"nearest"}),Be===ye&&K&&(K.scrollTop=0),Be===Ne&&K&&(K.scrollTop=K.scrollHeight),Be?.focus(),document.activeElement!==ke))return},[ie,K]),re=S.useCallback(()=>se([G,Q]),[se,G,Q]);S.useEffect(()=>{ce&&re()},[ce,re]);const{onOpenChange:te,triggerPointerDownPosRef:be}=U;S.useEffect(()=>{if(Q){let ge={x:0,y:0};const ye=Ne=>{ge={x:Math.abs(Math.round(Ne.pageX)-(be.current?.x??0)),y:Math.abs(Math.round(Ne.pageY)-(be.current?.y??0))}},we=Ne=>{ge.x<=10&&ge.y<=10?Ne.preventDefault():Q.contains(Ne.target)||te(!1),document.removeEventListener("pointermove",ye),be.current=null};return be.current!==null&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",we,{capture:!0})}}},[Q,te,be]),S.useEffect(()=>{const ge=()=>te(!1);return window.addEventListener("blur",ge),window.addEventListener("resize",ge),()=>{window.removeEventListener("blur",ge),window.removeEventListener("resize",ge)}},[te]);const[He,pe]=kF(ge=>{const ye=ie().filter(ke=>!ke.disabled),we=ye.find(ke=>ke.ref.current===document.activeElement),Ne=HF(ye,ge,we);Ne&&setTimeout(()=>Ne.ref.current.focus())}),Y=S.useCallback((ge,ye,we)=>{const Ne=!de.current&&!we;(U.value!==void 0&&U.value===ye||Ne)&&(W(ge),Ne&&(de.current=!0))},[U.value]),me=S.useCallback(()=>Q?.focus(),[Q]),Se=S.useCallback((ge,ye,we)=>{const Ne=!de.current&&!we;(U.value!==void 0&&U.value===ye||Ne)&&Z(ge)},[U.value]),je=r==="popper"?Hb:NF,Le=je===Hb?{side:u,sideOffset:d,align:h,alignOffset:o,arrowPadding:m,collisionBoundary:y,collisionPadding:p,sticky:j,hideWhenDetached:b,avoidCollisions:w}:{};return e.jsx(wF,{scope:n,content:Q,viewport:K,onViewportChange:ee,itemRefCallback:Y,selectedItem:G,onItemLeave:me,itemTextRefCallback:Se,focusSelectedItem:re,selectedItemText:he,position:r,isPositioned:ce,searchRef:He,children:e.jsx(Sj,{as:Iz,allowPinchZoom:!0,children:e.jsx(wj,{asChild:!0,trapped:U.open,onMountAutoFocus:ge=>{ge.preventDefault()},onUnmountAutoFocus:bo(i,ge=>{U.trigger?.focus({preventScroll:!0}),ge.preventDefault()}),children:e.jsx(ux,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:A,onFocusOutside:ge=>ge.preventDefault(),onDismiss:()=>U.onOpenChange(!1),children:e.jsx(je,{role:"listbox",id:U.contentId,"data-state":U.open?"open":"closed",dir:U.dir,onContextMenu:ge=>ge.preventDefault(),...B,...Le,onPlaced:()=>ae(!0),ref:q,style:{display:"flex",flexDirection:"column",outline:"none",...B.style},onKeyDown:bo(B.onKeyDown,ge=>{const ye=ge.ctrlKey||ge.altKey||ge.metaKey;if(ge.key==="Tab"&&ge.preventDefault(),!ye&&ge.key.length===1&&pe(ge.key),["ArrowUp","ArrowDown","Home","End"].includes(ge.key)){let Ne=ie().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);if(["ArrowUp","End"].includes(ge.key)&&(Ne=Ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(ge.key)){const ke=ge.target,Be=Ne.indexOf(ke);Ne=Ne.slice(Be+1)}setTimeout(()=>se(Ne)),ge.preventDefault()}})})})})})})});SF.displayName=Fz;var Rz="SelectItemAlignedPosition",NF=S.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,c=bu(jh,n),A=ju(jh,n),[u,d]=S.useState(null),[h,o]=S.useState(null),m=Pr(s,q=>o(q)),y=Dx(n),p=S.useRef(!1),j=S.useRef(!0),{viewport:b,selectedItem:w,selectedItemText:B,focusSelectedItem:U}=A,Q=S.useCallback(()=>{if(c.trigger&&c.valueNode&&u&&h&&b&&w&&B){const q=c.trigger.getBoundingClientRect(),G=h.getBoundingClientRect(),W=c.valueNode.getBoundingClientRect(),he=B.getBoundingClientRect();if(c.dir!=="rtl"){const ke=he.left-G.left,Be=W.left-ke,Ae=q.left-Be,Qe=q.width+Ae,le=Math.max(Qe,G.width),ct=window.innerWidth-qc,rt=yN(Be,[qc,Math.max(qc,ct-le)]);u.style.minWidth=Qe+"px",u.style.left=rt+"px"}else{const ke=G.right-he.right,Be=window.innerWidth-W.right-ke,Ae=window.innerWidth-q.right-Be,Qe=q.width+Ae,le=Math.max(Qe,G.width),ct=window.innerWidth-qc,rt=yN(Be,[qc,Math.max(qc,ct-le)]);u.style.minWidth=Qe+"px",u.style.right=rt+"px"}const Z=y(),ie=window.innerHeight-qc*2,ce=b.scrollHeight,ae=window.getComputedStyle(h),de=parseInt(ae.borderTopWidth,10),se=parseInt(ae.paddingTop,10),re=parseInt(ae.borderBottomWidth,10),te=parseInt(ae.paddingBottom,10),be=de+se+ce+te+re,He=Math.min(w.offsetHeight*5,be),pe=window.getComputedStyle(b),Y=parseInt(pe.paddingTop,10),me=parseInt(pe.paddingBottom,10),Se=q.top+q.height/2-qc,je=ie-Se,Le=w.offsetHeight/2,ge=w.offsetTop+Le,ye=de+se+ge,we=be-ye;if(ye<=Se){const ke=Z.length>0&&w===Z[Z.length-1].ref.current;u.style.bottom="0px";const Be=h.clientHeight-b.offsetTop-b.offsetHeight,Ae=Math.max(je,Le+(ke?me:0)+Be+re),Qe=ye+Ae;u.style.height=Qe+"px"}else{const ke=Z.length>0&&w===Z[0].ref.current;u.style.top="0px";const Ae=Math.max(Se,de+b.offsetTop+(ke?Y:0)+Le)+we;u.style.height=Ae+"px",b.scrollTop=ye-Se+b.offsetTop}u.style.margin=`${qc}px 0`,u.style.minHeight=He+"px",u.style.maxHeight=ie+"px",r?.(),requestAnimationFrame(()=>p.current=!0)}},[y,c.trigger,c.valueNode,u,h,b,w,B,c.dir,r]);ei(()=>Q(),[Q]);const[k,K]=S.useState();ei(()=>{h&&K(window.getComputedStyle(h).zIndex)},[h]);const ee=S.useCallback(q=>{q&&j.current===!0&&(Q(),U?.(),j.current=!1)},[Q,U]);return e.jsx(Uz,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:p,onScrollButtonChange:ee,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:e.jsx(gr.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});NF.displayName=Rz;var Oz="SelectPopperPosition",Hb=S.forwardRef((t,s)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=qc,...c}=t,A=Qx(n);return e.jsx(X5,{...A,...c,ref:s,align:r,collisionPadding:i,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Hb.displayName=Oz;var[Uz,Nj]=Kf(jh,{}),zb="SelectViewport",BF=S.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:r,...i}=t,c=ju(zb,n),A=Nj(zb,n),u=Pr(s,c.onViewportChange),d=S.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(Lx.Slot,{scope:n,children:e.jsx(gr.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:bo(i.onScroll,h=>{const o=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:y}=A;if(y?.current&&m){const p=Math.abs(d.current-o.scrollTop);if(p>0){const j=window.innerHeight-qc*2,b=parseFloat(m.style.minHeight),w=parseFloat(m.style.height),B=Math.max(b,w);if(B<j){const U=B+p,Q=Math.min(j,U),k=U-Q;m.style.height=Q+"px",m.style.bottom==="0px"&&(o.scrollTop=k>0?k:0,m.style.justifyContent="flex-end")}}}d.current=o.scrollTop})})})]})});BF.displayName=zb;var CF="SelectGroup",[Lz,Dz]=Kf(CF),Qz=S.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,i=uu();return e.jsx(Lz,{scope:n,id:i,children:e.jsx(gr.div,{role:"group","aria-labelledby":i,...r,ref:s})})});Qz.displayName=CF;var EF="SelectLabel",TF=S.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,i=Dz(EF,n);return e.jsx(gr.div,{id:i.id,...r,ref:s})});TF.displayName=EF;var Xy="SelectItem",[_z,FF]=Kf(Xy),IF=S.forwardRef((t,s)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:c,...A}=t,u=bu(Xy,n),d=ju(Xy,n),h=u.value===r,[o,m]=S.useState(c??""),[y,p]=S.useState(!1),j=Pr(s,U=>d.itemRefCallback?.(U,r,i)),b=uu(),w=S.useRef("touch"),B=()=>{i||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(_z,{scope:n,value:r,disabled:i,textId:b,isSelected:h,onItemTextChange:S.useCallback(U=>{m(Q=>Q||(U?.textContent??"").trim())},[]),children:e.jsx(Lx.ItemSlot,{scope:n,value:r,disabled:i,textValue:o,children:e.jsx(gr.div,{role:"option","aria-labelledby":b,"data-highlighted":y?"":void 0,"aria-selected":h&&y,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...A,ref:j,onFocus:bo(A.onFocus,()=>p(!0)),onBlur:bo(A.onBlur,()=>p(!1)),onClick:bo(A.onClick,()=>{w.current!=="mouse"&&B()}),onPointerUp:bo(A.onPointerUp,()=>{w.current==="mouse"&&B()}),onPointerDown:bo(A.onPointerDown,U=>{w.current=U.pointerType}),onPointerMove:bo(A.onPointerMove,U=>{w.current=U.pointerType,i?d.onItemLeave?.():w.current==="mouse"&&U.currentTarget.focus({preventScroll:!0})}),onPointerLeave:bo(A.onPointerLeave,U=>{U.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:bo(A.onKeyDown,U=>{d.searchRef?.current!==""&&U.key===" "||(wz.includes(U.key)&&B(),U.key===" "&&U.preventDefault())})})})})});IF.displayName=Xy;var qp="SelectItemText",RF=S.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:i,...c}=t,A=bu(qp,n),u=ju(qp,n),d=FF(qp,n),h=Cz(qp,n),[o,m]=S.useState(null),y=Pr(s,B=>m(B),d.onItemTextChange,B=>u.itemTextRefCallback?.(B,d.value,d.disabled)),p=o?.textContent,j=S.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:p},d.value),[d.disabled,d.value,p]),{onNativeOptionAdd:b,onNativeOptionRemove:w}=h;return ei(()=>(b(j),()=>w(j)),[b,w,j]),e.jsxs(e.Fragment,{children:[e.jsx(gr.span,{id:d.textId,...c,ref:y}),d.isSelected&&A.valueNode&&!A.valueNodeHasChildren?Bh.createPortal(c.children,A.valueNode):null]})});RF.displayName=qp;var OF="SelectItemIndicator",UF=S.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return FF(OF,n).isSelected?e.jsx(gr.span,{"aria-hidden":!0,...r,ref:s}):null});UF.displayName=OF;var Kb="SelectScrollUpButton",LF=S.forwardRef((t,s)=>{const n=ju(Kb,t.__scopeSelect),r=Nj(Kb,t.__scopeSelect),[i,c]=S.useState(!1),A=Pr(s,r.onScrollButtonChange);return ei(()=>{if(n.viewport&&n.isPositioned){let u=function(){const h=d.scrollTop>0;c(h)};const d=n.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),i?e.jsx(QF,{...t,ref:A,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=n;u&&d&&(u.scrollTop=u.scrollTop-d.offsetHeight)}}):null});LF.displayName=Kb;var $b="SelectScrollDownButton",DF=S.forwardRef((t,s)=>{const n=ju($b,t.__scopeSelect),r=Nj($b,t.__scopeSelect),[i,c]=S.useState(!1),A=Pr(s,r.onScrollButtonChange);return ei(()=>{if(n.viewport&&n.isPositioned){let u=function(){const h=d.scrollHeight-d.clientHeight,o=Math.ceil(d.scrollTop)<h;c(o)};const d=n.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),i?e.jsx(QF,{...t,ref:A,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=n;u&&d&&(u.scrollTop=u.scrollTop+d.offsetHeight)}}):null});DF.displayName=$b;var QF=S.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,c=ju("SelectScrollButton",n),A=S.useRef(null),u=Dx(n),d=S.useCallback(()=>{A.current!==null&&(window.clearInterval(A.current),A.current=null)},[]);return S.useEffect(()=>()=>d(),[d]),ei(()=>{u().find(o=>o.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),e.jsx(gr.div,{"aria-hidden":!0,...i,ref:s,style:{flexShrink:0,...i.style},onPointerDown:bo(i.onPointerDown,()=>{A.current===null&&(A.current=window.setInterval(r,50))}),onPointerMove:bo(i.onPointerMove,()=>{c.onItemLeave?.(),A.current===null&&(A.current=window.setInterval(r,50))}),onPointerLeave:bo(i.onPointerLeave,()=>{d()})})}),Mz="SelectSeparator",_F=S.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return e.jsx(gr.div,{"aria-hidden":!0,...r,ref:s})});_F.displayName=Mz;var Vb="SelectArrow",Pz=S.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,i=Qx(n),c=bu(Vb,n),A=ju(Vb,n);return c.open&&A.position==="popper"?e.jsx(J5,{...i,...r,ref:s}):null});Pz.displayName=Vb;var kz="SelectBubbleInput",MF=S.forwardRef(({__scopeSelect:t,value:s,...n},r)=>{const i=S.useRef(null),c=Pr(r,i),A=hj(s);return S.useEffect(()=>{const u=i.current;if(!u)return;const d=window.HTMLSelectElement.prototype,o=Object.getOwnPropertyDescriptor(d,"value").set;if(A!==s&&o){const m=new Event("change",{bubbles:!0});o.call(u,s),u.dispatchEvent(m)}},[A,s]),e.jsx(gr.select,{...n,style:{...Z5,...n.style},ref:c,defaultValue:s})});MF.displayName=kz;function PF(t){return t===""||t===void 0}function kF(t){const s=Wo(t),n=S.useRef(""),r=S.useRef(0),i=S.useCallback(A=>{const u=n.current+A;s(u),(function d(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(u)},[s]),c=S.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,c]}function HF(t,s,n){const i=s.length>1&&Array.from(s).every(h=>h===s[0])?s[0]:s,c=n?t.indexOf(n):-1;let A=Hz(t,Math.max(c,0));i.length===1&&(A=A.filter(h=>h!==n));const d=A.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==n?d:void 0}function Hz(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var zz=pF,zF=gF,Kz=xF,$z=vF,Vz=bF,KF=jF,qz=BF,$F=TF,VF=IF,Gz=RF,Wz=UF,qF=LF,GF=DF,WF=_F;const mn=zz,gn=Kz,un=S.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(zF,{ref:r,className:$s("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[s,e.jsx($z,{asChild:!0,children:e.jsx(dm,{className:"h-4 w-4 opacity-50"})})]}));un.displayName=zF.displayName;const YF=S.forwardRef(({className:t,...s},n)=>e.jsx(qF,{ref:n,className:$s("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Ly,{className:"h-4 w-4"})}));YF.displayName=qF.displayName;const XF=S.forwardRef(({className:t,...s},n)=>e.jsx(GF,{ref:n,className:$s("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(dm,{className:"h-4 w-4"})}));XF.displayName=GF.displayName;const hn=S.forwardRef(({className:t,children:s,position:n="popper",...r},i)=>e.jsx(Vz,{children:e.jsxs(KF,{ref:i,className:$s("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[e.jsx(YF,{}),e.jsx(qz,{className:$s("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(XF,{})]})}));hn.displayName=KF.displayName;const Yz=S.forwardRef(({className:t,...s},n)=>e.jsx($F,{ref:n,className:$s("px-2 py-1.5 text-sm font-semibold",t),...s}));Yz.displayName=$F.displayName;const Ks=S.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(VF,{ref:r,className:$s("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Wz,{children:e.jsx(v1,{className:"h-4 w-4"})})}),e.jsx(Gz,{children:s})]}));Ks.displayName=VF.displayName;const Xz=S.forwardRef(({className:t,...s},n)=>e.jsx(WF,{ref:n,className:$s("-mx-1 my-1 h-px bg-muted",t),...s}));Xz.displayName=WF.displayName;function em(t,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return s?.(i)}}var Jz=xA[" useInsertionEffect ".trim().toString()]||ei;function Zz({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[i,c,A]=eK({defaultProp:s,onChange:n}),u=t!==void 0,d=u?t:i;{const o=S.useRef(t!==void 0);S.useEffect(()=>{const m=o.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),o.current=u},[u,r])}const h=S.useCallback(o=>{if(u){const m=tK(o)?o(t):o;m!==t&&A.current?.(m)}else c(o)},[u,t,c,A]);return[d,h]}function eK({defaultProp:t,onChange:s}){const[n,r]=S.useState(t),i=S.useRef(n),c=S.useRef(s);return Jz(()=>{c.current=s},[s]),S.useEffect(()=>{i.current!==n&&(c.current?.(n),i.current=n)},[n,i]),[n,r,c]}function tK(t){return typeof t=="function"}function sK(t){const s=nK(t),n=S.forwardRef((r,i)=>{const{children:c,...A}=r,u=S.Children.toArray(c),d=u.find(aK);if(d){const h=d.props.children,o=u.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return e.jsx(s,{...A,ref:i,children:S.isValidElement(h)?S.cloneElement(h,void 0,o):null})}return e.jsx(s,{...A,ref:i,children:c})});return n.displayName=`${t}.Slot`,n}function nK(t){const s=S.forwardRef((n,r)=>{const{children:i,...c}=n;if(S.isValidElement(i)){const A=oK(i),u=iK(c,i.props);return i.type!==S.Fragment&&(u.ref=r?Ch(r,A):A),S.cloneElement(i,u)}return S.Children.count(i)>1?S.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var rK=Symbol("radix.slottable");function aK(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===rK}function iK(t,s){const n={...s};for(const r in s){const i=t[r],c=s[r];/^on[A-Z]/.test(r)?i&&c?n[r]=(...u)=>{const d=c(...u);return i(...u),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...c}:r==="className"&&(n[r]=[i,c].filter(Boolean).join(" "))}return{...t,...n}}function oK(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var _x="Dialog",[JF]=Cc(_x),[lK,sd]=JF(_x),ZF=t=>{const{__scopeDialog:s,children:n,open:r,defaultOpen:i,onOpenChange:c,modal:A=!0}=t,u=S.useRef(null),d=S.useRef(null),[h,o]=Zz({prop:r,defaultProp:i??!1,onChange:c,caller:_x});return e.jsx(lK,{scope:s,triggerRef:u,contentRef:d,contentId:uu(),titleId:uu(),descriptionId:uu(),open:h,onOpenChange:o,onOpenToggle:S.useCallback(()=>o(m=>!m),[o]),modal:A,children:n})};ZF.displayName=_x;var eI="DialogTrigger",tI=S.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,i=sd(eI,n),c=Pr(s,i.triggerRef);return e.jsx(gr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Ej(i.open),...r,ref:c,onClick:em(t.onClick,i.onOpenToggle)})});tI.displayName=eI;var Bj="DialogPortal",[cK,sI]=JF(Bj,{forceMount:void 0}),nI=t=>{const{__scopeDialog:s,forceMount:n,children:r,container:i}=t,c=sd(Bj,s);return e.jsx(cK,{scope:s,forceMount:n,children:S.Children.map(r,A=>e.jsx(vA,{present:n||c.open,children:e.jsx(yx,{asChild:!0,container:i,children:A})}))})};nI.displayName=Bj;var Jy="DialogOverlay",rI=S.forwardRef((t,s)=>{const n=sI(Jy,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,c=sd(Jy,t.__scopeDialog);return c.modal?e.jsx(vA,{present:r||c.open,children:e.jsx(AK,{...i,ref:s})}):null});rI.displayName=Jy;var dK=sK("DialogOverlay.RemoveScroll"),AK=S.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,i=sd(Jy,n);return e.jsx(Sj,{as:dK,allowPinchZoom:!0,shards:[i.contentRef],children:e.jsx(gr.div,{"data-state":Ej(i.open),...r,ref:s,style:{pointerEvents:"auto",...r.style}})})}),wh="DialogContent",aI=S.forwardRef((t,s)=>{const n=sI(wh,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,c=sd(wh,t.__scopeDialog);return e.jsx(vA,{present:r||c.open,children:c.modal?e.jsx(uK,{...i,ref:s}):e.jsx(hK,{...i,ref:s})})});aI.displayName=wh;var uK=S.forwardRef((t,s)=>{const n=sd(wh,t.__scopeDialog),r=S.useRef(null),i=Pr(s,n.contentRef,r);return S.useEffect(()=>{const c=r.current;if(c)return oF(c)},[]),e.jsx(iI,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:em(t.onCloseAutoFocus,c=>{c.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:em(t.onPointerDownOutside,c=>{const A=c.detail.originalEvent,u=A.button===0&&A.ctrlKey===!0;(A.button===2||u)&&c.preventDefault()}),onFocusOutside:em(t.onFocusOutside,c=>c.preventDefault())})}),hK=S.forwardRef((t,s)=>{const n=sd(wh,t.__scopeDialog),r=S.useRef(!1),i=S.useRef(!1);return e.jsx(iI,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{t.onCloseAutoFocus?.(c),c.defaultPrevented||(r.current||n.triggerRef.current?.focus(),c.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:c=>{t.onInteractOutside?.(c),c.defaultPrevented||(r.current=!0,c.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const A=c.target;n.triggerRef.current?.contains(A)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&i.current&&c.preventDefault()}})}),iI=S.forwardRef((t,s)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:c,...A}=t,u=sd(wh,n),d=S.useRef(null),h=Pr(s,d);return rF(),e.jsxs(e.Fragment,{children:[e.jsx(wj,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:c,children:e.jsx(ux,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Ej(u.open),...A,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(fK,{titleId:u.titleId}),e.jsx(mK,{contentRef:d,descriptionId:u.descriptionId})]})]})}),Cj="DialogTitle",oI=S.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,i=sd(Cj,n);return e.jsx(gr.h2,{id:i.titleId,...r,ref:s})});oI.displayName=Cj;var lI="DialogDescription",cI=S.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,i=sd(lI,n);return e.jsx(gr.p,{id:i.descriptionId,...r,ref:s})});cI.displayName=lI;var dI="DialogClose",AI=S.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,i=sd(dI,n);return e.jsx(gr.button,{type:"button",...r,ref:s,onClick:em(t.onClick,()=>i.onOpenChange(!1))})});AI.displayName=dI;function Ej(t){return t?"open":"closed"}var uI="DialogTitleWarning",[OW,hI]=XO(uI,{contentName:wh,titleName:Cj,docsSlug:"dialog"}),fK=({titleId:t})=>{const s=hI(uI),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},pK="DialogDescriptionWarning",mK=({contentRef:t,descriptionId:s})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${hI(pK).contentName}}.`;return S.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");s&&i&&(document.getElementById(s)||console.warn(r))},[r,t,s]),null},gK=ZF,yK=tI,xK=nI,fI=rI,pI=aI,mI=oI,gI=cI,vK=AI;const du=gK,hv=yK,bK=xK,yI=S.forwardRef(({className:t,...s},n)=>e.jsx(fI,{ref:n,className:$s("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));yI.displayName=fI.displayName;const dA=S.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(bK,{children:[e.jsx(yI,{}),e.jsxs(pI,{ref:r,className:$s("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[s,e.jsxs(vK,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Ax,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));dA.displayName=pI.displayName;const AA=({className:t,...s})=>e.jsx("div",{className:$s("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});AA.displayName="DialogHeader";const xI=({className:t,...s})=>e.jsx("div",{className:$s("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});xI.displayName="DialogFooter";const uA=S.forwardRef(({className:t,...s},n)=>e.jsx(mI,{ref:n,className:$s("text-lg font-semibold leading-none tracking-tight",t),...s}));uA.displayName=mI.displayName;const vI=S.forwardRef(({className:t,...s},n)=>e.jsx(gI,{ref:n,className:$s("text-sm text-muted-foreground",t),...s}));vI.displayName=gI.displayName;const Vl=()=>e.jsx("span",{className:"text-red-500 ml-1",children:"*"}),jK=["pcs","kg","meter","sqft","cum","litre","set","nos"],wK=[{code:"+91",country:"India"},{code:"+1",country:"USA"},{code:"+44",country:"UK"},{code:"+61",country:"Australia"},{code:"+971",country:"UAE"},{code:"+81",country:"Japan"},{code:"+49",country:"Germany"}];function qb(){const{toast:t}=ua(),{shops:s,materials:n,addShop:r,addMaterial:i,user:c,approvalRequests:A,supportMessages:u,submitShopForApproval:d,submitMaterialForApproval:h,approveShop:o,rejectShop:m,deleteShop:y,deleteMaterial:p,addSupportMessage:j,deleteMessage:b,materialApprovalRequests:w,supplierSubmissions:B,approveMaterial:U,rejectMaterial:Q}=fi(),[k,K]=S.useState(""),[ee,q]=S.useState(null),[G,W]=S.useState([]),[he,Z]=S.useState([]),[ie,ce]=S.useState(null),[ae,de]=S.useState(""),[se,re]=S.useState([]);S.useEffect(()=>{(async()=>{try{const V=await fetch("/api/categories");if(V.ok){const Te=await V.json();Te?.categories&&W(Te.categories.sort((Ye,Oe)=>Ye.localeCompare(Oe)))}}catch(V){console.warn("load categories failed",V)}})()},[]),S.useEffect(()=>{(async()=>{try{const V=await fetch("/api/subcategories-admin");if(V.ok){const Te=await V.json();Te?.subcategories&&re(Te.subcategories.sort((Ye,Oe)=>(Ye.name||"").localeCompare(Oe.name||"")))}}catch(V){console.warn("load subcategories failed",V)}})()},[]),S.useEffect(()=>{(async()=>{try{const V=await fetch("/api/products");if(V.ok){const Te=await V.json();if(Te?.products){const Ye=Te.products.map(Oe=>te(Oe));Be(Ye.sort((Oe,yt)=>(Oe.name||"").localeCompare(yt.name||"")))}}}catch(V){console.warn("load products failed",V)}})()},[]);const te=V=>({...V,taxCodeType:V.taxCodeType??V.tax_code_type??null,taxCodeValue:V.taxCodeValue??V.tax_code_value??""}),[be,He]=S.useState(""),[pe,Y]=S.useState(""),[me,Se]=S.useState(""),[je,Le]=S.useState(null),[ge,ye]=S.useState(""),[we,Ne]=S.useState(""),[ke,Be]=S.useState([]),[Ae,Qe]=S.useState({name:"",subcategory:"",taxCodeType:null,taxCodeValue:"",hsnCode:"",sacCode:""}),[le,ct]=S.useState(!1),[rt,ht]=S.useState(null),[ft,Jt]=S.useState(""),[gt,tt]=S.useState(""),[Lt,qt]=S.useState(""),[Fs,xs]=S.useState("all"),[hs,it]=S.useState("all"),[Pe,dt]=S.useState("all"),[ze,Tt]=S.useState(!1),Je=async()=>{if(!be.trim()){t({title:"Error",description:"Category name is required",variant:"destructive"});return}if(G.includes(be)){t({title:"Error",description:"This category already exists",variant:"destructive"});return}try{const V=await Gl("/categories",{name:be});W(Te=>[...Te,be]),t({title:"Success",description:`Category "${be}" created`}),He("")}catch(V){console.error("add category error",V),t({title:"Error",description:V?.message||"Failed to create category",variant:"destructive"})}},vt=async()=>{if(!pe.trim()){t({title:"Error",description:"Sub-category name is required",variant:"destructive"});return}if(!me){t({title:"Error",description:"Please select a category first",variant:"destructive"});return}try{const Te={id:(await Gl("/subcategories",{name:pe,category:me})).subcategory.id,name:pe,category:me,createdAt:new Date().toISOString()};re(Ye=>[...Ye,Te]),t({title:"Success",description:`Sub-category "${pe}" created under ${me}`}),Y("")}catch(V){console.error("add subcategory error",V),t({title:"Error",description:V?.message||"Failed to create subcategory",variant:"destructive"})}},$e=V=>se.filter(Te=>Te.category===V),St=async()=>{if(!Ae.name.trim()){t({title:"Error",description:"Product name is required",variant:"destructive"});return}if(!Ae.subcategory){t({title:"Error",description:"Subcategory is required",variant:"destructive"});return}try{const V={name:Ae.name,subcategory:Ae.subcategory};Ae.hsnCode&&Ae.hsnCode.trim()&&(V.hsn_code=Ae.hsnCode.trim()),Ae.sacCode&&Ae.sacCode.trim()&&(V.sac_code=Ae.sacCode.trim());const Te=await Gl("/products",V),Ye=Te.product||Te;Be(Oe=>[...Oe,te(Ye)]),t({title:"Success",description:`Product "${Ae.name}" created`}),Qe({name:"",subcategory:"",taxCodeType:null,taxCodeValue:"",hsnCode:"",sacCode:""})}catch(V){console.error("add product error",V),t({title:"Error",description:V?.message||"Failed to create product",variant:"destructive"})}},Rt=V=>{Qe({name:`${V.name} (Copy)`,subcategory:V.subcategory||"",taxCodeType:V.taxCodeType||null,taxCodeValue:V.taxCodeValue||"",hsnCode:V.hsn_code||V.hsnCode||"",sacCode:V.sac_code||V.sacCode||""}),Tt(!0)},Zt=async()=>{if(!rt?.name?.trim()){t({title:"Error",description:"Product name is required",variant:"destructive"});return}if(!rt?.subcategory){t({title:"Error",description:"Subcategory is required",variant:"destructive"});return}if(rt.taxCodeType&&!rt.taxCodeValue?.trim()){t({title:"Error",description:"Tax code value is required",variant:"destructive"});return}try{const Te=await(await lt(`/products/${rt.id}`,{method:"PUT",body:JSON.stringify(rt)})).json(),Ye=te(Te.product||Te);Be(Oe=>Oe.map(yt=>yt.id===rt.id?Ye:yt)),t({title:"Success",description:`Product "${rt.name}" updated`}),ht(null)}catch(V){console.error("update product error",V),t({title:"Error",description:V?.message||"Failed to update product",variant:"destructive"})}},bt=async V=>{if(window.confirm("Delete this product? This cannot be undone."))try{await lt(`/products/${V}`,{method:"DELETE"}),Be(Te=>Te.filter(Ye=>Ye.id!==V)),t({title:"Success",description:"Product deleted"})}catch(Te){console.error("delete product error",Te),t({title:"Error",description:Te?.message||"Failed to delete product",variant:"destructive"})}},[Vt,vs]=S.useState([]);S.useEffect(()=>{(async()=>{try{const V=await fetch("/api/material-templates");if(V.ok){const Te=await V.json();vs(Te?.templates||[])}}catch(V){console.warn("load master materials failed",V),vs([])}})()},[]);const[us,jt]=S.useState(()=>[]),[kt,Ft]=S.useState(()=>[]),[is,Ss]=S.useState(""),[nn,es]=S.useState("grid"),[zs,Us]=S.useState(""),[Vs,Ls]=S.useState(""),[js,Os]=S.useState(!1),[Ds,ut]=S.useState(!1),Pt=kt.filter(V=>{if(!zs)return!0;const Te=zs.toLowerCase();return(V.name||"").toLowerCase().includes(Te)||(V.location||"").toLowerCase().includes(Te)||(V.city||"").toLowerCase().includes(Te)}),Kt=us.filter(V=>{if(!Vs)return!0;const Te=Vs.toLowerCase();return(V.name||"").toLowerCase().includes(Te)||(V.code||"").toLowerCase().includes(Te)}),[ws,Ts]=S.useState([]);S.useEffect(()=>{jt(n||[])},[n]),S.useEffect(()=>{Ft(s||[])},[s]);const[ys,Qs]=S.useState([]);S.useEffect(()=>{(async()=>{try{const Te=await lt("/api/vendor-categories");if(Te.ok){const Ye=await Te.json();Qs(Ye.categories||[])}}catch(Te){console.error("Failed to load vendor categories:",Te)}})()},[]);const[Gt,Ys]=S.useState({name:"",code:"",vendorCategory:"",category:"",subCategory:"",taxCodeType:null,taxCodeValue:""});S.useEffect(()=>{if(Gt.name){const V=Gt.name.substring(0,3).toUpperCase()+"-"+Math.floor(1e3+Math.random()*9e3);Ys(Te=>({...Te,code:V}))}},[Gt.name]);const Cn=async()=>{if(!Gt.name.trim()){t({title:"Error",description:"Material Name is required",variant:"destructive"});return}if(!Gt.category){t({title:"Error",description:"Category is required",variant:"destructive"});return}if(!Gt.subCategory){t({title:"Error",description:"Subcategory is required",variant:"destructive"});return}try{const V={name:Gt.name.trim(),code:Gt.code,vendorCategory:Gt.vendorCategory.trim(),category:Gt.category,subcategory:Gt.subCategory,taxCodeType:Gt.taxCodeType,taxCodeValue:Gt.taxCodeValue.trim()},Te=await Gl("/material-templates",V),Ye=Te.template||Te;vs(Oe=>[...Oe,Ye]),t({title:"Success",description:"Master material created. Suppliers can now use this."}),Ys({name:"",code:"",vendorCategory:"",category:"",subCategory:"",taxCodeType:null,taxCodeValue:""})}catch(V){console.error("create master material error",V),t({title:"Error",description:V?.message||"Failed to create master material",variant:"destructive"})}},[na,tr]=S.useState(""),[Mt,bn]=S.useState({name:"",code:"",rate:0,unit:"pcs",category:"",subCategory:"",product:"",brandName:"",modelNumber:"",technicalSpecification:"",dimensions:"",finish:"",metalType:"",vendorCategory:"",taxCodeType:void 0,taxCodeValue:""}),Tr=V=>{Ur(V.id),bn({name:V.name,code:V.code,rate:V.rate,unit:V.unit,category:V.category||"",subCategory:V.subCategory||V.sub_category||V.subcategory||"",product:V.product||"",brandName:V.brandName||V.brand_name||V.brandname||"",modelNumber:V.modelNumber||V.model_number||V.modelnumber||"",technicalSpecification:V.technicalSpecification||V.technical_specification||V.technicalspecification||"",dimensions:V.dimensions||"",finish:V.finish||"",metalType:V.metalType||V.metal_type||V.metaltype||"",shopId:V.shopId||V.shop_id||""})},lr=async()=>{if(jr)try{try{const V={};Mt.name!==void 0&&(V.name=Mt.name),Mt.code!==void 0&&(V.code=Mt.code),Mt.rate!==void 0&&(V.rate=Mt.rate),Mt.shopId!==void 0&&(V.shop_id=Mt.shopId),Mt.unit!==void 0&&(V.unit=Mt.unit),Mt.category!==void 0&&(V.category=Mt.category),Mt.brandName!==void 0&&(V.brandname=Mt.brandName),Mt.modelNumber!==void 0&&(V.modelnumber=Mt.modelNumber),Mt.subCategory!==void 0&&(V.subcategory=Mt.subCategory),Mt.product!==void 0&&(V.product=Mt.product),Mt.technicalSpecification!==void 0&&(V.technicalspecification=Mt.technicalSpecification),Mt.image!==void 0&&(V.image=Mt.image),Mt.attributes!==void 0&&(V.attributes=Mt.attributes);const Te=await lt(`/materials/${jr}`,{method:"PUT",body:JSON.stringify(V)});if(Te.ok){const Ye=await Te.json(),Oe=Ye?.material||Ye;jt(yt=>yt.map(Qt=>Qt.id===jr?{...Qt,...Oe}:Qt))}else{try{const Ye=await Te.text();console.warn("[handleUpdateMaterial] server responded non-ok",Te.status,Ye)}catch{console.warn("[handleUpdateMaterial] server responded non-ok",Te.status)}jt(Ye=>Ye.map(Oe=>Oe.id===jr?{...Oe,...Mt}:Oe))}}catch(V){console.warn("[handleUpdateMaterial] server update failed, applying locally",V),jt(Te=>Te.map(Ye=>Ye.id===jr?{...Ye,...Mt}:Ye))}t({title:"Updated",description:"Material details updated"}),Ur(null),bn({name:"",code:"",rate:0,unit:"pcs",category:"",subCategory:"",product:"",brandName:"",modelNumber:"",technicalSpecification:"",dimensions:"",finish:"",metalType:""})}catch{t({title:"Error",description:"Failed to update material",variant:"destructive"})}},[Bs,Js]=S.useState({name:"",location:"",city:"",state:"",country:"",pincode:"",phoneCountryCode:"+91",contactNumber:"",gstNo:"",vendorCategory:"",rating:5}),[Pn,kr]=S.useState(null),[jr,Ur]=S.useState(null),[hr,qs]=S.useState(""),[tn,Is]=S.useState(""),[dn,Hs]=S.useState(""),wr=()=>{if(!Bs.name||!Bs.phoneCountryCode||!Bs.city||!Bs.state||!Bs.country||!Bs.pincode){t({title:"Error",description:"All fields are required (GST is optional)",variant:"destructive"});return}(async()=>{try{let V=null;if(typeof d=="function"?V=await d({...Bs}):console.warn("[handleAddShop] submitShopForApproval missing from useData; falling back to local save"),V&&V.id){const Te={id:V.id,shop:V,submittedBy:c?.name,submittedAt:new Date().toISOString(),status:"pending"};setShopRequests(Ye=>[Te,...Ye]),nt("approvals"),t({title:"Success",description:"Shop submitted for approval (server)"})}else{const Te={id:Math.random().toString(),shop:{...Bs},submittedBy:c?.name,submittedAt:new Date().toISOString(),status:"pending"};setShopRequests(Ye=>[Te,...Ye]),nt("approvals"),t({title:"Saved Locally",description:"Shop saved locally; will sync when server is available"})}}catch(V){console.warn("submit shop failed",V);const Te=V?.message||String(V),Ye={id:Math.random().toString(),shop:{...Bs},submittedBy:c?.name,submittedAt:new Date().toISOString(),status:"pending"};setShopRequests(Oe=>[Ye,...Oe]),nt("approvals"),Te.includes("401")||/unauthori/i.test(Te)?t({title:"Saved Locally (Unauthorized)",description:"You are not logged in as admin  please log in to submit to server.",variant:"destructive"}):t({title:"Saved Locally",description:`Shop saved locally; server submit failed: ${Te}`,variant:"destructive"})}finally{Js({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:"",vendorCategory:""}),kr(null)}})()},at=V=>{kr(V.id),Js({name:V.name||"",location:V.location||"",city:V.city||"",state:V.state||"",country:V.country||"",pincode:V.pincode||"",phoneCountryCode:V.phone_country_code||V.phoneCountryCode||V.phonecountrycode||"+91",contactNumber:V.contact_number||V.contactNumber||V.contactnumber||V.phone||V.mobile||"",gstNo:V.gst_no||V.gstNo||V.gstno||"",vendorCategory:V.vendor_category||V.vendorCategory||V.vendorcategory||"",rating:V.rating||5})},ms=async()=>{if(Pn)try{const V=await lt(`/api/shops/${Pn}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Bs)});if(!V.ok)throw new Error(`Update failed: ${V.status}`);Ft(Te=>Te.map(Ye=>Ye.id===Pn?{...Ye,...Bs}:Ye)),t({title:"Updated",description:"Shop details updated"}),kr(null),Js({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:"",vendorCategory:""})}catch(V){console.error("Update shop error:",V),t({title:"Error",description:"Failed to update shop",variant:"destructive"})}},ds=V=>{(async()=>{try{const Te=V?.shop?.id;if(!Te){t({title:"Cannot Approve",description:"This shop is saved locally and has not been submitted to the server.",variant:"destructive"});return}await o?.(Te),setShopRequests(Ye=>Ye.filter(Oe=>Oe.id!==V.id)),t({title:"Approved",description:"Shop has been approved and added to the system"})}catch{t({title:"Error",description:"Failed to approve shop",variant:"destructive"})}})()},Nn=V=>{if(!k.trim()){t({title:"Error",description:"Please provide a rejection reason",variant:"destructive"});return}(async()=>{try{const Te=V?.shop?.id;if(!Te){setShopRequests(Ye=>Ye.filter(Oe=>Oe.id!==V.id)),q(null),K(""),t({title:"Removed",description:"Local shop request removed"});return}await m?.(Te,k),setShopRequests(Ye=>Ye.filter(Oe=>Oe.id!==V.id)),q(null),K(""),t({title:"Rejected",description:"Shop has been rejected"})}catch{t({title:"Error",description:"Failed to reject shop",variant:"destructive"})}})()},Yn=V=>{(async()=>{try{const Te=w.find(Ye=>Ye.id===V);await U?.(V,Te?.source),t({title:"Approved",description:"Material approved successfully"})}catch{t({title:"Error",description:"Failed to approve material",variant:"destructive"})}})()},sr=V=>{(async()=>{try{const Te=w.find(Ye=>Ye.id===V);await Q?.(V,k,Te?.source),q(null),K(""),t({title:"Rejected",description:"Material rejected successfully"})}catch{t({title:"Error",description:"Failed to reject material",variant:"destructive"})}})()},ha=()=>{if(!hr||!tn){t({title:"Error",description:"Sender name and message are required",variant:"destructive"});return}(async()=>{try{await j?.(tn,hr,dn),t({title:"Request Sent",description:"Message sent to Admin & Software Team."}),qs(""),Is(""),Hs("")}catch{t({title:"Error",description:"Failed to send message",variant:"destructive"})}})()},Ma=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team",Na=c?.role==="admin"||c?.role==="software_team"||c?.role==="supplier"||c?.role==="purchase_team";c?.role==="admin"||c?.role==="supplier"||c?.role,c?.role==="supplier"||c?.role;const cr=c?.role==="admin"||c?.role==="software_team",Ka=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team"||c?.role==="pre_sales",pa=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team"||c?.role==="pre_sales",er=pa||c?.role==="pre_sales",oa=pa||c?.role==="pre_sales",pi=pa||c?.role==="pre_sales",$a=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team",Va=c?.role==="admin"||c?.role==="software_team"||c?.role==="purchase_team",[,ti]=co(),xe=()=>{if(typeof window<"u"){const V=new URLSearchParams(window.location.search).get("tab");if(V)return V}return"dashboard"},[_e,nt]=S.useState(xe());return S.useEffect(()=>{nt(xe())},[ti]),S.useEffect(()=>{const V=()=>nt(xe());window.addEventListener("popstate",V);const Te=history.pushState,Ye=history.replaceState;return history.pushState=function(...Oe){const yt=Te.apply(this,Oe);return window.dispatchEvent(new PopStateEvent("popstate")),yt},history.replaceState=function(...Oe){const yt=Ye.apply(this,Oe);return window.dispatchEvent(new PopStateEvent("popstate")),yt},V(),()=>{window.removeEventListener("popstate",V),history.pushState=Te,history.replaceState=Ye}},[]),e.jsx(Sa,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading",children:c?.role==="supplier"?"Supplier Portal":c?.role==="purchase_team"?"Purchase Team Dashboard":"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your inventory and settings"})]}),_e==="dashboard"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(Ms,{children:[e.jsx(Ar,{className:"pb-3",children:e.jsx(ur,{className:"text-sm font-medium text-muted-foreground",children:"Total Shops"})}),e.jsx(Ws,{children:e.jsx("div",{className:"text-3xl font-bold",children:s.length})})]}),e.jsxs(Ms,{children:[e.jsx(Ar,{className:"pb-3",children:e.jsx(ur,{className:"text-sm font-medium text-muted-foreground",children:"Total Materials"})}),e.jsx(Ws,{children:e.jsx("div",{className:"text-3xl font-bold",children:n.length})})]})]}),(cr||c?.role==="purchase_team")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Ms,{children:[e.jsx(Ar,{className:"cursor-pointer select-none",onClick:()=>Os(!js),children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(ur,{className:"font-bold text-lg text-foreground flex items-center gap-2",children:["All Shops ",js?e.jsx(Ly,{className:"h-4 w-4"}):e.jsx(dm,{className:"h-4 w-4"})]}),e.jsx(sa,{className:"text-sm",children:"List of registered shops"})]})})}),js&&e.jsxs(Ws,{className:"space-y-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qy,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(Xe,{value:zs,onChange:V=>Us(V.target.value),placeholder:"Search shops by name, city or location...",className:"h-9"})]}),e.jsx("div",{className:"max-h-[800px] overflow-y-auto pr-2 border rounded-md",children:Pt.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No shops available"}):Pt.map(V=>e.jsx("div",{className:"p-3 border-b hover:bg-muted/30 transition-colors",children:Pn===V.id?e.jsxs("div",{className:"space-y-4 p-2 bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{className:"text-xs font-semibold",children:"Shop Name"}),e.jsx(Xe,{value:Bs.name||"",onChange:Te=>Js({...Bs,name:Te.target.value}),placeholder:"Shop Name"})]}),e.jsxs("div",{children:[e.jsx(We,{className:"text-xs font-semibold",children:"Location"}),e.jsx(Xe,{value:Bs.location||"",onChange:Te=>Js({...Bs,location:Te.target.value}),placeholder:"Location"})]}),e.jsxs("div",{children:[e.jsx(We,{className:"text-xs font-semibold",children:"City"}),e.jsx(Xe,{value:Bs.city||"",onChange:Te=>Js({...Bs,city:Te.target.value}),placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx(We,{className:"text-xs font-semibold",children:"Contact Number"}),e.jsx(Xe,{value:Bs.contactNumber||"",onChange:Te=>Js({...Bs,contactNumber:Te.target.value}),placeholder:"Phone Number"})]}),e.jsxs("div",{children:[e.jsx(We,{className:"text-xs font-semibold",children:"GST No"}),e.jsx(Xe,{value:Bs.gstNo||"",onChange:Te=>Js({...Bs,gstNo:Te.target.value}),placeholder:"GST No"})]}),e.jsxs("div",{children:[e.jsx(We,{className:"text-xs font-semibold",children:"Vendor Category"}),e.jsxs(mn,{value:Bs.vendorCategory||"",onValueChange:Te=>Js({...Bs,vendorCategory:Te}),children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select Vendor Category"})}),e.jsx(hn,{className:"max-h-60 overflow-y-auto",children:ys.map(Te=>e.jsx(Ks,{value:Te.name,children:Te.name},Te.id))})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(Ce,{size:"sm",onClick:ms,children:"Save Changes"}),e.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>{kr(null),Js({name:"",location:"",city:"",phoneCountryCode:"+91",state:"",country:"",pincode:"",gstNo:""})},children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg text-foreground",children:V.name}),e.jsxs("div",{className:"text-sm text-foreground/80",children:[V.location,", ",V.city]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 font-medium",children:[V.phone_country_code||V.phoneCountryCode||V.phonecountrycode||"+91"," ",V.contact_number||V.contactNumber||V.contactnumber||V.phone||V.mobile,"  ",V.gst_no||V.gstNo||V.gstno||"No GST"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:$a&&e.jsxs(e.Fragment,{children:[e.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>at(V),children:"Edit"}),e.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>Ft(Te=>Te.map(Ye=>Ye.id===V.id?{...Ye,disabled:!Ye.disabled}:Ye)),children:V.disabled?"Enable":"Disable"}),e.jsx(Ce,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>{window.confirm(`Delete shop "${V.name}"? This cannot be undone.`)&&y(V.id).then(()=>{Ft(Te=>Te.filter(Ye=>Ye.id!==V.id)),t({title:"Deleted",description:`${V.name} removed`})}).catch(Te=>{t({title:"Error",description:`Failed to delete ${V.name}`,variant:"destructive"})})},children:e.jsx(Gc,{className:"h-4 w-4"})})]})})]})},V.id))})]})]}),e.jsxs(Ms,{children:[e.jsx(Ar,{className:"cursor-pointer select-none",onClick:()=>ut(!Ds),children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(ur,{className:"font-bold text-lg text-foreground flex items-center gap-2",children:["All Materials ",Ds?e.jsx(Ly,{className:"h-4 w-4"}):e.jsx(dm,{className:"h-4 w-4"})]}),e.jsx(sa,{className:"text-sm",children:"Comprehensive material registry"})]})})}),Ds&&e.jsxs(Ws,{className:"space-y-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qy,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(Xe,{value:Vs,onChange:V=>Ls(V.target.value),placeholder:"Search materials...",className:"h-9"})]}),e.jsx("div",{className:"max-h-[800px] overflow-y-auto pr-2 border rounded-md",children:Kt.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No materials available"}):Kt.map(V=>e.jsx("div",{className:"p-2 border-b",children:jr===V.id?e.jsxs("div",{className:"space-y-4 p-4 bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"font-bold text-base text-foreground pb-2 border-b",children:["Editing: ",V.name]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Name"}),e.jsx(Xe,{value:Mt.name||"",onChange:Te=>bn({...Mt,name:Te.target.value})})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Code"}),e.jsx(Xe,{value:Mt.code||"",onChange:Te=>bn({...Mt,code:Te.target.value})})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Rate"}),e.jsx(Xe,{type:"number",value:Mt.rate||"",onChange:Te=>bn({...Mt,rate:parseFloat(Te.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Unit"}),e.jsxs(mn,{value:Mt.unit||"",onValueChange:Te=>bn({...Mt,unit:Te}),children:[e.jsx(un,{children:e.jsx(gn,{})}),e.jsx(hn,{children:jK.map(Te=>e.jsx(Ks,{value:Te,children:Te},Te))})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Category"}),e.jsxs(mn,{value:Mt.category||"",onValueChange:Te=>bn({...Mt,category:Te,subCategory:""}),children:[e.jsx(un,{children:e.jsx(gn,{})}),e.jsx(hn,{children:G.map(Te=>e.jsx(Ks,{value:Te,children:Te},Te))})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Sub Category"}),e.jsxs(mn,{value:Mt.subCategory||"",onValueChange:Te=>bn({...Mt,subCategory:Te}),children:[e.jsx(un,{children:e.jsx(gn,{})}),e.jsx(hn,{children:$e(Mt.category||"").map(Te=>e.jsx(Ks,{value:Te.name,children:Te.name},Te.id))})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Product"}),e.jsxs(mn,{value:Mt.product||"",onValueChange:Te=>bn({...Mt,product:Te}),children:[e.jsx(un,{children:e.jsx(gn,{})}),e.jsx(hn,{children:ke.filter(Te=>Te.subcategory===Mt.subCategory).map(Te=>e.jsxs(Ks,{value:Te.name,children:[Te.name," ","(Subcategory: ",Te.subcategory_name,")"]},Te.id))})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Brand Name"}),e.jsx(Xe,{value:Mt.brandName||"",onChange:Te=>bn({...Mt,brandName:Te.target.value})})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Model Number"}),e.jsx(Xe,{value:Mt.modelNumber||"",onChange:Te=>bn({...Mt,modelNumber:Te.target.value})})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Assigned Shop"}),e.jsxs(mn,{value:Mt.shopId||"",onValueChange:Te=>bn({...Mt,shopId:Te}),children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select Shop"})}),e.jsx(hn,{children:kt.map(Te=>e.jsx(Ks,{value:Te.id,children:Te.name},Te.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Technical Specification"}),e.jsx(Cl,{value:Mt.technicalSpecification||"",onChange:Te=>bn({...Mt,technicalSpecification:Te.target.value})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{size:"sm",onClick:lr,children:"Save Changes"}),e.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>{Ur(null),bn({name:"",code:"",rate:0,unit:"pcs",category:"",subCategory:"",product:"",brandName:"",modelNumber:"",technicalSpecification:"",dimensions:"",finish:"",metalType:""})},children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-base text-foreground",children:V.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[V.code,"  ",V.rate,"/",V.unit]}),e.jsxs("div",{className:"text-[10px] text-muted-foreground italic",children:["Shop: ",kt.find(Te=>Te.id===(V.shopId||V.shop_id))?.name||"Unassigned"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>jt(Te=>Te.map(Ye=>Ye.id===V.id?{...Ye,disabled:!Ye.disabled}:Ye)),children:V.disabled?"Enable":"Disable"}),e.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>Tr(V),children:"Edit"}),$a&&e.jsx(Ce,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>{window.confirm(`Delete material "${V.name}"? This cannot be undone.`)&&p(V.id).then(()=>{jt(Te=>Te.filter(Ye=>Ye.id!==V.id)),t({title:"Deleted",description:`${V.name} removed`})}).catch(Te=>{t({title:"Error",description:`Failed to delete ${V.name}`,variant:"destructive"})})},children:e.jsx(Gc,{className:"h-4 w-4"})})]})]})},V.id))})]})]})]}),c?.role==="supplier"&&e.jsx("div",{className:"space-y-4",children:e.jsxs(Ms,{children:[e.jsxs(Ar,{children:[e.jsx(ur,{children:"Available  Materials"}),e.jsx(sa,{className:"text-sm",children:"Select a material "})]}),e.jsxs(Ws,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{value:typeof is<"u"?is:"",onChange:V=>Ss(V.target.value),placeholder:"Search templates..."}),e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[e.jsx(Ce,{size:"sm",variant:nn==="grid"?void 0:"ghost",onClick:()=>es("grid"),children:"Grid"}),e.jsx(Ce,{size:"sm",variant:nn==="list"?void 0:"ghost",onClick:()=>es("list"),children:"List"})]})]}),e.jsx("div",{})]}),Vt.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No master materials yet"}):e.jsx("div",{className:"space-y-2",children:Vt.map(V=>e.jsxs("div",{className:"p-2 border-b flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm",children:[V.name," ",e.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:V.code})]}),e.jsx(ia,{href:"/admin/dashboard?tab=materials",children:e.jsx("span",{className:"text-sm text-sidebar-primary",children:"Use"})})]},V.id))})]})]})})]}),e.jsxs(y9,{value:_e,onValueChange:V=>{if(nt(V),typeof window<"u"){const Te=new URL(window.location.href);Te.searchParams.set("tab",V),window.history.replaceState({},"",Te.toString())}},className:"w-full",children:[Ka&&e.jsxs(iu,{value:"create-product",className:"space-y-6 mt-4",children:[e.jsxs(Ms,{className:"border-purple-200 bg-purple-50",children:[e.jsx(Ar,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ur,{className:"text-purple-900",children:"Create Categories"}),e.jsx(sa,{className:"text-purple-800",children:"Add new product categories"})]}),er&&e.jsx(e.Fragment,{children:e.jsxs(du,{children:[e.jsx(hv,{asChild:!0,children:e.jsxs(Ce,{className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"})," Add Category"]})}),e.jsxs(dA,{children:[e.jsx(AA,{children:e.jsx(uA,{children:"Add New Category"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Category Name ",e.jsx(Vl,{})]}),e.jsx(Xe,{value:be,onChange:V=>He(V.target.value),placeholder:"e.g. Flooring, Roofing, Doors"})]}),e.jsxs(Ce,{onClick:Je,className:"w-full bg-purple-600 hover:bg-purple-700",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"})," Add Category"]})]})]})]})})]})}),e.jsxs(Ws,{children:[le&&e.jsxs("div",{className:"space-y-2 p-3 border rounded mb-4 bg-white",children:[e.jsxs(We,{children:["Select Category ",e.jsx(Vl,{})]}),e.jsxs(mn,{value:me,onValueChange:Se,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Choose a category..."})}),e.jsx(hn,{className:"max-h-44",children:G.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No categories available"}):G.map(V=>e.jsx(Ks,{value:V,children:V},V))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Subcategory Name ",e.jsx(Vl,{})]}),e.jsx(Xe,{value:pe,onChange:V=>Y(V.target.value),placeholder:"e.g. Commercial, Residential"})]}),e.jsx(Ce,{onClick:async()=>{await vt(),pe.trim()&&ct(!1)},className:"bg-green-600 hover:bg-green-700",children:"Add Subcategory"})]}),e.jsx("div",{className:"mb-4",children:e.jsx(Xe,{value:ft,onChange:V=>Jt(V.target.value),placeholder:"Search categories..."})}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:G.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-6",children:"No categories created yet"}):G.filter(V=>V.toLowerCase().includes(ft.toLowerCase())).map((V,Te)=>{const Ye=$e(V);return e.jsx("div",{className:"p-4 border rounded-lg bg-white hover:border-purple-400 transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(il,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:V}),Ye.length>0&&e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",Ye.length," subcategories)"]})]})]}),pa&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>{ce(V),de(V)},children:"Edit"}),e.jsx(Ce,{size:"sm",variant:"destructive",onClick:async()=>{if(window.confirm(`Delete category "${V}" and its subcategories? This cannot be undone.`))try{await lt(`/categories/${encodeURIComponent(V)}`,{method:"DELETE"}),W(Oe=>Oe.filter(yt=>yt!==V)),re(Oe=>Oe.filter(yt=>yt.category!==V)),t({title:"Deleted",description:`Category ${V} removed`})}catch(Oe){console.error("delete category error",Oe),t({title:"Error",description:"Failed to delete category",variant:"destructive"})}},children:e.jsx(Gc,{className:"h-4 w-4"})})]}),ie===V&&e.jsx("div",{className:"mt-3 p-3 bg-gray-100 rounded border col-span-full",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Xe,{value:ae,onChange:Oe=>de(Oe.target.value),placeholder:"Category name",className:"text-sm"}),e.jsx(Ce,{size:"sm",onClick:async()=>{const Oe=ie,yt=ae.trim();if(!yt){t({title:"Error",description:"Category name cannot be empty",variant:"destructive"});return}try{await lt(`/categories/${encodeURIComponent(Oe)}`,{method:"PUT",body:JSON.stringify({name:yt})}),W(Qt=>Qt.map(ln=>ln===Oe?yt:ln)),re(Qt=>Qt.map(ln=>ln.category===Oe?{...ln,category:yt}:ln)),ce(null),de(""),t({title:"Success",description:`Category updated to ${yt}`})}catch(Qt){console.error("update category error",Qt),t({title:"Error",description:"Failed to update category",variant:"destructive"})}},children:"Save"}),e.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>{ce(null),de("")},children:"Cancel"})]})})]})},Te)})})]})]}),e.jsxs(Ms,{className:"border-green-200 bg-green-50",children:[e.jsx(Ar,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ur,{className:"text-green-900",children:"Create Subcategories"}),e.jsx(sa,{className:"text-green-800",children:"Add subcategories to your categories"})]}),er&&e.jsx(e.Fragment,{children:e.jsxs(du,{children:[e.jsx(hv,{asChild:!0,children:e.jsxs(Ce,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"})," Add Subcategory"]})}),e.jsxs(dA,{children:[e.jsx(AA,{children:e.jsx(uA,{})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Select Category ",e.jsx(Vl,{})]}),e.jsxs(mn,{value:me,onValueChange:Se,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Choose a category..."})}),e.jsx(hn,{className:"max-h-64",children:G.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No categories available"}):G.map(V=>e.jsx(Ks,{value:V,children:V},V))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Subcategory Name ",e.jsx(Vl,{})]}),e.jsx(Xe,{value:pe,onChange:V=>Y(V.target.value),placeholder:"e.g. Commercial, Residential"})]}),e.jsxs(Ce,{onClick:vt,className:"w-full bg-green-600 hover:bg-green-700",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"})," Add Subcategory"]})]})]})]})})]})}),e.jsxs(Ws,{children:[e.jsxs("div",{className:"mb-4 flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Xe,{value:gt,onChange:V=>tt(V.target.value),placeholder:"Search subcategories..."})}),e.jsx("div",{className:"w-full md:w-64",children:e.jsxs(mn,{value:Fs,onValueChange:xs,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Filter by Category"})}),e.jsxs(hn,{className:"max-h-64",children:[e.jsx(Ks,{value:"all",children:"All Categories"}),G.map(V=>e.jsx(Ks,{value:V,children:V},V))]})]})})]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:se.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-6",children:"No subcategories created yet"}):se.filter(V=>(Fs==="all"||V.category===Fs)&&V.name.toLowerCase().includes(gt.toLowerCase())).map(V=>e.jsx("div",{className:"p-4 border rounded-lg bg-white hover:border-green-400 transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dx,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:V.name}),e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(Category: ",V.category,")"]})]})]}),pi&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>{Le(V.id),ye(V.name),Ne(V.category)},children:"Edit"}),e.jsx(Ce,{size:"sm",variant:"destructive",onClick:async()=>{if(window.confirm(`Delete subcategory "${V.name}"? This cannot be undone.`))try{(await lt(`/subcategories/${V.id}`,{method:"DELETE"})).ok?(re(Ye=>Ye.filter(Oe=>Oe.id!==V.id)),t({title:"Deleted",description:`Subcategory ${V.name} removed`})):t({title:"Error",description:"Failed to delete subcategory",variant:"destructive"})}catch(Te){console.error("delete subcategory error",Te),t({title:"Error",description:"Failed to delete subcategory",variant:"destructive"})}},children:e.jsx(Gc,{className:"h-4 w-4"})})]}),je===V.id&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-100 rounded border col-span-full w-full space-y-3",children:[e.jsxs("div",{children:[e.jsx(We,{className:"text-sm",children:"Category"}),e.jsxs(mn,{value:we,onValueChange:Ne,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Choose a category..."})}),e.jsx(hn,{className:"max-h-64",children:G.map(Te=>e.jsx(Ks,{value:Te,children:Te},Te))})]})]}),e.jsxs("div",{children:[e.jsx(We,{className:"text-sm",children:"Subcategory Name"}),e.jsx(Xe,{value:ge,onChange:Te=>ye(Te.target.value),placeholder:"Subcategory name",className:"text-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{size:"sm",onClick:async()=>{const Te=ge.trim();if(!Te){t({title:"Error",description:"Subcategory name cannot be empty",variant:"destructive"});return}if(!we){t({title:"Error",description:"Please select a category",variant:"destructive"});return}try{(await lt(`/subcategories/${V.id}`,{method:"PUT",body:JSON.stringify({name:Te,category:we})})).ok&&(re(Oe=>Oe.map(yt=>yt.id===V.id?{...yt,name:Te,category:we}:yt)),Le(null),ye(""),Ne(""),t({title:"Success",description:"Subcategory updated"}))}catch(Ye){console.error("update subcategory error",Ye),t({title:"Error",description:"Failed to update subcategory",variant:"destructive"})}},children:"Save"}),e.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>{Le(null),ye(""),Ne("")},children:"Cancel"})]})]})]})},V.id))})]})]}),e.jsxs(Ms,{className:"border-blue-200 bg-blue-50",children:[e.jsx(Ar,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ur,{className:"text-blue-900",children:"Create Products"}),e.jsx(sa,{className:"text-blue-800",children:"Add new products and assign subcategories"})]}),er&&e.jsx(e.Fragment,{children:e.jsxs(du,{open:ze,onOpenChange:Tt,children:[e.jsx(hv,{asChild:!0,children:e.jsxs(Ce,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"})," Add Product"]})}),e.jsxs(dA,{children:[e.jsx(AA,{children:e.jsx(uA,{children:"Add New Product"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Product Name ",e.jsx(Vl,{})]}),e.jsx(Xe,{value:Ae.name,onChange:V=>Qe(Te=>({...Te,name:V.target.value})),placeholder:"e.g. Ceramic Tiles, Wooden Door"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Select Subcategory ",e.jsx(Vl,{})]}),e.jsxs(mn,{value:Ae.subcategory,onValueChange:V=>Qe(Te=>({...Te,subcategory:V})),children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Choose a subcategory..."})}),e.jsx(hn,{className:"max-h-64",children:se.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No subcategories available"}):se.map(V=>e.jsxs(Ks,{value:V.name,children:[V.name," ",e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",V.category,")"]})]},V.id))})]})]}),le&&e.jsxs("div",{className:"space-y-2 p-3 border rounded",children:[e.jsxs(We,{children:["Select Category ",e.jsx(Vl,{})]}),e.jsxs(mn,{value:me,onValueChange:Se,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Choose a category..."})}),e.jsx(hn,{className:"max-h-44",children:G.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground",children:"No categories available"}):G.map(V=>e.jsx(Ks,{value:V,children:V},V))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Subcategory Name ",e.jsx(Vl,{})]}),e.jsx(Xe,{value:pe,onChange:V=>Y(V.target.value),placeholder:"e.g. Commercial, Residential"})]}),e.jsx(Ce,{onClick:async()=>{await vt(),pe.trim()&&(Qe(V=>({...V,subcategory:pe.trim()})),ct(!1))},className:"w-full bg-green-600 hover:bg-green-700",children:"Add Subcategory"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"HSN Code"}),e.jsx(Xe,{value:Ae.hsnCode,onChange:V=>Qe({...Ae,hsnCode:V.target.value}),placeholder:"Enter HSN code"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"SAC Code"}),e.jsx(Xe,{value:Ae.sacCode,onChange:V=>Qe({...Ae,sacCode:V.target.value}),placeholder:"Enter SAC code"})]})]}),e.jsxs(Ce,{onClick:async()=>{await St(),Ae.name.trim()&&Ae.subcategory&&Tt(!1)},className:"w-full bg-blue-600 hover:bg-blue-700",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"})," Add Product"]})]})]})]})})]})}),e.jsxs(Ws,{children:[e.jsxs("div",{className:"mb-4 flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Xe,{value:Lt,onChange:V=>qt(V.target.value),placeholder:"Search products..."})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(mn,{value:hs,onValueChange:V=>{it(V),dt("all")},children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Filter by Category"})}),e.jsxs(hn,{className:"max-h-64",children:[e.jsx(Ks,{value:"all",children:"All Categories"}),G.map(V=>e.jsx(Ks,{value:V,children:V},V))]})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(mn,{value:Pe,onValueChange:dt,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Filter by Subcategory"})}),e.jsxs(hn,{className:"max-h-64",children:[e.jsx(Ks,{value:"all",children:"All Subcategories"}),se.filter(V=>hs==="all"||V.category===hs).map(V=>e.jsx(Ks,{value:V.name,children:V.name},V.id))]})]})})]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:ke.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-6",children:"No products created yet"}):ke.filter(V=>{const Te=V.name.toLowerCase().includes(Lt.toLowerCase()),Ye=Pe==="all"||V.subcategory===Pe,Oe=se.find(Qt=>Qt.name===V.subcategory),yt=hs==="all"||Oe&&Oe.category===hs;return Te&&Ye&&yt}).map(V=>e.jsx("div",{className:"p-4 border rounded-lg bg-white hover:border-blue-400 transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(il,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium block",children:V.name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Subcategories: ",V.subcategory||"-"]}),V.taxCodeType&&V.taxCodeValue&&e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[V.taxCodeType.toUpperCase(),": ",V.taxCodeValue]})]})]}),oa&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>Rt(V),title:"Clone Product",children:e.jsx(cL,{className:"h-4 w-4"})}),e.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>{ht(te(V))},children:"Edit"}),e.jsx(Ce,{size:"sm",variant:"destructive",onClick:()=>bt(V.id),children:e.jsx(Gc,{className:"h-4 w-4"})})]})]})},V.id))})]})]}),rt&&e.jsx(du,{open:!!rt,onOpenChange:V=>!V&&ht(null),children:e.jsxs(dA,{children:[e.jsx(AA,{children:e.jsx(uA,{children:"Edit Product"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Product Name ",e.jsx(Vl,{})]}),e.jsx(Xe,{value:rt.name,onChange:V=>ht(Te=>({...Te,name:V.target.value})),placeholder:"e.g. Ceramic Tiles, Wooden Door"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Select Subcategory ",e.jsx(Vl,{})]}),e.jsxs(mn,{value:rt.subcategory,onValueChange:V=>ht(Te=>({...Te,subcategory:V})),children:[e.jsx(un,{className:"max-h-64 overflow-y-auto",children:e.jsx(gn,{placeholder:"Select subcategory"})}),e.jsx(hn,{className:"max-h-64",children:se.map(V=>e.jsxs(Ks,{value:V.name,children:[V.name," (",V.category,")"]},V.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Tax Code Type"}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:"edit-hsn",name:"editProductTaxCodeType",value:"hsn",checked:rt.taxCodeType==="hsn",onChange:V=>ht(Te=>({...Te,taxCodeType:V.target.value})),className:"w-4 h-4"}),e.jsx(We,{htmlFor:"edit-hsn",className:"cursor-pointer mb-0",children:"HSN Code"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:"edit-sac",name:"editProductTaxCodeType",value:"sac",checked:rt.taxCodeType==="sac",onChange:V=>ht(Te=>({...Te,taxCodeType:V.target.value})),className:"w-4 h-4"}),e.jsx(We,{htmlFor:"edit-sac",className:"cursor-pointer mb-0",children:"SAC Code"})]})]})]}),rt.taxCodeType&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:[rt.taxCodeType==="hsn"?"HSN":"SAC"," Code"]}),e.jsx(Xe,{value:rt.taxCodeValue||"",onChange:V=>ht(Te=>({...Te,taxCodeValue:V.target.value})),placeholder:`Enter ${rt.taxCodeType==="hsn"?"HSN":"SAC"} code`})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(Ce,{variant:"outline",onClick:()=>ht(null),children:"Cancel"}),e.jsx(Ce,{onClick:()=>{rt.name.trim()&&rt.subcategory?(Zt(),ht(null)):t({title:"Error",description:"Please fill in all fields",variant:"destructive"})},className:"bg-blue-600 hover:bg-blue-700",children:"Save Changes"})]})]})]})})]}),e.jsxs(iu,{value:"materials",className:"space-y-4 mt-4",children:[(cr||c?.role==="purchase_team")&&e.jsxs(Ms,{className:"border-blue-200 bg-blue-50",children:[e.jsxs(Ar,{children:[e.jsxs(ur,{className:"text-blue-900",children:[e.jsx(il,{className:"inline-block mr-2 h-4 w-4 text-blue-900"})," Create Material"]}),e.jsx(sa,{className:"text-blue-800",children:"Add new material templates for suppliers to use"})]}),e.jsxs(Ws,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Item Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Xe,{value:Gt.name,onChange:V=>Ys({...Gt,name:V.target.value}),placeholder:"Enter Item name"}),Gt.name&&Vt.some(V=>V.name.toLowerCase().trim()===Gt.name.toLowerCase().trim())&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:" This material name already exists"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Item Code (Auto)"}),e.jsx(Xe,{value:Gt.code,disabled:!0,className:"bg-muted"}),Gt.code&&Vt.some(V=>V.code===Gt.code)&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:" This item code already exists"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Vendor Category"}),e.jsxs(mn,{value:Gt.vendorCategory,onValueChange:V=>Ys({...Gt,vendorCategory:V}),children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select vendor category"})}),e.jsx(hn,{className:"max-h-[200px] overflow-y-auto",children:ys.length===0?e.jsx(Ks,{value:"none",disabled:!0,children:"No categories available"}):ys.map(V=>e.jsx(Ks,{value:V.name,children:V.name},V.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Category"}),e.jsxs(mn,{value:Gt.category,onValueChange:V=>Ys({...Gt,category:V,subCategory:""}),children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select Category"})}),e.jsx(hn,{className:"max-h-[200px] overflow-y-auto",children:G.map(V=>e.jsx(Ks,{value:V,children:V},V))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Subcategory"}),e.jsxs(mn,{value:Gt.subCategory,onValueChange:V=>Ys({...Gt,subCategory:V}),disabled:!Gt.category,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select Subcategory"})}),e.jsx(hn,{className:"max-h-[200px] overflow-y-auto",children:$e(Gt.category).map(V=>e.jsx(Ks,{value:V.name,children:V.name},V.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Tax Code Type"}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:"hsn",name:"taxCodeType",value:"hsn",checked:Gt.taxCodeType==="hsn",onChange:V=>Ys({...Gt,taxCodeType:V.target.value}),className:"w-4 h-4"}),e.jsx(We,{htmlFor:"hsn",className:"cursor-pointer mb-0",children:"HSN Code"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:"sac",name:"taxCodeType",value:"sac",checked:Gt.taxCodeType==="sac",onChange:V=>Ys({...Gt,taxCodeType:V.target.value}),className:"w-4 h-4"}),e.jsx(We,{htmlFor:"sac",className:"cursor-pointer mb-0",children:"SAC Code"})]})]})]}),Gt.taxCodeType&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:[Gt.taxCodeType==="hsn"?"HSN":"SAC"," Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Xe,{value:Gt.taxCodeValue,onChange:V=>Ys({...Gt,taxCodeValue:V.target.value}),placeholder:`Enter ${Gt.taxCodeType==="hsn"?"HSN":"SAC"} code`})]})]}),e.jsxs(Ce,{onClick:Cn,disabled:!Gt.name.trim()||Vt.some(V=>V.name.toLowerCase().trim()===Gt.name.toLowerCase().trim())||Vt.some(V=>V.code===Gt.code)||Gt.taxCodeType&&!Gt.taxCodeValue.trim(),className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(wc,{className:"mr-2 h-4 w-4"})," Create Material"]})]})]}),(cr||c?.role==="purchase_team")&&e.jsxs(Ms,{children:[e.jsxs(Ar,{children:[e.jsx(ur,{children:"Created Material Templates"}),e.jsx(sa,{children:"Manage all material templates created for suppliers"}),e.jsx("div",{className:"mt-4",children:e.jsx(Xe,{placeholder:"Search materials...",value:is,onChange:V=>Ss(V.target.value),className:"max-w-sm"})})]}),e.jsx(Ws,{children:Vt.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No material templates created yet. Create one above."}):e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto p-2",children:Vt.filter(V=>(V.name+" "+V.code+" "+(V.category||"")).toLowerCase().includes(is.toLowerCase())).slice(0,36).map(V=>e.jsxs("div",{className:"p-4 border rounded flex items-center justify-between bg-white",children:[e.jsx("div",{className:"flex-1",children:jr===V.id?e.jsxs("div",{className:"space-y-3 w-full",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(We,{children:["Item Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Xe,{value:Mt.name,onChange:Te=>bn({...Mt,name:Te.target.value}),placeholder:"Enter material name"})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Item Code"}),e.jsx(Xe,{value:V.code,disabled:!0,className:"bg-muted",placeholder:"Auto-generated"})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Vendor Category"}),e.jsxs(mn,{value:Mt.vendorCategory||"",onValueChange:Te=>bn({...Mt,vendorCategory:Te}),children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select vendor category"})}),e.jsx(hn,{className:"max-h-[200px] overflow-y-auto",children:ys.length===0?e.jsx(Ks,{value:"none",disabled:!0,children:"No categories available"}):ys.map(Te=>e.jsx(Ks,{value:Te.name,children:Te.name},Te.id))})]})]}),e.jsxs("div",{children:[e.jsxs(We,{children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(mn,{value:Mt.category,onValueChange:Te=>bn({...Mt,category:Te,subCategory:""}),children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select Category"})}),e.jsx(hn,{className:"max-h-[200px] overflow-y-auto",children:G.map(Te=>e.jsx(Ks,{value:Te,children:Te},Te))})]})]}),e.jsxs("div",{children:[e.jsxs(We,{children:["Subcategory ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(mn,{value:Mt.subCategory||"",onValueChange:Te=>bn({...Mt,subCategory:Te}),disabled:!Mt.category,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select Subcategory"})}),e.jsx(hn,{className:"max-h-[200px] overflow-y-auto",children:$e(Mt.category||"").map(Te=>e.jsx(Ks,{value:Te.name,children:Te.name},Te.id))})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Tax Code Type"}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:`hsn-${V.id}`,name:`taxCodeType-${V.id}`,value:"hsn",checked:Mt.taxCodeType==="hsn",onChange:Te=>bn({...Mt,taxCodeType:Te.target.value}),className:"w-4 h-4"}),e.jsx(We,{htmlFor:`hsn-${V.id}`,className:"cursor-pointer mb-0",children:"HSN Code"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",id:`sac-${V.id}`,name:`taxCodeType-${V.id}`,value:"sac",checked:Mt.taxCodeType==="sac",onChange:Te=>bn({...Mt,taxCodeType:Te.target.value}),className:"w-4 h-4"}),e.jsx(We,{htmlFor:`sac-${V.id}`,className:"cursor-pointer mb-0",children:"SAC Code"})]})]})]}),Mt.taxCodeType&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs(We,{children:[Mt.taxCodeType==="hsn"?"HSN":"SAC"," Code"]}),e.jsx(Xe,{value:Mt.taxCodeValue||"",onChange:Te=>bn({...Mt,taxCodeValue:Te.target.value}),placeholder:`Enter ${Mt.taxCodeType==="hsn"?"HSN":"SAC"} code`})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[e.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>Ur(null),children:"Cancel"}),e.jsx(Ce,{size:"sm",onClick:async()=>{if(!(Mt.name||"").trim()){t({title:"Error",description:"Material name is required",variant:"destructive"});return}if(!Mt.category){t({title:"Error",description:"Category is required",variant:"destructive"});return}if(!Mt.subCategory){t({title:"Error",description:"Subcategory is required",variant:"destructive"});return}if(Mt.taxCodeType&&!Mt.taxCodeValue?.trim()){t({title:"Error",description:`${Mt.taxCodeType==="hsn"?"HSN":"SAC"} code is required when tax code type is selected`,variant:"destructive"});return}try{const Te={name:Mt.name,code:V.code,category:Mt.category,subcategory:Mt.subCategory,vendor_category:Mt.vendorCategory||null,tax_code_type:Mt.taxCodeType||null,tax_code_value:Mt.taxCodeValue||null},Ye=await lt(`/material-templates/${V.id}`,{method:"PUT",body:JSON.stringify(Te)});if(!Ye.ok){const yt=await Ye.text().catch(()=>"");throw console.error("[material-templates PUT] failed",Ye.status,yt),t({title:"Error",description:yt||"Failed to update material (server error)",variant:"destructive"}),new Error(yt||"update failed")}const Oe=await Ye.json().catch(()=>null);vs(yt=>yt.map(Qt=>Qt.id===V.id?{...Qt,name:Mt.name,category:Mt.category,subcategory:Mt.subCategory,vendor_category:Mt.vendorCategory,tax_code_type:Mt.taxCodeType,tax_code_value:Mt.taxCodeValue,...Oe?.template||{}}:Qt)),Ur(null),t({title:"Success",description:"Material template updated"})}catch(Te){console.error("update error",Te),Te?.message?.includes("update failed")||t({title:"Error",description:"Failed to update material template",variant:"destructive"})}},children:"Save Changes"})]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:V.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[V.code,V.category&&e.jsxs("span",{className:"ml-2 text-[11px] text-gray-500",children:[" ",V.category]}),(V.subcategory||V.sub_category)&&e.jsxs("span",{className:"ml-1 text-[11px] text-gray-400",children:["/ ",V.subcategory||V.sub_category]})]})]})}),jr!==V.id&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{size:"sm",onClick:()=>{Ur(V.id),bn({...Mt,name:V.name,category:V.category||"",subCategory:V.subcategory||V.sub_category||"",vendorCategory:V.vendor_category||"",taxCodeType:V.tax_code_type,taxCodeValue:V.tax_code_value||""})},children:"Edit"}),e.jsx(Ce,{size:"sm",variant:"destructive",onClick:async()=>{if(window.confirm(`Delete "${V.name}"? This cannot be undone.`))try{console.log("[DELETE template]",V.id,V.name);const Te=await lt(`/material-templates/${V.id}`,{method:"DELETE"});if(console.log("[DELETE response]",Te.status,Te.ok),!Te.ok){const Ye=await Te.json();throw new Error(Ye.message||"Failed to delete")}vs(Ye=>Ye.filter(Oe=>Oe.id!==V.id)),t({title:"Success",description:"Material deleted"})}catch(Te){console.error("delete error",Te),t({title:"Error",description:Te instanceof Error?Te.message:"Failed to delete material",variant:"destructive"})}},children:"Delete"})]})]},V.id))})})]})]}),e.jsx(iu,{value:"shops",className:"space-y-4 mt-4",children:(cr||c?.role==="purchase_team")&&e.jsxs(Ms,{children:[e.jsx(Ar,{children:e.jsx(ur,{children:"Add New Shop"})}),e.jsxs(Ws,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Shop Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Xe,{value:Bs.name,onChange:V=>Js({...Bs,name:V.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Location ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Xe,{value:Bs.location,onChange:V=>Js({...Bs,location:V.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["City ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Xe,{value:Bs.city,onChange:V=>Js({...Bs,city:V.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(mn,{value:Bs.phoneCountryCode||"+91",onValueChange:V=>Js({...Bs,phoneCountryCode:V}),children:[e.jsx(un,{className:"w-28",children:e.jsx(gn,{placeholder:"+91"})}),e.jsx(hn,{children:wK.map(V=>e.jsx(Ks,{value:V.code,children:V.code},V.code))})]}),e.jsx(Xe,{value:Bs.contactNumber||"",onChange:V=>Js({...Bs,contactNumber:V.target.value}),placeholder:"Enter phone number",type:"tel"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["State ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Xe,{value:Bs.state,onChange:V=>Js({...Bs,state:V.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Country ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Xe,{value:Bs.country,onChange:V=>Js({...Bs,country:V.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Pincode / Zipcode ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Xe,{value:Bs.pincode,onChange:V=>Js({...Bs,pincode:V.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"GST No (Optional)"}),e.jsx(Xe,{value:Bs.gstNo,onChange:V=>Js({...Bs,gstNo:V.target.value}),placeholder:"29ABCDE1234F1Z5"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Vendor Category (Optional)"}),e.jsxs(mn,{value:Bs.vendorCategory,onValueChange:V=>Js({...Bs,vendorCategory:V}),children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select vendor category"})}),e.jsx(hn,{className:"max-h-[200px] overflow-y-auto",children:ys.length===0?e.jsx(Ks,{value:"none",disabled:!0,children:"No categories available"}):ys.map(V=>e.jsx(Ks,{value:V.name,children:V.name},V.id))})]})]})]}),e.jsx(Ce,{onClick:Pn?ms:wr,children:Pn?"Save Changes":"Add Shop"})]})]})}),Na&&e.jsx(iu,{value:"approvals",className:"space-y-4 mt-4",children:e.jsxs(Ms,{children:[e.jsxs(Ar,{children:[e.jsx(ur,{children:"Shop Approval Requests"}),e.jsx(sa,{children:"Review and approve/reject new shop submissions"})]}),e.jsx(Ws,{className:"space-y-4",children:A.filter(V=>V.status==="pending").length===0?e.jsx("p",{className:"text-muted-foreground",children:"No pending approval requests"}):A.filter(V=>V.status==="pending").map(V=>e.jsx(Ms,{className:"border-border/50",children:e.jsxs(Ws,{className:"pt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:V.shop.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted by: ",V.submittedBy," at"," ",new Date(V.submittedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Location"}),e.jsx("p",{children:V.shop.location})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"City"}),e.jsx("p",{children:V.shop.city})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"State"}),e.jsx("p",{children:V.shop.state})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Country"}),e.jsx("p",{children:V.shop.country})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Pincode"}),e.jsx("p",{children:V.shop.pincode})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Phone"}),e.jsxs("p",{children:[V.shop.phoneCountryCode,V.shop.contactNumber]})]}),V.shop.gstNo&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"GST No"}),e.jsx("p",{children:V.shop.gstNo})]})]}),Va&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ce,{size:"sm",onClick:()=>ds(V),className:"gap-2",disabled:!V?.shop?.id,children:[e.jsx(lo,{className:"h-4 w-4"})," Approve"]}),ee===V.id?e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsx(Xe,{placeholder:"Reason...",value:k,onChange:Te=>K(Te.target.value),className:"text-sm"}),e.jsx(Ce,{size:"sm",onClick:()=>Nn(V.id),children:"Confirm"}),e.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>q(null),children:"Cancel"})]}):e.jsxs(Ce,{size:"sm",variant:"outline",onClick:()=>q(V.id),className:"gap-2",children:[e.jsx(Dy,{className:"h-4 w-4"})," Reject"]})]})]})},V.id))}),A.filter(V=>V.status!=="pending").length>0&&e.jsxs(Ms,{children:[e.jsx(Ar,{children:e.jsx(ur,{className:"text-base",children:"Processed Requests"})}),e.jsx(Ws,{className:"space-y-3",children:A.filter(V=>V.status!=="pending").map(V=>e.jsxs("div",{className:"flex justify-between items-start p-3 bg-muted/50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:V.shop.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:V.submittedBy})]}),e.jsx("div",{className:"text-right",children:e.jsx(Bl,{variant:V.status==="approved"?"default":"destructive",children:V.status==="approved"?"LA":V.status.charAt(0).toUpperCase()+V.status.slice(1)})})]},V.id))})]})]})}),(cr||c?.role==="purchase_team")&&e.jsx(iu,{value:"material-approvals",className:"space-y-4 mt-4",children:e.jsxs(Ms,{children:[e.jsxs(Ar,{children:[e.jsx(ur,{children:"Material Approval Requests"}),e.jsx(sa,{children:"Review and approve/reject new material submissions"})]}),e.jsx(Ws,{className:"space-y-4",children:w.filter(V=>V.status==="pending").length===0?e.jsx("p",{className:"text-muted-foreground",children:"No pending material approvals"}):w.filter(V=>V.status==="pending").map(V=>e.jsx(Ms,{className:"border-border/50",children:e.jsxs(Ws,{className:"pt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:V.material.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted by: ",V.submittedBy," at"," ",new Date(V.submittedAt).toLocaleDateString()]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Code"}),e.jsx("p",{children:V.material.code||V.material.template_code||V.material.templateCode||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Rate"}),e.jsxs("p",{children:["",V.material.rate??V.material.price??"-"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Unit"}),e.jsx("p",{children:V.material.unit||V.material.uom||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Category"}),e.jsx("p",{children:V.material.category||V.material.categoryName||V.material.category_name||V.material.vendorCategory||V.material.vendor_category||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Sub Category"}),e.jsx("p",{children:V.material.subCategory||V.material.subcategory||V.material.sub_category||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Brand"}),e.jsx("p",{children:V.material.brandName||V.material.brandname||V.material.brand||V.material.make||"-"})]})]})]}),Va&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ce,{size:"sm",onClick:()=>Yn(V.id),className:"gap-2",disabled:!V?.material?.id,children:[e.jsx(lo,{className:"h-4 w-4"})," Approve"]}),ee===V.id?e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsx(Xe,{placeholder:"Reason...",value:k,onChange:Te=>K(Te.target.value),className:"text-sm"}),e.jsx(Ce,{size:"sm",onClick:()=>sr(V.id),children:"Confirm"}),e.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>q(null),children:"Cancel"})]}):e.jsxs(Ce,{size:"sm",variant:"outline",onClick:()=>q(V.id),className:"gap-2",children:[e.jsx(Dy,{className:"h-4 w-4"})," Reject"]})]})]})},V.id))}),w.filter(V=>V.status!=="pending").length>0&&e.jsxs(Ms,{children:[e.jsx(Ar,{children:e.jsx(ur,{className:"text-base",children:"Processed Requests"})}),e.jsx(Ws,{className:"space-y-3",children:w.filter(V=>V.status!=="pending").map(V=>e.jsxs("div",{className:"flex justify-between items-start p-3 bg-muted/50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:V.material.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:V.submittedBy})]}),e.jsx("div",{className:"text-right",children:e.jsx(Bl,{variant:V.status==="approved"?"default":"destructive",children:V.status==="approved"?"LA":V.status.charAt(0).toUpperCase()+V.status.slice(1)})})]},V.id))})]})]})}),Ma&&e.jsx(iu,{value:"messages",className:"space-y-4 mt-4",children:e.jsxs(Ms,{children:[e.jsxs(Ar,{children:[e.jsx(ur,{children:"Support Messages"}),e.jsx(sa,{children:"Messages from suppliers and users sent to Admin & Software Team"})]}),e.jsx(Ws,{className:"space-y-4",children:(u||[]).length===0?e.jsx("p",{className:"text-muted-foreground",children:"No messages yet"}):(u||[]).map(V=>e.jsx(Ms,{className:"border-border/50",children:e.jsxs(Ws,{className:"pt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:V.sender_name||V.sentBy}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(V.sent_at||V.sentAt).toLocaleString()}),V.info&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-semibold",children:"Info: "}),V.info]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[!V.is_read&&e.jsx(Bl,{variant:"default",children:"New"}),$a&&e.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>{(async()=>{try{await b?.(V.id),t({title:"Success",description:"Message deleted"})}catch{t({title:"Error",description:"Failed to delete message",variant:"destructive"})}})()},children:e.jsx(Gc,{className:"h-4 w-4 text-red-500"})})]})]}),e.jsx("p",{className:"text-sm leading-relaxed bg-muted/50 p-3 rounded",children:V.message})]})},V.id))})]})}),e.jsx(iu,{value:"support",className:"space-y-4 mt-4",children:e.jsxs(Ms,{children:[e.jsxs(Ar,{children:[e.jsx(ur,{children:"Technical Support"}),e.jsx(sa,{children:"Request new categories or report issues to the software team."})]}),e.jsxs(Ws,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Your Name ",e.jsx(Vl,{})]}),e.jsx(Xe,{placeholder:"Enter your name...",value:tn,onChange:V=>Is(V.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Additional Information (Optional)"}),e.jsx(Cl,{placeholder:"Any additional context or details...",className:"min-h-[80px]",value:dn,onChange:V=>Hs(V.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Message / Request ",e.jsx(Vl,{})]}),e.jsx(Cl,{placeholder:"I need a new category for 'Smart Home Devices'...",className:"min-h-[150px]",value:hr,onChange:V=>qs(V.target.value),"data-testid":"textarea-support-message"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-3 rounded text-sm text-blue-700 dark:text-blue-300",children:" This message will be sent to Admin & Software Team"}),e.jsxs(Ce,{onClick:ha,"data-testid":"button-send-support",children:[e.jsx(yh,{className:"mr-2 h-4 w-4"})," Send Request"]}),ws.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No messages yet"}):ws.map(V=>e.jsx(Ms,{className:"border-border/50",children:e.jsxs(Ws,{className:"pt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold",children:["You (",tn,")"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(V.sent_at||V.sentAt).toLocaleString()}),V.info&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-semibold",children:"Info: "}),V.info]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[!V.is_read&&e.jsx(Bl,{variant:"default",children:"Unread"}),$a&&e.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>{(async()=>{try{await b?.(V.id),t({title:"Success",description:"Message deleted"})}catch{t({title:"Error",description:"Failed to delete message",variant:"destructive"})}})()},children:e.jsx(Gc,{className:"h-4 w-4 text-red-500"})})]})]}),e.jsx("p",{className:"text-sm leading-relaxed bg-muted/50 p-3 rounded",children:V.message})]})},V.id))]})]})})]})]})})}function Tj({children:t,shopName:s="Shop",shopLocation:n="",shopApproved:r=!1}){const[,i]=co(),{logout:c}=ix(),[A,u]=S.useState(!1),d=()=>{c(),i("/")},h=[{label:"Dashboard",icon:i5,path:"/supplier/dashboard"},...r?[{label:"Manage Materials",icon:il,path:"/supplier/materials"}]:[],{label:"Messages / Support",icon:yh,path:"/supplier/support"}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("nav",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>u(!A),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:A?e.jsx(Ax,{size:24}):e.jsx(l5,{size:24})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s}),n&&e.jsx("p",{className:"text-sm text-gray-500",children:n})]})]}),e.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition",children:[e.jsx(o5,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})})}),e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:`
            fixed inset-y-16 left-0 w-64 bg-white border-r border-gray-200 
            transition-transform duration-300 ease-in-out
            lg:static lg:inset-auto lg:translate-x-0 lg:w-64
            ${A?"translate-x-0":"-translate-x-full"}
            z-30
          `,children:e.jsx("nav",{className:"space-y-1 p-4",children:h.map(o=>{const m=o.icon;return e.jsxs("button",{onClick:()=>{i(o.path),u(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition",children:[e.jsx(m,{size:20}),e.jsx("span",{className:"font-medium",children:o.label})]},o.path)})})}),e.jsx("main",{className:"flex-1 w-full",children:t})]})]})}const SK=["pcs","kg","meter","sqft","cum","litre","set","nos"],Wg=()=>e.jsx("span",{className:"text-red-500 ml-1",children:"*"});function bI(){const{toast:t}=ua(),{user:s,addSupportMessage:n,deleteMessage:r,supportMessages:i}=fi(),[c,A]=S.useState("templates"),[u,d]=S.useState(""),[h,o]=S.useState(""),[m,y]=S.useState(""),[p,j]=S.useState(""),[b,w]=S.useState(""),[B,U]=S.useState([]),[Q,k]=S.useState(!0),[K,ee]=S.useState(""),[q,G]=S.useState(""),[W,he]=S.useState([]),[Z,ie]=S.useState([]),[ce,ae]=S.useState([]),[de,se]=S.useState(!1),[re,te]=S.useState(null),[be,He]=S.useState([]),[pe,Y]=S.useState(""),[me,Se]=S.useState(!1),[je,Le]=S.useState([]),[ge,ye]=S.useState({rate:"",unit:"",brandname:"",modelnumber:"",category:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""});S.useEffect(()=>{Ne(),ke(),Be(),Qe(),we()},[]);const we=async()=>{try{const tt=localStorage.getItem("authToken"),Lt=await fetch("/api/supplier/my-shops",{headers:tt?{Authorization:`Bearer ${tt}`}:{}});if(!Lt.ok)return;const Fs=(await Lt.json()).shops||[],xs=Fs.find(hs=>hs.approved===!0)||Fs[0];xs&&(d(xs.name),o(xs.location||""),Y(xs.id))}catch(tt){console.error("Error loading supplier shops:",tt)}},Ne=async()=>{try{const tt=localStorage.getItem("authToken");console.log("[SupplierMaterials] loadMaterialTemplates token?",!!tt);const qt=await(await fetch("/api/material-templates",{headers:tt?{Authorization:`Bearer ${tt}`}:{}})).json();U(qt.templates||[])}catch(tt){console.error("Error loading templates:",tt),t({title:"Error",description:"Failed to load material templates",variant:"destructive"})}finally{k(!1)}},ke=async()=>{try{const Lt=await(await fetch("/api/shops")).json();He(Lt.shops||[])}catch(tt){console.error("Error loading shops:",tt),t({title:"Error",description:"Failed to load shops",variant:"destructive"})}},Be=async()=>{try{se(!0);const Lt=await(await fetch("/api/material-categories")).json();he(Lt.categories||[])}catch(tt){console.error("Error loading categories:",tt)}finally{se(!1)}},Ae=async tt=>{if(!tt){ie([]);return}try{const qt=await(await fetch(`/api/material-subcategories/${encodeURIComponent(tt)}`)).json();ie(qt.subcategories||[])}catch(Lt){console.error("Error loading subcategories:",Lt),ie([])}},Qe=async()=>{try{const Lt=await(await fetch("/api/products")).json();ae(Lt.products||[])}catch(tt){console.error("Error loading products:",tt),ae([])}},le=tt=>{te(tt),ye({rate:"",unit:"",brandname:"",modelnumber:"",category:tt.category||"",subcategory:tt.subcategory||tt.sub_category||"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}),s?.role!=="supplier"&&Y(""),tt.category&&Ae(tt.category),setTimeout(()=>{const Lt=document.getElementById("material-form");Lt&&Lt.scrollIntoView({behavior:"smooth",block:"start"})},100)};S.useEffect(()=>{(async()=>{if(!(!re||!pe))try{const Lt=await fetch("/api/materials");let qt=null;if(Lt.ok&&(qt=((await Lt.json()).materials||[]).find(hs=>String(hs.template_id)===String(re.id)&&String(hs.shop_id)===String(pe))),!qt){const Fs=await fetch("/api/my-material-submissions");Fs.ok&&(qt=((await Fs.json()).submissions||[]).find(it=>String(it.template_id)===String(re.id)&&String(it.shop_id)===String(pe)))}qt?(ye(()=>({rate:qt.rate!=null?String(qt.rate):"",unit:qt.unit||"",brandname:qt.brandname||"",modelnumber:qt.modelnumber||"",category:qt.category||"",subcategory:qt.subcategory||"",product:qt.product||"",technicalspecification:qt.technicalspecification||"",dimensions:qt.dimensions||"",finishtype:qt.finishtype||"",metaltype:qt.metaltype||""})),qt.category&&await Ae(qt.category)):ye(Fs=>({...Fs,rate:"",unit:"",brandname:"",modelnumber:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}))}catch(Lt){console.warn("prefill material failed",Lt)}})()},[pe,re]);const ct=async tt=>{if(tt.preventDefault(),!re){t({title:"Error",description:"Please select a template",variant:"destructive"});return}if(!pe){t({title:"Error",description:"No shop selected for submission",variant:"destructive"});return}if(!ge.rate||!ge.unit){t({title:"Error",description:"Rate and unit are required",variant:"destructive"});return}const Lt=je.length>0?je:[{template_id:re.id,shop_id:pe,...ge}];Se(!0);try{const qt=localStorage.getItem("authToken"),Fs={"Content-Type":"application/json"};qt&&(Fs.Authorization=`Bearer ${qt}`);for(const xs of Lt){const hs={template_id:xs.template_id,shop_id:xs.shop_id,rate:xs.rate,unit:xs.unit,brandname:xs.brandname,modelnumber:xs.modelnumber,subcategory:xs.subcategory,category:xs.category,product:xs.product,technicalspecification:xs.technicalspecification,dimensions:xs.dimensions,finishtype:xs.finishtype,metaltype:xs.metaltype},it=await fetch("/api/material-submissions",{method:"POST",headers:Fs,body:JSON.stringify(hs)});if(!it.ok){const Pe=await it.text();throw new Error(`Failed to submit material (${it.status}): ${Pe}`)}}t({title:"Success",description:"Material(s) submitted for approval"}),te(null),ye({rate:"",unit:"",brandname:"",modelnumber:"",category:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}),s?.role!=="supplier"&&Y(""),Le([])}catch(qt){console.error("Error submitting material:",qt),t({title:"Error",description:"Failed to submit material",variant:"destructive"})}finally{Se(!1)}},rt=()=>{if(!re||!pe){t({title:"Error",description:"Please select a template and shop",variant:"destructive"});return}if(!ge.rate||!ge.unit){t({title:"Error",description:"Rate and unit are required to add entry",variant:"destructive"});return}const tt={template_id:re.id,shop_id:pe,...ge};Le(Lt=>[...Lt,tt]),ye(Lt=>({...Lt,rate:"",unit:"",brandname:"",modelnumber:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}))},ht=tt=>{Le(Lt=>Lt.filter((qt,Fs)=>Fs!==tt))},ft=s?.role==="supplier",gt=ft?Tj:Sa;return e.jsx(gt,{...ft?{shopName:u,shopLocation:h,shopApproved:!0}:{},children:e.jsxs("div",{className:"p-6 lg:p-8 max-w-6xl mx-auto",children:[e.jsxs("div",{className:ft?"mb-8 bg-gradient-to-r from-blue-500 via-blue-400 to-cyan-400 rounded-xl p-8 text-white shadow-lg":"mb-8",children:[e.jsx("h1",{className:ft?"text-4xl font-bold mb-2":"text-3xl font-bold mb-2",children:" Manage Materials"}),e.jsx("p",{className:ft?"text-blue-50":"text-gray-600",children:ft?"Select from available material templates, fill in the essentials (rate, unit, brand), and submit for approval":"Select material templates, fill in all required details, select shop, and submit for approval"})]}),e.jsxs("div",{className:"grid gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(il,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Available Templates"}),e.jsxs(Bl,{className:"bg-blue-100 text-blue-700",children:[B.length," Total"]})]}),e.jsx("div",{className:"space-y-3 mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(We,{className:"text-sm mb-2 block",children:"Search Templates"}),e.jsx(Xe,{value:K,onChange:tt=>ee(tt.target.value),placeholder:"Search by name or code..."})]}),e.jsxs("div",{children:[e.jsx(We,{className:"text-sm mb-2 block",children:"Filter by Vendor Category"}),e.jsxs(mn,{value:q,onValueChange:G,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"All categories"})}),e.jsx(hn,{children:Array.from(new Set(B.map(tt=>tt.vendor_category).filter(Boolean))).map(tt=>e.jsx(Ks,{value:tt,children:tt},tt))})]})]})]})}),Q?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(Sl,{className:"w-8 h-8 animate-spin text-blue-500"})}):B.length===0?e.jsx(Ms,{className:"border-dashed border-2 border-gray-300",children:e.jsxs(Ws,{className:"pt-8 pb-8 text-center",children:[e.jsx(il,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("div",{className:"text-gray-500 font-medium",children:"No material templates available yet"})]})}):e.jsx("div",{className:"border rounded-md max-h-[400px] overflow-y-auto shadow-sm bg-white divide-y",children:e.jsx("div",{className:"",children:B.filter(tt=>(tt.name+" "+tt.code+" "+(tt.category||"")).toLowerCase().includes(K.toLowerCase())).filter(tt=>!q||tt.vendor_category===q).map(tt=>e.jsx("div",{className:"py-1 px-3 border-b last:border-0 hover:bg-blue-50 transition-all duration-200 cursor-pointer group flex items-center gap-4",children:e.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-3",children:[e.jsx("span",{className:"font-semibold text-gray-800 group-hover:text-blue-700 truncate",children:tt.name}),e.jsxs("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:["(",tt.code,")"]}),tt.category&&e.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 py-0.5 rounded text-gray-600 border border-gray-200 whitespace-nowrap",children:tt.category}),e.jsx(Ce,{size:"sm",className:"h-7 px-3 text-xs bg-blue-600 hover:bg-blue-700 text-white ml-2 shrink-0",onClick:Lt=>{Lt.stopPropagation(),le(tt)},children:"Select"})]})},tt.id))})})]}),re&&e.jsxs(Ms,{id:"material-form",className:"bg-gradient-to-br from-white to-blue-50 border-blue-200 border-2 shadow-lg scroll-mt-20",children:[e.jsxs(Ar,{className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-t-lg",children:[e.jsx(ur,{className:"text-2xl",children:" Submit Material Details"}),e.jsxs(sa,{className:"text-blue-100",children:["Completing submission for: ",e.jsx("strong",{className:"text-white",children:re.name})," (",re.code,")"]})]}),e.jsx(Ws,{className:"pt-8",children:e.jsxs("form",{onSubmit:ct,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:" Your Shop"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsxs(We,{className:"font-semibold text-gray-700",children:["Shop ",e.jsx(Wg,{})]}),s?.role==="supplier"?e.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg border border-blue-200 font-medium text-gray-800",children:u}):e.jsxs(mn,{value:pe,onValueChange:Y,children:[e.jsx(un,{className:"mt-2",children:e.jsx(gn,{placeholder:"Select a shop"})}),e.jsx(hn,{children:be.map(tt=>e.jsx(Ks,{value:tt.id,children:tt.name},tt.id))})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:" Essential Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(We,{className:"font-semibold text-gray-700",children:["Rate ",e.jsx(Wg,{})]}),e.jsx(Xe,{type:"number",step:"0.01",placeholder:"Enter rate",value:ge.rate,onChange:tt=>ye({...ge,rate:tt.target.value}),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs(We,{className:"font-semibold text-gray-700",children:["Unit ",e.jsx(Wg,{})]}),e.jsxs(mn,{value:ge.unit,onValueChange:tt=>ye({...ge,unit:tt}),children:[e.jsx(un,{className:"mt-2",children:e.jsx(gn,{placeholder:"Select unit"})}),e.jsx(hn,{children:SK.map(tt=>e.jsx(Ks,{value:tt,children:tt},tt))})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(We,{className:"font-semibold text-gray-700",children:"Brand Name"}),e.jsx(Xe,{placeholder:"Enter brand name (optional)",value:ge.brandname,onChange:tt=>ye({...ge,brandname:tt.target.value}),className:"mt-2"})]})]})]}),s?.role!=="supplier"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Model Number"}),e.jsx(Xe,{placeholder:"Enter model number",value:ge.modelnumber,onChange:tt=>ye({...ge,modelnumber:tt.target.value})})]}),e.jsxs("div",{children:[e.jsxs(We,{children:["Category ",e.jsx(Wg,{})]}),e.jsxs(mn,{value:ge.category,onValueChange:tt=>{ye({...ge,category:tt,subcategory:""}),Ae(tt)},children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select category"})}),e.jsx(hn,{children:W.map(tt=>e.jsx(Ks,{value:tt,children:tt},tt))})]})]})]}),(s?.role!=="supplier"||ge.category)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Subcategory"}),e.jsxs(mn,{value:ge.subcategory,onValueChange:tt=>ye({...ge,subcategory:tt,product:""}),disabled:!ge.category||Z.length===0,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:Z.length===0?"No subcategories available":"Select subcategory"})}),e.jsx(hn,{children:Z.map(tt=>e.jsx(Ks,{value:tt,children:tt},tt))})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Product"}),e.jsxs(mn,{value:ge.product,onValueChange:tt=>ye({...ge,product:tt}),disabled:!ge.subcategory||ce.length===0,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:ce.length===0?"No products available":"Select product"})}),e.jsx(hn,{children:ce.filter(tt=>tt.subcategory===ge.subcategory).map(tt=>e.jsxs(Ks,{value:tt.name,children:[tt.name," ","(Subcategory: ",tt.subcategory_name,")"]},tt.id))})]})]})]}),(s?.role!=="supplier"||ge.technicalspecification)&&e.jsxs("div",{children:[e.jsx(We,{children:"Technical Specification"}),e.jsx(Cl,{placeholder:"Enter technical specifications",value:ge.technicalspecification,onChange:tt=>ye({...ge,technicalspecification:tt.target.value}),rows:4})]}),s?.role!=="supplier"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Dimensions"}),e.jsx(Xe,{placeholder:"Enter dimensions",value:ge.dimensions,onChange:tt=>ye({...ge,dimensions:tt.target.value})})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Finish Type"}),e.jsx(Xe,{placeholder:"e.g., matte, glossy, satin",value:ge.finishtype,onChange:tt=>ye({...ge,finishtype:tt.target.value})})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Metal Type"}),e.jsx(Xe,{placeholder:"e.g., steel, copper, aluminum",value:ge.metaltype,onChange:tt=>ye({...ge,metaltype:tt.target.value})})]})]}),je.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200 bg-green-50",children:[e.jsxs("div",{className:"font-semibold text-green-800 mb-4 flex items-center gap-2",children:[" Entries to submit (",je.length,")"]}),e.jsx("div",{className:"space-y-2",children:je.map((tt,Lt)=>e.jsxs("div",{className:"flex items-center justify-between border rounded-lg px-4 py-3 bg-white border-green-300 hover:bg-green-50 transition",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-semibold text-gray-800",children:[" Rate: ",tt.rate,"   Unit: ",tt.unit]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:tt.brandname?` ${tt.brandname}`:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>{ye({rate:tt.rate,unit:tt.unit,brandname:tt.brandname||"",modelnumber:tt.modelnumber||"",category:tt.category||"",subcategory:tt.subcategory||"",product:tt.product||"",technicalspecification:tt.technicalspecification||"",dimensions:tt.dimensions||"",finishtype:tt.finishtype||"",metaltype:tt.metaltype||""})},children:"Edit"}),e.jsx(Ce,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>ht(Lt),children:"Remove"})]})]},Lt))})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(Ce,{type:"button",onClick:rt,variant:"outline",className:"gap-2 border-blue-300 hover:bg-blue-50 text-blue-700",children:[e.jsx(wc,{className:"w-4 h-4"})," Add Another Entry"]}),e.jsxs(Ce,{type:"submit",disabled:me,className:"gap-2 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-semibold",children:[me?e.jsx(Sl,{className:"w-4 h-4 animate-spin"}):"",me?"Submitting...":"Submit for Approval"]}),e.jsx(Ce,{type:"button",variant:"outline",onClick:()=>te(null),className:"gap-2 text-gray-700 hover:bg-gray-100",children:"Cancel"})]})]})})]})]})]})})}function NK(){const{toast:t}=ua(),{addSupportMessage:s,deleteMessage:n,supportMessages:r,user:i}=fi(),[c,A]=S.useState(!1),[u,d]=S.useState(""),[h,o]=S.useState(""),[m,y]=S.useState(""),p=()=>{if(!m||!u){t({title:"Error",description:"Name and message are required",variant:"destructive"});return}(async()=>{try{await s?.(u,m,h),t({title:"Request Sent",description:"Message sent to Admin & Software Team."}),y(""),d(""),o(""),A(!1)}catch{t({title:"Error",description:"Failed to send message",variant:"destructive"})}})()},j=[{title:"Civil Wall",desc:"Brick walls & partitions",href:"/estimators/civil-wall",icon:wl},{title:"Doors",desc:"Door frames & shutters",href:"/estimators/doors",icon:wl},{title:"Flooring",desc:"Tiles & wooden floors",href:"/estimators/flooring",icon:wl},{title:"Electrical",desc:"Wiring & lighting",href:"/estimators/electrical",icon:My},{title:"Plumbing",desc:"Pipes & fixtures",href:"/estimators/plumbing",icon:wl},{title:"Fire-Fighting",desc:"Safety systems",href:"/estimators/fire-fighting",icon:My}];return e.jsx(Sa,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold font-heading",children:"Estimator Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Select an estimator to calculate material requirements"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(b=>e.jsx(ia,{href:b.href,children:e.jsxs(Ms,{className:"group cursor-pointer hover:border-primary hover:shadow-lg transition-all",children:[e.jsxs(Ar,{children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center mb-2 group-hover:scale-110 transition-transform",children:e.jsx(b.icon,{className:"h-5 w-5 text-primary"})}),e.jsx(ur,{children:b.title}),e.jsx(sa,{children:b.desc})]}),e.jsx(Ws,{children:e.jsxs(Ce,{variant:"ghost",className:"w-full justify-between group-hover:translate-x-1 transition-transform",children:["Get Started ",e.jsx(uy,{className:"h-4 w-4"})]})})]})},b.href))}),e.jsxs(Ms,{className:"mt-8",children:[e.jsx(Ar,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yh,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx(ur,{children:"Technical Support"}),e.jsx(sa,{children:"Send a message to the admin team"})]})]}),e.jsx(Ce,{variant:"outline",onClick:()=>A(!c),children:c?"Cancel":"Send Message"})]})}),c&&e.jsxs(Ws,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Your Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Xe,{placeholder:"Enter your name...",value:u,onChange:b=>d(b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Additional Information (Optional)"}),e.jsx(Cl,{placeholder:"Any additional context...",className:"min-h-[80px]",value:h,onChange:b=>o(b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Cl,{placeholder:"Describe your issue or request...",className:"min-h-[150px]",value:m,onChange:b=>y(b.target.value)})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-3 rounded text-sm text-blue-700 dark:text-blue-300",children:" This message will be sent to Admin & Software Team"}),e.jsxs(Ce,{onClick:p,children:[e.jsx(yh,{className:"mr-2 h-4 w-4"})," Send Request"]})]}),(r||[]).filter(b=>b.sender_name===u&&b.sender_name).length>0&&e.jsxs(Ws,{className:"space-y-3 border-t pt-4",children:[e.jsx("p",{className:"font-semibold text-sm",children:"Your Messages:"}),(r||[]).filter(b=>b.sender_name===u&&b.sender_name).map(b=>e.jsx(Ms,{className:"border-border/50",children:e.jsxs(Ws,{className:"pt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sent: ",new Date(b.sent_at||b.sentAt).toLocaleString()]}),b.info&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-semibold",children:"Info: "}),b.info]})]}),e.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>{(async()=>{try{await n?.(b.id),t({title:"Success",description:"Message deleted"})}catch{t({title:"Error",description:"Failed to delete message",variant:"destructive"})}})()},children:e.jsx(Gc,{className:"h-4 w-4 text-red-500"})})]}),e.jsx("p",{className:"text-sm leading-relaxed bg-muted/50 p-3 rounded",children:b.message})]})},b.id))]})]})]})})}function BK(){const{user:t}=fi(),[,s]=co();return S.useEffect(()=>{if(!t){s("/");return}switch(t.role){case"admin":s("/admin/dashboard");break;case"software_team":s("/software/dashboard");break;case"purchase_team":s("/purchase/dashboard");break;case"supplier":s("/supplier/dashboard");break}},[t,s]),t?t.role==="admin"||t.role==="software_team"?e.jsx(qb,{}):t.role==="supplier"?e.jsx(bI,{}):t.role==="purchase_team"?e.jsx(qb,{}):e.jsx(NK,{}):null}function CK(){const[,t]=co(),{user:s}=fi();return S.useEffect(()=>{if(!s||s.role!=="software_team"){t("/");return}t("/admin/dashboard")},[s,t]),null}function EK(){const[,t]=co(),{user:s}=fi();return S.useEffect(()=>{if(!s||s.role!=="purchase_team"){t("/");return}t("/admin/dashboard")},[s,t]),null}const TK=[{code:"+91",country:"India"},{code:"+1",country:"USA"},{code:"+44",country:"UK"},{code:"+61",country:"Australia"},{code:"+971",country:"UAE"},{code:"+81",country:"Japan"},{code:"+49",country:"Germany"}],Yg=()=>e.jsx("span",{className:"text-red-500 ml-1",children:"*"});function FK({onShopAdded:t}){const{toast:s}=ua(),[n,r]=S.useState(!1),[i,c]=S.useState({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:""}),A=(d,h)=>{c(o=>({...o,[d]:h}))},u=async d=>{if(d.preventDefault(),!i.name.trim()){s({title:"Error",description:"Shop name is required",variant:"destructive"});return}if(!i.location.trim()||!i.city.trim()){s({title:"Error",description:"Location and city are required",variant:"destructive"});return}if(!i.contactNumber.trim()){s({title:"Error",description:"Contact number is required",variant:"destructive"});return}r(!0);try{const h=localStorage.getItem("authToken"),o=await fetch("/api/shops",{method:"POST",headers:{"Content-Type":"application/json",...h&&{Authorization:`Bearer ${h}`}},body:JSON.stringify(i)});if(!o.ok){const y=await o.json();throw new Error(y.message||"Failed to create shop")}const m=await o.json();s({title:"Success",description:"Shop submitted for approval! You will be notified once it's approved."}),c({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:""}),t&&t(m.shop)}catch(h){s({title:"Error",description:h instanceof Error?h.message:"Failed to create shop",variant:"destructive"})}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-50 p-4",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-blue-100 rounded-full",children:e.jsx(wl,{size:32,className:"text-blue-600"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Add Your Shop"}),e.jsx("p",{className:"text-gray-600",children:"Complete your supplier profile by adding your shop details"})]}),e.jsx(Ms,{className:"mb-6 border-blue-200 bg-blue-50",children:e.jsx(Ws,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(gh,{className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:"Shop Approval Required"}),e.jsx("p",{className:"text-sm text-gray-700",children:"After you submit your shop details, our team will review them. You'll be notified once your shop is approved and you can start managing materials."})]})]})})}),e.jsxs(Ms,{children:[e.jsxs(Ar,{children:[e.jsx(ur,{children:"Shop Information"}),e.jsx(sa,{children:"Provide accurate details about your shop"})]}),e.jsxs(Ws,{children:[e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(We,{htmlFor:"name",children:["Shop Name",e.jsx(Yg,{})]}),e.jsx(Xe,{id:"name",type:"text",placeholder:"Enter your shop name",value:i.name,onChange:d=>A("name",d.target.value),required:!0,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(We,{htmlFor:"location",children:["Address/Location",e.jsx(Yg,{})]}),e.jsx(Xe,{id:"location",type:"text",placeholder:"Enter shop address",value:i.location,onChange:d=>A("location",d.target.value),required:!0,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs(We,{htmlFor:"city",children:["City",e.jsx(Yg,{})]}),e.jsx(Xe,{id:"city",type:"text",placeholder:"Enter city",value:i.city,onChange:d=>A("city",d.target.value),required:!0,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{htmlFor:"state",children:"State"}),e.jsx(Xe,{id:"state",type:"text",placeholder:"Enter state",value:i.state,onChange:d=>A("state",d.target.value),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(We,{htmlFor:"country",children:"Country"}),e.jsx(Xe,{id:"country",type:"text",placeholder:"Enter country",value:i.country,onChange:d=>A("country",d.target.value),className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(We,{htmlFor:"pincode",children:"Pin Code"}),e.jsx(Xe,{id:"pincode",type:"text",placeholder:"Enter pin code",value:i.pincode,onChange:d=>A("pincode",d.target.value),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs(We,{children:["Contact Number",e.jsx(Yg,{})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(mn,{value:i.phoneCountryCode,onValueChange:d=>A("phoneCountryCode",d),children:[e.jsx(un,{className:"w-32",children:e.jsx(gn,{})}),e.jsx(hn,{children:TK.map(d=>e.jsxs(Ks,{value:d.code,children:[d.code," ",d.country]},d.code))})]}),e.jsx(Xe,{type:"tel",placeholder:"Phone number",value:i.contactNumber,onChange:d=>A("contactNumber",d.target.value),required:!0,className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(We,{htmlFor:"gstNo",children:"GST Number"}),e.jsx(Xe,{id:"gstNo",type:"text",placeholder:"Enter GST number (optional)",value:i.gstNo,onChange:d=>A("gstNo",d.target.value),className:"mt-2"})]}),e.jsx(Ce,{type:"submit",disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700",children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2",children:""}),"Submitting..."]}):"Submit for Approval"})]}),e.jsx("div",{className:"mt-6 p-4 bg-white rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(lo,{className:"text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"What happens next?"})," After submitting your shop details, our approval team will review them within 24-48 hours."]})]})})]})]})]})})}function IK({shopName:t="Shop",shopLocation:s=""}){const[n,r]=S.useState({submitted:0,approved:0,rejected:0,pending:0}),[i,c]=S.useState(!0);S.useEffect(()=>{A()},[]);const A=async()=>{try{const d=localStorage.getItem("authToken"),h=await fetch("/api/supplier/my-submissions",{headers:d?{Authorization:`Bearer ${d}`}:{}});if(!h.ok){console.error("Failed to load stats"),c(!1);return}const m=(await h.json()).submissions||[],y=m.length,p=m.filter(w=>w.status==="approved").length,j=m.filter(w=>w.status==="rejected").length,b=m.filter(w=>w.status==="pending").length;r({submitted:y,approved:p,rejected:j,pending:b})}catch(d){console.error("Error loading stats:",d)}finally{c(!1)}},u=({title:d,value:h,icon:o,color:m})=>e.jsx(Ms,{children:e.jsx(Ws,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:d}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:h})]}),e.jsx("div",{className:`p-3 rounded-full ${m}`,children:e.jsx(o,{size:24,className:"text-white"})})]})})});return e.jsx(Tj,{shopName:t,shopLocation:s,shopApproved:!0,children:e.jsxs("div",{className:"p-6 lg:p-8 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Welcome back! Here's your supplier activity overview."})]}),i?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(d=>e.jsx(Ms,{children:e.jsx(Ws,{className:"pt-6",children:e.jsx("div",{className:"h-20 bg-gray-200 rounded animate-pulse"})})},d))}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(u,{title:"Total Submitted",value:n.submitted,icon:il,color:"bg-blue-500"}),e.jsx(u,{title:"Approved Materials",value:n.approved,icon:lo,color:"bg-green-500"}),e.jsx(u,{title:"Pending Review",value:n.pending,icon:gh,color:"bg-yellow-500"}),e.jsx(u,{title:"Rejected",value:n.rejected,icon:gh,color:"bg-red-500"})]}),e.jsxs(Ms,{children:[e.jsxs(Ar,{children:[e.jsxs(ur,{className:"flex items-center gap-2",children:[e.jsx($L,{size:20}),"Quick Summary"]}),e.jsx(sa,{children:"Overview of your materials and approvals"})]}),e.jsx(Ws,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Success Rate"}),e.jsx("p",{className:"text-sm text-gray-600",children:n.submitted>0?`${Math.round(n.approved/n.submitted*100)}% approved`:"No submissions yet"})]}),e.jsxs(Bl,{className:"bg-blue-600",children:[n.approved,"/",n.submitted]})]}),n.pending>0&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Pending Review"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.pending," material(s) awaiting approval"]})]}),e.jsx(Bl,{className:"bg-yellow-600",children:n.pending})]}),n.rejected>0&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Rejected Materials"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.rejected," material(s) need revision"]})]}),e.jsx(Bl,{className:"bg-red-600",children:n.rejected})]})]})})]}),e.jsxs(Ms,{className:"mt-6",children:[e.jsx(Ar,{children:e.jsx(ur,{children:"Need Help?"})}),e.jsxs(Ws,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Have questions about your submissions or need technical support? Visit the Messages/Support section or contact our team."}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.jsx("p",{children:' Submit materials using the "Manage Materials" section'}),e.jsx("p",{children:" Review approval status for each submission"}),e.jsx("p",{children:" Contact support for urgent issues"})]})]})]})]})})}function FN(){const[,t]=co(),{user:s}=fi(),[n,r]=S.useState("loading"),[i,c]=S.useState([]),[A,u]=S.useState(!0);S.useEffect(()=>{if(!s||s.role!=="supplier"){t("/");return}d()},[s,t]);const d=async()=>{try{if(u(!0),s?.approved!=="approved"){r("not-approved"),u(!1);return}const o=localStorage.getItem("authToken"),m=await fetch("/api/supplier/my-shops",{headers:o?{Authorization:`Bearer ${o}`}:{}});if(!m.ok){console.error("Failed to load shops"),r("no-shop"),u(!1);return}const p=(await m.json()).shops||[];if(c(p),p.length===0)r("no-shop");else{const j=p.find(b=>b.approved===!0);r(j?"shop-approved":"shop-pending")}}catch(o){console.error("Error checking supplier status:",o),r("no-shop")}finally{u(!1)}},h=()=>{r("shop-pending"),d()};if(A)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Sl,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your dashboard..."})]})});if(n==="not-approved")return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-50 p-4",children:e.jsxs(Ms,{className:"w-full max-w-md border-red-200 bg-white",children:[e.jsxs(Ar,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(gh,{className:"w-8 h-8 text-red-600"})})}),e.jsx(ur,{className:"text-red-600",children:"Account Pending Review"}),e.jsx(sa,{children:"Your supplier account is awaiting approval"})]}),e.jsxs(Ws,{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:e.jsx("p",{className:"text-sm text-gray-700",children:"Thank you for registering as a supplier! Your account is currently under review by our admin team. You'll receive an email notification once your account is approved."})}),s?.approvalReason&&e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("p",{className:"text-xs font-semibold text-yellow-800 mb-1",children:"Reason for Rejection"}),e.jsx("p",{className:"text-sm text-yellow-700",children:s.approvalReason})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"What we're checking:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"Business credentials and validity"}),e.jsx("li",{children:"GST registration details"}),e.jsx("li",{children:"Business address verification"}),e.jsx("li",{children:"Contact information"})]})]}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 text-sm",children:e.jsxs("p",{className:"text-blue-900",children:[e.jsx("strong",{children:"Typical approval time:"})," 24-48 hours"]})}),e.jsx(Ce,{onClick:()=>t("/"),className:"w-full bg-blue-600 hover:bg-blue-700",children:"Go to Home"})]})]})});if(n==="no-shop")return e.jsx(FK,{onShopAdded:h});if(n==="shop-pending"){const o=i.find(m=>!m.approved);return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-yellow-50 to-orange-50 p-4",children:e.jsxs(Ms,{className:"w-full max-w-md border-yellow-200 bg-white",children:[e.jsxs(Ar,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:e.jsx(ab,{className:"w-8 h-8 text-yellow-600"})})}),e.jsx(ur,{className:"text-yellow-600",children:"Shop Under Review"}),e.jsx(sa,{children:"Your shop is awaiting approval"})]}),e.jsxs(Ws,{className:"space-y-4",children:[o&&e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx(wl,{className:"w-5 h-5 text-gray-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:o.name}),o.city&&e.jsxs("p",{className:"text-xs text-gray-600",children:[o.city,o.location&&`  ${o.location}`]})]})]})}),e.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsx("p",{className:"text-sm text-gray-700",children:"We're reviewing your shop details. Our team typically completes this within 24-48 hours. You'll get an email notification once your shop is approved."})}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"We're verifying:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"Shop name and location"}),e.jsx("li",{children:"Contact information"}),e.jsx("li",{children:"GST details"}),e.jsx("li",{children:"Business legitimacy"})]})]}),e.jsx(Ce,{onClick:()=>t("/"),className:"w-full bg-blue-600 hover:bg-blue-700",children:"Go to Home"})]})]})})}if(n==="shop-approved"){const o=i.find(m=>m.approved===!0);return e.jsx(IK,{shopName:o?.name||"Shop",shopLocation:o?.location||""})}return null}const RK=["pcs","kg","meter","sqft","cum","litre","set","nos","Meters","Square feet","Numbers","Square Meter","Bags","Running feet","Running meter","LS","BOX","LTR","CQM","cft","ml","DOZ","PKT","Man labour","Points","Roll","Days","Inches","Hours","Percentage","Length","Panel","Drum","Ft","1 Pkt","Job","Units"],Xg=()=>e.jsx("span",{className:"text-red-500 ml-1",children:"*"});function OK(){const{toast:t}=ua(),{user:s}=fi(),[n,r]=S.useState([]),[i,c]=S.useState(!0),[A,u]=S.useState(""),[d,h]=S.useState("all-categories"),[o,m]=S.useState([]),[y,p]=S.useState([]),[j,b]=S.useState([]),[w,B]=S.useState([]),[U,Q]=S.useState(null),[k,K]=S.useState([]),[ee,q]=S.useState(""),[G,W]=S.useState(!1),[he,Z]=S.useState([]),[ie,ce]=S.useState({type:"none",text:""}),[ae,de]=S.useState(!1),[se,re]=S.useState(null),[te,be]=S.useState({rate:"",unit:"",brandname:"",modelnumber:"",category:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""});S.useEffect(()=>{He(),pe(),Y(),Se()},[]),S.useEffect(()=>{n.length>0&&je()},[n]);const He=async()=>{try{const Ae=localStorage.getItem("authToken"),le=await(await fetch("/api/material-templates",{headers:Ae?{Authorization:`Bearer ${Ae}`}:{}})).json();r(le.templates||[])}catch(Ae){console.error("Error loading templates:",Ae),t({title:"Error",description:"Failed to load material templates",variant:"destructive"})}finally{c(!1)}},pe=async()=>{try{const Qe=await(await fetch("/api/shops")).json();K(Qe.shops||[])}catch(Ae){console.error("Error loading shops:",Ae)}},Y=async()=>{try{const Qe=await(await fetch("/api/material-categories")).json();p(Qe.categories||[])}catch(Ae){console.error("Error loading categories:",Ae)}},me=async Ae=>{if(!Ae){b([]);return}try{const le=await(await fetch(`/api/material-subcategories/${encodeURIComponent(Ae)}`)).json();b(le.subcategories||[])}catch(Qe){console.error("Error loading subcategories:",Qe),b([])}},Se=async()=>{try{const Qe=await(await fetch("/api/products")).json();B(Qe.products||[])}catch(Ae){console.error("Error loading products:",Ae),B([])}},je=async()=>{try{const Ae=Array.from(new Set(n.map(Qe=>Qe.vendor_category).filter(Boolean)));m(Ae)}catch(Ae){console.error("Error loading vendor categories:",Ae),m([])}},Le=Ae=>{Q(Ae),be({rate:"",unit:"",brandname:"",modelnumber:"",category:Ae.category||"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}),Ae.category&&me(Ae.category),setTimeout(()=>{const Qe=document.getElementById("material-form");Qe&&Qe.scrollIntoView({behavior:"smooth",block:"start"})},100)};S.useEffect(()=>{(async()=>{if(!U||!ee){ce({type:"none",text:""});return}de(!0);try{const Qe=await fetch(`/api/material-rate?template_id=${encodeURIComponent(U.id)}&shop_id=${encodeURIComponent(ee)}`);if(!Qe.ok){console.warn("[ManageMaterials] Failed to fetch material rate"),ce({type:"none",text:""}),de(!1);return}const le=await Qe.json();console.log("[ManageMaterials] Rate fetch result:",le),le.found&&le.material?(be(ct=>({...ct,rate:le.material.rate!=null?String(le.material.rate):"",unit:le.material.unit||ct.unit||"",brandname:le.material.brandname||"",modelnumber:le.material.modelnumber||"",category:le.material.category||ct.category||"",subcategory:le.material.subcategory||"",product:le.material.product||"",technicalspecification:le.material.technicalspecification||"",dimensions:le.material.dimensions||"",finishtype:le.material.finishtype||"",metaltype:le.material.metaltype||""})),le.material.category&&await me(le.material.category),ce({type:"success",text:` Existing Rate Loaded (${le.source==="approved"?"Approved":"Pending"})`})):(be(ct=>({...ct,rate:"",unit:"",brandname:"",modelnumber:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""})),ce({type:"info",text:"No rate found for this shop - enter a new rate"}))}catch(Qe){console.warn("[ManageMaterials] Rate fetch error:",Qe),ce({type:"none",text:""})}finally{de(!1)}})()},[ee,U]);const ge=async Ae=>{if(Ae.preventDefault(),!U||!ee){t({title:"Error",description:"Please select a template and shop",variant:"destructive"});return}let Qe=[];if(he.length>0){if(!window.confirm(`Are you sure you want to submit ${he.length} items for approval?`))return;Qe=he}else{if(!te.rate||!te.unit||!te.category){t({title:"Error",description:"Rate, unit, and category are required",variant:"destructive"});return}Qe=[{template_id:U.id,shop_id:ee,...te}]}W(!0);try{const le=localStorage.getItem("authToken"),ct={"Content-Type":"application/json"};le&&(ct.Authorization=`Bearer ${le}`);for(const rt of Qe)if(!(await fetch("/api/material-submissions",{method:"POST",headers:ct,body:JSON.stringify(rt)})).ok)throw new Error("Failed to submit material");t({title:"Success",description:`${Qe.length} material(s) submitted for approval`}),Q(null),Z([]),be({rate:"",unit:"",brandname:"",modelnumber:"",category:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""})}catch{t({title:"Error",description:"Failed to submit material",variant:"destructive"})}finally{W(!1)}},ye=()=>{if(!U||!ee){t({title:"Error",description:"Please select a template and shop",variant:"destructive"});return}if(!te.rate||!te.unit||!te.category){t({title:"Error",description:"Rate, unit, and category are required",variant:"destructive"});return}const Ae={template_id:U.id,shop_id:ee,...te};Z(Qe=>[...Qe,Ae]),be(Qe=>({...Qe,rate:"",unit:"",brandname:"",modelnumber:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""})),t({title:"Entry Added",description:"Item added to the submission list."})},we=Ae=>{Z(Qe=>Qe.filter((le,ct)=>ct!==Ae))},Ne=Ae=>{const Qe=he[Ae];re(Ae),q(Qe.shop_id||""),be({rate:Qe.rate||"",unit:Qe.unit||"",brandname:Qe.brandname||"",modelnumber:Qe.modelnumber||"",category:Qe.category||"",subcategory:Qe.subcategory||"",product:Qe.product||"",technicalspecification:Qe.technicalspecification||"",dimensions:Qe.dimensions||"",finishtype:Qe.finishtype||"",metaltype:Qe.metaltype||""}),Qe.category&&me(Qe.category),setTimeout(()=>{const le=document.getElementById("material-form");le&&le.scrollIntoView({behavior:"smooth",block:"start"})},100)},ke=()=>{if(se===null)return;if(!te.rate||!te.unit||!te.category){t({title:"Error",description:"Rate, unit, and category are required",variant:"destructive"});return}const Ae={template_id:U?.id||he[se].template_id,shop_id:ee||he[se].shop_id,...te};Z(Qe=>Qe.map((le,ct)=>ct===se?Ae:le)),be({rate:"",unit:"",brandname:"",modelnumber:"",category:U?.category||"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""}),re(null),t({title:"Entry Updated",description:"Item updated in the submission list."})},Be=()=>{re(null),q(""),be({rate:"",unit:"",brandname:"",modelnumber:"",category:U?.category||"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""})};return e.jsx(Sa,{children:e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Material Management"}),e.jsx("p",{className:"text-gray-600",children:"Select from available material templates and add your details"})]}),e.jsxs("div",{className:"grid gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(il,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Available Material Templates"})]}),e.jsx("div",{className:"space-y-3 mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(We,{className:"text-sm mb-2 block",children:"Search Templates"}),e.jsx(Xe,{value:A,onChange:Ae=>u(Ae.target.value),placeholder:"Search by name or code..."})]}),e.jsxs("div",{children:[e.jsx(We,{className:"text-sm mb-2 block",children:"Filter by Vendor Category"}),e.jsxs(mn,{value:d,onValueChange:h,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"All categories"})}),e.jsxs(hn,{className:"max-h-72 overflow-y-auto",children:[e.jsx(Ks,{value:"all-categories",children:"All Categories"}),o.map(Ae=>e.jsx(Ks,{value:Ae,children:Ae},Ae))]})]})]})]})}),i?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Sl,{className:"w-6 h-6 animate-spin"})}):e.jsx("div",{className:"space-y-2",children:n.filter(Ae=>{const le=(Ae.name+" "+Ae.code+" "+(Ae.category||"")).toLowerCase().includes(A.toLowerCase()),ct=Ae.vendor_category||"";return le&&(d==="all-categories"?!0:ct===d)}).slice(0,12).map(Ae=>e.jsxs("div",{className:"p-2 border-b bg-white hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"flex-1 flex items-center gap-3",children:e.jsx("div",{className:"font-medium text-sm",children:Ae.name})}),e.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>Le(Ae),children:"Select"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[Ae.code," ",Ae.category&&e.jsxs("span",{className:"ml-2",children:[" ",Ae.category]})]})]},Ae.id))})]}),U&&e.jsxs(Ms,{id:"material-form",className:"scroll-mt-20 border-blue-200 shadow-sm",children:[e.jsxs(Ar,{className:"py-3 bg-blue-50/50",children:[e.jsx(ur,{className:"text-base",children:se!==null?"Edit Material Details":"Submit Material Details"}),e.jsx(sa,{className:"text-xs mt-1",children:se!==null?`Editing item ${se+1} from submission queue`:`Editing: ${U.name} (${U.code})`})]}),e.jsx(Ws,{className:"pt-6",children:e.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(We,{children:["Shop ",e.jsx(Xg,{})]}),e.jsxs(mn,{value:ee,onValueChange:q,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select a shop"})}),e.jsx(hn,{className:"max-h-72 overflow-y-auto",children:k.map(Ae=>e.jsx(Ks,{value:Ae.id,children:Ae.name},Ae.id))})]})]}),e.jsxs("div",{children:[e.jsxs(We,{children:["Rate ",e.jsx(Xg,{})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Xe,{type:"number",step:"0.01",placeholder:"0.00",value:te.rate,onChange:Ae=>be({...te,rate:Ae.target.value}),disabled:ae}),ae&&e.jsx(Sl,{className:"w-4 h-4 animate-spin text-muted-foreground"})]}),ie.type==="success"&&e.jsx("p",{className:"text-sm text-green-600 mt-1 font-medium",children:ie.text}),ie.type==="info"&&e.jsx("p",{className:"text-sm text-amber-600 mt-1",children:ie.text})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(We,{children:["Unit ",e.jsx(Xg,{})]}),e.jsxs(mn,{value:te.unit,onValueChange:Ae=>be({...te,unit:Ae}),children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select unit"})}),e.jsx(hn,{className:"max-h-72 overflow-y-auto",children:RK.map(Ae=>e.jsx(Ks,{value:Ae,children:Ae},Ae))})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Brand Name"}),e.jsx(Xe,{placeholder:"Enter brand",value:te.brandname,onChange:Ae=>be({...te,brandname:Ae.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Model Number"}),e.jsx(Xe,{placeholder:"Enter model",value:te.modelnumber,onChange:Ae=>be({...te,modelnumber:Ae.target.value})})]}),e.jsxs("div",{children:[e.jsxs(We,{children:["Category ",e.jsx(Xg,{})]}),e.jsxs(mn,{value:te.category,onValueChange:Ae=>{be({...te,category:Ae,subcategory:""}),me(Ae)},children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select category"})}),e.jsx(hn,{children:y.map(Ae=>e.jsx(Ks,{value:Ae,children:Ae},Ae))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Subcategory"}),e.jsxs(mn,{value:te.subcategory,onValueChange:Ae=>be({...te,subcategory:Ae,product:""}),disabled:!te.category||j.length===0,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:j.length===0?"No subcategories":"Select subcategory"})}),e.jsx(hn,{children:j.map(Ae=>e.jsx(Ks,{value:Ae,children:Ae},Ae))})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Product"}),e.jsxs(mn,{value:te.product,onValueChange:Ae=>be({...te,product:Ae}),disabled:!te.subcategory||w.length===0,children:[e.jsx(un,{children:e.jsx(gn,{placeholder:w.length===0?"No products":"Select product"})}),e.jsx(hn,{children:w.filter(Ae=>Ae.subcategory===te.subcategory).map(Ae=>e.jsx(Ks,{value:Ae.name,children:Ae.name},Ae.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Technical Specification"}),e.jsx(Cl,{placeholder:"Material technical details...",value:te.technicalspecification,onChange:Ae=>be({...te,technicalspecification:Ae.target.value}),rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Dimensions"}),e.jsx(Xe,{placeholder:"L x W x H",value:te.dimensions,onChange:Ae=>be({...te,dimensions:Ae.target.value})})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Finish"}),e.jsx(Xe,{placeholder:"Matte/Glossy",value:te.finishtype,onChange:Ae=>be({...te,finishtype:Ae.target.value})})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Metal"}),e.jsx(Xe,{placeholder:"Steel/Iron",value:te.metaltype,onChange:Ae=>be({...te,metaltype:Ae.target.value})})]})]}),he.length>0&&e.jsxs("div",{className:"mt-6 border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 text-sm font-semibold flex justify-between items-center",children:[e.jsxs("span",{children:["Items in Submission Queue (",he.length,")"]}),e.jsx(qL,{className:"w-4 h-4 text-amber-600"})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto divide-y",children:he.map((Ae,Qe)=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white",children:[e.jsxs("div",{className:"text-xs flex-1",children:[e.jsxs("div",{className:"font-bold text-slate-700",children:["Rate: ",Ae.rate," / ",Ae.unit]}),e.jsxs("div",{className:"text-slate-500",children:[Ae.brandname||"No Brand","  ",Ae.category,Ae.subcategory&&`  ${Ae.subcategory}`,Ae.product&&`  ${Ae.product}`]}),Ae.technicalspecification&&e.jsx("div",{className:"text-slate-400 mt-1 truncate max-w-xs",children:Ae.technicalspecification})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{type:"button",size:"sm",variant:"outline",className:"h-8 text-blue-600 hover:bg-blue-50",onClick:()=>Ne(Qe),disabled:se!==null,children:"Edit"}),e.jsx(Ce,{type:"button",size:"sm",variant:"ghost",className:"text-red-500 h-8 hover:bg-red-50",onClick:()=>we(Qe),children:"Remove"})]})]},Qe))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[se!==null?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{type:"button",onClick:ke,className:"flex-1 gap-2 bg-green-600 hover:bg-green-700",children:"Update Entry"}),e.jsx(Ce,{type:"button",onClick:Be,variant:"outline",className:"flex-1",children:"Cancel Edit"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{type:"button",onClick:ye,variant:"outline",className:"flex-1 gap-2 border-blue-200 text-blue-700 hover:bg-blue-50",children:[e.jsx(wc,{className:"w-4 h-4"})," Add to List"]}),e.jsxs(Ce,{type:"submit",disabled:G,className:"flex-1 gap-2 bg-blue-600 hover:bg-blue-700",children:[G?e.jsx(Sl,{className:"w-4 h-4 animate-spin"}):e.jsx(wc,{className:"w-4 h-4"}),he.length>0?`Submit ${he.length} Items`:"Submit Single Item"]})]}),e.jsx(Ce,{type:"button",variant:"ghost",onClick:()=>{Q(null),re(null),q(""),be({rate:"",unit:"",brandname:"",modelnumber:"",category:"",subcategory:"",product:"",technicalspecification:"",dimensions:"",finishtype:"",metaltype:""})},children:"Cancel"})]})]})})]})]})]})})}function UK(){return e.jsx(OK,{})}function IN(){const[t,s]=S.useState([]),[n,r]=S.useState(!0),[i,c]=S.useState(null),A=(m,y)=>{c({type:m,text:y}),window.setTimeout(()=>c(null),2500)},u=async()=>{try{const y=(await $o("/api/admin/pending-suppliers"))?.suppliers||[];s(p=>{const j=new Map(p.map(w=>[w.id,w])),b=[];for(const w of y){const B=j.get(w.id);b.push({...w,uiStatus:B?.uiStatus&&B.uiStatus!=="pending"?B.uiStatus:"pending",busy:!1})}for(const w of p)!y.find(B=>B.id===w.id)&&(w.uiStatus==="accepted"||w.uiStatus==="rejected")&&b.push(w);return b.sort((w,B)=>new Date(B.created_at).getTime()-new Date(w.created_at).getTime()),b})}catch(m){console.error("Failed to load suppliers",m),A("error",m?.message||"Failed to load suppliers")}finally{r(!1)}};S.useEffect(()=>{u();const m=window.setInterval(u,2e4);return()=>window.clearInterval(m)},[]);const d=S.useMemo(()=>t.filter(m=>m.uiStatus==="pending").length,[t]),h=async m=>{s(y=>y.map(p=>p.id===m?{...p,uiStatus:"accepted",busy:!0}:p));try{await Gl(`/api/admin/suppliers/${m}/approve`,{}),A("success","Supplier accepted.")}catch(y){s(p=>p.map(j=>j.id===m?{...j,uiStatus:"pending"}:j)),A("error",y?.message||"Approve failed")}finally{s(y=>y.map(p=>p.id===m?{...p,busy:!1}:p)),u()}},o=async m=>{s(y=>y.map(p=>p.id===m?{...p,uiStatus:"rejected",busy:!0}:p));try{await Gl(`/api/admin/suppliers/${m}/reject`,{reason:"Rejected by admin"}),A("success","Supplier rejected.")}catch(y){s(p=>p.map(j=>j.id===m?{...j,uiStatus:"pending"}:j)),A("error",y?.message||"Reject failed")}finally{s(y=>y.map(p=>p.id===m?{...p,busy:!1}:p)),u()}};return e.jsx("div",{className:"min-h-[calc(100vh-60px)]",children:e.jsxs("div",{className:"relative overflow-hidden rounded-2xl border bg-white",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx(Es.div,{className:"absolute -top-40 -left-40 h-[520px] w-[520px] rounded-full blur-3xl opacity-30",style:{background:"radial-gradient(circle at center, #2563eb 0%, rgba(37,99,235,0) 60%)"},animate:{x:[0,40,0],y:[0,25,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(Es.div,{className:"absolute -bottom-40 -right-40 h-[520px] w-[520px] rounded-full blur-3xl opacity-25",style:{background:"radial-gradient(circle at center, #60a5fa 0%, rgba(96,165,250,0) 60%)"},animate:{x:[0,-35,0],y:[0,-20,0]},transition:{duration:9,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs("div",{className:"relative px-6 py-6",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-slate-900",children:"Supplier Approval"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Review new supplier requests and approve or reject with a single click."}),e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-full bg-blue-50 px-3 py-1 text-sm text-blue-700",children:[e.jsx("span",{className:"font-semibold",children:d}),e.jsx("span",{children:"Pending"})]})]}),e.jsx(Fl,{children:i&&e.jsx(Es.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},className:`mt-4 rounded-xl border px-4 py-3 text-sm ${i.type==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-rose-200 bg-rose-50 text-rose-800"}`,children:i.text})})]}),e.jsx("div",{className:"relative px-6 pb-8",children:n?e.jsxs("div",{className:"space-y-3",children:[e.jsx(fv,{}),e.jsx(fv,{}),e.jsx(fv,{})]}):t.length===0?e.jsxs(Ms,{className:"p-6",children:[e.jsx("div",{className:"text-slate-700 font-semibold",children:"No pending suppliers"}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"All supplier requests have been processed."})]}):e.jsx("div",{className:"space-y-3",children:e.jsx(Fl,{initial:!1,children:t.map(m=>e.jsx(Es.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.18},children:e.jsxs(Ms,{className:"p-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-semibold text-slate-900 truncate",children:m.username}),e.jsx(LK,{status:m.uiStatus})]}),e.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:["Requested on"," ",new Date(m.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{onClick:()=>h(m.id),disabled:m.uiStatus!=="pending"||!!m.busy,className:"bg-gradient-to-r from-blue-600 to-sky-500 hover:from-blue-700 hover:to-sky-600",children:m.busy&&m.uiStatus==="accepted"?"Accepting":"Approve"}),e.jsx(Ce,{variant:"destructive",onClick:()=>o(m.id),disabled:m.uiStatus!=="pending"||!!m.busy,children:m.busy&&m.uiStatus==="rejected"?"Rejecting":"Reject"})]})]})},m.id))})})})]})})}function LK({status:t}){return t==="accepted"?e.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-xs font-semibold text-emerald-700",children:"Accepted"}):t==="rejected"?e.jsx("span",{className:"rounded-full border border-rose-200 bg-rose-50 px-2 py-0.5 text-xs font-semibold text-rose-700",children:"Rejected"}):e.jsx("span",{className:"rounded-full border border-blue-200 bg-blue-50 px-2 py-0.5 text-xs font-semibold text-blue-700",children:"Pending"})}function fv(){return e.jsx(Ms,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-48 rounded bg-slate-200 animate-pulse"}),e.jsx("div",{className:"mt-2 h-3 w-64 rounded bg-slate-200 animate-pulse"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-9 w-24 rounded bg-slate-200 animate-pulse"}),e.jsx("div",{className:"h-9 w-24 rounded bg-slate-200 animate-pulse"})]})]})})}function DK(){const{toast:t}=ua(),[s,n]=S.useState([]),[r,i]=S.useState(!0),[c,A]=S.useState(null),[u,d]=S.useState(null),[h,o]=S.useState("");S.useEffect(()=>{m()},[]);const m=async()=>{try{i(!0);const j=localStorage.getItem("authToken"),b=await fetch("/api/material-submissions-pending-approval",{headers:j?{Authorization:`Bearer ${j}`}:{}});if(!b.ok)throw new Error("Failed to load submissions");const w=await b.json();n(w.submissions.map(B=>B.submission)||[])}catch(j){console.error("Error loading submissions:",j),t({title:"Error",description:"Failed to load material submissions",variant:"destructive"})}finally{i(!1)}},y=async j=>{A(j);try{const b=localStorage.getItem("authToken");if(!(await fetch(`/api/material-submissions/${j}/approve`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:b?`Bearer ${b}`:void 0}})).ok)throw new Error("Failed to approve submission");t({title:"Success",description:"Material submission approved"}),m()}catch(b){console.error("Error approving submission:",b),t({title:"Error",description:"Failed to approve submission",variant:"destructive"})}finally{A(null)}},p=async j=>{if(!h.trim()){t({title:"Error",description:"Please provide a rejection reason",variant:"destructive"});return}d(j);try{const b=localStorage.getItem("authToken");if(!(await fetch(`/api/material-submissions/${j}/reject`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:b?`Bearer ${b}`:void 0},body:JSON.stringify({reason:h})})).ok)throw new Error("Failed to reject submission");t({title:"Success",description:"Material submission rejected"}),o(""),m()}catch(b){console.error("Error rejecting submission:",b),t({title:"Error",description:"Failed to reject submission",variant:"destructive"})}finally{d(null)}};return e.jsx(Sa,{children:e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Material Submission Approvals"}),e.jsx("p",{className:"text-gray-600",children:"Review and approve supplier material submissions"})]}),r?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(Sl,{className:"w-8 h-8 animate-spin"})}):s.length===0?e.jsx(Ms,{children:e.jsx(Ws,{className:"pt-6",children:e.jsxs("div",{className:"text-center text-gray-500 py-12",children:[e.jsx(lo,{className:"w-12 h-12 mx-auto mb-4 text-green-600"}),e.jsx("p",{children:"No pending material submissions"})]})})}):e.jsx("div",{className:"space-y-4",children:s.map(j=>e.jsx(Ms,{className:"border-l-4 border-l-yellow-500",children:e.jsxs(Ws,{className:"pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Material"}),e.jsx("p",{className:"font-semibold text-lg",children:j.template_name}),e.jsx("p",{className:"text-sm text-gray-500",children:j.template_code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Supplier Shop"}),e.jsx("p",{className:"font-semibold",children:j.shop_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rate"}),e.jsxs("p",{className:"font-semibold",children:["",Number(j.rate).toFixed(2)," / ",j.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Submitted"}),e.jsx("p",{className:"font-semibold",children:new Date(j.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 pb-6 border-b",children:[j.brandname&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Brand"}),e.jsx("p",{className:"font-semibold",children:j.brandname})]}),j.modelnumber&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Model Number"}),e.jsx("p",{className:"font-semibold",children:j.modelnumber})]}),j.subcategory&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Subcategory"}),e.jsx("p",{className:"font-semibold",children:j.subcategory})]})]}),j.technicalspecification&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Technical Specification"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm",children:j.technicalspecification})]}),u===j.id&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded",children:[e.jsxs(We,{className:"text-red-900 font-semibold",children:["Rejection Reason ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(Cl,{placeholder:"Explain why this submission is being rejected",value:h,onChange:b=>o(b.target.value),rows:4,className:"mt-2"})]}),e.jsx("div",{className:"flex gap-2",children:u===j.id?e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{onClick:()=>p(j.id),variant:"destructive",disabled:!h.trim(),className:"gap-2",children:[e.jsx(Dy,{className:"w-4 h-4"}),"Confirm Rejection"]}),e.jsx(Ce,{onClick:()=>{d(null),o("")},variant:"outline",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{onClick:()=>y(j.id),disabled:c===j.id,className:"gap-2 bg-green-600 hover:bg-green-700",children:[c===j.id?e.jsx(Sl,{className:"w-4 h-4 animate-spin"}):e.jsx(lo,{className:"w-4 h-4"}),"Approve"]}),e.jsxs(Ce,{onClick:()=>d(j.id),variant:"outline",className:"gap-2",children:[e.jsx(Dy,{className:"w-4 h-4"}),"Reject"]})]})})]})},j.id))})]})})}const wy=S.forwardRef(({className:t,...s},n)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:n,className:$s("w-full caption-bottom text-sm",t),...s})}));wy.displayName="Table";const Sy=S.forwardRef(({className:t,...s},n)=>e.jsx("thead",{ref:n,className:$s("[&_tr]:border-b",t),...s}));Sy.displayName="TableHeader";const Ny=S.forwardRef(({className:t,...s},n)=>e.jsx("tbody",{ref:n,className:$s("[&_tr:last-child]:border-0",t),...s}));Ny.displayName="TableBody";const QK=S.forwardRef(({className:t,...s},n)=>e.jsx("tfoot",{ref:n,className:$s("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));QK.displayName="TableFooter";const Td=S.forwardRef(({className:t,...s},n)=>e.jsx("tr",{ref:n,className:$s("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));Td.displayName="TableRow";const Gi=S.forwardRef(({className:t,...s},n)=>e.jsx("th",{ref:n,className:$s("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s}));Gi.displayName="TableHead";const Ja=S.forwardRef(({className:t,...s},n)=>e.jsx("td",{ref:n,className:$s("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s}));Ja.displayName="TableCell";const _K=S.forwardRef(({className:t,...s},n)=>e.jsx("caption",{ref:n,className:$s("mt-4 text-sm text-muted-foreground",t),...s}));_K.displayName="TableCaption";function lu(t,s,n){const r=Number(t.baseRequiredQty)||1,i=Number(n)||0,c=Number(t.wastagePctDefault??0),A=s.map(y=>{const p=Number(y.baseQty)||0,b=y.applyWastage!==!1?y.wastagePct!==void 0?Number(y.wastagePct):c:0,w=p*b,B=p+w,U=r>0?B/r:0,Q=U*i,k=Math.ceil(Q),K=Number(y.supplyRate)||0,ee=Number(y.installRate)||0,q=k*K,G=k*ee,W=q+G;return{...y,wastagePctUsed:b,wastageQty:w,effectiveQty:B,perUnitQty:U,scaledQty:Q,roundOffQty:k,supplyAmount:q,installAmount:G,lineTotal:W}}),u=A.reduce((y,p)=>y+p.supplyAmount,0),d=A.reduce((y,p)=>y+p.installAmount,0),h=u+d,o=i>0?h/i:0,m=t.requiredUnitType==="Sqmt"?o*10.76:void 0;return{computed:A,totalSupply:u,totalInstall:d,grandTotal:h,ratePerUnit:o,ratePerSqmt:m}}function MK(){const[t,s]=S.useState(1),[n,r]=S.useState(null),[i,c]=S.useState(""),[A,u]=S.useState(""),[d,h]=S.useState(""),[o,m]=S.useState([]),[y,p]=S.useState([]),[j,b]=S.useState(!1),{toast:w}=ua(),[B,U]=S.useState("Sqft"),[Q,k]=S.useState(100),[K,ee]=S.useState(5),[q,G]=S.useState(void 0),[W,he]=S.useState(void 0),[Z,ie]=S.useState(void 0);S.useEffect(()=>{if(q!==void 0||W!==void 0||Z!==void 0){const we=Number(q)||1,Ne=Number(W)||1,ke=Number(Z)||1;k(we*Ne*ke)}},[q,W,Z]);const{data:ce,isLoading:ae}=Og({queryKey:["/api/products"],queryFn:async()=>{const we=await lt("/api/products");if(!we.ok)throw new Error("Failed to fetch products");return((await we.json()).products||[]).sort((ke,Be)=>(ke.name||"").localeCompare(Be.name||""))}}),{data:de}=Og({queryKey:["/api/material-categories"],queryFn:async()=>{const we=await lt("/api/material-categories");if(!we.ok)throw new Error("Failed to fetch categories");return((await we.json()).categories||[]).sort((ke,Be)=>ke.localeCompare(Be))},enabled:t===2}),{data:se}=Og({queryKey:["/api/material-subcategories",A],queryFn:async()=>{const we=await lt(`/api/material-subcategories/${A}`);if(!we.ok)throw new Error("Failed to fetch subcategories");return((await we.json()).subcategories||[]).sort((ke,Be)=>ke.localeCompare(Be))},enabled:t===2&&!!A&&A!==" "}),{data:re,isLoading:te}=Og({queryKey:["/api/materials"],queryFn:async()=>{const we=await lt("/api/materials");if(!we.ok)throw new Error("Failed to fetch materials");return((await we.json()).materials||[]).sort((ke,Be)=>(ke.name||"").localeCompare(Be.name||""))},enabled:t===2}),be=(re||[]).filter(we=>{const Ne=!A||we.category===A,ke=!d||we.subcategory===d;return Ne&&ke}),He=()=>{if(t===1&&!n){w({title:"Product Required",description:"Please select a product to proceed.",variant:"destructive"});return}if(t===2&&o.length===0){w({title:"Selection Required",description:"Please select at least one material.",variant:"destructive"});return}if(t===2){const we=new Set(y.map(ke=>ke.id));(!o.every(ke=>we.has(ke.id))||y.length===0)&&p(o.map(ke=>{const Be=Number(ke.rate)||0;return{...ke,qty:1,baseQty:1,wastagePct:void 0,amount:Be,rate:Be,supplyRate:Be,installRate:0,location:ke.technicalspecification||ke.name||"",description:ke.technicalspecification||ke.name||"",applyWastage:!0}}))}s(t+1)},pe=async()=>{if(n){b(!0);try{const we=i||`${n.name}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(!(await lt("/api/step11-products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:n.id,productName:n.name,configName:we,categoryId:A,subcategoryId:d,totalCost:ye,requiredUnitType:B,baseRequiredQty:Q,wastagePctDefault:K,items:y.map(ke=>({materialId:ke.id,materialName:ke.name,unit:ke.unit,qty:ke.qty,rate:ke.rate,supplyRate:ke.supplyRate,installRate:ke.installRate,location:ke.location,amount:ke.amount,baseQty:ke.baseQty,wastagePct:ke.wastagePct??null,applyWastage:ke.applyWastage}))})})).ok)throw new Error("Failed to save configuration");w({title:"Success",description:"Product configuration saved permanently.",variant:"default"}),s(1),r(null),c(""),m([]),p([])}catch(we){w({title:"Error",description:we.message||"Failed to save configuration",variant:"destructive"})}finally{b(!1)}}},Y=async()=>{if(n){b(!0);try{const we=i||`${n.name}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(!(await lt("/api/product-step3-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:n.id,productName:n.name,configName:we,categoryId:A,subcategoryId:d,totalCost:ye,requiredUnitType:B,baseRequiredQty:Q,wastagePctDefault:K,items:y.map(ke=>({materialId:ke.id,materialName:ke.name,unit:ke.unit,qty:ke.qty,rate:ke.rate,supplyRate:ke.supplyRate,installRate:ke.installRate,location:ke.location,amount:ke.amount,baseQty:ke.baseQty,wastagePct:ke.wastagePct??null,applyWastage:ke.applyWastage}))})})).ok)throw new Error("Failed to save configuration");w({title:"Saved",description:"Step 3 configuration saved to its own table."})}catch(we){w({title:"Error",description:we.message||"Failed to save configuration",variant:"destructive"})}finally{b(!1)}}},me=async we=>{try{const Ne=await lt(`/api/product-step3-config/${we.id}`);if(Ne.ok){const Be=await Ne.json();if(Be.items&&Be.items.length>0){const Ae=Be.items.map(Qe=>({id:Qe.material_id,name:Qe.material_name,unit:Qe.unit,qty:Number(Qe.qty||0),baseQty:Number(Qe.base_qty??Qe.qty??0),wastagePct:Qe.wastage_pct!==null?Number(Qe.wastage_pct):void 0,rate:Number(Qe.rate),supplyRate:Number(Qe.supply_rate||Qe.rate||0),installRate:Number(Qe.install_rate||0),location:Qe.location||"Main Area",amount:Number(Qe.amount),applyWastage:Qe.apply_wastage!==void 0?!!Qe.apply_wastage:Qe.applyWastage!==void 0?!!Qe.applyWastage:!0,category:"",subcategory:""}));c(Be.config.config_name||""),u(Be.config.category_id||""),h(Be.config.subcategory_id||""),U(Be.config.required_unit_type||"Sqft"),k(Number(Be.config.base_required_qty||100)),ee(Number(Be.config.wastage_pct_default||0)),G(Be.config.dim_a?Number(Be.config.dim_a):void 0),he(Be.config.dim_b?Number(Be.config.dim_b):void 0),ie(Be.config.dim_c?Number(Be.config.dim_c):void 0),m(Ae),p(Ae),w({title:"Configuration Loaded",description:`Loaded saved Step 3 configuration for ${we.name}.`});return}}const ke=await lt(`/api/step11-products/${we.id}`);if(ke.ok){const Be=await ke.json();if(Be.configurations&&Be.configurations.length>0){const Qe=Be.configurations[0];w({title:"Configuration Found",description:`Existing configuration "${Qe.product.config_name||"Unnamed"}" for ${we.name} loaded.`});const le=Qe.items.map(ct=>({id:ct.material_id,name:ct.material_name,unit:ct.unit,qty:Number(ct.qty||0),baseQty:Number(ct.qty||0),wastagePct:void 0,rate:Number(ct.rate),supplyRate:Number(ct.supply_rate||ct.rate||0),installRate:Number(ct.install_rate||0),location:ct.location||"Main Area",amount:Number(ct.amount||0),applyWastage:ct.apply_wastage!==void 0?!!ct.apply_wastage:ct.applyWastage!==void 0?!!ct.applyWastage:!0,category:"",subcategory:""}));c(Qe.product.config_name||""),u(Qe.product.category_id||""),h(Qe.product.subcategory_id||""),U(Qe.product.required_unit_type||"Sqft"),k(Number(Qe.product.base_required_qty||100)),ee(Number(Qe.product.wastage_pct_default||0)),G(Qe.product.dim_a?Number(Qe.product.dim_a):void 0),he(Qe.product.dim_b?Number(Qe.product.dim_b):void 0),ie(Qe.product.dim_c?Number(Qe.product.dim_c):void 0),m(le),p(le)}}}catch(Ne){console.error("Failed to load existing config",Ne)}},Se=()=>s(t-1),je=we=>{m(Ne=>Ne.find(ke=>ke.id===we.id)?Ne.filter(ke=>ke.id!==we.id):[...Ne,we])},Le=(we,Ne,ke)=>{p(Be=>Be.map(Ae=>{if(Ae.id===we){const Qe={...Ae,[Ne]:ke};return(Ne==="supplyRate"||Ne==="installRate")&&(Qe.rate=(Number(Qe.supplyRate)||0)+(Number(Qe.installRate)||0)),Qe}return Ae}))},ge=lu({requiredUnitType:B,baseRequiredQty:Q,wastagePctDefault:K},y,Q),ye=ge.grandTotal;return e.jsx(Sa,{children:e.jsx("div",{className:"container mx-auto py-8 px-4",children:e.jsxs(Ms,{className:"max-w-6xl mx-auto shadow-xl border-none",children:[e.jsx(Ar,{className:"bg-primary/5 border-b pb-6",children:e.jsxs(ur,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-3xl font-extrabold tracking-tight",children:"Manage Product"}),n&&e.jsx(Bl,{variant:"outline",className:"text-sm font-semibold py-1.5 px-4 bg-primary/10 border-primary/20",children:n.name})]})}),e.jsxs(Ws,{className:"p-8",children:[t===1&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"1. Select Base Product"}),e.jsxs("div",{className:"relative w-full md:w-80",children:[e.jsx(Qy,{className:"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground"}),e.jsx(Xe,{placeholder:"Search by name...",className:"pl-10 h-10"})]})]}),ae?e.jsxs("div",{className:"flex flex-col items-center justify-center p-20 space-y-4",children:[e.jsx(Sl,{className:"h-10 w-10 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Loading products..."})]}):e.jsx("div",{className:"rounded-xl border shadow-sm overflow-hidden bg-white",children:e.jsxs(wy,{children:[e.jsx(Sy,{className:"bg-muted/30",children:e.jsxs(Td,{children:[e.jsx(Gi,{className:"w-[60px]"}),e.jsx(Gi,{className:"font-bold",children:"Product Name"}),e.jsx(Gi,{className:"font-bold",children:"Created Date"})]})}),e.jsx(Ny,{children:ce?.map(we=>e.jsxs(Td,{className:`hover:bg-muted/20 transition-colors cursor-pointer ${n?.id===we.id?"bg-primary/5 hover:bg-primary/10":""}`,onClick:()=>{r(we),c(""),u(""),h(""),m([]),p([]),me(we)},children:[e.jsx(Ja,{onClick:Ne=>Ne.stopPropagation(),children:e.jsx(Tn,{checked:n?.id===we.id,onCheckedChange:Ne=>{Ne?(r(we),c(""),u(""),h(""),m([]),p([]),me(we)):r(null)}})}),e.jsx(Ja,{className:"font-semibold text-base",children:we.name}),e.jsx(Ja,{className:"text-muted-foreground",children:we.created_at?new Date(we.created_at).toLocaleDateString():"N/A"})]},we.id))})]})}),n&&e.jsxs("div",{className:"space-y-3 p-6 bg-primary/5 rounded-xl border border-primary/20",children:[e.jsx("label",{className:"text-sm font-bold uppercase tracking-wider text-muted-foreground",children:"Configuration Name (Optional)"}),e.jsx(Xe,{value:i,onChange:we=>c(we.target.value),placeholder:"Enter a name for this configuration (e.g., 'Standard', 'Premium', 'Basic')",className:"h-11"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Give this configuration a name to distinguish it from other configurations of the same product."})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(Ce,{size:"lg",onClick:He,disabled:!n,className:"px-8",children:["Next Step ",e.jsx(uy,{className:"ml-2 h-5 w-5"})]})})]}),t===2&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-bold uppercase tracking-wider text-muted-foreground",children:"Category"}),e.jsxs(mn,{value:A,onValueChange:we=>{u(we),h("")},children:[e.jsx(un,{className:"h-11",children:e.jsx(gn,{placeholder:"All Categories"})}),e.jsxs(hn,{className:"max-h-[300px] overflow-y-auto",children:[e.jsx(Ks,{value:" ",children:"All Categories"}),de?.map(we=>e.jsx(Ks,{value:we,children:we},we))]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-bold uppercase tracking-wider text-muted-foreground",children:"Subcategory"}),e.jsxs(mn,{value:d,onValueChange:h,disabled:!A||A===" ",children:[e.jsx(un,{className:"h-11",children:e.jsx(gn,{placeholder:"All Subcategories"})}),e.jsxs(hn,{className:"max-h-[300px] overflow-y-auto",children:[e.jsx(Ks,{value:" ",children:"All Subcategories"}),se?.map(we=>e.jsx(Ks,{value:we,children:we},we))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold",children:"2. Select Materials/Items"}),e.jsxs("span",{className:"text-sm font-medium text-primary bg-primary/10 px-3 py-1 rounded-full",children:[be.length," results found"]})]}),e.jsx("div",{className:"rounded-xl border shadow-sm max-h-[450px] overflow-y-auto bg-white",children:e.jsxs(wy,{children:[e.jsx(Sy,{className:"sticky top-0 bg-muted/95 backdrop-blur-sm z-10 shadow-sm",children:e.jsxs(Td,{children:[e.jsx(Gi,{className:"w-[60px]"}),e.jsx(Gi,{className:"font-bold",children:"Material Name"}),e.jsx(Gi,{className:"font-bold",children:"Unit"}),e.jsx(Gi,{className:"text-right font-bold pr-6",children:"Default Rate"})]})}),e.jsx(Ny,{children:te?e.jsx(Td,{children:e.jsx(Ja,{colSpan:4,className:"text-center py-20",children:e.jsx(Sl,{className:"h-8 w-8 animate-spin mx-auto text-primary"})})}):be.length===0?e.jsx(Td,{children:e.jsx(Ja,{colSpan:4,className:"text-center py-20 text-muted-foreground italic",children:"No materials found matching the current filters."})}):be.map(we=>e.jsxs(Td,{className:`hover:bg-muted/20 transition-colors cursor-pointer ${o.some(Ne=>Ne.id===we.id)?"bg-primary/5 hover:bg-primary/10":""}`,onClick:()=>je(we),children:[e.jsx(Ja,{onClick:Ne=>Ne.stopPropagation(),children:e.jsx(Tn,{checked:o.some(Ne=>Ne.id===we.id),onCheckedChange:()=>je(we)})}),e.jsx(Ja,{className:"font-medium",children:we.name}),e.jsx(Ja,{children:we.unit||"-"}),e.jsx(Ja,{className:"text-right pr-6 font-semibold",children:we.rate?`${we.rate.toLocaleString()}`:"-"})]},we.id))})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 pt-6 mt-4 border-t",children:[e.jsxs(Ce,{variant:"outline",size:"lg",onClick:Se,className:"w-full sm:w-auto px-8",children:[e.jsx(wf,{className:"mr-2 h-5 w-5"})," Back"]}),e.jsxs("div",{className:"flex items-center gap-6 w-full sm:w-auto",children:[e.jsxs("p",{className:"text-sm font-bold text-muted-foreground whitespace-nowrap",children:[o.length," SELECTED"]}),e.jsxs(Ce,{size:"lg",onClick:He,disabled:o.length===0,className:"w-full sm:w-auto px-10",children:["Review Selection ",e.jsx(uy,{className:"ml-2 h-5 w-5"})]})]})]})]}),t===3&&e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6 bg-gradient-to-r from-muted/50 to-muted/20 p-6 rounded-2xl border",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-widest mb-1",children:"Configuration For"}),e.jsx("p",{className:"text-2xl font-extrabold",children:n?.name})]}),e.jsxs("div",{className:"text-center md:text-right",children:[e.jsx("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-widest mb-1",children:"Current Total"}),e.jsxs("p",{className:"text-4xl font-extrabold text-primary",children:["",ye.toLocaleString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 p-6 bg-white rounded-xl border shadow-sm items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Unit Type"}),e.jsxs(mn,{value:B,onValueChange:we=>U(we),children:[e.jsx(un,{className:"font-bold",children:e.jsx(gn,{placeholder:"Select unit"})}),e.jsxs(hn,{children:[e.jsx(Ks,{value:"Sqft",children:"Sqft"}),e.jsx(Ks,{value:"Sqmt",children:"Sqmt"}),e.jsx(Ks,{value:"Length",children:"Length"}),e.jsx(Ks,{value:"LS",children:"LS"}),e.jsx(Ks,{value:"RFT",children:"RFT"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Dim A"}),e.jsx(Xe,{type:"number",value:q??"",onChange:we=>G(we.target.value?Number(we.target.value):void 0),placeholder:"A",className:"font-bold"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Dim B"}),e.jsx(Xe,{type:"number",value:W??"",onChange:we=>he(we.target.value?Number(we.target.value):void 0),placeholder:"B",className:"font-bold"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Dim C"}),e.jsx(Xe,{type:"number",value:Z??"",onChange:we=>ie(we.target.value?Number(we.target.value):void 0),placeholder:"C",className:"font-bold"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Basis Qty"}),e.jsx(Xe,{type:"number",value:Q,onChange:we=>k(Number(we.target.value)||0),className:"font-bold bg-muted/30"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Wastage %"}),e.jsx(Xe,{type:"number",value:K,onChange:we=>ee(Number(we.target.value)||0),className:"font-bold border-orange-200"})]})]}),e.jsx("div",{className:"rounded-xl border shadow-sm overflow-hidden bg-white",children:e.jsxs(wy,{children:[e.jsx(Sy,{className:"bg-muted/30",children:e.jsxs(Td,{children:[e.jsx(Gi,{className:"w-[40px] font-bold",children:"Sl"}),e.jsx(Gi,{className:"font-bold py-4",children:"Item"}),e.jsx(Gi,{className:"w-[100px] font-bold",children:"Shop"}),e.jsx(Gi,{className:"w-[120px] font-bold",children:"Description"}),e.jsx(Gi,{className:"w-[60px] font-bold",children:"Unit"}),e.jsx(Gi,{className:"w-[80px] font-bold",children:"Qty"}),e.jsx(Gi,{className:"w-[100px] font-bold",children:"Rate"}),e.jsx(Gi,{className:"w-[110px] font-bold",children:"Amount"}),e.jsx(Gi,{className:"w-[70px] font-bold",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-[10px]",children:"Selection"}),e.jsx(Tn,{checked:y.length>0&&y.every(we=>we.applyWastage),onCheckedChange:we=>{p(Ne=>Ne.map(ke=>({...ke,applyWastage:!!we})))}}),e.jsx("span",{className:"text-[9px] font-normal",children:"All"})]})}),e.jsx(Gi,{className:"w-[80px] font-bold",children:"Wastages"}),e.jsx(Gi,{className:"w-[90px] font-bold",children:"Total"}),e.jsx(Gi,{className:"w-[90px] font-bold",children:"Per Sqf Qty"})]})}),e.jsxs(Ny,{children:[ge.computed.map((we,Ne)=>{const ke=we.baseQty*(we.supplyRate+we.installRate);return e.jsxs(Td,{className:"hover:bg-muted/5",children:[e.jsx(Ja,{className:"text-center font-medium text-[10px]",children:Ne+1}),e.jsx(Ja,{className:"font-semibold text-[10px]",children:we.name}),e.jsx(Ja,{className:"text-[10px]",children:we.shop_name||"N/A"}),e.jsx(Ja,{children:e.jsx(Xe,{value:we.location,onChange:Be=>Le(we.id,"location",Be.target.value),className:"h-8 border-muted text-[10px] px-2"})}),e.jsx(Ja,{className:"text-[10px] font-medium",children:we.unit}),e.jsx(Ja,{children:e.jsx(Xe,{type:"number",value:we.baseQty,onChange:Be=>Le(we.id,"baseQty",Number(Be.target.value)),className:"h-8 border-muted text-[10px] px-2 font-bold w-full"})}),e.jsxs(Ja,{className:"text-[10px] font-bold",children:["",(we.supplyRate+we.installRate).toLocaleString()]}),e.jsxs(Ja,{className:"text-[10px] font-bold",children:["",ke.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx(Ja,{className:"text-center",children:e.jsx(Tn,{checked:we.applyWastage,onCheckedChange:Be=>Le(we.id,"applyWastage",Be)})}),e.jsx(Ja,{className:"text-[10px] font-bold text-orange-600",children:we.wastageQty.toFixed(2)}),e.jsx(Ja,{className:"text-[10px] font-bold",children:we.effectiveQty.toFixed(2)}),e.jsx(Ja,{className:"text-[10px] font-bold text-primary",children:we.perUnitQty.toFixed(4)})]},we.id)}),e.jsxs(Td,{className:"bg-muted/20 font-black",children:[e.jsx(Ja,{colSpan:7,className:"text-right py-3 pr-4",children:"Total"}),e.jsxs(Ja,{className:"text-[11px]",children:["",ge.computed.reduce((we,Ne)=>we+Ne.baseQty*(Ne.supplyRate+Ne.installRate),0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx(Ja,{colSpan:4})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 pt-6 mt-4 border-t",children:[e.jsxs(Ce,{variant:"outline",size:"lg",onClick:Se,className:"w-full sm:w-auto px-8",children:[e.jsx(wf,{className:"mr-2 h-5 w-5"})," Back to Selection"]}),e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsx(Ce,{size:"lg",onClick:Y,disabled:j||y.length===0,className:"w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white font-bold px-10 transition-all shadow-lg",children:j?e.jsxs(e.Fragment,{children:[e.jsx(Sl,{className:"mr-2 h-5 w-5 animate-spin"})," Saving..."]}):"Save Configuration"}),e.jsxs(Ce,{size:"lg",onClick:He,className:"w-full sm:w-auto bg-primary hover:bg-primary/90 text-white font-bold px-12 transition-all",children:["Continue to Review ",e.jsx(uy,{className:"ml-2 h-5 w-5"})]})]})]})]})}),t===4&&e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8 py-4 px-6 bg-muted/30 rounded-xl border border-dashed border-muted-foreground/30",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-muted-foreground mb-1",children:"Product Configuration For"}),e.jsx("p",{className:"text-xl font-bold uppercase",children:n?.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-muted-foreground mb-1",children:"Category / Subcategory"}),e.jsxs("p",{className:"text-lg font-bold",children:[A," ",e.jsx("span",{className:"text-muted-foreground mx-1",children:"/"})," ",d]})]})]}),e.jsx("div",{className:"overflow-x-auto border-2 border-black rounded-sm shadow-xl",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-white text-black text-[11px] font-black uppercase tracking-widest border-b border-black",children:[e.jsx("th",{rowSpan:2,className:"border border-black p-3 text-center w-[50px]",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border border-black p-3 text-left",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border border-black p-3 text-center w-[120px]",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border border-black p-3 text-left",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border border-black p-3 text-center w-[80px]",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border border-black p-3 text-center w-[80px]",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border border-black p-3 text-center border-b-0",children:"Rate (INR)"}),e.jsx("th",{colSpan:2,className:"border border-black p-3 text-center border-b-0",children:"Amount (INR)"})]}),e.jsxs("tr",{className:"bg-white text-black text-[9px] font-black uppercase tracking-widest border-t border-black",children:[e.jsx("th",{className:"border border-black p-2 text-right w-[100px]",children:"Supply"}),e.jsx("th",{className:"border border-black p-2 text-right w-[100px]",children:"Installation"}),e.jsx("th",{className:"border border-black p-2 text-right w-[110px]",children:"Supply"}),e.jsx("th",{className:"border border-black p-2 text-right w-[110px]",children:"Installation"})]})]}),e.jsx("tbody",{className:"bg-white",children:e.jsxs("tr",{className:"text-[12px] border-b border-black/10 hover:bg-muted/10 transition-colors",children:[e.jsx("td",{className:"border-r border-black p-3 text-center font-bold",children:"1"}),e.jsx("td",{className:"border-r border-black p-3 font-black text-xs uppercase",children:n?.name}),e.jsx("td",{className:"border-r border-black p-3 text-center italic",children:"Main Area"}),e.jsxs("td",{className:"border-r border-black p-3 text-[10px] text-muted-foreground leading-tight",children:["Consolidated configuration for ",n?.name]}),e.jsx("td",{className:"border-r border-black p-3 text-center font-bold text-xs",children:B}),e.jsx("td",{className:"border-r border-black p-3 text-center font-black",children:Q}),e.jsxs("td",{className:"border-r border-black p-3 text-right font-bold",children:["",ge.totalSupply.toLocaleString()]}),e.jsxs("td",{className:"border-r border-black p-3 text-right font-bold",children:["",ge.totalInstall.toLocaleString()]}),e.jsxs("td",{className:"border-r border-black p-3 text-right font-black text-primary",children:["",ge.totalSupply.toLocaleString()]}),e.jsxs("td",{className:"border-black p-3 text-right font-black text-primary",children:["",ge.totalInstall.toLocaleString()]})]})}),e.jsx("tfoot",{className:"bg-black/5",children:e.jsxs("tr",{className:"border-t-2 border-black font-black",children:[e.jsx("td",{colSpan:8,className:"p-4 text-right uppercase tracking-tighter",children:"Grand Total Amount (INR)"}),e.jsxs("td",{colSpan:2,className:"p-4 text-right pr-6 text-xl text-primary bg-primary/5 border-l border-black/10",children:["",ye.toLocaleString()]})]})})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 pt-12 mt-8 border-t border-black/10",children:[e.jsxs(Ce,{variant:"outline",onClick:Se,className:"w-full sm:w-auto px-6 font-bold uppercase tracking-wide",disabled:j,children:[e.jsx(wf,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ce,{onClick:pe,disabled:j,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold px-8 uppercase tracking-wide transition-all shadow-lg hover:scale-105",children:j?e.jsxs(e.Fragment,{children:[e.jsx(Sl,{className:"mr-2 h-6 w-6 animate-spin"})," Finalizing..."]}):"Add to Create BOQ"})]})]})]})]})})})}function PK(){const{toast:t}=ua(),[s,n]=S.useState([]),[r,i]=S.useState(!0),[c,A]=S.useState(""),[u,d]=S.useState(null),[h,o]=S.useState({name:"",description:""}),m=async()=>{try{i(!0);const B=await lt("/api/vendor-categories");if(B.ok){const U=await B.json();n(U.categories||[])}}catch(B){console.error("Failed to load vendor categories:",B),t({title:"Error",description:"Failed to load vendor categories",variant:"destructive"})}finally{i(!1)}};S.useEffect(()=>{m()},[]);const y=async B=>{if(B.preventDefault(),!h.name.trim()){t({title:"Error",description:"Category name is required",variant:"destructive"});return}try{const U=u?"PUT":"POST",Q=u?`/api/vendor-categories/${u}`:"/api/vendor-categories",k=await lt(Q,{method:U,headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(k.ok)t({title:"Success",description:u?"Vendor category updated successfully":"Vendor category created successfully"}),o({name:"",description:""}),d(null),m();else{const K=await k.json();t({title:"Error",description:K.message||"Failed to save vendor category",variant:"destructive"})}}catch(U){console.error("Failed to save vendor category:",U),t({title:"Error",description:"Failed to save vendor category",variant:"destructive"})}},p=B=>{d(B.id),o({name:B.name,description:B.description||""}),window.scrollTo({top:0,behavior:"smooth"})},j=async(B,U)=>{if(window.confirm(`Are you sure you want to delete "${U}"?`))try{const Q=await lt(`/api/vendor-categories/${B}`,{method:"DELETE"});if(Q.ok)t({title:"Success",description:"Vendor category deleted successfully"}),m();else{const k=await Q.json();t({title:"Error",description:k.message||"Failed to delete vendor category",variant:"destructive"})}}catch(Q){console.error("Failed to delete vendor category:",Q),t({title:"Error",description:"Failed to delete vendor category",variant:"destructive"})}},b=()=>{d(null),o({name:"",description:""})},w=s.filter(B=>B.name.toLowerCase().includes(c.toLowerCase()));return e.jsx(Sa,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading",children:"Vendor Categories"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage vendor categories for shops and materials"})]}),e.jsxs(Ms,{children:[e.jsxs(Ar,{children:[e.jsxs(ur,{children:[u?"Edit":"Add"," Vendor Category"]}),e.jsx(sa,{children:u?"Update the vendor category details":"Create a new vendor category"})]}),e.jsx(Ws,{children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{htmlFor:"name",children:["Category Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(Xe,{id:"name",value:h.name,onChange:B=>o({...h,name:B.target.value}),placeholder:"e.g., Fire Safety Goods & Service Supplier",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"description",children:"Description"}),e.jsx(Cl,{id:"description",value:h.description,onChange:B=>o({...h,description:B.target.value}),placeholder:"Optional description",rows:1})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ce,{type:"submit",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"}),u?"Update":"Add"," Category"]}),u&&e.jsx(Ce,{type:"button",variant:"outline",onClick:b,children:"Cancel"})]})]})})]}),e.jsxs(Ms,{children:[e.jsx(Ar,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ur,{children:"All Vendor Categories"}),e.jsxs(sa,{children:[w.length," categor",w.length===1?"y":"ies"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qy,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(Xe,{value:c,onChange:B=>A(B.target.value),placeholder:"Search categories...",className:"w-64"})]})]})}),e.jsx(Ws,{children:r?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Loading..."}):w.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:c?"No categories found":"No vendor categories yet. Add one above to get started."}):e.jsx("div",{className:"space-y-2",children:w.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:B.name}),B.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:B.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>p(B),children:e.jsx(FL,{className:"h-4 w-4"})}),e.jsx(Ce,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",onClick:()=>j(B.id,B.name),children:e.jsx(Gc,{className:"h-4 w-4"})})]})]},B.id))})})]})]})})}const kK="modulepreload",HK=function(t){return"/"+t},RN={},Yc=function(s,n,r){let i=Promise.resolve();if(n&&n.length>0){let d=function(h){return Promise.all(h.map(o=>Promise.resolve(o).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const A=document.querySelector("meta[property=csp-nonce]"),u=A?.nonce||A?.getAttribute("nonce");i=d(n.map(h=>{if(h=HK(h),h in RN)return;RN[h]=!0;const o=h.endsWith(".css"),m=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const y=document.createElement("link");if(y.rel=o?"stylesheet":kK,o||(y.as="script"),y.crossOrigin="",y.href=h,u&&y.setAttribute("nonce",u),document.head.appendChild(y),o)return new Promise((p,j)=>{y.addEventListener("load",p),y.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(A){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=A,window.dispatchEvent(u),!u.defaultPrevented)throw A}return i.then(A=>{for(const u of A||[])u.status==="rejected"&&c(u.reason);return s().catch(c)})},pv=t=>String(t||"").toUpperCase(),Xc=t=>{if(!t)return null;const s=pv(t.subcategory||t.subcategory_name),n=pv(t.category||t.category_name),r=pv(t.name);if(s.includes("DOOR")||n.includes("DOOR")||r.includes("DOOR")||s.includes("VISION PANEL")||s==="WPC"&&r.includes("FRAME")||s.includes("FLUSH")||s.includes("TEAK")||s.includes("STILE"))return"doors";if(s.includes("CIVIL")||n.includes("CIVIL")||s.includes("WALL")||n.includes("WALL")||s.includes("CEMENT")||s.includes("BRICK")||s.includes("SAND"))return"civilwall";if(s.includes("ELECTRICAL")||n.includes("ELECTRICAL")||s.includes("WIRE")||s.includes("CABLE")||s.includes("SWITCH")||s.includes("SOCKET")||s.includes("LIGHT")||s.includes("LED")||s.includes("FAN")||s.includes("MCB")||s.includes("CONDUIT"))return"electrical";if(s.includes("FLOOR")||n.includes("FLOOR")||s.includes("TILE")||s.includes("MARBLE")||s.includes("GRANITE")||r.includes("FLOORING"))return"flooring";if(s.includes("PLUMB")||n.includes("PLUMB")||s.includes("PIPE")||n.includes("PIPE")||s.includes("WATER")||s.includes("TAP")||s.includes("FAUCET")||s.includes("SINK"))return"plumbing";if(s.includes("PAINT")||n.includes("PAINT")||s.includes("PUTTY")||s.includes("PRIMER")||s.includes("EMULSION"))return"painting";if(s.includes("CEILING")||n.includes("CEILING")||s.includes("GYPSUM")||s.includes("POP")||s.includes("GRID"))return"falseceiling";const i=(s||n||r).trim();if(i){const c=i.replace(/[-\s]/g,"");if(/\w+/.test(c))return c.toLowerCase()}return null};var mv={exports:{}};function wa(t){"@babel/helpers - typeof";return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},wa(t)}var ed=Uint8Array,Xl=Uint16Array,Fj=Int32Array,Ij=new ed([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Rj=new ed([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ON=new ed([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jI=function(t,s){for(var n=new Xl(31),r=0;r<31;++r)n[r]=s+=1<<t[r-1];for(var i=new Fj(n[30]),r=1;r<30;++r)for(var c=n[r];c<n[r+1];++c)i[c]=c-n[r]<<5|r;return{b:n,r:i}},wI=jI(Ij,2),zK=wI.b,Gb=wI.r;zK[28]=258,Gb[258]=28;var KK=jI(Rj,0),UN=KK.r,Wb=new Xl(32768);for(var Za=0;Za<32768;++Za){var nu=(Za&43690)>>1|(Za&21845)<<1;nu=(nu&52428)>>2|(nu&13107)<<2,nu=(nu&61680)>>4|(nu&3855)<<4,Wb[Za]=((nu&65280)>>8|(nu&255)<<8)>>1}var tm=(function(t,s,n){for(var r=t.length,i=0,c=new Xl(s);i<r;++i)t[i]&&++c[t[i]-1];var A=new Xl(s);for(i=1;i<s;++i)A[i]=A[i-1]+c[i-1]<<1;var u;if(n){u=new Xl(1<<s);var d=15-s;for(i=0;i<r;++i)if(t[i])for(var h=i<<4|t[i],o=s-t[i],m=A[t[i]-1]++<<o,y=m|(1<<o)-1;m<=y;++m)u[Wb[m]>>d]=h}else for(u=new Xl(r),i=0;i<r;++i)t[i]&&(u[i]=Wb[A[t[i]-1]++]>>15-t[i]);return u}),Sh=new ed(288);for(var Za=0;Za<144;++Za)Sh[Za]=8;for(var Za=144;Za<256;++Za)Sh[Za]=9;for(var Za=256;Za<280;++Za)Sh[Za]=7;for(var Za=280;Za<288;++Za)Sh[Za]=8;var Zy=new ed(32);for(var Za=0;Za<32;++Za)Zy[Za]=5;var $K=tm(Sh,9,0),VK=tm(Zy,5,0),SI=function(t){return(t+7)/8|0},qK=function(t,s,n){return(n==null||n>t.length)&&(n=t.length),new ed(t.subarray(s,n))},oA=function(t,s,n){n<<=s&7;var r=s/8|0;t[r]|=n,t[r+1]|=n>>8},Mp=function(t,s,n){n<<=s&7;var r=s/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},gv=function(t,s){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,c=n.slice();if(!i)return{t:BI,l:0};if(i==1){var A=new ed(n[0].s+1);return A[n[0].s]=1,{t:A,l:1}}n.sort(function(K,ee){return K.f-ee.f}),n.push({s:-1,f:25001});var u=n[0],d=n[1],h=0,o=1,m=2;for(n[0]={s:-1,f:u.f+d.f,l:u,r:d};o!=i-1;)u=n[n[h].f<n[m].f?h++:m++],d=n[h!=o&&n[h].f<n[m].f?h++:m++],n[o++]={s:-1,f:u.f+d.f,l:u,r:d};for(var y=c[0].s,r=1;r<i;++r)c[r].s>y&&(y=c[r].s);var p=new Xl(y+1),j=Yb(n[o-1],p,0);if(j>s){var r=0,b=0,w=j-s,B=1<<w;for(c.sort(function(ee,q){return p[q.s]-p[ee.s]||ee.f-q.f});r<i;++r){var U=c[r].s;if(p[U]>s)b+=B-(1<<j-p[U]),p[U]=s;else break}for(b>>=w;b>0;){var Q=c[r].s;p[Q]<s?b-=1<<s-p[Q]++-1:++r}for(;r>=0&&b;--r){var k=c[r].s;p[k]==s&&(--p[k],++b)}j=s}return{t:new ed(p),l:j}},Yb=function(t,s,n){return t.s==-1?Math.max(Yb(t.l,s,n+1),Yb(t.r,s,n+1)):s[t.s]=n},LN=function(t){for(var s=t.length;s&&!t[--s];);for(var n=new Xl(++s),r=0,i=t[0],c=1,A=function(d){n[r++]=d},u=1;u<=s;++u)if(t[u]==i&&u!=s)++c;else{if(!i&&c>2){for(;c>138;c-=138)A(32754);c>2&&(A(c>10?c-11<<5|28690:c-3<<5|12305),c=0)}else if(c>3){for(A(i),--c;c>6;c-=6)A(8304);c>2&&(A(c-3<<5|8208),c=0)}for(;c--;)A(i);c=1,i=t[u]}return{c:n.subarray(0,r),n:s}},Pp=function(t,s){for(var n=0,r=0;r<s.length;++r)n+=t[r]*s[r];return n},NI=function(t,s,n){var r=n.length,i=SI(s+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var c=0;c<r;++c)t[i+c+4]=n[c];return(i+4+r)*8},DN=function(t,s,n,r,i,c,A,u,d,h,o){oA(s,o++,n),++i[256];for(var m=gv(i,15),y=m.t,p=m.l,j=gv(c,15),b=j.t,w=j.l,B=LN(y),U=B.c,Q=B.n,k=LN(b),K=k.c,ee=k.n,q=new Xl(19),G=0;G<U.length;++G)++q[U[G]&31];for(var G=0;G<K.length;++G)++q[K[G]&31];for(var W=gv(q,7),he=W.t,Z=W.l,ie=19;ie>4&&!he[ON[ie-1]];--ie);var ce=h+5<<3,ae=Pp(i,Sh)+Pp(c,Zy)+A,de=Pp(i,y)+Pp(c,b)+A+14+3*ie+Pp(q,he)+2*q[16]+3*q[17]+7*q[18];if(d>=0&&ce<=ae&&ce<=de)return NI(s,o,t.subarray(d,d+h));var se,re,te,be;if(oA(s,o,1+(de<ae)),o+=2,de<ae){se=tm(y,p,0),re=y,te=tm(b,w,0),be=b;var He=tm(he,Z,0);oA(s,o,Q-257),oA(s,o+5,ee-1),oA(s,o+10,ie-4),o+=14;for(var G=0;G<ie;++G)oA(s,o+3*G,he[ON[G]]);o+=3*ie;for(var pe=[U,K],Y=0;Y<2;++Y)for(var me=pe[Y],G=0;G<me.length;++G){var Se=me[G]&31;oA(s,o,He[Se]),o+=he[Se],Se>15&&(oA(s,o,me[G]>>5&127),o+=me[G]>>12)}}else se=$K,re=Sh,te=VK,be=Zy;for(var G=0;G<u;++G){var je=r[G];if(je>255){var Se=je>>18&31;Mp(s,o,se[Se+257]),o+=re[Se+257],Se>7&&(oA(s,o,je>>23&31),o+=Ij[Se]);var Le=je&31;Mp(s,o,te[Le]),o+=be[Le],Le>3&&(Mp(s,o,je>>5&8191),o+=Rj[Le])}else Mp(s,o,se[je]),o+=re[je]}return Mp(s,o,se[256]),o+re[256]},GK=new Fj([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),BI=new ed(0),WK=function(t,s,n,r,i,c){var A=c.z||t.length,u=new ed(r+A+5*(1+Math.ceil(A/7e3))+i),d=u.subarray(r,u.length-i),h=c.l,o=(c.r||0)&7;if(s){o&&(d[0]=c.r>>3);for(var m=GK[s-1],y=m>>13,p=m&8191,j=(1<<n)-1,b=c.p||new Xl(32768),w=c.h||new Xl(j+1),B=Math.ceil(n/3),U=2*B,Q=function(Qe){return(t[Qe]^t[Qe+1]<<B^t[Qe+2]<<U)&j},k=new Fj(25e3),K=new Xl(288),ee=new Xl(32),q=0,G=0,W=c.i||0,he=0,Z=c.w||0,ie=0;W+2<A;++W){var ce=Q(W),ae=W&32767,de=w[ce];if(b[ae]=de,w[ce]=ae,Z<=W){var se=A-W;if((q>7e3||he>24576)&&(se>423||!h)){o=DN(t,d,0,k,K,ee,G,he,ie,W-ie,o),he=q=G=0,ie=W;for(var re=0;re<286;++re)K[re]=0;for(var re=0;re<30;++re)ee[re]=0}var te=2,be=0,He=p,pe=ae-de&32767;if(se>2&&ce==Q(W-pe))for(var Y=Math.min(y,se)-1,me=Math.min(32767,W),Se=Math.min(258,se);pe<=me&&--He&&ae!=de;){if(t[W+te]==t[W+te-pe]){for(var je=0;je<Se&&t[W+je]==t[W+je-pe];++je);if(je>te){if(te=je,be=pe,je>Y)break;for(var Le=Math.min(pe,je-2),ge=0,re=0;re<Le;++re){var ye=W-pe+re&32767,we=b[ye],Ne=ye-we&32767;Ne>ge&&(ge=Ne,de=ye)}}}ae=de,de=b[ae],pe+=ae-de&32767}if(be){k[he++]=268435456|Gb[te]<<18|UN[be];var ke=Gb[te]&31,Be=UN[be]&31;G+=Ij[ke]+Rj[Be],++K[257+ke],++ee[Be],Z=W+te,++q}else k[he++]=t[W],++K[t[W]]}}for(W=Math.max(W,Z);W<A;++W)k[he++]=t[W],++K[t[W]];o=DN(t,d,h,k,K,ee,G,he,ie,W-ie,o),h||(c.r=o&7|d[o/8|0]<<3,o-=7,c.h=w,c.p=b,c.i=W,c.w=Z)}else{for(var W=c.w||0;W<A+h;W+=65535){var Ae=W+65535;Ae>=A&&(d[o/8|0]=h,Ae=A),o=NI(d,o+1,t.subarray(W,Ae))}c.i=A}return qK(u,0,r+SI(o)+i)},CI=function(){var t=1,s=0;return{p:function(n){for(var r=t,i=s,c=n.length|0,A=0;A!=c;){for(var u=Math.min(A+2655,c);A<u;++A)i+=r+=n[A];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,s=i},d:function(){return t%=65521,s%=65521,(t&255)<<24|(t&65280)<<8|(s&255)<<8|s>>8}}},YK=function(t,s,n,r,i){if(!i&&(i={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),A=new ed(c.length+t.length);A.set(c),A.set(t,c.length),t=A,i.w=c.length}return WK(t,s.level==null?6:s.level,s.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+s.mem,n,r,i)},EI=function(t,s,n){for(;n;++s)t[s]=n,n>>>=8},XK=function(t,s){var n=s.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(s.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,s.dictionary){var i=CI();i.p(s.dictionary),EI(t,2,i.d())}};function Xb(t,s){s||(s={});var n=CI();n.p(t);var r=YK(t,s,s.dictionary?6:2,4);return XK(r,s),EI(r,r.length-4,n.d()),r}var JK=typeof TextDecoder<"u"&&new TextDecoder,ZK=0;try{JK.decode(BI,{stream:!0}),ZK=1}catch{}function e$(t){if(Array.isArray(t))return t}function t$(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,c,A,u=[],d=!0,h=!1;try{if(c=(n=n.call(t)).next,s!==0)for(;!(d=(r=c.call(n)).done)&&(u.push(r.value),u.length!==s);d=!0);}catch(o){h=!0,i=o}finally{try{if(!d&&n.return!=null&&(A=n.return(),Object(A)!==A))return}finally{if(h)throw i}}return u}}function QN(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=Array(s);n<s;n++)r[n]=t[n];return r}function s$(t,s){if(t){if(typeof t=="string")return QN(t,s);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QN(t,s):void 0}}function n$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _N(t,s){return e$(t)||t$(t,s)||s$(t,s)||n$()}function MN(t,s="utf8"){return new TextDecoder(s).decode(t)}const r$=new TextEncoder;function a$(t){return r$.encode(t)}const i$=1024*8,o$=(()=>{const t=new Uint8Array(4),s=new Uint32Array(t.buffer);return!((s[0]=1)&t[0])})(),yv={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Oj{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(s=i$,n={}){let r=!1;typeof s=="number"?s=new ArrayBuffer(s):(r=!0,this.lastWrittenByte=s.byteLength);const i=n.offset?n.offset>>>0:0,c=s.byteLength-i;let A=i;(ArrayBuffer.isView(s)||s instanceof Oj)&&(s.byteLength!==s.buffer.byteLength&&(A=s.byteOffset+i),s=s.buffer),r?this.lastWrittenByte=c:this.lastWrittenByte=0,this.buffer=s,this.length=c,this.byteLength=c,this.byteOffset=A,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,A,c),this._mark=0,this._marks=[]}available(s=1){return this.offset+s<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(s=1){return this.offset+=s,this}back(s=1){return this.offset-=s,this}seek(s){return this.offset=s,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const s=this._marks.pop();if(s===void 0)throw new Error("Mark stack empty");return this.seek(s),this}rewind(){return this.offset=0,this}ensureAvailable(s=1){if(!this.available(s)){const r=(this.offset+s)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(s=1){return this.readArray(s,"uint8")}readArray(s,n){const r=yv[n].BYTES_PER_ELEMENT*s,i=this.byteOffset+this.offset,c=this.buffer.slice(i,i+r);if(this.littleEndian===o$&&n!=="uint8"&&n!=="int8"){const u=new Uint8Array(this.buffer.slice(i,i+r));u.reverse();const d=new yv[n](u.buffer);return this.offset+=r,d.reverse(),d}const A=new yv[n](c);return this.offset+=r,A}readInt16(){const s=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,s}readUint16(){const s=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,s}readInt32(){const s=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,s}readUint32(){const s=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat32(){const s=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat64(){const s=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,s}readBigInt64(){const s=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,s}readBigUint64(){const s=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,s}readChar(){return String.fromCharCode(this.readInt8())}readChars(s=1){let n="";for(let r=0;r<s;r++)n+=this.readChar();return n}readUtf8(s=1){return MN(this.readBytes(s))}decodeText(s=1,n="utf8"){return MN(this.readBytes(s),n)}writeBoolean(s){return this.writeUint8(s?255:0),this}writeInt8(s){return this.ensureAvailable(1),this._data.setInt8(this.offset++,s),this._updateLastWrittenByte(),this}writeUint8(s){return this.ensureAvailable(1),this._data.setUint8(this.offset++,s),this._updateLastWrittenByte(),this}writeByte(s){return this.writeUint8(s)}writeBytes(s){this.ensureAvailable(s.length);for(let n=0;n<s.length;n++)this._data.setUint8(this.offset++,s[n]);return this._updateLastWrittenByte(),this}writeInt16(s){return this.ensureAvailable(2),this._data.setInt16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(s){return this.ensureAvailable(2),this._data.setUint16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(s){return this.ensureAvailable(4),this._data.setInt32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(s){return this.ensureAvailable(4),this._data.setUint32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(s){return this.ensureAvailable(4),this._data.setFloat32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(s){return this.ensureAvailable(8),this._data.setFloat64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(s){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(s){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(s){return this.writeUint8(s.charCodeAt(0))}writeChars(s){for(let n=0;n<s.length;n++)this.writeUint8(s.charCodeAt(n));return this}writeUtf8(s){return this.writeBytes(a$(s))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function $f(t){let s=t.length;for(;--s>=0;)t[s]=0}const l$=3,c$=258,TI=29,d$=256,A$=d$+1+TI,FI=30,u$=512,h$=new Array((A$+2)*2);$f(h$);const f$=new Array(FI*2);$f(f$);const p$=new Array(u$);$f(p$);const m$=new Array(c$-l$+1);$f(m$);const g$=new Array(TI);$f(g$);const y$=new Array(FI);$f(y$);const x$=(t,s,n,r)=>{let i=t&65535|0,c=t>>>16&65535|0,A=0;for(;n!==0;){A=n>2e3?2e3:n,n-=A;do i=i+s[r++]|0,c=c+i|0;while(--A);i%=65521,c%=65521}return i|c<<16|0};var Jb=x$;const v$=()=>{let t,s=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;s[n]=t}return s},b$=new Uint32Array(v$()),j$=(t,s,n,r)=>{const i=b$,c=r+n;t^=-1;for(let A=r;A<c;A++)t=t>>>8^i[(t^s[A])&255];return t^-1};var Ed=j$,Zb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},II={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const w$=(t,s)=>Object.prototype.hasOwnProperty.call(t,s);var S$=function(t){const s=Array.prototype.slice.call(arguments,1);for(;s.length;){const n=s.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)w$(n,r)&&(t[r]=n[r])}}return t},N$=t=>{let s=0;for(let r=0,i=t.length;r<i;r++)s+=t[r].length;const n=new Uint8Array(s);for(let r=0,i=0,c=t.length;r<c;r++){let A=t[r];n.set(A,i),i+=A.length}return n},RI={assign:S$,flattenChunks:N$};let OI=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{OI=!1}const xm=new Uint8Array(256);for(let t=0;t<256;t++)xm[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;xm[254]=xm[254]=1;var B$=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let s,n,r,i,c,A=t.length,u=0;for(i=0;i<A;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<A&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),u+=n<128?1:n<2048?2:n<65536?3:4;for(s=new Uint8Array(u),c=0,i=0;c<u;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<A&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?s[c++]=n:n<2048?(s[c++]=192|n>>>6,s[c++]=128|n&63):n<65536?(s[c++]=224|n>>>12,s[c++]=128|n>>>6&63,s[c++]=128|n&63):(s[c++]=240|n>>>18,s[c++]=128|n>>>12&63,s[c++]=128|n>>>6&63,s[c++]=128|n&63);return s};const C$=(t,s)=>{if(s<65534&&t.subarray&&OI)return String.fromCharCode.apply(null,t.length===s?t:t.subarray(0,s));let n="";for(let r=0;r<s;r++)n+=String.fromCharCode(t[r]);return n};var E$=(t,s)=>{const n=s||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,s));let r,i;const c=new Array(n*2);for(i=0,r=0;r<n;){let A=t[r++];if(A<128){c[i++]=A;continue}let u=xm[A];if(u>4){c[i++]=65533,r+=u-1;continue}for(A&=u===2?31:u===3?15:7;u>1&&r<n;)A=A<<6|t[r++]&63,u--;if(u>1){c[i++]=65533;continue}A<65536?c[i++]=A:(A-=65536,c[i++]=55296|A>>10&1023,c[i++]=56320|A&1023)}return C$(c,i)},T$=(t,s)=>{s=s||t.length,s>t.length&&(s=t.length);let n=s-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?s:n+xm[t[n]]>s?n:s},e1={string2buf:B$,buf2string:E$,utf8border:T$};function F$(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var I$=F$;const Jg=16209,R$=16191;var O$=function(s,n){let r,i,c,A,u,d,h,o,m,y,p,j,b,w,B,U,Q,k,K,ee,q,G,W,he;const Z=s.state;r=s.next_in,W=s.input,i=r+(s.avail_in-5),c=s.next_out,he=s.output,A=c-(n-s.avail_out),u=c+(s.avail_out-257),d=Z.dmax,h=Z.wsize,o=Z.whave,m=Z.wnext,y=Z.window,p=Z.hold,j=Z.bits,b=Z.lencode,w=Z.distcode,B=(1<<Z.lenbits)-1,U=(1<<Z.distbits)-1;e:do{j<15&&(p+=W[r++]<<j,j+=8,p+=W[r++]<<j,j+=8),Q=b[p&B];t:for(;;){if(k=Q>>>24,p>>>=k,j-=k,k=Q>>>16&255,k===0)he[c++]=Q&65535;else if(k&16){K=Q&65535,k&=15,k&&(j<k&&(p+=W[r++]<<j,j+=8),K+=p&(1<<k)-1,p>>>=k,j-=k),j<15&&(p+=W[r++]<<j,j+=8,p+=W[r++]<<j,j+=8),Q=w[p&U];s:for(;;){if(k=Q>>>24,p>>>=k,j-=k,k=Q>>>16&255,k&16){if(ee=Q&65535,k&=15,j<k&&(p+=W[r++]<<j,j+=8,j<k&&(p+=W[r++]<<j,j+=8)),ee+=p&(1<<k)-1,ee>d){s.msg="invalid distance too far back",Z.mode=Jg;break e}if(p>>>=k,j-=k,k=c-A,ee>k){if(k=ee-k,k>o&&Z.sane){s.msg="invalid distance too far back",Z.mode=Jg;break e}if(q=0,G=y,m===0){if(q+=h-k,k<K){K-=k;do he[c++]=y[q++];while(--k);q=c-ee,G=he}}else if(m<k){if(q+=h+m-k,k-=m,k<K){K-=k;do he[c++]=y[q++];while(--k);if(q=0,m<K){k=m,K-=k;do he[c++]=y[q++];while(--k);q=c-ee,G=he}}}else if(q+=m-k,k<K){K-=k;do he[c++]=y[q++];while(--k);q=c-ee,G=he}for(;K>2;)he[c++]=G[q++],he[c++]=G[q++],he[c++]=G[q++],K-=3;K&&(he[c++]=G[q++],K>1&&(he[c++]=G[q++]))}else{q=c-ee;do he[c++]=he[q++],he[c++]=he[q++],he[c++]=he[q++],K-=3;while(K>2);K&&(he[c++]=he[q++],K>1&&(he[c++]=he[q++]))}}else if((k&64)===0){Q=w[(Q&65535)+(p&(1<<k)-1)];continue s}else{s.msg="invalid distance code",Z.mode=Jg;break e}break}}else if((k&64)===0){Q=b[(Q&65535)+(p&(1<<k)-1)];continue t}else if(k&32){Z.mode=R$;break e}else{s.msg="invalid literal/length code",Z.mode=Jg;break e}break}}while(r<i&&c<u);K=j>>3,r-=K,j-=K<<3,p&=(1<<j)-1,s.next_in=r,s.next_out=c,s.avail_in=r<i?5+(i-r):5-(r-i),s.avail_out=c<u?257+(u-c):257-(c-u),Z.hold=p,Z.bits=j};const df=15,PN=852,kN=592,HN=0,xv=1,zN=2,U$=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),L$=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),D$=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Q$=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),_$=(t,s,n,r,i,c,A,u)=>{const d=u.bits;let h=0,o=0,m=0,y=0,p=0,j=0,b=0,w=0,B=0,U=0,Q,k,K,ee,q,G=null,W;const he=new Uint16Array(df+1),Z=new Uint16Array(df+1);let ie=null,ce,ae,de;for(h=0;h<=df;h++)he[h]=0;for(o=0;o<r;o++)he[s[n+o]]++;for(p=d,y=df;y>=1&&he[y]===0;y--);if(p>y&&(p=y),y===0)return i[c++]=1<<24|64<<16|0,i[c++]=1<<24|64<<16|0,u.bits=1,0;for(m=1;m<y&&he[m]===0;m++);for(p<m&&(p=m),w=1,h=1;h<=df;h++)if(w<<=1,w-=he[h],w<0)return-1;if(w>0&&(t===HN||y!==1))return-1;for(Z[1]=0,h=1;h<df;h++)Z[h+1]=Z[h]+he[h];for(o=0;o<r;o++)s[n+o]!==0&&(A[Z[s[n+o]]++]=o);if(t===HN?(G=ie=A,W=20):t===xv?(G=U$,ie=L$,W=257):(G=D$,ie=Q$,W=0),U=0,o=0,h=m,q=c,j=p,b=0,K=-1,B=1<<p,ee=B-1,t===xv&&B>PN||t===zN&&B>kN)return 1;for(;;){ce=h-b,A[o]+1<W?(ae=0,de=A[o]):A[o]>=W?(ae=ie[A[o]-W],de=G[A[o]-W]):(ae=96,de=0),Q=1<<h-b,k=1<<j,m=k;do k-=Q,i[q+(U>>b)+k]=ce<<24|ae<<16|de|0;while(k!==0);for(Q=1<<h-1;U&Q;)Q>>=1;if(Q!==0?(U&=Q-1,U+=Q):U=0,o++,--he[h]===0){if(h===y)break;h=s[n+A[o]]}if(h>p&&(U&ee)!==K){for(b===0&&(b=p),q+=m,j=h-b,w=1<<j;j+b<y&&(w-=he[j+b],!(w<=0));)j++,w<<=1;if(B+=1<<j,t===xv&&B>PN||t===zN&&B>kN)return 1;K=U&ee,i[K]=p<<24|j<<16|q-c|0}}return U!==0&&(i[q+U]=h-b<<24|64<<16|0),u.bits=p,0};var sm=_$;const M$=0,UI=1,LI=2,{Z_FINISH:KN,Z_BLOCK:P$,Z_TREES:Zg,Z_OK:Nh,Z_STREAM_END:k$,Z_NEED_DICT:H$,Z_STREAM_ERROR:Bc,Z_DATA_ERROR:DI,Z_MEM_ERROR:QI,Z_BUF_ERROR:z$,Z_DEFLATED:$N}=II,Mx=16180,VN=16181,qN=16182,GN=16183,WN=16184,YN=16185,XN=16186,JN=16187,ZN=16188,eB=16189,ex=16190,lA=16191,vv=16192,tB=16193,bv=16194,sB=16195,nB=16196,rB=16197,aB=16198,ey=16199,ty=16200,iB=16201,oB=16202,lB=16203,cB=16204,dB=16205,jv=16206,AB=16207,uB=16208,Ai=16209,_I=16210,MI=16211,K$=852,$$=592,V$=15,q$=V$,hB=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function G$(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Th=t=>{if(!t)return 1;const s=t.state;return!s||s.strm!==t||s.mode<Mx||s.mode>MI?1:0},PI=t=>{if(Th(t))return Bc;const s=t.state;return t.total_in=t.total_out=s.total=0,t.msg="",s.wrap&&(t.adler=s.wrap&1),s.mode=Mx,s.last=0,s.havedict=0,s.flags=-1,s.dmax=32768,s.head=null,s.hold=0,s.bits=0,s.lencode=s.lendyn=new Int32Array(K$),s.distcode=s.distdyn=new Int32Array($$),s.sane=1,s.back=-1,Nh},kI=t=>{if(Th(t))return Bc;const s=t.state;return s.wsize=0,s.whave=0,s.wnext=0,PI(t)},HI=(t,s)=>{let n;if(Th(t))return Bc;const r=t.state;return s<0?(n=0,s=-s):(n=(s>>4)+5,s<48&&(s&=15)),s&&(s<8||s>15)?Bc:(r.window!==null&&r.wbits!==s&&(r.window=null),r.wrap=n,r.wbits=s,kI(t))},zI=(t,s)=>{if(!t)return Bc;const n=new G$;t.state=n,n.strm=t,n.window=null,n.mode=Mx;const r=HI(t,s);return r!==Nh&&(t.state=null),r},W$=t=>zI(t,q$);let fB=!0,wv,Sv;const Y$=t=>{if(fB){wv=new Int32Array(512),Sv=new Int32Array(32);let s=0;for(;s<144;)t.lens[s++]=8;for(;s<256;)t.lens[s++]=9;for(;s<280;)t.lens[s++]=7;for(;s<288;)t.lens[s++]=8;for(sm(UI,t.lens,0,288,wv,0,t.work,{bits:9}),s=0;s<32;)t.lens[s++]=5;sm(LI,t.lens,0,32,Sv,0,t.work,{bits:5}),fB=!1}t.lencode=wv,t.lenbits=9,t.distcode=Sv,t.distbits=5},KI=(t,s,n,r)=>{let i;const c=t.state;return c.window===null&&(c.wsize=1<<c.wbits,c.wnext=0,c.whave=0,c.window=new Uint8Array(c.wsize)),r>=c.wsize?(c.window.set(s.subarray(n-c.wsize,n),0),c.wnext=0,c.whave=c.wsize):(i=c.wsize-c.wnext,i>r&&(i=r),c.window.set(s.subarray(n-r,n-r+i),c.wnext),r-=i,r?(c.window.set(s.subarray(n-r,n),0),c.wnext=r,c.whave=c.wsize):(c.wnext+=i,c.wnext===c.wsize&&(c.wnext=0),c.whave<c.wsize&&(c.whave+=i))),0},X$=(t,s)=>{let n,r,i,c,A,u,d,h,o,m,y,p,j,b,w=0,B,U,Q,k,K,ee,q,G;const W=new Uint8Array(4);let he,Z;const ie=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Th(t)||!t.output||!t.input&&t.avail_in!==0)return Bc;n=t.state,n.mode===lA&&(n.mode=vv),A=t.next_out,i=t.output,d=t.avail_out,c=t.next_in,r=t.input,u=t.avail_in,h=n.hold,o=n.bits,m=u,y=d,G=Nh;e:for(;;)switch(n.mode){case Mx:if(n.wrap===0){n.mode=vv;break}for(;o<16;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(n.wrap&2&&h===35615){n.wbits===0&&(n.wbits=15),n.check=0,W[0]=h&255,W[1]=h>>>8&255,n.check=Ed(n.check,W,2,0),h=0,o=0,n.mode=VN;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((h&255)<<8)+(h>>8))%31){t.msg="incorrect header check",n.mode=Ai;break}if((h&15)!==$N){t.msg="unknown compression method",n.mode=Ai;break}if(h>>>=4,o-=4,q=(h&15)+8,n.wbits===0&&(n.wbits=q),q>15||q>n.wbits){t.msg="invalid window size",n.mode=Ai;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=h&512?eB:lA,h=0,o=0;break;case VN:for(;o<16;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(n.flags=h,(n.flags&255)!==$N){t.msg="unknown compression method",n.mode=Ai;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Ai;break}n.head&&(n.head.text=h>>8&1),n.flags&512&&n.wrap&4&&(W[0]=h&255,W[1]=h>>>8&255,n.check=Ed(n.check,W,2,0)),h=0,o=0,n.mode=qN;case qN:for(;o<32;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}n.head&&(n.head.time=h),n.flags&512&&n.wrap&4&&(W[0]=h&255,W[1]=h>>>8&255,W[2]=h>>>16&255,W[3]=h>>>24&255,n.check=Ed(n.check,W,4,0)),h=0,o=0,n.mode=GN;case GN:for(;o<16;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}n.head&&(n.head.xflags=h&255,n.head.os=h>>8),n.flags&512&&n.wrap&4&&(W[0]=h&255,W[1]=h>>>8&255,n.check=Ed(n.check,W,2,0)),h=0,o=0,n.mode=WN;case WN:if(n.flags&1024){for(;o<16;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}n.length=h,n.head&&(n.head.extra_len=h),n.flags&512&&n.wrap&4&&(W[0]=h&255,W[1]=h>>>8&255,n.check=Ed(n.check,W,2,0)),h=0,o=0}else n.head&&(n.head.extra=null);n.mode=YN;case YN:if(n.flags&1024&&(p=n.length,p>u&&(p=u),p&&(n.head&&(q=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(c,c+p),q)),n.flags&512&&n.wrap&4&&(n.check=Ed(n.check,r,p,c)),u-=p,c+=p,n.length-=p),n.length))break e;n.length=0,n.mode=XN;case XN:if(n.flags&2048){if(u===0)break e;p=0;do q=r[c+p++],n.head&&q&&n.length<65536&&(n.head.name+=String.fromCharCode(q));while(q&&p<u);if(n.flags&512&&n.wrap&4&&(n.check=Ed(n.check,r,p,c)),u-=p,c+=p,q)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=JN;case JN:if(n.flags&4096){if(u===0)break e;p=0;do q=r[c+p++],n.head&&q&&n.length<65536&&(n.head.comment+=String.fromCharCode(q));while(q&&p<u);if(n.flags&512&&n.wrap&4&&(n.check=Ed(n.check,r,p,c)),u-=p,c+=p,q)break e}else n.head&&(n.head.comment=null);n.mode=ZN;case ZN:if(n.flags&512){for(;o<16;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(n.wrap&4&&h!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Ai;break}h=0,o=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=lA;break;case eB:for(;o<32;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}t.adler=n.check=hB(h),h=0,o=0,n.mode=ex;case ex:if(n.havedict===0)return t.next_out=A,t.avail_out=d,t.next_in=c,t.avail_in=u,n.hold=h,n.bits=o,H$;t.adler=n.check=1,n.mode=lA;case lA:if(s===P$||s===Zg)break e;case vv:if(n.last){h>>>=o&7,o-=o&7,n.mode=jv;break}for(;o<3;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}switch(n.last=h&1,h>>>=1,o-=1,h&3){case 0:n.mode=tB;break;case 1:if(Y$(n),n.mode=ey,s===Zg){h>>>=2,o-=2;break e}break;case 2:n.mode=nB;break;case 3:t.msg="invalid block type",n.mode=Ai}h>>>=2,o-=2;break;case tB:for(h>>>=o&7,o-=o&7;o<32;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if((h&65535)!==(h>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Ai;break}if(n.length=h&65535,h=0,o=0,n.mode=bv,s===Zg)break e;case bv:n.mode=sB;case sB:if(p=n.length,p){if(p>u&&(p=u),p>d&&(p=d),p===0)break e;i.set(r.subarray(c,c+p),A),u-=p,c+=p,d-=p,A+=p,n.length-=p;break}n.mode=lA;break;case nB:for(;o<14;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(n.nlen=(h&31)+257,h>>>=5,o-=5,n.ndist=(h&31)+1,h>>>=5,o-=5,n.ncode=(h&15)+4,h>>>=4,o-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Ai;break}n.have=0,n.mode=rB;case rB:for(;n.have<n.ncode;){for(;o<3;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}n.lens[ie[n.have++]]=h&7,h>>>=3,o-=3}for(;n.have<19;)n.lens[ie[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,he={bits:n.lenbits},G=sm(M$,n.lens,0,19,n.lencode,0,n.work,he),n.lenbits=he.bits,G){t.msg="invalid code lengths set",n.mode=Ai;break}n.have=0,n.mode=aB;case aB:for(;n.have<n.nlen+n.ndist;){for(;w=n.lencode[h&(1<<n.lenbits)-1],B=w>>>24,U=w>>>16&255,Q=w&65535,!(B<=o);){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(Q<16)h>>>=B,o-=B,n.lens[n.have++]=Q;else{if(Q===16){for(Z=B+2;o<Z;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(h>>>=B,o-=B,n.have===0){t.msg="invalid bit length repeat",n.mode=Ai;break}q=n.lens[n.have-1],p=3+(h&3),h>>>=2,o-=2}else if(Q===17){for(Z=B+3;o<Z;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}h>>>=B,o-=B,q=0,p=3+(h&7),h>>>=3,o-=3}else{for(Z=B+7;o<Z;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}h>>>=B,o-=B,q=0,p=11+(h&127),h>>>=7,o-=7}if(n.have+p>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Ai;break}for(;p--;)n.lens[n.have++]=q}}if(n.mode===Ai)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Ai;break}if(n.lenbits=9,he={bits:n.lenbits},G=sm(UI,n.lens,0,n.nlen,n.lencode,0,n.work,he),n.lenbits=he.bits,G){t.msg="invalid literal/lengths set",n.mode=Ai;break}if(n.distbits=6,n.distcode=n.distdyn,he={bits:n.distbits},G=sm(LI,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,he),n.distbits=he.bits,G){t.msg="invalid distances set",n.mode=Ai;break}if(n.mode=ey,s===Zg)break e;case ey:n.mode=ty;case ty:if(u>=6&&d>=258){t.next_out=A,t.avail_out=d,t.next_in=c,t.avail_in=u,n.hold=h,n.bits=o,O$(t,y),A=t.next_out,i=t.output,d=t.avail_out,c=t.next_in,r=t.input,u=t.avail_in,h=n.hold,o=n.bits,n.mode===lA&&(n.back=-1);break}for(n.back=0;w=n.lencode[h&(1<<n.lenbits)-1],B=w>>>24,U=w>>>16&255,Q=w&65535,!(B<=o);){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(U&&(U&240)===0){for(k=B,K=U,ee=Q;w=n.lencode[ee+((h&(1<<k+K)-1)>>k)],B=w>>>24,U=w>>>16&255,Q=w&65535,!(k+B<=o);){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}h>>>=k,o-=k,n.back+=k}if(h>>>=B,o-=B,n.back+=B,n.length=Q,U===0){n.mode=dB;break}if(U&32){n.back=-1,n.mode=lA;break}if(U&64){t.msg="invalid literal/length code",n.mode=Ai;break}n.extra=U&15,n.mode=iB;case iB:if(n.extra){for(Z=n.extra;o<Z;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,o-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=oB;case oB:for(;w=n.distcode[h&(1<<n.distbits)-1],B=w>>>24,U=w>>>16&255,Q=w&65535,!(B<=o);){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if((U&240)===0){for(k=B,K=U,ee=Q;w=n.distcode[ee+((h&(1<<k+K)-1)>>k)],B=w>>>24,U=w>>>16&255,Q=w&65535,!(k+B<=o);){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}h>>>=k,o-=k,n.back+=k}if(h>>>=B,o-=B,n.back+=B,U&64){t.msg="invalid distance code",n.mode=Ai;break}n.offset=Q,n.extra=U&15,n.mode=lB;case lB:if(n.extra){for(Z=n.extra;o<Z;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,o-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Ai;break}n.mode=cB;case cB:if(d===0)break e;if(p=y-d,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Ai;break}p>n.wnext?(p-=n.wnext,j=n.wsize-p):j=n.wnext-p,p>n.length&&(p=n.length),b=n.window}else b=i,j=A-n.offset,p=n.length;p>d&&(p=d),d-=p,n.length-=p;do i[A++]=b[j++];while(--p);n.length===0&&(n.mode=ty);break;case dB:if(d===0)break e;i[A++]=n.length,d--,n.mode=ty;break;case jv:if(n.wrap){for(;o<32;){if(u===0)break e;u--,h|=r[c++]<<o,o+=8}if(y-=d,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?Ed(n.check,i,y,A-y):Jb(n.check,i,y,A-y)),y=d,n.wrap&4&&(n.flags?h:hB(h))!==n.check){t.msg="incorrect data check",n.mode=Ai;break}h=0,o=0}n.mode=AB;case AB:if(n.wrap&&n.flags){for(;o<32;){if(u===0)break e;u--,h+=r[c++]<<o,o+=8}if(n.wrap&4&&h!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Ai;break}h=0,o=0}n.mode=uB;case uB:G=k$;break e;case Ai:G=DI;break e;case _I:return QI;case MI:default:return Bc}return t.next_out=A,t.avail_out=d,t.next_in=c,t.avail_in=u,n.hold=h,n.bits=o,(n.wsize||y!==t.avail_out&&n.mode<Ai&&(n.mode<jv||s!==KN))&&KI(t,t.output,t.next_out,y-t.avail_out),m-=t.avail_in,y-=t.avail_out,t.total_in+=m,t.total_out+=y,n.total+=y,n.wrap&4&&y&&(t.adler=n.check=n.flags?Ed(n.check,i,y,t.next_out-y):Jb(n.check,i,y,t.next_out-y)),t.data_type=n.bits+(n.last?64:0)+(n.mode===lA?128:0)+(n.mode===ey||n.mode===bv?256:0),(m===0&&y===0||s===KN)&&G===Nh&&(G=z$),G},J$=t=>{if(Th(t))return Bc;let s=t.state;return s.window&&(s.window=null),t.state=null,Nh},Z$=(t,s)=>{if(Th(t))return Bc;const n=t.state;return(n.wrap&2)===0?Bc:(n.head=s,s.done=!1,Nh)},eV=(t,s)=>{const n=s.length;let r,i,c;return Th(t)||(r=t.state,r.wrap!==0&&r.mode!==ex)?Bc:r.mode===ex&&(i=1,i=Jb(i,s,n,0),i!==r.check)?DI:(c=KI(t,s,n,n),c?(r.mode=_I,QI):(r.havedict=1,Nh))};var tV=kI,sV=HI,nV=PI,rV=W$,aV=zI,iV=X$,oV=J$,lV=Z$,cV=eV,dV="pako inflate (from Nodeca project)",cA={inflateReset:tV,inflateReset2:sV,inflateResetKeep:nV,inflateInit:rV,inflateInit2:aV,inflate:iV,inflateEnd:oV,inflateGetHeader:lV,inflateSetDictionary:cV,inflateInfo:dV};function AV(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var uV=AV;const $I=Object.prototype.toString,{Z_NO_FLUSH:hV,Z_FINISH:fV,Z_OK:vm,Z_STREAM_END:Nv,Z_NEED_DICT:Bv,Z_STREAM_ERROR:pV,Z_DATA_ERROR:pB,Z_MEM_ERROR:mV}=II;function Lm(t){this.options=RI.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const s=this.options;s.raw&&s.windowBits>=0&&s.windowBits<16&&(s.windowBits=-s.windowBits,s.windowBits===0&&(s.windowBits=-15)),s.windowBits>=0&&s.windowBits<16&&!(t&&t.windowBits)&&(s.windowBits+=32),s.windowBits>15&&s.windowBits<48&&(s.windowBits&15)===0&&(s.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new I$,this.strm.avail_out=0;let n=cA.inflateInit2(this.strm,s.windowBits);if(n!==vm)throw new Error(Zb[n]);if(this.header=new uV,cA.inflateGetHeader(this.strm,this.header),s.dictionary&&(typeof s.dictionary=="string"?s.dictionary=e1.string2buf(s.dictionary):$I.call(s.dictionary)==="[object ArrayBuffer]"&&(s.dictionary=new Uint8Array(s.dictionary)),s.raw&&(n=cA.inflateSetDictionary(this.strm,s.dictionary),n!==vm)))throw new Error(Zb[n])}Lm.prototype.push=function(t,s){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let c,A,u;if(this.ended)return!1;for(s===~~s?A=s:A=s===!0?fV:hV,$I.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),c=cA.inflate(n,A),c===Bv&&i&&(c=cA.inflateSetDictionary(n,i),c===vm?c=cA.inflate(n,A):c===pB&&(c=Bv));n.avail_in>0&&c===Nv&&n.state.wrap>0&&t[n.next_in]!==0;)cA.inflateReset(n),c=cA.inflate(n,A);switch(c){case pV:case pB:case Bv:case mV:return this.onEnd(c),this.ended=!0,!1}if(u=n.avail_out,n.next_out&&(n.avail_out===0||c===Nv))if(this.options.to==="string"){let d=e1.utf8border(n.output,n.next_out),h=n.next_out-d,o=e1.buf2string(n.output,d);n.next_out=h,n.avail_out=r-h,h&&n.output.set(n.output.subarray(d,d+h),0),this.onData(o)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(c===vm&&u===0)){if(c===Nv)return c=cA.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Lm.prototype.onData=function(t){this.chunks.push(t)};Lm.prototype.onEnd=function(t){t===vm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=RI.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function gV(t,s){const n=new Lm(s);if(n.push(t),n.err)throw n.msg||Zb[n.err];return n.result}var yV=Lm,xV=gV,vV={Inflate:yV,inflate:xV};const{Inflate:bV,inflate:jV}=vV;var mB=bV,wV=jV;const VI=[];for(let t=0;t<256;t++){let s=t;for(let n=0;n<8;n++)s&1?s=3988292384^s>>>1:s=s>>>1;VI[t]=s}const gB=4294967295;function SV(t,s,n){let r=t;for(let i=0;i<n;i++)r=VI[(r^s[i])&255]^r>>>8;return r}function NV(t,s){return(SV(gB,t,s)^gB)>>>0}function yB(t,s,n){const r=t.readUint32(),i=NV(new Uint8Array(t.buffer,t.byteOffset+t.offset-s-4,s),s);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function qI(t,s,n){for(let r=0;r<n;r++)s[r]=t[r]}function GI(t,s,n,r){let i=0;for(;i<r;i++)s[i]=t[i];for(;i<n;i++)s[i]=t[i]+s[i-r]&255}function WI(t,s,n,r){let i=0;if(n.length===0)for(;i<r;i++)s[i]=t[i];else for(;i<r;i++)s[i]=t[i]+n[i]&255}function YI(t,s,n,r,i){let c=0;if(n.length===0){for(;c<i;c++)s[c]=t[c];for(;c<r;c++)s[c]=t[c]+(s[c-i]>>1)&255}else{for(;c<i;c++)s[c]=t[c]+(n[c]>>1)&255;for(;c<r;c++)s[c]=t[c]+(s[c-i]+n[c]>>1)&255}}function XI(t,s,n,r,i){let c=0;if(n.length===0){for(;c<i;c++)s[c]=t[c];for(;c<r;c++)s[c]=t[c]+s[c-i]&255}else{for(;c<i;c++)s[c]=t[c]+n[c]&255;for(;c<r;c++)s[c]=t[c]+BV(s[c-i],n[c],n[c-i])&255}}function BV(t,s,n){const r=t+s-n,i=Math.abs(r-t),c=Math.abs(r-s),A=Math.abs(r-n);return i<=c&&i<=A?t:c<=A?s:n}function CV(t,s,n,r,i,c){switch(t){case 0:qI(s,n,i);break;case 1:GI(s,n,i,c);break;case 2:WI(s,n,r,i);break;case 3:YI(s,n,r,i,c);break;case 4:XI(s,n,r,i,c);break;default:throw new Error(`Unsupported filter: ${t}`)}}const EV=new Uint16Array([255]),TV=new Uint8Array(EV.buffer),FV=TV[0]===255;function IV(t){const{data:s,width:n,height:r,channels:i,depth:c}=t,A=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(c/8)*i,d=new Uint8Array(r*n*u);let h=0;for(let o=0;o<7;o++){const m=A[o],y=Math.ceil((n-m.x)/m.xStep),p=Math.ceil((r-m.y)/m.yStep);if(y<=0||p<=0)continue;const j=y*u,b=new Uint8Array(j);for(let w=0;w<p;w++){const B=s[h++],U=s.subarray(h,h+j);h+=j;const Q=new Uint8Array(j);CV(B,U,Q,b,j,u),b.set(Q);for(let k=0;k<y;k++){const K=m.x+k*m.xStep,ee=m.y+w*m.yStep;if(!(K>=n||ee>=r))for(let q=0;q<u;q++)d[(ee*n+K)*u+q]=Q[k*u+q]}}}if(c===16){const o=new Uint16Array(d.buffer);if(FV)for(let m=0;m<o.length;m++)o[m]=RV(o[m]);return o}else return d}function RV(t){return(t&255)<<8|t>>8&255}const OV=new Uint16Array([255]),UV=new Uint8Array(OV.buffer),LV=UV[0]===255,DV=new Uint8Array(0);function xB(t){const{data:s,width:n,height:r,channels:i,depth:c}=t,A=Math.ceil(c/8)*i,u=Math.ceil(c/8*i*n),d=new Uint8Array(r*u);let h=DV,o=0,m,y;for(let p=0;p<r;p++){switch(m=s.subarray(o+1,o+1+u),y=d.subarray(p*u,(p+1)*u),s[o]){case 0:qI(m,y,u);break;case 1:GI(m,y,u,A);break;case 2:WI(m,y,h,u);break;case 3:YI(m,y,h,u,A);break;case 4:XI(m,y,h,u,A);break;default:throw new Error(`Unsupported filter: ${s[o]}`)}h=y,o+=u+1}if(c===16){const p=new Uint16Array(d.buffer);if(LV)for(let j=0;j<p.length;j++)p[j]=QV(p[j]);return p}else return d}function QV(t){return(t&255)<<8|t>>8&255}const By=Uint8Array.of(137,80,78,71,13,10,26,10);function vB(t){if(!_V(t.readBytes(By.length)))throw new Error("wrong PNG signature")}function _V(t){if(t.length<By.length)return!1;for(let s=0;s<By.length;s++)if(t[s]!==By[s])return!1;return!0}const MV="tEXt",PV=0,JI=new TextDecoder("latin1");function kV(t){if(zV(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const HV=/^[\u0000-\u00FF]*$/;function zV(t){if(!HV.test(t))throw new Error("invalid latin1 text")}function KV(t,s,n){const r=ZI(s);t[r]=$V(s,n-r.length-1)}function ZI(t){for(t.mark();t.readByte()!==PV;);const s=t.offset;t.reset();const n=JI.decode(t.readBytes(s-t.offset-1));return t.skip(1),kV(n),n}function $V(t,s){return JI.decode(t.readBytes(s))}const ql={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Cv={UNKNOWN:-1,DEFLATE:0},bB={UNKNOWN:-1,ADAPTIVE:0},Ev={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},sy={NONE:0,BACKGROUND:1,PREVIOUS:2},Tv={SOURCE:0,OVER:1};class VV extends Oj{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(s,n={}){super(s);const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new mB,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Cv.UNKNOWN,this._filterMethod=bB.UNKNOWN,this._interlaceMethod=Ev.UNKNOWN,this._colorType=ql.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(vB(this);!this._end;){const s=this.readUint32(),n=this.readChars(4);this.decodeChunk(s,n)}return this.decodeImage(),this._png}decodeApng(){for(vB(this);!this._end;){const s=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(s,n)}return this.decodeApngImage(),this._apng}decodeChunk(s,n){const r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(s);break;case"IDAT":this.decodeIDAT(s);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(s);break;case"iCCP":this.decodeiCCP(s);break;case MV:KV(this._png.text,this,s);break;case"pHYs":this.decodepHYs();break;default:this.skip(s);break}if(this.offset-r!==s)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?yB(this,s+4,n):this.skip(4)}decodeApngChunk(s,n){const r=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(s);break;default:this.decodeChunk(s,n),this.offset=r+s;break}if(this.offset-r!==s)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?yB(this,s+4,n):this.skip(4)}decodeIHDR(){const s=this._png;s.width=this.readUint32(),s.height=this.readUint32(),s.depth=qV(this.readUint8());const n=this.readUint8();this._colorType=n;let r;switch(n){case ql.GREYSCALE:r=1;break;case ql.TRUECOLOUR:r=3;break;case ql.INDEXED_COLOUR:r=1;break;case ql.GREYSCALE_ALPHA:r=2;break;case ql.TRUECOLOUR_ALPHA:r=4;break;case ql.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==Cv.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const s={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(s)}decodePLTE(s){if(s%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${s}`);const n=s/3;this._hasPalette=!0;const r=[];this._palette=r;for(let i=0;i<n;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(s){this._writingDataChunks=!0;const n=s,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodeFDAT(s){this._writingDataChunks=!0;let n=s,r=this.offset+this.byteOffset;if(r+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodetRNS(s){switch(this._colorType){case ql.GREYSCALE:case ql.TRUECOLOUR:{if(s%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${s}`);if(s/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${s/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(s/2);for(let n=0;n<s/2;n++)this._transparency[n]=this.readUint16();break}case ql.INDEXED_COLOUR:{if(s>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${s} vs ${this._palette.length})`);let n=0;for(;n<s;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ql.UNKNOWN:case ql.GREYSCALE_ALPHA:case ql.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(s){const n=ZI(this),r=this.readUint8();if(r!==Cv.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const i=this.readBytes(s-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:wV(i)}}decodepHYs(){const s=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:s,y:n,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let s=0;s<this._numberOfFrames;s++){const n={sequenceNumber:this._frames[s].sequenceNumber,delayNumber:this._frames[s].delayNumber,delayDenominator:this._frames[s].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(s);if(r){if(r.data=xB({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),s===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)n.data=r.data;else{const i=this._apng.frames.at(s-1);this.disposeFrame(r,i,n),this.addFrameDataToCanvas(n,r)}this._apng.frames.push(n)}}return this._apng}disposeFrame(s,n,r){switch(s.disposeOp){case sy.NONE:break;case sy.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let c=0;c<this._png.width;c++){const A=(i*s.width+c)*this._png.channels;for(let u=0;u<this._png.channels;u++)r.data[A+u]=0}break;case sy.PREVIOUS:r.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(s,n){const r=1<<this._png.depth,i=(c,A)=>{const u=((c+n.yOffset)*this._png.width+n.xOffset+A)*this._png.channels,d=(c*n.width+A)*this._png.channels;return{index:u,frameIndex:d}};switch(n.blendOp){case Tv.SOURCE:for(let c=0;c<n.height;c++)for(let A=0;A<n.width;A++){const{index:u,frameIndex:d}=i(c,A);for(let h=0;h<this._png.channels;h++)s.data[u+h]=n.data[d+h]}break;case Tv.OVER:for(let c=0;c<n.height;c++)for(let A=0;A<n.width;A++){const{index:u,frameIndex:d}=i(c,A);for(let h=0;h<this._png.channels;h++){const o=n.data[d+this._png.channels-1]/r,m=h%(this._png.channels-1)===0?1:n.data[d+h],y=Math.floor(o*m+(1-o)*s.data[u+h]);s.data[u+h]+=y}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const s=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==bB.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Ev.NO_INTERLACE)this._png.data=xB({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Ev.ADAM7)this._png.data=IV({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const s=this._inflator.result,n=this._frames.at(-1);n?n.data=s:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:sy.NONE,blendOp:Tv.SOURCE,data:s}),this._inflator=new mB,this._writingDataChunks=!1}}function qV(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var jB;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(jB||(jB={}));function GV(t,s){return new VV(t,s).decode()}var Wn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Fv(){Wn.console&&typeof Wn.console.log=="function"&&Wn.console.log.apply(Wn.console,arguments)}var _a={log:Fv,warn:function(t){Wn.console&&(typeof Wn.console.warn=="function"?Wn.console.warn.apply(Wn.console,arguments):Fv.call(null,arguments))},error:function(t){Wn.console&&(typeof Wn.console.error=="function"?Wn.console.error.apply(Wn.console,arguments):Fv(t))}};function Iv(t,s,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){rh(r.response,s,n)},r.onerror=function(){_a.error("could not download file")},r.send()}function wB(t){var s=new XMLHttpRequest;s.open("HEAD",t,!1);try{s.send()}catch{}return s.status>=200&&s.status<=299}function ny(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(s)}}var rh=Wn.saveAs||((typeof window>"u"?"undefined":wa(window))!=="object"||window!==Wn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,s,n){var r=Wn.URL||Wn.webkitURL,i=document.createElement("a");s=s||t.name||"download",i.download=s,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?wB(i.href)?Iv(t,s,n):ny(i,i.target="_blank"):ny(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){ny(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,s,n){if(s=s||t.name||"download",typeof t=="string")if(wB(t))Iv(t,s,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){ny(r)})}else navigator.msSaveOrOpenBlob((function(i,c){return c===void 0?c={autoBom:!1}:wa(c)!=="object"&&(_a.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,n),s)}:function(t,s,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Iv(t,s,n);var i=t.type==="application/octet-stream",c=/constructor/i.test(Wn.HTMLElement)||Wn.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||i&&c)&&(typeof FileReader>"u"?"undefined":wa(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var o=u.result;o=A?o:o.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=o:location=o,r=null},u.readAsDataURL(t)}else{var d=Wn.URL||Wn.webkitURL,h=d.createObjectURL(t);r?r.location=h:location.href=h,r=null,setTimeout(function(){d.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function eR(t){var s;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,c=n[r].process,A=i.exec(t);A&&(s=c(A),this.r=s[0],this.g=s[1],this.b=s[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),d=this.g.toString(16),h=this.b.toString(16);return u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),"#"+u+d+h}}var Cy=Wn.atob.bind(Wn),SB=Wn.btoa.bind(Wn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Rv(t,s){var n=t[0],r=t[1],i=t[2],c=t[3];n=ko(n,r,i,c,s[0],7,-680876936),c=ko(c,n,r,i,s[1],12,-389564586),i=ko(i,c,n,r,s[2],17,606105819),r=ko(r,i,c,n,s[3],22,-1044525330),n=ko(n,r,i,c,s[4],7,-176418897),c=ko(c,n,r,i,s[5],12,1200080426),i=ko(i,c,n,r,s[6],17,-1473231341),r=ko(r,i,c,n,s[7],22,-45705983),n=ko(n,r,i,c,s[8],7,1770035416),c=ko(c,n,r,i,s[9],12,-1958414417),i=ko(i,c,n,r,s[10],17,-42063),r=ko(r,i,c,n,s[11],22,-1990404162),n=ko(n,r,i,c,s[12],7,1804603682),c=ko(c,n,r,i,s[13],12,-40341101),i=ko(i,c,n,r,s[14],17,-1502002290),n=Ho(n,r=ko(r,i,c,n,s[15],22,1236535329),i,c,s[1],5,-165796510),c=Ho(c,n,r,i,s[6],9,-1069501632),i=Ho(i,c,n,r,s[11],14,643717713),r=Ho(r,i,c,n,s[0],20,-373897302),n=Ho(n,r,i,c,s[5],5,-701558691),c=Ho(c,n,r,i,s[10],9,38016083),i=Ho(i,c,n,r,s[15],14,-660478335),r=Ho(r,i,c,n,s[4],20,-405537848),n=Ho(n,r,i,c,s[9],5,568446438),c=Ho(c,n,r,i,s[14],9,-1019803690),i=Ho(i,c,n,r,s[3],14,-187363961),r=Ho(r,i,c,n,s[8],20,1163531501),n=Ho(n,r,i,c,s[13],5,-1444681467),c=Ho(c,n,r,i,s[2],9,-51403784),i=Ho(i,c,n,r,s[7],14,1735328473),n=zo(n,r=Ho(r,i,c,n,s[12],20,-1926607734),i,c,s[5],4,-378558),c=zo(c,n,r,i,s[8],11,-2022574463),i=zo(i,c,n,r,s[11],16,1839030562),r=zo(r,i,c,n,s[14],23,-35309556),n=zo(n,r,i,c,s[1],4,-1530992060),c=zo(c,n,r,i,s[4],11,1272893353),i=zo(i,c,n,r,s[7],16,-155497632),r=zo(r,i,c,n,s[10],23,-1094730640),n=zo(n,r,i,c,s[13],4,681279174),c=zo(c,n,r,i,s[0],11,-358537222),i=zo(i,c,n,r,s[3],16,-722521979),r=zo(r,i,c,n,s[6],23,76029189),n=zo(n,r,i,c,s[9],4,-640364487),c=zo(c,n,r,i,s[12],11,-421815835),i=zo(i,c,n,r,s[15],16,530742520),n=Ko(n,r=zo(r,i,c,n,s[2],23,-995338651),i,c,s[0],6,-198630844),c=Ko(c,n,r,i,s[7],10,1126891415),i=Ko(i,c,n,r,s[14],15,-1416354905),r=Ko(r,i,c,n,s[5],21,-57434055),n=Ko(n,r,i,c,s[12],6,1700485571),c=Ko(c,n,r,i,s[3],10,-1894986606),i=Ko(i,c,n,r,s[10],15,-1051523),r=Ko(r,i,c,n,s[1],21,-2054922799),n=Ko(n,r,i,c,s[8],6,1873313359),c=Ko(c,n,r,i,s[15],10,-30611744),i=Ko(i,c,n,r,s[6],15,-1560198380),r=Ko(r,i,c,n,s[13],21,1309151649),n=Ko(n,r,i,c,s[4],6,-145523070),c=Ko(c,n,r,i,s[11],10,-1120210379),i=Ko(i,c,n,r,s[2],15,718787259),r=Ko(r,i,c,n,s[9],21,-343485551),t[0]=Au(n,t[0]),t[1]=Au(r,t[1]),t[2]=Au(i,t[2]),t[3]=Au(c,t[3])}function Px(t,s,n,r,i,c){return s=Au(Au(s,t),Au(r,c)),Au(s<<i|s>>>32-i,n)}function ko(t,s,n,r,i,c,A){return Px(s&n|~s&r,t,s,i,c,A)}function Ho(t,s,n,r,i,c,A){return Px(s&r|n&~r,t,s,i,c,A)}function zo(t,s,n,r,i,c,A){return Px(s^n^r,t,s,i,c,A)}function Ko(t,s,n,r,i,c,A){return Px(n^(s|~r),t,s,i,c,A)}function tR(t){var s,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(s=64;s<=t.length;s+=64)Rv(r,WV(t.substring(s-64,s)));t=t.substring(s-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<t.length;s++)i[s>>2]|=t.charCodeAt(s)<<(s%4<<3);if(i[s>>2]|=128<<(s%4<<3),s>55)for(Rv(r,i),s=0;s<16;s++)i[s]=0;return i[14]=8*n,Rv(r,i),r}function WV(t){var s,n=[];for(s=0;s<64;s+=4)n[s>>2]=t.charCodeAt(s)+(t.charCodeAt(s+1)<<8)+(t.charCodeAt(s+2)<<16)+(t.charCodeAt(s+3)<<24);return n}var NB="0123456789abcdef".split("");function YV(t){for(var s="",n=0;n<4;n++)s+=NB[t>>8*n+4&15]+NB[t>>8*n&15];return s}function XV(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function t1(t){return tR(t).map(XV).join("")}var JV=(function(t){for(var s=0;s<t.length;s++)t[s]=YV(t[s]);return t.join("")})(tR("hello"))!="5d41402abc4b2a76b9719d911017c592";function Au(t,s){if(JV){var n=(65535&t)+(65535&s);return(t>>16)+(s>>16)+(n>>16)<<16|65535&n}return t+s&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function s1(t,s){var n,r,i,c;if(t!==n){for(var A=(i=t,c=1+(256/t.length|0),new Array(c+1).join(i)),u=[],d=0;d<256;d++)u[d]=d;var h=0;for(d=0;d<256;d++){var o=u[d];h=(h+o+A.charCodeAt(d))%256,u[d]=u[h],u[h]=o}n=t,r=u}else u=r;var m=s.length,y=0,p=0,j="";for(d=0;d<m;d++)p=(p+(o=u[y=(y+1)%256]))%256,u[y]=u[p],u[p]=o,A=u[(u[y]+u[p])%256],j+=String.fromCharCode(s.charCodeAt(d)^A);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var BB={print:4,modify:8,copy:16,"annot-forms":32};function ff(t,s,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(u){if(BB.perm!==void 0)throw new Error("Invalid permission: "+u);i+=BB[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var c=(s+this.padding).substr(0,32),A=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(c,A),this.P=-(1+(255^i)),this.encryptionKey=t1(c+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=s1(this.encryptionKey,this.padding)}function pf(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var s="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);s+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return s}function CB(t){if(wa(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var s={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");s.hasOwnProperty(n)||(s[n]={});var c=Math.random().toString(35);return s[n][c]=[r,!!i],c},this.unsubscribe=function(n){for(var r in s)if(s[r][n])return delete s[r][n],Object.keys(s[r]).length===0&&delete s[r],!0;return!1},this.publish=function(n){if(s.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var c in s[n]){var A=s[n][c];try{A[0].apply(t,r)}catch(u){Wn.console&&_a.error("jsPDF PubSub Error",u.message,u)}A[1]&&i.push(c)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return s}}function bm(t){if(!(this instanceof bm))return new bm(t);var s="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&s.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function sR(t,s){this.gState=t,this.matrix=s,this.id="",this.objectNumber=-1}function cu(t,s,n,r,i){if(!(this instanceof cu))return new cu(t,s,n,r,i);this.type=t==="axial"?2:3,this.coords=s,this.colors=n,sR.call(this,r,i)}function lh(t,s,n,r,i){if(!(this instanceof lh))return new lh(t,s,n,r,i);this.boundingBox=t,this.xStep=s,this.yStep=n,this.stream="",this.cloneIndex=0,sR.call(this,r,i)}function Sn(t){var s,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],c=arguments[3],A=[],u=1,d=16,h="S",o=null;wa(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,c=t.compress||t.compressPdf||c,(o=t.encryption||null)!==null&&(o.userPassword=o.userPassword||"",o.ownerPassword=o.ownerPassword||"",o.userPermissions=o.userPermissions||[]),u=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(s=t.precision),t.floatPrecision!==void 0&&(d=t.floatPrecision),h=t.defaultPathOperation||"S"),A=t.filters||(c===!0?["FlateEncode"]:A),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,y={},p={internal:{},__private__:{}};p.__private__.PubSub=CB;var j="1.3",b=p.__private__.getPdfVersion=function(){return j};p.__private__.setPdfVersion=function($){j=$};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return w};var B=p.__private__.getPageFormat=function($){return w[$]};i=i||"a4";var U="compat",Q="advanced",k=U;function K(){this.saveGraphicsState(),le(new es(dt,0,0,-dt,0,Zs()*dt).toString()+" cm"),this.setFontSize(this.getFontSize()/dt),h="n",k=Q}function ee(){this.restoreGraphicsState(),h="S",k=U}var q=p.__private__.combineFontStyleAndFontWeight=function($,ve){if($=="bold"&&ve=="normal"||$=="bold"&&ve==400||$=="normal"&&ve=="italic"||$=="bold"&&ve=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ve&&($=ve==400||ve==="normal"?$==="italic"?"italic":"normal":ve!=700&&ve!=="bold"||$!=="normal"?(ve==700?"bold":ve)+""+$:"bold"),$};p.advancedAPI=function($){var ve=k===U;return ve&&K.call(this),typeof $!="function"||($(this),ve&&ee.call(this)),this},p.compatAPI=function($){var ve=k===Q;return ve&&ee.call(this),typeof $!="function"||($(this),ve&&K.call(this)),this},p.isAdvancedAPI=function(){return k===Q};var G,W=function($){if(k!==Q)throw new Error($+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},he=p.roundToPrecision=p.__private__.roundToPrecision=function($,ve){var Ve=s||ve;if(isNaN($)||isNaN(Ve))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return $.toFixed(Ve).replace(/0+$/,"")};G=p.hpf=p.__private__.hpf=typeof d=="number"?function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.hpf");return he($,d)}:d==="smart"?function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.hpf");return he($,$>-1&&$<1?16:5)}:function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.hpf");return he($,16)};var Z=p.f2=p.__private__.f2=function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.f2");return he($,2)},ie=p.__private__.f3=function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.f3");return he($,3)},ce=p.scale=p.__private__.scale=function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.scale");return k===U?$*dt:k===Q?$:void 0},ae=function($){return ce((function(ve){return k===U?Zs()-ve:k===Q?ve:void 0})($))};p.__private__.setPrecision=p.setPrecision=function($){typeof parseInt($,10)=="number"&&(s=parseInt($,10))};var de,se="00000000000000000000000000000000",re=p.__private__.getFileId=function(){return se},te=p.__private__.setFileId=function($){return se=$!==void 0&&/^[a-fA-F0-9]{32}$/.test($)?$.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),o!==null&&(Yn=new ff(o.userPermissions,o.userPassword,o.ownerPassword,se)),se};p.setFileId=function($){return te($),this},p.getFileId=function(){return re()};var be=p.__private__.convertDateToPDFDate=function($){var ve=$.getTimezoneOffset(),Ve=ve<0?"+":"-",At=Math.floor(Math.abs(ve/60)),Bt=Math.abs(ve%60),as=[Ve,Se(At),"'",Se(Bt),"'"].join("");return["D:",$.getFullYear(),Se($.getMonth()+1),Se($.getDate()),Se($.getHours()),Se($.getMinutes()),Se($.getSeconds()),as].join("")},He=p.__private__.convertPDFDateToDate=function($){var ve=parseInt($.substr(2,4),10),Ve=parseInt($.substr(6,2),10)-1,At=parseInt($.substr(8,2),10),Bt=parseInt($.substr(10,2),10),as=parseInt($.substr(12,2),10),gs=parseInt($.substr(14,2),10);return new Date(ve,Ve,At,Bt,as,gs,0)},pe=p.__private__.setCreationDate=function($){var ve;if($===void 0&&($=new Date),$ instanceof Date)ve=be($);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test($))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ve=$}return de=ve},Y=p.__private__.getCreationDate=function($){var ve=de;return $==="jsDate"&&(ve=He(de)),ve};p.setCreationDate=function($){return pe($),this},p.getCreationDate=function($){return Y($)};var me,Se=p.__private__.padd2=function($){return("0"+parseInt($)).slice(-2)},je=p.__private__.padd2Hex=function($){return("00"+($=$.toString())).substr($.length)},Le=0,ge=[],ye=[],we=0,Ne=[],ke=[],Be=!1,Ae=ye;p.__private__.setCustomOutputDestination=function($){Be=!0,Ae=$};var Qe=function($){Be||(Ae=$)};p.__private__.resetCustomOutputDestination=function(){Be=!1,Ae=ye};var le=p.__private__.out=function($){return $=$.toString(),we+=$.length+1,Ae.push($),Ae},ct=p.__private__.write=function($){return le(arguments.length===1?$.toString():Array.prototype.join.call(arguments," "))},rt=p.__private__.getArrayBuffer=function($){for(var ve=$.length,Ve=new ArrayBuffer(ve),At=new Uint8Array(Ve);ve--;)At[ve]=$.charCodeAt(ve);return Ve},ht=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return ht};var ft=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function($){return ft=k===Q?$/dt:$,this};var Jt,gt=p.__private__.getFontSize=p.getFontSize=function(){return k===U?ft:ft*dt},tt=t.R2L||!1;p.__private__.setR2L=p.setR2L=function($){return tt=$,this},p.__private__.getR2L=p.getR2L=function(){return tt};var Lt,qt=p.__private__.setZoomMode=function($){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test($))Jt=$;else if(isNaN($)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf($)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+$+'" is not recognized.');Jt=$}else Jt=parseInt($,10)};p.__private__.getZoomMode=function(){return Jt};var Fs,xs=p.__private__.setPageMode=function($){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf($)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+$+'" is not recognized.');Lt=$};p.__private__.getPageMode=function(){return Lt};var hs=p.__private__.setLayoutMode=function($){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf($)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+$+'" is not recognized.');Fs=$};p.__private__.getLayoutMode=function(){return Fs},p.__private__.setDisplayMode=p.setDisplayMode=function($,ve,Ve){return qt($),hs(ve),xs(Ve),this};var it={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function($){if(Object.keys(it).indexOf($)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return it[$]},p.__private__.getDocumentProperties=function(){return it},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function($){for(var ve in it)it.hasOwnProperty(ve)&&$[ve]&&(it[ve]=$[ve]);return this},p.__private__.setDocumentProperty=function($,ve){if(Object.keys(it).indexOf($)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return it[$]=ve};var Pe,dt,ze,Tt,Je,vt={},$e={},St=[],Rt={},Zt={},bt={},Vt={},vs=null,us=0,jt=[],kt=new CB(p),Ft=t.hotfixes||[],is={},Ss={},nn=[],es=function $(ve,Ve,At,Bt,as,gs){if(!(this instanceof $))return new $(ve,Ve,At,Bt,as,gs);isNaN(ve)&&(ve=1),isNaN(Ve)&&(Ve=0),isNaN(At)&&(At=0),isNaN(Bt)&&(Bt=1),isNaN(as)&&(as=0),isNaN(gs)&&(gs=0),this._matrix=[ve,Ve,At,Bt,as,gs]};Object.defineProperty(es.prototype,"sx",{get:function(){return this._matrix[0]},set:function($){this._matrix[0]=$}}),Object.defineProperty(es.prototype,"shy",{get:function(){return this._matrix[1]},set:function($){this._matrix[1]=$}}),Object.defineProperty(es.prototype,"shx",{get:function(){return this._matrix[2]},set:function($){this._matrix[2]=$}}),Object.defineProperty(es.prototype,"sy",{get:function(){return this._matrix[3]},set:function($){this._matrix[3]=$}}),Object.defineProperty(es.prototype,"tx",{get:function(){return this._matrix[4]},set:function($){this._matrix[4]=$}}),Object.defineProperty(es.prototype,"ty",{get:function(){return this._matrix[5]},set:function($){this._matrix[5]=$}}),Object.defineProperty(es.prototype,"a",{get:function(){return this._matrix[0]},set:function($){this._matrix[0]=$}}),Object.defineProperty(es.prototype,"b",{get:function(){return this._matrix[1]},set:function($){this._matrix[1]=$}}),Object.defineProperty(es.prototype,"c",{get:function(){return this._matrix[2]},set:function($){this._matrix[2]=$}}),Object.defineProperty(es.prototype,"d",{get:function(){return this._matrix[3]},set:function($){this._matrix[3]=$}}),Object.defineProperty(es.prototype,"e",{get:function(){return this._matrix[4]},set:function($){this._matrix[4]=$}}),Object.defineProperty(es.prototype,"f",{get:function(){return this._matrix[5]},set:function($){this._matrix[5]=$}}),Object.defineProperty(es.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(es.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(es.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(es.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),es.prototype.join=function($){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(G).join($)},es.prototype.multiply=function($){var ve=$.sx*this.sx+$.shy*this.shx,Ve=$.sx*this.shy+$.shy*this.sy,At=$.shx*this.sx+$.sy*this.shx,Bt=$.shx*this.shy+$.sy*this.sy,as=$.tx*this.sx+$.ty*this.shx+this.tx,gs=$.tx*this.shy+$.ty*this.sy+this.ty;return new es(ve,Ve,At,Bt,as,gs)},es.prototype.decompose=function(){var $=this.sx,ve=this.shy,Ve=this.shx,At=this.sy,Bt=this.tx,as=this.ty,gs=Math.sqrt($*$+ve*ve),cn=($/=gs)*Ve+(ve/=gs)*At;Ve-=$*cn,At-=ve*cn;var vn=Math.sqrt(Ve*Ve+At*At);return cn/=vn,$*(At/=vn)<ve*(Ve/=vn)&&($=-$,ve=-ve,cn=-cn,gs=-gs),{scale:new es(gs,0,0,vn,0,0),translate:new es(1,0,0,1,Bt,as),rotate:new es($,ve,-ve,$,0,0),skew:new es(1,0,cn,1,0,0)}},es.prototype.toString=function($){return this.join(" ")},es.prototype.inversed=function(){var $=this.sx,ve=this.shy,Ve=this.shx,At=this.sy,Bt=this.tx,as=this.ty,gs=1/($*At-ve*Ve),cn=At*gs,vn=-ve*gs,Qn=-Ve*gs,Xn=$*gs;return new es(cn,vn,Qn,Xn,-cn*Bt-Qn*as,-vn*Bt-Xn*as)},es.prototype.applyToPoint=function($){var ve=$.x*this.sx+$.y*this.shx+this.tx,Ve=$.x*this.shy+$.y*this.sy+this.ty;return new L(ve,Ve)},es.prototype.applyToRectangle=function($){var ve=this.applyToPoint($),Ve=this.applyToPoint(new L($.x+$.w,$.y+$.h));return new P(ve.x,ve.y,Ve.x-ve.x,Ve.y-ve.y)},es.prototype.clone=function(){var $=this.sx,ve=this.shy,Ve=this.shx,At=this.sy,Bt=this.tx,as=this.ty;return new es($,ve,Ve,At,Bt,as)},p.Matrix=es;var zs=p.matrixMult=function($,ve){return ve.multiply($)},Us=new es(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Us;var Vs=function($,ve){if(!Zt[$]){var Ve=(ve instanceof cu?"Sh":"P")+(Object.keys(Rt).length+1).toString(10);ve.id=Ve,Zt[$]=Ve,Rt[Ve]=ve,kt.publish("addPattern",ve)}};p.ShadingPattern=cu,p.TilingPattern=lh,p.addShadingPattern=function($,ve){return W("addShadingPattern()"),Vs($,ve),this},p.beginTilingPattern=function($){W("beginTilingPattern()"),ne($.boundingBox[0],$.boundingBox[1],$.boundingBox[2]-$.boundingBox[0],$.boundingBox[3]-$.boundingBox[1],$.matrix)},p.endTilingPattern=function($,ve){W("endTilingPattern()"),ve.stream=ke[me].join(`
`),Vs($,ve),kt.publish("endTilingPattern",ve),nn.pop().restore()};var Ls,js=p.__private__.newObject=function(){var $=Os();return Ds($,!0),$},Os=p.__private__.newObjectDeferred=function(){return Le++,ge[Le]=function(){return we},Le},Ds=function($,ve){return ve=typeof ve=="boolean"&&ve,ge[$]=we,ve&&le($+" 0 obj"),$},ut=p.__private__.newAdditionalObject=function(){var $={objId:Os(),content:""};return Ne.push($),$},Pt=Os(),Kt=Os(),ws=p.__private__.decodeColorString=function($){var ve=$.split(" ");if(ve.length!==2||ve[1]!=="g"&&ve[1]!=="G")ve.length!==5||ve[4]!=="k"&&ve[4]!=="K"||(ve=[(1-ve[0])*(1-ve[3]),(1-ve[1])*(1-ve[3]),(1-ve[2])*(1-ve[3]),"r"]);else{var Ve=parseFloat(ve[0]);ve=[Ve,Ve,Ve,"r"]}for(var At="#",Bt=0;Bt<3;Bt++)At+=("0"+Math.floor(255*parseFloat(ve[Bt])).toString(16)).slice(-2);return At},Ts=p.__private__.encodeColorString=function($){var ve;typeof $=="string"&&($={ch1:$});var Ve=$.ch1,At=$.ch2,Bt=$.ch3,as=$.ch4,gs=$.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ve=="string"&&Ve.charAt(0)!=="#"){var cn=new eR(Ve);if(cn.ok)Ve=cn.toHex();else if(!/^\d*\.?\d*$/.test(Ve))throw new Error('Invalid color "'+Ve+'" passed to jsPDF.encodeColorString.')}if(typeof Ve=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ve)&&(Ve="#"+Ve[1]+Ve[1]+Ve[2]+Ve[2]+Ve[3]+Ve[3]),typeof Ve=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ve)){var vn=parseInt(Ve.substr(1),16);Ve=vn>>16&255,At=vn>>8&255,Bt=255&vn}if(At===void 0||as===void 0&&Ve===At&&At===Bt)ve=typeof Ve=="string"?Ve+" "+gs[0]:$.precision===2?Z(Ve/255)+" "+gs[0]:ie(Ve/255)+" "+gs[0];else if(as===void 0||wa(as)==="object"){if(as&&!isNaN(as.a)&&as.a===0)return["1.","1.","1.",gs[1]].join(" ");ve=typeof Ve=="string"?[Ve,At,Bt,gs[1]].join(" "):$.precision===2?[Z(Ve/255),Z(At/255),Z(Bt/255),gs[1]].join(" "):[ie(Ve/255),ie(At/255),ie(Bt/255),gs[1]].join(" ")}else ve=typeof Ve=="string"?[Ve,At,Bt,as,gs[2]].join(" "):$.precision===2?[Z(Ve),Z(At),Z(Bt),Z(as),gs[2]].join(" "):[ie(Ve),ie(At),ie(Bt),ie(as),gs[2]].join(" ");return ve},ys=p.__private__.getFilters=function(){return A},Qs=p.__private__.putStream=function($){var ve=($=$||{}).data||"",Ve=$.filters||ys(),At=$.alreadyAppliedFilters||[],Bt=$.addLength1||!1,as=ve.length,gs=$.objectId,cn=function(mi){return mi};if(o!==null&&gs===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");o!==null&&(cn=Yn.encryptor(gs,0));var vn={};Ve===!0&&(Ve=["FlateEncode"]);var Qn=$.additionalKeyValues||[],Xn=(vn=Sn.API.processDataByFilters!==void 0?Sn.API.processDataByFilters(ve,Ve):{data:ve,reverseChain:[]}).reverseChain+(Array.isArray(At)?At.join(" "):At.toString());if(vn.data.length!==0&&(Qn.push({key:"Length",value:vn.data.length}),Bt===!0&&Qn.push({key:"Length1",value:as})),Xn.length!=0)if(Xn.split("/").length-1==1)Qn.push({key:"Filter",value:Xn});else{Qn.push({key:"Filter",value:"["+Xn+"]"});for(var Fr=0;Fr<Qn.length;Fr+=1)if(Qn[Fr].key==="DecodeParms"){for(var Fa=[],qa=0;qa<vn.reverseChain.split("/").length-1;qa+=1)Fa.push("null");Fa.push(Qn[Fr].value),Qn[Fr].value="["+Fa.join(" ")+"]"}}le("<<");for(var Xr=0;Xr<Qn.length;Xr++)le("/"+Qn[Xr].key+" "+Qn[Xr].value);le(">>"),vn.data.length!==0&&(le("stream"),le(cn(vn.data)),le("endstream"))},Gt=p.__private__.putPage=function($){var ve=$.number,Ve=$.data,At=$.objId,Bt=$.contentsObjId;Ds(At,!0),le("<</Type /Page"),le("/Parent "+$.rootDictionaryObjId+" 0 R"),le("/Resources "+$.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(G($.mediaBox.bottomLeftX))+" "+parseFloat(G($.mediaBox.bottomLeftY))+" "+G($.mediaBox.topRightX)+" "+G($.mediaBox.topRightY)+"]"),$.cropBox!==null&&le("/CropBox ["+G($.cropBox.bottomLeftX)+" "+G($.cropBox.bottomLeftY)+" "+G($.cropBox.topRightX)+" "+G($.cropBox.topRightY)+"]"),$.bleedBox!==null&&le("/BleedBox ["+G($.bleedBox.bottomLeftX)+" "+G($.bleedBox.bottomLeftY)+" "+G($.bleedBox.topRightX)+" "+G($.bleedBox.topRightY)+"]"),$.trimBox!==null&&le("/TrimBox ["+G($.trimBox.bottomLeftX)+" "+G($.trimBox.bottomLeftY)+" "+G($.trimBox.topRightX)+" "+G($.trimBox.topRightY)+"]"),$.artBox!==null&&le("/ArtBox ["+G($.artBox.bottomLeftX)+" "+G($.artBox.bottomLeftY)+" "+G($.artBox.topRightX)+" "+G($.artBox.topRightY)+"]"),typeof $.userUnit=="number"&&$.userUnit!==1&&le("/UserUnit "+$.userUnit),kt.publish("putPage",{objId:At,pageContext:jt[ve],pageNumber:ve,page:Ve}),le("/Contents "+Bt+" 0 R"),le(">>"),le("endobj");var as=Ve.join(`
`);return k===Q&&(as+=`
Q`),Ds(Bt,!0),Qs({data:as,filters:ys(),objectId:Bt}),le("endobj"),At},Ys=p.__private__.putPages=function(){var $,ve,Ve=[];for($=1;$<=us;$++)jt[$].objId=Os(),jt[$].contentsObjId=Os();for($=1;$<=us;$++)Ve.push(Gt({number:$,data:ke[$],objId:jt[$].objId,contentsObjId:jt[$].contentsObjId,mediaBox:jt[$].mediaBox,cropBox:jt[$].cropBox,bleedBox:jt[$].bleedBox,trimBox:jt[$].trimBox,artBox:jt[$].artBox,userUnit:jt[$].userUnit,rootDictionaryObjId:Pt,resourceDictionaryObjId:Kt}));Ds(Pt,!0),le("<</Type /Pages");var At="/Kids [";for(ve=0;ve<us;ve++)At+=Ve[ve]+" 0 R ";le(At+"]"),le("/Count "+us),le(">>"),le("endobj"),kt.publish("postPutPages")},Cn=function($){kt.publish("putFont",{font:$,out:le,newObject:js,putStream:Qs}),$.isAlreadyPutted!==!0&&($.objectNumber=js(),le("<<"),le("/Type /Font"),le("/BaseFont /"+pf($.postScriptName)),le("/Subtype /Type1"),typeof $.encoding=="string"&&le("/Encoding /"+$.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},na=function($){$.objectNumber=js();var ve=[];ve.push({key:"Type",value:"/XObject"}),ve.push({key:"Subtype",value:"/Form"}),ve.push({key:"BBox",value:"["+[G($.x),G($.y),G($.x+$.width),G($.y+$.height)].join(" ")+"]"}),ve.push({key:"Matrix",value:"["+$.matrix.toString()+"]"});var Ve=$.pages[1].join(`
`);Qs({data:Ve,additionalKeyValues:ve,objectId:$.objectNumber}),le("endobj")},tr=function($,ve){ve||(ve=21);var Ve=js(),At=(function(gs,cn){var vn,Qn=[],Xn=1/(cn-1);for(vn=0;vn<1;vn+=Xn)Qn.push(vn);if(Qn.push(1),gs[0].offset!=0){var Fr={offset:0,color:gs[0].color};gs.unshift(Fr)}if(gs[gs.length-1].offset!=1){var Fa={offset:1,color:gs[gs.length-1].color};gs.push(Fa)}for(var qa="",Xr=0,mi=0;mi<Qn.length;mi++){for(vn=Qn[mi];vn>gs[Xr+1].offset;)Xr++;var si=gs[Xr].offset,Ci=(vn-si)/(gs[Xr+1].offset-si),Rl=gs[Xr].color,Yo=gs[Xr+1].color;qa+=je(Math.round((1-Ci)*Rl[0]+Ci*Yo[0]).toString(16))+je(Math.round((1-Ci)*Rl[1]+Ci*Yo[1]).toString(16))+je(Math.round((1-Ci)*Rl[2]+Ci*Yo[2]).toString(16))}return qa.trim()})($.colors,ve),Bt=[];Bt.push({key:"FunctionType",value:"0"}),Bt.push({key:"Domain",value:"[0.0 1.0]"}),Bt.push({key:"Size",value:"["+ve+"]"}),Bt.push({key:"BitsPerSample",value:"8"}),Bt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Bt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Qs({data:At,additionalKeyValues:Bt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ve}),le("endobj"),$.objectNumber=js(),le("<< /ShadingType "+$.type),le("/ColorSpace /DeviceRGB");var as="/Coords ["+G(parseFloat($.coords[0]))+" "+G(parseFloat($.coords[1]))+" ";$.type===2?as+=G(parseFloat($.coords[2]))+" "+G(parseFloat($.coords[3])):as+=G(parseFloat($.coords[2]))+" "+G(parseFloat($.coords[3]))+" "+G(parseFloat($.coords[4]))+" "+G(parseFloat($.coords[5])),le(as+="]"),$.matrix&&le("/Matrix ["+$.matrix.toString()+"]"),le("/Function "+Ve+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},Mt=function($,ve){var Ve=Os(),At=js();ve.push({resourcesOid:Ve,objectOid:At}),$.objectNumber=At;var Bt=[];Bt.push({key:"Type",value:"/Pattern"}),Bt.push({key:"PatternType",value:"1"}),Bt.push({key:"PaintType",value:"1"}),Bt.push({key:"TilingType",value:"1"}),Bt.push({key:"BBox",value:"["+$.boundingBox.map(G).join(" ")+"]"}),Bt.push({key:"XStep",value:G($.xStep)}),Bt.push({key:"YStep",value:G($.yStep)}),Bt.push({key:"Resources",value:Ve+" 0 R"}),$.matrix&&Bt.push({key:"Matrix",value:"["+$.matrix.toString()+"]"}),Qs({data:$.stream,additionalKeyValues:Bt,objectId:$.objectNumber}),le("endobj")},bn=function($){for(var ve in $.objectNumber=js(),le("<<"),$)switch(ve){case"opacity":le("/ca "+Z($[ve]));break;case"stroke-opacity":le("/CA "+Z($[ve]))}le(">>"),le("endobj")},Tr=function($){Ds($.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ve in le("/Font <<"),vt)vt.hasOwnProperty(ve)&&(m===!1||m===!0&&y.hasOwnProperty(ve))&&le("/"+ve+" "+vt[ve].objectNumber+" 0 R");le(">>")})(),(function(){if(Object.keys(Rt).length>0){for(var ve in le("/Shading <<"),Rt)Rt.hasOwnProperty(ve)&&Rt[ve]instanceof cu&&Rt[ve].objectNumber>=0&&le("/"+ve+" "+Rt[ve].objectNumber+" 0 R");kt.publish("putShadingPatternDict"),le(">>")}})(),(function(ve){if(Object.keys(Rt).length>0){for(var Ve in le("/Pattern <<"),Rt)Rt.hasOwnProperty(Ve)&&Rt[Ve]instanceof p.TilingPattern&&Rt[Ve].objectNumber>=0&&Rt[Ve].objectNumber<ve&&le("/"+Ve+" "+Rt[Ve].objectNumber+" 0 R");kt.publish("putTilingPatternDict"),le(">>")}})($.objectOid),(function(){if(Object.keys(bt).length>0){var ve;for(ve in le("/ExtGState <<"),bt)bt.hasOwnProperty(ve)&&bt[ve].objectNumber>=0&&le("/"+ve+" "+bt[ve].objectNumber+" 0 R");kt.publish("putGStateDict"),le(">>")}})(),(function(){for(var ve in le("/XObject <<"),is)is.hasOwnProperty(ve)&&is[ve].objectNumber>=0&&le("/"+ve+" "+is[ve].objectNumber+" 0 R");kt.publish("putXobjectDict"),le(">>")})(),le(">>"),le("endobj")},lr=function($){$e[$.fontName]=$e[$.fontName]||{},$e[$.fontName][$.fontStyle]=$.id},Bs=function($,ve,Ve,At,Bt){var as={id:"F"+(Object.keys(vt).length+1).toString(10),postScriptName:$,fontName:ve,fontStyle:Ve,encoding:At,isStandardFont:Bt||!1,metadata:{}};return kt.publish("addFont",{font:as,instance:this}),vt[as.id]=as,lr(as),as.id},Js=p.__private__.pdfEscape=p.pdfEscape=function($,ve){return(function(Ve,At){var Bt,as,gs,cn,vn,Qn,Xn,Fr,Fa;if(gs=(At=At||{}).sourceEncoding||"Unicode",vn=At.outputEncoding,(At.autoencode||vn)&&vt[Pe].metadata&&vt[Pe].metadata[gs]&&vt[Pe].metadata[gs].encoding&&(cn=vt[Pe].metadata[gs].encoding,!vn&&vt[Pe].encoding&&(vn=vt[Pe].encoding),!vn&&cn.codePages&&(vn=cn.codePages[0]),typeof vn=="string"&&(vn=cn[vn]),vn)){for(Xn=!1,Qn=[],Bt=0,as=Ve.length;Bt<as;Bt++)(Fr=vn[Ve.charCodeAt(Bt)])?Qn.push(String.fromCharCode(Fr)):Qn.push(Ve[Bt]),Qn[Bt].charCodeAt(0)>>8&&(Xn=!0);Ve=Qn.join("")}for(Bt=Ve.length;Xn===void 0&&Bt!==0;)Ve.charCodeAt(Bt-1)>>8&&(Xn=!0),Bt--;if(!Xn)return Ve;for(Qn=At.noBOM?[]:[254,255],Bt=0,as=Ve.length;Bt<as;Bt++){if((Fa=(Fr=Ve.charCodeAt(Bt))>>8)>>8)throw new Error("Character at position "+Bt+" of string '"+Ve+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qn.push(Fa),Qn.push(Fr-(Fa<<8))}return String.fromCharCode.apply(void 0,Qn)})($,ve).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pn=p.__private__.beginPage=function($){ke[++us]=[],jt[us]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number($[0]),topRightY:Number($[1])}},Ur(us),Qe(ke[me])},kr=function($,ve){var Ve,At,Bt;switch(n=ve||n,typeof $=="string"&&(Ve=B($.toLowerCase()),Array.isArray(Ve)&&(At=Ve[0],Bt=Ve[1])),Array.isArray($)&&(At=$[0]*dt,Bt=$[1]*dt),isNaN(At)&&(At=i[0],Bt=i[1]),(At>14400||Bt>14400)&&(_a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),At=Math.min(14400,At),Bt=Math.min(14400,Bt)),i=[At,Bt],n.substr(0,1)){case"l":Bt>At&&(i=[Bt,At]);break;case"p":At>Bt&&(i=[Bt,At])}Pn(i),Oe(Te),le(Hn),I!==0&&le(I+" J"),F!==0&&le(F+" j"),kt.publish("addPage",{pageNumber:us})},jr=function($){$>0&&$<=us&&(ke.splice($,1),jt.splice($,1),us--,me>us&&(me=us),this.setPage(me))},Ur=function($){$>0&&$<=us&&(me=$)},hr=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return ke.length-1},qs=function($,ve,Ve){var At,Bt=void 0;return Ve=Ve||{},$=$!==void 0?$:vt[Pe].fontName,ve=ve!==void 0?ve:vt[Pe].fontStyle,At=$.toLowerCase(),$e[At]!==void 0&&$e[At][ve]!==void 0?Bt=$e[At][ve]:$e[$]!==void 0&&$e[$][ve]!==void 0?Bt=$e[$][ve]:Ve.disableWarning===!1&&_a.warn("Unable to look up font label for font '"+$+"', '"+ve+"'. Refer to getFontList() for available fonts."),Bt||Ve.noFallback||(Bt=$e.times[ve])==null&&(Bt=$e.times.normal),Bt},tn=p.__private__.putInfo=function(){var $=js(),ve=function(At){return At};for(var Ve in o!==null&&(ve=Yn.encryptor($,0)),le("<<"),le("/Producer ("+Js(ve("jsPDF "+Sn.version))+")"),it)it.hasOwnProperty(Ve)&&it[Ve]&&le("/"+Ve.substr(0,1).toUpperCase()+Ve.substr(1)+" ("+Js(ve(it[Ve]))+")");le("/CreationDate ("+Js(ve(de))+")"),le(">>"),le("endobj")},Is=p.__private__.putCatalog=function($){var ve=($=$||{}).rootDictionaryObjId||Pt;switch(js(),le("<<"),le("/Type /Catalog"),le("/Pages "+ve+" 0 R"),Jt||(Jt="fullwidth"),Jt){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ve=""+Jt;Ve.substr(Ve.length-1)==="%"&&(Jt=parseInt(Jt)/100),typeof Jt=="number"&&le("/OpenAction [3 0 R /XYZ null null "+Z(Jt)+"]")}switch(Fs||(Fs="continuous"),Fs){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}Lt&&le("/PageMode /"+Lt),kt.publish("putCatalog"),le(">>"),le("endobj")},dn=p.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(Le+1)),le("/Root "+Le+" 0 R"),le("/Info "+(Le-1)+" 0 R"),o!==null&&le("/Encrypt "+Yn.oid+" 0 R"),le("/ID [ <"+se+"> <"+se+"> ]"),le(">>")},Hs=p.__private__.putHeader=function(){le("%PDF-"+j),le("%")},wr=p.__private__.putXRef=function(){var $="0000000000";le("xref"),le("0 "+(Le+1)),le("0000000000 65535 f ");for(var ve=1;ve<=Le;ve++)typeof ge[ve]=="function"?le(($+ge[ve]()).slice(-10)+" 00000 n "):ge[ve]!==void 0?le(($+ge[ve]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},at=p.__private__.buildDocument=function(){var $;Le=0,we=0,ye=[],ge=[],Ne=[],Pt=Os(),Kt=Os(),Qe(ye),kt.publish("buildDocument"),Hs(),Ys(),(function(){kt.publish("putAdditionalObjects");for(var Ve=0;Ve<Ne.length;Ve++){var At=Ne[Ve];Ds(At.objId,!0),le(At.content),le("endobj")}kt.publish("postPutAdditionalObjects")})(),$=[],(function(){for(var Ve in vt)vt.hasOwnProperty(Ve)&&(m===!1||m===!0&&y.hasOwnProperty(Ve))&&Cn(vt[Ve])})(),(function(){var Ve;for(Ve in bt)bt.hasOwnProperty(Ve)&&bn(bt[Ve])})(),(function(){for(var Ve in is)is.hasOwnProperty(Ve)&&na(is[Ve])})(),(function(Ve){var At;for(At in Rt)Rt.hasOwnProperty(At)&&(Rt[At]instanceof cu?tr(Rt[At]):Rt[At]instanceof lh&&Mt(Rt[At],Ve))})($),kt.publish("putResources"),$.forEach(Tr),Tr({resourcesOid:Kt,objectOid:Number.MAX_SAFE_INTEGER}),kt.publish("postPutResources"),o!==null&&(Yn.oid=js(),le("<<"),le("/Filter /Standard"),le("/V "+Yn.v),le("/R "+Yn.r),le("/U <"+Yn.toHexString(Yn.U)+">"),le("/O <"+Yn.toHexString(Yn.O)+">"),le("/P "+Yn.P),le(">>"),le("endobj")),tn(),Is();var ve=we;return wr(),dn(),le("startxref"),le(""+ve),le("%%EOF"),Qe(ke[me]),ye.join(`
`)},ms=p.__private__.getBlob=function($){return new Blob([rt($)],{type:"application/pdf"})},ds=p.output=p.__private__.output=(Ls=function($,ve){switch(typeof(ve=ve||{})=="string"?ve={filename:ve}:ve.filename=ve.filename||"generated.pdf",$){case void 0:return at();case"save":p.save(ve.filename);break;case"arraybuffer":return rt(at());case"blob":return ms(at());case"bloburi":case"bloburl":if(Wn.URL!==void 0&&typeof Wn.URL.createObjectURL=="function")return Wn.URL&&Wn.URL.createObjectURL(ms(at()))||void 0;_a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ve="",At=at();try{Ve=SB(At)}catch{Ve=SB(unescape(encodeURIComponent(At)))}return"data:application/pdf;filename="+ve.filename+";base64,"+Ve;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Wn)==="[object Window]"){var Bt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",as=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ve.pdfObjectUrl&&(Bt=ve.pdfObjectUrl,as="");var gs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Bt+'"'+as+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ve)+");<\/script></body></html>",cn=Wn.open();return cn!==null&&cn.document.write(gs),cn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Wn)==="[object Window]"){var vn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ve.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ve.filename+'" width="500px" height="400px" /></body></html>',Qn=Wn.open();if(Qn!==null){Qn.document.write(vn);var Xn=this;Qn.document.documentElement.querySelector("#pdfViewer").onload=function(){Qn.document.title=ve.filename,Qn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Xn.output("bloburl"))}}return Qn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Wn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Fr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ve)+'"></iframe></body></html>',Fa=Wn.open();if(Fa!==null&&(Fa.document.write(Fr),Fa.document.title=ve.filename),Fa||typeof safari>"u")return Fa;break;case"datauri":case"dataurl":return Wn.document.location.href=this.output("datauristring",ve);default:return null}},Ls.foo=function(){try{return Ls.apply(this,arguments)}catch(Ve){var $=Ve.stack||"";~$.indexOf(" at ")&&($=$.split(" at ")[1]);var ve="Error in function "+$.split(`
`)[0].split("<")[0]+": "+Ve.message;if(!Wn.console)throw new Error(ve);Wn.console.error(ve,Ve),Wn.alert&&alert(ve)}},Ls.foo.bar=Ls,Ls.foo),Nn=function($){return Array.isArray(Ft)===!0&&Ft.indexOf($)>-1};switch(r){case"pt":dt=1;break;case"mm":dt=72/25.4;break;case"cm":dt=72/2.54;break;case"in":dt=72;break;case"px":dt=Nn("px_scaling")==1?.75:96/72;break;case"pc":case"em":dt=12;break;case"ex":dt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);dt=r}var Yn=null;pe(),te();var sr=p.__private__.getPageInfo=p.getPageInfo=function($){if(isNaN($)||$%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:jt[$].objId,pageNumber:$,pageContext:jt[$]}},ha=p.__private__.getPageInfoByObjId=function($){if(isNaN($)||$%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ve in jt)if(jt[ve].objId===$)break;return sr(ve)},Ma=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:jt[me].objId,pageNumber:me,pageContext:jt[me]}};p.addPage=function(){return kr.apply(this,arguments),this},p.setPage=function(){return Ur.apply(this,arguments),Qe.call(this,ke[me]),this},p.insertPage=function($){return this.addPage(),this.movePage(me,$),this},p.movePage=function($,ve){var Ve,At;if($>ve){Ve=ke[$],At=jt[$];for(var Bt=$;Bt>ve;Bt--)ke[Bt]=ke[Bt-1],jt[Bt]=jt[Bt-1];ke[ve]=Ve,jt[ve]=At,this.setPage(ve)}else if($<ve){Ve=ke[$],At=jt[$];for(var as=$;as<ve;as++)ke[as]=ke[as+1],jt[as]=jt[as+1];ke[ve]=Ve,jt[ve]=At,this.setPage(ve)}return this},p.deletePage=function(){return jr.apply(this,arguments),this},p.__private__.text=p.text=function($,ve,Ve,At,Bt){var as,gs,cn,vn,Qn,Xn,Fr,Fa,qa,Xr=(At=At||{}).scope||this;if(typeof $=="number"&&typeof ve=="number"&&(typeof Ve=="string"||Array.isArray(Ve))){var mi=Ve;Ve=ve,ve=$,$=mi}if(arguments[3]instanceof es==0?(cn=arguments[4],vn=arguments[5],wa(Fr=arguments[3])==="object"&&Fr!==null||(typeof cn=="string"&&(vn=cn,cn=null),typeof Fr=="string"&&(vn=Fr,Fr=null),typeof Fr=="number"&&(cn=Fr,Fr=null),At={flags:Fr,angle:cn,align:vn})):(W("The transform parameter of text() with a Matrix value"),qa=Bt),isNaN(ve)||isNaN(Ve)||$==null)throw new Error("Invalid arguments passed to jsPDF.text");if($.length===0)return Xr;var si,Ci="",Rl=typeof At.lineHeightFactor=="number"?At.lineHeightFactor:V,Yo=Xr.internal.scaleFactor;function Ol(Dr){return Dr=Dr.split("	").join(Array(At.TabLen||9).join(" ")),Js(Dr,Fr)}function Hd(Dr){for(var Ir,fa=Dr.concat(),Hr=[],sl=fa.length;sl--;)typeof(Ir=fa.shift())=="string"?Hr.push(Ir):Array.isArray(Dr)&&(Ir.length===1||Ir[1]===void 0&&Ir[2]===void 0)?Hr.push(Ir[0]):Hr.push([Ir[0],Ir[1],Ir[2]]);return Hr}function ad(Dr,Ir){var fa;if(typeof Dr=="string")fa=Ir(Dr)[0];else if(Array.isArray(Dr)){for(var Hr,sl,nl=Dr.concat(),Rc=[],sc=nl.length;sc--;)typeof(Hr=nl.shift())=="string"?Rc.push(Ir(Hr)[0]):Array.isArray(Hr)&&typeof Hr[0]=="string"&&(sl=Ir(Hr[0],Hr[1],Hr[2]),Rc.push([sl[0],sl[1],sl[2]]));fa=Rc}return fa}var wo=!1,So=!0;if(typeof $=="string")wo=!0;else if(Array.isArray($)){var Zl=$.concat();gs=[];for(var Ao,Ia=Zl.length;Ia--;)(typeof(Ao=Zl.shift())!="string"||Array.isArray(Ao)&&typeof Ao[0]!="string")&&(So=!1);wo=So}if(wo===!1)throw new Error('Type of text must be string or Array. "'+$+'" is not recognized.');typeof $=="string"&&($=$.match(/[\r?\n]/)?$.split(/\r\n|\r|\n/g):[$]);var yr=ft/Xr.internal.scaleFactor,ec=yr*(Rl-1);switch(At.baseline){case"bottom":Ve-=ec;break;case"top":Ve+=yr-ec;break;case"hanging":Ve+=yr-2*ec;break;case"middle":Ve+=yr/2-ec}if((Xn=At.maxWidth||0)>0&&(typeof $=="string"?$=Xr.splitTextToSize($,Xn):Object.prototype.toString.call($)==="[object Array]"&&($=$.reduce(function(Dr,Ir){return Dr.concat(Xr.splitTextToSize(Ir,Xn))},[]))),as={text:$,x:ve,y:Ve,options:At,mutex:{pdfEscape:Js,activeFontKey:Pe,fonts:vt,activeFontSize:ft}},kt.publish("preProcessText",as),$=as.text,cn=(At=as.options).angle,qa instanceof es==0&&cn&&typeof cn=="number"){cn*=Math.PI/180,At.rotationDirection===0&&(cn=-cn),k===Q&&(cn=-cn);var tc=Math.cos(cn),Xo=Math.sin(cn);qa=new es(tc,Xo,-Xo,tc,0,0)}else cn&&cn instanceof es&&(qa=cn);k!==Q||qa||(qa=Us),(Qn=At.charSpace||N)!==void 0&&(Ci+=G(ce(Qn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Fa=At.horizontalScale)!==void 0&&(Ci+=G(100*Fa)+` Tz
`),At.lang;var ni=-1,bi=At.renderingMode!==void 0?At.renderingMode:At.stroke,id=Xr.internal.getCurrentPageInfo().pageContext;switch(bi){case 0:case!1:case"fill":ni=0;break;case 1:case!0:case"stroke":ni=1;break;case 2:case"fillThenStroke":ni=2;break;case 3:case"invisible":ni=3;break;case 4:case"fillAndAddForClipping":ni=4;break;case 5:case"strokeAndAddPathForClipping":ni=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ni=6;break;case 7:case"addToPathForClipping":ni=7}var No=id.usedRenderingMode!==void 0?id.usedRenderingMode:-1;ni!==-1?Ci+=ni+` Tr
`:No!==-1&&(Ci+=`0 Tr
`),ni!==-1&&(id.usedRenderingMode=ni),vn=At.align||"left";var Lr,Bo=ft*Rl,ma=Xr.internal.pageSize.getWidth(),Ec=vt[Pe];Qn=At.charSpace||N,Xn=At.maxWidth||0,Fr=Object.assign({autoencode:!0,noBOM:!0},At.flags);var ji=[],Co=function(Dr){return Xr.getStringUnitWidth(Dr,{font:Ec,charSpace:Qn,fontSize:ft,doKerning:!1})*ft/Yo};if(Object.prototype.toString.call($)==="[object Array]"){var ir;gs=Hd($),vn!=="left"&&(Lr=gs.map(Co));var Mi,Jo=0;if(vn==="right"){ve-=Lr[0],$=[],Ia=gs.length;for(var Zo=0;Zo<Ia;Zo++)Zo===0?(Mi=Ln(ve),ir=bs(Ve)):(Mi=ce(Jo-Lr[Zo]),ir=-Bo),$.push([gs[Zo],Mi,ir]),Jo=Lr[Zo]}else if(vn==="center"){ve-=Lr[0]/2,$=[],Ia=gs.length;for(var ll=0;ll<Ia;ll++)ll===0?(Mi=Ln(ve),ir=bs(Ve)):(Mi=ce((Jo-Lr[ll])/2),ir=-Bo),$.push([gs[ll],Mi,ir]),Jo=Lr[ll]}else if(vn==="left"){$=[],Ia=gs.length;for(var Ul=0;Ul<Ia;Ul++)$.push(gs[Ul])}else if(vn==="justify"&&Ec.encoding==="Identity-H"){$=[],Ia=gs.length,Xn=Xn!==0?Xn:ma;for(var Tc=0,Pa=0;Pa<Ia;Pa++)if(ir=Pa===0?bs(Ve):-Bo,Mi=Pa===0?Ln(ve):Tc,Pa<Ia-1){var Yi=ce((Xn-Lr[Pa])/(gs[Pa].split(" ").length-1)),Ei=gs[Pa].split(" ");$.push([Ei[0]+" ",Mi,ir]),Tc=0;for(var Ti=1;Ti<Ei.length;Ti++){var Sr=(Co(Ei[Ti-1]+" "+Ei[Ti])-Co(Ei[Ti]))*Yo+Yi;Ti==Ei.length-1?$.push([Ei[Ti],Sr,0]):$.push([Ei[Ti]+" ",Sr,0]),Tc-=Sr}}else $.push([gs[Pa],Mi,ir]);$.push(["",Tc,0])}else{if(vn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for($=[],Ia=gs.length,Xn=Xn!==0?Xn:ma,Pa=0;Pa<Ia;Pa++){ir=Pa===0?bs(Ve):-Bo,Mi=Pa===0?Ln(ve):0;var Pi=gs[Pa].split(" ").length-1,Fc=Pi>0?(Xn-Lr[Pa])/Pi:0;Pa<Ia-1?ji.push(G(ce(Fc))):ji.push(0),$.push([gs[Pa],Mi,ir])}}}(typeof At.R2L=="boolean"?At.R2L:tt)===!0&&($=ad($,function(Dr,Ir,fa){return[Dr.split("").reverse().join(""),Ir,fa]})),as={text:$,x:ve,y:Ve,options:At,mutex:{pdfEscape:Js,activeFontKey:Pe,fonts:vt,activeFontSize:ft}},kt.publish("postProcessText",as),$=as.text,si=as.mutex.isHex||!1;var Ic=vt[Pe].encoding;Ic!=="WinAnsiEncoding"&&Ic!=="StandardEncoding"||($=ad($,function(Dr,Ir,fa){return[Ol(Dr),Ir,fa]})),gs=Hd($),$=[];for(var el,cl,dl,tl=Array.isArray(gs[0])?1:0,Ga="",Ll=function(Dr,Ir,fa){var Hr="";return fa instanceof es?(fa=typeof At.angle=="number"?zs(fa,new es(1,0,0,1,Dr,Ir)):zs(new es(1,0,0,1,Dr,Ir),fa),k===Q&&(fa=zs(new es(1,0,0,-1,0,0),fa)),Hr=fa.join(" ")+` Tm
`):Hr=G(Dr)+" "+G(Ir)+` Td
`,Hr},ki=0;ki<gs.length;ki++){switch(Ga="",tl){case 1:dl=(si?"<":"(")+gs[ki][0]+(si?">":")"),el=parseFloat(gs[ki][1]),cl=parseFloat(gs[ki][2]);break;case 0:dl=(si?"<":"(")+gs[ki]+(si?">":")"),el=Ln(ve),cl=bs(Ve)}ji!==void 0&&ji[ki]!==void 0&&(Ga=ji[ki]+` Tw
`),ki===0?$.push(Ga+Ll(el,cl,qa)+dl):tl===0?$.push(Ga+dl):tl===1&&$.push(Ga+Ll(el,cl,qa)+dl)}$=tl===0?$.join(` Tj
T* `):$.join(` Tj
`),$+=` Tj
`;var Xi=`BT
/`;return Xi+=Pe+" "+ft+` Tf
`,Xi+=G(ft*Rl)+` TL
`,Xi+=Yr+`
`,Xi+=Ci,Xi+=$,le(Xi+="ET"),y[Pe]=!0,Xr};var Na=p.__private__.clip=p.clip=function($){return le($==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Na("evenodd")},p.__private__.discardPath=p.discardPath=function(){return le("n"),this};var cr=p.__private__.isValidStyle=function($){var ve=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf($)!==-1&&(ve=!0),ve};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function($){return cr($)&&(h=$),this};var Ka=p.__private__.getStyle=p.getStyle=function($){var ve=h;switch($){case"D":case"S":ve="S";break;case"F":ve="f";break;case"FD":case"DF":ve="B";break;case"f":case"f*":case"B":case"B*":ve=$}return ve},pa=p.close=function(){return le("h"),this};p.stroke=function(){return le("S"),this},p.fill=function($){return er("f",$),this},p.fillEvenOdd=function($){return er("f*",$),this},p.fillStroke=function($){return er("B",$),this},p.fillStrokeEvenOdd=function($){return er("B*",$),this};var er=function($,ve){wa(ve)==="object"?$a(ve,$):le($)},oa=function($){$===null||k===Q&&$===void 0||($=Ka($),le($))};function pi($,ve,Ve,At,Bt){var as=new lh(ve||this.boundingBox,Ve||this.xStep,At||this.yStep,this.gState,Bt||this.matrix);as.stream=this.stream;var gs=$+"$$"+this.cloneIndex+++"$$";return Vs(gs,as),as}var $a=function($,ve){var Ve=Zt[$.key],At=Rt[Ve];if(At instanceof cu)le("q"),le(Va(ve)),At.gState&&p.setGState(At.gState),le($.matrix.toString()+" cm"),le("/"+Ve+" sh"),le("Q");else if(At instanceof lh){var Bt=new es(1,0,0,-1,0,Zs());$.matrix&&(Bt=Bt.multiply($.matrix||Us),Ve=pi.call(At,$.key,$.boundingBox,$.xStep,$.yStep,Bt).id),le("q"),le("/Pattern cs"),le("/"+Ve+" scn"),At.gState&&p.setGState(At.gState),le(ve),le("Q")}},Va=function($){switch($){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ti=p.moveTo=function($,ve){return le(G(ce($))+" "+G(ae(ve))+" m"),this},xe=p.lineTo=function($,ve){return le(G(ce($))+" "+G(ae(ve))+" l"),this},_e=p.curveTo=function($,ve,Ve,At,Bt,as){return le([G(ce($)),G(ae(ve)),G(ce(Ve)),G(ae(At)),G(ce(Bt)),G(ae(as)),"c"].join(" ")),this};p.__private__.line=p.line=function($,ve,Ve,At,Bt){if(isNaN($)||isNaN(ve)||isNaN(Ve)||isNaN(At)||!cr(Bt))throw new Error("Invalid arguments passed to jsPDF.line");return k===U?this.lines([[Ve-$,At-ve]],$,ve,[1,1],Bt||"S"):this.lines([[Ve-$,At-ve]],$,ve,[1,1]).stroke()},p.__private__.lines=p.lines=function($,ve,Ve,At,Bt,as){var gs,cn,vn,Qn,Xn,Fr,Fa,qa,Xr,mi,si,Ci;if(typeof $=="number"&&(Ci=Ve,Ve=ve,ve=$,$=Ci),At=At||[1,1],as=as||!1,isNaN(ve)||isNaN(Ve)||!Array.isArray($)||!Array.isArray(At)||!cr(Bt)||typeof as!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ti(ve,Ve),gs=At[0],cn=At[1],Qn=$.length,mi=ve,si=Ve,vn=0;vn<Qn;vn++)(Xn=$[vn]).length===2?(mi=Xn[0]*gs+mi,si=Xn[1]*cn+si,xe(mi,si)):(Fr=Xn[0]*gs+mi,Fa=Xn[1]*cn+si,qa=Xn[2]*gs+mi,Xr=Xn[3]*cn+si,mi=Xn[4]*gs+mi,si=Xn[5]*cn+si,_e(Fr,Fa,qa,Xr,mi,si));return as&&pa(),oa(Bt),this},p.path=function($){for(var ve=0;ve<$.length;ve++){var Ve=$[ve],At=Ve.c;switch(Ve.op){case"m":ti(At[0],At[1]);break;case"l":xe(At[0],At[1]);break;case"c":_e.apply(this,At);break;case"h":pa()}}return this},p.__private__.rect=p.rect=function($,ve,Ve,At,Bt){if(isNaN($)||isNaN(ve)||isNaN(Ve)||isNaN(At)||!cr(Bt))throw new Error("Invalid arguments passed to jsPDF.rect");return k===U&&(At=-At),le([G(ce($)),G(ae(ve)),G(ce(Ve)),G(ce(At)),"re"].join(" ")),oa(Bt),this},p.__private__.triangle=p.triangle=function($,ve,Ve,At,Bt,as,gs){if(isNaN($)||isNaN(ve)||isNaN(Ve)||isNaN(At)||isNaN(Bt)||isNaN(as)||!cr(gs))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ve-$,At-ve],[Bt-Ve,as-At],[$-Bt,ve-as]],$,ve,[1,1],gs,!0),this},p.__private__.roundedRect=p.roundedRect=function($,ve,Ve,At,Bt,as,gs){if(isNaN($)||isNaN(ve)||isNaN(Ve)||isNaN(At)||isNaN(Bt)||isNaN(as)||!cr(gs))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var cn=4/3*(Math.SQRT2-1);return Bt=Math.min(Bt,.5*Ve),as=Math.min(as,.5*At),this.lines([[Ve-2*Bt,0],[Bt*cn,0,Bt,as-as*cn,Bt,as],[0,At-2*as],[0,as*cn,-Bt*cn,as,-Bt,as],[2*Bt-Ve,0],[-Bt*cn,0,-Bt,-as*cn,-Bt,-as],[0,2*as-At],[0,-as*cn,Bt*cn,-as,Bt,-as]],$+Bt,ve,[1,1],gs,!0),this},p.__private__.ellipse=p.ellipse=function($,ve,Ve,At,Bt){if(isNaN($)||isNaN(ve)||isNaN(Ve)||isNaN(At)||!cr(Bt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var as=4/3*(Math.SQRT2-1)*Ve,gs=4/3*(Math.SQRT2-1)*At;return ti($+Ve,ve),_e($+Ve,ve-gs,$+as,ve-At,$,ve-At),_e($-as,ve-At,$-Ve,ve-gs,$-Ve,ve),_e($-Ve,ve+gs,$-as,ve+At,$,ve+At),_e($+as,ve+At,$+Ve,ve+gs,$+Ve,ve),oa(Bt),this},p.__private__.circle=p.circle=function($,ve,Ve,At){if(isNaN($)||isNaN(ve)||isNaN(Ve)||!cr(At))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse($,ve,Ve,Ve,At)},p.setFont=function($,ve,Ve){return Ve&&(ve=q(ve,Ve)),Pe=qs($,ve,{disableWarning:!1}),this};var nt=p.__private__.getFont=p.getFont=function(){return vt[qs.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var $,ve,Ve={};for($ in $e)if($e.hasOwnProperty($))for(ve in Ve[$]=[],$e[$])$e[$].hasOwnProperty(ve)&&Ve[$].push(ve);return Ve},p.addFont=function($,ve,Ve,At,Bt){var as=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&as.indexOf(arguments[3])!==-1?Bt=arguments[3]:arguments[3]&&as.indexOf(arguments[3])==-1&&(Ve=q(Ve,At)),Bs.call(this,$,ve,Ve,Bt=Bt||"Identity-H")};var V,Te=t.lineWidth||.200025,Ye=p.__private__.getLineWidth=p.getLineWidth=function(){return Te},Oe=p.__private__.setLineWidth=p.setLineWidth=function($){return Te=$,le(G(ce($))+" w"),this};p.__private__.setLineDash=Sn.API.setLineDash=Sn.API.setLineDashPattern=function($,ve){if($=$||[],ve=ve||0,isNaN(ve)||!Array.isArray($))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return $=$.map(function(Ve){return G(ce(Ve))}).join(" "),ve=G(ce(ve)),le("["+$+"] "+ve+" d"),this};var yt=p.__private__.getLineHeight=p.getLineHeight=function(){return ft*V};p.__private__.getLineHeight=p.getLineHeight=function(){return ft*V};var Qt=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function($){return typeof($=$||1.15)=="number"&&(V=$),this},ln=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return V};Qt(t.lineHeight);var Ln=p.__private__.getHorizontalCoordinate=function($){return ce($)},bs=p.__private__.getVerticalCoordinate=function($){return k===Q?$:jt[me].mediaBox.topRightY-jt[me].mediaBox.bottomLeftY-ce($)},Ps=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function($){return G(Ln($))},Dn=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function($){return G(bs($))},Hn=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return ws(Hn)},p.__private__.setStrokeColor=p.setDrawColor=function($,ve,Ve,At){return Hn=Ts({ch1:$,ch2:ve,ch3:Ve,ch4:At,pdfColorType:"draw",precision:2}),le(Hn),this};var qn=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return ws(qn)},p.__private__.setFillColor=p.setFillColor=function($,ve,Ve,At){return qn=Ts({ch1:$,ch2:ve,ch3:Ve,ch4:At,pdfColorType:"fill",precision:2}),le(qn),this};var Yr=t.textColor||"0 g",v=p.__private__.getTextColor=p.getTextColor=function(){return ws(Yr)};p.__private__.setTextColor=p.setTextColor=function($,ve,Ve,At){return Yr=Ts({ch1:$,ch2:ve,ch3:Ve,ch4:At,pdfColorType:"text",precision:3}),this};var N=t.charSpace,x=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(N||0)};p.__private__.setCharSpace=p.setCharSpace=function($){if(isNaN($))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return N=$,this};var I=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function($){var ve=p.CapJoinStyles[$];if(ve===void 0)throw new Error("Line cap style of '"+$+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return I=ve,le(ve+" J"),this};var F=0;p.__private__.setLineJoin=p.setLineJoin=function($){var ve=p.CapJoinStyles[$];if(ve===void 0)throw new Error("Line join style of '"+$+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return F=ve,le(ve+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function($){if($=$||0,isNaN($))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(G(ce($))+" M"),this},p.GState=bm,p.setGState=function($){($=typeof $=="string"?bt[Vt[$]]:_(null,$)).equals(vs)||(le("/"+$.id+" gs"),vs=$)};var _=function($,ve){if(!$||!Vt[$]){var Ve=!1;for(var At in bt)if(bt.hasOwnProperty(At)&&bt[At].equals(ve)){Ve=!0;break}if(Ve)ve=bt[At];else{var Bt="GS"+(Object.keys(bt).length+1).toString(10);bt[Bt]=ve,ve.id=Bt}return $&&(Vt[$]=ve.id),kt.publish("addGState",ve),ve}};p.addGState=function($,ve){return _($,ve),this},p.saveGraphicsState=function(){return le("q"),St.push({key:Pe,size:ft,color:Yr}),this},p.restoreGraphicsState=function(){le("Q");var $=St.pop();return Pe=$.key,ft=$.size,Yr=$.color,vs=null,this},p.setCurrentTransformationMatrix=function($){return le($.toString()+" cm"),this},p.comment=function($){return le("#"+$),this};var L=function($,ve){var Ve=$||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ve},set:function(as){isNaN(as)||(Ve=parseFloat(as))}});var At=ve||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return At},set:function(as){isNaN(as)||(At=parseFloat(as))}});var Bt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Bt},set:function(as){Bt=as.toString()}}),this},P=function($,ve,Ve,At){L.call(this,$,ve),this.type="rect";var Bt=Ve||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Bt},set:function(gs){isNaN(gs)||(Bt=parseFloat(gs))}});var as=At||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return as},set:function(gs){isNaN(gs)||(as=parseFloat(gs))}}),this},z=function(){this.page=us,this.currentPage=me,this.pages=ke.slice(0),this.pagesContext=jt.slice(0),this.x=ze,this.y=Tt,this.matrix=Je,this.width=st(me),this.height=Dt(me),this.outputDestination=Ae,this.id="",this.objectNumber=-1};z.prototype.restore=function(){us=this.page,me=this.currentPage,jt=this.pagesContext,ke=this.pages,ze=this.x,Tt=this.y,Je=this.matrix,ot(me,this.width),rs(me,this.height),Ae=this.outputDestination};var ne=function($,ve,Ve,At,Bt){nn.push(new z),us=me=0,ke=[],ze=$,Tt=ve,Je=Bt,Pn([Ve,At])};for(var Ie in p.beginFormObject=function($,ve,Ve,At,Bt){return ne($,ve,Ve,At,Bt),this},p.endFormObject=function($){return(function(ve){if(Ss[ve])nn.pop().restore();else{var Ve=new z,At="Xo"+(Object.keys(is).length+1).toString(10);Ve.id=At,Ss[ve]=At,is[At]=Ve,kt.publish("addFormObject",Ve),nn.pop().restore()}})($),this},p.doFormObject=function($,ve){var Ve=is[Ss[$]];return le("q"),le(ve.toString()+" cm"),le("/"+Ve.id+" Do"),le("Q"),this},p.getFormObject=function($){var ve=is[Ss[$]];return{x:ve.x,y:ve.y,width:ve.width,height:ve.height,matrix:ve.matrix}},p.save=function($,ve){return $=$||"generated.pdf",(ve=ve||{}).returnPromise=ve.returnPromise||!1,ve.returnPromise===!1?(rh(ms(at()),$),typeof rh.unload=="function"&&Wn.setTimeout&&setTimeout(rh.unload,911),this):new Promise(function(Ve,At){try{var Bt=rh(ms(at()),$);typeof rh.unload=="function"&&Wn.setTimeout&&setTimeout(rh.unload,911),Ve(Bt)}catch(as){At(as.message)}})},Sn.API)Sn.API.hasOwnProperty(Ie)&&(Ie==="events"&&Sn.API.events.length?(function($,ve){var Ve,At,Bt;for(Bt=ve.length-1;Bt!==-1;Bt--)Ve=ve[Bt][0],At=ve[Bt][1],$.subscribe.apply($,[Ve].concat(typeof At=="function"?[At]:At))})(kt,Sn.API.events):p[Ie]=Sn.API[Ie]);function st($){return jt[$].mediaBox.topRightX-jt[$].mediaBox.bottomLeftX}function ot($,ve){jt[$].mediaBox.topRightX=ve+jt[$].mediaBox.bottomLeftX}function Dt($){return jt[$].mediaBox.topRightY-jt[$].mediaBox.bottomLeftY}function rs($,ve){jt[$].mediaBox.topRightY=ve+jt[$].mediaBox.bottomLeftY}var cs=p.getPageWidth=function($){return st($=$||me)/dt},Ns=p.setPageWidth=function($,ve){ot($,ve*dt)},Zs=p.getPageHeight=function($){return Dt($=$||me)/dt},Rn=p.setPageHeight=function($,ve){rs($,ve*dt)};return p.internal={pdfEscape:Js,getStyle:Ka,getFont:nt,getFontSize:gt,getCharSpace:x,getTextColor:v,getLineHeight:yt,getLineHeightFactor:ln,getLineWidth:Ye,write:ct,getHorizontalCoordinate:Ln,getVerticalCoordinate:bs,getCoordinateString:Ps,getVerticalCoordinateString:Dn,collections:{},newObject:js,newAdditionalObject:ut,newObjectDeferred:Os,newObjectDeferredBegin:Ds,getFilters:ys,putStream:Qs,events:kt,scaleFactor:dt,pageSize:{getWidth:function(){return cs(me)},setWidth:function($){Ns(me,$)},getHeight:function(){return Zs(me)},setHeight:function($){Rn(me,$)}},encryptionOptions:o,encryption:Yn,getEncryptor:function($){return o!==null?Yn.encryptor($,0):function(ve){return ve}},output:ds,getNumberOfPages:hr,get pages(){return ke},out:le,f2:Z,f3:ie,getPageInfo:sr,getPageInfoByObjId:ha,getCurrentPageInfo:Ma,getPDFVersion:b,Point:L,Rectangle:P,Matrix:es,hasHotfix:Nn},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return cs(me)},set:function($){Ns(me,$)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Zs(me)},set:function($){Rn(me,$)},enumerable:!0,configurable:!0}),(function($){for(var ve=0,Ve=ht.length;ve<Ve;ve++){var At=Bs.call(this,$[ve][0],$[ve][1],$[ve][2],ht[ve][3],!0);m===!1&&(y[At]=!0);var Bt=$[ve][0].split("-");lr({id:At,fontName:Bt[0],fontStyle:Bt[1]||""})}kt.publish("addFonts",{fonts:vt,dictionary:$e})}).call(p,ht),Pe="F1",kr(i,n),kt.publish("initialized"),p}ff.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},ff.prototype.toHexString=function(t){return t.split("").map(function(s){return("0"+(255&s.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ff.prototype.hexToBytes=function(t){for(var s=[],n=0;n<t.length;n+=2)s.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return s.join("")},ff.prototype.processOwnerPassword=function(t,s){return s1(t1(s).substr(0,5),t)},ff.prototype.encryptor=function(t,s){var n=t1(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&s,s>>8&255)).substr(0,10);return function(r){return s1(n,r)}},bm.prototype.equals=function(t){var s,n="id,objectNumber,equals";if(!t||wa(t)!==wa(this))return!1;var r=0;for(s in this)if(!(n.indexOf(s)>=0)){if(this.hasOwnProperty(s)&&!t.hasOwnProperty(s)||this[s]!==t[s])return!1;r++}for(s in t)t.hasOwnProperty(s)&&n.indexOf(s)<0&&r--;return r===0},Sn.API={events:[]},Sn.version="3.0.4";var Ni=Sn.API,Uj=1,Fh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Af=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ar=function(t){return t.toFixed(2)},ru=function(t){return t.toFixed(5)};Ni.__acroform__={};var Il=function(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t},EB=function(t){return t*Uj},Fd=function(t){var s=new rR,n=pn.internal.getHeight(t)||0,r=pn.internal.getWidth(t)||0;return s.BBox=[0,0,Number(ar(r)),Number(ar(n))],s},ZV=Ni.__acroform__.setBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<s},eq=Ni.__acroform__.clearBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<s)},tq=Ni.__acroform__.getBit=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<s?1:0},Li=Ni.__acroform__.getBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return tq(t,s-1)},Di=Ni.__acroform__.setBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ZV(t,s-1)},Qi=Ni.__acroform__.clearBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return eq(t,s-1)},sq=Ni.__acroform__.calculateCoordinates=function(t,s){var n=s.internal.getHorizontalCoordinate,r=s.internal.getVerticalCoordinate,i=t[0],c=t[1],A=t[2],u=t[3],d={};return d.lowerLeft_X=n(i)||0,d.lowerLeft_Y=r(c+u)||0,d.upperRight_X=n(i+A)||0,d.upperRight_Y=r(c)||0,[Number(ar(d.lowerLeft_X)),Number(ar(d.lowerLeft_Y)),Number(ar(d.upperRight_X)),Number(ar(d.upperRight_Y))]},nq=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var s=[],n=t._V||t.DV,r=n1(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;s.push("/Tx BMC"),s.push("q"),s.push("BT"),s.push(t.scope.__private__.encodeColorString(t.color)),s.push("/"+i+" "+ar(r.fontSize)+" Tf"),s.push("1 0 0 1 0 0 Tm"),s.push(r.text),s.push("ET"),s.push("Q"),s.push("EMC");var c=Fd(t);return c.scope=t.scope,c.stream=s.join(`
`),c}},n1=function(t,s){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(s=(s=s.substr(0,1)=="("?s.substr(1):s).substr(s.length-1)==")"?s.substr(0,s.length-1):s).split(" ");i=t.multiline?i.map(function(Z){return Z.split(`
`)}):i.map(function(Z){return[Z]});var c=n,A=pn.internal.getHeight(t)||0;A=A<0?-A:A;var u=pn.internal.getWidth(t)||0;u=u<0?-u:u;var d=function(Z,ie,ce){if(Z+1<i.length){var ae=ie+" "+i[Z+1][0];return ry(ae,t,ce).width<=u-4}return!1};c++;e:for(;c>0;){s="",c--;var h,o,m=ry("3",t,c).height,y=t.multiline?A-c:(A-m)/2,p=y+=2,j=0,b=0,w=0;if(c<=0){s=`(...) Tj
`,s+="% Width of Text: "+ry(s,t,c=12).width+", FieldWidth:"+u+`
`;break}for(var B="",U=0,Q=0;Q<i.length;Q++)if(i.hasOwnProperty(Q)){var k=!1;if(i[Q].length!==1&&w!==i[Q].length-1){if((m+2)*(U+2)+2>A)continue e;B+=i[Q][w],k=!0,b=Q,Q--}else{B=(B+=i[Q][w]+" ").substr(B.length-1)==" "?B.substr(0,B.length-1):B;var K=parseInt(Q),ee=d(K,B,c),q=Q>=i.length-1;if(ee&&!q){B+=" ",w=0;continue}if(ee||q){if(q)b=K;else if(t.multiline&&(m+2)*(U+2)+2>A)continue e}else{if(!t.multiline||(m+2)*(U+2)+2>A)continue e;b=K}}for(var G="",W=j;W<=b;W++){var he=i[W];if(t.multiline){if(W===b){G+=he[w]+" ",w=(w+1)%he.length;continue}if(W===j){G+=he[he.length-1]+" ";continue}}G+=he[0]+" "}switch(G=G.substr(G.length-1)==" "?G.substr(0,G.length-1):G,o=ry(G,t,c).width,t.textAlign){case"right":h=u-o-2;break;case"center":h=(u-o)/2;break;default:h=2}s+=ar(h)+" "+ar(p)+` Td
`,s+="("+Fh(G)+`) Tj
`,s+=-ar(h)+` 0 Td
`,p=-(c+2),o=0,j=k?b:b+1,U++,B=""}break}return r.text=s,r.fontSize=c,r},ry=function(t,s,n){var r=s.scope.internal.getFont(s.fontName,s.fontStyle),i=s.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:s.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},rq={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},aq=function(t,s){var n={type:"reference",object:t};s.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&s.internal.getPageInfo(t.page).pageContext.annotations.push(n)},iq=function(t,s){if(s.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(nd.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(rq)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Uj=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new aR,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var c=r[i];c.objId=void 0,c.hasAnnotation&&aq(c,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var c=!r;for(var A in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(A)){var u=r[A],d=[],h=u.Rect;if(u.Rect&&(u.Rect=sq(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=pn.createDefaultAppearanceStream(u),wa(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(d=u.getKeyValueListForStream()),u.Rect=h,u.hasAppearanceStream&&!u.appearanceStreamContent){var o=nq(u);d.push({key:"AP",value:"<</N "+o+">>"}),i.internal.acroformPlugin.xForms.push(o)}if(u.appearanceStreamContent){var m="";for(var y in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(y)){var p=u.appearanceStreamContent[y];if(m+="/"+y+" ",m+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var A in p)if(p.hasOwnProperty(A)){var j=p[A];typeof j=="function"&&(j=j.call(i,u)),m+="/"+A+" "+j+" ",i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j)}}else typeof(j=p)=="function"&&(j=j.call(i,u)),m+="/"+A+" "+j,i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j);m+=">>"}d.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:d,objectId:u.objId}),i.internal.out("endobj")}c&&(function(b,w){for(var B in b)if(b.hasOwnProperty(B)){var U=B,Q=b[B];w.internal.newObjectDeferredBegin(Q.objId,!0),wa(Q)==="object"&&typeof Q.putStream=="function"&&Q.putStream(),delete b[U]}})(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},nR=Ni.__acroform__.arrayToPdfArray=function(t,s,n){var r=function(A){return A};if(Array.isArray(t)){for(var i="[",c=0;c<t.length;c++)switch(c!==0&&(i+=" "),wa(t[c])){case"boolean":case"number":case"object":i+=t[c].toString();break;case"string":t[c].substr(0,1)!=="/"?(s!==void 0&&n&&(r=n.internal.getEncryptor(s)),i+="("+Fh(r(t[c].toString()))+")"):i+=t[c].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ov=function(t,s,n){var r=function(i){return i};return s!==void 0&&n&&(r=n.internal.getEncryptor(s)),(t=t||"").toString(),"("+Fh(r(t))+")"},Od=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Od.prototype.toString=function(){return this.objId+" 0 R"},Od.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Od.prototype.getKeyValueListForStream=function(){var t=[],s=Object.getOwnPropertyNames(this).filter(function(c){return c!="content"&&c!="appearanceStreamContent"&&c!="scope"&&c!="objId"&&c.substring(0,1)!="_"});for(var n in s)if(Object.getOwnPropertyDescriptor(this,s[n]).configurable===!1){var r=s[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:nR(i,this.objId,this.scope)}):i instanceof Od?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var rR=function(){Od.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,s=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return s},set:function(n){s=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Il(rR,Od);var aR=function(){Od.call(this);var t,s=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return s.length>0?s:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return s}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Fh(n(t))+")"}},set:function(n){t=n}})};Il(aR,Od);var nd=function t(){Od.call(this);var s=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return s},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute F supplied.');s=B}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Li(s,3)},set:function(B){B?this.F=Di(s,3):this.F=Qi(s,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute Ff supplied.');n=B}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(B){r=B!==void 0?B:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(B){r[0]=B}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(B){r[1]=B}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(B){r[2]=B}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(B){r[3]=B}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(B){switch(B){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=B;break;default:throw new Error('Invalid value "'+B+'" for attribute FT supplied.')}}});var c=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!c||c.length<1){if(this instanceof tx)return;c="FieldObject"+t.FieldNum++}var B=function(U){return U};return this.scope&&(B=this.scope.internal.getEncryptor(this.objId)),"("+Fh(B(c))+")"},set:function(B){c=B.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return c},set:function(B){c=B}});var A="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return A},set:function(B){A=B}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(B){u=B}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(B){d=B}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/Uj:h},set:function(B){h=B}});var o="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return o},set:function(B){o=B}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof tx||this instanceof fu))return Ov(m,this.objId,this.scope)},set:function(B){B=B.toString(),m=B}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof ro==0?Ov(y,this.objId,this.scope):y},set:function(B){B=B.toString(),y=this instanceof ro==0?B.substr(0,1)==="("?Af(B.substr(1,B.length-2)):Af(B):B}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ro==1?Af(y.substr(1,y.length-1)):y},set:function(B){B=B.toString(),y=this instanceof ro==1?"/"+B:B}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(B){this.V=B}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ro==0?Ov(p,this.objId,this.scope):p},set:function(B){B=B.toString(),p=this instanceof ro==0?B.substr(0,1)==="("?Af(B.substr(1,B.length-2)):Af(B):B}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ro==1?Af(p.substr(1,p.length-1)):p},set:function(B){B=B.toString(),p=this instanceof ro==1?"/"+B:B}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(B){B=!!B,b=B}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(B){j=B}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,1)},set:function(B){B?this.Ff=Di(this.Ff,1):this.Ff=Qi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,2)},set:function(B){B?this.Ff=Di(this.Ff,2):this.Ff=Qi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,3)},set:function(B){B?this.Ff=Di(this.Ff,3):this.Ff=Qi(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(B){if([0,1,2].indexOf(B)===-1)throw new Error('Invalid value "'+B+'" for attribute Q supplied.');w=B}}),Object.defineProperty(this,"textAlign",{get:function(){var B;switch(w){case 0:default:B="left";break;case 1:B="center";break;case 2:B="right"}return B},configurable:!0,enumerable:!0,set:function(B){switch(B){case"right":case 2:w=2;break;case"center":case 1:w=1;break;default:w=0}}})};Il(nd,Od);var uh=function(){nd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var s=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nR(s,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=(function(c,A,u){u||(u=1);for(var d,h=[];d=A.exec(c);)h.push(d[u]);return h})(r,/\((.*?)\)/g)),s=i}}),this.getOptions=function(){return s},this.setOptions=function(n){s=n,this.sort&&s.sort()},this.addOption=function(n){n=(n=n||"").toString(),s.push(n),this.sort&&s.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();s.indexOf(n)!==-1&&(s.splice(s.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,18)},set:function(n){n?this.Ff=Di(this.Ff,18):this.Ff=Qi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Di(this.Ff,19):this.Ff=Qi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,20)},set:function(n){n?(this.Ff=Di(this.Ff,20),s.sort()):this.Ff=Qi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,22)},set:function(n){n?this.Ff=Di(this.Ff,22):this.Ff=Qi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,23)},set:function(n){n?this.Ff=Di(this.Ff,23):this.Ff=Qi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,27)},set:function(n){n?this.Ff=Di(this.Ff,27):this.Ff=Qi(this.Ff,27)}}),this.hasAppearanceStream=!1};Il(uh,nd);var hh=function(){uh.call(this),this.fontName="helvetica",this.combo=!1};Il(hh,uh);var fh=function(){hh.call(this),this.combo=!0};Il(fh,hh);var nm=function(){fh.call(this),this.edit=!0};Il(nm,fh);var ro=function(){nd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,15)},set:function(n){n?this.Ff=Di(this.Ff,15):this.Ff=Qi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,16)},set:function(n){n?this.Ff=Di(this.Ff,16):this.Ff=Qi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,17)},set:function(n){n?this.Ff=Di(this.Ff,17):this.Ff=Qi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,26)},set:function(n){n?this.Ff=Di(this.Ff,26):this.Ff=Qi(this.Ff,26)}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(c){return c};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(s).length!==0){var r,i=[];for(r in i.push("<<"),s)i.push("/"+r+" ("+Fh(n(s[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){wa(n)==="object"&&(s=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(n){typeof n=="string"&&(s.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Il(ro,nd);var rm=function(){ro.call(this),this.pushButton=!0};Il(rm,ro);var ph=function(){ro.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s!==void 0?s:[]}})};Il(ph,ro);var tx=function(){var t,s;nd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return s},set:function(i){s=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var c,A=[];for(c in A.push("<<"),r)A.push("/"+c+" ("+Fh(i(r[c]))+")");return A.push(">>"),A.join(`
`)},set:function(i){wa(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=pn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Il(tx,nd),ph.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var s in this.Kids)if(this.Kids.hasOwnProperty(s)){var n=this.Kids[s];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},ph.prototype.createOption=function(t){var s=new tx;return s.Parent=this,s.optionName=t,this.Kids.push(s),oq.call(this.scope,s),s};var am=function(){ro.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=pn.CheckBox.createAppearanceStream()};Il(am,ro);var fu=function(){nd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,13)},set:function(s){s?this.Ff=Di(this.Ff,13):this.Ff=Qi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,21)},set:function(s){s?this.Ff=Di(this.Ff,21):this.Ff=Qi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,23)},set:function(s){s?this.Ff=Di(this.Ff,23):this.Ff=Qi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,24)},set:function(s){s?this.Ff=Di(this.Ff,24):this.Ff=Qi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,25)},set:function(s){s?this.Ff=Di(this.Ff,25):this.Ff=Qi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,26)},set:function(s){s?this.Ff=Di(this.Ff,26):this.Ff=Qi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(s){Number.isInteger(s)&&(t=s)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Il(fu,nd);var im=function(){fu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Li(this.Ff,14)},set:function(t){t?this.Ff=Di(this.Ff,14):this.Ff=Qi(this.Ff,14)}}),this.password=!0};Il(im,fu);var pn={CheckBox:{createAppearanceStream:function(){return{N:{On:pn.CheckBox.YesNormal},D:{On:pn.CheckBox.YesPushDown,Off:pn.CheckBox.OffPushDown}}},YesPushDown:function(t){var s=Fd(t);s.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),c=n1(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+ar(pn.internal.getWidth(t))+" "+ar(pn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+ar(c.fontSize)+" Tf "+i),n.push("BT"),n.push(c.text),n.push("ET"),n.push("Q"),n.push("EMC"),s.stream=n.join(`
`),s},YesNormal:function(t){var s=Fd(t);s.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],c=pn.internal.getHeight(t),A=pn.internal.getWidth(t),u=n1(t,t.caption);return i.push("1 g"),i.push("0 0 "+ar(A)+" "+ar(c)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ar(A-1)+" "+ar(c-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+ar(u.fontSize)+" Tf "+r),i.push(u.text),i.push("ET"),i.push("Q"),s.stream=i.join(`
`),s},OffPushDown:function(t){var s=Fd(t);s.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ar(pn.internal.getWidth(t))+" "+ar(pn.internal.getHeight(t))+" re"),n.push("f"),s.stream=n.join(`
`),s}},RadioButton:{Circle:{createAppearanceStream:function(t){var s={D:{Off:pn.RadioButton.Circle.OffPushDown},N:{}};return s.N[t]=pn.RadioButton.Circle.YesNormal,s.D[t]=pn.RadioButton.Circle.YesPushDown,s},getCA:function(){return"l"},YesNormal:function(t){var s=Fd(t);s.scope=t.scope;var n=[],r=pn.internal.getWidth(t)<=pn.internal.getHeight(t)?pn.internal.getWidth(t)/4:pn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=pn.internal.Bezier_C,c=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+ru(pn.internal.getWidth(t)/2)+" "+ru(pn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),n.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),n.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),n.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),n.push("f"),n.push("Q"),s.stream=n.join(`
`),s},YesPushDown:function(t){var s=Fd(t);s.scope=t.scope;var n=[],r=pn.internal.getWidth(t)<=pn.internal.getHeight(t)?pn.internal.getWidth(t)/4:pn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),c=Number((i*pn.internal.Bezier_C).toFixed(5)),A=Number((r*pn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ru(pn.internal.getWidth(t)/2)+" "+ru(pn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+c+" "+c+" "+i+" 0 "+i+" c"),n.push("-"+c+" "+i+" -"+i+" "+c+" -"+i+" 0 c"),n.push("-"+i+" -"+c+" -"+c+" -"+i+" 0 -"+i+" c"),n.push(c+" -"+i+" "+i+" -"+c+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+ru(pn.internal.getWidth(t)/2)+" "+ru(pn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+A+" "+A+" "+r+" 0 "+r+" c"),n.push("-"+A+" "+r+" -"+r+" "+A+" -"+r+" 0 c"),n.push("-"+r+" -"+A+" -"+A+" -"+r+" 0 -"+r+" c"),n.push(A+" -"+r+" "+r+" -"+A+" "+r+" 0 c"),n.push("f"),n.push("Q"),s.stream=n.join(`
`),s},OffPushDown:function(t){var s=Fd(t);s.scope=t.scope;var n=[],r=pn.internal.getWidth(t)<=pn.internal.getHeight(t)?pn.internal.getWidth(t)/4:pn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),c=Number((i*pn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ru(pn.internal.getWidth(t)/2)+" "+ru(pn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+c+" "+c+" "+i+" 0 "+i+" c"),n.push("-"+c+" "+i+" -"+i+" "+c+" -"+i+" 0 c"),n.push("-"+i+" -"+c+" -"+c+" -"+i+" 0 -"+i+" c"),n.push(c+" -"+i+" "+i+" -"+c+" "+i+" 0 c"),n.push("f"),n.push("Q"),s.stream=n.join(`
`),s}},Cross:{createAppearanceStream:function(t){var s={D:{Off:pn.RadioButton.Cross.OffPushDown},N:{}};return s.N[t]=pn.RadioButton.Cross.YesNormal,s.D[t]=pn.RadioButton.Cross.YesPushDown,s},getCA:function(){return"8"},YesNormal:function(t){var s=Fd(t);s.scope=t.scope;var n=[],r=pn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+ar(pn.internal.getWidth(t)-2)+" "+ar(pn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(ar(r.x1.x)+" "+ar(r.x1.y)+" m"),n.push(ar(r.x2.x)+" "+ar(r.x2.y)+" l"),n.push(ar(r.x4.x)+" "+ar(r.x4.y)+" m"),n.push(ar(r.x3.x)+" "+ar(r.x3.y)+" l"),n.push("s"),n.push("Q"),s.stream=n.join(`
`),s},YesPushDown:function(t){var s=Fd(t);s.scope=t.scope;var n=pn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+ar(pn.internal.getWidth(t))+" "+ar(pn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ar(pn.internal.getWidth(t)-2)+" "+ar(pn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(ar(n.x1.x)+" "+ar(n.x1.y)+" m"),r.push(ar(n.x2.x)+" "+ar(n.x2.y)+" l"),r.push(ar(n.x4.x)+" "+ar(n.x4.y)+" m"),r.push(ar(n.x3.x)+" "+ar(n.x3.y)+" l"),r.push("s"),r.push("Q"),s.stream=r.join(`
`),s},OffPushDown:function(t){var s=Fd(t);s.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ar(pn.internal.getWidth(t))+" "+ar(pn.internal.getHeight(t))+" re"),n.push("f"),s.stream=n.join(`
`),s}}},createDefaultAppearanceStream:function(t){var s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+s+" "+t.fontSize+" Tf "+n}};pn.internal={Bezier_C:.551915024494,calculateCross:function(t){var s=pn.internal.getWidth(t),n=pn.internal.getHeight(t),r=Math.min(s,n);return{x1:{x:(s-r)/2,y:(n-r)/2+r},x2:{x:(s-r)/2+r,y:(n-r)/2},x3:{x:(s-r)/2,y:(n-r)/2},x4:{x:(s-r)/2+r,y:(n-r)/2+r}}}},pn.internal.getWidth=function(t){var s=0;return wa(t)==="object"&&(s=EB(t.Rect[2])),s},pn.internal.getHeight=function(t){var s=0;return wa(t)==="object"&&(s=EB(t.Rect[3])),s};var oq=Ni.addField=function(t){if(iq(this,t),!(t instanceof nd))throw new Error("Invalid argument passed to jsPDF.addField.");var s;return(s=t).scope.internal.acroformPlugin.printedOut&&(s.scope.internal.acroformPlugin.printedOut=!1,s.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),s.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(s),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Ni.AcroFormChoiceField=uh,Ni.AcroFormListBox=hh,Ni.AcroFormComboBox=fh,Ni.AcroFormEditBox=nm,Ni.AcroFormButton=ro,Ni.AcroFormPushButton=rm,Ni.AcroFormRadioButton=ph,Ni.AcroFormCheckBox=am,Ni.AcroFormTextField=fu,Ni.AcroFormPasswordField=im,Ni.AcroFormAppearance=pn,Ni.AcroForm={ChoiceField:uh,ListBox:hh,ComboBox:fh,EditBox:nm,Button:ro,PushButton:rm,RadioButton:ph,CheckBox:am,TextField:fu,PasswordField:im,Appearance:pn},Sn.AcroForm={ChoiceField:uh,ListBox:hh,ComboBox:fh,EditBox:nm,Button:ro,PushButton:rm,RadioButton:ph,CheckBox:am,TextField:fu,PasswordField:im,Appearance:pn};var lq=Sn.AcroForm;function iR(t){return t.reduce(function(s,n,r){return s[n]=r,s},{})}(function(t){var s="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(Z,ie){var ce,ae,de,se,re,te=n;if((ie=ie||n)==="RGBA"||Z.data!==void 0&&Z.data instanceof Uint8ClampedArray&&"height"in Z&&"width"in Z)return"RGBA";if(ee(Z))for(re in r)for(de=r[re],ce=0;ce<de.length;ce+=1){for(se=!0,ae=0;ae<de[ce].length;ae+=1)if(de[ce][ae]!==void 0&&de[ce][ae]!==Z[ae]){se=!1;break}if(se===!0){te=re;break}}else for(re in r)for(de=r[re],ce=0;ce<de.length;ce+=1){for(se=!0,ae=0;ae<de[ce].length;ae+=1)if(de[ce][ae]!==void 0&&de[ce][ae]!==Z.charCodeAt(ae)){se=!1;break}if(se===!0){te=re;break}}return te===n&&ie!==n&&(te=ie),te},c=function Z(ie){for(var ce=this.internal.write,ae=this.internal.putStream,de=(0,this.internal.getFilters)();de.indexOf("FlateEncode")!==-1;)de.splice(de.indexOf("FlateEncode"),1);ie.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:ie.width}),se.push({key:"Height",value:ie.height}),ie.colorSpace===B.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ie.palette.length/3-1)+" "+("sMask"in ie&&ie.sMask!==void 0?ie.objectId+2:ie.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+ie.colorSpace}),ie.colorSpace===B.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:ie.bitsPerComponent}),"decodeParameters"in ie&&ie.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+ie.decodeParameters+">>"}),"transparency"in ie&&Array.isArray(ie.transparency)&&ie.transparency.length>0){for(var re="",te=0,be=ie.transparency.length;te<be;te++)re+=ie.transparency[te]+" "+ie.transparency[te]+" ";se.push({key:"Mask",value:"["+re+"]"})}ie.sMask!==void 0&&se.push({key:"SMask",value:ie.objectId+1+" 0 R"});var He=ie.filter!==void 0?["/"+ie.filter]:void 0;if(ae({data:ie.data,additionalKeyValues:se,alreadyAppliedFilters:He,objectId:ie.objectId}),ce("endobj"),"sMask"in ie&&ie.sMask!==void 0){var pe,Y=(pe=ie.sMaskBitsPerComponent)!==null&&pe!==void 0?pe:ie.bitsPerComponent,me={width:ie.width,height:ie.height,colorSpace:"DeviceGray",bitsPerComponent:Y,data:ie.sMask};"filter"in ie&&(me.decodeParameters="/Predictor ".concat(ie.predictor," /Colors 1 /BitsPerComponent ").concat(Y," /Columns ").concat(ie.width),me.filter=ie.filter),Z.call(this,me)}if(ie.colorSpace===B.INDEXED){var Se=this.internal.newObject();ae({data:G(new Uint8Array(ie.palette)),objectId:Se}),ce("endobj")}},A=function(){var Z=this.internal.collections[s+"images"];for(var ie in Z)c.call(this,Z[ie])},u=function(){var Z,ie=this.internal.collections[s+"images"],ce=this.internal.write;for(var ae in ie)ce("/I"+(Z=ie[ae]).index,Z.objectId,"0","R")},d=function(){this.internal.collections[s+"images"]||(this.internal.collections[s+"images"]={},this.internal.events.subscribe("putResources",A),this.internal.events.subscribe("putXobjectDict",u))},h=function(){var Z=this.internal.collections[s+"images"];return d.call(this),Z},o=function(){return Object.keys(this.internal.collections[s+"images"]).length},m=function(Z){return typeof t["process"+Z.toUpperCase()]=="function"},y=function(Z){return wa(Z)==="object"&&Z.nodeType===1},p=function(Z,ie){if(Z.nodeName==="IMG"&&Z.hasAttribute("src")){var ce=""+Z.getAttribute("src");if(ce.indexOf("data:image/")===0)return Cy(unescape(ce).split("base64,").pop());var ae=t.loadFile(ce,!0);if(ae!==void 0)return ae}if(Z.nodeName==="CANVAS"){if(Z.width===0||Z.height===0)throw new Error("Given canvas must have data. Canvas width: "+Z.width+", height: "+Z.height);var de;switch(ie){case"PNG":de="image/png";break;case"WEBP":de="image/webp";break;default:de="image/jpeg"}return Cy(Z.toDataURL(de,1).split("base64,").pop())}},j=function(Z){var ie=this.internal.collections[s+"images"];if(ie){for(var ce in ie)if(Z===ie[ce].alias)return ie[ce]}},b=function(Z,ie,ce){return Z||ie||(Z=-96,ie=-96),Z<0&&(Z=-1*ce.width*72/Z/this.internal.scaleFactor),ie<0&&(ie=-1*ce.height*72/ie/this.internal.scaleFactor),Z===0&&(Z=ie*ce.width/ce.height),ie===0&&(ie=Z*ce.height/ce.width),[Z,ie]},w=function(Z,ie,ce,ae,de,se){var re=b.call(this,ce,ae,de),te=this.internal.getCoordinateString,be=this.internal.getVerticalCoordinateString,He=h.call(this);if(ce=re[0],ae=re[1],He[de.index]=de,se){se*=Math.PI/180;var pe=Math.cos(se),Y=Math.sin(se),me=function(je){return je.toFixed(4)},Se=[me(pe),me(Y),me(-1*Y),me(pe),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,te(Z),be(ie+ae),"cm"].join(" ")),this.internal.write(Se.join(" ")),this.internal.write([te(ce),"0","0",te(ae),"0","0","cm"].join(" "))):this.internal.write([te(ce),"0","0",te(ae),te(Z),be(ie+ae),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+de.index+" Do"),this.internal.write("Q")},B=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var U=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Q=t.__addimage__.sHashCode=function(Z){var ie,ce,ae=0;if(typeof Z=="string")for(ce=Z.length,ie=0;ie<ce;ie++)ae=(ae<<5)-ae+Z.charCodeAt(ie),ae|=0;else if(ee(Z))for(ce=Z.byteLength/2,ie=0;ie<ce;ie++)ae=(ae<<5)-ae+Z[ie],ae|=0;return ae},k=t.__addimage__.validateStringAsBase64=function(Z){(Z=Z||"").toString().trim();var ie=!0;return Z.length===0&&(ie=!1),Z.length%4!=0&&(ie=!1),/^[A-Za-z0-9+/]+$/.test(Z.substr(0,Z.length-2))===!1&&(ie=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Z.substr(-2))===!1&&(ie=!1),ie},K=t.__addimage__.extractImageFromDataUrl=function(Z){if(Z==null||!(Z=Z.trim()).startsWith("data:"))return null;var ie=Z.indexOf(",");return ie<0?null:Z.substring(0,ie).trim().endsWith("base64")?Z.substring(ie+1):null};t.__addimage__.isArrayBuffer=function(Z){return Z instanceof ArrayBuffer};var ee=t.__addimage__.isArrayBufferView=function(Z){return Z instanceof Int8Array||Z instanceof Uint8Array||Z instanceof Uint8ClampedArray||Z instanceof Int16Array||Z instanceof Uint16Array||Z instanceof Int32Array||Z instanceof Uint32Array||Z instanceof Float32Array||Z instanceof Float64Array},q=t.__addimage__.binaryStringToUint8Array=function(Z){for(var ie=Z.length,ce=new Uint8Array(ie),ae=0;ae<ie;ae++)ce[ae]=Z.charCodeAt(ae);return ce},G=t.__addimage__.arrayBufferToBinaryString=function(Z){for(var ie="",ce=ee(Z)?Z:new Uint8Array(Z),ae=0;ae<ce.length;ae+=8192)ie+=String.fromCharCode.apply(null,ce.subarray(ae,ae+8192));return ie};t.addImage=function(){var Z,ie,ce,ae,de,se,re,te,be;if(typeof arguments[1]=="number"?(ie=n,ce=arguments[1],ae=arguments[2],de=arguments[3],se=arguments[4],re=arguments[5],te=arguments[6],be=arguments[7]):(ie=arguments[1],ce=arguments[2],ae=arguments[3],de=arguments[4],se=arguments[5],re=arguments[6],te=arguments[7],be=arguments[8]),wa(Z=arguments[0])==="object"&&!y(Z)&&"imageData"in Z){var He=Z;Z=He.imageData,ie=He.format||ie||n,ce=He.x||ce||0,ae=He.y||ae||0,de=He.w||He.width||de,se=He.h||He.height||se,re=He.alias||re,te=He.compression||te,be=He.rotation||He.angle||be}var pe=this.internal.getFilters();if(te===void 0&&pe.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(ce)||isNaN(ae))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var Y=W.call(this,Z,ie,re,te);return w.call(this,ce,ae,de,se,Y,be),this};var W=function(Z,ie,ce,ae){var de,se,re;if(typeof Z=="string"&&i(Z)===n){Z=unescape(Z);var te=he(Z,!1);(te!==""||(te=t.loadFile(Z,!0))!==void 0)&&(Z=te)}if(y(Z)&&(Z=p(Z,ie)),ie=i(Z,ie),!m(ie))throw new Error("addImage does not support files of type '"+ie+"', please ensure that a plugin for '"+ie+"' support is added.");if(((re=ce)==null||re.length===0)&&(ce=(function(be){return typeof be=="string"||ee(be)?Q(be):ee(be.data)?Q(be.data):null})(Z)),(de=j.call(this,ce))||(Z instanceof Uint8Array||ie==="RGBA"||(se=Z,Z=q(Z)),de=this["process"+ie.toUpperCase()](Z,o.call(this),ce,(function(be){return be&&typeof be=="string"&&(be=be.toUpperCase()),be in t.image_compression?be:U.NONE})(ae),se)),!de)throw new Error("An unknown error occurred whilst processing the image.");return de},he=t.__addimage__.convertBase64ToBinaryString=function(Z,ie){ie=typeof ie!="boolean"||ie;var ce,ae="";if(typeof Z=="string"){var de;ce=(de=K(Z))!==null&&de!==void 0?de:Z;try{ae=Cy(ce)}catch(se){if(ie)throw k(ce)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ae};t.getImageProperties=function(Z){var ie,ce,ae="";if(y(Z)&&(Z=p(Z)),typeof Z=="string"&&i(Z)===n&&((ae=he(Z,!1))===""&&(ae=t.loadFile(Z)||""),Z=ae),ce=i(Z),!m(ce))throw new Error("addImage does not support files of type '"+ce+"', please ensure that a plugin for '"+ce+"' support is added.");if(Z instanceof Uint8Array||(Z=q(Z)),!(ie=this["process"+ce.toUpperCase()](Z)))throw new Error("An unknown error occurred whilst processing the image");return ie.fileType=ce,ie}})(Sn.API),(function(t){var s=function(n){if(n!==void 0&&n!="")return!0};Sn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,c,A=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,o=!1,m=0;m<h.length&&!o;m++)switch((r=h[m]).type){case"link":(s(r.options.url)||s(r.options.pageNumber))&&(o=!0);break;case"reference":case"text":case"freetext":o=!0}if(o!=0){this.internal.write("/Annots [");for(var y=0;y<h.length;y++){r=h[y];var p=this.internal.pdfEscape,j=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),B=this.internal.getEncryptor(b.objId),U=r.title||"Note";c="<</Type /Annot /Subtype /Text "+(i="/Rect ["+A(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+A(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+p(B(r.contents))+")",c+=" /Popup "+w.objId+" 0 R",c+=" /P "+d.objId+" 0 R",c+=" /T ("+p(B(U))+") >>",b.content=c;var Q=b.objId+" 0 R";c="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+A(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+A(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+Q,r.open&&(c+=" /Open true"),c+=" >>",w.content=c,this.internal.write(b.objId,"0 R",w.objId,"0 R");break;case"freetext":i="/Rect ["+A(r.bounds.x)+" "+u(r.bounds.y)+" "+A(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var k=r.color||"#000000";c="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(j(r.contents))+")",c+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",c+=" /Border [0 0 0]",c+=" >>",this.internal.write(c);break;case"link":if(r.options.name){var K=this.annotations._nameMap[r.options.name];r.options.pageNumber=K.page,r.options.top=K.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",c="",r.options.url)c="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(j(r.options.url))+") >>";else if(r.options.pageNumber)switch(c="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":c+=" /Fit]";break;case"FitH":c+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,c+=" /FitV "+r.options.left+"]";break;default:var ee=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),c+=" /XYZ "+r.options.left+" "+ee+" "+r.options.zoom+"]"}c!=""&&(c+=" >>",this.internal.write(c))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,c,A){var u=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:d(n),y:h(r),w:d(n+i),h:h(r+c)},options:A,type:"link"})},t.textWithLink=function(n,r,i,c){var A,u,d=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(c.maxWidth!==void 0){u=c.maxWidth;var o=this.splitTextToSize(n,u).length;A=Math.ceil(h*o)}else u=d,A=h;return this.text(n,r,i,c),i+=.2*h,c.align==="center"&&(r-=d/2),c.align==="right"&&(r-=d),this.link(r,i-h,u,A,c),d},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(Sn.API),(function(t){var s={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var c=t.__arabicParser__.isInArabicSubstitutionA=function(b){return s[b.charCodeAt(0)]!==void 0},A=t.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},u=t.__arabicParser__.isArabicEndLetter=function(b){return A(b)&&c(b)&&s[b.charCodeAt(0)].length<=2},d=t.__arabicParser__.isArabicAlfLetter=function(b){return A(b)&&i.indexOf(b.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return A(b)&&c(b)&&s[b.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(b){return A(b)&&c(b)&&s[b.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(b){return A(b)&&c(b)&&s[b.charCodeAt(0)].length>=3};var o=t.__arabicParser__.arabicLetterHasMedialForm=function(b){return A(b)&&c(b)&&s[b.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(b){var w=0,B=n,U="",Q=0;for(w=0;w<b.length;w+=1)B[b.charCodeAt(w)]!==void 0?(Q++,typeof(B=B[b.charCodeAt(w)])=="number"&&(U+=String.fromCharCode(B),B=n,Q=0),w===b.length-1&&(B=n,U+=b.charAt(w-(Q-1)),w-=Q-1,Q=0)):(B=n,U+=b.charAt(w-Q),w-=Q,Q=0);return U};t.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&r[b.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(b,w,B){return A(b)?c(b)===!1?-1:!h(b)||!A(w)&&!A(B)||!A(B)&&u(w)||u(b)&&!A(w)||u(b)&&d(w)||u(b)&&u(w)?0:o(b)&&A(w)&&!u(w)&&A(B)&&h(B)?3:u(b)||!A(B)?1:2:-1},p=function(b){var w=0,B=0,U=0,Q="",k="",K="",ee=(b=b||"").split("\\s+"),q=[];for(w=0;w<ee.length;w+=1){for(q.push(""),B=0;B<ee[w].length;B+=1)Q=ee[w][B],k=ee[w][B-1],K=ee[w][B+1],A(Q)?(U=y(Q,k,K),q[w]+=U!==-1?String.fromCharCode(s[Q.charCodeAt(0)][U]):Q):q[w]+=Q;q[w]=m(q[w])}return q.join(" ")},j=t.__arabicParser__.processArabic=t.processArabic=function(){var b,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,B=[];if(Array.isArray(w)){var U=0;for(B=[],U=0;U<w.length;U+=1)Array.isArray(w[U])?B.push([p(w[U][0]),w[U][1],w[U][2]]):B.push([p(w[U])]);b=B}else b=p(w);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};t.events.push(["preProcessText",j])})(Sn.API),Sn.API.autoPrint=function(t){var s;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){s=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+s+" 0 R")})),this},(function(t){var s=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(u){n=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var c=[];Object.defineProperty(this,"childNodes",{get:function(){return c},set:function(u){c=u}});var A={};Object.defineProperty(this,"style",{get:function(){return A},set:function(u){A=u}}),Object.defineProperty(this,"parentNode",{})};s.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},s.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new s,this.canvas.pdf=this}])})(Sn.API),(function(t){var s={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},s),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new c,this.internal.__cell__.pages=1},c=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(b){h=b}});var o=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return o},set:function(b){o=b}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(b){y=b}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(b){j=b}}),this};c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},c.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(d){return r.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},t.getTextDimensions=function(d,h){r.call(this);var o=(h=h||{}).fontSize||this.getFontSize(),m=h.font||this.getFont(),y=h.scaleFactor||this.internal.scaleFactor,p=0,j=0,b=0,w=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var B=h.maxWidth;B>0?typeof d=="string"?d=this.splitTextToSize(d,B):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(Q,k){return Q.concat(w.splitTextToSize(k,B))},[])):d=Array.isArray(d)?d:[d];for(var U=0;U<d.length;U++)p<(b=this.getStringUnitWidth(d[U],{font:m})*o)&&(p=b);return p!==0&&(j=d.length),{w:p/=y,h:Math.max((j*o*this.getLineHeightFactor()-o*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var d=this.internal.__cell__.margins||s;return this.internal.__cell__.lastCell=new c(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var A=t.cell=function(){var d;d=arguments[0]instanceof c?arguments[0]:new c(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var h=this.internal.__cell__.lastCell,o=this.internal.__cell__.padding,m=this.internal.__cell__.margins||s,y=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===d.lineNumber?(d.x=(h.x||0)+(h.width||0),d.y=h.y||0):h.y+h.height+d.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=m.top,p&&y&&(this.printHeaderRow(d.lineNumber,!0),d.y+=y[0].height)):d.y=h.y+h.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,n===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-o,d.y+o,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+o,{align:"center",baseline:"top",maxWidth:d.width-o-o}):this.text(d.text,d.x+o,d.y+o,{align:"left",baseline:"top",maxWidth:d.width-o-o})),this.internal.__cell__.lastCell=d,this};t.table=function(d,h,o,m,y){if(r.call(this),!o)throw new Error("No data for PDF table.");var p,j,b,w,B=[],U=[],Q=[],k={},K={},ee=[],q=[],G=(y=y||{}).autoSize||!1,W=y.printHeaders!==!1,he=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,Z=y.margins||Object.assign({width:this.getPageWidth()},s),ie=typeof y.padding=="number"?y.padding:3,ce=y.headerBackgroundColor||"#c8c8c8",ae=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=W,this.internal.__cell__.margins=Z,this.internal.__cell__.table_font_size=he,this.internal.__cell__.padding=ie,this.internal.__cell__.headerBackgroundColor=ce,this.internal.__cell__.headerTextColor=ae,this.setFontSize(he),m==null)U=B=Object.keys(o[0]),Q=B.map(function(){return"left"});else if(Array.isArray(m)&&wa(m[0])==="object")for(B=m.map(function(He){return He.name}),U=m.map(function(He){return He.prompt||He.name||""}),Q=m.map(function(He){return He.align||"left"}),p=0;p<m.length;p+=1)K[m[p].name]=.7499990551181103*m[p].width;else Array.isArray(m)&&typeof m[0]=="string"&&(U=B=m,Q=B.map(function(){return"left"}));if(G||Array.isArray(m)&&typeof m[0]=="string")for(p=0;p<B.length;p+=1){for(k[w=B[p]]=o.map(function(He){return He[w]}),this.setFont(void 0,"bold"),ee.push(this.getTextDimensions(U[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=k[w],this.setFont(void 0,"normal"),b=0;b<j.length;b+=1)ee.push(this.getTextDimensions(j[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[w]=Math.max.apply(null,ee)+ie+ie,ee=[]}if(W){var de={};for(p=0;p<B.length;p+=1)de[B[p]]={},de[B[p]].text=U[p],de[B[p]].align=Q[p];var se=u.call(this,de,K);q=B.map(function(He){return new c(d,h,K[He],se,de[He].text,void 0,de[He].align)}),this.setTableHeaderRow(q),this.printHeaderRow(1,!1)}var re=m.reduce(function(He,pe){return He[pe.name]=pe.align,He},{});for(p=0;p<o.length;p+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:p,data:o[p]},this);var te=u.call(this,o[p],K);for(b=0;b<B.length;b+=1){var be=o[p][B[b]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:p,col:b,data:be},this),A.call(this,new c(d,h,K[B[b]],te,be,p+2,re[B[b]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=h,this};var u=function(d,h){var o=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(d).map(function(p){var j=d[p];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,h[p]-o-o)},this).map(function(p){return this.getLineHeightFactor()*p.length*m/y+o+o},this).reduce(function(p,j){return Math.max(p,j)},0)};t.setTableHeaderRow=function(d){r.call(this),this.internal.__cell__.tableHeaderRow=d},t.printHeaderRow=function(d,h){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var o;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new c(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){o=this.internal.__cell__.tableHeaderRow[p].clone(),h&&(o.y=this.internal.__cell__.margins.top||0,y.push(o)),o.lineNumber=d;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),A.call(this,o),this.setTextColor(j)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}})(Sn.API);var oR={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},lR=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],r1=iR(lR),cR=[100,200,300,400,500,600,700,800,900],cq=iR(cR);function Uv(t){var s=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(c){return oR[c=c||"normal"]?c:"normal"})(t.style),r=(function(c){return c?typeof c=="number"?c>=100&&c<=900&&c%100==0?c:400:/^\d00$/.test(c)?parseInt(c):c==="bold"?700:400:400})(t.weight),i=(function(c){return typeof r1[c=c||"normal"]=="number"?c:"normal"})(t.stretch);return{family:s,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:s,style:[i,n,r].join(" ")}}}function TB(t,s,n,r){var i;for(i=n;i>=0&&i<s.length;i+=r)if(t[s[i]])return t[s[i]];for(i=n;i>=0&&i<s.length;i-=r)if(t[s[i]])return t[s[i]]}var dq={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},FB={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function IB(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function RB(t){return t.trimLeft()}function Aq(t,s){for(var n=0;n<t.length;){if(t.charAt(n)===s)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function uq(t){var s=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return s===null?null:[s[0],t.substring(s[0].length)]}var ay,OB,UB,uf,iy,LB,DB,QB,Lv=["times"];function _B(t,s,n,r,i){var c=4,A=PB;switch(i){case Sn.API.image_compression.FAST:c=1,A=MB;break;case Sn.API.image_compression.MEDIUM:c=6,A=kB;break;case Sn.API.image_compression.SLOW:c=9,A=HB}t=(function(d,h,o,m){for(var y,p=d.length/h,j=new Uint8Array(d.length+p),b=[hq,MB,PB,kB,HB],w=0;w<p;w+=1){var B=w*h,U=d.subarray(B,B+h);if(m)j.set(m(U,o,y),B+w);else{for(var Q=b.length,k=[],K=0;K<Q;K+=1)k[K]=b[K](U,o,y);var ee=pq(k.concat());j.set(k[ee],B+w)}y=U}return j})(t,s,Math.ceil(n*r/8),A);var u=Xb(t,{level:c});return Sn.API.__addimage__.arrayBufferToBinaryString(u)}function hq(t){var s=Array.apply([],t);return s.unshift(0),s}function MB(t,s){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var c=t[i-s]||0;r[i+1]=t[i]-c+256&255}return r}function PB(t,s,n){var r=t.length,i=[];i[0]=2;for(var c=0;c<r;c+=1){var A=n&&n[c]||0;i[c+1]=t[c]-A+256&255}return i}function kB(t,s,n){var r=t.length,i=[];i[0]=3;for(var c=0;c<r;c+=1){var A=t[c-s]||0,u=n&&n[c]||0;i[c+1]=t[c]+256-(A+u>>>1)&255}return i}function HB(t,s,n){var r=t.length,i=[];i[0]=4;for(var c=0;c<r;c+=1){var A=fq(t[c-s]||0,n&&n[c]||0,n&&n[c-s]||0);i[c+1]=t[c]-A+256&255}return i}function fq(t,s,n){if(t===s&&s===n)return t;var r=Math.abs(s-n),i=Math.abs(t-n),c=Math.abs(t+s-n-n);return r<=i&&r<=c?t:i<=c?s:n}function pq(t){var s=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return s.indexOf(Math.min.apply(null,s))}function Dv(t,s,n){var r=s*n,i=Math.floor(r/8),c=16-(r-8*i+n),A=(1<<n)-1;return dR(t,i)>>c&A}function zB(t,s,n,r){var i=n*r,c=Math.floor(i/8),A=16-(i-8*c+r),u=(1<<r)-1,d=(s&u)<<A;(function(h,o,m){if(o+1<h.byteLength)h.setUint16(o,m,!1);else{var y=m>>8&255;h.setUint8(o,y)}})(t,c,dR(t,c)&~(u<<A)&65535|d)}function dR(t,s){return s+1<t.byteLength?t.getUint16(s,!1):t.getUint8(s)<<8}function mq(t){var s=0;if(t[s++]!==71||t[s++]!==73||t[s++]!==70||t[s++]!==56||(t[s++]+1&253)!=56||t[s++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[s++]|t[s++]<<8,r=t[s++]|t[s++]<<8,i=t[s++],c=i>>7,A=1<<1+(7&i);t[s++],t[s++];var u=null,d=null;c&&(u=s,d=A,s+=3*A);var h=!0,o=[],m=0,y=null,p=0,j=null;for(this.width=n,this.height=r;h&&s<t.length;)switch(t[s++]){case 33:switch(t[s++]){case 255:if(t[s]!==11||t[s+1]==78&&t[s+2]==69&&t[s+3]==84&&t[s+4]==83&&t[s+5]==67&&t[s+6]==65&&t[s+7]==80&&t[s+8]==69&&t[s+9]==50&&t[s+10]==46&&t[s+11]==48&&t[s+12]==3&&t[s+13]==1&&t[s+16]==0)s+=14,j=t[s++]|t[s++]<<8,s++;else for(s+=12;;){if(!((Z=t[s++])>=0))throw Error("Invalid block size");if(Z===0)break;s+=Z}break;case 249:if(t[s++]!==4||t[s+4]!==0)throw new Error("Invalid graphics extension block.");var b=t[s++];m=t[s++]|t[s++]<<8,y=t[s++],1&b||(y=null),p=b>>2&7,s++;break;case 254:for(;;){if(!((Z=t[s++])>=0))throw Error("Invalid block size");if(Z===0)break;s+=Z}break;default:throw new Error("Unknown graphic control label: 0x"+t[s-1].toString(16))}break;case 44:var w=t[s++]|t[s++]<<8,B=t[s++]|t[s++]<<8,U=t[s++]|t[s++]<<8,Q=t[s++]|t[s++]<<8,k=t[s++],K=k>>6&1,ee=1<<1+(7&k),q=u,G=d,W=!1;k>>7&&(W=!0,q=s,G=ee,s+=3*ee);var he=s;for(s++;;){var Z;if(!((Z=t[s++])>=0))throw Error("Invalid block size");if(Z===0)break;s+=Z}o.push({x:w,y:B,width:U,height:Q,has_local_palette:W,palette_offset:q,palette_size:G,data_offset:he,data_length:s-he,transparent_index:y,interlaced:!!K,delay:m,disposal:p});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[s-1].toString(16))}this.numFrames=function(){return o.length},this.loopCount=function(){return j},this.frameInfo=function(ie){if(ie<0||ie>=o.length)throw new Error("Frame index out of range.");return o[ie]},this.decodeAndBlitFrameBGRA=function(ie,ce){var ae=this.frameInfo(ie),de=ae.width*ae.height,se=new Uint8Array(de);KB(t,ae.data_offset,se,de);var re=ae.palette_offset,te=ae.transparent_index;te===null&&(te=256);var be=ae.width,He=n-be,pe=be,Y=4*(ae.y*n+ae.x),me=4*((ae.y+ae.height)*n+ae.x),Se=Y,je=4*He;ae.interlaced===!0&&(je+=4*n*7);for(var Le=8,ge=0,ye=se.length;ge<ye;++ge){var we=se[ge];if(pe===0&&(pe=be,(Se+=je)>=me&&(je=4*He+4*n*(Le-1),Se=Y+(be+He)*(Le<<1),Le>>=1)),we===te)Se+=4;else{var Ne=t[re+3*we],ke=t[re+3*we+1],Be=t[re+3*we+2];ce[Se++]=Be,ce[Se++]=ke,ce[Se++]=Ne,ce[Se++]=255}--pe}},this.decodeAndBlitFrameRGBA=function(ie,ce){var ae=this.frameInfo(ie),de=ae.width*ae.height,se=new Uint8Array(de);KB(t,ae.data_offset,se,de);var re=ae.palette_offset,te=ae.transparent_index;te===null&&(te=256);var be=ae.width,He=n-be,pe=be,Y=4*(ae.y*n+ae.x),me=4*((ae.y+ae.height)*n+ae.x),Se=Y,je=4*He;ae.interlaced===!0&&(je+=4*n*7);for(var Le=8,ge=0,ye=se.length;ge<ye;++ge){var we=se[ge];if(pe===0&&(pe=be,(Se+=je)>=me&&(je=4*He+4*n*(Le-1),Se=Y+(be+He)*(Le<<1),Le>>=1)),we===te)Se+=4;else{var Ne=t[re+3*we],ke=t[re+3*we+1],Be=t[re+3*we+2];ce[Se++]=Ne,ce[Se++]=ke,ce[Se++]=Be,ce[Se++]=255}--pe}}}function KB(t,s,n,r){for(var i=t[s++],c=1<<i,A=c+1,u=A+1,d=i+1,h=(1<<d)-1,o=0,m=0,y=0,p=t[s++],j=new Int32Array(4096),b=null;;){for(;o<16&&p!==0;)m|=t[s++]<<o,o+=8,p===1?p=t[s++]:--p;if(o<d)break;var w=m&h;if(m>>=d,o-=d,w!==c){if(w===A)break;for(var B=w<u?w:b,U=0,Q=B;Q>c;)Q=j[Q]>>8,++U;var k=Q;if(y+U+(B!==w?1:0)>r)return void _a.log("Warning, gif stream longer than expected.");n[y++]=k;var K=y+=U;for(B!==w&&(n[y++]=k),Q=B;U--;)Q=j[Q],n[--K]=255&Q,Q>>=8;b!==null&&u<4096&&(j[u++]=b<<8|k,u>=h+1&&d<12&&(++d,h=h<<1|1)),b=w}else u=A+1,h=(1<<(d=i+1))-1,b=null}return y!==r&&_a.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qv(t){var s,n,r,i,c,A=Math.floor,u=new Array(64),d=new Array(64),h=new Array(64),o=new Array(64),m=new Array(65535),y=new Array(65535),p=new Array(64),j=new Array(64),b=[],w=0,B=7,U=new Array(64),Q=new Array(64),k=new Array(64),K=new Array(256),ee=new Array(2048),q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],G=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],he=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ie=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ce=[0,1,2,3,4,5,6,7,8,9,10,11],ae=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],de=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(Y,me){for(var Se=0,je=0,Le=new Array,ge=1;ge<=16;ge++){for(var ye=1;ye<=Y[ge];ye++)Le[me[je]]=[],Le[me[je]][0]=Se,Le[me[je]][1]=ge,je++,Se++;Se*=2}return Le}function re(Y){for(var me=Y[0],Se=Y[1]-1;Se>=0;)me&1<<Se&&(w|=1<<B),Se--,--B<0&&(w==255?(te(255),te(0)):te(w),B=7,w=0)}function te(Y){b.push(Y)}function be(Y){te(Y>>8&255),te(255&Y)}function He(Y,me,Se,je,Le){for(var ge,ye=Le[0],we=Le[240],Ne=(function(ft,Jt){var gt,tt,Lt,qt,Fs,xs,hs,it,Pe,dt,ze=0;for(Pe=0;Pe<8;++Pe){gt=ft[ze],tt=ft[ze+1],Lt=ft[ze+2],qt=ft[ze+3],Fs=ft[ze+4],xs=ft[ze+5],hs=ft[ze+6];var Tt=gt+(it=ft[ze+7]),Je=gt-it,vt=tt+hs,$e=tt-hs,St=Lt+xs,Rt=Lt-xs,Zt=qt+Fs,bt=qt-Fs,Vt=Tt+Zt,vs=Tt-Zt,us=vt+St,jt=vt-St;ft[ze]=Vt+us,ft[ze+4]=Vt-us;var kt=.707106781*(jt+vs);ft[ze+2]=vs+kt,ft[ze+6]=vs-kt;var Ft=.382683433*((Vt=bt+Rt)-(jt=$e+Je)),is=.5411961*Vt+Ft,Ss=1.306562965*jt+Ft,nn=.707106781*(us=Rt+$e),es=Je+nn,zs=Je-nn;ft[ze+5]=zs+is,ft[ze+3]=zs-is,ft[ze+1]=es+Ss,ft[ze+7]=es-Ss,ze+=8}for(ze=0,Pe=0;Pe<8;++Pe){gt=ft[ze],tt=ft[ze+8],Lt=ft[ze+16],qt=ft[ze+24],Fs=ft[ze+32],xs=ft[ze+40],hs=ft[ze+48];var Us=gt+(it=ft[ze+56]),Vs=gt-it,Ls=tt+hs,js=tt-hs,Os=Lt+xs,Ds=Lt-xs,ut=qt+Fs,Pt=qt-Fs,Kt=Us+ut,ws=Us-ut,Ts=Ls+Os,ys=Ls-Os;ft[ze]=Kt+Ts,ft[ze+32]=Kt-Ts;var Qs=.707106781*(ys+ws);ft[ze+16]=ws+Qs,ft[ze+48]=ws-Qs;var Gt=.382683433*((Kt=Pt+Ds)-(ys=js+Vs)),Ys=.5411961*Kt+Gt,Cn=1.306562965*ys+Gt,na=.707106781*(Ts=Ds+js),tr=Vs+na,Mt=Vs-na;ft[ze+40]=Mt+Ys,ft[ze+24]=Mt-Ys,ft[ze+8]=tr+Cn,ft[ze+56]=tr-Cn,ze++}for(Pe=0;Pe<64;++Pe)dt=ft[Pe]*Jt[Pe],p[Pe]=dt>0?dt+.5|0:dt-.5|0;return p})(Y,me),ke=0;ke<64;++ke)j[q[ke]]=Ne[ke];var Be=j[0]-Se;Se=j[0],Be==0?re(je[0]):(re(je[y[ge=32767+Be]]),re(m[ge]));for(var Ae=63;Ae>0&&j[Ae]==0;)Ae--;if(Ae==0)return re(ye),Se;for(var Qe,le=1;le<=Ae;){for(var ct=le;j[le]==0&&le<=Ae;)++le;var rt=le-ct;if(rt>=16){Qe=rt>>4;for(var ht=1;ht<=Qe;++ht)re(we);rt&=15}ge=32767+j[le],re(Le[(rt<<4)+y[ge]]),re(m[ge]),le++}return Ae!=63&&re(ye),Se}function pe(Y){Y=Math.min(Math.max(Y,1),100),c!=Y&&((function(me){for(var Se=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],je=0;je<64;je++){var Le=A((Se[je]*me+50)/100);Le=Math.min(Math.max(Le,1),255),u[q[je]]=Le}for(var ge=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ye=0;ye<64;ye++){var we=A((ge[ye]*me+50)/100);we=Math.min(Math.max(we,1),255),d[q[ye]]=we}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ke=0,Be=0;Be<8;Be++)for(var Ae=0;Ae<8;Ae++)h[ke]=1/(u[q[ke]]*Ne[Be]*Ne[Ae]*8),o[ke]=1/(d[q[ke]]*Ne[Be]*Ne[Ae]*8),ke++})(Y<50?Math.floor(5e3/Y):Math.floor(200-2*Y)),c=Y)}this.encode=function(Y,me){me&&pe(me),b=new Array,w=0,B=7,be(65496),be(65504),be(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),be(1),be(1),te(0),te(0),(function(){be(65499),be(132),te(0);for(var tt=0;tt<64;tt++)te(u[tt]);te(1);for(var Lt=0;Lt<64;Lt++)te(d[Lt])})(),(function(tt,Lt){be(65472),be(17),te(8),be(Lt),be(tt),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)})(Y.width,Y.height),(function(){be(65476),be(418),te(0);for(var tt=0;tt<16;tt++)te(G[tt+1]);for(var Lt=0;Lt<=11;Lt++)te(W[Lt]);te(16);for(var qt=0;qt<16;qt++)te(he[qt+1]);for(var Fs=0;Fs<=161;Fs++)te(Z[Fs]);te(1);for(var xs=0;xs<16;xs++)te(ie[xs+1]);for(var hs=0;hs<=11;hs++)te(ce[hs]);te(17);for(var it=0;it<16;it++)te(ae[it+1]);for(var Pe=0;Pe<=161;Pe++)te(de[Pe])})(),be(65498),be(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var Se=0,je=0,Le=0;w=0,B=7,this.encode.displayName="_encode_";for(var ge,ye,we,Ne,ke,Be,Ae,Qe,le,ct=Y.data,rt=Y.width,ht=Y.height,ft=4*rt,Jt=0;Jt<ht;){for(ge=0;ge<ft;){for(ke=ft*Jt+ge,Ae=-1,Qe=0,le=0;le<64;le++)Be=ke+(Qe=le>>3)*ft+(Ae=4*(7&le)),Jt+Qe>=ht&&(Be-=ft*(Jt+1+Qe-ht)),ge+Ae>=ft&&(Be-=ge+Ae-ft+4),ye=ct[Be++],we=ct[Be++],Ne=ct[Be++],U[le]=(ee[ye]+ee[we+256|0]+ee[Ne+512|0]>>16)-128,Q[le]=(ee[ye+768|0]+ee[we+1024|0]+ee[Ne+1280|0]>>16)-128,k[le]=(ee[ye+1280|0]+ee[we+1536|0]+ee[Ne+1792|0]>>16)-128;Se=He(U,h,Se,s,r),je=He(Q,o,je,n,i),Le=He(k,o,Le,n,i),ge+=32}Jt+=8}if(B>=0){var gt=[];gt[1]=B+1,gt[0]=(1<<B+1)-1,re(gt)}return be(65497),new Uint8Array(b)},t=t||50,(function(){for(var Y=String.fromCharCode,me=0;me<256;me++)K[me]=Y(me)})(),s=se(G,W),n=se(ie,ce),r=se(he,Z),i=se(ae,de),(function(){for(var Y=1,me=2,Se=1;Se<=15;Se++){for(var je=Y;je<me;je++)y[32767+je]=Se,m[32767+je]=[],m[32767+je][1]=Se,m[32767+je][0]=je;for(var Le=-(me-1);Le<=-Y;Le++)y[32767+Le]=Se,m[32767+Le]=[],m[32767+Le][1]=Se,m[32767+Le][0]=me-1+Le;Y<<=1,me<<=1}})(),(function(){for(var Y=0;Y<256;Y++)ee[Y]=19595*Y,ee[Y+256|0]=38470*Y,ee[Y+512|0]=7471*Y+32768,ee[Y+768|0]=-11059*Y,ee[Y+1024|0]=-21709*Y,ee[Y+1280|0]=32768*Y+8421375,ee[Y+1536|0]=-27439*Y,ee[Y+1792|0]=-5329*Y})(),pe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function $c(t,s){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!s,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function $B(t){function s(W){if(!W)throw Error("assert :P")}function n(W,he,Z){for(var ie=0;4>ie;ie++)if(W[he+ie]!=Z.charCodeAt(ie))return!0;return!1}function r(W,he,Z,ie,ce){for(var ae=0;ae<ce;ae++)W[he+ae]=Z[ie+ae]}function i(W,he,Z,ie){for(var ce=0;ce<ie;ce++)W[he+ce]=Z}function c(W){return new Int32Array(W)}function A(W,he){for(var Z=[],ie=0;ie<W;ie++)Z.push(new he);return Z}function u(W,he){var Z=[];return(function ie(ce,ae,de){for(var se=de[ae],re=0;re<se&&(ce.push(de.length>ae+1?[]:new he),!(de.length<ae+1));re++)ie(ce[re],ae+1,de)})(Z,0,W),Z}var d=function(){var W=this;function he(E,M){for(var X=1<<M-1>>>0;E&X;)X>>>=1;return X?(E&X-1)+X:E}function Z(E,M,X,oe,Ee){s(!(oe%X));do E[M+(oe-=X)]=Ee;while(0<oe)}function ie(E,M,X,oe,Ee){if(s(2328>=Ee),512>=Ee)var Re=c(512);else if((Re=c(Ee))==null)return 0;return(function(Ue,Me,Ke,et,xt,_t){var Ze,Nt,Ct=Me,ss=1<<Ke,Ut=c(16),ts=c(16);for(s(xt!=0),s(et!=null),s(Ue!=null),s(0<Ke),Nt=0;Nt<xt;++Nt){if(15<et[Nt])return 0;++Ut[et[Nt]]}if(Ut[0]==xt)return 0;for(ts[1]=0,Ze=1;15>Ze;++Ze){if(Ut[Ze]>1<<Ze)return 0;ts[Ze+1]=ts[Ze]+Ut[Ze]}for(Nt=0;Nt<xt;++Nt)Ze=et[Nt],0<et[Nt]&&(_t[ts[Ze]++]=Nt);if(ts[15]==1)return(et=new ce).g=0,et.value=_t[0],Z(Ue,Ct,1,ss,et),ss;var ls,Cs=-1,fs=ss-1,An=0,sn=1,zn=1,on=1<<Ke;for(Nt=0,Ze=1,xt=2;Ze<=Ke;++Ze,xt<<=1){if(sn+=zn<<=1,0>(zn-=Ut[Ze]))return 0;for(;0<Ut[Ze];--Ut[Ze])(et=new ce).g=Ze,et.value=_t[Nt++],Z(Ue,Ct+An,xt,on,et),An=he(An,Ze)}for(Ze=Ke+1,xt=2;15>=Ze;++Ze,xt<<=1){if(sn+=zn<<=1,0>(zn-=Ut[Ze]))return 0;for(;0<Ut[Ze];--Ut[Ze]){if(et=new ce,(An&fs)!=Cs){for(Ct+=on,ls=1<<(Cs=Ze)-Ke;15>Cs&&!(0>=(ls-=Ut[Cs]));)++Cs,ls<<=1;ss+=on=1<<(ls=Cs-Ke),Ue[Me+(Cs=An&fs)].g=ls+Ke,Ue[Me+Cs].value=Ct-Me-Cs}et.g=Ze-Ke,et.value=_t[Nt++],Z(Ue,Ct+(An>>Ke),xt,on,et),An=he(An,Ze)}}return sn!=2*ts[15]-1?0:ss})(E,M,X,oe,Ee,Re)}function ce(){this.value=this.g=0}function ae(){this.value=this.g=0}function de(){this.G=A(5,ce),this.H=c(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=A(Co,ae)}function se(E,M,X,oe){s(E!=null),s(M!=null),s(2147483648>oe),E.Ca=254,E.I=0,E.b=-8,E.Ka=0,E.oa=M,E.pa=X,E.Jd=M,E.Yc=X+oe,E.Zc=4<=oe?X+oe-4+1:X,ye(E)}function re(E,M){for(var X=0;0<M--;)X|=Ne(E,128)<<M;return X}function te(E,M){var X=re(E,M);return we(E)?-X:X}function be(E,M,X,oe){var Ee,Re=0;for(s(E!=null),s(M!=null),s(4294967288>oe),E.Sb=oe,E.Ra=0,E.u=0,E.h=0,4<oe&&(oe=4),Ee=0;Ee<oe;++Ee)Re+=M[X+Ee]<<8*Ee;E.Ra=Re,E.bb=oe,E.oa=M,E.pa=X}function He(E){for(;8<=E.u&&E.bb<E.Sb;)E.Ra>>>=8,E.Ra+=E.oa[E.pa+E.bb]<<Jo-8>>>0,++E.bb,E.u-=8;je(E)&&(E.h=1,E.u=0)}function pe(E,M){if(s(0<=M),!E.h&&M<=Mi){var X=Se(E)&ir[M];return E.u+=M,He(E),X}return E.h=1,E.u=0}function Y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function me(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Se(E){return E.Ra>>>(E.u&Jo-1)>>>0}function je(E){return s(E.bb<=E.Sb),E.h||E.bb==E.Sb&&E.u>Jo}function Le(E,M){E.u=M,E.h=je(E)}function ge(E){E.u>=Zo&&(s(E.u>=Zo),He(E))}function ye(E){s(E!=null&&E.oa!=null),E.pa<E.Zc?(E.I=(E.oa[E.pa++]|E.I<<8)>>>0,E.b+=8):(s(E!=null&&E.oa!=null),E.pa<E.Yc?(E.b+=8,E.I=E.oa[E.pa++]|E.I<<8):E.Ka?E.b=0:(E.I<<=8,E.b+=8,E.Ka=1))}function we(E){return re(E,1)}function Ne(E,M){var X=E.Ca;0>E.b&&ye(E);var oe=E.b,Ee=X*M>>>8,Re=(E.I>>>oe>Ee)+0;for(Re?(X-=Ee,E.I-=Ee+1<<oe>>>0):X=Ee+1,oe=X,Ee=0;256<=oe;)Ee+=8,oe>>=8;return oe=7^Ee+ll[oe],E.b-=oe,E.Ca=(X<<oe)-1,Re}function ke(E,M,X){E[M+0]=X>>24&255,E[M+1]=X>>16&255,E[M+2]=X>>8&255,E[M+3]=255&X}function Be(E,M){return E[M+0]|E[M+1]<<8}function Ae(E,M){return Be(E,M)|E[M+2]<<16}function Qe(E,M){return Be(E,M)|Be(E,M+2)<<16}function le(E,M){var X=1<<M;return s(E!=null),s(0<M),E.X=c(X),E.X==null?0:(E.Mb=32-M,E.Xa=M,1)}function ct(E,M){s(E!=null),s(M!=null),s(E.Xa==M.Xa),r(M.X,0,E.X,0,1<<M.Xa)}function rt(){this.X=[],this.Xa=this.Mb=0}function ht(E,M,X,oe){s(X!=null),s(oe!=null);var Ee=X[0],Re=oe[0];return Ee==0&&(Ee=(E*Re+M/2)/M),Re==0&&(Re=(M*Ee+E/2)/E),0>=Ee||0>=Re?0:(X[0]=Ee,oe[0]=Re,1)}function ft(E,M){return E+(1<<M)-1>>>M}function Jt(E,M){return((4278255360&E)+(4278255360&M)>>>0&4278255360)+((16711935&E)+(16711935&M)>>>0&16711935)>>>0}function gt(E,M){W[M]=function(X,oe,Ee,Re,Ue,Me,Ke){var et;for(et=0;et<Ue;++et){var xt=W[E](Me[Ke+et-1],Ee,Re+et);Me[Ke+et]=Jt(X[oe+et],xt)}}}function tt(){this.ud=this.hd=this.jd=0}function Lt(E,M){return((4278124286&(E^M))>>>1)+(E&M)>>>0}function qt(E){return 0<=E&&256>E?E:0>E?0:255<E?255:void 0}function Fs(E,M){return qt(E+(E-M+.5>>1))}function xs(E,M,X){return Math.abs(M-X)-Math.abs(E-X)}function hs(E,M,X,oe,Ee,Re,Ue){for(oe=Re[Ue-1],X=0;X<Ee;++X)Re[Ue+X]=oe=Jt(E[M+X],oe)}function it(E,M,X,oe,Ee){var Re;for(Re=0;Re<X;++Re){var Ue=E[M+Re],Me=Ue>>8&255,Ke=16711935&(Ke=(Ke=16711935&Ue)+((Me<<16)+Me));oe[Ee+Re]=(4278255360&Ue)+Ke>>>0}}function Pe(E,M){M.jd=255&E,M.hd=E>>8&255,M.ud=E>>16&255}function dt(E,M,X,oe,Ee,Re){var Ue;for(Ue=0;Ue<oe;++Ue){var Me=M[X+Ue],Ke=Me>>>8,et=Me,xt=255&(xt=(xt=Me>>>16)+((E.jd<<24>>24)*(Ke<<24>>24)>>>5));et=255&(et=(et+=(E.hd<<24>>24)*(Ke<<24>>24)>>>5)+((E.ud<<24>>24)*(xt<<24>>24)>>>5)),Ee[Re+Ue]=(4278255360&Me)+(xt<<16)+et}}function ze(E,M,X,oe,Ee){W[M]=function(Re,Ue,Me,Ke,et,xt,_t,Ze,Nt){for(Ke=_t;Ke<Ze;++Ke)for(_t=0;_t<Nt;++_t)et[xt++]=Ee(Me[oe(Re[Ue++])])},W[E]=function(Re,Ue,Me,Ke,et,xt,_t){var Ze=8>>Re.b,Nt=Re.Ea,Ct=Re.K[0],ss=Re.w;if(8>Ze)for(Re=(1<<Re.b)-1,ss=(1<<Ze)-1;Ue<Me;++Ue){var Ut,ts=0;for(Ut=0;Ut<Nt;++Ut)Ut&Re||(ts=oe(Ke[et++])),xt[_t++]=Ee(Ct[ts&ss]),ts>>=Ze}else W["VP8LMapColor"+X](Ke,et,Ct,ss,xt,_t,Ue,Me,Nt)}}function Tt(E,M,X,oe,Ee){for(X=M+X;M<X;){var Re=E[M++];oe[Ee++]=Re>>16&255,oe[Ee++]=Re>>8&255,oe[Ee++]=255&Re}}function Je(E,M,X,oe,Ee){for(X=M+X;M<X;){var Re=E[M++];oe[Ee++]=Re>>16&255,oe[Ee++]=Re>>8&255,oe[Ee++]=255&Re,oe[Ee++]=Re>>24&255}}function vt(E,M,X,oe,Ee){for(X=M+X;M<X;){var Re=(Ue=E[M++])>>16&240|Ue>>12&15,Ue=240&Ue|Ue>>28&15;oe[Ee++]=Re,oe[Ee++]=Ue}}function $e(E,M,X,oe,Ee){for(X=M+X;M<X;){var Re=(Ue=E[M++])>>16&248|Ue>>13&7,Ue=Ue>>5&224|Ue>>3&31;oe[Ee++]=Re,oe[Ee++]=Ue}}function St(E,M,X,oe,Ee){for(X=M+X;M<X;){var Re=E[M++];oe[Ee++]=255&Re,oe[Ee++]=Re>>8&255,oe[Ee++]=Re>>16&255}}function Rt(E,M,X,oe,Ee,Re){if(Re==0)for(X=M+X;M<X;)ke(oe,((Re=E[M++])[0]>>24|Re[1]>>8&65280|Re[2]<<8&16711680|Re[3]<<24)>>>0),Ee+=32;else r(oe,Ee,E,M,X)}function Zt(E,M){W[M][0]=W[E+"0"],W[M][1]=W[E+"1"],W[M][2]=W[E+"2"],W[M][3]=W[E+"3"],W[M][4]=W[E+"4"],W[M][5]=W[E+"5"],W[M][6]=W[E+"6"],W[M][7]=W[E+"7"],W[M][8]=W[E+"8"],W[M][9]=W[E+"9"],W[M][10]=W[E+"10"],W[M][11]=W[E+"11"],W[M][12]=W[E+"12"],W[M][13]=W[E+"13"],W[M][14]=W[E+"0"],W[M][15]=W[E+"0"]}function bt(E){return E==Vd||E==BA||E==ld||E==Uc}function Vt(){this.eb=[],this.size=this.A=this.fb=0}function vs(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function us(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Vt,this.f.kb=new vs,this.sd=null}function jt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function kt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ft(E){return alert("todo:WebPSamplerProcessPlane"),E.T}function is(E,M){var X=E.T,oe=M.ba.f.RGBA,Ee=oe.eb,Re=oe.fb+E.ka*oe.A,Ue=Ri[M.ba.S],Me=E.y,Ke=E.O,et=E.f,xt=E.N,_t=E.ea,Ze=E.W,Nt=M.cc,Ct=M.dc,ss=M.Mc,Ut=M.Nc,ts=E.ka,ls=E.ka+E.T,Cs=E.U,fs=Cs+1>>1;for(ts==0?Ue(Me,Ke,null,null,et,xt,_t,Ze,et,xt,_t,Ze,Ee,Re,null,null,Cs):(Ue(M.ec,M.fc,Me,Ke,Nt,Ct,ss,Ut,et,xt,_t,Ze,Ee,Re-oe.A,Ee,Re,Cs),++X);ts+2<ls;ts+=2)Nt=et,Ct=xt,ss=_t,Ut=Ze,xt+=E.Rc,Ze+=E.Rc,Re+=2*oe.A,Ue(Me,(Ke+=2*E.fa)-E.fa,Me,Ke,Nt,Ct,ss,Ut,et,xt,_t,Ze,Ee,Re-oe.A,Ee,Re,Cs);return Ke+=E.fa,E.j+ls<E.o?(r(M.ec,M.fc,Me,Ke,Cs),r(M.cc,M.dc,et,xt,fs),r(M.Mc,M.Nc,_t,Ze,fs),X--):1&ls||Ue(Me,Ke,null,null,et,xt,_t,Ze,et,xt,_t,Ze,Ee,Re+oe.A,null,null,Cs),X}function Ss(E,M,X){var oe=E.F,Ee=[E.J];if(oe!=null){var Re=E.U,Ue=M.ba.S,Me=Ue==$d||Ue==ld;M=M.ba.f.RGBA;var Ke=[0],et=E.ka;Ke[0]=E.T,E.Kb&&(et==0?--Ke[0]:(--et,Ee[0]-=E.width),E.j+E.ka+E.T==E.o&&(Ke[0]=E.o-E.j-et));var xt=M.eb;et=M.fb+et*M.A,E=od(oe,Ee[0],E.width,Re,Ke,xt,et+(Me?0:3),M.A),s(X==Ke),E&&bt(Ue)&&nc(xt,et,Me,Re,Ke,M.A)}return 0}function nn(E){var M=E.ma,X=M.ba.S,oe=11>X,Ee=X==zi||X==Eo||X==$d||X==Ql||X==12||bt(X);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!ma(M.Oa,E,Ee?11:12))return 0;if(Ee&&bt(X)&&Hd(),E.da)alert("todo:use_scaling");else{if(oe){if(M.Ib=Ft,E.Kb){if(X=E.U+1>>1,M.memory=c(E.U+2*X),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+E.U,M.Mc=M.cc,M.Nc=M.dc+X,M.Ib=is,Hd()}}else alert("todo:EmitYUV");Ee&&(M.Jb=Ss,oe&&Yo())}if(oe&&!Ac){for(E=0;256>E;++E)Oi[E]=89858*(E-128)+dd>>Oo,Vf[E]=-22014*(E-128)+dd,Oh[E]=-45773*(E-128),IA[E]=113618*(E-128)+dd>>Oo;for(E=pl;E<dc;++E)M=76283*(E-16)+dd>>Oo,qf[E-pl]=tn(M,255),Gf[E-pl]=tn(M+8>>4,15);Ac=1}return 1}function es(E){var M=E.ma,X=E.U,oe=E.T;return s(!(1&E.ka)),0>=X||0>=oe?0:(X=M.Ib(E,M),M.Jb!=null&&M.Jb(E,M,X),M.Dc+=X,1)}function zs(E){E.ma.memory=null}function Us(E,M,X,oe){return pe(E,8)!=47?0:(M[0]=pe(E,14)+1,X[0]=pe(E,14)+1,oe[0]=pe(E,1),pe(E,3)!=0?0:!E.h)}function Vs(E,M){if(4>E)return E+1;var X=E-2>>1;return(2+(1&E)<<X)+pe(M,X)+1}function Ls(E,M){return 120<M?M-120:1<=(X=((X=Fo[M-1])>>4)*E+(8-(15&X)))?X:1;var X}function js(E,M,X){var oe=Se(X),Ee=E[M+=255&oe].g-8;return 0<Ee&&(Le(X,X.u+8),oe=Se(X),M+=E[M].value,M+=oe&(1<<Ee)-1),Le(X,X.u+E[M].g),E[M].value}function Os(E,M,X){return X.g+=E.g,X.value+=E.value<<M>>>0,s(8>=X.g),E.g}function Ds(E,M,X){var oe=E.xc;return s((M=oe==0?0:E.vc[E.md*(X>>oe)+(M>>oe)])<E.Wb),E.Ya[M]}function ut(E,M,X,oe){var Ee=E.ab,Re=E.c*M,Ue=E.C;M=Ue+M;var Me=X,Ke=oe;for(oe=E.Ta,X=E.Ua;0<Ee--;){var et=E.gc[Ee],xt=Ue,_t=M,Ze=Me,Nt=Ke,Ct=(Ke=oe,Me=X,et.Ea);switch(s(xt<_t),s(_t<=et.nc),et.hc){case 2:Pa(Ze,Nt,(_t-xt)*Ct,Ke,Me);break;case 0:var ss=xt,Ut=_t,ts=Ke,ls=Me,Cs=(on=et).Ea;ss==0&&(Ul(Ze,Nt,null,null,1,ts,ls),hs(Ze,Nt+1,0,0,Cs-1,ts,ls+1),Nt+=Cs,ls+=Cs,++ss);for(var fs=1<<on.b,An=fs-1,sn=ft(Cs,on.b),zn=on.K,on=on.w+(ss>>on.b)*sn;ss<Ut;){var fr=zn,ya=on,Gn=1;for(Tc(Ze,Nt,ts,ls-Cs,1,ts,ls);Gn<Cs;){var Yt=(Gn&~An)+fs;Yt>Cs&&(Yt=Cs),(0,Pi[fr[ya++]>>8&15])(Ze,Nt+ +Gn,ts,ls+Gn-Cs,Yt-Gn,ts,ls+Gn),Gn=Yt}Nt+=Cs,ls+=Cs,++ss&An||(on+=sn)}_t!=et.nc&&r(Ke,Me-Ct,Ke,Me+(_t-xt-1)*Ct,Ct);break;case 1:for(Ct=Ze,Ut=Nt,Cs=(Ze=et.Ea)-(ls=Ze&~(ts=(Nt=1<<et.b)-1)),ss=ft(Ze,et.b),fs=et.K,et=et.w+(xt>>et.b)*ss;xt<_t;){for(An=fs,sn=et,zn=new tt,on=Ut+ls,fr=Ut+Ze;Ut<on;)Pe(An[sn++],zn),Fc(zn,Ct,Ut,Nt,Ke,Me),Ut+=Nt,Me+=Nt;Ut<fr&&(Pe(An[sn++],zn),Fc(zn,Ct,Ut,Cs,Ke,Me),Ut+=Cs,Me+=Cs),++xt&ts||(et+=ss)}break;case 3:if(Ze==Ke&&Nt==Me&&0<et.b){for(Ut=Ke,Ze=Ct=Me+(_t-xt)*Ct-(ls=(_t-xt)*ft(et.Ea,et.b)),Nt=Ke,ts=Me,ss=[],ls=(Cs=ls)-1;0<=ls;--ls)ss[ls]=Nt[ts+ls];for(ls=Cs-1;0<=ls;--ls)Ut[Ze+ls]=ss[ls];Yi(et,xt,_t,Ke,Ct,Ke,Me)}else Yi(et,xt,_t,Ze,Nt,Ke,Me)}Me=oe,Ke=X}Ke!=X&&r(oe,X,Me,Ke,Re)}function Pt(E,M){var X=E.V,oe=E.Ba+E.c*E.C,Ee=M-E.C;if(s(M<=E.l.o),s(16>=Ee),0<Ee){var Re=E.l,Ue=E.Ta,Me=E.Ua,Ke=Re.width;if(ut(E,Ee,X,oe),Ee=Me=[Me],s((X=E.C)<(oe=M)),s(Re.v<Re.va),oe>Re.o&&(oe=Re.o),X<Re.j){var et=Re.j-X;X=Re.j,Ee[0]+=et*Ke}if(X>=oe?X=0:(Ee[0]+=4*Re.v,Re.ka=X-Re.j,Re.U=Re.va-Re.v,Re.T=oe-X,X=1),X){if(Me=Me[0],11>(X=E.ca).S){var xt=X.f.RGBA,_t=(oe=X.S,Ee=Re.U,Re=Re.T,et=xt.eb,xt.A),Ze=Re;for(xt=xt.fb+E.Ma*xt.A;0<Ze--;){var Nt=Ue,Ct=Me,ss=Ee,Ut=et,ts=xt;switch(oe){case NA:Ic(Nt,Ct,ss,Ut,ts);break;case zi:el(Nt,Ct,ss,Ut,ts);break;case Vd:el(Nt,Ct,ss,Ut,ts),nc(Ut,ts,0,ss,1,0);break;case Dl:tl(Nt,Ct,ss,Ut,ts);break;case Eo:Rt(Nt,Ct,ss,Ut,ts,1);break;case BA:Rt(Nt,Ct,ss,Ut,ts,1),nc(Ut,ts,0,ss,1,0);break;case $d:Rt(Nt,Ct,ss,Ut,ts,0);break;case ld:Rt(Nt,Ct,ss,Ut,ts,0),nc(Ut,ts,1,ss,1,0);break;case Ql:cl(Nt,Ct,ss,Ut,ts);break;case Uc:cl(Nt,Ct,ss,Ut,ts),uo(Ut,ts,ss,1,0);break;case rc:dl(Nt,Ct,ss,Ut,ts);break;default:s(0)}Me+=Ke,xt+=_t}E.Ma+=Re}else alert("todo:EmitRescaledRowsYUVA");s(E.Ma<=X.height)}}E.C=M,s(E.C<=E.i)}function Kt(E){var M;if(0<E.ua)return 0;for(M=0;M<E.Wb;++M){var X=E.Ya[M].G,oe=E.Ya[M].H;if(0<X[1][oe[1]+0].g||0<X[2][oe[2]+0].g||0<X[3][oe[3]+0].g)return 0}return 1}function ws(E,M,X,oe,Ee,Re){if(E.Z!=0){var Ue=E.qd,Me=E.rd;for(s(hl[E.Z]!=null);M<X;++M)hl[E.Z](Ue,Me,oe,Ee,oe,Ee,Re),Ue=oe,Me=Ee,Ee+=Re;E.qd=Ue,E.rd=Me}}function Ts(E,M){var X=E.l.ma,oe=X.Z==0||X.Z==1?E.l.j:E.C;if(oe=E.C<oe?oe:E.C,s(M<=E.l.o),M>oe){var Ee=E.l.width,Re=X.ca,Ue=X.tb+Ee*oe,Me=E.V,Ke=E.Ba+E.c*oe,et=E.gc;s(E.ab==1),s(et[0].hc==3),Ti(et[0],oe,M,Me,Ke,Re,Ue),ws(X,oe,M,Re,Ue,Ee)}E.C=E.Ma=M}function ys(E,M,X,oe,Ee,Re,Ue){var Me=E.$/oe,Ke=E.$%oe,et=E.m,xt=E.s,_t=X+E.$,Ze=_t;Ee=X+oe*Ee;var Nt=X+oe*Re,Ct=280+xt.ua,ss=E.Pb?Me:16777216,Ut=0<xt.ua?xt.Wa:null,ts=xt.wc,ls=_t<Nt?Ds(xt,Ke,Me):null;s(E.C<Re),s(Nt<=Ee);var Cs=!1;e:for(;;){for(;Cs||_t<Nt;){var fs=0;if(Me>=ss){var An=_t-X;s((ss=E).Pb),ss.wd=ss.m,ss.xd=An,0<ss.s.ua&&ct(ss.s.Wa,ss.s.vb),ss=Me+ic}if(Ke&ts||(ls=Ds(xt,Ke,Me)),s(ls!=null),ls.Qb&&(M[_t]=ls.qb,Cs=!0),!Cs)if(ge(et),ls.jc){fs=et,An=M;var sn=_t,zn=ls.pd[Se(fs)&Co-1];s(ls.jc),256>zn.g?(Le(fs,fs.u+zn.g),An[sn]=zn.value,fs=0):(Le(fs,fs.u+zn.g-256),s(256<=zn.value),fs=zn.value),fs==0&&(Cs=!0)}else fs=js(ls.G[0],ls.H[0],et);if(et.h)break;if(Cs||256>fs){if(!Cs)if(ls.nd)M[_t]=(ls.qb|fs<<8)>>>0;else{if(ge(et),Cs=js(ls.G[1],ls.H[1],et),ge(et),An=js(ls.G[2],ls.H[2],et),sn=js(ls.G[3],ls.H[3],et),et.h)break;M[_t]=(sn<<24|Cs<<16|fs<<8|An)>>>0}if(Cs=!1,++_t,++Ke>=oe&&(Ke=0,++Me,Ue!=null&&Me<=Re&&!(Me%16)&&Ue(E,Me),Ut!=null))for(;Ze<_t;)fs=M[Ze++],Ut.X[(506832829*fs&4294967295)>>>Ut.Mb]=fs}else if(280>fs){if(fs=Vs(fs-256,et),An=js(ls.G[4],ls.H[4],et),ge(et),An=Ls(oe,An=Vs(An,et)),et.h)break;if(_t-X<An||Ee-_t<fs)break e;for(sn=0;sn<fs;++sn)M[_t+sn]=M[_t+sn-An];for(_t+=fs,Ke+=fs;Ke>=oe;)Ke-=oe,++Me,Ue!=null&&Me<=Re&&!(Me%16)&&Ue(E,Me);if(s(_t<=Ee),Ke&ts&&(ls=Ds(xt,Ke,Me)),Ut!=null)for(;Ze<_t;)fs=M[Ze++],Ut.X[(506832829*fs&4294967295)>>>Ut.Mb]=fs}else{if(!(fs<Ct))break e;for(Cs=fs-280,s(Ut!=null);Ze<_t;)fs=M[Ze++],Ut.X[(506832829*fs&4294967295)>>>Ut.Mb]=fs;fs=_t,s(!(Cs>>>(An=Ut).Xa)),M[fs]=An.X[Cs],Cs=!0}Cs||s(et.h==je(et))}if(E.Pb&&et.h&&_t<Ee)s(E.m.h),E.a=5,E.m=E.wd,E.$=E.xd,0<E.s.ua&&ct(E.s.vb,E.s.Wa);else{if(et.h)break e;Ue?.(E,Me>Re?Re:Me),E.a=0,E.$=_t-X}return 1}return E.a=3,0}function Qs(E){s(E!=null),E.vc=null,E.yc=null,E.Ya=null;var M=E.Wa;M!=null&&(M.X=null),E.vb=null,s(E!=null)}function Gt(){var E=new Qn;return E==null?null:(E.a=0,E.xb=Tu,Zt("Predictor","VP8LPredictors"),Zt("Predictor","VP8LPredictors_C"),Zt("PredictorAdd","VP8LPredictorsAdd"),Zt("PredictorAdd","VP8LPredictorsAdd_C"),Pa=it,Fc=dt,Ic=Tt,el=Je,cl=vt,dl=$e,tl=St,W.VP8LMapColor32b=Ei,W.VP8LMapColor8b=Sr,E)}function Ys(E,M,X,oe,Ee){var Re=1,Ue=[E],Me=[M],Ke=oe.m,et=oe.s,xt=null,_t=0;e:for(;;){if(X)for(;Re&&pe(Ke,1);){var Ze=Ue,Nt=Me,Ct=oe,ss=1,Ut=Ct.m,ts=Ct.gc[Ct.ab],ls=pe(Ut,2);if(Ct.Oc&1<<ls)Re=0;else{switch(Ct.Oc|=1<<ls,ts.hc=ls,ts.Ea=Ze[0],ts.nc=Nt[0],ts.K=[null],++Ct.ab,s(4>=Ct.ab),ls){case 0:case 1:ts.b=pe(Ut,3)+2,ss=Ys(ft(ts.Ea,ts.b),ft(ts.nc,ts.b),0,Ct,ts.K),ts.K=ts.K[0];break;case 3:var Cs,fs=pe(Ut,8)+1,An=16<fs?0:4<fs?1:2<fs?2:3;if(Ze[0]=ft(ts.Ea,An),ts.b=An,Cs=ss=Ys(fs,1,0,Ct,ts.K)){var sn,zn=fs,on=ts,fr=1<<(8>>on.b),ya=c(fr);if(ya==null)Cs=0;else{var Gn=on.K[0],Yt=on.w;for(ya[0]=on.K[0][0],sn=1;sn<1*zn;++sn)ya[sn]=Jt(Gn[Yt+sn],ya[sn-1]);for(;sn<4*fr;++sn)ya[sn]=0;on.K[0]=null,on.K[0]=ya,Cs=1}}ss=Cs;break;case 2:break;default:s(0)}Re=ss}}if(Ue=Ue[0],Me=Me[0],Re&&pe(Ke,1)&&!(Re=1<=(_t=pe(Ke,4))&&11>=_t)){oe.a=3;break e}var _s;if(_s=Re)t:{var Ra,In,Un,Jr=oe,ri=Ue,Ya=Me,Zr=_t,ai=X,Ki=Jr.m,ii=Jr.s,Kn=[null],Nr=1,xa=0,zr=Io[Zr];s:for(;;){if(ai&&pe(Ki,1)){var oi=pe(Ki,3)+2,Oa=ft(ri,oi),Br=ft(Ya,oi),Xa=Oa*Br;if(!Ys(Oa,Br,0,Jr,Kn))break s;for(Kn=Kn[0],ii.xc=oi,Ra=0;Ra<Xa;++Ra){var ea=Kn[Ra]>>8&65535;Kn[Ra]=ea,ea>=Nr&&(Nr=ea+1)}}if(Ki.h)break s;for(In=0;5>In;++In){var li=Lc[In];!In&&0<Zr&&(li+=1<<Zr),xa<li&&(xa=li)}var ci=A(Nr*zr,ce),la=Nr,Rr=A(la,de);if(Rr==null)var $i=null;else s(65536>=la),$i=Rr;var Ha=c(xa);if($i==null||Ha==null||ci==null){Jr.a=1;break s}var En=ci;for(Ra=Un=0;Ra<Nr;++Ra){var Fn=$i[Ra],Qr=Fn.G,io=Fn.H,po=0,eo=1,Ua=0;for(In=0;5>In;++In){li=Lc[In],Qr[In]=En,io[In]=Un,!In&&0<Zr&&(li+=1<<Zr);r:{var uc,ml=li,hd=Jr,ca=Ha,OA=En,Fu=Un,Wd=0,rl=hd.m,Iu=pe(rl,1);if(i(ca,0,0,ml),Iu){var UA=pe(rl,1)+1,LA=pe(rl,1),Yd=pe(rl,LA==0?1:8);ca[Yd]=1,UA==2&&(ca[Yd=pe(rl,8)]=1);var gi=1}else{var Ba=c(19),Xd=pe(rl,4)+4;if(19<Xd){hd.a=3;var hc=0;break r}for(uc=0;uc<Xd;++uc)Ba[ac[uc]]=pe(rl,3);var fd=void 0,wi=void 0,Uo=hd,DA=Ba,pd=ml,QA=ca,_A=0,Ml=Uo.m,Ru=8,Ou=A(128,ce);n:for(;ie(Ou,0,7,DA,19);){if(pe(Ml,1)){var Uh=2+2*pe(Ml,3);if((fd=2+pe(Ml,Uh))>pd)break n}else fd=pd;for(wi=0;wi<pd&&fd--;){ge(Ml);var Uu=Ou[0+(127&Se(Ml))];Le(Ml,Ml.u+Uu.g);var Pl=Uu.value;if(16>Pl)QA[wi++]=Pl,Pl!=0&&(Ru=Pl);else{var Lh=Pl==16,MA=Pl-16,Lu=cd[MA],yi=pe(Ml,To[MA])+Lu;if(wi+yi>pd)break n;for(var md=Lh?Ru:0;0<yi--;)QA[wi++]=md}}_A=1;break n}_A||(Uo.a=3),gi=_A}(gi=gi&&!rl.h)&&(Wd=ie(OA,Fu,8,ca,ml)),gi&&Wd!=0?hc=Wd:(hd.a=3,hc=0)}if(hc==0)break s;if(eo&&CA[In]==1&&(eo=En[Un].g==0),po+=En[Un].g,Un+=hc,3>=In){var Qc,PA=Ha[0];for(Qc=1;Qc<li;++Qc)Ha[Qc]>PA&&(PA=Ha[Qc]);Ua+=PA}}if(Fn.nd=eo,Fn.Qb=0,eo&&(Fn.qb=(Qr[3][io[3]+0].value<<24|Qr[1][io[1]+0].value<<16|Qr[2][io[2]+0].value)>>>0,po==0&&256>Qr[0][io[0]+0].value&&(Fn.Qb=1,Fn.qb+=Qr[0][io[0]+0].value<<8)),Fn.jc=!Fn.Qb&&6>Ua,Fn.jc){var gd,Lo=Fn;for(gd=0;gd<Co;++gd){var kl=gd,Hl=Lo.pd[kl],kA=Lo.G[0][Lo.H[0]+kl];256<=kA.value?(Hl.g=kA.g+256,Hl.value=kA.value):(Hl.g=0,Hl.value=0,kl>>=Os(kA,8,Hl),kl>>=Os(Lo.G[1][Lo.H[1]+kl],16,Hl),kl>>=Os(Lo.G[2][Lo.H[2]+kl],0,Hl),Os(Lo.G[3][Lo.H[3]+kl],24,Hl))}}}ii.vc=Kn,ii.Wb=Nr,ii.Ya=$i,ii.yc=ci,_s=1;break t}_s=0}if(!(Re=_s)){oe.a=3;break e}if(0<_t){if(et.ua=1<<_t,!le(et.Wa,_t)){oe.a=1,Re=0;break e}}else et.ua=0;var HA=oe,_c=Ue,Dh=Me,yd=HA.s,xd=yd.xc;if(HA.c=_c,HA.i=Dh,yd.md=ft(_c,xd),yd.wc=xd==0?-1:(1<<xd)-1,X){oe.xb=oc;break e}if((xt=c(Ue*Me))==null){oe.a=1,Re=0;break e}Re=(Re=ys(oe,xt,0,Ue,Me,Me,null))&&!Ke.h;break e}return Re?(Ee!=null?Ee[0]=xt:(s(xt==null),s(X)),oe.$=0,X||Qs(et)):Qs(et),Re}function Cn(E,M){var X=E.c*E.i,oe=X+M+16*M;return s(E.c<=M),E.V=c(oe),E.V==null?(E.Ta=null,E.Ua=0,E.a=1,0):(E.Ta=E.V,E.Ua=E.Ba+X+M,1)}function na(E,M){var X=E.C,oe=M-X,Ee=E.V,Re=E.Ba+E.c*X;for(s(M<=E.l.o);0<oe;){var Ue=16<oe?16:oe,Me=E.l.ma,Ke=E.l.width,et=Ke*Ue,xt=Me.ca,_t=Me.tb+Ke*X,Ze=E.Ta,Nt=E.Ua;ut(E,Ue,Ee,Re),ho(Ze,Nt,xt,_t,et),ws(Me,X,X+Ue,xt,_t,Ke),oe-=Ue,Ee+=Ue*E.c,X+=Ue}s(X==M),E.C=E.Ma=M}function tr(){this.ub=this.yd=this.td=this.Rb=0}function Mt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function bn(){this.Fb=this.Bb=this.Cb=0,this.Zb=c(4),this.Lb=c(4)}function Tr(){this.Yb=(function(){var E=[];return(function M(X,oe,Ee){for(var Re=Ee[oe],Ue=0;Ue<Re&&(X.push(Ee.length>oe+1?[]:0),!(Ee.length<oe+1));Ue++)M(X[Ue],oe+1,Ee)})(E,0,[3,11]),E})()}function lr(){this.jb=c(3),this.Wc=u([4,8],Tr),this.Xc=u([4,17],Tr)}function Bs(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new c(4),this.od=new c(4)}function Js(){this.ld=this.La=this.dd=this.tc=0}function Pn(){this.Na=this.la=0}function kr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function jr(){this.ad=c(384),this.Za=0,this.Ob=c(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ur(){this.uc=this.M=this.Nb=0,this.wa=Array(new Js),this.Y=0,this.ya=Array(new jr),this.aa=0,this.l=new Is}function hr(){this.y=c(16),this.f=c(8),this.ea=c(8)}function qs(){this.cb=this.a=0,this.sc="",this.m=new Y,this.Od=new tr,this.Kc=new Mt,this.ed=new Bs,this.Qa=new bn,this.Ic=this.$c=this.Aa=0,this.D=new Ur,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=A(8,Y),this.ia=0,this.pb=A(4,kr),this.Pa=new lr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new hr),this.Hd=0,this.rb=Array(new Pn),this.sb=0,this.wa=Array(new Js),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new jr),this.L=this.aa=0,this.gd=u([4,2],Js),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function tn(E,M){return 0>E?0:E>M?M:E}function Is(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function dn(){var E=new qs;return E!=null&&(E.a=0,E.sc="OK",E.cb=0,E.Xb=0,fo||(fo=ms)),E}function Hs(E,M,X){return E.a==0&&(E.a=M,E.sc=X,E.cb=0),0}function wr(E,M,X){return 3<=X&&E[M+0]==157&&E[M+1]==1&&E[M+2]==42}function at(E,M){if(E==null)return 0;if(E.a=0,E.sc="OK",M==null)return Hs(E,2,"null VP8Io passed to VP8GetHeaders()");var X=M.data,oe=M.w,Ee=M.ha;if(4>Ee)return Hs(E,7,"Truncated header.");var Re=X[oe+0]|X[oe+1]<<8|X[oe+2]<<16,Ue=E.Od;if(Ue.Rb=!(1&Re),Ue.td=Re>>1&7,Ue.yd=Re>>4&1,Ue.ub=Re>>5,3<Ue.td)return Hs(E,3,"Incorrect keyframe parameters.");if(!Ue.yd)return Hs(E,4,"Frame not displayable.");oe+=3,Ee-=3;var Me=E.Kc;if(Ue.Rb){if(7>Ee)return Hs(E,7,"cannot parse picture header");if(!wr(X,oe,Ee))return Hs(E,3,"Bad code word");Me.c=16383&(X[oe+4]<<8|X[oe+3]),Me.Td=X[oe+4]>>6,Me.i=16383&(X[oe+6]<<8|X[oe+5]),Me.Ud=X[oe+6]>>6,oe+=7,Ee-=7,E.za=Me.c+15>>4,E.Ub=Me.i+15>>4,M.width=Me.c,M.height=Me.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,i((Re=E.Pa).jb,0,255,Re.jb.length),s((Re=E.Qa)!=null),Re.Cb=0,Re.Bb=0,Re.Fb=1,i(Re.Zb,0,0,Re.Zb.length),i(Re.Lb,0,0,Re.Lb)}if(Ue.ub>Ee)return Hs(E,7,"bad partition length");se(Re=E.m,X,oe,Ue.ub),oe+=Ue.ub,Ee-=Ue.ub,Ue.Rb&&(Me.Ld=we(Re),Me.Kd=we(Re)),Me=E.Qa;var Ke,et=E.Pa;if(s(Re!=null),s(Me!=null),Me.Cb=we(Re),Me.Cb){if(Me.Bb=we(Re),we(Re)){for(Me.Fb=we(Re),Ke=0;4>Ke;++Ke)Me.Zb[Ke]=we(Re)?te(Re,7):0;for(Ke=0;4>Ke;++Ke)Me.Lb[Ke]=we(Re)?te(Re,6):0}if(Me.Bb)for(Ke=0;3>Ke;++Ke)et.jb[Ke]=we(Re)?re(Re,8):255}else Me.Bb=0;if(Re.Ka)return Hs(E,3,"cannot parse segment header");if((Me=E.ed).zd=we(Re),Me.Tb=re(Re,6),Me.wb=re(Re,3),Me.Pc=we(Re),Me.Pc&&we(Re)){for(et=0;4>et;++et)we(Re)&&(Me.vd[et]=te(Re,6));for(et=0;4>et;++et)we(Re)&&(Me.od[et]=te(Re,6))}if(E.L=Me.Tb==0?0:Me.zd?1:2,Re.Ka)return Hs(E,3,"cannot parse filter header");var xt=Ee;if(Ee=Ke=oe,oe=Ke+xt,Me=xt,E.Xb=(1<<re(E.m,2))-1,xt<3*(et=E.Xb))X=7;else{for(Ke+=3*et,Me-=3*et,xt=0;xt<et;++xt){var _t=X[Ee+0]|X[Ee+1]<<8|X[Ee+2]<<16;_t>Me&&(_t=Me),se(E.Jc[+xt],X,Ke,_t),Ke+=_t,Me-=_t,Ee+=3}se(E.Jc[+et],X,Ke,Me),X=Ke<oe?0:5}if(X!=0)return Hs(E,X,"cannot parse partitions");for(X=re(Ke=E.m,7),Ee=we(Ke)?te(Ke,4):0,oe=we(Ke)?te(Ke,4):0,Me=we(Ke)?te(Ke,4):0,et=we(Ke)?te(Ke,4):0,Ke=we(Ke)?te(Ke,4):0,xt=E.Qa,_t=0;4>_t;++_t){if(xt.Cb){var Ze=xt.Zb[_t];xt.Fb||(Ze+=X)}else{if(0<_t){E.pb[_t]=E.pb[0];continue}Ze=X}var Nt=E.pb[_t];Nt.Sc[0]=Ro[tn(Ze+Ee,127)],Nt.Sc[1]=Ji[tn(Ze+0,127)],Nt.Eb[0]=2*Ro[tn(Ze+oe,127)],Nt.Eb[1]=101581*Ji[tn(Ze+Me,127)]>>16,8>Nt.Eb[1]&&(Nt.Eb[1]=8),Nt.Qc[0]=Ro[tn(Ze+et,117)],Nt.Qc[1]=Ji[tn(Ze+Ke,127)],Nt.lc=Ze+Ke}if(!Ue.Rb)return Hs(E,4,"Not a key frame.");for(we(Re),Ue=E.Pa,X=0;4>X;++X){for(Ee=0;8>Ee;++Ee)for(oe=0;3>oe;++oe)for(Me=0;11>Me;++Me)et=Ne(Re,ga[X][Ee][oe][Me])?re(Re,8):Rh[X][Ee][oe][Me],Ue.Wc[X][Ee].Yb[oe][Me]=et;for(Ee=0;17>Ee;++Ee)Ue.Xc[X][Ee]=Ue.Wc[X][xr[Ee]]}return E.kc=we(Re),E.kc&&(E.Bd=re(Re,8)),E.cb=1}function ms(E,M,X,oe,Ee,Re,Ue){var Me=M[Ee].Yb[X];for(X=0;16>Ee;++Ee){if(!Ne(E,Me[X+0]))return Ee;for(;!Ne(E,Me[X+1]);)if(Me=M[++Ee].Yb[0],X=0,Ee==16)return 16;var Ke=M[Ee+1].Yb;if(Ne(E,Me[X+2])){var et=E,xt=0;if(Ne(et,(Ze=Me)[(_t=X)+3]))if(Ne(et,Ze[_t+6])){for(Me=0,_t=2*(xt=Ne(et,Ze[_t+8]))+(Ze=Ne(et,Ze[_t+9+xt])),xt=0,Ze=Ih[_t];Ze[Me];++Me)xt+=xt+Ne(et,Ze[Me]);xt+=3+(8<<_t)}else Ne(et,Ze[_t+7])?(xt=7+2*Ne(et,165),xt+=Ne(et,145)):xt=5+Ne(et,159);else xt=Ne(et,Ze[_t+4])?3+Ne(et,Ze[_t+5]):2;Me=Ke[2]}else xt=1,Me=Ke[1];Ke=Ue+Eu[Ee],0>(et=E).b&&ye(et);var _t,Ze=et.b,Nt=(_t=et.Ca>>1)-(et.I>>Ze)>>31;--et.b,et.Ca+=Nt,et.Ca|=1,et.I-=(_t+1&Nt)<<Ze,Re[Ke]=((xt^Nt)-Nt)*oe[(0<Ee)+0]}return 16}function ds(E){var M=E.rb[E.sb-1];M.la=0,M.Na=0,i(E.zc,0,0,E.zc.length),E.ja=0}function Nn(E,M,X,oe,Ee){Ee=E[M+X+32*oe]+(Ee>>3),E[M+X+32*oe]=-256&Ee?0>Ee?0:255:Ee}function Yn(E,M,X,oe,Ee,Re){Nn(E,M,0,X,oe+Ee),Nn(E,M,1,X,oe+Re),Nn(E,M,2,X,oe-Re),Nn(E,M,3,X,oe-Ee)}function sr(E){return(20091*E>>16)+E}function ha(E,M,X,oe){var Ee,Re=0,Ue=c(16);for(Ee=0;4>Ee;++Ee){var Me=E[M+0]+E[M+8],Ke=E[M+0]-E[M+8],et=(35468*E[M+4]>>16)-sr(E[M+12]),xt=sr(E[M+4])+(35468*E[M+12]>>16);Ue[Re+0]=Me+xt,Ue[Re+1]=Ke+et,Ue[Re+2]=Ke-et,Ue[Re+3]=Me-xt,Re+=4,M++}for(Ee=Re=0;4>Ee;++Ee)Me=(E=Ue[Re+0]+4)+Ue[Re+8],Ke=E-Ue[Re+8],et=(35468*Ue[Re+4]>>16)-sr(Ue[Re+12]),Nn(X,oe,0,0,Me+(xt=sr(Ue[Re+4])+(35468*Ue[Re+12]>>16))),Nn(X,oe,1,0,Ke+et),Nn(X,oe,2,0,Ke-et),Nn(X,oe,3,0,Me-xt),Re++,oe+=32}function Ma(E,M,X,oe){var Ee=E[M+0]+4,Re=35468*E[M+4]>>16,Ue=sr(E[M+4]),Me=35468*E[M+1]>>16;Yn(X,oe,0,Ee+Ue,E=sr(E[M+1]),Me),Yn(X,oe,1,Ee+Re,E,Me),Yn(X,oe,2,Ee-Re,E,Me),Yn(X,oe,3,Ee-Ue,E,Me)}function Na(E,M,X,oe,Ee){ha(E,M,X,oe),Ee&&ha(E,M+16,X,oe+4)}function cr(E,M,X,oe){Ll(E,M+0,X,oe,1),Ll(E,M+32,X,oe+128,1)}function Ka(E,M,X,oe){var Ee;for(E=E[M+0]+4,Ee=0;4>Ee;++Ee)for(M=0;4>M;++M)Nn(X,oe,M,Ee,E)}function pa(E,M,X,oe){E[M+0]&&Dr(E,M+0,X,oe),E[M+16]&&Dr(E,M+16,X,oe+4),E[M+32]&&Dr(E,M+32,X,oe+128),E[M+48]&&Dr(E,M+48,X,oe+128+4)}function er(E,M,X,oe){var Ee,Re=c(16);for(Ee=0;4>Ee;++Ee){var Ue=E[M+0+Ee]+E[M+12+Ee],Me=E[M+4+Ee]+E[M+8+Ee],Ke=E[M+4+Ee]-E[M+8+Ee],et=E[M+0+Ee]-E[M+12+Ee];Re[0+Ee]=Ue+Me,Re[8+Ee]=Ue-Me,Re[4+Ee]=et+Ke,Re[12+Ee]=et-Ke}for(Ee=0;4>Ee;++Ee)Ue=(E=Re[0+4*Ee]+3)+Re[3+4*Ee],Me=Re[1+4*Ee]+Re[2+4*Ee],Ke=Re[1+4*Ee]-Re[2+4*Ee],et=E-Re[3+4*Ee],X[oe+0]=Ue+Me>>3,X[oe+16]=et+Ke>>3,X[oe+32]=Ue-Me>>3,X[oe+48]=et-Ke>>3,oe+=64}function oa(E,M,X){var oe,Ee=M-32,Re=Hi,Ue=255-E[Ee-1];for(oe=0;oe<X;++oe){var Me,Ke=Re,et=Ue+E[M-1];for(Me=0;Me<X;++Me)E[M+Me]=Ke[et+E[Ee+Me]];M+=32}}function pi(E,M){oa(E,M,4)}function $a(E,M){oa(E,M,8)}function Va(E,M){oa(E,M,16)}function ti(E,M){var X;for(X=0;16>X;++X)r(E,M+32*X,E,M-32,16)}function xe(E,M){var X;for(X=16;0<X;--X)i(E,M,E[M-1],16),M+=32}function _e(E,M,X){var oe;for(oe=0;16>oe;++oe)i(M,X+32*oe,E,16)}function nt(E,M){var X,oe=16;for(X=0;16>X;++X)oe+=E[M-1+32*X]+E[M+X-32];_e(oe>>5,E,M)}function V(E,M){var X,oe=8;for(X=0;16>X;++X)oe+=E[M-1+32*X];_e(oe>>4,E,M)}function Te(E,M){var X,oe=8;for(X=0;16>X;++X)oe+=E[M+X-32];_e(oe>>4,E,M)}function Ye(E,M){_e(128,E,M)}function Oe(E,M,X){return E+2*M+X+2>>2}function yt(E,M){var X,oe=M-32;for(oe=new Uint8Array([Oe(E[oe-1],E[oe+0],E[oe+1]),Oe(E[oe+0],E[oe+1],E[oe+2]),Oe(E[oe+1],E[oe+2],E[oe+3]),Oe(E[oe+2],E[oe+3],E[oe+4])]),X=0;4>X;++X)r(E,M+32*X,oe,0,oe.length)}function Qt(E,M){var X=E[M-1],oe=E[M-1+32],Ee=E[M-1+64],Re=E[M-1+96];ke(E,M+0,16843009*Oe(E[M-1-32],X,oe)),ke(E,M+32,16843009*Oe(X,oe,Ee)),ke(E,M+64,16843009*Oe(oe,Ee,Re)),ke(E,M+96,16843009*Oe(Ee,Re,Re))}function ln(E,M){var X,oe=4;for(X=0;4>X;++X)oe+=E[M+X-32]+E[M-1+32*X];for(oe>>=3,X=0;4>X;++X)i(E,M+32*X,oe,4)}function Ln(E,M){var X=E[M-1+0],oe=E[M-1+32],Ee=E[M-1+64],Re=E[M-1-32],Ue=E[M+0-32],Me=E[M+1-32],Ke=E[M+2-32],et=E[M+3-32];E[M+0+96]=Oe(oe,Ee,E[M-1+96]),E[M+1+96]=E[M+0+64]=Oe(X,oe,Ee),E[M+2+96]=E[M+1+64]=E[M+0+32]=Oe(Re,X,oe),E[M+3+96]=E[M+2+64]=E[M+1+32]=E[M+0+0]=Oe(Ue,Re,X),E[M+3+64]=E[M+2+32]=E[M+1+0]=Oe(Me,Ue,Re),E[M+3+32]=E[M+2+0]=Oe(Ke,Me,Ue),E[M+3+0]=Oe(et,Ke,Me)}function bs(E,M){var X=E[M+1-32],oe=E[M+2-32],Ee=E[M+3-32],Re=E[M+4-32],Ue=E[M+5-32],Me=E[M+6-32],Ke=E[M+7-32];E[M+0+0]=Oe(E[M+0-32],X,oe),E[M+1+0]=E[M+0+32]=Oe(X,oe,Ee),E[M+2+0]=E[M+1+32]=E[M+0+64]=Oe(oe,Ee,Re),E[M+3+0]=E[M+2+32]=E[M+1+64]=E[M+0+96]=Oe(Ee,Re,Ue),E[M+3+32]=E[M+2+64]=E[M+1+96]=Oe(Re,Ue,Me),E[M+3+64]=E[M+2+96]=Oe(Ue,Me,Ke),E[M+3+96]=Oe(Me,Ke,Ke)}function Ps(E,M){var X=E[M-1+0],oe=E[M-1+32],Ee=E[M-1+64],Re=E[M-1-32],Ue=E[M+0-32],Me=E[M+1-32],Ke=E[M+2-32],et=E[M+3-32];E[M+0+0]=E[M+1+64]=Re+Ue+1>>1,E[M+1+0]=E[M+2+64]=Ue+Me+1>>1,E[M+2+0]=E[M+3+64]=Me+Ke+1>>1,E[M+3+0]=Ke+et+1>>1,E[M+0+96]=Oe(Ee,oe,X),E[M+0+64]=Oe(oe,X,Re),E[M+0+32]=E[M+1+96]=Oe(X,Re,Ue),E[M+1+32]=E[M+2+96]=Oe(Re,Ue,Me),E[M+2+32]=E[M+3+96]=Oe(Ue,Me,Ke),E[M+3+32]=Oe(Me,Ke,et)}function Dn(E,M){var X=E[M+0-32],oe=E[M+1-32],Ee=E[M+2-32],Re=E[M+3-32],Ue=E[M+4-32],Me=E[M+5-32],Ke=E[M+6-32],et=E[M+7-32];E[M+0+0]=X+oe+1>>1,E[M+1+0]=E[M+0+64]=oe+Ee+1>>1,E[M+2+0]=E[M+1+64]=Ee+Re+1>>1,E[M+3+0]=E[M+2+64]=Re+Ue+1>>1,E[M+0+32]=Oe(X,oe,Ee),E[M+1+32]=E[M+0+96]=Oe(oe,Ee,Re),E[M+2+32]=E[M+1+96]=Oe(Ee,Re,Ue),E[M+3+32]=E[M+2+96]=Oe(Re,Ue,Me),E[M+3+64]=Oe(Ue,Me,Ke),E[M+3+96]=Oe(Me,Ke,et)}function Hn(E,M){var X=E[M-1+0],oe=E[M-1+32],Ee=E[M-1+64],Re=E[M-1+96];E[M+0+0]=X+oe+1>>1,E[M+2+0]=E[M+0+32]=oe+Ee+1>>1,E[M+2+32]=E[M+0+64]=Ee+Re+1>>1,E[M+1+0]=Oe(X,oe,Ee),E[M+3+0]=E[M+1+32]=Oe(oe,Ee,Re),E[M+3+32]=E[M+1+64]=Oe(Ee,Re,Re),E[M+3+64]=E[M+2+64]=E[M+0+96]=E[M+1+96]=E[M+2+96]=E[M+3+96]=Re}function qn(E,M){var X=E[M-1+0],oe=E[M-1+32],Ee=E[M-1+64],Re=E[M-1+96],Ue=E[M-1-32],Me=E[M+0-32],Ke=E[M+1-32],et=E[M+2-32];E[M+0+0]=E[M+2+32]=X+Ue+1>>1,E[M+0+32]=E[M+2+64]=oe+X+1>>1,E[M+0+64]=E[M+2+96]=Ee+oe+1>>1,E[M+0+96]=Re+Ee+1>>1,E[M+3+0]=Oe(Me,Ke,et),E[M+2+0]=Oe(Ue,Me,Ke),E[M+1+0]=E[M+3+32]=Oe(X,Ue,Me),E[M+1+32]=E[M+3+64]=Oe(oe,X,Ue),E[M+1+64]=E[M+3+96]=Oe(Ee,oe,X),E[M+1+96]=Oe(Re,Ee,oe)}function Yr(E,M){var X;for(X=0;8>X;++X)r(E,M+32*X,E,M-32,8)}function v(E,M){var X;for(X=0;8>X;++X)i(E,M,E[M-1],8),M+=32}function N(E,M,X){var oe;for(oe=0;8>oe;++oe)i(M,X+32*oe,E,8)}function x(E,M){var X,oe=8;for(X=0;8>X;++X)oe+=E[M+X-32]+E[M-1+32*X];N(oe>>4,E,M)}function I(E,M){var X,oe=4;for(X=0;8>X;++X)oe+=E[M+X-32];N(oe>>3,E,M)}function F(E,M){var X,oe=4;for(X=0;8>X;++X)oe+=E[M-1+32*X];N(oe>>3,E,M)}function _(E,M){N(128,E,M)}function L(E,M,X){var oe=E[M-X],Ee=E[M+0],Re=3*(Ee-oe)+ul[1020+E[M-2*X]-E[M+X]],Ue=Kd[112+(Re+4>>3)];E[M-X]=Hi[255+oe+Kd[112+(Re+3>>3)]],E[M+0]=Hi[255+Ee-Ue]}function P(E,M,X,oe){var Ee=E[M+0],Re=E[M+X];return Fi[255+E[M-2*X]-E[M-X]]>oe||Fi[255+Re-Ee]>oe}function z(E,M,X,oe){return 4*Fi[255+E[M-X]-E[M+0]]+Fi[255+E[M-2*X]-E[M+X]]<=oe}function ne(E,M,X,oe,Ee){var Re=E[M-3*X],Ue=E[M-2*X],Me=E[M-X],Ke=E[M+0],et=E[M+X],xt=E[M+2*X],_t=E[M+3*X];return 4*Fi[255+Me-Ke]+Fi[255+Ue-et]>oe?0:Fi[255+E[M-4*X]-Re]<=Ee&&Fi[255+Re-Ue]<=Ee&&Fi[255+Ue-Me]<=Ee&&Fi[255+_t-xt]<=Ee&&Fi[255+xt-et]<=Ee&&Fi[255+et-Ke]<=Ee}function Ie(E,M,X,oe){var Ee=2*oe+1;for(oe=0;16>oe;++oe)z(E,M+oe,X,Ee)&&L(E,M+oe,X)}function st(E,M,X,oe){var Ee=2*oe+1;for(oe=0;16>oe;++oe)z(E,M+oe*X,1,Ee)&&L(E,M+oe*X,1)}function ot(E,M,X,oe){var Ee;for(Ee=3;0<Ee;--Ee)Ie(E,M+=4*X,X,oe)}function Dt(E,M,X,oe){var Ee;for(Ee=3;0<Ee;--Ee)st(E,M+=4,X,oe)}function rs(E,M,X,oe,Ee,Re,Ue,Me){for(Re=2*Re+1;0<Ee--;){if(ne(E,M,X,Re,Ue))if(P(E,M,X,Me))L(E,M,X);else{var Ke=E,et=M,xt=X,_t=Ke[et-2*xt],Ze=Ke[et-xt],Nt=Ke[et+0],Ct=Ke[et+xt],ss=Ke[et+2*xt],Ut=27*(ls=ul[1020+3*(Nt-Ze)+ul[1020+_t-Ct]])+63>>7,ts=18*ls+63>>7,ls=9*ls+63>>7;Ke[et-3*xt]=Hi[255+Ke[et-3*xt]+ls],Ke[et-2*xt]=Hi[255+_t+ts],Ke[et-xt]=Hi[255+Ze+Ut],Ke[et+0]=Hi[255+Nt-Ut],Ke[et+xt]=Hi[255+Ct-ts],Ke[et+2*xt]=Hi[255+ss-ls]}M+=oe}}function cs(E,M,X,oe,Ee,Re,Ue,Me){for(Re=2*Re+1;0<Ee--;){if(ne(E,M,X,Re,Ue))if(P(E,M,X,Me))L(E,M,X);else{var Ke=E,et=M,xt=X,_t=Ke[et-xt],Ze=Ke[et+0],Nt=Ke[et+xt],Ct=Kd[112+(4+(ss=3*(Ze-_t))>>3)],ss=Kd[112+(ss+3>>3)],Ut=Ct+1>>1;Ke[et-2*xt]=Hi[255+Ke[et-2*xt]+Ut],Ke[et-xt]=Hi[255+_t+ss],Ke[et+0]=Hi[255+Ze-Ct],Ke[et+xt]=Hi[255+Nt-Ut]}M+=oe}}function Ns(E,M,X,oe,Ee,Re){rs(E,M,X,1,16,oe,Ee,Re)}function Zs(E,M,X,oe,Ee,Re){rs(E,M,1,X,16,oe,Ee,Re)}function Rn(E,M,X,oe,Ee,Re){var Ue;for(Ue=3;0<Ue;--Ue)cs(E,M+=4*X,X,1,16,oe,Ee,Re)}function $(E,M,X,oe,Ee,Re){var Ue;for(Ue=3;0<Ue;--Ue)cs(E,M+=4,1,X,16,oe,Ee,Re)}function ve(E,M,X,oe,Ee,Re,Ue,Me){rs(E,M,Ee,1,8,Re,Ue,Me),rs(X,oe,Ee,1,8,Re,Ue,Me)}function Ve(E,M,X,oe,Ee,Re,Ue,Me){rs(E,M,1,Ee,8,Re,Ue,Me),rs(X,oe,1,Ee,8,Re,Ue,Me)}function At(E,M,X,oe,Ee,Re,Ue,Me){cs(E,M+4*Ee,Ee,1,8,Re,Ue,Me),cs(X,oe+4*Ee,Ee,1,8,Re,Ue,Me)}function Bt(E,M,X,oe,Ee,Re,Ue,Me){cs(E,M+4,1,Ee,8,Re,Ue,Me),cs(X,oe+4,1,Ee,8,Re,Ue,Me)}function as(){this.ba=new us,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new kt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function gs(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function cn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function vn(){this.ua=0,this.Wa=new rt,this.vb=new rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new de,this.yc=new ce}function Qn(){this.xb=this.a=0,this.l=new Is,this.ca=new us,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new me,this.Pb=0,this.wd=new me,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new vn,this.ab=0,this.gc=A(4,cn),this.Oc=0}function Xn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Is,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fr(E,M,X,oe,Ee,Re,Ue){for(E=E==null?0:E[M+0],M=0;M<Ue;++M)Ee[Re+M]=E+X[oe+M]&255,E=Ee[Re+M]}function Fa(E,M,X,oe,Ee,Re,Ue){var Me;if(E==null)Fr(null,null,X,oe,Ee,Re,Ue);else for(Me=0;Me<Ue;++Me)Ee[Re+Me]=E[M+Me]+X[oe+Me]&255}function qa(E,M,X,oe,Ee,Re,Ue){if(E==null)Fr(null,null,X,oe,Ee,Re,Ue);else{var Me,Ke=E[M+0],et=Ke,xt=Ke;for(Me=0;Me<Ue;++Me)et=xt+(Ke=E[M+Me])-et,xt=X[oe+Me]+(-256&et?0>et?0:255:et)&255,et=Ke,Ee[Re+Me]=xt}}function Xr(E,M,X,oe){var Ee=M.width,Re=M.o;if(s(E!=null&&M!=null),0>X||0>=oe||X+oe>Re)return null;if(!E.Cc){if(E.ga==null){var Ue;if(E.ga=new Xn,(Ue=E.ga==null)||(Ue=M.width*M.o,s(E.Gb.length==0),E.Gb=c(Ue),E.Uc=0,E.Gb==null?Ue=0:(E.mb=E.Gb,E.nb=E.Uc,E.rc=null,Ue=1),Ue=!Ue),!Ue){Ue=E.ga;var Me=E.Fa,Ke=E.P,et=E.qc,xt=E.mb,_t=E.nb,Ze=Ke+1,Nt=et-1,Ct=Ue.l;if(s(Me!=null&&xt!=null&&M!=null),hl[0]=null,hl[1]=Fr,hl[2]=Fa,hl[3]=qa,Ue.ca=xt,Ue.tb=_t,Ue.c=M.width,Ue.i=M.height,s(0<Ue.c&&0<Ue.i),1>=et)M=0;else if(Ue.$a=3&Me[Ke+0],Ue.Z=Me[Ke+0]>>2&3,Ue.Lc=Me[Ke+0]>>4&3,Ke=Me[Ke+0]>>6&3,0>Ue.$a||1<Ue.$a||4<=Ue.Z||1<Ue.Lc||Ke)M=0;else if(Ct.put=es,Ct.ac=nn,Ct.bc=zs,Ct.ma=Ue,Ct.width=M.width,Ct.height=M.height,Ct.Da=M.Da,Ct.v=M.v,Ct.va=M.va,Ct.j=M.j,Ct.o=M.o,Ue.$a)e:{s(Ue.$a==1),M=Gt();t:for(;;){if(M==null){M=0;break e}if(s(Ue!=null),Ue.mc=M,M.c=Ue.c,M.i=Ue.i,M.l=Ue.l,M.l.ma=Ue,M.l.width=Ue.c,M.l.height=Ue.i,M.a=0,be(M.m,Me,Ze,Nt),!Ys(Ue.c,Ue.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&Kt(M.s)?(Ue.ic=1,Me=M.c*M.i,M.Ta=null,M.Ua=0,M.V=c(Me),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(Ue.ic=0,M=Cn(M,Ue.c)),!M))break t;M=1;break e}Ue.mc=null,M=0}else M=Nt>=Ue.c*Ue.i;Ue=!M}if(Ue)return null;E.ga.Lc!=1?E.Ga=0:oe=Re-X}s(E.ga!=null),s(X+oe<=Re);e:{if(M=(Me=E.ga).c,Re=Me.l.o,Me.$a==0){if(Ze=E.rc,Nt=E.Vc,Ct=E.Fa,Ke=E.P+1+X*M,et=E.mb,xt=E.nb+X*M,s(Ke<=E.P+E.qc),Me.Z!=0)for(s(hl[Me.Z]!=null),Ue=0;Ue<oe;++Ue)hl[Me.Z](Ze,Nt,Ct,Ke,et,xt,M),Ze=et,Nt=xt,xt+=M,Ke+=M;else for(Ue=0;Ue<oe;++Ue)r(et,xt,Ct,Ke,M),Ze=et,Nt=xt,xt+=M,Ke+=M;E.rc=Ze,E.Vc=Nt}else{if(s(Me.mc!=null),M=X+oe,s((Ue=Me.mc)!=null),s(M<=Ue.i),Ue.C>=M)M=1;else if(Me.ic||Yo(),Me.ic){Me=Ue.V,Ze=Ue.Ba,Nt=Ue.c;var ss=Ue.i,Ut=(Ct=1,Ke=Ue.$/Nt,et=Ue.$%Nt,xt=Ue.m,_t=Ue.s,Ue.$),ts=Nt*ss,ls=Nt*M,Cs=_t.wc,fs=Ut<ls?Ds(_t,et,Ke):null;s(Ut<=ts),s(M<=ss),s(Kt(_t));t:for(;;){for(;!xt.h&&Ut<ls;){if(et&Cs||(fs=Ds(_t,et,Ke)),s(fs!=null),ge(xt),256>(ss=js(fs.G[0],fs.H[0],xt)))Me[Ze+Ut]=ss,++Ut,++et>=Nt&&(et=0,++Ke<=M&&!(Ke%16)&&Ts(Ue,Ke));else{if(!(280>ss)){Ct=0;break t}ss=Vs(ss-256,xt);var An,sn=js(fs.G[4],fs.H[4],xt);if(ge(xt),!(Ut>=(sn=Ls(Nt,sn=Vs(sn,xt)))&&ts-Ut>=ss)){Ct=0;break t}for(An=0;An<ss;++An)Me[Ze+Ut+An]=Me[Ze+Ut+An-sn];for(Ut+=ss,et+=ss;et>=Nt;)et-=Nt,++Ke<=M&&!(Ke%16)&&Ts(Ue,Ke);Ut<ls&&et&Cs&&(fs=Ds(_t,et,Ke))}s(xt.h==je(xt))}Ts(Ue,Ke>M?M:Ke);break t}!Ct||xt.h&&Ut<ts?(Ct=0,Ue.a=xt.h?5:3):Ue.$=Ut,M=Ct}else M=ys(Ue,Ue.V,Ue.Ba,Ue.c,Ue.i,M,na);if(!M){oe=0;break e}}X+oe>=Re&&(E.Cc=1),oe=1}if(!oe)return null;if(E.Cc&&((oe=E.ga)!=null&&(oe.mc=null),E.ga=null,0<E.Ga))return alert("todo:WebPDequantizeLevels"),null}return E.nb+X*Ee}function mi(E,M,X,oe,Ee,Re){for(;0<Ee--;){var Ue,Me=E,Ke=M+(X?1:0),et=E,xt=M+(X?0:3);for(Ue=0;Ue<oe;++Ue){var _t=et[xt+4*Ue];_t!=255&&(_t*=32897,Me[Ke+4*Ue+0]=Me[Ke+4*Ue+0]*_t>>23,Me[Ke+4*Ue+1]=Me[Ke+4*Ue+1]*_t>>23,Me[Ke+4*Ue+2]=Me[Ke+4*Ue+2]*_t>>23)}M+=Re}}function si(E,M,X,oe,Ee){for(;0<oe--;){var Re;for(Re=0;Re<X;++Re){var Ue=E[M+2*Re+0],Me=15&(et=E[M+2*Re+1]),Ke=4369*Me,et=(240&et|et>>4)*Ke>>16;E[M+2*Re+0]=(240&Ue|Ue>>4)*Ke>>16&240|(15&Ue|Ue<<4)*Ke>>16>>4&15,E[M+2*Re+1]=240&et|Me}M+=Ee}}function Ci(E,M,X,oe,Ee,Re,Ue,Me){var Ke,et,xt=255;for(et=0;et<Ee;++et){for(Ke=0;Ke<oe;++Ke){var _t=E[M+Ke];Re[Ue+4*Ke]=_t,xt&=_t}M+=X,Ue+=Me}return xt!=255}function Rl(E,M,X,oe,Ee){var Re;for(Re=0;Re<Ee;++Re)X[oe+Re]=E[M+Re]>>8}function Yo(){nc=mi,uo=si,od=Ci,ho=Rl}function Ol(E,M,X){W[E]=function(oe,Ee,Re,Ue,Me,Ke,et,xt,_t,Ze,Nt,Ct,ss,Ut,ts,ls,Cs){var fs,An=Cs-1>>1,sn=Me[Ke+0]|et[xt+0]<<16,zn=_t[Ze+0]|Nt[Ct+0]<<16;s(oe!=null);var on=3*sn+zn+131074>>2;for(M(oe[Ee+0],255&on,on>>16,ss,Ut),Re!=null&&(on=3*zn+sn+131074>>2,M(Re[Ue+0],255&on,on>>16,ts,ls)),fs=1;fs<=An;++fs){var fr=Me[Ke+fs]|et[xt+fs]<<16,ya=_t[Ze+fs]|Nt[Ct+fs]<<16,Gn=sn+fr+zn+ya+524296,Yt=Gn+2*(fr+zn)>>3;on=Yt+sn>>1,sn=(Gn=Gn+2*(sn+ya)>>3)+fr>>1,M(oe[Ee+2*fs-1],255&on,on>>16,ss,Ut+(2*fs-1)*X),M(oe[Ee+2*fs-0],255&sn,sn>>16,ss,Ut+(2*fs-0)*X),Re!=null&&(on=Gn+zn>>1,sn=Yt+ya>>1,M(Re[Ue+2*fs-1],255&on,on>>16,ts,ls+(2*fs-1)*X),M(Re[Ue+2*fs+0],255&sn,sn>>16,ts,ls+(2*fs+0)*X)),sn=fr,zn=ya}1&Cs||(on=3*sn+zn+131074>>2,M(oe[Ee+Cs-1],255&on,on>>16,ss,Ut+(Cs-1)*X),Re!=null&&(on=3*zn+sn+131074>>2,M(Re[Ue+Cs-1],255&on,on>>16,ts,ls+(Cs-1)*X)))}}function Hd(){Ri[NA]=Dc,Ri[zi]=_l,Ri[Dl]=qd,Ri[Eo]=TA,Ri[$d]=lc,Ri[Ql]=fl,Ri[rc]=cc,Ri[Vd]=_l,Ri[BA]=TA,Ri[ld]=lc,Ri[Uc]=fl}function ad(E){return E&-16384?0>E?0:255:E>>FA}function wo(E,M){return ad((19077*E>>8)+(26149*M>>8)-14234)}function So(E,M,X){return ad((19077*E>>8)-(6419*M>>8)-(13320*X>>8)+8708)}function Zl(E,M){return ad((19077*E>>8)+(33050*M>>8)-17685)}function Ao(E,M,X,oe,Ee){oe[Ee+0]=wo(E,X),oe[Ee+1]=So(E,M,X),oe[Ee+2]=Zl(E,M)}function Ia(E,M,X,oe,Ee){oe[Ee+0]=Zl(E,M),oe[Ee+1]=So(E,M,X),oe[Ee+2]=wo(E,X)}function yr(E,M,X,oe,Ee){var Re=So(E,M,X);M=Re<<3&224|Zl(E,M)>>3,oe[Ee+0]=248&wo(E,X)|Re>>5,oe[Ee+1]=M}function ec(E,M,X,oe,Ee){var Re=240&Zl(E,M)|15;oe[Ee+0]=240&wo(E,X)|So(E,M,X)>>4,oe[Ee+1]=Re}function tc(E,M,X,oe,Ee){oe[Ee+0]=255,Ao(E,M,X,oe,Ee+1)}function Xo(E,M,X,oe,Ee){Ia(E,M,X,oe,Ee),oe[Ee+3]=255}function ni(E,M,X,oe,Ee){Ao(E,M,X,oe,Ee),oe[Ee+3]=255}function bi(E,M,X){W[E]=function(oe,Ee,Re,Ue,Me,Ke,et,xt,_t){for(var Ze=xt+(-2&_t)*X;xt!=Ze;)M(oe[Ee+0],Re[Ue+0],Me[Ke+0],et,xt),M(oe[Ee+1],Re[Ue+0],Me[Ke+0],et,xt+X),Ee+=2,++Ue,++Ke,xt+=2*X;1&_t&&M(oe[Ee+0],Re[Ue+0],Me[Ke+0],et,xt)}}function id(E,M,X){return X==0?E==0?M==0?6:5:M==0?4:0:X}function No(E,M,X,oe,Ee){switch(E>>>30){case 3:Ll(M,X,oe,Ee,0);break;case 2:ki(M,X,oe,Ee);break;case 1:Dr(M,X,oe,Ee)}}function Lr(E,M){var X,oe,Ee=M.M,Re=M.Nb,Ue=E.oc,Me=E.pc+40,Ke=E.oc,et=E.pc+584,xt=E.oc,_t=E.pc+600;for(X=0;16>X;++X)Ue[Me+32*X-1]=129;for(X=0;8>X;++X)Ke[et+32*X-1]=129,xt[_t+32*X-1]=129;for(0<Ee?Ue[Me-1-32]=Ke[et-1-32]=xt[_t-1-32]=129:(i(Ue,Me-32-1,127,21),i(Ke,et-32-1,127,9),i(xt,_t-32-1,127,9)),oe=0;oe<E.za;++oe){var Ze=M.ya[M.aa+oe];if(0<oe){for(X=-1;16>X;++X)r(Ue,Me+32*X-4,Ue,Me+32*X+12,4);for(X=-1;8>X;++X)r(Ke,et+32*X-4,Ke,et+32*X+4,4),r(xt,_t+32*X-4,xt,_t+32*X+4,4)}var Nt=E.Gd,Ct=E.Hd+oe,ss=Ze.ad,Ut=Ze.Hc;if(0<Ee&&(r(Ue,Me-32,Nt[Ct].y,0,16),r(Ke,et-32,Nt[Ct].f,0,8),r(xt,_t-32,Nt[Ct].ea,0,8)),Ze.Za){var ts=Ue,ls=Me-32+16;for(0<Ee&&(oe>=E.za-1?i(ts,ls,Nt[Ct].y[15],4):r(ts,ls,Nt[Ct+1].y,0,4)),X=0;4>X;X++)ts[ls+128+X]=ts[ls+256+X]=ts[ls+384+X]=ts[ls+0+X];for(X=0;16>X;++X,Ut<<=2)ts=Ue,ls=Me+Wa[X],ka[Ze.Ob[X]](ts,ls),No(Ut,ss,16*+X,ts,ls)}else if(ts=id(oe,Ee,Ze.Ob[0]),Zi[ts](Ue,Me),Ut!=0)for(X=0;16>X;++X,Ut<<=2)No(Ut,ss,16*+X,Ue,Me+Wa[X]);for(X=Ze.Gc,ts=id(oe,Ee,Ze.Dd),ao[ts](Ke,et),ao[ts](xt,_t),Ut=ss,ts=Ke,ls=et,255&(Ze=0|X)&&(170&Ze?Xi(Ut,256,ts,ls):Ir(Ut,256,ts,ls)),Ze=xt,Ut=_t,255&(X>>=8)&&(170&X?Xi(ss,320,Ze,Ut):Ir(ss,320,Ze,Ut)),Ee<E.Ub-1&&(r(Nt[Ct].y,0,Ue,Me+480,16),r(Nt[Ct].f,0,Ke,et+224,8),r(Nt[Ct].ea,0,xt,_t+224,8)),X=8*Re*E.B,Nt=E.sa,Ct=E.ta+16*oe+16*Re*E.R,ss=E.qa,Ze=E.ra+8*oe+X,Ut=E.Ha,ts=E.Ia+8*oe+X,X=0;16>X;++X)r(Nt,Ct+X*E.R,Ue,Me+32*X,16);for(X=0;8>X;++X)r(ss,Ze+X*E.B,Ke,et+32*X,8),r(Ut,ts+X*E.B,xt,_t+32*X,8)}}function Bo(E,M,X,oe,Ee,Re,Ue,Me,Ke){var et=[0],xt=[0],_t=0,Ze=Ke!=null?Ke.kd:0,Nt=Ke??new gs;if(E==null||12>X)return 7;Nt.data=E,Nt.w=M,Nt.ha=X,M=[M],X=[X],Nt.gb=[Nt.gb];e:{var Ct=M,ss=X,Ut=Nt.gb;if(s(E!=null),s(ss!=null),s(Ut!=null),Ut[0]=0,12<=ss[0]&&!n(E,Ct[0],"RIFF")){if(n(E,Ct[0]+8,"WEBP")){Ut=3;break e}var ts=Qe(E,Ct[0]+4);if(12>ts||4294967286<ts){Ut=3;break e}if(Ze&&ts>ss[0]-8){Ut=7;break e}Ut[0]=ts,Ct[0]+=12,ss[0]-=12}Ut=0}if(Ut!=0)return Ut;for(ts=0<Nt.gb[0],X=X[0];;){e:{var ls=E;ss=M,Ut=X;var Cs=et,fs=xt,An=Ct=[0];if((on=_t=[_t])[0]=0,8>Ut[0])Ut=7;else{if(!n(ls,ss[0],"VP8X")){if(Qe(ls,ss[0]+4)!=10){Ut=3;break e}if(18>Ut[0]){Ut=7;break e}var sn=Qe(ls,ss[0]+8),zn=1+Ae(ls,ss[0]+12);if(2147483648<=zn*(ls=1+Ae(ls,ss[0]+15))){Ut=3;break e}An!=null&&(An[0]=sn),Cs!=null&&(Cs[0]=zn),fs!=null&&(fs[0]=ls),ss[0]+=18,Ut[0]-=18,on[0]=1}Ut=0}}if(_t=_t[0],Ct=Ct[0],Ut!=0)return Ut;if(ss=!!(2&Ct),!ts&&_t)return 3;if(Re!=null&&(Re[0]=!!(16&Ct)),Ue!=null&&(Ue[0]=ss),Me!=null&&(Me[0]=0),Ue=et[0],Ct=xt[0],_t&&ss&&Ke==null){Ut=0;break}if(4>X){Ut=7;break}if(ts&&_t||!ts&&!_t&&!n(E,M[0],"ALPH")){X=[X],Nt.na=[Nt.na],Nt.P=[Nt.P],Nt.Sa=[Nt.Sa];e:{sn=E,Ut=M,ts=X;var on=Nt.gb;Cs=Nt.na,fs=Nt.P,An=Nt.Sa,zn=22,s(sn!=null),s(ts!=null),ls=Ut[0];var fr=ts[0];for(s(Cs!=null),s(An!=null),Cs[0]=null,fs[0]=null,An[0]=0;;){if(Ut[0]=ls,ts[0]=fr,8>fr){Ut=7;break e}var ya=Qe(sn,ls+4);if(4294967286<ya){Ut=3;break e}var Gn=8+ya+1&-2;if(zn+=Gn,0<on&&zn>on){Ut=3;break e}if(!n(sn,ls,"VP8 ")||!n(sn,ls,"VP8L")){Ut=0;break e}if(fr[0]<Gn){Ut=7;break e}n(sn,ls,"ALPH")||(Cs[0]=sn,fs[0]=ls+8,An[0]=ya),ls+=Gn,fr-=Gn}}if(X=X[0],Nt.na=Nt.na[0],Nt.P=Nt.P[0],Nt.Sa=Nt.Sa[0],Ut!=0)break}X=[X],Nt.Ja=[Nt.Ja],Nt.xa=[Nt.xa];e:if(on=E,Ut=M,ts=X,Cs=Nt.gb[0],fs=Nt.Ja,An=Nt.xa,sn=Ut[0],ls=!n(on,sn,"VP8 "),zn=!n(on,sn,"VP8L"),s(on!=null),s(ts!=null),s(fs!=null),s(An!=null),8>ts[0])Ut=7;else{if(ls||zn){if(on=Qe(on,sn+4),12<=Cs&&on>Cs-12){Ut=3;break e}if(Ze&&on>ts[0]-8){Ut=7;break e}fs[0]=on,Ut[0]+=8,ts[0]-=8,An[0]=zn}else An[0]=5<=ts[0]&&on[sn+0]==47&&!(on[sn+4]>>5),fs[0]=ts[0];Ut=0}if(X=X[0],Nt.Ja=Nt.Ja[0],Nt.xa=Nt.xa[0],M=M[0],Ut!=0)break;if(4294967286<Nt.Ja)return 3;if(Me==null||ss||(Me[0]=Nt.xa?2:1),Ue=[Ue],Ct=[Ct],Nt.xa){if(5>X){Ut=7;break}Me=Ue,Ze=Ct,ss=Re,E==null||5>X?E=0:5<=X&&E[M+0]==47&&!(E[M+4]>>5)?(ts=[0],on=[0],Cs=[0],be(fs=new me,E,M,X),Us(fs,ts,on,Cs)?(Me!=null&&(Me[0]=ts[0]),Ze!=null&&(Ze[0]=on[0]),ss!=null&&(ss[0]=Cs[0]),E=1):E=0):E=0}else{if(10>X){Ut=7;break}Me=Ct,E==null||10>X||!wr(E,M+3,X-3)?E=0:(Ze=E[M+0]|E[M+1]<<8|E[M+2]<<16,ss=16383&(E[M+7]<<8|E[M+6]),E=16383&(E[M+9]<<8|E[M+8]),1&Ze||3<(Ze>>1&7)||!(Ze>>4&1)||Ze>>5>=Nt.Ja||!ss||!E?E=0:(Ue&&(Ue[0]=ss),Me&&(Me[0]=E),E=1))}if(!E||(Ue=Ue[0],Ct=Ct[0],_t&&(et[0]!=Ue||xt[0]!=Ct)))return 3;Ke!=null&&(Ke[0]=Nt,Ke.offset=M-Ke.w,s(4294967286>M-Ke.w),s(Ke.offset==Ke.ha-X));break}return Ut==0||Ut==7&&_t&&Ke==null?(Re!=null&&(Re[0]|=Nt.na!=null&&0<Nt.na.length),oe!=null&&(oe[0]=Ue),Ee!=null&&(Ee[0]=Ct),0):Ut}function ma(E,M,X){var oe=M.width,Ee=M.height,Re=0,Ue=0,Me=oe,Ke=Ee;if(M.Da=E!=null&&0<E.Da,M.Da&&(Me=E.cd,Ke=E.bd,Re=E.v,Ue=E.j,11>X||(Re&=-2,Ue&=-2),0>Re||0>Ue||0>=Me||0>=Ke||Re+Me>oe||Ue+Ke>Ee))return 0;if(M.v=Re,M.j=Ue,M.va=Re+Me,M.o=Ue+Ke,M.U=Me,M.T=Ke,M.da=E!=null&&0<E.da,M.da){if(!ht(Me,Ke,X=[E.ib],Re=[E.hb]))return 0;M.ib=X[0],M.hb=Re[0]}return M.ob=E!=null&&E.ob,M.Kb=E==null||!E.Sd,M.da&&(M.ob=M.ib<3*oe/4&&M.hb<3*Ee/4,M.Kb=0),1}function Ec(E){if(E==null)return 2;if(11>E.S){var M=E.f.RGBA;M.fb+=(E.height-1)*M.A,M.A=-M.A}else M=E.f.kb,E=E.height,M.O+=(E-1)*M.fa,M.fa=-M.fa,M.N+=(E-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(E-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(E-1)*M.lb,M.lb=-M.lb);return 0}function ji(E,M,X,oe){if(oe==null||0>=E||0>=M)return 2;if(X!=null){if(X.Da){var Ee=X.cd,Re=X.bd,Ue=-2&X.v,Me=-2&X.j;if(0>Ue||0>Me||0>=Ee||0>=Re||Ue+Ee>E||Me+Re>M)return 2;E=Ee,M=Re}if(X.da){if(!ht(E,M,Ee=[X.ib],Re=[X.hb]))return 2;E=Ee[0],M=Re[0]}}oe.width=E,oe.height=M;e:{var Ke=oe.width,et=oe.height;if(E=oe.S,0>=Ke||0>=et||!(E>=NA&&13>E))E=2;else{if(0>=oe.Rd&&oe.sd==null){Ue=Re=Ee=M=0;var xt=(Me=Ke*RA[E])*et;if(11>E||(Re=(et+1)/2*(M=(Ke+1)/2),E==12&&(Ue=(Ee=Ke)*et)),(et=c(xt+2*Re+Ue))==null){E=1;break e}oe.sd=et,11>E?((Ke=oe.f.RGBA).eb=et,Ke.fb=0,Ke.A=Me,Ke.size=xt):((Ke=oe.f.kb).y=et,Ke.O=0,Ke.fa=Me,Ke.Fd=xt,Ke.f=et,Ke.N=0+xt,Ke.Ab=M,Ke.Cd=Re,Ke.ea=et,Ke.W=0+xt+Re,Ke.Db=M,Ke.Ed=Re,E==12&&(Ke.F=et,Ke.J=0+xt+2*Re),Ke.Tc=Ue,Ke.lb=Ee)}if(M=1,Ee=oe.S,Re=oe.width,Ue=oe.height,Ee>=NA&&13>Ee)if(11>Ee)E=oe.f.RGBA,M&=(Me=Math.abs(E.A))*(Ue-1)+Re<=E.size,M&=Me>=Re*RA[Ee],M&=E.eb!=null;else{E=oe.f.kb,Me=(Re+1)/2,xt=(Ue+1)/2,Ke=Math.abs(E.fa),et=Math.abs(E.Ab);var _t=Math.abs(E.Db),Ze=Math.abs(E.lb),Nt=Ze*(Ue-1)+Re;M&=Ke*(Ue-1)+Re<=E.Fd,M&=et*(xt-1)+Me<=E.Cd,M=(M&=_t*(xt-1)+Me<=E.Ed)&Ke>=Re&et>=Me&_t>=Me,M&=E.y!=null,M&=E.f!=null,M&=E.ea!=null,Ee==12&&(M&=Ze>=Re,M&=Nt<=E.Tc,M&=E.F!=null)}else M=0;E=M?0:2}}return E!=0||X!=null&&X.fd&&(E=Ec(oe)),E}var Co=64,ir=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Mi=24,Jo=32,Zo=8,ll=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];gt("Predictor0","PredictorAdd0"),W.Predictor0=function(){return 4278190080},W.Predictor1=function(E){return E},W.Predictor2=function(E,M,X){return M[X+0]},W.Predictor3=function(E,M,X){return M[X+1]},W.Predictor4=function(E,M,X){return M[X-1]},W.Predictor5=function(E,M,X){return Lt(Lt(E,M[X+1]),M[X+0])},W.Predictor6=function(E,M,X){return Lt(E,M[X-1])},W.Predictor7=function(E,M,X){return Lt(E,M[X+0])},W.Predictor8=function(E,M,X){return Lt(M[X-1],M[X+0])},W.Predictor9=function(E,M,X){return Lt(M[X+0],M[X+1])},W.Predictor10=function(E,M,X){return Lt(Lt(E,M[X-1]),Lt(M[X+0],M[X+1]))},W.Predictor11=function(E,M,X){var oe=M[X+0];return 0>=xs(oe>>24&255,E>>24&255,(M=M[X-1])>>24&255)+xs(oe>>16&255,E>>16&255,M>>16&255)+xs(oe>>8&255,E>>8&255,M>>8&255)+xs(255&oe,255&E,255&M)?oe:E},W.Predictor12=function(E,M,X){var oe=M[X+0];return(qt((E>>24&255)+(oe>>24&255)-((M=M[X-1])>>24&255))<<24|qt((E>>16&255)+(oe>>16&255)-(M>>16&255))<<16|qt((E>>8&255)+(oe>>8&255)-(M>>8&255))<<8|qt((255&E)+(255&oe)-(255&M)))>>>0},W.Predictor13=function(E,M,X){var oe=M[X-1];return(Fs((E=Lt(E,M[X+0]))>>24&255,oe>>24&255)<<24|Fs(E>>16&255,oe>>16&255)<<16|Fs(E>>8&255,oe>>8&255)<<8|Fs(255&E,255&oe))>>>0};var Ul=W.PredictorAdd0;W.PredictorAdd1=hs,gt("Predictor2","PredictorAdd2"),gt("Predictor3","PredictorAdd3"),gt("Predictor4","PredictorAdd4"),gt("Predictor5","PredictorAdd5"),gt("Predictor6","PredictorAdd6"),gt("Predictor7","PredictorAdd7"),gt("Predictor8","PredictorAdd8"),gt("Predictor9","PredictorAdd9"),gt("Predictor10","PredictorAdd10"),gt("Predictor11","PredictorAdd11"),gt("Predictor12","PredictorAdd12"),gt("Predictor13","PredictorAdd13");var Tc=W.PredictorAdd2;ze("ColorIndexInverseTransform","MapARGB","32b",function(E){return E>>8&255},function(E){return E}),ze("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(E){return E},function(E){return E>>8&255});var Pa,Yi=W.ColorIndexInverseTransform,Ei=W.MapARGB,Ti=W.VP8LColorIndexInverseTransformAlpha,Sr=W.MapAlpha,Pi=W.VP8LPredictorsAdd=[];Pi.length=16,(W.VP8LPredictors=[]).length=16,(W.VP8LPredictorsAdd_C=[]).length=16,(W.VP8LPredictors_C=[]).length=16;var Fc,Ic,el,cl,dl,tl,Ga,Ll,ki,Xi,Dr,Ir,fa,Hr,sl,nl,Rc,sc,Su,Nu,Bu,Cu,bA,jA,nc,uo,od,ho,Al=c(511),wA=c(2041),zd=c(225),Oc=c(767),SA=0,ul=wA,Kd=zd,Hi=Oc,Fi=Al,NA=0,zi=1,Dl=2,Eo=3,$d=4,Ql=5,rc=6,Vd=7,BA=8,ld=9,Uc=10,To=[2,3,7],cd=[3,3,11],Lc=[280,256,256,256,40],CA=[0,1,1,1,0],ac=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Fo=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Io=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ic=8,Ro=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ji=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],fo=null,Ih=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Eu=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],EA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Rh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ii=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ga=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xr=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Zi=[],ka=[],ao=[],oc=1,Tu=2,hl=[],Ri=[];Ol("UpsampleRgbLinePair",Ao,3),Ol("UpsampleBgrLinePair",Ia,3),Ol("UpsampleRgbaLinePair",ni,4),Ol("UpsampleBgraLinePair",Xo,4),Ol("UpsampleArgbLinePair",tc,4),Ol("UpsampleRgba4444LinePair",ec,2),Ol("UpsampleRgb565LinePair",yr,2);var Dc=W.UpsampleRgbLinePair,qd=W.UpsampleBgrLinePair,_l=W.UpsampleRgbaLinePair,TA=W.UpsampleBgraLinePair,lc=W.UpsampleArgbLinePair,fl=W.UpsampleRgba4444LinePair,cc=W.UpsampleRgb565LinePair,Oo=16,dd=1<<Oo-1,pl=-227,dc=482,FA=6,Ac=0,Oi=c(256),IA=c(256),Oh=c(256),Vf=c(256),qf=c(dc-pl),Gf=c(dc-pl);bi("YuvToRgbRow",Ao,3),bi("YuvToBgrRow",Ia,3),bi("YuvToRgbaRow",ni,4),bi("YuvToBgraRow",Xo,4),bi("YuvToArgbRow",tc,4),bi("YuvToRgba4444Row",ec,2),bi("YuvToRgb565Row",yr,2);var Wa=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ad=[0,2,8],Gd=[8,7,6,4,4,2,2,2,1,1,1,1],ud=1;this.WebPDecodeRGBA=function(E,M,X,oe,Ee){var Re=zi,Ue=new as,Me=new us;Ue.ba=Me,Me.S=Re,Me.width=[Me.width],Me.height=[Me.height];var Ke=Me.width,et=Me.height,xt=new jt;if(xt==null||E==null)var _t=2;else s(xt!=null),_t=Bo(E,M,X,xt.width,xt.height,xt.Pd,xt.Qd,xt.format,null);if(_t!=0?Ke=0:(Ke!=null&&(Ke[0]=xt.width[0]),et!=null&&(et[0]=xt.height[0]),Ke=1),Ke){Me.width=Me.width[0],Me.height=Me.height[0],oe!=null&&(oe[0]=Me.width),Ee!=null&&(Ee[0]=Me.height);e:{if(oe=new Is,(Ee=new gs).data=E,Ee.w=M,Ee.ha=X,Ee.kd=1,M=[0],s(Ee!=null),((E=Bo(Ee.data,Ee.w,Ee.ha,null,null,null,M,null,Ee))==0||E==7)&&M[0]&&(E=4),(M=E)==0){if(s(Ue!=null),oe.data=Ee.data,oe.w=Ee.w+Ee.offset,oe.ha=Ee.ha-Ee.offset,oe.put=es,oe.ac=nn,oe.bc=zs,oe.ma=Ue,Ee.xa){if((E=Gt())==null){Ue=1;break e}if((function(Ze,Nt){var Ct=[0],ss=[0],Ut=[0];t:for(;;){if(Ze==null)return 0;if(Nt==null)return Ze.a=2,0;if(Ze.l=Nt,Ze.a=0,be(Ze.m,Nt.data,Nt.w,Nt.ha),!Us(Ze.m,Ct,ss,Ut)){Ze.a=3;break t}if(Ze.xb=Tu,Nt.width=Ct[0],Nt.height=ss[0],!Ys(Ct[0],ss[0],1,Ze,null))break t;return 1}return s(Ze.a!=0),0})(E,oe)){if(oe=(M=ji(oe.width,oe.height,Ue.Oa,Ue.ba))==0){t:{oe=E;s:for(;;){if(oe==null){oe=0;break t}if(s(oe.s.yc!=null),s(oe.s.Ya!=null),s(0<oe.s.Wb),s((X=oe.l)!=null),s((Ee=X.ma)!=null),oe.xb!=0){if(oe.ca=Ee.ba,oe.tb=Ee.tb,s(oe.ca!=null),!ma(Ee.Oa,X,Eo)){oe.a=2;break s}if(!Cn(oe,X.width)||X.da)break s;if((X.da||bt(oe.ca.S))&&Yo(),11>oe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),oe.ca.f.kb.F!=null&&Yo()),oe.Pb&&0<oe.s.ua&&oe.s.vb.X==null&&!le(oe.s.vb,oe.s.Wa.Xa)){oe.a=1;break s}oe.xb=0}if(!ys(oe,oe.V,oe.Ba,oe.c,oe.i,X.o,Pt))break s;Ee.Dc=oe.Ma,oe=1;break t}s(oe.a!=0),oe=0}oe=!oe}oe&&(M=E.a)}else M=E.a}else{if((E=new dn)==null){Ue=1;break e}if(E.Fa=Ee.na,E.P=Ee.P,E.qc=Ee.Sa,at(E,oe)){if((M=ji(oe.width,oe.height,Ue.Oa,Ue.ba))==0){if(E.Aa=0,X=Ue.Oa,s((Ee=E)!=null),X!=null){if(0<(Ke=0>(Ke=X.Md)?0:100<Ke?255:255*Ke/100)){for(et=xt=0;4>et;++et)12>(_t=Ee.pb[et]).lc&&(_t.ia=Ke*Gd[0>_t.lc?0:_t.lc]>>3),xt|=_t.ia;xt&&(alert("todo:VP8InitRandom"),Ee.ia=1)}Ee.Ga=X.Id,100<Ee.Ga?Ee.Ga=100:0>Ee.Ga&&(Ee.Ga=0)}(function(Ze,Nt){if(Ze==null)return 0;if(Nt==null)return Hs(Ze,2,"NULL VP8Io parameter in VP8Decode().");if(!Ze.cb&&!at(Ze,Nt))return 0;if(s(Ze.cb),Nt.ac==null||Nt.ac(Nt)){Nt.ob&&(Ze.L=0);var Ct=Ad[Ze.L];if(Ze.L==2?(Ze.yb=0,Ze.zb=0):(Ze.yb=Nt.v-Ct>>4,Ze.zb=Nt.j-Ct>>4,0>Ze.yb&&(Ze.yb=0),0>Ze.zb&&(Ze.zb=0)),Ze.Va=Nt.o+15+Ct>>4,Ze.Hb=Nt.va+15+Ct>>4,Ze.Hb>Ze.za&&(Ze.Hb=Ze.za),Ze.Va>Ze.Ub&&(Ze.Va=Ze.Ub),0<Ze.L){var ss=Ze.ed;for(Ct=0;4>Ct;++Ct){var Ut;if(Ze.Qa.Cb){var ts=Ze.Qa.Lb[Ct];Ze.Qa.Fb||(ts+=ss.Tb)}else ts=ss.Tb;for(Ut=0;1>=Ut;++Ut){var ls=Ze.gd[Ct][Ut],Cs=ts;if(ss.Pc&&(Cs+=ss.vd[0],Ut&&(Cs+=ss.od[0])),0<(Cs=0>Cs?0:63<Cs?63:Cs)){var fs=Cs;0<ss.wb&&(fs=4<ss.wb?fs>>2:fs>>1)>9-ss.wb&&(fs=9-ss.wb),1>fs&&(fs=1),ls.dd=fs,ls.tc=2*Cs+fs,ls.ld=40<=Cs?2:15<=Cs?1:0}else ls.tc=0;ls.La=Ut}}}Ct=0}else Hs(Ze,6,"Frame setup failed"),Ct=Ze.a;if(Ct=Ct==0){if(Ct){Ze.$c=0,0<Ze.Aa||(Ze.Ic=ud);t:{Ct=Ze.Ic,ss=4*(fs=Ze.za);var An=32*fs,sn=fs+1,zn=0<Ze.L?fs*(0<Ze.Aa?2:1):0,on=(Ze.Aa==2?2:1)*fs;if((ls=ss+832+(Ut=3*(16*Ct+Ad[Ze.L])/2*An)+(ts=Ze.Fa!=null&&0<Ze.Fa.length?Ze.Kc.c*Ze.Kc.i:0))!=ls)Ct=0;else{if(ls>Ze.Vb){if(Ze.Vb=0,Ze.Ec=c(ls),Ze.Fc=0,Ze.Ec==null){Ct=Hs(Ze,1,"no memory during frame initialization.");break t}Ze.Vb=ls}ls=Ze.Ec,Cs=Ze.Fc,Ze.Ac=ls,Ze.Bc=Cs,Cs+=ss,Ze.Gd=A(An,hr),Ze.Hd=0,Ze.rb=A(sn+1,Pn),Ze.sb=1,Ze.wa=zn?A(zn,Js):null,Ze.Y=0,Ze.D.Nb=0,Ze.D.wa=Ze.wa,Ze.D.Y=Ze.Y,0<Ze.Aa&&(Ze.D.Y+=fs),s(!0),Ze.oc=ls,Ze.pc=Cs,Cs+=832,Ze.ya=A(on,jr),Ze.aa=0,Ze.D.ya=Ze.ya,Ze.D.aa=Ze.aa,Ze.Aa==2&&(Ze.D.aa+=fs),Ze.R=16*fs,Ze.B=8*fs,fs=(An=Ad[Ze.L])*Ze.R,An=An/2*Ze.B,Ze.sa=ls,Ze.ta=Cs+fs,Ze.qa=Ze.sa,Ze.ra=Ze.ta+16*Ct*Ze.R+An,Ze.Ha=Ze.qa,Ze.Ia=Ze.ra+8*Ct*Ze.B+An,Ze.$c=0,Cs+=Ut,Ze.mb=ts?ls:null,Ze.nb=ts?Cs:null,s(Cs+ts<=Ze.Fc+Ze.Vb),ds(Ze),i(Ze.Ac,Ze.Bc,0,ss),Ct=1}}if(Ct){if(Nt.ka=0,Nt.y=Ze.sa,Nt.O=Ze.ta,Nt.f=Ze.qa,Nt.N=Ze.ra,Nt.ea=Ze.Ha,Nt.Vd=Ze.Ia,Nt.fa=Ze.R,Nt.Rc=Ze.B,Nt.F=null,Nt.J=0,!SA){for(Ct=-255;255>=Ct;++Ct)Al[255+Ct]=0>Ct?-Ct:Ct;for(Ct=-1020;1020>=Ct;++Ct)wA[1020+Ct]=-128>Ct?-128:127<Ct?127:Ct;for(Ct=-112;112>=Ct;++Ct)zd[112+Ct]=-16>Ct?-16:15<Ct?15:Ct;for(Ct=-255;510>=Ct;++Ct)Oc[255+Ct]=0>Ct?0:255<Ct?255:Ct;SA=1}Ga=er,Ll=Na,Xi=cr,Dr=Ka,Ir=pa,ki=Ma,fa=Ns,Hr=Zs,sl=ve,nl=Ve,Rc=Rn,sc=$,Su=At,Nu=Bt,Bu=Ie,Cu=st,bA=ot,jA=Dt,ka[0]=ln,ka[1]=pi,ka[2]=yt,ka[3]=Qt,ka[4]=Ln,ka[5]=Ps,ka[6]=bs,ka[7]=Dn,ka[8]=qn,ka[9]=Hn,Zi[0]=nt,Zi[1]=Va,Zi[2]=ti,Zi[3]=xe,Zi[4]=V,Zi[5]=Te,Zi[6]=Ye,ao[0]=x,ao[1]=$a,ao[2]=Yr,ao[3]=v,ao[4]=F,ao[5]=I,ao[6]=_,Ct=1}else Ct=0}Ct&&(Ct=(function(fr,ya){for(fr.M=0;fr.M<fr.Va;++fr.M){var Gn,Yt=fr.Jc[fr.M&fr.Xb],_s=fr.m,Ra=fr;for(Gn=0;Gn<Ra.za;++Gn){var In=_s,Un=Ra,Jr=Un.Ac,ri=Un.Bc+4*Gn,Ya=Un.zc,Zr=Un.ya[Un.aa+Gn];if(Un.Qa.Bb?Zr.$b=Ne(In,Un.Pa.jb[0])?2+Ne(In,Un.Pa.jb[2]):Ne(In,Un.Pa.jb[1]):Zr.$b=0,Un.kc&&(Zr.Ad=Ne(In,Un.Bd)),Zr.Za=!Ne(In,145)+0,Zr.Za){var ai=Zr.Ob,Ki=0;for(Un=0;4>Un;++Un){var ii,Kn=Ya[0+Un];for(ii=0;4>ii;++ii){Kn=Ii[Jr[ri+ii]][Kn];for(var Nr=EA[Ne(In,Kn[0])];0<Nr;)Nr=EA[2*Nr+Ne(In,Kn[Nr])];Kn=-Nr,Jr[ri+ii]=Kn}r(ai,Ki,Jr,ri,4),Ki+=4,Ya[0+Un]=Kn}}else Kn=Ne(In,156)?Ne(In,128)?1:3:Ne(In,163)?2:0,Zr.Ob[0]=Kn,i(Jr,ri,Kn,4),i(Ya,0,Kn,4);Zr.Dd=Ne(In,142)?Ne(In,114)?Ne(In,183)?1:3:2:0}if(Ra.m.Ka)return Hs(fr,7,"Premature end-of-partition0 encountered.");for(;fr.ja<fr.za;++fr.ja){if(Ra=Yt,In=(_s=fr).rb[_s.sb-1],Jr=_s.rb[_s.sb+_s.ja],Gn=_s.ya[_s.aa+_s.ja],ri=_s.kc?Gn.Ad:0)In.la=Jr.la=0,Gn.Za||(In.Na=Jr.Na=0),Gn.Hc=0,Gn.Gc=0,Gn.ia=0;else{var xa,zr;if(In=Jr,Jr=Ra,ri=_s.Pa.Xc,Ya=_s.ya[_s.aa+_s.ja],Zr=_s.pb[Ya.$b],Un=Ya.ad,ai=0,Ki=_s.rb[_s.sb-1],Kn=ii=0,i(Un,ai,0,384),Ya.Za)var oi=0,Oa=ri[3];else{Nr=c(16);var Br=In.Na+Ki.Na;if(Br=fo(Jr,ri[1],Br,Zr.Eb,0,Nr,0),In.Na=Ki.Na=(0<Br)+0,1<Br)Ga(Nr,0,Un,ai);else{var Xa=Nr[0]+3>>3;for(Nr=0;256>Nr;Nr+=16)Un[ai+Nr]=Xa}oi=1,Oa=ri[0]}var ea=15&In.la,li=15&Ki.la;for(Nr=0;4>Nr;++Nr){var ci=1&li;for(Xa=zr=0;4>Xa;++Xa)ea=ea>>1|(ci=(Br=fo(Jr,Oa,Br=ci+(1&ea),Zr.Sc,oi,Un,ai))>oi)<<7,zr=zr<<2|(3<Br?3:1<Br?2:Un[ai+0]!=0),ai+=16;ea>>=4,li=li>>1|ci<<7,ii=(ii<<8|zr)>>>0}for(Oa=ea,oi=li>>4,xa=0;4>xa;xa+=2){for(zr=0,ea=In.la>>4+xa,li=Ki.la>>4+xa,Nr=0;2>Nr;++Nr){for(ci=1&li,Xa=0;2>Xa;++Xa)Br=ci+(1&ea),ea=ea>>1|(ci=0<(Br=fo(Jr,ri[2],Br,Zr.Qc,0,Un,ai)))<<3,zr=zr<<2|(3<Br?3:1<Br?2:Un[ai+0]!=0),ai+=16;ea>>=2,li=li>>1|ci<<5}Kn|=zr<<4*xa,Oa|=ea<<4<<xa,oi|=(240&li)<<xa}In.la=Oa,Ki.la=oi,Ya.Hc=ii,Ya.Gc=Kn,Ya.ia=43690&Kn?0:Zr.ia,ri=!(ii|Kn)}if(0<_s.L&&(_s.wa[_s.Y+_s.ja]=_s.gd[Gn.$b][Gn.Za],_s.wa[_s.Y+_s.ja].La|=!ri),Ra.Ka)return Hs(fr,7,"Premature end-of-file encountered.")}if(ds(fr),_s=ya,Ra=1,Gn=(Yt=fr).D,In=0<Yt.L&&Yt.M>=Yt.zb&&Yt.M<=Yt.Va,Yt.Aa==0)t:{if(Gn.M=Yt.M,Gn.uc=In,Lr(Yt,Gn),Ra=1,Gn=(zr=Yt.D).Nb,In=(Kn=Ad[Yt.L])*Yt.R,Jr=Kn/2*Yt.B,Nr=16*Gn*Yt.R,Xa=8*Gn*Yt.B,ri=Yt.sa,Ya=Yt.ta-In+Nr,Zr=Yt.qa,Un=Yt.ra-Jr+Xa,ai=Yt.Ha,Ki=Yt.Ia-Jr+Xa,li=(ea=zr.M)==0,ii=ea>=Yt.Va-1,Yt.Aa==2&&Lr(Yt,zr),zr.uc)for(ci=(Br=Yt).D.M,s(Br.D.uc),zr=Br.yb;zr<Br.Hb;++zr){oi=zr,Oa=ci;var la=(Rr=(Ua=Br).D).Nb;xa=Ua.R;var Rr=Rr.wa[Rr.Y+oi],$i=Ua.sa,Ha=Ua.ta+16*la*xa+16*oi,En=Rr.dd,Fn=Rr.tc;if(Fn!=0)if(s(3<=Fn),Ua.L==1)0<oi&&Cu($i,Ha,xa,Fn+4),Rr.La&&jA($i,Ha,xa,Fn),0<Oa&&Bu($i,Ha,xa,Fn+4),Rr.La&&bA($i,Ha,xa,Fn);else{var Qr=Ua.B,io=Ua.qa,po=Ua.ra+8*la*Qr+8*oi,eo=Ua.Ha,Ua=Ua.Ia+8*la*Qr+8*oi;la=Rr.ld,0<oi&&(Hr($i,Ha,xa,Fn+4,En,la),nl(io,po,eo,Ua,Qr,Fn+4,En,la)),Rr.La&&(sc($i,Ha,xa,Fn,En,la),Nu(io,po,eo,Ua,Qr,Fn,En,la)),0<Oa&&(fa($i,Ha,xa,Fn+4,En,la),sl(io,po,eo,Ua,Qr,Fn+4,En,la)),Rr.La&&(Rc($i,Ha,xa,Fn,En,la),Su(io,po,eo,Ua,Qr,Fn,En,la))}}if(Yt.ia&&alert("todo:DitherRow"),_s.put!=null){if(zr=16*ea,ea=16*(ea+1),li?(_s.y=Yt.sa,_s.O=Yt.ta+Nr,_s.f=Yt.qa,_s.N=Yt.ra+Xa,_s.ea=Yt.Ha,_s.W=Yt.Ia+Xa):(zr-=Kn,_s.y=ri,_s.O=Ya,_s.f=Zr,_s.N=Un,_s.ea=ai,_s.W=Ki),ii||(ea-=Kn),ea>_s.o&&(ea=_s.o),_s.F=null,_s.J=null,Yt.Fa!=null&&0<Yt.Fa.length&&zr<ea&&(_s.J=Xr(Yt,_s,zr,ea-zr),_s.F=Yt.mb,_s.F==null&&_s.F.length==0)){Ra=Hs(Yt,3,"Could not decode alpha data.");break t}zr<_s.j&&(Kn=_s.j-zr,zr=_s.j,s(!(1&Kn)),_s.O+=Yt.R*Kn,_s.N+=Yt.B*(Kn>>1),_s.W+=Yt.B*(Kn>>1),_s.F!=null&&(_s.J+=_s.width*Kn)),zr<ea&&(_s.O+=_s.v,_s.N+=_s.v>>1,_s.W+=_s.v>>1,_s.F!=null&&(_s.J+=_s.v),_s.ka=zr-_s.j,_s.U=_s.va-_s.v,_s.T=ea-zr,Ra=_s.put(_s))}Gn+1!=Yt.Ic||ii||(r(Yt.sa,Yt.ta-In,ri,Ya+16*Yt.R,In),r(Yt.qa,Yt.ra-Jr,Zr,Un+8*Yt.B,Jr),r(Yt.Ha,Yt.Ia-Jr,ai,Ki+8*Yt.B,Jr))}if(!Ra)return Hs(fr,6,"Output aborted.")}return 1})(Ze,Nt)),Nt.bc!=null&&Nt.bc(Nt),Ct&=1}return Ct?(Ze.cb=0,Ct):0})(E,oe)||(M=E.a)}}else M=E.a}M==0&&Ue.Oa!=null&&Ue.Oa.fd&&(M=Ec(Ue.ba))}Ue=M}Re=Ue!=0?null:11>Re?Me.f.RGBA.eb:Me.f.kb.y}else Re=null;return Re};var RA=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(W,he){for(var Z="",ie=0;ie<4;ie++)Z+=String.fromCharCode(W[he++]);return Z}function o(W,he){return W[he+0]|W[he+1]<<8}function m(W,he){return(W[he+0]|W[he+1]<<8|W[he+2]<<16)>>>0}function y(W,he){return(W[he+0]|W[he+1]<<8|W[he+2]<<16|W[he+3]<<24)>>>0}new d;var p=[0],j=[0],b=[],w=new d,B=t,U=(function(W,he){var Z={},ie=0,ce=!1,ae=0,de=0;if(Z.frames=[],!(function(Y,me){for(var Se=0;Se<4;Se++)if(Y[me+Se]!="RIFF".charCodeAt(Se))return!0;return!1})(W,he)){for(y(W,he+=4),he+=8;he<W.length;){var se=h(W,he),re=y(W,he+=4);he+=4;var te=re+(1&re);switch(se){case"VP8 ":case"VP8L":Z.frames[ie]===void 0&&(Z.frames[ie]={}),(pe=Z.frames[ie]).src_off=ce?de:he-8,pe.src_size=ae+re+8,ie++,ce&&(ce=!1,ae=0,de=0);break;case"VP8X":(pe=Z.header={}).feature_flags=W[he];var be=he+4;pe.canvas_width=1+m(W,be),be+=3,pe.canvas_height=1+m(W,be),be+=3;break;case"ALPH":ce=!0,ae=te+8,de=he-8;break;case"ANIM":(pe=Z.header).bgcolor=y(W,he),be=he+4,pe.loop_count=o(W,be),be+=2;break;case"ANMF":var He,pe;(pe=Z.frames[ie]={}).offset_x=2*m(W,he),he+=3,pe.offset_y=2*m(W,he),he+=3,pe.width=1+m(W,he),he+=3,pe.height=1+m(W,he),he+=3,pe.duration=m(W,he),he+=3,He=W[he++],pe.dispose=1&He,pe.blend=He>>1&1}se!="ANMF"&&(he+=te)}return Z}})(B,0);U.response=B,U.rgbaoutput=!0,U.dataurl=!1;var Q=U.header?U.header:null,k=U.frames?U.frames:null;if(Q){Q.loop_counter=Q.loop_count,p=[Q.canvas_height],j=[Q.canvas_width];for(var K=0;K<k.length&&k[K].blend!=0;K++);}var ee=k[0],q=w.WebPDecodeRGBA(B,ee.src_off,ee.src_size,j,p);ee.rgba=q,ee.imgwidth=j[0],ee.imgheight=p[0];for(var G=0;G<j[0]*p[0]*4;G++)b[G]=q[G];return this.width=j,this.height=p,this.data=b,this}(function(t){var s,n,r,i,c,A,u,d,h,o=function(Y){return Y=Y||{},this.isStrokeTransparent=Y.isStrokeTransparent||!1,this.strokeOpacity=Y.strokeOpacity||1,this.strokeStyle=Y.strokeStyle||"#000000",this.fillStyle=Y.fillStyle||"#000000",this.isFillTransparent=Y.isFillTransparent||!1,this.fillOpacity=Y.fillOpacity||1,this.font=Y.font||"10px sans-serif",this.textBaseline=Y.textBaseline||"alphabetic",this.textAlign=Y.textAlign||"left",this.lineWidth=Y.lineWidth||1,this.lineJoin=Y.lineJoin||"miter",this.lineCap=Y.lineCap||"butt",this.path=Y.path||[],this.transform=Y.transform!==void 0?Y.transform.clone():new d,this.globalCompositeOperation=Y.globalCompositeOperation||"normal",this.globalAlpha=Y.globalAlpha||1,this.clip_path=Y.clip_path||[],this.currentPoint=Y.currentPoint||new A,this.miterLimit=Y.miterLimit||10,this.lastPoint=Y.lastPoint||new A,this.lineDashOffset=Y.lineDashOffset||0,this.lineDash=Y.lineDash||[],this.margin=Y.margin||[0,0,0,0],this.prevPageLastElemOffset=Y.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Y.ignoreClearRect!="boolean"||Y.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),s=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,c=this.internal.getVerticalCoordinate,A=this.internal.Point,u=this.internal.Rectangle,d=this.internal.Matrix,h=new o}]);var m=function(Y){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var me=Y;Object.defineProperty(this,"pdf",{get:function(){return me}});var Se=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Se},set:function(le){Se=!!le}});var je=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return je},set:function(le){je=!!le}});var Le=0;Object.defineProperty(this,"posX",{get:function(){return Le},set:function(le){isNaN(le)||(Le=le)}});var ge=0;Object.defineProperty(this,"posY",{get:function(){return ge},set:function(le){isNaN(le)||(ge=le)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(le){var ct;typeof le=="number"?ct=[le,le,le,le]:((ct=new Array(4))[0]=le[0],ct[1]=le.length>=2?le[1]:ct[0],ct[2]=le.length>=3?le[2]:ct[0],ct[3]=le.length>=4?le[3]:ct[1]),h.margin=ct}});var ye=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ye},set:function(le){ye=le}});var we=0;Object.defineProperty(this,"lastBreak",{get:function(){return we},set:function(le){we=le}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(le){Ne=le}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(le){le instanceof o&&(h=le)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(le){h.path=le}});var ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return ke},set:function(le){ke=le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(le){var ct;ct=y(le),this.ctx.fillStyle=ct.style,this.ctx.isFillTransparent=ct.a===0,this.ctx.fillOpacity=ct.a,this.pdf.setFillColor(ct.r,ct.g,ct.b,{a:ct.a}),this.pdf.setTextColor(ct.r,ct.g,ct.b,{a:ct.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(le){var ct=y(le);this.ctx.strokeStyle=ct.style,this.ctx.isStrokeTransparent=ct.a===0,this.ctx.strokeOpacity=ct.a,ct.a===0?this.pdf.setDrawColor(255,255,255):(ct.a,this.pdf.setDrawColor(ct.r,ct.g,ct.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(le){["butt","round","square"].indexOf(le)!==-1&&(this.ctx.lineCap=le,this.pdf.setLineCap(le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(le){isNaN(le)||(this.ctx.lineWidth=le,this.pdf.setLineWidth(le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(le){["bevel","round","miter"].indexOf(le)!==-1&&(this.ctx.lineJoin=le,this.pdf.setLineJoin(le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(le){isNaN(le)||(this.ctx.miterLimit=le,this.pdf.setMiterLimit(le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(le){this.ctx.textBaseline=le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(le){["right","end","center","left","start"].indexOf(le)!==-1&&(this.ctx.textAlign=le)}});var Be=null,Ae=null,Qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Qe},set:function(le){Be=null,Ae=null,Qe=le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(le){var ct;if(this.ctx.font=le,(ct=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(le))!==null){var rt=ct[1];ct[2];var ht=ct[3],ft=ct[4];ct[5];var Jt=ct[6],gt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ft)[2];ft=Math.floor(gt==="px"?parseFloat(ft)*this.pdf.internal.scaleFactor:gt==="em"?parseFloat(ft)*this.pdf.getFontSize():parseFloat(ft)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ft);var tt=(function(ze){var Tt,Je,vt=[],$e=ze.trim();if($e==="")return Lv;if($e in FB)return[FB[$e]];for(;$e!=="";){switch(Je=null,Tt=($e=RB($e)).charAt(0)){case'"':case"'":Je=Aq($e.substring(1),Tt);break;default:Je=uq($e)}if(Je===null||(vt.push(Je[0]),($e=RB(Je[1]))!==""&&$e.charAt(0)!==","))return Lv;$e=$e.replace(/^,/,"")}return vt})(Jt);if(this.fontFaces){var Lt=(function(ze,Tt){var Je=ze.getFontList(),vt=JSON.stringify(Je);if(Be===null||Ae!==vt){var $e=(function(St){var Rt=[];return Object.keys(St).forEach(function(Zt){St[Zt].forEach(function(bt){var Vt=null;switch(bt){case"bold":Vt={family:Zt,weight:"bold"};break;case"italic":Vt={family:Zt,style:"italic"};break;case"bolditalic":Vt={family:Zt,weight:"bold",style:"italic"};break;case"":case"normal":Vt={family:Zt}}Vt!==null&&(Vt.ref={name:Zt,style:bt},Rt.push(Vt))})}),Rt})(Je);Be=(function(St){for(var Rt={},Zt=0;Zt<St.length;++Zt){var bt=Uv(St[Zt]),Vt=bt.family,vs=bt.stretch,us=bt.style,jt=bt.weight;Rt[Vt]=Rt[Vt]||{},Rt[Vt][vs]=Rt[Vt][vs]||{},Rt[Vt][vs][us]=Rt[Vt][vs][us]||{},Rt[Vt][vs][us][jt]=bt}return Rt})($e.concat(Tt)),Ae=vt}return Be})(this.pdf,this.fontFaces),qt=tt.map(function(ze){return{family:ze,stretch:"normal",weight:ht,style:rt}}),Fs=(function(ze,Tt,Je){for(var vt=(Je=Je||{}).defaultFontFamily||"times",$e=Object.assign({},dq,Je.genericFontFamilies||{}),St=null,Rt=null,Zt=0;Zt<Tt.length;++Zt)if($e[(St=Uv(Tt[Zt])).family]&&(St.family=$e[St.family]),ze.hasOwnProperty(St.family)){Rt=ze[St.family];break}if(!(Rt=Rt||ze[vt]))throw new Error("Could not find a font-family for the rule '"+IB(St)+"' and default family '"+vt+"'.");if(Rt=(function(bt,Vt){if(Vt[bt])return Vt[bt];var vs=r1[bt],us=vs<=r1.normal?-1:1,jt=TB(Vt,lR,vs,us);if(!jt)throw new Error("Could not find a matching font-stretch value for "+bt);return jt})(St.stretch,Rt),Rt=(function(bt,Vt){if(Vt[bt])return Vt[bt];for(var vs=oR[bt],us=0;us<vs.length;++us)if(Vt[vs[us]])return Vt[vs[us]];throw new Error("Could not find a matching font-style for "+bt)})(St.style,Rt),!(Rt=(function(bt,Vt){if(Vt[bt])return Vt[bt];if(bt===400&&Vt[500])return Vt[500];if(bt===500&&Vt[400])return Vt[400];var vs=cq[bt],us=TB(Vt,cR,vs,bt<400?-1:1);if(!us)throw new Error("Could not find a matching font-weight for value "+bt);return us})(St.weight,Rt)))throw new Error("Failed to resolve a font for the rule '"+IB(St)+"'.");return Rt})(Lt,qt);this.pdf.setFont(Fs.ref.name,Fs.ref.style)}else{var xs="";(ht==="bold"||parseInt(ht,10)>=700||rt==="bold")&&(xs="bold"),rt==="italic"&&(xs+="italic"),xs.length===0&&(xs="normal");for(var hs="",it={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Pe=0;Pe<tt.length;Pe++){if(this.pdf.internal.getFont(tt[Pe],xs,{noFallback:!0,disableWarning:!0})!==void 0){hs=tt[Pe];break}if(xs==="bolditalic"&&this.pdf.internal.getFont(tt[Pe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)hs=tt[Pe],xs="bold";else if(this.pdf.internal.getFont(tt[Pe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){hs=tt[Pe],xs="normal";break}}if(hs===""){for(var dt=0;dt<tt.length;dt++)if(it[tt[dt]]){hs=it[tt[dt]];break}}hs=hs===""?"Times":hs,this.pdf.setFont(hs,xs)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(le){this.ctx.globalCompositeOperation=le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(le){this.ctx.globalAlpha=le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(le){this.ctx.lineDashOffset=le,pe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(le){this.ctx.lineDash=le,pe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(le){this.ctx.ignoreClearRect=!!le}})};m.prototype.setLineDash=function(Y){this.lineDash=Y},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){k.call(this,"fill",!1)},m.prototype.stroke=function(){k.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(Y,me){if(isNaN(Y)||isNaN(me))throw _a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Se=this.ctx.transform.applyToPoint(new A(Y,me));this.path.push({type:"mt",x:Se.x,y:Se.y}),this.ctx.lastPoint=new A(Y,me)},m.prototype.closePath=function(){var Y=new A(0,0),me=0;for(me=this.path.length-1;me!==-1;me--)if(this.path[me].type==="begin"&&wa(this.path[me+1])==="object"&&typeof this.path[me+1].x=="number"){Y=new A(this.path[me+1].x,this.path[me+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new A(Y.x,Y.y)},m.prototype.lineTo=function(Y,me){if(isNaN(Y)||isNaN(me))throw _a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Se=this.ctx.transform.applyToPoint(new A(Y,me));this.path.push({type:"lt",x:Se.x,y:Se.y}),this.ctx.lastPoint=new A(Se.x,Se.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},m.prototype.quadraticCurveTo=function(Y,me,Se,je){if(isNaN(Se)||isNaN(je)||isNaN(Y)||isNaN(me))throw _a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Le=this.ctx.transform.applyToPoint(new A(Se,je)),ge=this.ctx.transform.applyToPoint(new A(Y,me));this.path.push({type:"qct",x1:ge.x,y1:ge.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new A(Le.x,Le.y)},m.prototype.bezierCurveTo=function(Y,me,Se,je,Le,ge){if(isNaN(Le)||isNaN(ge)||isNaN(Y)||isNaN(me)||isNaN(Se)||isNaN(je))throw _a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ye=this.ctx.transform.applyToPoint(new A(Le,ge)),we=this.ctx.transform.applyToPoint(new A(Y,me)),Ne=this.ctx.transform.applyToPoint(new A(Se,je));this.path.push({type:"bct",x1:we.x,y1:we.y,x2:Ne.x,y2:Ne.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new A(ye.x,ye.y)},m.prototype.arc=function(Y,me,Se,je,Le,ge){if(isNaN(Y)||isNaN(me)||isNaN(Se)||isNaN(je)||isNaN(Le))throw _a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ge=!!ge,!this.ctx.transform.isIdentity){var ye=this.ctx.transform.applyToPoint(new A(Y,me));Y=ye.x,me=ye.y;var we=this.ctx.transform.applyToPoint(new A(0,Se)),Ne=this.ctx.transform.applyToPoint(new A(0,0));Se=Math.sqrt(Math.pow(we.x-Ne.x,2)+Math.pow(we.y-Ne.y,2))}Math.abs(Le-je)>=2*Math.PI&&(je=0,Le=2*Math.PI),this.path.push({type:"arc",x:Y,y:me,radius:Se,startAngle:je,endAngle:Le,counterclockwise:ge})},m.prototype.arcTo=function(Y,me,Se,je,Le){throw new Error("arcTo not implemented.")},m.prototype.rect=function(Y,me,Se,je){if(isNaN(Y)||isNaN(me)||isNaN(Se)||isNaN(je))throw _a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Y,me),this.lineTo(Y+Se,me),this.lineTo(Y+Se,me+je),this.lineTo(Y,me+je),this.lineTo(Y,me),this.lineTo(Y+Se,me),this.lineTo(Y,me)},m.prototype.fillRect=function(Y,me,Se,je){if(isNaN(Y)||isNaN(me)||isNaN(Se)||isNaN(je))throw _a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var Le={};this.lineCap!=="butt"&&(Le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Y,me,Se,je),this.fill(),Le.hasOwnProperty("lineCap")&&(this.lineCap=Le.lineCap),Le.hasOwnProperty("lineJoin")&&(this.lineJoin=Le.lineJoin)}},m.prototype.strokeRect=function(Y,me,Se,je){if(isNaN(Y)||isNaN(me)||isNaN(Se)||isNaN(je))throw _a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(Y,me,Se,je),this.stroke())},m.prototype.clearRect=function(Y,me,Se,je){if(isNaN(Y)||isNaN(me)||isNaN(Se)||isNaN(je))throw _a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Y,me,Se,je))},m.prototype.save=function(Y){Y=typeof Y!="boolean"||Y;for(var me=this.pdf.internal.getCurrentPageInfo().pageNumber,Se=0;Se<this.pdf.internal.getNumberOfPages();Se++)this.pdf.setPage(Se+1),this.pdf.internal.out("q");if(this.pdf.setPage(me),Y){this.ctx.fontSize=this.pdf.internal.getFontSize();var je=new o(this.ctx);this.ctxStack.push(this.ctx),this.ctx=je}},m.prototype.restore=function(Y){Y=typeof Y!="boolean"||Y;for(var me=this.pdf.internal.getCurrentPageInfo().pageNumber,Se=0;Se<this.pdf.internal.getNumberOfPages();Se++)this.pdf.setPage(Se+1),this.pdf.internal.out("Q");this.pdf.setPage(me),Y&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(Y){var me,Se,je,Le;if(Y.isCanvasGradient===!0&&(Y=Y.getColor()),!Y)return{r:0,g:0,b:0,a:0,style:Y};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Y))me=0,Se=0,je=0,Le=0;else{var ge=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Y);if(ge!==null)me=parseInt(ge[1]),Se=parseInt(ge[2]),je=parseInt(ge[3]),Le=1;else if((ge=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Y))!==null)me=parseInt(ge[1]),Se=parseInt(ge[2]),je=parseInt(ge[3]),Le=parseFloat(ge[4]);else{if(Le=1,typeof Y=="string"&&Y.charAt(0)!=="#"){var ye=new eR(Y);Y=ye.ok?ye.toHex():"#000000"}Y.length===4?(me=Y.substring(1,2),me+=me,Se=Y.substring(2,3),Se+=Se,je=Y.substring(3,4),je+=je):(me=Y.substring(1,3),Se=Y.substring(3,5),je=Y.substring(5,7)),me=parseInt(me,16),Se=parseInt(Se,16),je=parseInt(je,16)}}return{r:me,g:Se,b:je,a:Le,style:Y}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(Y,me,Se,je){if(isNaN(me)||isNaN(Se)||typeof Y!="string")throw _a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(je=isNaN(je)?void 0:je,!p.call(this)){var Le=te(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;ie.call(this,{text:Y,x:me,y:Se,scale:ge,angle:Le,align:this.textAlign,maxWidth:je})}},m.prototype.strokeText=function(Y,me,Se,je){if(isNaN(me)||isNaN(Se)||typeof Y!="string")throw _a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){je=isNaN(je)?void 0:je;var Le=te(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;ie.call(this,{text:Y,x:me,y:Se,scale:ge,renderingMode:"stroke",angle:Le,align:this.textAlign,maxWidth:je})}},m.prototype.measureText=function(Y){if(typeof Y!="string")throw _a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var me=this.pdf,Se=this.pdf.internal.scaleFactor,je=me.internal.getFontSize(),Le=me.getStringUnitWidth(Y)*je/me.internal.scaleFactor;return new function(ge){var ye=(ge=ge||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ye}}),this}({width:Le*=Math.round(96*Se/72*1e4)/1e4})},m.prototype.scale=function(Y,me){if(isNaN(Y)||isNaN(me))throw _a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Se=new d(Y,0,0,me,0,0);this.ctx.transform=this.ctx.transform.multiply(Se)},m.prototype.rotate=function(Y){if(isNaN(Y))throw _a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var me=new d(Math.cos(Y),Math.sin(Y),-Math.sin(Y),Math.cos(Y),0,0);this.ctx.transform=this.ctx.transform.multiply(me)},m.prototype.translate=function(Y,me){if(isNaN(Y)||isNaN(me))throw _a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Se=new d(1,0,0,1,Y,me);this.ctx.transform=this.ctx.transform.multiply(Se)},m.prototype.transform=function(Y,me,Se,je,Le,ge){if(isNaN(Y)||isNaN(me)||isNaN(Se)||isNaN(je)||isNaN(Le)||isNaN(ge))throw _a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ye=new d(Y,me,Se,je,Le,ge);this.ctx.transform=this.ctx.transform.multiply(ye)},m.prototype.setTransform=function(Y,me,Se,je,Le,ge){Y=isNaN(Y)?1:Y,me=isNaN(me)?0:me,Se=isNaN(Se)?0:Se,je=isNaN(je)?1:je,Le=isNaN(Le)?0:Le,ge=isNaN(ge)?0:ge,this.ctx.transform=new d(Y,me,Se,je,Le,ge)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(Y,me,Se,je,Le,ge,ye,we,Ne){var ke=this.pdf.getImageProperties(Y),Be=1,Ae=1,Qe=1,le=1;je!==void 0&&we!==void 0&&(Qe=we/je,le=Ne/Le,Be=ke.width/je*we/je,Ae=ke.height/Le*Ne/Le),ge===void 0&&(ge=me,ye=Se,me=0,Se=0),je!==void 0&&we===void 0&&(we=je,Ne=Le),je===void 0&&we===void 0&&(we=ke.width,Ne=ke.height);var ct=this.ctx.transform.decompose(),rt=te(ct.rotate.shx),ht=new d,ft=(ht=(ht=(ht=ht.multiply(ct.translate)).multiply(ct.skew)).multiply(ct.scale)).applyToRectangle(new u(ge-me*Qe,ye-Se*le,je*Be,Le*Ae));if(this.autoPaging){for(var Jt,gt=w.call(this,ft),tt=[],Lt=0;Lt<gt.length;Lt+=1)tt.indexOf(gt[Lt])===-1&&tt.push(gt[Lt]);Q(tt);for(var qt=tt[0],Fs=tt[tt.length-1],xs=qt;xs<Fs+1;xs++){this.pdf.setPage(xs);var hs=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=xs===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=xs===1?0:Pe+(xs-2)*dt;if(this.ctx.clip_path.length!==0){var Tt=this.path;Jt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Jt,this.posX+this.margin[3],-ze+it+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=Tt}var Je=JSON.parse(JSON.stringify(ft));Je=U([Je],this.posX+this.margin[3],-ze+it+this.ctx.prevPageLastElemOffset)[0];var vt=(xs>qt||xs<Fs)&&b.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],hs,dt,null).clip().discardPath()),this.pdf.addImage(Y,"JPEG",Je.x,Je.y,Je.w,Je.h,null,null,rt),vt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(Y,"JPEG",ft.x,ft.y,ft.w,ft.h,null,null,rt)};var w=function(Y,me,Se){var je=[];me=me||this.pdf.internal.pageSize.width,Se=Se||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Le=this.posY+this.ctx.prevPageLastElemOffset;switch(Y.type){default:case"mt":case"lt":je.push(Math.floor((Y.y+Le)/Se)+1);break;case"arc":je.push(Math.floor((Y.y+Le-Y.radius)/Se)+1),je.push(Math.floor((Y.y+Le+Y.radius)/Se)+1);break;case"qct":var ge=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Y.x1,Y.y1,Y.x,Y.y);je.push(Math.floor((ge.y+Le)/Se)+1),je.push(Math.floor((ge.y+ge.h+Le)/Se)+1);break;case"bct":var ye=He(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Y.x1,Y.y1,Y.x2,Y.y2,Y.x,Y.y);je.push(Math.floor((ye.y+Le)/Se)+1),je.push(Math.floor((ye.y+ye.h+Le)/Se)+1);break;case"rect":je.push(Math.floor((Y.y+Le)/Se)+1),je.push(Math.floor((Y.y+Y.h+Le)/Se)+1)}for(var we=0;we<je.length;we+=1)for(;this.pdf.internal.getNumberOfPages()<je[we];)B.call(this);return je},B=function(){var Y=this.fillStyle,me=this.strokeStyle,Se=this.font,je=this.lineCap,Le=this.lineWidth,ge=this.lineJoin;this.pdf.addPage(),this.fillStyle=Y,this.strokeStyle=me,this.font=Se,this.lineCap=je,this.lineWidth=Le,this.lineJoin=ge},U=function(Y,me,Se){for(var je=0;je<Y.length;je++)switch(Y[je].type){case"bct":Y[je].x2+=me,Y[je].y2+=Se;case"qct":Y[je].x1+=me,Y[je].y1+=Se;default:Y[je].x+=me,Y[je].y+=Se}return Y},Q=function(Y){return Y.sort(function(me,Se){return me-Se})},k=function(Y,me){var Se=this.fillStyle,je=this.strokeStyle,Le=this.lineCap,ge=this.lineWidth,ye=Math.abs(ge*this.ctx.transform.scaleX),we=this.lineJoin;if(this.autoPaging){for(var Ne,ke,Be=JSON.parse(JSON.stringify(this.path)),Ae=JSON.parse(JSON.stringify(this.path)),Qe=[],le=0;le<Ae.length;le++)if(Ae[le].x!==void 0)for(var ct=w.call(this,Ae[le]),rt=0;rt<ct.length;rt+=1)Qe.indexOf(ct[rt])===-1&&Qe.push(ct[rt]);for(var ht=0;ht<Qe.length;ht++)for(;this.pdf.internal.getNumberOfPages()<Qe[ht];)B.call(this);Q(Qe);for(var ft=Qe[0],Jt=Qe[Qe.length-1],gt=ft;gt<Jt+1;gt++){this.pdf.setPage(gt),this.fillStyle=Se,this.strokeStyle=je,this.lineCap=Le,this.lineWidth=ye,this.lineJoin=we;var tt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Lt=gt===1?this.posY+this.margin[0]:this.margin[0],qt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fs=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xs=gt===1?0:qt+(gt-2)*Fs;if(this.ctx.clip_path.length!==0){var hs=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Ne,this.posX+this.margin[3],-xs+Lt+this.ctx.prevPageLastElemOffset),K.call(this,Y,!0),this.path=hs}if(ke=JSON.parse(JSON.stringify(Be)),this.path=U(ke,this.posX+this.margin[3],-xs+Lt+this.ctx.prevPageLastElemOffset),me===!1||gt===0){var it=(gt>ft||gt<Jt)&&b.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,Fs,null).clip().discardPath()),K.call(this,Y,me),it&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}this.path=Be}else this.lineWidth=ye,K.call(this,Y,me),this.lineWidth=ge},K=function(Y,me){if((Y!=="stroke"||me||!j.call(this))&&(Y==="stroke"||me||!p.call(this))){for(var Se,je,Le=[],ge=this.path,ye=0;ye<ge.length;ye++){var we=ge[ye];switch(we.type){case"begin":Le.push({begin:!0});break;case"close":Le.push({close:!0});break;case"mt":Le.push({start:we,deltas:[],abs:[]});break;case"lt":var Ne=Le.length;if(ge[ye-1]&&!isNaN(ge[ye-1].x)&&(Se=[we.x-ge[ye-1].x,we.y-ge[ye-1].y],Ne>0)){for(;Ne>=0;Ne--)if(Le[Ne-1].close!==!0&&Le[Ne-1].begin!==!0){Le[Ne-1].deltas.push(Se),Le[Ne-1].abs.push(we);break}}break;case"bct":Se=[we.x1-ge[ye-1].x,we.y1-ge[ye-1].y,we.x2-ge[ye-1].x,we.y2-ge[ye-1].y,we.x-ge[ye-1].x,we.y-ge[ye-1].y],Le[Le.length-1].deltas.push(Se);break;case"qct":var ke=ge[ye-1].x+2/3*(we.x1-ge[ye-1].x),Be=ge[ye-1].y+2/3*(we.y1-ge[ye-1].y),Ae=we.x+2/3*(we.x1-we.x),Qe=we.y+2/3*(we.y1-we.y),le=we.x,ct=we.y;Se=[ke-ge[ye-1].x,Be-ge[ye-1].y,Ae-ge[ye-1].x,Qe-ge[ye-1].y,le-ge[ye-1].x,ct-ge[ye-1].y],Le[Le.length-1].deltas.push(Se);break;case"arc":Le.push({deltas:[],abs:[],arc:!0}),Array.isArray(Le[Le.length-1].abs)&&Le[Le.length-1].abs.push(we)}}je=me?null:Y==="stroke"?"stroke":"fill";for(var rt=!1,ht=0;ht<Le.length;ht++)if(Le[ht].arc)for(var ft=Le[ht].abs,Jt=0;Jt<ft.length;Jt++){var gt=ft[Jt];gt.type==="arc"?G.call(this,gt.x,gt.y,gt.radius,gt.startAngle,gt.endAngle,gt.counterclockwise,void 0,me,!rt):ce.call(this,gt.x,gt.y),rt=!0}else if(Le[ht].close===!0)this.pdf.internal.out("h"),rt=!1;else if(Le[ht].begin!==!0){var tt=Le[ht].start.x,Lt=Le[ht].start.y;ae.call(this,Le[ht].deltas,tt,Lt),rt=!0}je&&W.call(this,je),me&&he.call(this)}},ee=function(Y){var me=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Se=me*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Y-Se;case"top":return Y+me-Se;case"hanging":return Y+me-2*Se;case"middle":return Y+me/2-Se;default:return Y}},q=function(Y){return Y+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var Y=function(){};return Y.colorStops=[],Y.addColorStop=function(me,Se){this.colorStops.push([me,Se])},Y.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Y.isCanvasGradient=!0,Y},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var G=function(Y,me,Se,je,Le,ge,ye,we,Ne){for(var ke=se.call(this,Se,je,Le,ge),Be=0;Be<ke.length;Be++){var Ae=ke[Be];Be===0&&(Ne?Z.call(this,Ae.x1+Y,Ae.y1+me):ce.call(this,Ae.x1+Y,Ae.y1+me)),de.call(this,Y,me,Ae.x2,Ae.y2,Ae.x3,Ae.y3,Ae.x4,Ae.y4)}we?he.call(this):W.call(this,ye)},W=function(Y){switch(Y){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},he=function(){this.pdf.clip(),this.pdf.discardPath()},Z=function(Y,me){this.pdf.internal.out(n(Y)+" "+r(me)+" m")},ie=function(Y){var me;switch(Y.align){case"right":case"end":me="right";break;case"center":me="center";break;default:me="left"}var Se,je,Le,ge=this.pdf.getTextDimensions(Y.text),ye=ee.call(this,Y.y),we=q.call(this,ye)-ge.h,Ne=this.ctx.transform.applyToPoint(new A(Y.x,ye));if(this.autoPaging){var ke=this.ctx.transform.decompose(),Be=new d;Be=(Be=(Be=Be.multiply(ke.translate)).multiply(ke.skew)).multiply(ke.scale);for(var Ae=this.ctx.transform.applyToRectangle(new u(Y.x,ye,ge.w,ge.h)),Qe=Be.applyToRectangle(new u(Y.x,we,ge.w,ge.h)),le=w.call(this,Qe),ct=[],rt=0;rt<le.length;rt+=1)ct.indexOf(le[rt])===-1&&ct.push(le[rt]);Q(ct);for(var ht=ct[0],ft=ct[ct.length-1],Jt=ht;Jt<ft+1;Jt++){this.pdf.setPage(Jt);var gt=Jt===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[2],qt=Lt-this.margin[0],Fs=this.pdf.internal.pageSize.width-this.margin[1],xs=Fs-this.margin[3],hs=Jt===1?0:tt+(Jt-2)*qt;if(this.ctx.clip_path.length!==0){var it=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Se,this.posX+this.margin[3],-1*hs+gt),K.call(this,"fill",!0),this.path=it}var Pe=U([JSON.parse(JSON.stringify(Qe))],this.posX+this.margin[3],-hs+gt+this.ctx.prevPageLastElemOffset)[0];Y.scale>=.01&&(je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(je*Y.scale),Le=this.lineWidth,this.lineWidth=Le*Y.scale);var dt=this.autoPaging!=="text";if(dt||Pe.y+Pe.h<=Lt){if(dt||Pe.y>=gt&&Pe.x<=Fs){var ze=dt?Y.text:this.pdf.splitTextToSize(Y.text,Y.maxWidth||Fs-Pe.x)[0],Tt=U([JSON.parse(JSON.stringify(Ae))],this.posX+this.margin[3],-hs+gt+this.ctx.prevPageLastElemOffset)[0],Je=dt&&(Jt>ht||Jt<ft)&&b.call(this);Je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xs,qt,null).clip().discardPath()),this.pdf.text(ze,Tt.x,Tt.y,{angle:Y.angle,align:me,renderingMode:Y.renderingMode}),Je&&this.pdf.restoreGraphicsState()}}else Pe.y<Lt&&(this.ctx.prevPageLastElemOffset+=Lt-Pe.y);Y.scale>=.01&&(this.pdf.setFontSize(je),this.lineWidth=Le)}}else Y.scale>=.01&&(je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(je*Y.scale),Le=this.lineWidth,this.lineWidth=Le*Y.scale),this.pdf.text(Y.text,Ne.x+this.posX,Ne.y+this.posY,{angle:Y.angle,align:me,renderingMode:Y.renderingMode,maxWidth:Y.maxWidth}),Y.scale>=.01&&(this.pdf.setFontSize(je),this.lineWidth=Le)},ce=function(Y,me,Se,je){Se=Se||0,je=je||0,this.pdf.internal.out(n(Y+Se)+" "+r(me+je)+" l")},ae=function(Y,me,Se){return this.pdf.lines(Y,me,Se,null,null)},de=function(Y,me,Se,je,Le,ge,ye,we){this.pdf.internal.out([s(i(Se+Y)),s(c(je+me)),s(i(Le+Y)),s(c(ge+me)),s(i(ye+Y)),s(c(we+me)),"c"].join(" "))},se=function(Y,me,Se,je){for(var Le=2*Math.PI,ge=Math.PI/2;me>Se;)me-=Le;var ye=Math.abs(Se-me);ye<Le&&je&&(ye=Le-ye);for(var we=[],Ne=je?-1:1,ke=me;ye>1e-5;){var Be=ke+Ne*Math.min(ye,ge);we.push(re.call(this,Y,ke,Be)),ye-=Math.abs(Be-ke),ke=Be}return we},re=function(Y,me,Se){var je=(Se-me)/2,Le=Y*Math.cos(je),ge=Y*Math.sin(je),ye=Le,we=-ge,Ne=ye*ye+we*we,ke=Ne+ye*Le+we*ge,Be=4/3*(Math.sqrt(2*Ne*ke)-ke)/(ye*ge-we*Le),Ae=ye-Be*we,Qe=we+Be*ye,le=Ae,ct=-Qe,rt=je+me,ht=Math.cos(rt),ft=Math.sin(rt);return{x1:Y*Math.cos(me),y1:Y*Math.sin(me),x2:Ae*ht-Qe*ft,y2:Ae*ft+Qe*ht,x3:le*ht-ct*ft,y3:le*ft+ct*ht,x4:Y*Math.cos(Se),y4:Y*Math.sin(Se)}},te=function(Y){return 180*Y/Math.PI},be=function(Y,me,Se,je,Le,ge){var ye=Y+.5*(Se-Y),we=me+.5*(je-me),Ne=Le+.5*(Se-Le),ke=ge+.5*(je-ge),Be=Math.min(Y,Le,ye,Ne),Ae=Math.max(Y,Le,ye,Ne),Qe=Math.min(me,ge,we,ke),le=Math.max(me,ge,we,ke);return new u(Be,Qe,Ae-Be,le-Qe)},He=function(Y,me,Se,je,Le,ge,ye,we){var Ne,ke,Be,Ae,Qe,le,ct,rt,ht,ft,Jt,gt,tt,Lt,qt=Se-Y,Fs=je-me,xs=Le-Se,hs=ge-je,it=ye-Le,Pe=we-ge;for(ke=0;ke<41;ke++)ht=(ct=(Be=Y+(Ne=ke/40)*qt)+Ne*((Qe=Se+Ne*xs)-Be))+Ne*(Qe+Ne*(Le+Ne*it-Qe)-ct),ft=(rt=(Ae=me+Ne*Fs)+Ne*((le=je+Ne*hs)-Ae))+Ne*(le+Ne*(ge+Ne*Pe-le)-rt),ke==0?(Jt=ht,gt=ft,tt=ht,Lt=ft):(Jt=Math.min(Jt,ht),gt=Math.min(gt,ft),tt=Math.max(tt,ht),Lt=Math.max(Lt,ft));return new u(Math.round(Jt),Math.round(gt),Math.round(tt-Jt),Math.round(Lt-gt))},pe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Y,me,Se=(Y=this.ctx.lineDash,me=this.ctx.lineDashOffset,JSON.stringify({lineDash:Y,lineDashOffset:me}));this.prevLineDash!==Se&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Se)}}})(Sn.API),(function(t){var s=function(A){var u,d,h,o,m,y,p,j,b,w;for(d=[],h=0,o=(A+=u="\0\0\0\0".slice(A.length%4||4)).length;o>h;h+=4)(m=(A.charCodeAt(h)<<24)+(A.charCodeAt(h+1)<<16)+(A.charCodeAt(h+2)<<8)+A.charCodeAt(h+3))!==0?(y=(m=((m=((m=((m=(m-(w=m%85))/85)-(b=m%85))/85)-(j=m%85))/85)-(p=m%85))/85)%85,d.push(y+33,p+33,j+33,b+33,w+33)):d.push(122);return(function(B,U){for(var Q=U;Q>0;Q--)B.pop()})(d,u.length),String.fromCharCode.apply(String,d)+"~>"},n=function(A){var u,d,h,o,m,y=String,p="length",j=255,b="charCodeAt",w="slice",B="replace";for(A[w](-2),A=A[w](0,-2)[B](/\s/g,"")[B]("z","!!!!!"),h=[],o=0,m=(A+=u="uuuuu"[w](A[p]%5||5))[p];m>o;o+=5)d=52200625*(A[b](o)-33)+614125*(A[b](o+1)-33)+7225*(A[b](o+2)-33)+85*(A[b](o+3)-33)+(A[b](o+4)-33),h.push(j&d>>24,j&d>>16,j&d>>8,j&d);return(function(U,Q){for(var k=Q;k>0;k--)U.pop()})(h,u[p]),y.fromCharCode.apply(y,h)},r=function(A){return A.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(A){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((A=A.replace(/\s/g,"")).indexOf(">")!==-1&&(A=A.substr(0,A.indexOf(">"))),A.length%2&&(A+="0"),u.test(A)===!1)return"";for(var d="",h=0;h<A.length;h+=2)d+=String.fromCharCode("0x"+(A[h]+A[h+1]));return d},c=function(A){for(var u=new Uint8Array(A.length),d=A.length;d--;)u[d]=A.charCodeAt(d);return(u=Xb(u)).reduce(function(h,o){return h+String.fromCharCode(o)},"")};t.processDataByFilters=function(A,u){var d=0,h=A||"",o=[];for(typeof(u=u||[])=="string"&&(u=[u]),d=0;d<u.length;d+=1)switch(u[d]){case"ASCII85Decode":case"/ASCII85Decode":h=n(h),o.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=s(h),o.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=i(h),o.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=r(h),o.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=c(h),o.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[d]+'" is not implemented')}return{data:h,reverseChain:o.reverse().join(" ")}}})(Sn.API),(function(t){t.loadFile=function(s,n,r){return(function(i,c,A){c=c!==!1,A=typeof A=="function"?A:function(){};var u=void 0;try{u=(function(d,h,o){var m=new XMLHttpRequest,y=0,p=function(j){var b=j.length,w=[],B=String.fromCharCode;for(y=0;y<b;y+=1)w.push(B(255&j.charCodeAt(y)));return w.join("")};if(m.open("GET",d,!h),m.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(m.onload=function(){m.status===200?o(p(this.responseText)):o(void 0)}),m.send(null),h&&m.status===200)return p(m.responseText)})(i,c,A)}catch{}return u})(s,n,r)},t.loadImageFile=t.loadFile})(Sn.API),(function(t){function s(){return(Wn.html2canvas?Promise.resolve(Wn.html2canvas):Yc(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function n(){return(Wn.DOMPurify?Promise.resolve(Wn.DOMPurify):Yc(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var r=function(u){var d=wa(u);return d==="undefined"?"undefined":d==="string"||u instanceof String?"string":d==="number"||u instanceof Number?"number":d==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":d==="object"?"object":"unknown"},i=function(u,d){var h=document.createElement(u);for(var o in d.className&&(h.className=d.className),d.innerHTML&&d.dompurify&&(h.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)h.style[o]=d.style[o];return h},c=function u(d,h){for(var o=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),m=d.firstChild;m;m=m.nextSibling)h!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||o.appendChild(u(m,h));return d.nodeType===1&&(d.nodeName==="CANVAS"?(o.width=d.width,o.height=d.height,o.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(o.value=d.value),o.addEventListener("load",function(){o.scrollTop=d.scrollTop,o.scrollLeft=d.scrollLeft},!0)),o},A=function u(d){var h=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),o=u.convert(Promise.resolve(),h);return(o=o.setProgress(1,u,1,[u])).set(d)};(A.prototype=Object.create(Promise.prototype)).constructor=A,A.convert=function(u,d){return u.__proto__=d||A.prototype,u},A.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},A.prototype.from=function(u,d){return this.then(function(){switch(d=d||(function(h){switch(r(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),d){case"string":return this.then(n).then(function(h){return this.set({src:i("div",{innerHTML:u,dompurify:h})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},A.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},A.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=c(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},A.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(s).then(function(d){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,d(this.prop.container,h)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},A.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(s).then(function(d){var h=this.opt.jsPDF,o=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=o,o)for(var p=0;p<o.length;++p){var j=o[p],b=j.src.find(function(w){return w.format==="truetype"});b&&h.addFont(b.url,j.ref.name,j.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,h.context2d.save(!0),d(this.prop.container,y)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},A.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},A.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},A.prototype.output=function(u,d,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(u,d):this.outputPdf(u,d)},A.prototype.outputPdf=function(u,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,d)})},A.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},A.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},A.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},A.prototype.set=function(u){if(r(u)!=="object")return this;var d=Object.keys(u||{}).map(function(h){if(h in A.template.prop)return function(){this.prop[h]=u[h]};switch(h){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[h]=u[h]}}},this);return this.then(function(){return this.thenList(d)})},A.prototype.get=function(u,d){return this.then(function(){var h=u in A.template.prop?this.prop[u]:this.opt[u];return d?d(h):h})},A.prototype.setMargin=function(u){return this.then(function(){switch(r(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},A.prototype.setPageSize=function(u){function d(h,o){return Math.floor(h*o/72*96)}return this.then(function(){(u=u||Sn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:d(u.inner.width,u.k),height:d(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},A.prototype.setProgress=function(u,d,h,o){return u!=null&&(this.progress.val=u),d!=null&&(this.progress.state=d),h!=null&&(this.progress.n=h),o!=null&&(this.progress.stack=o),this.progress.ratio=this.progress.val/this.progress.state,this},A.prototype.updateProgress=function(u,d,h,o){return this.setProgress(u?this.progress.val+u:null,d||null,h?this.progress.n+h:null,o?this.progress.stack.concat(o):null)},A.prototype.then=function(u,d){var h=this;return this.thenCore(u,d,function(o,m){return h.updateProgress(null,null,1,[o]),Promise.prototype.then.call(this,function(y){return h.updateProgress(null,o),y}).then(o,m).then(function(y){return h.updateProgress(1),y})})},A.prototype.thenCore=function(u,d,h){h=h||Promise.prototype.then;var o=this;u&&(u=u.bind(o)),d&&(d=d.bind(o));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?o:A.convert(Object.assign({},o),Promise.prototype),y=h.call(m,u,d);return A.convert(y,o.__proto__)},A.prototype.thenExternal=function(u,d){return Promise.prototype.then.call(this,u,d)},A.prototype.thenList=function(u){var d=this;return u.forEach(function(h){d=d.thenCore(h)}),d},A.prototype.catch=function(u){u&&(u=u.bind(this));var d=Promise.prototype.catch.call(this,u);return A.convert(d,this)},A.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},A.prototype.error=function(u){return this.then(function(){throw new Error(u)})},A.prototype.using=A.prototype.set,A.prototype.saveAs=A.prototype.save,A.prototype.export=A.prototype.output,A.prototype.run=A.prototype.then,Sn.getPageSize=function(u,d,h){if(wa(u)==="object"){var o=u;u=o.orientation,d=o.unit||d,h=o.format||h}d=d||"mm",h=h||"a4",u=(""+(u||"P")).toLowerCase();var m,y=(""+h).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+d}var j,b=0,w=0;if(p.hasOwnProperty(y))b=p[y][1]/m,w=p[y][0]/m;else try{b=h[1],w=h[0]}catch{throw new Error("Invalid format: "+h)}if(u==="p"||u==="portrait")u="p",w>b&&(j=w,w=b,b=j);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",b>w&&(j=w,w=b,b=j)}return{width:w,height:b,unit:d,k:m,orientation:u}},t.html=function(u,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(Uv):null;var h=new A(d);return d.worker?h:h.from(u).doCallback()}})(Sn.API),Sn.API.addJS=function(t){return UB=t,this.internal.events.subscribe("postPutResources",function(){ay=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ay+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),OB=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+UB+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ay!==void 0&&OB!==void 0&&this.internal.out("/Names <</JavaScript "+ay+" 0 R>>")}),this},(function(t){var s;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),c=0;c<i.length;c++){var A=i[c],u=r.exec(A);if(u!=null){var d=u[1];n.internal.newObjectDeferredBegin(d,!1)}n.internal.write(A)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,o=[];for(c=0;c<h;c++){var m=n.internal.newObject();o.push(m);var y=n.internal.getPageInfo(c+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),c=0;c<o.length;c++)n.internal.write("(page_"+(c+1)+")"+o[c]+" 0 R");n.internal.write(" ] >>","endobj"),s=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+s+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,c){var A={title:i,options:c,children:[]};return r==null&&(r=this.root),r.children.push(A),A},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,c=0;c<r.children.length;c++){var A=r.children[c];this.objStart(A),this.line("/Title "+this.makeString(A.title)),this.line("/Parent "+this.makeRef(r)),c>0&&this.line("/Prev "+this.makeRef(r.children[c-1])),c<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[c+1])),A.children.length>0&&(this.line("/First "+this.makeRef(A.children[0])),this.line("/Last "+this.makeRef(A.children[A.children.length-1])));var u=this.count=this.count_r({count:0},A);if(u>0&&this.line("/Count "+u),A.options&&A.options.pageNumber){var d=n.internal.getPageInfo(A.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var h=0;h<r.children.length;h++)this.renderItems(r.children[h])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var c=0;c<i.children.length;c++)r.count++,this.count_r(r,i.children[c]);return r.count}}])})(Sn.API),(function(t){var s=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,c,A,u){var d,h=this.decode.DCT_DECODE,o=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=A||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,d=(function(m){for(var y,p=256*m.charCodeAt(4)+m.charCodeAt(5),j=m.length,b={width:0,height:0,numcomponents:1},w=4;w<j;w+=2){if(w+=p,s.indexOf(m.charCodeAt(w+1))!==-1){y=256*m.charCodeAt(w+5)+m.charCodeAt(w+6),b={width:256*m.charCodeAt(w+7)+m.charCodeAt(w+8),height:y,numcomponents:m.charCodeAt(w+9)};break}p=256*m.charCodeAt(w+2)+m.charCodeAt(w+3)}return b})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),d.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}o={data:n,width:d.width,height:d.height,colorSpace:u,bitsPerComponent:8,filter:h,index:r,alias:i}}return o}})(Sn.API),Sn.API.processPNG=function(t,s,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,c=GV(t,{checkCrc:!0}),A=c.width,u=c.height,d=c.channels,h=c.palette,o=c.depth;i=h&&d===1?(function(G){for(var W=G.width,he=G.height,Z=G.data,ie=G.palette,ce=G.depth,ae=!1,de=[],se=[],re=void 0,te=!1,be=0,He=0;He<ie.length;He++){var pe=_N(ie[He],4),Y=pe[0],me=pe[1],Se=pe[2],je=pe[3];de.push(Y,me,Se),je!=null&&(je===0?(be++,se.length<1&&se.push(He)):je<255&&(te=!0))}if(te||be>1){ae=!0,se=void 0;var Le=W*he;re=new Uint8Array(Le);for(var ge=new DataView(Z.buffer),ye=0;ye<Le;ye++){var we=Dv(ge,ye,ce),Ne=_N(ie[we],4)[3];re[ye]=Ne}}else be===0&&(se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ae?8:void 0,colorBytes:Z,alphaBytes:re,needSMask:ae,palette:de,mask:se}})(c):d===2||d===4?(function(G){for(var W=G.data,he=G.width,Z=G.height,ie=G.channels,ce=G.depth,ae=ie===2?"DeviceGray":"DeviceRGB",de=ie-1,se=he*Z,re=de,te=se*re,be=1*se,He=Math.ceil(te*ce/8),pe=Math.ceil(be*ce/8),Y=new Uint8Array(He),me=new Uint8Array(pe),Se=new DataView(W.buffer),je=new DataView(Y.buffer),Le=new DataView(me.buffer),ge=!1,ye=0;ye<se;ye++){for(var we=ye*ie,Ne=0;Ne<re;Ne++)zB(je,Dv(Se,we+Ne,ce),ye*re+Ne,ce);var ke=Dv(Se,we+re,ce);ke<(1<<ce)-1&&(ge=!0),zB(Le,ke,1*ye,ce)}return{colorSpace:ae,colorsPerPixel:de,sMaskBitsPerComponent:ge?ce:void 0,colorBytes:Y,alphaBytes:me,needSMask:ge}})(c):(function(G){var W=G.data,he=G.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:he,colorsPerPixel:he==="DeviceGray"?1:3,colorBytes:W instanceof Uint16Array?(function(Z){for(var ie=Z.length,ce=new Uint8Array(2*ie),ae=new DataView(ce.buffer,ce.byteOffset,ce.byteLength),de=0;de<ie;de++)ae.setUint16(2*de,Z[de],!1);return ce})(W):W,needSMask:!1}})(c);var m,y,p,j=i,b=j.colorSpace,w=j.colorsPerPixel,B=j.sMaskBitsPerComponent,U=j.colorBytes,Q=j.alphaBytes,k=j.needSMask,K=j.palette,ee=j.mask,q=null;return r!==Sn.API.image_compression.NONE&&typeof Xb=="function"?(q=(function(G){var W;switch(G){case Sn.API.image_compression.FAST:W=11;break;case Sn.API.image_compression.MEDIUM:W=13;break;case Sn.API.image_compression.SLOW:W=14;break;default:W=12}return W})(r),m=this.decode.FLATE_DECODE,y="/Predictor ".concat(q," /Colors ").concat(w," /BitsPerComponent ").concat(o," /Columns ").concat(A),t=_B(U,Math.ceil(A*w*o/8),w,o,r),k&&(p=_B(Q,Math.ceil(A*B/8),1,B,r))):(m=void 0,y=void 0,t=U,k&&(p=Q)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:n,data:t,index:s,filter:m,decodeParameters:y,transparency:ee,palette:K,sMask:p,predictor:q,width:A,height:u,bitsPerComponent:o,sMaskBitsPerComponent:B,colorSpace:b}}},(function(t){t.processGIF89A=function(s,n,r,i){var c=new mq(s),A=c.width,u=c.height,d=[];c.decodeAndBlitFrameRGBA(0,d);var h={data:d,width:A,height:u},o=new Qv(100).encode(h,100);return t.processJPEG.call(this,o,n,r,i)},t.processGIF87A=t.processGIF89A})(Sn.API),$c.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var s=0;s<t;s++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0);this.palette[s]={red:i,green:r,blue:n,quad:c}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},$c.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,s=this.width*this.height*4;this.data=new Uint8Array(s),this[t]()}catch(n){_a.log("bit decode error:"+n)}},$c.prototype.bit1=function(){var t,s=Math.ceil(this.width/8),n=s%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<s;i++)for(var c=this.datav.getUint8(this.pos++,!0),A=r*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var d=this.palette[c>>7-u&1];this.data[A+4*u]=d.blue,this.data[A+4*u+1]=d.green,this.data[A+4*u+2]=d.red,this.data[A+4*u+3]=255}n!==0&&(this.pos+=4-n)}},$c.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),s=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var c=this.datav.getUint8(this.pos++,!0),A=r*this.width*4+2*i*4,u=c>>4,d=15&c,h=this.palette[u];if(this.data[A]=h.blue,this.data[A+1]=h.green,this.data[A+2]=h.red,this.data[A+3]=255,2*i+1>=this.width)break;h=this.palette[d],this.data[A+4]=h.blue,this.data[A+4+1]=h.green,this.data[A+4+2]=h.red,this.data[A+4+3]=255}s!==0&&(this.pos+=4-s)}},$c.prototype.bit8=function(){for(var t=this.width%4,s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+4*r;if(i<this.palette.length){var A=this.palette[i];this.data[c]=A.red,this.data[c+1]=A.green,this.data[c+2]=A.blue,this.data[c+3]=255}else this.data[c]=255,this.data[c+1]=255,this.data[c+2]=255,this.data[c+3]=255}t!==0&&(this.pos+=4-t)}},$c.prototype.bit15=function(){for(var t=this.width%3,s=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var A=(c&s)/s*255|0,u=(c>>5&s)/s*255|0,d=(c>>10&s)/s*255|0,h=c>>15?255:0,o=r*this.width*4+4*i;this.data[o]=d,this.data[o+1]=u,this.data[o+2]=A,this.data[o+3]=h}this.pos+=t}},$c.prototype.bit16=function(){for(var t=this.width%3,s=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,c=0;c<this.width;c++){var A=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(A&s)/s*255|0,d=(A>>5&n)/n*255|0,h=(A>>11)/s*255|0,o=i*this.width*4+4*c;this.data[o]=h,this.data[o+1]=d,this.data[o+2]=u,this.data[o+3]=255}this.pos+=t}},$c.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),A=s*this.width*4+4*n;this.data[A]=c,this.data[A+1]=i,this.data[A+2]=r,this.data[A+3]=255}this.pos+=this.width%4}},$c.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var s=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),A=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+4*n;this.data[u]=c,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=A}},$c.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(s,n,r,i){var c=new $c(s,!1),A=c.width,u=c.height,d={data:c.getData(),width:A,height:u},h=new Qv(100).encode(d,100);return t.processJPEG.call(this,h,n,r,i)}})(Sn.API),$B.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(s,n,r,i){var c=new $B(s),A=c.width,u=c.height,d={data:c.getData(),width:A,height:u},h=new Qv(100).encode(d,100);return t.processJPEG.call(this,h,n,r,i)}})(Sn.API),Sn.API.processRGBA=function(t,s,n){for(var r=t.data,i=r.length,c=new Uint8Array(i/4*3),A=new Uint8Array(i/4),u=0,d=0,h=0;h<i;h+=4){var o=r[h],m=r[h+1],y=r[h+2],p=r[h+3];c[u++]=o,c[u++]=m,c[u++]=y,A[d++]=p}var j=this.__addimage__.arrayBufferToBinaryString(c);return{alpha:this.__addimage__.arrayBufferToBinaryString(A),data:j,index:s,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Sn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},uf=Sn.API,iy=uf.getCharWidthsArray=function(t,s){var n,r,i=(s=s||{}).font||this.internal.getFont(),c=s.fontSize||this.internal.getFontSize(),A=s.charSpace||this.internal.getCharSpace(),u=s.widths?s.widths:i.metadata.Unicode.widths,d=u.fof?u.fof:1,h=s.kerning?s.kerning:i.metadata.Unicode.kerning,o=h.fof?h.fof:1,m=s.doKerning!==!1,y=0,p=t.length,j=0,b=u[0]||d,w=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?w.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+A*(1e3/c)||0)/1e3):(y=m&&wa(h[r])==="object"&&!isNaN(parseInt(h[r][j],10))?h[r][j]/o:0,w.push((u[r]||b)/d+y)),j=r;return w},LB=uf.getStringUnitWidth=function(t,s){var n=(s=s||{}).fontSize||this.internal.getFontSize(),r=s.font||this.internal.getFont(),i=s.charSpace||this.internal.getCharSpace();return uf.processArabic&&(t=uf.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:iy.apply(this,arguments).reduce(function(c,A){return c+A},0)},DB=function(t,s,n,r){for(var i=[],c=0,A=t.length,u=0;c!==A&&u+s[c]<n;)u+=s[c],c++;i.push(t.slice(0,c));var d=c;for(u=0;c!==A;)u+s[c]>r&&(i.push(t.slice(d,c)),u=0,d=c),u+=s[c],c++;return d!==c&&i.push(t.slice(d,c)),i},QB=function(t,s,n){n||(n={});var r,i,c,A,u,d,h,o=[],m=[o],y=n.textIndent||0,p=0,j=0,b=t.split(" "),w=iy.apply(this,[" ",n])[0];if(d=n.lineIndent===-1?b[0].length+2:n.lineIndent||0){var B=Array(d).join(" "),U=[];b.map(function(k){(k=k.split(/\s*\n/)).length>1?U=U.concat(k.map(function(K,ee){return(ee&&K.length?`
`:"")+K})):U.push(k[0])}),b=U,d=LB.apply(this,[B,n])}for(c=0,A=b.length;c<A;c++){var Q=0;if(r=b[c],d&&r[0]==`
`&&(r=r.substr(1),Q=1),y+p+(j=(i=iy.apply(this,[r,n])).reduce(function(k,K){return k+K},0))>s||Q){if(j>s){for(u=DB.apply(this,[r,i,s-(y+p),s]),o.push(u.shift()),o=[u.pop()];u.length;)m.push([u.shift()]);j=i.slice(r.length-(o[0]?o[0].length:0)).reduce(function(k,K){return k+K},0)}else o=[r];m.push(o),y=j+d,p=w}else o.push(r),y+=p+j,p=w}return h=d?function(k,K){return(K?B:"")+k.join(" ")}:function(k){return k.join(" ")},m.map(h)},uf.splitTextToSize=function(t,s,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),c=(function(o){if(o.widths&&o.kerning)return{widths:o.widths,kerning:o.kerning};var m=this.internal.getFont(o.fontName,o.fontStyle),y="Unicode";return m.metadata[y]?{widths:m.metadata[y].widths||{0:1},kerning:m.metadata[y].kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var A=1*this.internal.scaleFactor*s/i;c.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,c.lineIndent=n.lineIndent;var u,d,h=[];for(u=0,d=r.length;u<d;u++)h=h.concat(QB.apply(this,[r[u],A,c]));return h},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var s="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},c=0;c<16;c++)r[n[c]]=s[c],i[s[c]]=n[c];var A=function(y){return"0x"+parseInt(y,10).toString(16)},u=t.__fontmetrics__.compress=function(y){var p,j,b,w,B=["{"];for(var U in y){if(p=y[U],isNaN(parseInt(U,10))?j="'"+U+"'":(U=parseInt(U,10),j=(j=A(U).slice(2)).slice(0,-1)+i[j.slice(-1)]),typeof p=="number")p<0?(b=A(p).slice(3),w="-"):(b=A(p).slice(2),w=""),b=w+b.slice(0,-1)+i[b.slice(-1)];else{if(wa(p)!=="object")throw new Error("Don't know what to do with value type "+wa(p)+".");b=u(p)}B.push(j+b)}return B.push("}"),B.join("")},d=t.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,j,b,w,B={},U=1,Q=B,k=[],K="",ee="",q=y.length-1,G=1;G<q;G+=1)(w=y[G])=="'"?p?(b=p.join(""),p=void 0):p=[]:p?p.push(w):w=="{"?(k.push([Q,b]),Q={},b=void 0):w=="}"?((j=k.pop())[0][j[1]]=Q,b=void 0,Q=j[0]):w=="-"?U=-1:b===void 0?r.hasOwnProperty(w)?(K+=r[w],b=parseInt(K,16)*U,U=1,K=""):K+=w:r.hasOwnProperty(w)?(ee+=r[w],Q[b]=parseInt(ee,16)*U,U=1,b=void 0,ee=""):ee+=w;return B},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},o={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},m={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(y){var p=y.font,j=m.Unicode[p.postScriptName];j&&(p.metadata.Unicode={},p.metadata.Unicode.widths=j.widths,p.metadata.Unicode.kerning=j.kerning);var b=o.Unicode[p.postScriptName];b&&(p.metadata.Unicode.encoding=b,p.encoding=b.codePages[0])}])})(Sn.API),(function(t){var s=function(n){for(var r=n.length,i=new Uint8Array(r),c=0;c<r;c++)i[c]=n.charCodeAt(c);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,c=n.instance;if(!i.isStandardFont){if(c===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=c.existsFileInVFS(i.postScriptName)===!1?c.loadFile(i.postScriptName):c.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(A,u){u=/^\x00\x01\x00\x00/.test(u)?s(u):s(Cy(u)),A.metadata=t.API.TTFFont.open(u),A.metadata.Unicode=A.metadata.Unicode||{encoding:{},kerning:{},widths:[]},A.metadata.glyIdsUsed=[0]})(i,r)}}])})(Sn),Sn.API.addSvgAsImage=function(t,s,n,r,i,c,A,u){if(isNaN(s)||isNaN(n))throw _a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw _a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=r,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var o={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return(Wn.canvg?Promise.resolve(Wn.canvg):Yc(()=>import("./index.es-SlVVdct1.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(h,t,o)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(o)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),s,n,r,i,A,u)})},Sn.API.putTotalPages=function(t){var s,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(s=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(s=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(s,n);return this},Sn.API.viewerPreferences=function(t,s){var n;t=t||{},s=s||!1;var r,i,c,A={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(A),d=[],h=0,o=0,m=0;function y(j,b){var w,B=!1;for(w=0;w<j.length;w+=1)j[w]===b&&(B=!0);return B}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(A)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||s===!0){var p=u.length;for(m=0;m<p;m+=1)n[u[m]].value=n[u[m]].defaultValue,n[u[m]].explicitSet=!1}if(wa(t)==="object"){for(i in t)if(c=t[i],y(u,i)&&c!==void 0){if(n[i].type==="boolean"&&typeof c=="boolean")n[i].value=c;else if(n[i].type==="name"&&y(n[i].valueSet,c))n[i].value=c;else if(n[i].type==="integer"&&Number.isInteger(c))n[i].value=c;else if(n[i].type==="array"){for(h=0;h<c.length;h+=1)if(r=!0,c[h].length===1&&typeof c[h][0]=="number")d.push(String(c[h]-1));else if(c[h].length>1){for(o=0;o<c[h].length;o+=1)typeof c[h][o]!="number"&&(r=!1);r===!0&&d.push([c[h][0]-1,c[h][1]-1].join(" "))}n[i].value="["+d.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,b=[];for(j in n)n[j].explicitSet===!0&&(n[j].type==="name"?b.push("/"+j+" /"+n[j].value):b.push("/"+j+" "+n[j].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var s=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),c=unescape(encodeURIComponent(r)),A=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),h=c.length+A.length+u.length+i.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(i+c+A+u+d),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",s)),this}})(Sn.API),(function(t){var s=t.API,n=s.pdfEscape16=function(c,A){for(var u,d=A.metadata.Unicode.widths,h=["","0","00","000","0000"],o=[""],m=0,y=c.length;m<y;++m){if(u=A.metadata.characterToGlyph(c.charCodeAt(m)),A.metadata.glyIdsUsed.push(u),A.metadata.toUnicode[u]=c.charCodeAt(m),d.indexOf(u)==-1&&(d.push(u),d.push([parseInt(A.metadata.widthOfGlyph(u),10)])),u=="0")return o.join("");u=u.toString(16),o.push(h[4-u.length],u)}return o.join("")},r=function(c){var A,u,d,h,o,m,y;for(o=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],m=0,y=(u=Object.keys(c).sort(function(p,j){return p-j})).length;m<y;m++)A=u[m],d.length>=100&&(o+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),c[A]!==void 0&&c[A]!==null&&typeof c[A].toString=="function"&&(h=("0000"+c[A].toString(16)).slice(-4),A=("0000"+(+A).toString(16)).slice(-4),d.push("<"+A+"><"+h+">"));return d.length&&(o+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),o+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};s.events.push(["putFont",function(c){(function(A){var u=A.font,d=A.out,h=A.newObject,o=A.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="Identity-H"){for(var m=u.metadata.Unicode.widths,y=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),p="",j=0;j<y.length;j++)p+=String.fromCharCode(y[j]);var b=h();o({data:p,addLength1:!0,objectId:b}),d("endobj");var w=h();o({data:r(u.metadata.toUnicode),addLength1:!0,objectId:w}),d("endobj");var B=h();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+pf(u.fontName)),d("/FontFile2 "+b+" 0 R"),d("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),d("/Flags "+u.metadata.flags),d("/StemV "+u.metadata.stemV),d("/ItalicAngle "+u.metadata.italicAngle),d("/Ascent "+u.metadata.ascender),d("/Descent "+u.metadata.decender),d("/CapHeight "+u.metadata.capHeight),d(">>"),d("endobj");var U=h();d("<<"),d("/Type /Font"),d("/BaseFont /"+pf(u.fontName)),d("/FontDescriptor "+B+" 0 R"),d("/W "+t.API.PDFObject.convert(m)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+u.encoding+")"),d(">>"),d(">>"),d("endobj"),u.objectNumber=h(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+w+" 0 R"),d("/BaseFont /"+pf(u.fontName)),d("/Encoding /"+u.encoding),d("/DescendantFonts ["+U+" 0 R]"),d(">>"),d("endobj"),u.isAlreadyPutted=!0}})(c)}]),s.events.push(["putFont",function(c){(function(A){var u=A.font,d=A.out,h=A.newObject,o=A.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var m=u.metadata.rawData,y="",p=0;p<m.length;p++)y+=String.fromCharCode(m[p]);var j=h();o({data:y,addLength1:!0,objectId:j}),d("endobj");var b=h();o({data:r(u.metadata.toUnicode),addLength1:!0,objectId:b}),d("endobj");var w=h();d("<<"),d("/Descent "+u.metadata.decender),d("/CapHeight "+u.metadata.capHeight),d("/StemV "+u.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+j+" 0 R"),d("/Flags 96"),d("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),d("/FontName /"+pf(u.fontName)),d("/ItalicAngle "+u.metadata.italicAngle),d("/Ascent "+u.metadata.ascender),d(">>"),d("endobj"),u.objectNumber=h();for(var B=0;B<u.metadata.hmtx.widths.length;B++)u.metadata.hmtx.widths[B]=parseInt(u.metadata.hmtx.widths[B]*(1e3/u.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+pf(u.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),d("endobj"),u.isAlreadyPutted=!0}})(c)}]);var i=function(c){var A,u=c.text||"",d=c.x,h=c.y,o=c.options||{},m=c.mutex||{},y=m.pdfEscape,p=m.activeFontKey,j=m.fonts,b=p,w="",B=0,U="",Q=j[b].encoding;if(j[b].encoding!=="Identity-H")return{text:u,x:d,y:h,options:o,mutex:m};for(U=u,b=p,Array.isArray(u)&&(U=u[0]),B=0;B<U.length;B+=1)j[b].metadata.hasOwnProperty("cmap")&&(A=j[b].metadata.cmap.unicode.codeMap[U[B].charCodeAt(0)]),A||U[B].charCodeAt(0)<256&&j[b].metadata.hasOwnProperty("Unicode")?w+=U[B]:w+="";var k="";return parseInt(b.slice(1))<14||Q==="WinAnsiEncoding"?k=y(w,b).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):Q==="Identity-H"&&(k=n(w,j[b])),m.isHex=!0,{text:k,x:d,y:h,options:o,mutex:m}};s.events.push(["postProcessText",function(c){var A=c.text||"",u=[],d={text:A,x:c.x,y:c.y,options:c.options,mutex:c.mutex};if(Array.isArray(A)){var h=0;for(h=0;h<A.length;h+=1)Array.isArray(A[h])&&A[h].length===3?u.push([i(Object.assign({},d,{text:A[h][0]})).text,A[h][1],A[h][2]]):u.push(i(Object.assign({},d,{text:A[h]})).text);c.text=u}else c.text=i(Object.assign({},d,{text:A})).text}])})(Sn),(function(t){var s=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return s.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return s.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return s.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(Sn.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,c,A,u,d,h,o,m=s,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],B=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),U=!1,Q=0;this.__bidiEngine__={};var k=function(Z){var ie=Z.charCodeAt(),ce=ie>>8,ae=b[ce];return ae!==void 0?m[256*ae+(255&ie)]:ce===252||ce===253?"AL":B.test(ce)?"L":ce===8?"R":"N"},K=function(Z){for(var ie,ce=0;ce<Z.length;ce++){if((ie=k(Z.charAt(ce)))==="L")return!1;if(ie==="R")return!0}return!1},ee=function(Z,ie,ce,ae){var de,se,re,te,be=ie[ae];switch(be){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":U=!1;break;case"N":case"AN":break;case"EN":U&&(be="AN");break;case"AL":U=!0,be="R";break;case"WS":case"BN":be="N";break;case"CS":ae<1||ae+1>=ie.length||(de=ce[ae-1])!=="EN"&&de!=="AN"||(se=ie[ae+1])!=="EN"&&se!=="AN"?be="N":U&&(se="AN"),be=se===de?se:"N";break;case"ES":be=(de=ae>0?ce[ae-1]:"B")==="EN"&&ae+1<ie.length&&ie[ae+1]==="EN"?"EN":"N";break;case"ET":if(ae>0&&ce[ae-1]==="EN"){be="EN";break}if(U){be="N";break}for(re=ae+1,te=ie.length;re<te&&ie[re]==="ET";)re++;be=re<te&&ie[re]==="EN"?"EN":"N";break;case"NSM":if(A&&!u){for(te=ie.length,re=ae+1;re<te&&ie[re]==="NSM";)re++;if(re<te){var He=Z[ae],pe=He>=1425&&He<=2303||He===64286;if(de=ie[re],pe&&(de==="R"||de==="AL")){be="R";break}}}be=ae<1||(de=ie[ae-1])==="B"?"N":ce[ae-1];break;case"B":U=!1,i=!0,be=Q;break;case"S":c=!0,be="N"}return be},q=function(Z,ie,ce){var ae=Z.split("");return ce&&G(ae,ce,{hiLevel:Q}),ae.reverse(),ie&&ie.reverse(),ae.join("")},G=function(Z,ie,ce){var ae,de,se,re,te,be=-1,He=Z.length,pe=0,Y=[],me=Q?p:y,Se=[];for(U=!1,i=!1,c=!1,de=0;de<He;de++)Se[de]=k(Z[de]);for(se=0;se<He;se++){if(te=pe,Y[se]=ee(Z,Se,Y,se),ae=240&(pe=me[te][j[Y[se]]]),pe&=15,ie[se]=re=me[pe][5],ae>0)if(ae===16){for(de=be;de<se;de++)ie[de]=1;be=-1}else be=-1;if(me[pe][6])be===-1&&(be=se);else if(be>-1){for(de=be;de<se;de++)ie[de]=re;be=-1}Se[se]==="B"&&(ie[se]=0),ce.hiLevel|=re}c&&(function(je,Le,ge){for(var ye=0;ye<ge;ye++)if(je[ye]==="S"){Le[ye]=Q;for(var we=ye-1;we>=0&&je[we]==="WS";we--)Le[we]=Q}})(Se,ie,He)},W=function(Z,ie,ce,ae,de){if(!(de.hiLevel<Z)){if(Z===1&&Q===1&&!i)return ie.reverse(),void(ce&&ce.reverse());for(var se,re,te,be,He=ie.length,pe=0;pe<He;){if(ae[pe]>=Z){for(te=pe+1;te<He&&ae[te]>=Z;)te++;for(be=pe,re=te-1;be<re;be++,re--)se=ie[be],ie[be]=ie[re],ie[re]=se,ce&&(se=ce[be],ce[be]=ce[re],ce[re]=se);pe=te}pe++}}},he=function(Z,ie,ce){var ae=Z.split(""),de={hiLevel:Q};return ce||(ce=[]),G(ae,ce,de),(function(se,re,te){if(te.hiLevel!==0&&o)for(var be,He=0;He<se.length;He++)re[He]===1&&(be=w.indexOf(se[He]))>=0&&(se[He]=w[be+1])})(ae,ce,de),W(2,ae,ie,ce,de),W(1,ae,ie,ce,de),ae.join("")};return this.__bidiEngine__.doBidiReorder=function(Z,ie,ce){if((function(de,se){if(se)for(var re=0;re<de.length;re++)se[re]=re;u===void 0&&(u=K(de)),h===void 0&&(h=K(de))})(Z,ie),A||!d||h)if(A&&d&&u^h)Q=u?1:0,Z=q(Z,ie,ce);else if(!A&&d&&h)Q=u?1:0,Z=he(Z,ie,ce),Z=q(Z,ie);else if(!A||u||d||h){if(A&&!d&&u^h)Z=q(Z,ie),u?(Q=0,Z=he(Z,ie,ce)):(Q=1,Z=he(Z,ie,ce),Z=q(Z,ie));else if(A&&u&&!d&&h)Q=1,Z=he(Z,ie,ce),Z=q(Z,ie);else if(!A&&!d&&u^h){var ae=o;u?(Q=1,Z=he(Z,ie,ce),Q=0,o=!1,Z=he(Z,ie,ce),o=ae):(Q=0,Z=he(Z,ie,ce),Z=q(Z,ie),Q=1,o=!1,Z=he(Z,ie,ce),o=ae,Z=q(Z,ie))}}else Q=0,Z=he(Z,ie,ce);else Q=u?1:0,Z=he(Z,ie,ce);return Z},this.__bidiEngine__.setOptions=function(Z){Z&&(A=Z.isInputVisual,d=Z.isOutputVisual,u=Z.isInputRtl,h=Z.isOutputRtl,o=Z.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var s=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var c=r.options||{};r.mutex,c.lang;var A=[];if(c.isInputVisual=typeof c.isInputVisual!="boolean"||c.isInputVisual,n.setOptions(c),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(A=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?A.push([n.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):A.push([n.doBidiReorder(i[u])]);r.text=A}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])})(Sn),Sn.API.TTFFont=(function(){function t(s){var n;if(this.rawData=s,n=this.contents=new xu(s),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Iq(this),this.registerTTF()}return t.open=function(s){return new t(s)},t.prototype.parse=function(){return this.directory=new gq(this.contents),this.head=new xq(this),this.name=new Sq(this),this.cmap=new AR(this),this.toUnicode={},this.hhea=new vq(this),this.maxp=new Nq(this),this.hmtx=new Bq(this),this.post=new jq(this),this.os2=new bq(this),this.loca=new Fq(this),this.glyf=new Cq(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var s,n,r,i,c;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var A,u,d,h;for(h=[],A=0,u=(d=this.bbox).length;A<u;A++)s=d[A],h.push(Math.round(s*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(c=this.familyClass)===1||c===2||c===3||c===4||c===5||c===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(s){var n;return((n=this.cmap.unicode)!=null?n.codeMap[s]:void 0)||0},t.prototype.widthOfGlyph=function(s){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(s).advance*n},t.prototype.widthOfString=function(s,n,r){var i,c,A,u;for(A=0,c=0,u=(s=""+s).length;0<=u?c<u:c>u;c=0<=u?++c:--c)i=s.charCodeAt(c),A+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return A*(n/1e3)},t.prototype.lineHeight=function(s,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*s},t})();var rd,xu=(function(){function t(s){this.data=s??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(s){return this.data[this.pos++]=s},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(s){return this.writeByte(s>>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt32=function(){var s;return(s=this.readUInt32())>=2147483648?s-4294967296:s},t.prototype.writeInt32=function(s){return s<0&&(s+=4294967296),this.writeUInt32(s)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(s){return this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt16=function(){var s;return(s=this.readUInt16())>=32768?s-65536:s},t.prototype.writeInt16=function(s){return s<0&&(s+=65536),this.writeUInt16(s)},t.prototype.readString=function(s){var n,r;for(r=[],n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(s){var n,r,i;for(i=[],n=0,r=s.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(s.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(s){return this.writeInt16(s)},t.prototype.readLongLong=function(){var s,n,r,i,c,A,u,d;return s=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),c=this.readByte(),A=this.readByte(),u=this.readByte(),d=this.readByte(),128&s?-1*(72057594037927940*(255^s)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^c)+65536*(255^A)+256*(255^u)+(255^d)+1):72057594037927940*s+281474976710656*n+1099511627776*r+4294967296*i+16777216*c+65536*A+256*u+d},t.prototype.writeLongLong=function(s){var n,r;return n=Math.floor(s/4294967296),r=4294967295&s,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(s){return this.writeInt32(s)},t.prototype.read=function(s){var n,r;for(n=[],r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(s){var n,r,i,c;for(c=[],r=0,i=s.length;r<i;r++)n=s[r],c.push(this.writeByte(n));return c},t})(),gq=(function(){var t;function s(n){var r,i,c;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,c=this.tableCount;0<=c?i<c:i>c;i=0<=c?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return s.prototype.encode=function(n){var r,i,c,A,u,d,h,o,m,y,p,j,b;for(b in p=Object.keys(n).length,d=Math.log(2),m=16*Math.floor(Math.log(p)/d),A=Math.floor(m/d),o=16*p-m,(i=new xu).writeInt(this.scalarType),i.writeShort(p),i.writeShort(m),i.writeShort(A),i.writeShort(o),c=16*p,h=i.pos+c,u=null,j=[],n)for(y=n[b],i.writeString(b),i.writeInt(t(y)),i.writeInt(h),i.writeInt(y.length),j=j.concat(y),b==="head"&&(u=h),h+=y.length;h%4;)j.push(0),h++;return i.write(j),r=2981146554-t(i.data),i.pos=u+8,i.writeUInt32(r),i.data},t=function(n){var r,i,c,A;for(n=uR.call(n);n.length%4;)n.push(0);for(c=new xu(n),i=0,r=0,A=n.length;r<A;r=r+=4)i+=c.readUInt32();return 4294967295&i},s})(),yq={}.hasOwnProperty,kd=function(t,s){for(var n in s)yq.call(s,n)&&(t[n]=s[n]);function r(){this.constructor=t}return r.prototype=s.prototype,t.prototype=new r,t.__super__=s.prototype,t};rd=(function(){function t(s){var n;this.file=s,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var xq=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return kd(t,rd),t.prototype.tag="head",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.revision=s.readInt(),this.checkSumAdjustment=s.readInt(),this.magicNumber=s.readInt(),this.flags=s.readShort(),this.unitsPerEm=s.readShort(),this.created=s.readLongLong(),this.modified=s.readLongLong(),this.xMin=s.readShort(),this.yMin=s.readShort(),this.xMax=s.readShort(),this.yMax=s.readShort(),this.macStyle=s.readShort(),this.lowestRecPPEM=s.readShort(),this.fontDirectionHint=s.readShort(),this.indexToLocFormat=s.readShort(),this.glyphDataFormat=s.readShort()},t.prototype.encode=function(s){var n;return(n=new xu).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(s),n.writeShort(this.glyphDataFormat),n.data},t})(),VB=(function(){function t(s,n){var r,i,c,A,u,d,h,o,m,y,p,j,b,w,B,U,Q;switch(this.platformID=s.readUInt16(),this.encodingID=s.readShort(),this.offset=n+s.readInt(),m=s.pos,s.pos=this.offset,this.format=s.readUInt16(),this.length=s.readUInt16(),this.language=s.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=s.readByte();break;case 4:for(p=s.readUInt16(),y=p/2,s.pos+=6,c=(function(){var k,K;for(K=[],d=k=0;0<=y?k<y:k>y;d=0<=y?++k:--k)K.push(s.readUInt16());return K})(),s.pos+=2,b=(function(){var k,K;for(K=[],d=k=0;0<=y?k<y:k>y;d=0<=y?++k:--k)K.push(s.readUInt16());return K})(),h=(function(){var k,K;for(K=[],d=k=0;0<=y?k<y:k>y;d=0<=y?++k:--k)K.push(s.readUInt16());return K})(),o=(function(){var k,K;for(K=[],d=k=0;0<=y?k<y:k>y;d=0<=y?++k:--k)K.push(s.readUInt16());return K})(),i=(this.length-s.pos+this.offset)/2,u=(function(){var k,K;for(K=[],d=k=0;0<=i?k<i:k>i;d=0<=i?++k:--k)K.push(s.readUInt16());return K})(),d=B=0,Q=c.length;B<Q;d=++B)for(w=c[d],r=U=j=b[d];j<=w?U<=w:U>=w;r=j<=w?++U:--U)o[d]===0?A=r+h[d]:(A=u[o[d]/2+(r-j)-(y-d)]||0)!==0&&(A+=h[d]),this.codeMap[r]=65535&A}s.pos=m}return t.encode=function(s,n){var r,i,c,A,u,d,h,o,m,y,p,j,b,w,B,U,Q,k,K,ee,q,G,W,he,Z,ie,ce,ae,de,se,re,te,be,He,pe,Y,me,Se,je,Le,ge,ye,we,Ne,ke,Be;switch(ae=new xu,A=Object.keys(s).sort(function(Ae,Qe){return Ae-Qe}),n){case"macroman":for(b=0,w=(function(){var Ae=[];for(j=0;j<256;++j)Ae.push(0);return Ae})(),U={0:0},c={},de=0,be=A.length;de<be;de++)U[we=s[i=A[de]]]==null&&(U[we]=++b),c[i]={old:s[i],new:U[s[i]]},w[i]=U[s[i]];return ae.writeUInt16(1),ae.writeUInt16(0),ae.writeUInt32(12),ae.writeUInt16(0),ae.writeUInt16(262),ae.writeUInt16(0),ae.write(w),{charMap:c,subtable:ae.data,maxGlyphID:b+1};case"unicode":for(ie=[],m=[],Q=0,U={},r={},B=h=null,se=0,He=A.length;se<He;se++)U[K=s[i=A[se]]]==null&&(U[K]=++Q),r[i]={old:K,new:U[K]},u=U[K]-i,B!=null&&u===h||(B&&m.push(B),ie.push(i),h=u),B=i;for(B&&m.push(B),m.push(65535),ie.push(65535),he=2*(W=ie.length),G=2*Math.pow(Math.log(W)/Math.LN2,2),y=Math.log(G/2)/Math.LN2,q=2*W-G,d=[],ee=[],p=[],j=re=0,pe=ie.length;re<pe;j=++re){if(Z=ie[j],o=m[j],Z===65535){d.push(0),ee.push(0);break}if(Z-(ce=r[Z].new)>=32768)for(d.push(0),ee.push(2*(p.length+W-j)),i=te=Z;Z<=o?te<=o:te>=o;i=Z<=o?++te:--te)p.push(r[i].new);else d.push(ce-Z),ee.push(0)}for(ae.writeUInt16(3),ae.writeUInt16(1),ae.writeUInt32(12),ae.writeUInt16(4),ae.writeUInt16(16+8*W+2*p.length),ae.writeUInt16(0),ae.writeUInt16(he),ae.writeUInt16(G),ae.writeUInt16(y),ae.writeUInt16(q),ge=0,Y=m.length;ge<Y;ge++)i=m[ge],ae.writeUInt16(i);for(ae.writeUInt16(0),ye=0,me=ie.length;ye<me;ye++)i=ie[ye],ae.writeUInt16(i);for(Ne=0,Se=d.length;Ne<Se;Ne++)u=d[Ne],ae.writeUInt16(u);for(ke=0,je=ee.length;ke<je;ke++)k=ee[ke],ae.writeUInt16(k);for(Be=0,Le=p.length;Be<Le;Be++)b=p[Be],ae.writeUInt16(b);return{charMap:r,subtable:ae.data,maxGlyphID:Q+1}}},t})(),AR=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return kd(t,rd),t.prototype.tag="cmap",t.prototype.parse=function(s){var n,r,i;for(s.pos=this.offset,this.version=s.readUInt16(),i=s.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new VB(s,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(s,n){var r,i;return n==null&&(n="macroman"),r=VB.encode(s,n),(i=new xu).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t})(),vq=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return kd(t,rd),t.prototype.tag="hhea",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.ascender=s.readShort(),this.decender=s.readShort(),this.lineGap=s.readShort(),this.advanceWidthMax=s.readShort(),this.minLeftSideBearing=s.readShort(),this.minRightSideBearing=s.readShort(),this.xMaxExtent=s.readShort(),this.caretSlopeRise=s.readShort(),this.caretSlopeRun=s.readShort(),this.caretOffset=s.readShort(),s.pos+=8,this.metricDataFormat=s.readShort(),this.numberOfMetrics=s.readUInt16()},t})(),bq=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return kd(t,rd),t.prototype.tag="OS/2",t.prototype.parse=function(s){if(s.pos=this.offset,this.version=s.readUInt16(),this.averageCharWidth=s.readShort(),this.weightClass=s.readUInt16(),this.widthClass=s.readUInt16(),this.type=s.readShort(),this.ySubscriptXSize=s.readShort(),this.ySubscriptYSize=s.readShort(),this.ySubscriptXOffset=s.readShort(),this.ySubscriptYOffset=s.readShort(),this.ySuperscriptXSize=s.readShort(),this.ySuperscriptYSize=s.readShort(),this.ySuperscriptXOffset=s.readShort(),this.ySuperscriptYOffset=s.readShort(),this.yStrikeoutSize=s.readShort(),this.yStrikeoutPosition=s.readShort(),this.familyClass=s.readShort(),this.panose=(function(){var n,r;for(r=[],n=0;n<10;++n)r.push(s.readByte());return r})(),this.charRange=(function(){var n,r;for(r=[],n=0;n<4;++n)r.push(s.readInt());return r})(),this.vendorID=s.readString(4),this.selection=s.readShort(),this.firstCharIndex=s.readShort(),this.lastCharIndex=s.readShort(),this.version>0&&(this.ascent=s.readShort(),this.descent=s.readShort(),this.lineGap=s.readShort(),this.winAscent=s.readShort(),this.winDescent=s.readShort(),this.codePageRange=(function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(s.readInt());return r})(),this.version>1))return this.xHeight=s.readShort(),this.capHeight=s.readShort(),this.defaultChar=s.readShort(),this.breakChar=s.readShort(),this.maxContext=s.readShort()},t})(),jq=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return kd(t,rd),t.prototype.tag="post",t.prototype.parse=function(s){var n,r,i;switch(s.pos=this.offset,this.format=s.readInt(),this.italicAngle=s.readInt(),this.underlinePosition=s.readShort(),this.underlineThickness=s.readShort(),this.isFixedPitch=s.readInt(),this.minMemType42=s.readInt(),this.maxMemType42=s.readInt(),this.minMemType1=s.readInt(),this.maxMemType1=s.readInt(),this.format){case 65536:case 196608:break;case 131072:var c;for(r=s.readUInt16(),this.glyphNameIndex=[],c=0;0<=r?c<r:c>r;c=0<=r?++c:--c)this.glyphNameIndex.push(s.readUInt16());for(this.names=[],i=[];s.pos<this.offset+this.length;)n=s.readByte(),i.push(this.names.push(s.readString(n)));return i;case 151552:return r=s.readUInt16(),this.offsets=s.read(r);case 262144:return this.map=(function(){var A,u,d;for(d=[],c=A=0,u=this.file.maxp.numGlyphs;0<=u?A<u:A>u;c=0<=u?++A:--A)d.push(s.readUInt32());return d}).call(this)}},t})(),wq=function(t,s){this.raw=t,this.length=t.length,this.platformID=s.platformID,this.encodingID=s.encodingID,this.languageID=s.languageID},Sq=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return kd(t,rd),t.prototype.tag="name",t.prototype.parse=function(s){var n,r,i,c,A,u,d,h,o,m,y;for(s.pos=this.offset,s.readShort(),n=s.readShort(),u=s.readShort(),r=[],c=0;0<=n?c<n:c>n;c=0<=n?++c:--c)r.push({platformID:s.readShort(),encodingID:s.readShort(),languageID:s.readShort(),nameID:s.readShort(),length:s.readShort(),offset:this.offset+u+s.readShort()});for(d={},c=o=0,m=r.length;o<m;c=++o)i=r[c],s.pos=i.offset,h=s.readString(i.length),A=new wq(h,i),d[y=i.nameID]==null&&(d[y]=[]),d[i.nameID].push(A);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t})(),Nq=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return kd(t,rd),t.prototype.tag="maxp",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.numGlyphs=s.readUInt16(),this.maxPoints=s.readUInt16(),this.maxContours=s.readUInt16(),this.maxCompositePoints=s.readUInt16(),this.maxComponentContours=s.readUInt16(),this.maxZones=s.readUInt16(),this.maxTwilightPoints=s.readUInt16(),this.maxStorage=s.readUInt16(),this.maxFunctionDefs=s.readUInt16(),this.maxInstructionDefs=s.readUInt16(),this.maxStackElements=s.readUInt16(),this.maxSizeOfInstructions=s.readUInt16(),this.maxComponentElements=s.readUInt16(),this.maxComponentDepth=s.readUInt16()},t})(),Bq=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return kd(t,rd),t.prototype.tag="hmtx",t.prototype.parse=function(s){var n,r,i,c,A,u,d;for(s.pos=this.offset,this.metrics=[],n=0,u=this.file.hhea.numberOfMetrics;0<=u?n<u:n>u;n=0<=u?++n:--n)this.metrics.push({advance:s.readUInt16(),lsb:s.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var h,o;for(o=[],n=h=0;0<=i?h<i:h>i;n=0<=i?++h:--h)o.push(s.readInt16());return o})(),this.widths=(function(){var h,o,m,y;for(y=[],h=0,o=(m=this.metrics).length;h<o;h++)c=m[h],y.push(c.advance);return y}).call(this),r=this.widths[this.widths.length-1],d=[],n=A=0;0<=i?A<i:A>i;n=0<=i?++A:--A)d.push(this.widths.push(r));return d},t.prototype.forGlyph=function(s){return s in this.metrics?this.metrics[s]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[s-this.metrics.length]}},t})(),uR=[].slice,Cq=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return kd(t,rd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(s){var n,r,i,c,A,u,d,h,o,m;return s in this.cache?this.cache[s]:(c=this.file.loca,n=this.file.contents,r=c.indexOf(s),(i=c.lengthOf(s))===0?this.cache[s]=null:(n.pos=this.offset+r,A=(u=new xu(n.read(i))).readShort(),h=u.readShort(),m=u.readShort(),d=u.readShort(),o=u.readShort(),this.cache[s]=A===-1?new Tq(u,h,m,d,o):new Eq(u,A,h,m,d,o),this.cache[s]))},t.prototype.encode=function(s,n,r){var i,c,A,u,d;for(A=[],c=[],u=0,d=n.length;u<d;u++)i=s[n[u]],c.push(A.length),i&&(A=A.concat(i.encode(r)));return c.push(A.length),{table:A,offsets:c}},t})(),Eq=(function(){function t(s,n,r,i,c,A){this.raw=s,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=c,this.yMax=A,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),Tq=(function(){function t(s,n,r,i,c){var A,u;for(this.raw=s,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=c,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],A=this.raw;u=A.readShort(),this.glyphOffsets.push(A.pos),this.glyphIDs.push(A.readUInt16()),32&u;)A.pos+=1&u?4:2,128&u?A.pos+=8:64&u?A.pos+=4:8&u&&(A.pos+=2)}return t.prototype.encode=function(){var s,n,r;for(n=new xu(uR.call(this.raw.data)),s=0,r=this.glyphIDs.length;s<r;++s)n.pos=this.glyphOffsets[s];return n.data},t})(),Fq=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return kd(t,rd),t.prototype.tag="loca",t.prototype.parse=function(s){var n,r;return s.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,c;for(c=[],r=0,i=this.length;r<i;r+=2)c.push(2*s.readUInt16());return c}).call(this):(function(){var i,c;for(c=[],r=0,i=this.length;r<i;r+=4)c.push(s.readUInt32());return c}).call(this)},t.prototype.indexOf=function(s){return this.offsets[s]},t.prototype.lengthOf=function(s){return this.offsets[s+1]-this.offsets[s]},t.prototype.encode=function(s,n){for(var r=new Uint32Array(this.offsets.length),i=0,c=0,A=0;A<r.length;++A)if(r[A]=i,c<n.length&&n[c]==A){++c,r[A]=i;var u=this.offsets[A],d=this.offsets[A+1]-u;d>0&&(i+=d)}for(var h=new Array(4*r.length),o=0;o<r.length;++o)h[4*o+3]=255&r[o],h[4*o+2]=(65280&r[o])>>8,h[4*o+1]=(16711680&r[o])>>16,h[4*o]=(4278190080&r[o])>>24;return h},t})(),Iq=(function(){function t(s){this.font=s,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var s,n,r,i,c;for(n in i=this.font.cmap.tables[0].codeMap,s={},c=this.subset)r=c[n],s[n]=i[r];return s},t.prototype.glyphsFor=function(s){var n,r,i,c,A,u,d;for(i={},A=0,u=s.length;A<u;A++)i[c=s[A]]=this.font.glyf.glyphFor(c);for(c in n=[],i)(r=i[c])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(c in d=this.glyphsFor(n))r=d[c],i[c]=r;return i},t.prototype.encode=function(s,n){var r,i,c,A,u,d,h,o,m,y,p,j,b,w,B;for(i in r=AR.encode(this.generateCmap(),"unicode"),A=this.glyphsFor(s),p={0:0},B=r.charMap)p[(d=B[i]).old]=d.new;for(j in y=r.maxGlyphID,A)j in p||(p[j]=y++);return o=(function(U){var Q,k;for(Q in k={},U)k[U[Q]]=Q;return k})(p),m=Object.keys(o).sort(function(U,Q){return U-Q}),b=(function(){var U,Q,k;for(k=[],U=0,Q=m.length;U<Q;U++)u=m[U],k.push(o[u]);return k})(),c=this.font.glyf.encode(A,b,p),h=this.font.loca.encode(c.offsets,b),w={cmap:this.font.cmap.raw(),glyf:c.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},t})();Sn.API.PDFObject=(function(){var t;function s(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},s.convert=function(n){var r,i,c,A;if(Array.isArray(n))return"["+(function(){var u,d,h;for(h=[],u=0,d=n.length;u<d;u++)r=n[u],h.push(s.convert(r));return h})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in c=["<<"],n)A=n[i],c.push("/"+i+" "+s.convert(A));return c.push(">>"),c.join(`
`)}return""+n},s})();const Rq=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:lq,AcroFormAppearance:pn,AcroFormButton:ro,AcroFormCheckBox:am,AcroFormChoiceField:uh,AcroFormComboBox:fh,AcroFormEditBox:nm,AcroFormListBox:hh,AcroFormPasswordField:im,AcroFormPushButton:rm,AcroFormRadioButton:ph,AcroFormTextField:fu,GState:bm,ShadingPattern:cu,TilingPattern:lh,default:Sn,jsPDF:Sn},Symbol.toStringTag,{value:"Module"})),Oq=N3(Rq);var Ey={exports:{}};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */var Uq=Ey.exports,qB;function Lq(){return qB||(qB=1,(function(t,s){(function(n,r){t.exports=r()})(Uq,(function(){/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var n=function(T,C){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,R){O.__proto__=R}||function(O,R){for(var J in R)Object.prototype.hasOwnProperty.call(R,J)&&(O[J]=R[J])},n(T,C)};function r(T,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");n(T,C);function O(){this.constructor=T}T.prototype=C===null?Object.create(C):(O.prototype=C.prototype,new O)}var i=function(){return i=Object.assign||function(C){for(var O,R=1,J=arguments.length;R<J;R++){O=arguments[R];for(var fe in O)Object.prototype.hasOwnProperty.call(O,fe)&&(C[fe]=O[fe])}return C},i.apply(this,arguments)};function c(T,C,O,R){function J(fe){return fe instanceof O?fe:new O(function(Fe){Fe(fe)})}return new(O||(O=Promise))(function(fe,Fe){function qe(Et){try{mt(R.next(Et))}catch(Ot){Fe(Ot)}}function Ge(Et){try{mt(R.throw(Et))}catch(Ot){Fe(Ot)}}function mt(Et){Et.done?fe(Et.value):J(Et.value).then(qe,Ge)}mt((R=R.apply(T,[])).next())})}function A(T,C){var O={label:0,sent:function(){if(fe[0]&1)throw fe[1];return fe[1]},trys:[],ops:[]},R,J,fe,Fe;return Fe={next:qe(0),throw:qe(1),return:qe(2)},typeof Symbol=="function"&&(Fe[Symbol.iterator]=function(){return this}),Fe;function qe(mt){return function(Et){return Ge([mt,Et])}}function Ge(mt){if(R)throw new TypeError("Generator is already executing.");for(;O;)try{if(R=1,J&&(fe=mt[0]&2?J.return:mt[0]?J.throw||((fe=J.return)&&fe.call(J),0):J.next)&&!(fe=fe.call(J,mt[1])).done)return fe;switch(J=0,fe&&(mt=[mt[0]&2,fe.value]),mt[0]){case 0:case 1:fe=mt;break;case 4:return O.label++,{value:mt[1],done:!1};case 5:O.label++,J=mt[1],mt=[0];continue;case 7:mt=O.ops.pop(),O.trys.pop();continue;default:if(fe=O.trys,!(fe=fe.length>0&&fe[fe.length-1])&&(mt[0]===6||mt[0]===2)){O=0;continue}if(mt[0]===3&&(!fe||mt[1]>fe[0]&&mt[1]<fe[3])){O.label=mt[1];break}if(mt[0]===6&&O.label<fe[1]){O.label=fe[1],fe=mt;break}if(fe&&O.label<fe[2]){O.label=fe[2],O.ops.push(mt);break}fe[2]&&O.ops.pop(),O.trys.pop();continue}mt=C.call(T,O)}catch(Et){mt=[6,Et],J=0}finally{R=fe=0}if(mt[0]&5)throw mt[1];return{value:mt[0]?mt[1]:void 0,done:!0}}}function u(T,C,O){if(arguments.length===2)for(var R=0,J=C.length,fe;R<J;R++)(fe||!(R in C))&&(fe||(fe=Array.prototype.slice.call(C,0,R)),fe[R]=C[R]);return T.concat(fe||C)}for(var d=(function(){function T(C,O,R,J){this.left=C,this.top=O,this.width=R,this.height=J}return T.prototype.add=function(C,O,R,J){return new T(this.left+C,this.top+O,this.width+R,this.height+J)},T.fromClientRect=function(C,O){return new T(O.left+C.windowBounds.left,O.top+C.windowBounds.top,O.width,O.height)},T.fromDOMRectList=function(C,O){var R=Array.from(O).find(function(J){return J.width!==0});return R?new T(R.left+C.windowBounds.left,R.top+C.windowBounds.top,R.width,R.height):T.EMPTY},T.EMPTY=new T(0,0,0,0),T})(),h=function(T,C){return d.fromClientRect(T,C.getBoundingClientRect())},o=function(T){var C=T.body,O=T.documentElement;if(!C||!O)throw new Error("Unable to get document size");var R=Math.max(Math.max(C.scrollWidth,O.scrollWidth),Math.max(C.offsetWidth,O.offsetWidth),Math.max(C.clientWidth,O.clientWidth)),J=Math.max(Math.max(C.scrollHeight,O.scrollHeight),Math.max(C.offsetHeight,O.offsetHeight),Math.max(C.clientHeight,O.clientHeight));return new d(0,0,R,J)},m=function(T){for(var C=[],O=0,R=T.length;O<R;){var J=T.charCodeAt(O++);if(J>=55296&&J<=56319&&O<R){var fe=T.charCodeAt(O++);(fe&64512)===56320?C.push(((J&1023)<<10)+(fe&1023)+65536):(C.push(J),O--)}else C.push(J)}return C},y=function(){for(var T=[],C=0;C<arguments.length;C++)T[C]=arguments[C];if(String.fromCodePoint)return String.fromCodePoint.apply(String,T);var O=T.length;if(!O)return"";for(var R=[],J=-1,fe="";++J<O;){var Fe=T[J];Fe<=65535?R.push(Fe):(Fe-=65536,R.push((Fe>>10)+55296,Fe%1024+56320)),(J+1===O||R.length>16384)&&(fe+=String.fromCharCode.apply(String,R),R.length=0)}return fe},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=typeof Uint8Array>"u"?[]:new Uint8Array(256),b=0;b<p.length;b++)j[p.charCodeAt(b)]=b;for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=typeof Uint8Array>"u"?[]:new Uint8Array(256),U=0;U<w.length;U++)B[w.charCodeAt(U)]=U;for(var Q=function(T){var C=T.length*.75,O=T.length,R,J=0,fe,Fe,qe,Ge;T[T.length-1]==="="&&(C--,T[T.length-2]==="="&&C--);var mt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(C):new Array(C),Et=Array.isArray(mt)?mt:new Uint8Array(mt);for(R=0;R<O;R+=4)fe=B[T.charCodeAt(R)],Fe=B[T.charCodeAt(R+1)],qe=B[T.charCodeAt(R+2)],Ge=B[T.charCodeAt(R+3)],Et[J++]=fe<<2|Fe>>4,Et[J++]=(Fe&15)<<4|qe>>2,Et[J++]=(qe&3)<<6|Ge&63;return mt},k=function(T){for(var C=T.length,O=[],R=0;R<C;R+=2)O.push(T[R+1]<<8|T[R]);return O},K=function(T){for(var C=T.length,O=[],R=0;R<C;R+=4)O.push(T[R+3]<<24|T[R+2]<<16|T[R+1]<<8|T[R]);return O},ee=5,q=11,G=2,W=q-ee,he=65536>>ee,Z=1<<ee,ie=Z-1,ce=1024>>ee,ae=he+ce,de=ae,se=32,re=de+se,te=65536>>q,be=1<<W,He=be-1,pe=function(T,C,O){return T.slice?T.slice(C,O):new Uint16Array(Array.prototype.slice.call(T,C,O))},Y=function(T,C,O){return T.slice?T.slice(C,O):new Uint32Array(Array.prototype.slice.call(T,C,O))},me=function(T,C){var O=Q(T),R=Array.isArray(O)?K(O):new Uint32Array(O),J=Array.isArray(O)?k(O):new Uint16Array(O),fe=24,Fe=pe(J,fe/2,R[4]/2),qe=R[5]===2?pe(J,(fe+R[4])/2):Y(R,Math.ceil((fe+R[4])/4));return new Se(R[0],R[1],R[2],R[3],Fe,qe)},Se=(function(){function T(C,O,R,J,fe,Fe){this.initialValue=C,this.errorValue=O,this.highStart=R,this.highValueIndex=J,this.index=fe,this.data=Fe}return T.prototype.get=function(C){var O;if(C>=0){if(C<55296||C>56319&&C<=65535)return O=this.index[C>>ee],O=(O<<G)+(C&ie),this.data[O];if(C<=65535)return O=this.index[he+(C-55296>>ee)],O=(O<<G)+(C&ie),this.data[O];if(C<this.highStart)return O=re-te+(C>>q),O=this.index[O],O+=C>>ee&He,O=this.index[O],O=(O<<G)+(C&ie),this.data[O];if(C<=1114111)return this.data[this.highValueIndex]}return this.errorValue},T})(),je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Le=typeof Uint8Array>"u"?[]:new Uint8Array(256),ge=0;ge<je.length;ge++)Le[je.charCodeAt(ge)]=ge;var ye="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",we=50,Ne=1,ke=2,Be=3,Ae=4,Qe=5,le=7,ct=8,rt=9,ht=10,ft=11,Jt=12,gt=13,tt=14,Lt=15,qt=16,Fs=17,xs=18,hs=19,it=20,Pe=21,dt=22,ze=23,Tt=24,Je=25,vt=26,$e=27,St=28,Rt=29,Zt=30,bt=31,Vt=32,vs=33,us=34,jt=35,kt=36,Ft=37,is=38,Ss=39,nn=40,es=41,zs=42,Us=43,Vs=[9001,65288],Ls="!",js="",Os="",Ds=me(ye),ut=[Zt,kt],Pt=[Ne,ke,Be,Qe],Kt=[ht,ct],ws=[$e,vt],Ts=Pt.concat(Kt),ys=[is,Ss,nn,us,jt],Qs=[Lt,gt],Gt=function(T,C){C===void 0&&(C="strict");var O=[],R=[],J=[];return T.forEach(function(fe,Fe){var qe=Ds.get(fe);if(qe>we?(J.push(!0),qe-=we):J.push(!1),["normal","auto","loose"].indexOf(C)!==-1&&[8208,8211,12316,12448].indexOf(fe)!==-1)return R.push(Fe),O.push(qt);if(qe===Ae||qe===ft){if(Fe===0)return R.push(Fe),O.push(Zt);var Ge=O[Fe-1];return Ts.indexOf(Ge)===-1?(R.push(R[Fe-1]),O.push(Ge)):(R.push(Fe),O.push(Zt))}if(R.push(Fe),qe===bt)return O.push(C==="strict"?Pe:Ft);if(qe===zs||qe===Rt)return O.push(Zt);if(qe===Us)return fe>=131072&&fe<=196605||fe>=196608&&fe<=262141?O.push(Ft):O.push(Zt);O.push(qe)}),[R,O,J]},Ys=function(T,C,O,R){var J=R[O];if(Array.isArray(T)?T.indexOf(J)!==-1:T===J)for(var fe=O;fe<=R.length;){fe++;var Fe=R[fe];if(Fe===C)return!0;if(Fe!==ht)break}if(J===ht)for(var fe=O;fe>0;){fe--;var qe=R[fe];if(Array.isArray(T)?T.indexOf(qe)!==-1:T===qe)for(var Ge=O;Ge<=R.length;){Ge++;var Fe=R[Ge];if(Fe===C)return!0;if(Fe!==ht)break}if(qe!==ht)break}return!1},Cn=function(T,C){for(var O=T;O>=0;){var R=C[O];if(R===ht)O--;else return R}return 0},na=function(T,C,O,R,J){if(O[R]===0)return js;var fe=R-1;if(Array.isArray(J)&&J[fe]===!0)return js;var Fe=fe-1,qe=fe+1,Ge=C[fe],mt=Fe>=0?C[Fe]:0,Et=C[qe];if(Ge===ke&&Et===Be)return js;if(Pt.indexOf(Ge)!==-1)return Ls;if(Pt.indexOf(Et)!==-1||Kt.indexOf(Et)!==-1)return js;if(Cn(fe,C)===ct)return Os;if(Ds.get(T[fe])===ft||(Ge===Vt||Ge===vs)&&Ds.get(T[qe])===ft||Ge===le||Et===le||Ge===rt||[ht,gt,Lt].indexOf(Ge)===-1&&Et===rt||[Fs,xs,hs,Tt,St].indexOf(Et)!==-1||Cn(fe,C)===dt||Ys(ze,dt,fe,C)||Ys([Fs,xs],Pe,fe,C)||Ys(Jt,Jt,fe,C))return js;if(Ge===ht)return Os;if(Ge===ze||Et===ze)return js;if(Et===qt||Ge===qt)return Os;if([gt,Lt,Pe].indexOf(Et)!==-1||Ge===tt||mt===kt&&Qs.indexOf(Ge)!==-1||Ge===St&&Et===kt||Et===it||ut.indexOf(Et)!==-1&&Ge===Je||ut.indexOf(Ge)!==-1&&Et===Je||Ge===$e&&[Ft,Vt,vs].indexOf(Et)!==-1||[Ft,Vt,vs].indexOf(Ge)!==-1&&Et===vt||ut.indexOf(Ge)!==-1&&ws.indexOf(Et)!==-1||ws.indexOf(Ge)!==-1&&ut.indexOf(Et)!==-1||[$e,vt].indexOf(Ge)!==-1&&(Et===Je||[dt,Lt].indexOf(Et)!==-1&&C[qe+1]===Je)||[dt,Lt].indexOf(Ge)!==-1&&Et===Je||Ge===Je&&[Je,St,Tt].indexOf(Et)!==-1)return js;if([Je,St,Tt,Fs,xs].indexOf(Et)!==-1)for(var Ot=fe;Ot>=0;){var ns=C[Ot];if(ns===Je)return js;if([St,Tt].indexOf(ns)!==-1)Ot--;else break}if([$e,vt].indexOf(Et)!==-1)for(var Ot=[Fs,xs].indexOf(Ge)!==-1?Fe:fe;Ot>=0;){var ns=C[Ot];if(ns===Je)return js;if([St,Tt].indexOf(ns)!==-1)Ot--;else break}if(is===Ge&&[is,Ss,us,jt].indexOf(Et)!==-1||[Ss,us].indexOf(Ge)!==-1&&[Ss,nn].indexOf(Et)!==-1||[nn,jt].indexOf(Ge)!==-1&&Et===nn||ys.indexOf(Ge)!==-1&&[it,vt].indexOf(Et)!==-1||ys.indexOf(Et)!==-1&&Ge===$e||ut.indexOf(Ge)!==-1&&ut.indexOf(Et)!==-1||Ge===Tt&&ut.indexOf(Et)!==-1||ut.concat(Je).indexOf(Ge)!==-1&&Et===dt&&Vs.indexOf(T[qe])===-1||ut.concat(Je).indexOf(Et)!==-1&&Ge===xs)return js;if(Ge===es&&Et===es){for(var Xs=O[fe],Rs=1;Xs>0&&(Xs--,C[Xs]===es);)Rs++;if(Rs%2!==0)return js}return Ge===Vt&&Et===vs?js:Os},tr=function(T,C){C||(C={lineBreak:"normal",wordBreak:"normal"});var O=Gt(T,C.lineBreak),R=O[0],J=O[1],fe=O[2];(C.wordBreak==="break-all"||C.wordBreak==="break-word")&&(J=J.map(function(qe){return[Je,Zt,zs].indexOf(qe)!==-1?Ft:qe}));var Fe=C.wordBreak==="keep-all"?fe.map(function(qe,Ge){return qe&&T[Ge]>=19968&&T[Ge]<=40959}):void 0;return[R,J,Fe]},Mt=(function(){function T(C,O,R,J){this.codePoints=C,this.required=O===Ls,this.start=R,this.end=J}return T.prototype.slice=function(){return y.apply(void 0,this.codePoints.slice(this.start,this.end))},T})(),bn=function(T,C){var O=m(T),R=tr(O,C),J=R[0],fe=R[1],Fe=R[2],qe=O.length,Ge=0,mt=0;return{next:function(){if(mt>=qe)return{done:!0,value:null};for(var Et=js;mt<qe&&(Et=na(O,fe,J,++mt,Fe))===js;);if(Et!==js||mt===qe){var Ot=new Mt(O,Et,Ge,mt);return Ge=mt,{value:Ot,done:!1}}return{done:!0,value:null}}}},Tr=1,lr=2,Bs=4,Js=8,Pn=10,kr=47,jr=92,Ur=9,hr=32,qs=34,tn=61,Is=35,dn=36,Hs=37,wr=39,at=40,ms=41,ds=95,Nn=45,Yn=33,sr=60,ha=62,Ma=64,Na=91,cr=93,Ka=61,pa=123,er=63,oa=125,pi=124,$a=126,Va=128,ti=65533,xe=42,_e=43,nt=44,V=58,Te=59,Ye=46,Oe=0,yt=8,Qt=11,ln=14,Ln=31,bs=127,Ps=-1,Dn=48,Hn=97,qn=101,Yr=102,v=117,N=122,x=65,I=69,F=70,_=85,L=90,P=function(T){return T>=Dn&&T<=57},z=function(T){return T>=55296&&T<=57343},ne=function(T){return P(T)||T>=x&&T<=F||T>=Hn&&T<=Yr},Ie=function(T){return T>=Hn&&T<=N},st=function(T){return T>=x&&T<=L},ot=function(T){return Ie(T)||st(T)},Dt=function(T){return T>=Va},rs=function(T){return T===Pn||T===Ur||T===hr},cs=function(T){return ot(T)||Dt(T)||T===ds},Ns=function(T){return cs(T)||P(T)||T===Nn},Zs=function(T){return T>=Oe&&T<=yt||T===Qt||T>=ln&&T<=Ln||T===bs},Rn=function(T,C){return T!==jr?!1:C!==Pn},$=function(T,C,O){return T===Nn?cs(C)||Rn(C,O):cs(T)?!0:!!(T===jr&&Rn(T,C))},ve=function(T,C,O){return T===_e||T===Nn?P(C)?!0:C===Ye&&P(O):P(T===Ye?C:T)},Ve=function(T){var C=0,O=1;(T[C]===_e||T[C]===Nn)&&(T[C]===Nn&&(O=-1),C++);for(var R=[];P(T[C]);)R.push(T[C++]);var J=R.length?parseInt(y.apply(void 0,R),10):0;T[C]===Ye&&C++;for(var fe=[];P(T[C]);)fe.push(T[C++]);var Fe=fe.length,qe=Fe?parseInt(y.apply(void 0,fe),10):0;(T[C]===I||T[C]===qn)&&C++;var Ge=1;(T[C]===_e||T[C]===Nn)&&(T[C]===Nn&&(Ge=-1),C++);for(var mt=[];P(T[C]);)mt.push(T[C++]);var Et=mt.length?parseInt(y.apply(void 0,mt),10):0;return O*(J+qe*Math.pow(10,-Fe))*Math.pow(10,Ge*Et)},At={type:2},Bt={type:3},as={type:4},gs={type:13},cn={type:8},vn={type:21},Qn={type:9},Xn={type:10},Fr={type:11},Fa={type:12},qa={type:14},Xr={type:23},mi={type:1},si={type:25},Ci={type:24},Rl={type:26},Yo={type:27},Ol={type:28},Hd={type:29},ad={type:31},wo={type:32},So=(function(){function T(){this._value=[]}return T.prototype.write=function(C){this._value=this._value.concat(m(C))},T.prototype.read=function(){for(var C=[],O=this.consumeToken();O!==wo;)C.push(O),O=this.consumeToken();return C},T.prototype.consumeToken=function(){var C=this.consumeCodePoint();switch(C){case qs:return this.consumeStringToken(qs);case Is:var O=this.peekCodePoint(0),R=this.peekCodePoint(1),J=this.peekCodePoint(2);if(Ns(O)||Rn(R,J)){var fe=$(O,R,J)?lr:Tr,Fe=this.consumeName();return{type:5,value:Fe,flags:fe}}break;case dn:if(this.peekCodePoint(0)===tn)return this.consumeCodePoint(),gs;break;case wr:return this.consumeStringToken(wr);case at:return At;case ms:return Bt;case xe:if(this.peekCodePoint(0)===tn)return this.consumeCodePoint(),qa;break;case _e:if(ve(C,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(C),this.consumeNumericToken();break;case nt:return as;case Nn:var qe=C,Ge=this.peekCodePoint(0),mt=this.peekCodePoint(1);if(ve(qe,Ge,mt))return this.reconsumeCodePoint(C),this.consumeNumericToken();if($(qe,Ge,mt))return this.reconsumeCodePoint(C),this.consumeIdentLikeToken();if(Ge===Nn&&mt===ha)return this.consumeCodePoint(),this.consumeCodePoint(),Ci;break;case Ye:if(ve(C,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(C),this.consumeNumericToken();break;case kr:if(this.peekCodePoint(0)===xe)for(this.consumeCodePoint();;){var Et=this.consumeCodePoint();if(Et===xe&&(Et=this.consumeCodePoint(),Et===kr))return this.consumeToken();if(Et===Ps)return this.consumeToken()}break;case V:return Rl;case Te:return Yo;case sr:if(this.peekCodePoint(0)===Yn&&this.peekCodePoint(1)===Nn&&this.peekCodePoint(2)===Nn)return this.consumeCodePoint(),this.consumeCodePoint(),si;break;case Ma:var Ot=this.peekCodePoint(0),ns=this.peekCodePoint(1),Xs=this.peekCodePoint(2);if($(Ot,ns,Xs)){var Fe=this.consumeName();return{type:7,value:Fe}}break;case Na:return Ol;case jr:if(Rn(C,this.peekCodePoint(0)))return this.reconsumeCodePoint(C),this.consumeIdentLikeToken();break;case cr:return Hd;case Ka:if(this.peekCodePoint(0)===tn)return this.consumeCodePoint(),cn;break;case pa:return Fr;case oa:return Fa;case v:case _:var Rs=this.peekCodePoint(0),ks=this.peekCodePoint(1);return Rs===_e&&(ne(ks)||ks===er)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(C),this.consumeIdentLikeToken();case pi:if(this.peekCodePoint(0)===tn)return this.consumeCodePoint(),Qn;if(this.peekCodePoint(0)===pi)return this.consumeCodePoint(),vn;break;case $a:if(this.peekCodePoint(0)===tn)return this.consumeCodePoint(),Xn;break;case Ps:return wo}return rs(C)?(this.consumeWhiteSpace(),ad):P(C)?(this.reconsumeCodePoint(C),this.consumeNumericToken()):cs(C)?(this.reconsumeCodePoint(C),this.consumeIdentLikeToken()):{type:6,value:y(C)}},T.prototype.consumeCodePoint=function(){var C=this._value.shift();return typeof C>"u"?-1:C},T.prototype.reconsumeCodePoint=function(C){this._value.unshift(C)},T.prototype.peekCodePoint=function(C){return C>=this._value.length?-1:this._value[C]},T.prototype.consumeUnicodeRangeToken=function(){for(var C=[],O=this.consumeCodePoint();ne(O)&&C.length<6;)C.push(O),O=this.consumeCodePoint();for(var R=!1;O===er&&C.length<6;)C.push(O),O=this.consumeCodePoint(),R=!0;if(R){var J=parseInt(y.apply(void 0,C.map(function(Ge){return Ge===er?Dn:Ge})),16),fe=parseInt(y.apply(void 0,C.map(function(Ge){return Ge===er?F:Ge})),16);return{type:30,start:J,end:fe}}var Fe=parseInt(y.apply(void 0,C),16);if(this.peekCodePoint(0)===Nn&&ne(this.peekCodePoint(1))){this.consumeCodePoint(),O=this.consumeCodePoint();for(var qe=[];ne(O)&&qe.length<6;)qe.push(O),O=this.consumeCodePoint();var fe=parseInt(y.apply(void 0,qe),16);return{type:30,start:Fe,end:fe}}else return{type:30,start:Fe,end:Fe}},T.prototype.consumeIdentLikeToken=function(){var C=this.consumeName();return C.toLowerCase()==="url"&&this.peekCodePoint(0)===at?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===at?(this.consumeCodePoint(),{type:19,value:C}):{type:20,value:C}},T.prototype.consumeUrlToken=function(){var C=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ps)return{type:22,value:""};var O=this.peekCodePoint(0);if(O===wr||O===qs){var R=this.consumeStringToken(this.consumeCodePoint());return R.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ps||this.peekCodePoint(0)===ms)?(this.consumeCodePoint(),{type:22,value:R.value}):(this.consumeBadUrlRemnants(),Xr)}for(;;){var J=this.consumeCodePoint();if(J===Ps||J===ms)return{type:22,value:y.apply(void 0,C)};if(rs(J))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ps||this.peekCodePoint(0)===ms?(this.consumeCodePoint(),{type:22,value:y.apply(void 0,C)}):(this.consumeBadUrlRemnants(),Xr);if(J===qs||J===wr||J===at||Zs(J))return this.consumeBadUrlRemnants(),Xr;if(J===jr)if(Rn(J,this.peekCodePoint(0)))C.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Xr;else C.push(J)}},T.prototype.consumeWhiteSpace=function(){for(;rs(this.peekCodePoint(0));)this.consumeCodePoint()},T.prototype.consumeBadUrlRemnants=function(){for(;;){var C=this.consumeCodePoint();if(C===ms||C===Ps)return;Rn(C,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},T.prototype.consumeStringSlice=function(C){for(var O=5e4,R="";C>0;){var J=Math.min(O,C);R+=y.apply(void 0,this._value.splice(0,J)),C-=J}return this._value.shift(),R},T.prototype.consumeStringToken=function(C){var O="",R=0;do{var J=this._value[R];if(J===Ps||J===void 0||J===C)return O+=this.consumeStringSlice(R),{type:0,value:O};if(J===Pn)return this._value.splice(0,R),mi;if(J===jr){var fe=this._value[R+1];fe!==Ps&&fe!==void 0&&(fe===Pn?(O+=this.consumeStringSlice(R),R=-1,this._value.shift()):Rn(J,fe)&&(O+=this.consumeStringSlice(R),O+=y(this.consumeEscapedCodePoint()),R=-1))}R++}while(!0)},T.prototype.consumeNumber=function(){var C=[],O=Bs,R=this.peekCodePoint(0);for((R===_e||R===Nn)&&C.push(this.consumeCodePoint());P(this.peekCodePoint(0));)C.push(this.consumeCodePoint());R=this.peekCodePoint(0);var J=this.peekCodePoint(1);if(R===Ye&&P(J))for(C.push(this.consumeCodePoint(),this.consumeCodePoint()),O=Js;P(this.peekCodePoint(0));)C.push(this.consumeCodePoint());R=this.peekCodePoint(0),J=this.peekCodePoint(1);var fe=this.peekCodePoint(2);if((R===I||R===qn)&&((J===_e||J===Nn)&&P(fe)||P(J)))for(C.push(this.consumeCodePoint(),this.consumeCodePoint()),O=Js;P(this.peekCodePoint(0));)C.push(this.consumeCodePoint());return[Ve(C),O]},T.prototype.consumeNumericToken=function(){var C=this.consumeNumber(),O=C[0],R=C[1],J=this.peekCodePoint(0),fe=this.peekCodePoint(1),Fe=this.peekCodePoint(2);if($(J,fe,Fe)){var qe=this.consumeName();return{type:15,number:O,flags:R,unit:qe}}return J===Hs?(this.consumeCodePoint(),{type:16,number:O,flags:R}):{type:17,number:O,flags:R}},T.prototype.consumeEscapedCodePoint=function(){var C=this.consumeCodePoint();if(ne(C)){for(var O=y(C);ne(this.peekCodePoint(0))&&O.length<6;)O+=y(this.consumeCodePoint());rs(this.peekCodePoint(0))&&this.consumeCodePoint();var R=parseInt(O,16);return R===0||z(R)||R>1114111?ti:R}return C===Ps?ti:C},T.prototype.consumeName=function(){for(var C="";;){var O=this.consumeCodePoint();if(Ns(O))C+=y(O);else if(Rn(O,this.peekCodePoint(0)))C+=y(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(O),C}},T})(),Zl=(function(){function T(C){this._tokens=C}return T.create=function(C){var O=new So;return O.write(C),new T(O.read())},T.parseValue=function(C){return T.create(C).parseComponentValue()},T.parseValues=function(C){return T.create(C).parseComponentValues()},T.prototype.parseComponentValue=function(){for(var C=this.consumeToken();C.type===31;)C=this.consumeToken();if(C.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(C);var O=this.consumeComponentValue();do C=this.consumeToken();while(C.type===31);if(C.type===32)return O;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},T.prototype.parseComponentValues=function(){for(var C=[];;){var O=this.consumeComponentValue();if(O.type===32)return C;C.push(O),C.push()}},T.prototype.consumeComponentValue=function(){var C=this.consumeToken();switch(C.type){case 11:case 28:case 2:return this.consumeSimpleBlock(C.type);case 19:return this.consumeFunction(C)}return C},T.prototype.consumeSimpleBlock=function(C){for(var O={type:C,values:[]},R=this.consumeToken();;){if(R.type===32||id(R,C))return O;this.reconsumeToken(R),O.values.push(this.consumeComponentValue()),R=this.consumeToken()}},T.prototype.consumeFunction=function(C){for(var O={name:C.value,values:[],type:18};;){var R=this.consumeToken();if(R.type===32||R.type===3)return O;this.reconsumeToken(R),O.values.push(this.consumeComponentValue())}},T.prototype.consumeToken=function(){var C=this._tokens.shift();return typeof C>"u"?wo:C},T.prototype.reconsumeToken=function(C){this._tokens.unshift(C)},T})(),Ao=function(T){return T.type===15},Ia=function(T){return T.type===17},yr=function(T){return T.type===20},ec=function(T){return T.type===0},tc=function(T,C){return yr(T)&&T.value===C},Xo=function(T){return T.type!==31},ni=function(T){return T.type!==31&&T.type!==4},bi=function(T){var C=[],O=[];return T.forEach(function(R){if(R.type===4){if(O.length===0)throw new Error("Error parsing function args, zero tokens for arg");C.push(O),O=[];return}R.type!==31&&O.push(R)}),O.length&&C.push(O),C},id=function(T,C){return C===11&&T.type===12||C===28&&T.type===29?!0:C===2&&T.type===3},No=function(T){return T.type===17||T.type===15},Lr=function(T){return T.type===16||No(T)},Bo=function(T){return T.length>1?[T[0],T[1]]:[T[0]]},ma={type:17,number:0,flags:Bs},Ec={type:16,number:50,flags:Bs},ji={type:16,number:100,flags:Bs},Co=function(T,C,O){var R=T[0],J=T[1];return[ir(R,C),ir(typeof J<"u"?J:R,O)]},ir=function(T,C){if(T.type===16)return T.number/100*C;if(Ao(T))switch(T.unit){case"rem":case"em":return 16*T.number;case"px":default:return T.number}return T.number},Mi="deg",Jo="grad",Zo="rad",ll="turn",Ul={name:"angle",parse:function(T,C){if(C.type===15)switch(C.unit){case Mi:return Math.PI*C.number/180;case Jo:return Math.PI/200*C.number;case Zo:return C.number;case ll:return Math.PI*2*C.number}throw new Error("Unsupported angle type")}},Tc=function(T){return T.type===15&&(T.unit===Mi||T.unit===Jo||T.unit===Zo||T.unit===ll)},Pa=function(T){var C=T.filter(yr).map(function(O){return O.value}).join(" ");switch(C){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ma,ma];case"to top":case"bottom":return Yi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ma,ji];case"to right":case"left":return Yi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ji,ji];case"to bottom":case"top":return Yi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ji,ma];case"to left":case"right":return Yi(270)}return 0},Yi=function(T){return Math.PI*T/180},Ei={name:"color",parse:function(T,C){if(C.type===18){var O=dl[C.name];if(typeof O>"u")throw new Error('Attempting to parse an unsupported color function "'+C.name+'"');return O(T,C.values)}if(C.type===5){if(C.value.length===3){var R=C.value.substring(0,1),J=C.value.substring(1,2),fe=C.value.substring(2,3);return Pi(parseInt(R+R,16),parseInt(J+J,16),parseInt(fe+fe,16),1)}if(C.value.length===4){var R=C.value.substring(0,1),J=C.value.substring(1,2),fe=C.value.substring(2,3),Fe=C.value.substring(3,4);return Pi(parseInt(R+R,16),parseInt(J+J,16),parseInt(fe+fe,16),parseInt(Fe+Fe,16)/255)}if(C.value.length===6){var R=C.value.substring(0,2),J=C.value.substring(2,4),fe=C.value.substring(4,6);return Pi(parseInt(R,16),parseInt(J,16),parseInt(fe,16),1)}if(C.value.length===8){var R=C.value.substring(0,2),J=C.value.substring(2,4),fe=C.value.substring(4,6),Fe=C.value.substring(6,8);return Pi(parseInt(R,16),parseInt(J,16),parseInt(fe,16),parseInt(Fe,16)/255)}}if(C.type===20){var qe=Ga[C.value.toUpperCase()];if(typeof qe<"u")return qe}return Ga.TRANSPARENT}},Ti=function(T){return(255&T)===0},Sr=function(T){var C=255&T,O=255&T>>8,R=255&T>>16,J=255&T>>24;return C<255?"rgba("+J+","+R+","+O+","+C/255+")":"rgb("+J+","+R+","+O+")"},Pi=function(T,C,O,R){return(T<<24|C<<16|O<<8|Math.round(R*255)<<0)>>>0},Fc=function(T,C){if(T.type===17)return T.number;if(T.type===16){var O=C===3?1:255;return C===3?T.number/100*O:Math.round(T.number/100*O)}return 0},Ic=function(T,C){var O=C.filter(ni);if(O.length===3){var R=O.map(Fc),J=R[0],fe=R[1],Fe=R[2];return Pi(J,fe,Fe,1)}if(O.length===4){var qe=O.map(Fc),J=qe[0],fe=qe[1],Fe=qe[2],Ge=qe[3];return Pi(J,fe,Fe,Ge)}return 0};function el(T,C,O){return O<0&&(O+=1),O>=1&&(O-=1),O<1/6?(C-T)*O*6+T:O<1/2?C:O<2/3?(C-T)*6*(2/3-O)+T:T}var cl=function(T,C){var O=C.filter(ni),R=O[0],J=O[1],fe=O[2],Fe=O[3],qe=(R.type===17?Yi(R.number):Ul.parse(T,R))/(Math.PI*2),Ge=Lr(J)?J.number/100:0,mt=Lr(fe)?fe.number/100:0,Et=typeof Fe<"u"&&Lr(Fe)?ir(Fe,1):1;if(Ge===0)return Pi(mt*255,mt*255,mt*255,1);var Ot=mt<=.5?mt*(Ge+1):mt+Ge-mt*Ge,ns=mt*2-Ot,Xs=el(ns,Ot,qe+1/3),Rs=el(ns,Ot,qe),ks=el(ns,Ot,qe-1/3);return Pi(Xs*255,Rs*255,ks*255,Et)},dl={hsl:cl,hsla:cl,rgb:Ic,rgba:Ic},tl=function(T,C){return Ei.parse(T,Zl.create(C).parseComponentValue())},Ga={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Ll={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(T,C){return C.map(function(O){if(yr(O))switch(O.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ki={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Xi=function(T,C){var O=Ei.parse(T,C[0]),R=C[1];return R&&Lr(R)?{color:O,stop:R}:{color:O,stop:null}},Dr=function(T,C){var O=T[0],R=T[T.length-1];O.stop===null&&(O.stop=ma),R.stop===null&&(R.stop=ji);for(var J=[],fe=0,Fe=0;Fe<T.length;Fe++){var qe=T[Fe].stop;if(qe!==null){var Ge=ir(qe,C);Ge>fe?J.push(Ge):J.push(fe),fe=Ge}else J.push(null)}for(var mt=null,Fe=0;Fe<J.length;Fe++){var Et=J[Fe];if(Et===null)mt===null&&(mt=Fe);else if(mt!==null){for(var Ot=Fe-mt,ns=J[mt-1],Xs=(Et-ns)/(Ot+1),Rs=1;Rs<=Ot;Rs++)J[mt+Rs-1]=Xs*Rs;mt=null}}return T.map(function(ks,jn){var an=ks.color;return{color:an,stop:Math.max(Math.min(1,J[jn]/C),0)}})},Ir=function(T,C,O){var R=C/2,J=O/2,fe=ir(T[0],C)-R,Fe=J-ir(T[1],O);return(Math.atan2(Fe,fe)+Math.PI*2)%(Math.PI*2)},fa=function(T,C,O){var R=typeof T=="number"?T:Ir(T,C,O),J=Math.abs(C*Math.sin(R))+Math.abs(O*Math.cos(R)),fe=C/2,Fe=O/2,qe=J/2,Ge=Math.sin(R-Math.PI/2)*qe,mt=Math.cos(R-Math.PI/2)*qe;return[J,fe-mt,fe+mt,Fe-Ge,Fe+Ge]},Hr=function(T,C){return Math.sqrt(T*T+C*C)},sl=function(T,C,O,R,J){var fe=[[0,0],[0,C],[T,0],[T,C]];return fe.reduce(function(Fe,qe){var Ge=qe[0],mt=qe[1],Et=Hr(O-Ge,R-mt);return(J?Et<Fe.optimumDistance:Et>Fe.optimumDistance)?{optimumCorner:qe,optimumDistance:Et}:Fe},{optimumDistance:J?1/0:-1/0,optimumCorner:null}).optimumCorner},nl=function(T,C,O,R,J){var fe=0,Fe=0;switch(T.size){case 0:T.shape===0?fe=Fe=Math.min(Math.abs(C),Math.abs(C-R),Math.abs(O),Math.abs(O-J)):T.shape===1&&(fe=Math.min(Math.abs(C),Math.abs(C-R)),Fe=Math.min(Math.abs(O),Math.abs(O-J)));break;case 2:if(T.shape===0)fe=Fe=Math.min(Hr(C,O),Hr(C,O-J),Hr(C-R,O),Hr(C-R,O-J));else if(T.shape===1){var qe=Math.min(Math.abs(O),Math.abs(O-J))/Math.min(Math.abs(C),Math.abs(C-R)),Ge=sl(R,J,C,O,!0),mt=Ge[0],Et=Ge[1];fe=Hr(mt-C,(Et-O)/qe),Fe=qe*fe}break;case 1:T.shape===0?fe=Fe=Math.max(Math.abs(C),Math.abs(C-R),Math.abs(O),Math.abs(O-J)):T.shape===1&&(fe=Math.max(Math.abs(C),Math.abs(C-R)),Fe=Math.max(Math.abs(O),Math.abs(O-J)));break;case 3:if(T.shape===0)fe=Fe=Math.max(Hr(C,O),Hr(C,O-J),Hr(C-R,O),Hr(C-R,O-J));else if(T.shape===1){var qe=Math.max(Math.abs(O),Math.abs(O-J))/Math.max(Math.abs(C),Math.abs(C-R)),Ot=sl(R,J,C,O,!1),mt=Ot[0],Et=Ot[1];fe=Hr(mt-C,(Et-O)/qe),Fe=qe*fe}break}return Array.isArray(T.size)&&(fe=ir(T.size[0],R),Fe=T.size.length===2?ir(T.size[1],J):fe),[fe,Fe]},Rc=function(T,C){var O=Yi(180),R=[];return bi(C).forEach(function(J,fe){if(fe===0){var Fe=J[0];if(Fe.type===20&&Fe.value==="to"){O=Pa(J);return}else if(Tc(Fe)){O=Ul.parse(T,Fe);return}}var qe=Xi(T,J);R.push(qe)}),{angle:O,stops:R,type:1}},sc=function(T,C){var O=Yi(180),R=[];return bi(C).forEach(function(J,fe){if(fe===0){var Fe=J[0];if(Fe.type===20&&["top","left","right","bottom"].indexOf(Fe.value)!==-1){O=Pa(J);return}else if(Tc(Fe)){O=(Ul.parse(T,Fe)+Yi(270))%Yi(360);return}}var qe=Xi(T,J);R.push(qe)}),{angle:O,stops:R,type:1}},Su=function(T,C){var O=Yi(180),R=[],J=1,fe=0,Fe=3,qe=[];return bi(C).forEach(function(Ge,mt){var Et=Ge[0];if(mt===0){if(yr(Et)&&Et.value==="linear"){J=1;return}else if(yr(Et)&&Et.value==="radial"){J=2;return}}if(Et.type===18){if(Et.name==="from"){var Ot=Ei.parse(T,Et.values[0]);R.push({stop:ma,color:Ot})}else if(Et.name==="to"){var Ot=Ei.parse(T,Et.values[0]);R.push({stop:ji,color:Ot})}else if(Et.name==="color-stop"){var ns=Et.values.filter(ni);if(ns.length===2){var Ot=Ei.parse(T,ns[1]),Xs=ns[0];Ia(Xs)&&R.push({stop:{type:16,number:Xs.number*100,flags:Xs.flags},color:Ot})}}}}),J===1?{angle:(O+Yi(180))%Yi(360),stops:R,type:J}:{size:Fe,shape:fe,stops:R,position:qe,type:J}},Nu="closest-side",Bu="farthest-side",Cu="closest-corner",bA="farthest-corner",jA="circle",nc="ellipse",uo="cover",od="contain",ho=function(T,C){var O=0,R=3,J=[],fe=[];return bi(C).forEach(function(Fe,qe){var Ge=!0;if(qe===0){var mt=!1;Ge=Fe.reduce(function(Ot,ns){if(mt)if(yr(ns))switch(ns.value){case"center":return fe.push(Ec),Ot;case"top":case"left":return fe.push(ma),Ot;case"right":case"bottom":return fe.push(ji),Ot}else(Lr(ns)||No(ns))&&fe.push(ns);else if(yr(ns))switch(ns.value){case jA:return O=0,!1;case nc:return O=1,!1;case"at":return mt=!0,!1;case Nu:return R=0,!1;case uo:case Bu:return R=1,!1;case od:case Cu:return R=2,!1;case bA:return R=3,!1}else if(No(ns)||Lr(ns))return Array.isArray(R)||(R=[]),R.push(ns),!1;return Ot},Ge)}if(Ge){var Et=Xi(T,Fe);J.push(Et)}}),{size:R,shape:O,stops:J,position:fe,type:2}},Al=function(T,C){var O=0,R=3,J=[],fe=[];return bi(C).forEach(function(Fe,qe){var Ge=!0;if(qe===0?Ge=Fe.reduce(function(Et,Ot){if(yr(Ot))switch(Ot.value){case"center":return fe.push(Ec),!1;case"top":case"left":return fe.push(ma),!1;case"right":case"bottom":return fe.push(ji),!1}else if(Lr(Ot)||No(Ot))return fe.push(Ot),!1;return Et},Ge):qe===1&&(Ge=Fe.reduce(function(Et,Ot){if(yr(Ot))switch(Ot.value){case jA:return O=0,!1;case nc:return O=1,!1;case od:case Nu:return R=0,!1;case Bu:return R=1,!1;case Cu:return R=2,!1;case uo:case bA:return R=3,!1}else if(No(Ot)||Lr(Ot))return Array.isArray(R)||(R=[]),R.push(Ot),!1;return Et},Ge)),Ge){var mt=Xi(T,Fe);J.push(mt)}}),{size:R,shape:O,stops:J,position:fe,type:2}},wA=function(T){return T.type===1},zd=function(T){return T.type===2},Oc={name:"image",parse:function(T,C){if(C.type===22){var O={url:C.value,type:0};return T.cache.addImage(C.value),O}if(C.type===18){var R=ul[C.name];if(typeof R>"u")throw new Error('Attempting to parse an unsupported image function "'+C.name+'"');return R(T,C.values)}throw new Error("Unsupported image type "+C.type)}};function SA(T){return!(T.type===20&&T.value==="none")&&(T.type!==18||!!ul[T.name])}var ul={"linear-gradient":Rc,"-moz-linear-gradient":sc,"-ms-linear-gradient":sc,"-o-linear-gradient":sc,"-webkit-linear-gradient":sc,"radial-gradient":ho,"-moz-radial-gradient":Al,"-ms-radial-gradient":Al,"-o-radial-gradient":Al,"-webkit-radial-gradient":Al,"-webkit-gradient":Su},Kd={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(T,C){if(C.length===0)return[];var O=C[0];return O.type===20&&O.value==="none"?[]:C.filter(function(R){return ni(R)&&SA(R)}).map(function(R){return Oc.parse(T,R)})}},Hi={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(T,C){return C.map(function(O){if(yr(O))switch(O.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Fi={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(T,C){return bi(C).map(function(O){return O.filter(Lr)}).map(Bo)}},NA={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(T,C){return bi(C).map(function(O){return O.filter(yr).map(function(R){return R.value}).join(" ")}).map(zi)}},zi=function(T){switch(T){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Dl;(function(T){T.AUTO="auto",T.CONTAIN="contain",T.COVER="cover"})(Dl||(Dl={}));var Eo={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(T,C){return bi(C).map(function(O){return O.filter($d)})}},$d=function(T){return yr(T)||Lr(T)},Ql=function(T){return{name:"border-"+T+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},rc=Ql("top"),Vd=Ql("right"),BA=Ql("bottom"),ld=Ql("left"),Uc=function(T){return{name:"border-radius-"+T,initialValue:"0 0",prefix:!1,type:1,parse:function(C,O){return Bo(O.filter(Lr))}}},To=Uc("top-left"),cd=Uc("top-right"),Lc=Uc("bottom-right"),CA=Uc("bottom-left"),ac=function(T){return{name:"border-"+T+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(C,O){switch(O){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Fo=ac("top"),Io=ac("right"),ic=ac("bottom"),Ro=ac("left"),Ji=function(T){return{name:"border-"+T+"-width",initialValue:"0",type:0,prefix:!1,parse:function(C,O){return Ao(O)?O.number:0}}},fo=Ji("top"),Ih=Ji("right"),Eu=Ji("bottom"),EA=Ji("left"),Rh={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ii={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(T,C){switch(C){case"rtl":return 1;case"ltr":default:return 0}}},ga={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(T,C){return C.filter(yr).reduce(function(O,R){return O|xr(R.value)},0)}},xr=function(T){switch(T){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Zi={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(T,C){switch(C){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},ka={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(T,C){return C.type===20&&C.value==="normal"?0:C.type===17||C.type===15?C.number:0}},ao;(function(T){T.NORMAL="normal",T.STRICT="strict"})(ao||(ao={}));var oc={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(T,C){switch(C){case"strict":return ao.STRICT;case"normal":default:return ao.NORMAL}}},Tu={name:"line-height",initialValue:"normal",prefix:!1,type:4},hl=function(T,C){return yr(T)&&T.value==="normal"?1.2*C:T.type===17?C*T.number:Lr(T)?ir(T,C):C},Ri={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(T,C){return C.type===20&&C.value==="none"?null:Oc.parse(T,C)}},Dc={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(T,C){switch(C){case"inside":return 0;case"outside":default:return 1}}},qd={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(T,C){switch(C){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},_l=function(T){return{name:"margin-"+T,initialValue:"0",prefix:!1,type:4}},TA=_l("top"),lc=_l("right"),fl=_l("bottom"),cc=_l("left"),Oo={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(T,C){return C.filter(yr).map(function(O){switch(O.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},dd={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(T,C){switch(C){case"break-word":return"break-word";case"normal":default:return"normal"}}},pl=function(T){return{name:"padding-"+T,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},dc=pl("top"),FA=pl("right"),Ac=pl("bottom"),Oi=pl("left"),IA={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(T,C){switch(C){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Oh={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(T,C){switch(C){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Vf={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(T,C){return C.length===1&&tc(C[0],"none")?[]:bi(C).map(function(O){for(var R={color:Ga.TRANSPARENT,offsetX:ma,offsetY:ma,blur:ma},J=0,fe=0;fe<O.length;fe++){var Fe=O[fe];No(Fe)?(J===0?R.offsetX=Fe:J===1?R.offsetY=Fe:R.blur=Fe,J++):R.color=Ei.parse(T,Fe)}return R})}},qf={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(T,C){switch(C){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Gf={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(T,C){if(C.type===20&&C.value==="none")return null;if(C.type===18){var O=Gd[C.name];if(typeof O>"u")throw new Error('Attempting to parse an unsupported transform function "'+C.name+'"');return O(C.values)}return null}},Wa=function(T){var C=T.filter(function(O){return O.type===17}).map(function(O){return O.number});return C.length===6?C:null},Ad=function(T){var C=T.filter(function(Ge){return Ge.type===17}).map(function(Ge){return Ge.number}),O=C[0],R=C[1];C[2],C[3];var J=C[4],fe=C[5];C[6],C[7],C[8],C[9],C[10],C[11];var Fe=C[12],qe=C[13];return C[14],C[15],C.length===16?[O,R,J,fe,Fe,qe]:null},Gd={matrix:Wa,matrix3d:Ad},ud={type:16,number:50,flags:Bs},RA=[ud,ud],E={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(T,C){var O=C.filter(Lr);return O.length!==2?RA:[O[0],O[1]]}},M={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(T,C){switch(C){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},X;(function(T){T.NORMAL="normal",T.BREAK_ALL="break-all",T.KEEP_ALL="keep-all"})(X||(X={}));for(var oe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(T,C){switch(C){case"break-all":return X.BREAK_ALL;case"keep-all":return X.KEEP_ALL;case"normal":default:return X.NORMAL}}},Ee={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(T,C){if(C.type===20)return{auto:!0,order:0};if(Ia(C))return{auto:!1,order:C.number};throw new Error("Invalid z-index number parsed")}},Re={name:"time",parse:function(T,C){if(C.type===15)switch(C.unit.toLowerCase()){case"s":return 1e3*C.number;case"ms":return C.number}throw new Error("Unsupported time type")}},Ue={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(T,C){return Ia(C)?C.number:1}},Me={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ke={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(T,C){return C.filter(yr).map(function(O){switch(O.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(O){return O!==0})}},et={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(T,C){var O=[],R=[];return C.forEach(function(J){switch(J.type){case 20:case 0:O.push(J.value);break;case 17:O.push(J.number.toString());break;case 4:R.push(O.join(" ")),O.length=0;break}}),O.length&&R.push(O.join(" ")),R.map(function(J){return J.indexOf(" ")===-1?J:"'"+J+"'"})}},xt={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},_t={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(T,C){if(Ia(C))return C.number;if(yr(C))switch(C.value){case"bold":return 700;case"normal":default:return 400}return 400}},Ze={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(T,C){return C.filter(yr).map(function(O){return O.value})}},Nt={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(T,C){switch(C){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ct=function(T,C){return(T&C)!==0},ss={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(T,C){if(C.length===0)return[];var O=C[0];return O.type===20&&O.value==="none"?[]:C}},Ut={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(T,C){if(C.length===0)return null;var O=C[0];if(O.type===20&&O.value==="none")return null;for(var R=[],J=C.filter(Xo),fe=0;fe<J.length;fe++){var Fe=J[fe],qe=J[fe+1];if(Fe.type===20){var Ge=qe&&Ia(qe)?qe.number:1;R.push({counter:Fe.value,increment:Ge})}}return R}},ts={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(T,C){if(C.length===0)return[];for(var O=[],R=C.filter(Xo),J=0;J<R.length;J++){var fe=R[J],Fe=R[J+1];if(yr(fe)&&fe.value!=="none"){var qe=Fe&&Ia(Fe)?Fe.number:0;O.push({counter:fe.value,reset:qe})}}return O}},ls={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(T,C){return C.filter(Ao).map(function(O){return Re.parse(T,O)})}},Cs={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(T,C){if(C.length===0)return null;var O=C[0];if(O.type===20&&O.value==="none")return null;var R=[],J=C.filter(ec);if(J.length%2!==0)return null;for(var fe=0;fe<J.length;fe+=2){var Fe=J[fe].value,qe=J[fe+1].value;R.push({open:Fe,close:qe})}return R}},fs=function(T,C,O){if(!T)return"";var R=T[Math.min(C,T.length-1)];return R?O?R.open:R.close:""},An={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(T,C){return C.length===1&&tc(C[0],"none")?[]:bi(C).map(function(O){for(var R={color:255,offsetX:ma,offsetY:ma,blur:ma,spread:ma,inset:!1},J=0,fe=0;fe<O.length;fe++){var Fe=O[fe];tc(Fe,"inset")?R.inset=!0:No(Fe)?(J===0?R.offsetX=Fe:J===1?R.offsetY=Fe:J===2?R.blur=Fe:R.spread=Fe,J++):R.color=Ei.parse(T,Fe)}return R})}},sn={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(T,C){var O=[0,1,2],R=[];return C.filter(yr).forEach(function(J){switch(J.value){case"stroke":R.push(1);break;case"fill":R.push(0);break;case"markers":R.push(2);break}}),O.forEach(function(J){R.indexOf(J)===-1&&R.push(J)}),R}},zn={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},on={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(T,C){return Ao(C)?C.number:0}},fr=(function(){function T(C,O){var R,J;this.animationDuration=Yt(C,ls,O.animationDuration),this.backgroundClip=Yt(C,Ll,O.backgroundClip),this.backgroundColor=Yt(C,ki,O.backgroundColor),this.backgroundImage=Yt(C,Kd,O.backgroundImage),this.backgroundOrigin=Yt(C,Hi,O.backgroundOrigin),this.backgroundPosition=Yt(C,Fi,O.backgroundPosition),this.backgroundRepeat=Yt(C,NA,O.backgroundRepeat),this.backgroundSize=Yt(C,Eo,O.backgroundSize),this.borderTopColor=Yt(C,rc,O.borderTopColor),this.borderRightColor=Yt(C,Vd,O.borderRightColor),this.borderBottomColor=Yt(C,BA,O.borderBottomColor),this.borderLeftColor=Yt(C,ld,O.borderLeftColor),this.borderTopLeftRadius=Yt(C,To,O.borderTopLeftRadius),this.borderTopRightRadius=Yt(C,cd,O.borderTopRightRadius),this.borderBottomRightRadius=Yt(C,Lc,O.borderBottomRightRadius),this.borderBottomLeftRadius=Yt(C,CA,O.borderBottomLeftRadius),this.borderTopStyle=Yt(C,Fo,O.borderTopStyle),this.borderRightStyle=Yt(C,Io,O.borderRightStyle),this.borderBottomStyle=Yt(C,ic,O.borderBottomStyle),this.borderLeftStyle=Yt(C,Ro,O.borderLeftStyle),this.borderTopWidth=Yt(C,fo,O.borderTopWidth),this.borderRightWidth=Yt(C,Ih,O.borderRightWidth),this.borderBottomWidth=Yt(C,Eu,O.borderBottomWidth),this.borderLeftWidth=Yt(C,EA,O.borderLeftWidth),this.boxShadow=Yt(C,An,O.boxShadow),this.color=Yt(C,Rh,O.color),this.direction=Yt(C,Ii,O.direction),this.display=Yt(C,ga,O.display),this.float=Yt(C,Zi,O.cssFloat),this.fontFamily=Yt(C,et,O.fontFamily),this.fontSize=Yt(C,xt,O.fontSize),this.fontStyle=Yt(C,Nt,O.fontStyle),this.fontVariant=Yt(C,Ze,O.fontVariant),this.fontWeight=Yt(C,_t,O.fontWeight),this.letterSpacing=Yt(C,ka,O.letterSpacing),this.lineBreak=Yt(C,oc,O.lineBreak),this.lineHeight=Yt(C,Tu,O.lineHeight),this.listStyleImage=Yt(C,Ri,O.listStyleImage),this.listStylePosition=Yt(C,Dc,O.listStylePosition),this.listStyleType=Yt(C,qd,O.listStyleType),this.marginTop=Yt(C,TA,O.marginTop),this.marginRight=Yt(C,lc,O.marginRight),this.marginBottom=Yt(C,fl,O.marginBottom),this.marginLeft=Yt(C,cc,O.marginLeft),this.opacity=Yt(C,Ue,O.opacity);var fe=Yt(C,Oo,O.overflow);this.overflowX=fe[0],this.overflowY=fe[fe.length>1?1:0],this.overflowWrap=Yt(C,dd,O.overflowWrap),this.paddingTop=Yt(C,dc,O.paddingTop),this.paddingRight=Yt(C,FA,O.paddingRight),this.paddingBottom=Yt(C,Ac,O.paddingBottom),this.paddingLeft=Yt(C,Oi,O.paddingLeft),this.paintOrder=Yt(C,sn,O.paintOrder),this.position=Yt(C,Oh,O.position),this.textAlign=Yt(C,IA,O.textAlign),this.textDecorationColor=Yt(C,Me,(R=O.textDecorationColor)!==null&&R!==void 0?R:O.color),this.textDecorationLine=Yt(C,Ke,(J=O.textDecorationLine)!==null&&J!==void 0?J:O.textDecoration),this.textShadow=Yt(C,Vf,O.textShadow),this.textTransform=Yt(C,qf,O.textTransform),this.transform=Yt(C,Gf,O.transform),this.transformOrigin=Yt(C,E,O.transformOrigin),this.visibility=Yt(C,M,O.visibility),this.webkitTextStrokeColor=Yt(C,zn,O.webkitTextStrokeColor),this.webkitTextStrokeWidth=Yt(C,on,O.webkitTextStrokeWidth),this.wordBreak=Yt(C,oe,O.wordBreak),this.zIndex=Yt(C,Ee,O.zIndex)}return T.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},T.prototype.isTransparent=function(){return Ti(this.backgroundColor)},T.prototype.isTransformed=function(){return this.transform!==null},T.prototype.isPositioned=function(){return this.position!==0},T.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},T.prototype.isFloating=function(){return this.float!==0},T.prototype.isInlineLevel=function(){return Ct(this.display,4)||Ct(this.display,33554432)||Ct(this.display,268435456)||Ct(this.display,536870912)||Ct(this.display,67108864)||Ct(this.display,134217728)},T})(),ya=(function(){function T(C,O){this.content=Yt(C,ss,O.content),this.quotes=Yt(C,Cs,O.quotes)}return T})(),Gn=(function(){function T(C,O){this.counterIncrement=Yt(C,Ut,O.counterIncrement),this.counterReset=Yt(C,ts,O.counterReset)}return T})(),Yt=function(T,C,O){var R=new So,J=O!==null&&typeof O<"u"?O.toString():C.initialValue;R.write(J);var fe=new Zl(R.read());switch(C.type){case 2:var Fe=fe.parseComponentValue();return C.parse(T,yr(Fe)?Fe.value:C.initialValue);case 0:return C.parse(T,fe.parseComponentValue());case 1:return C.parse(T,fe.parseComponentValues());case 4:return fe.parseComponentValue();case 3:switch(C.format){case"angle":return Ul.parse(T,fe.parseComponentValue());case"color":return Ei.parse(T,fe.parseComponentValue());case"image":return Oc.parse(T,fe.parseComponentValue());case"length":var qe=fe.parseComponentValue();return No(qe)?qe:ma;case"length-percentage":var Ge=fe.parseComponentValue();return Lr(Ge)?Ge:ma;case"time":return Re.parse(T,fe.parseComponentValue())}break}},_s="data-html2canvas-debug",Ra=function(T){var C=T.getAttribute(_s);switch(C){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},In=function(T,C){var O=Ra(T);return O===1||C===O},Un=(function(){function T(C,O){if(this.context=C,this.textNodes=[],this.elements=[],this.flags=0,In(O,3))debugger;this.styles=new fr(C,window.getComputedStyle(O,null)),_u(O)&&(this.styles.animationDuration.some(function(R){return R>0})&&(O.style.animationDuration="0s"),this.styles.transform!==null&&(O.style.transform="none")),this.bounds=h(this.context,O),In(O,4)&&(this.flags|=16)}return T})(),Jr="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ya=typeof Uint8Array>"u"?[]:new Uint8Array(256),Zr=0;Zr<ri.length;Zr++)Ya[ri.charCodeAt(Zr)]=Zr;for(var ai=function(T){var C=T.length*.75,O=T.length,R,J=0,fe,Fe,qe,Ge;T[T.length-1]==="="&&(C--,T[T.length-2]==="="&&C--);var mt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(C):new Array(C),Et=Array.isArray(mt)?mt:new Uint8Array(mt);for(R=0;R<O;R+=4)fe=Ya[T.charCodeAt(R)],Fe=Ya[T.charCodeAt(R+1)],qe=Ya[T.charCodeAt(R+2)],Ge=Ya[T.charCodeAt(R+3)],Et[J++]=fe<<2|Fe>>4,Et[J++]=(Fe&15)<<4|qe>>2,Et[J++]=(qe&3)<<6|Ge&63;return mt},Ki=function(T){for(var C=T.length,O=[],R=0;R<C;R+=2)O.push(T[R+1]<<8|T[R]);return O},ii=function(T){for(var C=T.length,O=[],R=0;R<C;R+=4)O.push(T[R+3]<<24|T[R+2]<<16|T[R+1]<<8|T[R]);return O},Kn=5,Nr=11,xa=2,zr=Nr-Kn,oi=65536>>Kn,Oa=1<<Kn,Br=Oa-1,Xa=1024>>Kn,ea=oi+Xa,li=ea,ci=32,la=li+ci,Rr=65536>>Nr,$i=1<<zr,Ha=$i-1,En=function(T,C,O){return T.slice?T.slice(C,O):new Uint16Array(Array.prototype.slice.call(T,C,O))},Fn=function(T,C,O){return T.slice?T.slice(C,O):new Uint32Array(Array.prototype.slice.call(T,C,O))},Qr=function(T,C){var O=ai(T),R=Array.isArray(O)?ii(O):new Uint32Array(O),J=Array.isArray(O)?Ki(O):new Uint16Array(O),fe=24,Fe=En(J,fe/2,R[4]/2),qe=R[5]===2?En(J,(fe+R[4])/2):Fn(R,Math.ceil((fe+R[4])/4));return new io(R[0],R[1],R[2],R[3],Fe,qe)},io=(function(){function T(C,O,R,J,fe,Fe){this.initialValue=C,this.errorValue=O,this.highStart=R,this.highValueIndex=J,this.index=fe,this.data=Fe}return T.prototype.get=function(C){var O;if(C>=0){if(C<55296||C>56319&&C<=65535)return O=this.index[C>>Kn],O=(O<<xa)+(C&Br),this.data[O];if(C<=65535)return O=this.index[oi+(C-55296>>Kn)],O=(O<<xa)+(C&Br),this.data[O];if(C<this.highStart)return O=la-Rr+(C>>Nr),O=this.index[O],O+=C>>Kn&Ha,O=this.index[O],O=(O<<xa)+(C&Br),this.data[O];if(C<=1114111)return this.data[this.highValueIndex]}return this.errorValue},T})(),po="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eo=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ua=0;Ua<po.length;Ua++)eo[po.charCodeAt(Ua)]=Ua;var uc=1,ml=2,hd=3,ca=4,OA=5,Fu=7,Wd=8,rl=9,Iu=10,UA=11,LA=12,Yd=13,gi=14,Ba=15,Xd=function(T){for(var C=[],O=0,R=T.length;O<R;){var J=T.charCodeAt(O++);if(J>=55296&&J<=56319&&O<R){var fe=T.charCodeAt(O++);(fe&64512)===56320?C.push(((J&1023)<<10)+(fe&1023)+65536):(C.push(J),O--)}else C.push(J)}return C},hc=function(){for(var T=[],C=0;C<arguments.length;C++)T[C]=arguments[C];if(String.fromCodePoint)return String.fromCodePoint.apply(String,T);var O=T.length;if(!O)return"";for(var R=[],J=-1,fe="";++J<O;){var Fe=T[J];Fe<=65535?R.push(Fe):(Fe-=65536,R.push((Fe>>10)+55296,Fe%1024+56320)),(J+1===O||R.length>16384)&&(fe+=String.fromCharCode.apply(String,R),R.length=0)}return fe},fd=Qr(Jr),wi="",Uo="",DA=function(T){return fd.get(T)},pd=function(T,C,O){var R=O-2,J=C[R],fe=C[O-1],Fe=C[O];if(fe===ml&&Fe===hd)return wi;if(fe===ml||fe===hd||fe===ca||Fe===ml||Fe===hd||Fe===ca)return Uo;if(fe===Wd&&[Wd,rl,UA,LA].indexOf(Fe)!==-1||(fe===UA||fe===rl)&&(Fe===rl||Fe===Iu)||(fe===LA||fe===Iu)&&Fe===Iu||Fe===Yd||Fe===OA||Fe===Fu||fe===uc)return wi;if(fe===Yd&&Fe===gi){for(;J===OA;)J=C[--R];if(J===gi)return wi}if(fe===Ba&&Fe===Ba){for(var qe=0;J===Ba;)qe++,J=C[--R];if(qe%2===0)return wi}return Uo},QA=function(T){var C=Xd(T),O=C.length,R=0,J=0,fe=C.map(DA);return{next:function(){if(R>=O)return{done:!0,value:null};for(var Fe=wi;R<O&&(Fe=pd(C,fe,++R))===wi;);if(Fe!==wi||R===O){var qe=hc.apply(null,C.slice(J,R));return J=R,{value:qe,done:!1}}return{done:!0,value:null}}}},_A=function(T){for(var C=QA(T),O=[],R;!(R=C.next()).done;)R.value&&O.push(R.value.slice());return O},Ml=function(T){var C=123;if(T.createRange){var O=T.createRange();if(O.getBoundingClientRect){var R=T.createElement("boundtest");R.style.height=C+"px",R.style.display="block",T.body.appendChild(R),O.selectNode(R);var J=O.getBoundingClientRect(),fe=Math.round(J.height);if(T.body.removeChild(R),fe===C)return!0}}return!1},Ru=function(T){var C=T.createElement("boundtest");C.style.width="50px",C.style.display="block",C.style.fontSize="12px",C.style.letterSpacing="0px",C.style.wordSpacing="0px",T.body.appendChild(C);var O=T.createRange();C.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var R=C.firstChild,J=m(R.data).map(function(Ge){return y(Ge)}),fe=0,Fe={},qe=J.every(function(Ge,mt){O.setStart(R,fe),O.setEnd(R,fe+Ge.length);var Et=O.getBoundingClientRect();fe+=Ge.length;var Ot=Et.x>Fe.x||Et.y>Fe.y;return Fe=Et,mt===0?!0:Ot});return T.body.removeChild(C),qe},Ou=function(){return typeof new Image().crossOrigin<"u"},Uh=function(){return typeof new XMLHttpRequest().responseType=="string"},Uu=function(T){var C=new Image,O=T.createElement("canvas"),R=O.getContext("2d");if(!R)return!1;C.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{R.drawImage(C,0,0),O.toDataURL()}catch{return!1}return!0},Pl=function(T){return T[0]===0&&T[1]===255&&T[2]===0&&T[3]===255},Lh=function(T){var C=T.createElement("canvas"),O=100;C.width=O,C.height=O;var R=C.getContext("2d");if(!R)return Promise.reject(!1);R.fillStyle="rgb(0, 255, 0)",R.fillRect(0,0,O,O);var J=new Image,fe=C.toDataURL();J.src=fe;var Fe=MA(O,O,0,0,J);return R.fillStyle="red",R.fillRect(0,0,O,O),Lu(Fe).then(function(qe){R.drawImage(qe,0,0);var Ge=R.getImageData(0,0,O,O).data;R.fillStyle="red",R.fillRect(0,0,O,O);var mt=T.createElement("div");return mt.style.backgroundImage="url("+fe+")",mt.style.height=O+"px",Pl(Ge)?Lu(MA(O,O,0,0,mt)):Promise.reject(!1)}).then(function(qe){return R.drawImage(qe,0,0),Pl(R.getImageData(0,0,O,O).data)}).catch(function(){return!1})},MA=function(T,C,O,R,J){var fe="http://www.w3.org/2000/svg",Fe=document.createElementNS(fe,"svg"),qe=document.createElementNS(fe,"foreignObject");return Fe.setAttributeNS(null,"width",T.toString()),Fe.setAttributeNS(null,"height",C.toString()),qe.setAttributeNS(null,"width","100%"),qe.setAttributeNS(null,"height","100%"),qe.setAttributeNS(null,"x",O.toString()),qe.setAttributeNS(null,"y",R.toString()),qe.setAttributeNS(null,"externalResourcesRequired","true"),Fe.appendChild(qe),qe.appendChild(J),Fe},Lu=function(T){return new Promise(function(C,O){var R=new Image;R.onload=function(){return C(R)},R.onerror=O,R.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(T))})},yi={get SUPPORT_RANGE_BOUNDS(){var T=Ml(document);return Object.defineProperty(yi,"SUPPORT_RANGE_BOUNDS",{value:T}),T},get SUPPORT_WORD_BREAKING(){var T=yi.SUPPORT_RANGE_BOUNDS&&Ru(document);return Object.defineProperty(yi,"SUPPORT_WORD_BREAKING",{value:T}),T},get SUPPORT_SVG_DRAWING(){var T=Uu(document);return Object.defineProperty(yi,"SUPPORT_SVG_DRAWING",{value:T}),T},get SUPPORT_FOREIGNOBJECT_DRAWING(){var T=typeof Array.from=="function"&&typeof window.fetch=="function"?Lh(document):Promise.resolve(!1);return Object.defineProperty(yi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:T}),T},get SUPPORT_CORS_IMAGES(){var T=Ou();return Object.defineProperty(yi,"SUPPORT_CORS_IMAGES",{value:T}),T},get SUPPORT_RESPONSE_TYPE(){var T=Uh();return Object.defineProperty(yi,"SUPPORT_RESPONSE_TYPE",{value:T}),T},get SUPPORT_CORS_XHR(){var T="withCredentials"in new XMLHttpRequest;return Object.defineProperty(yi,"SUPPORT_CORS_XHR",{value:T}),T},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var T=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(yi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:T}),T}},md=(function(){function T(C,O){this.text=C,this.bounds=O}return T})(),Qc=function(T,C,O,R){var J=Hl(C,O),fe=[],Fe=0;return J.forEach(function(qe){if(O.textDecorationLine.length||qe.trim().length>0)if(yi.SUPPORT_RANGE_BOUNDS){var Ge=gd(R,Fe,qe.length).getClientRects();if(Ge.length>1){var mt=Lo(qe),Et=0;mt.forEach(function(ns){fe.push(new md(ns,d.fromDOMRectList(T,gd(R,Et+Fe,ns.length).getClientRects()))),Et+=ns.length})}else fe.push(new md(qe,d.fromDOMRectList(T,Ge)))}else{var Ot=R.splitText(qe.length);fe.push(new md(qe,PA(T,R))),R=Ot}else yi.SUPPORT_RANGE_BOUNDS||(R=R.splitText(qe.length));Fe+=qe.length}),fe},PA=function(T,C){var O=C.ownerDocument;if(O){var R=O.createElement("html2canvaswrapper");R.appendChild(C.cloneNode(!0));var J=C.parentNode;if(J){J.replaceChild(R,C);var fe=h(T,R);return R.firstChild&&J.replaceChild(R.firstChild,R),fe}}return d.EMPTY},gd=function(T,C,O){var R=T.ownerDocument;if(!R)throw new Error("Node has no owner document");var J=R.createRange();return J.setStart(T,C),J.setEnd(T,C+O),J},Lo=function(T){if(yi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var C=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(C.segment(T)).map(function(O){return O.segment})}return _A(T)},kl=function(T,C){if(yi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var O=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(O.segment(T)).map(function(R){return R.segment})}return HA(T,C)},Hl=function(T,C){return C.letterSpacing!==0?Lo(T):kl(T,C)},kA=[32,160,4961,65792,65793,4153,4241],HA=function(T,C){for(var O=bn(T,{lineBreak:C.lineBreak,wordBreak:C.overflowWrap==="break-word"?"break-word":C.wordBreak}),R=[],J,fe=function(){if(J.value){var Fe=J.value.slice(),qe=m(Fe),Ge="";qe.forEach(function(mt){kA.indexOf(mt)===-1?Ge+=y(mt):(Ge.length&&R.push(Ge),R.push(y(mt)),Ge="")}),Ge.length&&R.push(Ge)}};!(J=O.next()).done;)fe();return R},_c=(function(){function T(C,O,R){this.text=Dh(O.data,R.textTransform),this.textBounds=Qc(C,this.text,R,O)}return T})(),Dh=function(T,C){switch(C){case 1:return T.toLowerCase();case 3:return T.replace(yd,xd);case 2:return T.toUpperCase();default:return T}},yd=/(^|\s|:|-|\(|\))([a-z])/g,xd=function(T,C,O){return T.length>0?C+O.toUpperCase():T},Wf=(function(T){r(C,T);function C(O,R){var J=T.call(this,O,R)||this;return J.src=R.currentSrc||R.src,J.intrinsicWidth=R.naturalWidth,J.intrinsicHeight=R.naturalHeight,J.context.cache.addImage(J.src),J}return C})(Un),Qh=(function(T){r(C,T);function C(O,R){var J=T.call(this,O,R)||this;return J.canvas=R,J.intrinsicWidth=R.width,J.intrinsicHeight=R.height,J}return C})(Un),_m=(function(T){r(C,T);function C(O,R){var J=T.call(this,O,R)||this,fe=new XMLSerializer,Fe=h(O,R);return R.setAttribute("width",Fe.width+"px"),R.setAttribute("height",Fe.height+"px"),J.svg="data:image/svg+xml,"+encodeURIComponent(fe.serializeToString(R)),J.intrinsicWidth=R.width.baseVal.value,J.intrinsicHeight=R.height.baseVal.value,J.context.cache.addImage(J.svg),J}return C})(Un),Yf=(function(T){r(C,T);function C(O,R){var J=T.call(this,O,R)||this;return J.value=R.value,J}return C})(Un),_h=(function(T){r(C,T);function C(O,R){var J=T.call(this,O,R)||this;return J.start=R.start,J.reversed=typeof R.reversed=="boolean"&&R.reversed===!0,J}return C})(Un),Mm=[{type:15,flags:0,unit:"px",number:3}],Pm=[{type:16,flags:0,number:50}],km=function(T){return T.width>T.height?new d(T.left+(T.width-T.height)/2,T.top,T.height,T.height):T.width<T.height?new d(T.left,T.top+(T.height-T.width)/2,T.width,T.width):T},Xf=function(T){var C=T.type===Jf?new Array(T.value.length+1).join(""):T.value;return C.length===0?T.placeholder||"":C},Du="checkbox",Qu="radio",Jf="password",Zf=707406591,Mh=(function(T){r(C,T);function C(O,R){var J=T.call(this,O,R)||this;switch(J.type=R.type.toLowerCase(),J.checked=R.checked,J.value=Xf(R),(J.type===Du||J.type===Qu)&&(J.styles.backgroundColor=3739148031,J.styles.borderTopColor=J.styles.borderRightColor=J.styles.borderBottomColor=J.styles.borderLeftColor=2779096575,J.styles.borderTopWidth=J.styles.borderRightWidth=J.styles.borderBottomWidth=J.styles.borderLeftWidth=1,J.styles.borderTopStyle=J.styles.borderRightStyle=J.styles.borderBottomStyle=J.styles.borderLeftStyle=1,J.styles.backgroundClip=[0],J.styles.backgroundOrigin=[0],J.bounds=km(J.bounds)),J.type){case Du:J.styles.borderTopRightRadius=J.styles.borderTopLeftRadius=J.styles.borderBottomRightRadius=J.styles.borderBottomLeftRadius=Mm;break;case Qu:J.styles.borderTopRightRadius=J.styles.borderTopLeftRadius=J.styles.borderBottomRightRadius=J.styles.borderBottomLeftRadius=Pm;break}return J}return C})(Un),Hm=(function(T){r(C,T);function C(O,R){var J=T.call(this,O,R)||this,fe=R.options[R.selectedIndex||0];return J.value=fe&&fe.text||"",J}return C})(Un),Ph=(function(T){r(C,T);function C(O,R){var J=T.call(this,O,R)||this;return J.value=R.value,J}return C})(Un),ep=(function(T){r(C,T);function C(O,R){var J=T.call(this,O,R)||this;J.src=R.src,J.width=parseInt(R.width,10)||0,J.height=parseInt(R.height,10)||0,J.backgroundColor=J.styles.backgroundColor;try{if(R.contentWindow&&R.contentWindow.document&&R.contentWindow.document.documentElement){J.tree=sp(O,R.contentWindow.document.documentElement);var fe=R.contentWindow.document.documentElement?tl(O,getComputedStyle(R.contentWindow.document.documentElement).backgroundColor):Ga.TRANSPARENT,Fe=R.contentWindow.document.body?tl(O,getComputedStyle(R.contentWindow.document.body).backgroundColor):Ga.TRANSPARENT;J.backgroundColor=Ti(fe)?Ti(Fe)?J.styles.backgroundColor:Fe:fe}}catch{}return J}return C})(Un),zm=["OL","UL","MENU"],zA=function(T,C,O,R){for(var J=C.firstChild,fe=void 0;J;J=fe)if(fe=J.nextSibling,np(J)&&J.data.trim().length>0)O.textNodes.push(new _c(T,J,O.styles));else if(fc(J))if(Hu(J)&&J.assignedNodes)J.assignedNodes().forEach(function(qe){return zA(T,qe,O,R)});else{var Fe=tp(T,J);Fe.styles.isVisible()&&(Hx(J,Fe,R)?Fe.flags|=4:zx(Fe.styles)&&(Fe.flags|=2),zm.indexOf(J.tagName)!==-1&&(Fe.flags|=8),O.elements.push(Fe),J.slot,J.shadowRoot?zA(T,J.shadowRoot,Fe,R):!Pu(J)&&!kh(J)&&!ku(J)&&zA(T,J,Fe,R))}},tp=function(T,C){return $h(C)?new Wf(T,C):zh(C)?new Qh(T,C):kh(C)?new _m(T,C):Km(C)?new Yf(T,C):$m(C)?new _h(T,C):Mu(C)?new Mh(T,C):ku(C)?new Hm(T,C):Pu(C)?new Ph(T,C):rp(C)?new ep(T,C):new Un(T,C)},sp=function(T,C){var O=tp(T,C);return O.flags|=4,zA(T,C,O,O),O},Hx=function(T,C,O){return C.styles.isPositionedWithZIndex()||C.styles.opacity<1||C.styles.isTransformed()||Hh(T)&&O.styles.isTransparent()},zx=function(T){return T.isPositioned()||T.isFloating()},np=function(T){return T.nodeType===Node.TEXT_NODE},fc=function(T){return T.nodeType===Node.ELEMENT_NODE},_u=function(T){return fc(T)&&typeof T.style<"u"&&!Jd(T)},Jd=function(T){return typeof T.className=="object"},Km=function(T){return T.tagName==="LI"},$m=function(T){return T.tagName==="OL"},Mu=function(T){return T.tagName==="INPUT"},Vm=function(T){return T.tagName==="HTML"},kh=function(T){return T.tagName==="svg"},Hh=function(T){return T.tagName==="BODY"},zh=function(T){return T.tagName==="CANVAS"},Kh=function(T){return T.tagName==="VIDEO"},$h=function(T){return T.tagName==="IMG"},rp=function(T){return T.tagName==="IFRAME"},vd=function(T){return T.tagName==="STYLE"},qm=function(T){return T.tagName==="SCRIPT"},Pu=function(T){return T.tagName==="TEXTAREA"},ku=function(T){return T.tagName==="SELECT"},Hu=function(T){return T.tagName==="SLOT"},ap=function(T){return T.tagName.indexOf("-")>0},ip=(function(){function T(){this.counters={}}return T.prototype.getCounterValue=function(C){var O=this.counters[C];return O&&O.length?O[O.length-1]:1},T.prototype.getCounterValues=function(C){var O=this.counters[C];return O||[]},T.prototype.pop=function(C){var O=this;C.forEach(function(R){return O.counters[R].pop()})},T.prototype.parse=function(C){var O=this,R=C.counterIncrement,J=C.counterReset,fe=!0;R!==null&&R.forEach(function(qe){var Ge=O.counters[qe.counter];Ge&&qe.increment!==0&&(fe=!1,Ge.length||Ge.push(1),Ge[Math.max(0,Ge.length-1)]+=qe.increment)});var Fe=[];return fe&&J.forEach(function(qe){var Ge=O.counters[qe.counter];Fe.push(qe.counter),Ge||(Ge=O.counters[qe.counter]=[]),Ge.push(qe.reset)}),Fe},T})(),op={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},lp={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Kx={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},cp={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},La=function(T,C,O,R,J,fe){return T<C||T>O?$A(T,J,fe.length>0):R.integers.reduce(function(Fe,qe,Ge){for(;T>=qe;)T-=qe,Fe+=R.values[Ge];return Fe},"")+fe},Vi=function(T,C,O,R){var J="";do O||T--,J=R(T)+J,T/=C;while(T*C>=C);return J},di=function(T,C,O,R,J){var fe=O-C+1;return(T<0?"-":"")+(Vi(Math.abs(T),fe,R,function(Fe){return y(Math.floor(Fe%fe)+C)})+J)},bd=function(T,C,O){O===void 0&&(O=". ");var R=C.length;return Vi(Math.abs(T),R,!1,function(J){return C[Math.floor(J%R)]})+O},Zd=1,Mc=2,gl=4,KA=8,yl=function(T,C,O,R,J,fe){if(T<-9999||T>9999)return $A(T,4,J.length>0);var Fe=Math.abs(T),qe=J;if(Fe===0)return C[0]+qe;for(var Ge=0;Fe>0&&Ge<=4;Ge++){var mt=Fe%10;mt===0&&Ct(fe,Zd)&&qe!==""?qe=C[mt]+qe:mt>1||mt===1&&Ge===0||mt===1&&Ge===1&&Ct(fe,Mc)||mt===1&&Ge===1&&Ct(fe,gl)&&T>100||mt===1&&Ge>1&&Ct(fe,KA)?qe=C[mt]+(Ge>0?O[Ge-1]:"")+qe:mt===1&&Ge>0&&(qe=O[Ge-1]+qe),Fe=Math.floor(Fe/10)}return(T<0?R:"")+qe},dp="",Gm="",zu="",Ku="",$A=function(T,C,O){var R=O?". ":"",J=O?"":"",fe=O?", ":"",Fe=O?" ":"";switch(C){case 0:return""+Fe;case 1:return""+Fe;case 2:return""+Fe;case 5:var qe=di(T,48,57,!0,R);return qe.length<4?"0"+qe:qe;case 4:return bd(T,"",J);case 6:return La(T,1,3999,op,3,R).toLowerCase();case 7:return La(T,1,3999,op,3,R);case 8:return di(T,945,969,!1,R);case 9:return di(T,97,122,!1,R);case 10:return di(T,65,90,!1,R);case 11:return di(T,1632,1641,!0,R);case 12:case 49:return La(T,1,9999,lp,3,R);case 35:return La(T,1,9999,lp,3,R).toLowerCase();case 13:return di(T,2534,2543,!0,R);case 14:case 30:return di(T,6112,6121,!0,R);case 15:return bd(T,"",J);case 16:return bd(T,"",J);case 17:case 48:return yl(T,"",dp,"",J,Mc|gl|KA);case 47:return yl(T,"",Gm,"",J,Zd|Mc|gl|KA);case 42:return yl(T,"",dp,"",J,Mc|gl|KA);case 41:return yl(T,"",Gm,"",J,Zd|Mc|gl|KA);case 26:return yl(T,"","",zu,J,0);case 25:return yl(T,"","",zu,J,Zd|Mc|gl);case 31:return yl(T,"","",Ku,fe,Zd|Mc|gl);case 33:return yl(T,"","",Ku,fe,0);case 32:return yl(T,"","",Ku,fe,Zd|Mc|gl);case 18:return di(T,2406,2415,!0,R);case 20:return La(T,1,19999,cp,3,R);case 21:return di(T,2790,2799,!0,R);case 22:return di(T,2662,2671,!0,R);case 22:return La(T,1,10999,Kx,3,R);case 23:return bd(T,"");case 24:return bd(T,"");case 27:return di(T,3302,3311,!0,R);case 28:return bd(T,"",J);case 29:return bd(T,"",J);case 34:return di(T,3792,3801,!0,R);case 37:return di(T,6160,6169,!0,R);case 38:return di(T,4160,4169,!0,R);case 39:return di(T,2918,2927,!0,R);case 40:return di(T,1776,1785,!0,R);case 43:return di(T,3046,3055,!0,R);case 44:return di(T,3174,3183,!0,R);case 45:return di(T,3664,3673,!0,R);case 46:return di(T,3872,3881,!0,R);case 3:default:return di(T,48,57,!0,R)}},Ap="data-html2canvas-ignore",up=(function(){function T(C,O,R){if(this.context=C,this.options=R,this.scrolledElements=[],this.referenceElement=O,this.counters=new ip,this.quoteDepth=0,!O.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(O.ownerDocument.documentElement,!1)}return T.prototype.toIFrame=function(C,O){var R=this,J=hp(C,O);if(!J.contentWindow)return Promise.reject("Unable to find iframe window");var fe=C.defaultView.pageXOffset,Fe=C.defaultView.pageYOffset,qe=J.contentWindow,Ge=qe.document,mt=pp(J).then(function(){return c(R,void 0,void 0,function(){var Et,Ot;return A(this,function(ns){switch(ns.label){case 0:return this.scrolledElements.forEach(Xm),qe&&(qe.scrollTo(O.left,O.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(qe.scrollY!==O.top||qe.scrollX!==O.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(qe.scrollX-O.left,qe.scrollY-O.top,0,0))),Et=this.options.onclone,Ot=this.clonedReferenceElement,typeof Ot>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:Ge.fonts&&Ge.fonts.ready?[4,Ge.fonts.ready]:[3,2];case 1:ns.sent(),ns.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Wm(Ge)]:[3,4];case 3:ns.sent(),ns.label=4;case 4:return typeof Et=="function"?[2,Promise.resolve().then(function(){return Et(Ge,Ot)}).then(function(){return J})]:[2,J]}})})});return Ge.open(),Ge.write(Ym(document.doctype)+"<html></html>"),mp(this.referenceElement.ownerDocument,fe,Fe),Ge.replaceChild(Ge.adoptNode(this.documentElement),Ge.documentElement),Ge.close(),mt},T.prototype.createElementClone=function(C){if(In(C,2))debugger;if(zh(C))return this.createCanvasClone(C);if(Kh(C))return this.createVideoClone(C);if(vd(C))return this.createStyleClone(C);var O=C.cloneNode(!1);return $h(O)&&($h(C)&&C.currentSrc&&C.currentSrc!==C.src&&(O.src=C.currentSrc,O.srcset=""),O.loading==="lazy"&&(O.loading="eager")),ap(O)?this.createCustomElementClone(O):O},T.prototype.createCustomElementClone=function(C){var O=document.createElement("html2canvascustomelement");return $u(C.style,O),O},T.prototype.createStyleClone=function(C){try{var O=C.sheet;if(O&&O.cssRules){var R=[].slice.call(O.cssRules,0).reduce(function(fe,Fe){return Fe&&typeof Fe.cssText=="string"?fe+Fe.cssText:fe},""),J=C.cloneNode(!1);return J.textContent=R,J}}catch(fe){if(this.context.logger.error("Unable to access cssRules property",fe),fe.name!=="SecurityError")throw fe}return C.cloneNode(!1)},T.prototype.createCanvasClone=function(C){var O;if(this.options.inlineImages&&C.ownerDocument){var R=C.ownerDocument.createElement("img");try{return R.src=C.toDataURL(),R}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",C)}}var J=C.cloneNode(!1);try{J.width=C.width,J.height=C.height;var fe=C.getContext("2d"),Fe=J.getContext("2d");if(Fe)if(!this.options.allowTaint&&fe)Fe.putImageData(fe.getImageData(0,0,C.width,C.height),0,0);else{var qe=(O=C.getContext("webgl2"))!==null&&O!==void 0?O:C.getContext("webgl");if(qe){var Ge=qe.getContextAttributes();Ge?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",C)}Fe.drawImage(C,0,0)}return J}catch{this.context.logger.info("Unable to clone canvas as it is tainted",C)}return J},T.prototype.createVideoClone=function(C){var O=C.ownerDocument.createElement("canvas");O.width=C.offsetWidth,O.height=C.offsetHeight;var R=O.getContext("2d");try{return R&&(R.drawImage(C,0,0,O.width,O.height),this.options.allowTaint||R.getImageData(0,0,O.width,O.height)),O}catch{this.context.logger.info("Unable to clone video as it is tainted",C)}var J=C.ownerDocument.createElement("canvas");return J.width=C.offsetWidth,J.height=C.offsetHeight,J},T.prototype.appendChildNode=function(C,O,R){(!fc(O)||!qm(O)&&!O.hasAttribute(Ap)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(O)))&&(!this.options.copyStyles||!fc(O)||!vd(O))&&C.appendChild(this.cloneNode(O,R))},T.prototype.cloneChildNodes=function(C,O,R){for(var J=this,fe=C.shadowRoot?C.shadowRoot.firstChild:C.firstChild;fe;fe=fe.nextSibling)if(fc(fe)&&Hu(fe)&&typeof fe.assignedNodes=="function"){var Fe=fe.assignedNodes();Fe.length&&Fe.forEach(function(qe){return J.appendChildNode(O,qe,R)})}else this.appendChildNode(O,fe,R)},T.prototype.cloneNode=function(C,O){if(np(C))return document.createTextNode(C.data);if(!C.ownerDocument)return C.cloneNode(!1);var R=C.ownerDocument.defaultView;if(R&&fc(C)&&(_u(C)||Jd(C))){var J=this.createElementClone(C);J.style.transitionProperty="none";var fe=R.getComputedStyle(C),Fe=R.getComputedStyle(C,":before"),qe=R.getComputedStyle(C,":after");this.referenceElement===C&&_u(J)&&(this.clonedReferenceElement=J),Hh(J)&&xp(J);var Ge=this.counters.parse(new Gn(this.context,fe)),mt=this.resolvePseudoContent(C,J,Fe,eA.BEFORE);ap(C)&&(O=!0),Kh(C)||this.cloneChildNodes(C,J,O),mt&&J.insertBefore(mt,J.firstChild);var Et=this.resolvePseudoContent(C,J,qe,eA.AFTER);return Et&&J.appendChild(Et),this.counters.pop(Ge),(fe&&(this.options.copyStyles||Jd(C))&&!rp(C)||O)&&$u(fe,J),(C.scrollTop!==0||C.scrollLeft!==0)&&this.scrolledElements.push([J,C.scrollLeft,C.scrollTop]),(Pu(C)||ku(C))&&(Pu(J)||ku(J))&&(J.value=C.value),J}return C.cloneNode(!1)},T.prototype.resolvePseudoContent=function(C,O,R,J){var fe=this;if(R){var Fe=R.content,qe=O.ownerDocument;if(!(!qe||!Fe||Fe==="none"||Fe==="-moz-alt-content"||R.display==="none")){this.counters.parse(new Gn(this.context,R));var Ge=new ya(this.context,R),mt=qe.createElement("html2canvaspseudoelement");$u(R,mt),Ge.content.forEach(function(Ot){if(Ot.type===0)mt.appendChild(qe.createTextNode(Ot.value));else if(Ot.type===22){var ns=qe.createElement("img");ns.src=Ot.value,ns.style.opacity="1",mt.appendChild(ns)}else if(Ot.type===18){if(Ot.name==="attr"){var Xs=Ot.values.filter(yr);Xs.length&&mt.appendChild(qe.createTextNode(C.getAttribute(Xs[0].value)||""))}else if(Ot.name==="counter"){var Rs=Ot.values.filter(ni),ks=Rs[0],jn=Rs[1];if(ks&&yr(ks)){var an=fe.counters.getCounterValue(ks.value),rn=jn&&yr(jn)?qd.parse(fe.context,jn.value):3;mt.appendChild(qe.createTextNode($A(an,rn,!1)))}}else if(Ot.name==="counters"){var or=Ot.values.filter(ni),ks=or[0],nr=or[1],jn=or[2];if(ks&&yr(ks)){var _n=fe.counters.getCounterValues(ks.value),en=jn&&yr(jn)?qd.parse(fe.context,jn.value):3,pr=nr&&nr.type===0?nr.value:"",Er=_n.map(function(ba){return $A(ba,en,!1)}).join(pr);mt.appendChild(qe.createTextNode(Er))}}}else if(Ot.type===20)switch(Ot.value){case"open-quote":mt.appendChild(qe.createTextNode(fs(Ge.quotes,fe.quoteDepth++,!0)));break;case"close-quote":mt.appendChild(qe.createTextNode(fs(Ge.quotes,--fe.quoteDepth,!1)));break;default:mt.appendChild(qe.createTextNode(Ot.value))}}),mt.className=yp+" "+qh;var Et=J===eA.BEFORE?" "+yp:" "+qh;return Jd(O)?O.className.baseValue+=Et:O.className+=Et,mt}}},T.destroy=function(C){return C.parentNode?(C.parentNode.removeChild(C),!0):!1},T})(),eA;(function(T){T[T.BEFORE=0]="BEFORE",T[T.AFTER=1]="AFTER"})(eA||(eA={}));var hp=function(T,C){var O=T.createElement("iframe");return O.className="html2canvas-container",O.style.visibility="hidden",O.style.position="fixed",O.style.left="-10000px",O.style.top="0px",O.style.border="0",O.width=C.width.toString(),O.height=C.height.toString(),O.scrolling="no",O.setAttribute(Ap,"true"),T.body.appendChild(O),O},fp=function(T){return new Promise(function(C){if(T.complete){C();return}if(!T.src){C();return}T.onload=C,T.onerror=C})},Wm=function(T){return Promise.all([].slice.call(T.images,0).map(fp))},pp=function(T){return new Promise(function(C,O){var R=T.contentWindow;if(!R)return O("No window assigned for iframe");var J=R.document;R.onload=T.onload=function(){R.onload=T.onload=null;var fe=setInterval(function(){J.body.childNodes.length>0&&J.readyState==="complete"&&(clearInterval(fe),C(T))},50)}})},Vh=["all","d","content"],$u=function(T,C){for(var O=T.length-1;O>=0;O--){var R=T.item(O);Vh.indexOf(R)===-1&&C.style.setProperty(R,T.getPropertyValue(R))}return C},Ym=function(T){var C="";return T&&(C+="<!DOCTYPE ",T.name&&(C+=T.name),T.internalSubset&&(C+=T.internalSubset),T.publicId&&(C+='"'+T.publicId+'"'),T.systemId&&(C+='"'+T.systemId+'"'),C+=">"),C},mp=function(T,C,O){T&&T.defaultView&&(C!==T.defaultView.pageXOffset||O!==T.defaultView.pageYOffset)&&T.defaultView.scrollTo(C,O)},Xm=function(T){var C=T[0],O=T[1],R=T[2];C.scrollLeft=O,C.scrollTop=R},Pc=":before",gp=":after",yp="___html2canvas___pseudoelement_before",qh="___html2canvas___pseudoelement_after",pc=`{
    content: "" !important;
    display: none !important;
}`,xp=function(T){Jm(T,"."+yp+Pc+pc+`
         .`+qh+gp+pc)},Jm=function(T,C){var O=T.ownerDocument;if(O){var R=O.createElement("style");R.textContent=C,T.appendChild(R)}},Vu=(function(){function T(){}return T.getOrigin=function(C){var O=T._link;return O?(O.href=C,O.href=O.href,O.protocol+O.hostname+O.port):"about:blank"},T.isSameOrigin=function(C){return T.getOrigin(C)===T._origin},T.setContext=function(C){T._link=C.document.createElement("a"),T._origin=T.getOrigin(C.location.href)},T._origin="about:blank",T})(),qu=(function(){function T(C,O){this.context=C,this._options=O,this._cache={}}return T.prototype.addImage=function(C){var O=Promise.resolve();return this.has(C)||(Gh(C)||Zm(C))&&(this._cache[C]=this.loadImage(C)).catch(function(){}),O},T.prototype.match=function(C){return this._cache[C]},T.prototype.loadImage=function(C){return c(this,void 0,void 0,function(){var O,R,J,fe,Fe=this;return A(this,function(qe){switch(qe.label){case 0:return O=Vu.isSameOrigin(C),R=!tA(C)&&this._options.useCORS===!0&&yi.SUPPORT_CORS_IMAGES&&!O,J=!tA(C)&&!O&&!Gh(C)&&typeof this._options.proxy=="string"&&yi.SUPPORT_CORS_XHR&&!R,!O&&this._options.allowTaint===!1&&!tA(C)&&!Gh(C)&&!J&&!R?[2]:(fe=C,J?[4,this.proxy(fe)]:[3,2]);case 1:fe=qe.sent(),qe.label=2;case 2:return this.context.logger.debug("Added image "+C.substring(0,256)),[4,new Promise(function(Ge,mt){var Et=new Image;Et.onload=function(){return Ge(Et)},Et.onerror=mt,(jd(fe)||R)&&(Et.crossOrigin="anonymous"),Et.src=fe,Et.complete===!0&&setTimeout(function(){return Ge(Et)},500),Fe._options.imageTimeout>0&&setTimeout(function(){return mt("Timed out ("+Fe._options.imageTimeout+"ms) loading image")},Fe._options.imageTimeout)})];case 3:return[2,qe.sent()]}})})},T.prototype.has=function(C){return typeof this._cache[C]<"u"},T.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},T.prototype.proxy=function(C){var O=this,R=this._options.proxy;if(!R)throw new Error("No proxy defined");var J=C.substring(0,256);return new Promise(function(fe,Fe){var qe=yi.SUPPORT_RESPONSE_TYPE?"blob":"text",Ge=new XMLHttpRequest;Ge.onload=function(){if(Ge.status===200)if(qe==="text")fe(Ge.response);else{var Ot=new FileReader;Ot.addEventListener("load",function(){return fe(Ot.result)},!1),Ot.addEventListener("error",function(ns){return Fe(ns)},!1),Ot.readAsDataURL(Ge.response)}else Fe("Failed to proxy resource "+J+" with status code "+Ge.status)},Ge.onerror=Fe;var mt=R.indexOf("?")>-1?"&":"?";if(Ge.open("GET",""+R+mt+"url="+encodeURIComponent(C)+"&responseType="+qe),qe!=="text"&&Ge instanceof XMLHttpRequest&&(Ge.responseType=qe),O._options.imageTimeout){var Et=O._options.imageTimeout;Ge.timeout=Et,Ge.ontimeout=function(){return Fe("Timed out ("+Et+"ms) proxying "+J)}}Ge.send()})},T})(),Da=/^data:image\/svg\+xml/i,$x=/^data:image\/.*;base64,/i,Vx=/^data:image\/.*/i,Zm=function(T){return yi.SUPPORT_SVG_DRAWING||!eg(T)},tA=function(T){return Vx.test(T)},jd=function(T){return $x.test(T)},Gh=function(T){return T.substr(0,4)==="blob"},eg=function(T){return T.substr(-3).toLowerCase()==="svg"||Da.test(T)},Gs=(function(){function T(C,O){this.type=0,this.x=C,this.y=O}return T.prototype.add=function(C,O){return new T(this.x+C,this.y+O)},T})(),mo=function(T,C,O){return new Gs(T.x+(C.x-T.x)*O,T.y+(C.y-T.y)*O)},Gu=(function(){function T(C,O,R,J){this.type=1,this.start=C,this.startControl=O,this.endControl=R,this.end=J}return T.prototype.subdivide=function(C,O){var R=mo(this.start,this.startControl,C),J=mo(this.startControl,this.endControl,C),fe=mo(this.endControl,this.end,C),Fe=mo(R,J,C),qe=mo(J,fe,C),Ge=mo(Fe,qe,C);return O?new T(this.start,R,Fe,Ge):new T(Ge,qe,fe,this.end)},T.prototype.add=function(C,O){return new T(this.start.add(C,O),this.startControl.add(C,O),this.endControl.add(C,O),this.end.add(C,O))},T.prototype.reverse=function(){return new T(this.end,this.endControl,this.startControl,this.start)},T})(),Do=function(T){return T.type===1},tg=(function(){function T(C){var O=C.styles,R=C.bounds,J=Co(O.borderTopLeftRadius,R.width,R.height),fe=J[0],Fe=J[1],qe=Co(O.borderTopRightRadius,R.width,R.height),Ge=qe[0],mt=qe[1],Et=Co(O.borderBottomRightRadius,R.width,R.height),Ot=Et[0],ns=Et[1],Xs=Co(O.borderBottomLeftRadius,R.width,R.height),Rs=Xs[0],ks=Xs[1],jn=[];jn.push((fe+Ge)/R.width),jn.push((Rs+Ot)/R.width),jn.push((Fe+ks)/R.height),jn.push((mt+ns)/R.height);var an=Math.max.apply(Math,jn);an>1&&(fe/=an,Fe/=an,Ge/=an,mt/=an,Ot/=an,ns/=an,Rs/=an,ks/=an);var rn=R.width-Ge,or=R.height-ns,nr=R.width-Ot,_n=R.height-ks,en=O.borderTopWidth,pr=O.borderRightWidth,Er=O.borderBottomWidth,Bn=O.borderLeftWidth,xi=ir(O.paddingTop,C.bounds.width),ba=ir(O.paddingRight,C.bounds.width),Mo=ir(O.paddingBottom,C.bounds.width),Aa=ir(O.paddingLeft,C.bounds.width);this.topLeftBorderDoubleOuterBox=fe>0||Fe>0?Ca(R.left+Bn/3,R.top+en/3,fe-Bn/3,Fe-en/3,Wr.TOP_LEFT):new Gs(R.left+Bn/3,R.top+en/3),this.topRightBorderDoubleOuterBox=fe>0||Fe>0?Ca(R.left+rn,R.top+en/3,Ge-pr/3,mt-en/3,Wr.TOP_RIGHT):new Gs(R.left+R.width-pr/3,R.top+en/3),this.bottomRightBorderDoubleOuterBox=Ot>0||ns>0?Ca(R.left+nr,R.top+or,Ot-pr/3,ns-Er/3,Wr.BOTTOM_RIGHT):new Gs(R.left+R.width-pr/3,R.top+R.height-Er/3),this.bottomLeftBorderDoubleOuterBox=Rs>0||ks>0?Ca(R.left+Bn/3,R.top+_n,Rs-Bn/3,ks-Er/3,Wr.BOTTOM_LEFT):new Gs(R.left+Bn/3,R.top+R.height-Er/3),this.topLeftBorderDoubleInnerBox=fe>0||Fe>0?Ca(R.left+Bn*2/3,R.top+en*2/3,fe-Bn*2/3,Fe-en*2/3,Wr.TOP_LEFT):new Gs(R.left+Bn*2/3,R.top+en*2/3),this.topRightBorderDoubleInnerBox=fe>0||Fe>0?Ca(R.left+rn,R.top+en*2/3,Ge-pr*2/3,mt-en*2/3,Wr.TOP_RIGHT):new Gs(R.left+R.width-pr*2/3,R.top+en*2/3),this.bottomRightBorderDoubleInnerBox=Ot>0||ns>0?Ca(R.left+nr,R.top+or,Ot-pr*2/3,ns-Er*2/3,Wr.BOTTOM_RIGHT):new Gs(R.left+R.width-pr*2/3,R.top+R.height-Er*2/3),this.bottomLeftBorderDoubleInnerBox=Rs>0||ks>0?Ca(R.left+Bn*2/3,R.top+_n,Rs-Bn*2/3,ks-Er*2/3,Wr.BOTTOM_LEFT):new Gs(R.left+Bn*2/3,R.top+R.height-Er*2/3),this.topLeftBorderStroke=fe>0||Fe>0?Ca(R.left+Bn/2,R.top+en/2,fe-Bn/2,Fe-en/2,Wr.TOP_LEFT):new Gs(R.left+Bn/2,R.top+en/2),this.topRightBorderStroke=fe>0||Fe>0?Ca(R.left+rn,R.top+en/2,Ge-pr/2,mt-en/2,Wr.TOP_RIGHT):new Gs(R.left+R.width-pr/2,R.top+en/2),this.bottomRightBorderStroke=Ot>0||ns>0?Ca(R.left+nr,R.top+or,Ot-pr/2,ns-Er/2,Wr.BOTTOM_RIGHT):new Gs(R.left+R.width-pr/2,R.top+R.height-Er/2),this.bottomLeftBorderStroke=Rs>0||ks>0?Ca(R.left+Bn/2,R.top+_n,Rs-Bn/2,ks-Er/2,Wr.BOTTOM_LEFT):new Gs(R.left+Bn/2,R.top+R.height-Er/2),this.topLeftBorderBox=fe>0||Fe>0?Ca(R.left,R.top,fe,Fe,Wr.TOP_LEFT):new Gs(R.left,R.top),this.topRightBorderBox=Ge>0||mt>0?Ca(R.left+rn,R.top,Ge,mt,Wr.TOP_RIGHT):new Gs(R.left+R.width,R.top),this.bottomRightBorderBox=Ot>0||ns>0?Ca(R.left+nr,R.top+or,Ot,ns,Wr.BOTTOM_RIGHT):new Gs(R.left+R.width,R.top+R.height),this.bottomLeftBorderBox=Rs>0||ks>0?Ca(R.left,R.top+_n,Rs,ks,Wr.BOTTOM_LEFT):new Gs(R.left,R.top+R.height),this.topLeftPaddingBox=fe>0||Fe>0?Ca(R.left+Bn,R.top+en,Math.max(0,fe-Bn),Math.max(0,Fe-en),Wr.TOP_LEFT):new Gs(R.left+Bn,R.top+en),this.topRightPaddingBox=Ge>0||mt>0?Ca(R.left+Math.min(rn,R.width-pr),R.top+en,rn>R.width+pr?0:Math.max(0,Ge-pr),Math.max(0,mt-en),Wr.TOP_RIGHT):new Gs(R.left+R.width-pr,R.top+en),this.bottomRightPaddingBox=Ot>0||ns>0?Ca(R.left+Math.min(nr,R.width-Bn),R.top+Math.min(or,R.height-Er),Math.max(0,Ot-pr),Math.max(0,ns-Er),Wr.BOTTOM_RIGHT):new Gs(R.left+R.width-pr,R.top+R.height-Er),this.bottomLeftPaddingBox=Rs>0||ks>0?Ca(R.left+Bn,R.top+Math.min(_n,R.height-Er),Math.max(0,Rs-Bn),Math.max(0,ks-Er),Wr.BOTTOM_LEFT):new Gs(R.left+Bn,R.top+R.height-Er),this.topLeftContentBox=fe>0||Fe>0?Ca(R.left+Bn+Aa,R.top+en+xi,Math.max(0,fe-(Bn+Aa)),Math.max(0,Fe-(en+xi)),Wr.TOP_LEFT):new Gs(R.left+Bn+Aa,R.top+en+xi),this.topRightContentBox=Ge>0||mt>0?Ca(R.left+Math.min(rn,R.width+Bn+Aa),R.top+en+xi,rn>R.width+Bn+Aa?0:Ge-Bn+Aa,mt-(en+xi),Wr.TOP_RIGHT):new Gs(R.left+R.width-(pr+ba),R.top+en+xi),this.bottomRightContentBox=Ot>0||ns>0?Ca(R.left+Math.min(nr,R.width-(Bn+Aa)),R.top+Math.min(or,R.height+en+xi),Math.max(0,Ot-(pr+ba)),ns-(Er+Mo),Wr.BOTTOM_RIGHT):new Gs(R.left+R.width-(pr+ba),R.top+R.height-(Er+Mo)),this.bottomLeftContentBox=Rs>0||ks>0?Ca(R.left+Bn+Aa,R.top+_n,Math.max(0,Rs-(Bn+Aa)),ks-(Er+Mo),Wr.BOTTOM_LEFT):new Gs(R.left+Bn+Aa,R.top+R.height-(Er+Mo))}return T})(),Wr;(function(T){T[T.TOP_LEFT=0]="TOP_LEFT",T[T.TOP_RIGHT=1]="TOP_RIGHT",T[T.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",T[T.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Wr||(Wr={}));var Ca=function(T,C,O,R,J){var fe=4*((Math.sqrt(2)-1)/3),Fe=O*fe,qe=R*fe,Ge=T+O,mt=C+R;switch(J){case Wr.TOP_LEFT:return new Gu(new Gs(T,mt),new Gs(T,mt-qe),new Gs(Ge-Fe,C),new Gs(Ge,C));case Wr.TOP_RIGHT:return new Gu(new Gs(T,C),new Gs(T+Fe,C),new Gs(Ge,mt-qe),new Gs(Ge,mt));case Wr.BOTTOM_RIGHT:return new Gu(new Gs(Ge,C),new Gs(Ge,C+qe),new Gs(T+Fe,mt),new Gs(T,mt));case Wr.BOTTOM_LEFT:default:return new Gu(new Gs(Ge,mt),new Gs(Ge-Fe,mt),new Gs(T,C+qe),new Gs(T,C))}},sA=function(T){return[T.topLeftBorderBox,T.topRightBorderBox,T.bottomRightBorderBox,T.bottomLeftBorderBox]},sg=function(T){return[T.topLeftContentBox,T.topRightContentBox,T.bottomRightContentBox,T.bottomLeftContentBox]},xl=function(T){return[T.topLeftPaddingBox,T.topRightPaddingBox,T.bottomRightPaddingBox,T.bottomLeftPaddingBox]},Si=(function(){function T(C,O,R){this.offsetX=C,this.offsetY=O,this.matrix=R,this.type=0,this.target=6}return T})(),VA=(function(){function T(C,O){this.path=C,this.target=O,this.type=1}return T})(),ng=(function(){function T(C){this.opacity=C,this.type=2,this.target=6}return T})(),qi=function(T){return T.type===0},rg=function(T){return T.type===1},ag=function(T){return T.type===2},vp=function(T,C){return T.length===C.length?T.some(function(O,R){return O===C[R]}):!1},za=function(T,C,O,R,J){return T.map(function(fe,Fe){switch(Fe){case 0:return fe.add(C,O);case 1:return fe.add(C+R,O);case 2:return fe.add(C+R,O+J);case 3:return fe.add(C,O+J)}return fe})},go=(function(){function T(C){this.element=C,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return T})(),mc=(function(){function T(C,O){if(this.container=C,this.parent=O,this.effects=[],this.curves=new tg(this.container),this.container.styles.opacity<1&&this.effects.push(new ng(this.container.styles.opacity)),this.container.styles.transform!==null){var R=this.container.bounds.left+this.container.styles.transformOrigin[0].number,J=this.container.bounds.top+this.container.styles.transformOrigin[1].number,fe=this.container.styles.transform;this.effects.push(new Si(R,J,fe))}if(this.container.styles.overflowX!==0){var Fe=sA(this.curves),qe=xl(this.curves);vp(Fe,qe)?this.effects.push(new VA(Fe,6)):(this.effects.push(new VA(Fe,2)),this.effects.push(new VA(qe,4)))}}return T.prototype.getEffects=function(C){for(var O=[2,3].indexOf(this.container.styles.position)===-1,R=this.parent,J=this.effects.slice(0);R;){var fe=R.effects.filter(function(Ge){return!rg(Ge)});if(O||R.container.styles.position!==0||!R.parent){if(J.unshift.apply(J,fe),O=[2,3].indexOf(R.container.styles.position)===-1,R.container.styles.overflowX!==0){var Fe=sA(R.curves),qe=xl(R.curves);vp(Fe,qe)||J.unshift(new VA(qe,6))}}else J.unshift.apply(J,fe);R=R.parent}return J.filter(function(Ge){return Ct(Ge.target,C)})},T})(),Wh=function(T,C,O,R){T.container.elements.forEach(function(J){var fe=Ct(J.flags,4),Fe=Ct(J.flags,2),qe=new mc(J,T);Ct(J.styles.display,2048)&&R.push(qe);var Ge=Ct(J.flags,8)?[]:R;if(fe||Fe){var mt=fe||J.styles.isPositioned()?O:C,Et=new go(qe);if(J.styles.isPositioned()||J.styles.opacity<1||J.styles.isTransformed()){var Ot=J.styles.zIndex.order;if(Ot<0){var ns=0;mt.negativeZIndex.some(function(Rs,ks){return Ot>Rs.element.container.styles.zIndex.order?(ns=ks,!1):ns>0}),mt.negativeZIndex.splice(ns,0,Et)}else if(Ot>0){var Xs=0;mt.positiveZIndex.some(function(Rs,ks){return Ot>=Rs.element.container.styles.zIndex.order?(Xs=ks+1,!1):Xs>0}),mt.positiveZIndex.splice(Xs,0,Et)}else mt.zeroOrAutoZIndexOrTransformedOrOpacity.push(Et)}else J.styles.isFloating()?mt.nonPositionedFloats.push(Et):mt.nonPositionedInlineLevel.push(Et);Wh(qe,Et,fe?Et:O,Ge)}else J.styles.isInlineLevel()?C.inlineLevel.push(qe):C.nonInlineLevel.push(qe),Wh(qe,C,O,Ge);Ct(J.flags,8)&&bp(J,Ge)})},bp=function(T,C){for(var O=T instanceof _h?T.start:1,R=T instanceof _h?T.reversed:!1,J=0;J<C.length;J++){var fe=C[J];fe.container instanceof Yf&&typeof fe.container.value=="number"&&fe.container.value!==0&&(O=fe.container.value),fe.listValue=$A(O,fe.container.styles.listStyleType,!0),O+=R?-1:1}},ig=function(T){var C=new mc(T,null),O=new go(C),R=[];return Wh(C,O,O,R),bp(C.container,R),O},og=function(T,C){switch(C){case 0:return Qa(T.topLeftBorderBox,T.topLeftPaddingBox,T.topRightBorderBox,T.topRightPaddingBox);case 1:return Qa(T.topRightBorderBox,T.topRightPaddingBox,T.bottomRightBorderBox,T.bottomRightPaddingBox);case 2:return Qa(T.bottomRightBorderBox,T.bottomRightPaddingBox,T.bottomLeftBorderBox,T.bottomLeftPaddingBox);case 3:default:return Qa(T.bottomLeftBorderBox,T.bottomLeftPaddingBox,T.topLeftBorderBox,T.topLeftPaddingBox)}},Yh=function(T,C){switch(C){case 0:return Qa(T.topLeftBorderBox,T.topLeftBorderDoubleOuterBox,T.topRightBorderBox,T.topRightBorderDoubleOuterBox);case 1:return Qa(T.topRightBorderBox,T.topRightBorderDoubleOuterBox,T.bottomRightBorderBox,T.bottomRightBorderDoubleOuterBox);case 2:return Qa(T.bottomRightBorderBox,T.bottomRightBorderDoubleOuterBox,T.bottomLeftBorderBox,T.bottomLeftBorderDoubleOuterBox);case 3:default:return Qa(T.bottomLeftBorderBox,T.bottomLeftBorderDoubleOuterBox,T.topLeftBorderBox,T.topLeftBorderDoubleOuterBox)}},Qo=function(T,C){switch(C){case 0:return Qa(T.topLeftBorderDoubleInnerBox,T.topLeftPaddingBox,T.topRightBorderDoubleInnerBox,T.topRightPaddingBox);case 1:return Qa(T.topRightBorderDoubleInnerBox,T.topRightPaddingBox,T.bottomRightBorderDoubleInnerBox,T.bottomRightPaddingBox);case 2:return Qa(T.bottomRightBorderDoubleInnerBox,T.bottomRightPaddingBox,T.bottomLeftBorderDoubleInnerBox,T.bottomLeftPaddingBox);case 3:default:return Qa(T.bottomLeftBorderDoubleInnerBox,T.bottomLeftPaddingBox,T.topLeftBorderDoubleInnerBox,T.topLeftPaddingBox)}},zl=function(T,C){switch(C){case 0:return Wu(T.topLeftBorderStroke,T.topRightBorderStroke);case 1:return Wu(T.topRightBorderStroke,T.bottomRightBorderStroke);case 2:return Wu(T.bottomRightBorderStroke,T.bottomLeftBorderStroke);case 3:default:return Wu(T.bottomLeftBorderStroke,T.topLeftBorderStroke)}},Wu=function(T,C){var O=[];return Do(T)?O.push(T.subdivide(.5,!1)):O.push(T),Do(C)?O.push(C.subdivide(.5,!0)):O.push(C),O},Qa=function(T,C,O,R){var J=[];return Do(T)?J.push(T.subdivide(.5,!1)):J.push(T),Do(O)?J.push(O.subdivide(.5,!0)):J.push(O),Do(R)?J.push(R.subdivide(.5,!0).reverse()):J.push(R),Do(C)?J.push(C.subdivide(.5,!1).reverse()):J.push(C),J},jp=function(T){var C=T.bounds,O=T.styles;return C.add(O.borderLeftWidth,O.borderTopWidth,-(O.borderRightWidth+O.borderLeftWidth),-(O.borderTopWidth+O.borderBottomWidth))},vl=function(T){var C=T.styles,O=T.bounds,R=ir(C.paddingLeft,O.width),J=ir(C.paddingRight,O.width),fe=ir(C.paddingTop,O.width),Fe=ir(C.paddingBottom,O.width);return O.add(R+C.borderLeftWidth,fe+C.borderTopWidth,-(C.borderRightWidth+C.borderLeftWidth+R+J),-(C.borderTopWidth+C.borderBottomWidth+fe+Fe))},nA=function(T,C){return T===0?C.bounds:T===2?vl(C):jp(C)},kc=function(T,C){return T===0?C.bounds:T===2?vl(C):jp(C)},Yu=function(T,C,O){var R=nA(Kl(T.styles.backgroundOrigin,C),T),J=kc(Kl(T.styles.backgroundClip,C),T),fe=lg(Kl(T.styles.backgroundSize,C),O,R),Fe=fe[0],qe=fe[1],Ge=Co(Kl(T.styles.backgroundPosition,C),R.width-Fe,R.height-qe),mt=Xu(Kl(T.styles.backgroundRepeat,C),Ge,fe,R,J),Et=Math.round(R.left+Ge[0]),Ot=Math.round(R.top+Ge[1]);return[mt,Et,Ot,Fe,qe]},wd=function(T){return yr(T)&&T.value===Dl.AUTO},_o=function(T){return typeof T=="number"},lg=function(T,C,O){var R=C[0],J=C[1],fe=C[2],Fe=T[0],qe=T[1];if(!Fe)return[0,0];if(Lr(Fe)&&qe&&Lr(qe))return[ir(Fe,O.width),ir(qe,O.height)];var Ge=_o(fe);if(yr(Fe)&&(Fe.value===Dl.CONTAIN||Fe.value===Dl.COVER)){if(_o(fe)){var mt=O.width/O.height;return mt<fe!=(Fe.value===Dl.COVER)?[O.width,O.width/fe]:[O.height*fe,O.height]}return[O.width,O.height]}var Et=_o(R),Ot=_o(J),ns=Et||Ot;if(wd(Fe)&&(!qe||wd(qe))){if(Et&&Ot)return[R,J];if(!Ge&&!ns)return[O.width,O.height];if(ns&&Ge){var Xs=Et?R:J*fe,Rs=Ot?J:R/fe;return[Xs,Rs]}var ks=Et?R:O.width,jn=Ot?J:O.height;return[ks,jn]}if(Ge){var an=0,rn=0;return Lr(Fe)?an=ir(Fe,O.width):Lr(qe)&&(rn=ir(qe,O.height)),wd(Fe)?an=rn*fe:(!qe||wd(qe))&&(rn=an/fe),[an,rn]}var or=null,nr=null;if(Lr(Fe)?or=ir(Fe,O.width):qe&&Lr(qe)&&(nr=ir(qe,O.height)),or!==null&&(!qe||wd(qe))&&(nr=Et&&Ot?or/R*J:O.height),nr!==null&&wd(Fe)&&(or=Et&&Ot?nr/J*R:O.width),or!==null&&nr!==null)return[or,nr];throw new Error("Unable to calculate background-size for element")},Kl=function(T,C){var O=T[C];return typeof O>"u"?T[0]:O},Xu=function(T,C,O,R,J){var fe=C[0],Fe=C[1],qe=O[0],Ge=O[1];switch(T){case 2:return[new Gs(Math.round(R.left),Math.round(R.top+Fe)),new Gs(Math.round(R.left+R.width),Math.round(R.top+Fe)),new Gs(Math.round(R.left+R.width),Math.round(Ge+R.top+Fe)),new Gs(Math.round(R.left),Math.round(Ge+R.top+Fe))];case 3:return[new Gs(Math.round(R.left+fe),Math.round(R.top)),new Gs(Math.round(R.left+fe+qe),Math.round(R.top)),new Gs(Math.round(R.left+fe+qe),Math.round(R.height+R.top)),new Gs(Math.round(R.left+fe),Math.round(R.height+R.top))];case 1:return[new Gs(Math.round(R.left+fe),Math.round(R.top+Fe)),new Gs(Math.round(R.left+fe+qe),Math.round(R.top+Fe)),new Gs(Math.round(R.left+fe+qe),Math.round(R.top+Fe+Ge)),new Gs(Math.round(R.left+fe),Math.round(R.top+Fe+Ge))];default:return[new Gs(Math.round(J.left),Math.round(J.top)),new Gs(Math.round(J.left+J.width),Math.round(J.top)),new Gs(Math.round(J.left+J.width),Math.round(J.height+J.top)),new Gs(Math.round(J.left),Math.round(J.height+J.top))]}},Ju="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",rA="Hidden Text",cg=(function(){function T(C){this._data={},this._document=C}return T.prototype.parseMetrics=function(C,O){var R=this._document.createElement("div"),J=this._document.createElement("img"),fe=this._document.createElement("span"),Fe=this._document.body;R.style.visibility="hidden",R.style.fontFamily=C,R.style.fontSize=O,R.style.margin="0",R.style.padding="0",R.style.whiteSpace="nowrap",Fe.appendChild(R),J.src=Ju,J.width=1,J.height=1,J.style.margin="0",J.style.padding="0",J.style.verticalAlign="baseline",fe.style.fontFamily=C,fe.style.fontSize=O,fe.style.margin="0",fe.style.padding="0",fe.appendChild(this._document.createTextNode(rA)),R.appendChild(fe),R.appendChild(J);var qe=J.offsetTop-fe.offsetTop+2;R.removeChild(fe),R.appendChild(this._document.createTextNode(rA)),R.style.lineHeight="normal",J.style.verticalAlign="super";var Ge=J.offsetTop-R.offsetTop+2;return Fe.removeChild(R),{baseline:qe,middle:Ge}},T.prototype.getMetrics=function(C,O){var R=C+" "+O;return typeof this._data[R]>"u"&&(this._data[R]=this.parseMetrics(C,O)),this._data[R]},T})(),wp=(function(){function T(C,O){this.context=C,this.options=O}return T})(),Zu=1e4,dg=(function(T){r(C,T);function C(O,R){var J=T.call(this,O,R)||this;return J._activeEffects=[],J.canvas=R.canvas?R.canvas:document.createElement("canvas"),J.ctx=J.canvas.getContext("2d"),R.canvas||(J.canvas.width=Math.floor(R.width*R.scale),J.canvas.height=Math.floor(R.height*R.scale),J.canvas.style.width=R.width+"px",J.canvas.style.height=R.height+"px"),J.fontMetrics=new cg(document),J.ctx.scale(J.options.scale,J.options.scale),J.ctx.translate(-R.x,-R.y),J.ctx.textBaseline="bottom",J._activeEffects=[],J.context.logger.debug("Canvas renderer initialized ("+R.width+"x"+R.height+") with scale "+R.scale),J}return C.prototype.applyEffects=function(O){for(var R=this;this._activeEffects.length;)this.popEffect();O.forEach(function(J){return R.applyEffect(J)})},C.prototype.applyEffect=function(O){this.ctx.save(),ag(O)&&(this.ctx.globalAlpha=O.opacity),qi(O)&&(this.ctx.translate(O.offsetX,O.offsetY),this.ctx.transform(O.matrix[0],O.matrix[1],O.matrix[2],O.matrix[3],O.matrix[4],O.matrix[5]),this.ctx.translate(-O.offsetX,-O.offsetY)),rg(O)&&(this.path(O.path),this.ctx.clip()),this._activeEffects.push(O)},C.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},C.prototype.renderStack=function(O){return c(this,void 0,void 0,function(){var R;return A(this,function(J){switch(J.label){case 0:return R=O.element.container.styles,R.isVisible()?[4,this.renderStackContent(O)]:[3,2];case 1:J.sent(),J.label=2;case 2:return[2]}})})},C.prototype.renderNode=function(O){return c(this,void 0,void 0,function(){return A(this,function(R){switch(R.label){case 0:if(Ct(O.container.flags,16))debugger;return O.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(O)]:[3,3];case 1:return R.sent(),[4,this.renderNodeContent(O)];case 2:R.sent(),R.label=3;case 3:return[2]}})})},C.prototype.renderTextWithLetterSpacing=function(O,R,J){var fe=this;if(R===0)this.ctx.fillText(O.text,O.bounds.left,O.bounds.top+J);else{var Fe=Lo(O.text);Fe.reduce(function(qe,Ge){return fe.ctx.fillText(Ge,qe,O.bounds.top+J),qe+fe.ctx.measureText(Ge).width},O.bounds.left)}},C.prototype.createFontStyle=function(O){var R=O.fontVariant.filter(function(Fe){return Fe==="normal"||Fe==="small-caps"}).join(""),J=ta(O.fontFamily).join(", "),fe=Ao(O.fontSize)?""+O.fontSize.number+O.fontSize.unit:O.fontSize.number+"px";return[[O.fontStyle,R,O.fontWeight,fe,J].join(" "),J,fe]},C.prototype.renderTextNode=function(O,R){return c(this,void 0,void 0,function(){var J,fe,Fe,qe,Ge,mt,Et,Ot,ns=this;return A(this,function(Xs){return J=this.createFontStyle(R),fe=J[0],Fe=J[1],qe=J[2],this.ctx.font=fe,this.ctx.direction=R.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",Ge=this.fontMetrics.getMetrics(Fe,qe),mt=Ge.baseline,Et=Ge.middle,Ot=R.paintOrder,O.textBounds.forEach(function(Rs){Ot.forEach(function(ks){switch(ks){case 0:ns.ctx.fillStyle=Sr(R.color),ns.renderTextWithLetterSpacing(Rs,R.letterSpacing,mt);var jn=R.textShadow;jn.length&&Rs.text.trim().length&&(jn.slice(0).reverse().forEach(function(an){ns.ctx.shadowColor=Sr(an.color),ns.ctx.shadowOffsetX=an.offsetX.number*ns.options.scale,ns.ctx.shadowOffsetY=an.offsetY.number*ns.options.scale,ns.ctx.shadowBlur=an.blur.number,ns.renderTextWithLetterSpacing(Rs,R.letterSpacing,mt)}),ns.ctx.shadowColor="",ns.ctx.shadowOffsetX=0,ns.ctx.shadowOffsetY=0,ns.ctx.shadowBlur=0),R.textDecorationLine.length&&(ns.ctx.fillStyle=Sr(R.textDecorationColor||R.color),R.textDecorationLine.forEach(function(an){switch(an){case 1:ns.ctx.fillRect(Rs.bounds.left,Math.round(Rs.bounds.top+mt),Rs.bounds.width,1);break;case 2:ns.ctx.fillRect(Rs.bounds.left,Math.round(Rs.bounds.top),Rs.bounds.width,1);break;case 3:ns.ctx.fillRect(Rs.bounds.left,Math.ceil(Rs.bounds.top+Et),Rs.bounds.width,1);break}}));break;case 1:R.webkitTextStrokeWidth&&Rs.text.trim().length&&(ns.ctx.strokeStyle=Sr(R.webkitTextStrokeColor),ns.ctx.lineWidth=R.webkitTextStrokeWidth,ns.ctx.lineJoin=window.chrome?"miter":"round",ns.ctx.strokeText(Rs.text,Rs.bounds.left,Rs.bounds.top+mt)),ns.ctx.strokeStyle="",ns.ctx.lineWidth=0,ns.ctx.lineJoin="miter";break}})}),[2]})})},C.prototype.renderReplacedElement=function(O,R,J){if(J&&O.intrinsicWidth>0&&O.intrinsicHeight>0){var fe=vl(O),Fe=xl(R);this.path(Fe),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(J,0,0,O.intrinsicWidth,O.intrinsicHeight,fe.left,fe.top,fe.width,fe.height),this.ctx.restore()}},C.prototype.renderNodeContent=function(O){return c(this,void 0,void 0,function(){var R,J,fe,Fe,qe,Ge,rn,rn,mt,Et,Ot,ns,nr,Xs,Rs,_n,ks,jn,an,rn,or,nr,_n;return A(this,function(en){switch(en.label){case 0:this.applyEffects(O.getEffects(4)),R=O.container,J=O.curves,fe=R.styles,Fe=0,qe=R.textNodes,en.label=1;case 1:return Fe<qe.length?(Ge=qe[Fe],[4,this.renderTextNode(Ge,fe)]):[3,4];case 2:en.sent(),en.label=3;case 3:return Fe++,[3,1];case 4:if(!(R instanceof Wf))return[3,8];en.label=5;case 5:return en.trys.push([5,7,,8]),[4,this.context.cache.match(R.src)];case 6:return rn=en.sent(),this.renderReplacedElement(R,J,rn),[3,8];case 7:return en.sent(),this.context.logger.error("Error loading image "+R.src),[3,8];case 8:if(R instanceof Qh&&this.renderReplacedElement(R,J,R.canvas),!(R instanceof _m))return[3,12];en.label=9;case 9:return en.trys.push([9,11,,12]),[4,this.context.cache.match(R.svg)];case 10:return rn=en.sent(),this.renderReplacedElement(R,J,rn),[3,12];case 11:return en.sent(),this.context.logger.error("Error loading svg "+R.svg.substring(0,255)),[3,12];case 12:return R instanceof ep&&R.tree?(mt=new C(this.context,{scale:this.options.scale,backgroundColor:R.backgroundColor,x:0,y:0,width:R.width,height:R.height}),[4,mt.render(R.tree)]):[3,14];case 13:Et=en.sent(),R.width&&R.height&&this.ctx.drawImage(Et,0,0,R.width,R.height,R.bounds.left,R.bounds.top,R.bounds.width,R.bounds.height),en.label=14;case 14:if(R instanceof Mh&&(Ot=Math.min(R.bounds.width,R.bounds.height),R.type===Du?R.checked&&(this.ctx.save(),this.path([new Gs(R.bounds.left+Ot*.39363,R.bounds.top+Ot*.79),new Gs(R.bounds.left+Ot*.16,R.bounds.top+Ot*.5549),new Gs(R.bounds.left+Ot*.27347,R.bounds.top+Ot*.44071),new Gs(R.bounds.left+Ot*.39694,R.bounds.top+Ot*.5649),new Gs(R.bounds.left+Ot*.72983,R.bounds.top+Ot*.23),new Gs(R.bounds.left+Ot*.84,R.bounds.top+Ot*.34085),new Gs(R.bounds.left+Ot*.39363,R.bounds.top+Ot*.79)]),this.ctx.fillStyle=Sr(Zf),this.ctx.fill(),this.ctx.restore()):R.type===Qu&&R.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(R.bounds.left+Ot/2,R.bounds.top+Ot/2,Ot/4,0,Math.PI*2,!0),this.ctx.fillStyle=Sr(Zf),this.ctx.fill(),this.ctx.restore())),Xh(R)&&R.value.length){switch(ns=this.createFontStyle(fe),nr=ns[0],Xs=ns[1],Rs=this.fontMetrics.getMetrics(nr,Xs).baseline,this.ctx.font=nr,this.ctx.fillStyle=Sr(fe.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=qx(R.styles.textAlign),_n=vl(R),ks=0,R.styles.textAlign){case 1:ks+=_n.width/2;break;case 2:ks+=_n.width;break}jn=_n.add(ks,0,0,-_n.height/2+1),this.ctx.save(),this.path([new Gs(_n.left,_n.top),new Gs(_n.left+_n.width,_n.top),new Gs(_n.left+_n.width,_n.top+_n.height),new Gs(_n.left,_n.top+_n.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new md(R.value,jn),fe.letterSpacing,Rs),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ct(R.styles.display,2048))return[3,20];if(R.styles.listStyleImage===null)return[3,19];if(an=R.styles.listStyleImage,an.type!==0)return[3,18];rn=void 0,or=an.url,en.label=15;case 15:return en.trys.push([15,17,,18]),[4,this.context.cache.match(or)];case 16:return rn=en.sent(),this.ctx.drawImage(rn,R.bounds.left-(rn.width+10),R.bounds.top),[3,18];case 17:return en.sent(),this.context.logger.error("Error loading list-style-image "+or),[3,18];case 18:return[3,20];case 19:O.listValue&&R.styles.listStyleType!==-1&&(nr=this.createFontStyle(fe)[0],this.ctx.font=nr,this.ctx.fillStyle=Sr(fe.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",_n=new d(R.bounds.left,R.bounds.top+ir(R.styles.paddingTop,R.bounds.width),R.bounds.width,hl(fe.lineHeight,fe.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new md(O.listValue,_n),fe.letterSpacing,hl(fe.lineHeight,fe.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),en.label=20;case 20:return[2]}})})},C.prototype.renderStackContent=function(O){return c(this,void 0,void 0,function(){var R,J,an,fe,Fe,an,qe,Ge,an,mt,Et,an,Ot,ns,an,Xs,Rs,an,ks,jn,an;return A(this,function(rn){switch(rn.label){case 0:if(Ct(O.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(O.element)];case 1:rn.sent(),R=0,J=O.negativeZIndex,rn.label=2;case 2:return R<J.length?(an=J[R],[4,this.renderStack(an)]):[3,5];case 3:rn.sent(),rn.label=4;case 4:return R++,[3,2];case 5:return[4,this.renderNodeContent(O.element)];case 6:rn.sent(),fe=0,Fe=O.nonInlineLevel,rn.label=7;case 7:return fe<Fe.length?(an=Fe[fe],[4,this.renderNode(an)]):[3,10];case 8:rn.sent(),rn.label=9;case 9:return fe++,[3,7];case 10:qe=0,Ge=O.nonPositionedFloats,rn.label=11;case 11:return qe<Ge.length?(an=Ge[qe],[4,this.renderStack(an)]):[3,14];case 12:rn.sent(),rn.label=13;case 13:return qe++,[3,11];case 14:mt=0,Et=O.nonPositionedInlineLevel,rn.label=15;case 15:return mt<Et.length?(an=Et[mt],[4,this.renderStack(an)]):[3,18];case 16:rn.sent(),rn.label=17;case 17:return mt++,[3,15];case 18:Ot=0,ns=O.inlineLevel,rn.label=19;case 19:return Ot<ns.length?(an=ns[Ot],[4,this.renderNode(an)]):[3,22];case 20:rn.sent(),rn.label=21;case 21:return Ot++,[3,19];case 22:Xs=0,Rs=O.zeroOrAutoZIndexOrTransformedOrOpacity,rn.label=23;case 23:return Xs<Rs.length?(an=Rs[Xs],[4,this.renderStack(an)]):[3,26];case 24:rn.sent(),rn.label=25;case 25:return Xs++,[3,23];case 26:ks=0,jn=O.positiveZIndex,rn.label=27;case 27:return ks<jn.length?(an=jn[ks],[4,this.renderStack(an)]):[3,30];case 28:rn.sent(),rn.label=29;case 29:return ks++,[3,27];case 30:return[2]}})})},C.prototype.mask=function(O){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(O.slice(0).reverse()),this.ctx.closePath()},C.prototype.path=function(O){this.ctx.beginPath(),this.formatPath(O),this.ctx.closePath()},C.prototype.formatPath=function(O){var R=this;O.forEach(function(J,fe){var Fe=Do(J)?J.start:J;fe===0?R.ctx.moveTo(Fe.x,Fe.y):R.ctx.lineTo(Fe.x,Fe.y),Do(J)&&R.ctx.bezierCurveTo(J.startControl.x,J.startControl.y,J.endControl.x,J.endControl.y,J.end.x,J.end.y)})},C.prototype.renderRepeat=function(O,R,J,fe){this.path(O),this.ctx.fillStyle=R,this.ctx.translate(J,fe),this.ctx.fill(),this.ctx.translate(-J,-fe)},C.prototype.resizeImage=function(O,R,J){var fe;if(O.width===R&&O.height===J)return O;var Fe=(fe=this.canvas.ownerDocument)!==null&&fe!==void 0?fe:document,qe=Fe.createElement("canvas");qe.width=Math.max(1,R),qe.height=Math.max(1,J);var Ge=qe.getContext("2d");return Ge.drawImage(O,0,0,O.width,O.height,0,0,R,J),qe},C.prototype.renderBackgroundImage=function(O){return c(this,void 0,void 0,function(){var R,J,fe,Fe,qe,Ge;return A(this,function(mt){switch(mt.label){case 0:R=O.styles.backgroundImage.length-1,J=function(Et){var Ot,ns,Xs,xi,so,oo,Aa,to,Er,Rs,xi,so,oo,Aa,to,ks,jn,an,rn,or,nr,_n,en,pr,Er,Bn,xi,ba,Mo,Aa,to,yo,so,oo,bl,$l,Hc,Nd,Bd,jl,zc,Kc;return A(this,function(GA){switch(GA.label){case 0:if(Et.type!==0)return[3,5];Ot=void 0,ns=Et.url,GA.label=1;case 1:return GA.trys.push([1,3,,4]),[4,fe.context.cache.match(ns)];case 2:return Ot=GA.sent(),[3,4];case 3:return GA.sent(),fe.context.logger.error("Error loading background-image "+ns),[3,4];case 4:return Ot&&(Xs=Yu(O,R,[Ot.width,Ot.height,Ot.width/Ot.height]),xi=Xs[0],so=Xs[1],oo=Xs[2],Aa=Xs[3],to=Xs[4],Er=fe.ctx.createPattern(fe.resizeImage(Ot,Aa,to),"repeat"),fe.renderRepeat(xi,Er,so,oo)),[3,6];case 5:wA(Et)?(Rs=Yu(O,R,[null,null,null]),xi=Rs[0],so=Rs[1],oo=Rs[2],Aa=Rs[3],to=Rs[4],ks=fa(Et.angle,Aa,to),jn=ks[0],an=ks[1],rn=ks[2],or=ks[3],nr=ks[4],_n=document.createElement("canvas"),_n.width=Aa,_n.height=to,en=_n.getContext("2d"),pr=en.createLinearGradient(an,or,rn,nr),Dr(Et.stops,jn).forEach(function(eh){return pr.addColorStop(eh.stop,Sr(eh.color))}),en.fillStyle=pr,en.fillRect(0,0,Aa,to),Aa>0&&to>0&&(Er=fe.ctx.createPattern(_n,"repeat"),fe.renderRepeat(xi,Er,so,oo))):zd(Et)&&(Bn=Yu(O,R,[null,null,null]),xi=Bn[0],ba=Bn[1],Mo=Bn[2],Aa=Bn[3],to=Bn[4],yo=Et.position.length===0?[Ec]:Et.position,so=ir(yo[0],Aa),oo=ir(yo[yo.length-1],to),bl=nl(Et,so,oo,Aa,to),$l=bl[0],Hc=bl[1],$l>0&&Hc>0&&(Nd=fe.ctx.createRadialGradient(ba+so,Mo+oo,0,ba+so,Mo+oo,$l),Dr(Et.stops,$l*2).forEach(function(eh){return Nd.addColorStop(eh.stop,Sr(eh.color))}),fe.path(xi),fe.ctx.fillStyle=Nd,$l!==Hc?(Bd=O.bounds.left+.5*O.bounds.width,jl=O.bounds.top+.5*O.bounds.height,zc=Hc/$l,Kc=1/zc,fe.ctx.save(),fe.ctx.translate(Bd,jl),fe.ctx.transform(1,0,0,zc,0,0),fe.ctx.translate(-Bd,-jl),fe.ctx.fillRect(ba,Kc*(Mo-jl)+jl,Aa,to*Kc),fe.ctx.restore()):fe.ctx.fill())),GA.label=6;case 6:return R--,[2]}})},fe=this,Fe=0,qe=O.styles.backgroundImage.slice(0).reverse(),mt.label=1;case 1:return Fe<qe.length?(Ge=qe[Fe],[5,J(Ge)]):[3,4];case 2:mt.sent(),mt.label=3;case 3:return Fe++,[3,1];case 4:return[2]}})})},C.prototype.renderSolidBorder=function(O,R,J){return c(this,void 0,void 0,function(){return A(this,function(fe){return this.path(og(J,R)),this.ctx.fillStyle=Sr(O),this.ctx.fill(),[2]})})},C.prototype.renderDoubleBorder=function(O,R,J,fe){return c(this,void 0,void 0,function(){var Fe,qe;return A(this,function(Ge){switch(Ge.label){case 0:return R<3?[4,this.renderSolidBorder(O,J,fe)]:[3,2];case 1:return Ge.sent(),[2];case 2:return Fe=Yh(fe,J),this.path(Fe),this.ctx.fillStyle=Sr(O),this.ctx.fill(),qe=Qo(fe,J),this.path(qe),this.ctx.fill(),[2]}})})},C.prototype.renderNodeBackgroundAndBorders=function(O){return c(this,void 0,void 0,function(){var R,J,fe,Fe,qe,Ge,mt,Et,Ot=this;return A(this,function(ns){switch(ns.label){case 0:return this.applyEffects(O.getEffects(2)),R=O.container.styles,J=!Ti(R.backgroundColor)||R.backgroundImage.length,fe=[{style:R.borderTopStyle,color:R.borderTopColor,width:R.borderTopWidth},{style:R.borderRightStyle,color:R.borderRightColor,width:R.borderRightWidth},{style:R.borderBottomStyle,color:R.borderBottomColor,width:R.borderBottomWidth},{style:R.borderLeftStyle,color:R.borderLeftColor,width:R.borderLeftWidth}],Fe=Ag(Kl(R.backgroundClip,0),O.curves),J||R.boxShadow.length?(this.ctx.save(),this.path(Fe),this.ctx.clip(),Ti(R.backgroundColor)||(this.ctx.fillStyle=Sr(R.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(O.container)]):[3,2];case 1:ns.sent(),this.ctx.restore(),R.boxShadow.slice(0).reverse().forEach(function(Xs){Ot.ctx.save();var Rs=sA(O.curves),ks=Xs.inset?0:Zu,jn=za(Rs,-ks+(Xs.inset?1:-1)*Xs.spread.number,(Xs.inset?1:-1)*Xs.spread.number,Xs.spread.number*(Xs.inset?-2:2),Xs.spread.number*(Xs.inset?-2:2));Xs.inset?(Ot.path(Rs),Ot.ctx.clip(),Ot.mask(jn)):(Ot.mask(Rs),Ot.ctx.clip(),Ot.path(jn)),Ot.ctx.shadowOffsetX=Xs.offsetX.number+ks,Ot.ctx.shadowOffsetY=Xs.offsetY.number,Ot.ctx.shadowColor=Sr(Xs.color),Ot.ctx.shadowBlur=Xs.blur.number,Ot.ctx.fillStyle=Xs.inset?Sr(Xs.color):"rgba(0,0,0,1)",Ot.ctx.fill(),Ot.ctx.restore()}),ns.label=2;case 2:qe=0,Ge=0,mt=fe,ns.label=3;case 3:return Ge<mt.length?(Et=mt[Ge],Et.style!==0&&!Ti(Et.color)&&Et.width>0?Et.style!==2?[3,5]:[4,this.renderDashedDottedBorder(Et.color,Et.width,qe,O.curves,2)]:[3,11]):[3,13];case 4:return ns.sent(),[3,11];case 5:return Et.style!==3?[3,7]:[4,this.renderDashedDottedBorder(Et.color,Et.width,qe,O.curves,3)];case 6:return ns.sent(),[3,11];case 7:return Et.style!==4?[3,9]:[4,this.renderDoubleBorder(Et.color,Et.width,qe,O.curves)];case 8:return ns.sent(),[3,11];case 9:return[4,this.renderSolidBorder(Et.color,qe,O.curves)];case 10:ns.sent(),ns.label=11;case 11:qe++,ns.label=12;case 12:return Ge++,[3,3];case 13:return[2]}})})},C.prototype.renderDashedDottedBorder=function(O,R,J,fe,Fe){return c(this,void 0,void 0,function(){var qe,Ge,mt,Et,Ot,ns,Xs,Rs,ks,jn,an,rn,or,nr,_n,en,_n,en;return A(this,function(pr){return this.ctx.save(),qe=zl(fe,J),Ge=og(fe,J),Fe===2&&(this.path(Ge),this.ctx.clip()),Do(Ge[0])?(mt=Ge[0].start.x,Et=Ge[0].start.y):(mt=Ge[0].x,Et=Ge[0].y),Do(Ge[1])?(Ot=Ge[1].end.x,ns=Ge[1].end.y):(Ot=Ge[1].x,ns=Ge[1].y),J===0||J===2?Xs=Math.abs(mt-Ot):Xs=Math.abs(Et-ns),this.ctx.beginPath(),Fe===3?this.formatPath(qe):this.formatPath(Ge.slice(0,2)),Rs=R<3?R*3:R*2,ks=R<3?R*2:R,Fe===3&&(Rs=R,ks=R),jn=!0,Xs<=Rs*2?jn=!1:Xs<=Rs*2+ks?(an=Xs/(2*Rs+ks),Rs*=an,ks*=an):(rn=Math.floor((Xs+ks)/(Rs+ks)),or=(Xs-rn*Rs)/(rn-1),nr=(Xs-(rn+1)*Rs)/rn,ks=nr<=0||Math.abs(ks-or)<Math.abs(ks-nr)?or:nr),jn&&(Fe===3?this.ctx.setLineDash([0,Rs+ks]):this.ctx.setLineDash([Rs,ks])),Fe===3?(this.ctx.lineCap="round",this.ctx.lineWidth=R):this.ctx.lineWidth=R*2+1.1,this.ctx.strokeStyle=Sr(O),this.ctx.stroke(),this.ctx.setLineDash([]),Fe===2&&(Do(Ge[0])&&(_n=Ge[3],en=Ge[0],this.ctx.beginPath(),this.formatPath([new Gs(_n.end.x,_n.end.y),new Gs(en.start.x,en.start.y)]),this.ctx.stroke()),Do(Ge[1])&&(_n=Ge[1],en=Ge[2],this.ctx.beginPath(),this.formatPath([new Gs(_n.end.x,_n.end.y),new Gs(en.start.x,en.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},C.prototype.render=function(O){return c(this,void 0,void 0,function(){var R;return A(this,function(J){switch(J.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Sr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),R=ig(O),[4,this.renderStack(R)];case 1:return J.sent(),this.applyEffects([]),[2,this.canvas]}})})},C})(wp),Xh=function(T){return T instanceof Ph||T instanceof Hm?!0:T instanceof Mh&&T.type!==Qu&&T.type!==Du},Ag=function(T,C){switch(T){case 0:return sA(C);case 2:return sg(C);case 1:default:return xl(C)}},qx=function(T){switch(T){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Gx=["-apple-system","system-ui"],ta=function(T){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?T.filter(function(C){return Gx.indexOf(C)===-1}):T},va=(function(T){r(C,T);function C(O,R){var J=T.call(this,O,R)||this;return J.canvas=R.canvas?R.canvas:document.createElement("canvas"),J.ctx=J.canvas.getContext("2d"),J.options=R,J.canvas.width=Math.floor(R.width*R.scale),J.canvas.height=Math.floor(R.height*R.scale),J.canvas.style.width=R.width+"px",J.canvas.style.height=R.height+"px",J.ctx.scale(J.options.scale,J.options.scale),J.ctx.translate(-R.x,-R.y),J.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+R.width+"x"+R.height+" at "+R.x+","+R.y+") with scale "+R.scale),J}return C.prototype.render=function(O){return c(this,void 0,void 0,function(){var R,J;return A(this,function(fe){switch(fe.label){case 0:return R=MA(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,O),[4,vr(R)];case 1:return J=fe.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Sr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(J,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},C})(wp),vr=function(T){return new Promise(function(C,O){var R=new Image;R.onload=function(){C(R)},R.onerror=O,R.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(T))})},Cr=(function(){function T(C){var O=C.id,R=C.enabled;this.id=O,this.enabled=R,this.start=Date.now()}return T.prototype.debug=function(){for(var C=[],O=0;O<arguments.length;O++)C[O]=arguments[O];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,u([this.id,this.getTime()+"ms"],C)):this.info.apply(this,C))},T.prototype.getTime=function(){return Date.now()-this.start},T.prototype.info=function(){for(var C=[],O=0;O<arguments.length;O++)C[O]=arguments[O];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,u([this.id,this.getTime()+"ms"],C))},T.prototype.warn=function(){for(var C=[],O=0;O<arguments.length;O++)C[O]=arguments[O];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,u([this.id,this.getTime()+"ms"],C)):this.info.apply(this,C))},T.prototype.error=function(){for(var C=[],O=0;O<arguments.length;O++)C[O]=arguments[O];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,u([this.id,this.getTime()+"ms"],C)):this.info.apply(this,C))},T.instances={},T})(),da=(function(){function T(C,O){var R;this.windowBounds=O,this.instanceName="#"+T.instanceCount++,this.logger=new Cr({id:this.instanceName,enabled:C.logging}),this.cache=(R=C.cache)!==null&&R!==void 0?R:new qu(this,C)}return T.instanceCount=1,T})(),al=function(T,C){return C===void 0&&(C={}),Sd(T,C)};typeof window<"u"&&Vu.setContext(window);var Sd=function(T,C){return c(void 0,void 0,void 0,function(){var O,R,J,fe,Fe,qe,Ge,mt,Et,Ot,ns,Xs,Rs,ks,jn,an,rn,or,nr,_n,pr,en,pr,Er,Bn,xi,ba,Mo,Aa,to,yo,so,oo,bl,$l,Hc,Nd,Bd,jl,zc;return A(this,function(Kc){switch(Kc.label){case 0:if(!T||typeof T!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(O=T.ownerDocument,!O)throw new Error("Element is not attached to a Document");if(R=O.defaultView,!R)throw new Error("Document is not attached to a Window");return J={allowTaint:(Er=C.allowTaint)!==null&&Er!==void 0?Er:!1,imageTimeout:(Bn=C.imageTimeout)!==null&&Bn!==void 0?Bn:15e3,proxy:C.proxy,useCORS:(xi=C.useCORS)!==null&&xi!==void 0?xi:!1},fe=i({logging:(ba=C.logging)!==null&&ba!==void 0?ba:!0,cache:C.cache},J),Fe={windowWidth:(Mo=C.windowWidth)!==null&&Mo!==void 0?Mo:R.innerWidth,windowHeight:(Aa=C.windowHeight)!==null&&Aa!==void 0?Aa:R.innerHeight,scrollX:(to=C.scrollX)!==null&&to!==void 0?to:R.pageXOffset,scrollY:(yo=C.scrollY)!==null&&yo!==void 0?yo:R.pageYOffset},qe=new d(Fe.scrollX,Fe.scrollY,Fe.windowWidth,Fe.windowHeight),Ge=new da(fe,qe),mt=(so=C.foreignObjectRendering)!==null&&so!==void 0?so:!1,Et={allowTaint:(oo=C.allowTaint)!==null&&oo!==void 0?oo:!1,onclone:C.onclone,ignoreElements:C.ignoreElements,inlineImages:mt,copyStyles:mt},Ge.logger.debug("Starting document clone with size "+qe.width+"x"+qe.height+" scrolled to "+-qe.left+","+-qe.top),Ot=new up(Ge,T,Et),ns=Ot.clonedReferenceElement,ns?[4,Ot.toIFrame(O,qe)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Xs=Kc.sent(),Rs=Hh(ns)||Vm(ns)?o(ns.ownerDocument):h(Ge,ns),ks=Rs.width,jn=Rs.height,an=Rs.left,rn=Rs.top,or=qA(Ge,ns,C.backgroundColor),nr={canvas:C.canvas,backgroundColor:or,scale:($l=(bl=C.scale)!==null&&bl!==void 0?bl:R.devicePixelRatio)!==null&&$l!==void 0?$l:1,x:((Hc=C.x)!==null&&Hc!==void 0?Hc:0)+an,y:((Nd=C.y)!==null&&Nd!==void 0?Nd:0)+rn,width:(Bd=C.width)!==null&&Bd!==void 0?Bd:Math.ceil(ks),height:(jl=C.height)!==null&&jl!==void 0?jl:Math.ceil(jn)},mt?(Ge.logger.debug("Document cloned, using foreign object rendering"),pr=new va(Ge,nr),[4,pr.render(ns)]):[3,3];case 2:return _n=Kc.sent(),[3,5];case 3:return Ge.logger.debug("Document cloned, element located at "+an+","+rn+" with size "+ks+"x"+jn+" using computed rendering"),Ge.logger.debug("Starting DOM parsing"),en=sp(Ge,ns),or===en.styles.backgroundColor&&(en.styles.backgroundColor=Ga.TRANSPARENT),Ge.logger.debug("Starting renderer for element at "+nr.x+","+nr.y+" with size "+nr.width+"x"+nr.height),pr=new dg(Ge,nr),[4,pr.render(en)];case 4:_n=Kc.sent(),Kc.label=5;case 5:return(!((zc=C.removeContainer)!==null&&zc!==void 0)||zc)&&(up.destroy(Xs)||Ge.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),Ge.logger.debug("Finished rendering"),[2,_n]}})})},qA=function(T,C,O){var R=C.ownerDocument,J=R.documentElement?tl(T,getComputedStyle(R.documentElement).backgroundColor):Ga.TRANSPARENT,fe=R.body?tl(T,getComputedStyle(R.body).backgroundColor):Ga.TRANSPARENT,Fe=typeof O=="string"?tl(T,O):O===null?Ga.TRANSPARENT:4294967295;return C===R.documentElement?Ti(J)?Ti(fe)?Fe:fe:J:Fe};return al}))})(Ey)),Ey.exports}/*!
 * html2pdf.js v0.12.1
 * Copyright (c) 2025 Erik Koopmans
 * Released under the MIT License.
 */var GB;function Dq(){return GB||(GB=1,(function(t,s){(function(r,i){t.exports=i(Oq,Lq())})(self,function(n,r){return(function(){var i={"./node_modules/core-js/internals/a-callable.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-callable.js"),y=o("./node_modules/core-js/internals/try-to-string.js"),p=TypeError;d.exports=function(j){if(m(j))return j;throw new p(y(j)+" is not a function")}}),"./node_modules/core-js/internals/a-constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-constructor.js"),y=o("./node_modules/core-js/internals/try-to-string.js"),p=TypeError;d.exports=function(j){if(m(j))return j;throw new p(y(j)+" is not a constructor")}}),"./node_modules/core-js/internals/a-possible-prototype.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-possible-prototype.js"),y=String,p=TypeError;d.exports=function(j){if(m(j))return j;throw new p("Can't set "+y(j)+" as a prototype")}}),"./node_modules/core-js/internals/a-set.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/set-helpers.js").has;d.exports=function(y){return m(y),y}}),"./node_modules/core-js/internals/add-to-unscopables.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/well-known-symbol.js"),y=o("./node_modules/core-js/internals/object-create.js"),p=o("./node_modules/core-js/internals/object-define-property.js").f,j=m("unscopables"),b=Array.prototype;b[j]===void 0&&p(b,j,{configurable:!0,value:y(null)}),d.exports=function(w){b[j][w]=!0}}),"./node_modules/core-js/internals/an-instance.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/object-is-prototype-of.js"),y=TypeError;d.exports=function(p,j){if(m(j,p))return p;throw new y("Incorrect invocation")}}),"./node_modules/core-js/internals/an-object.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-object.js"),y=String,p=TypeError;d.exports=function(j){if(m(j))return j;throw new p(y(j)+" is not an object")}}),"./node_modules/core-js/internals/array-buffer-non-extensible.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=m(function(){if(typeof ArrayBuffer=="function"){var y=new ArrayBuffer(8);Object.isExtensible(y)&&Object.defineProperty(y,"a",{value:8})}})}),"./node_modules/core-js/internals/array-for-each.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/array-iteration.js").forEach,y=o("./node_modules/core-js/internals/array-method-is-strict.js"),p=y("forEach");d.exports=p?[].forEach:function(b){return m(this,b,arguments.length>1?arguments[1]:void 0)}}),"./node_modules/core-js/internals/array-from.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-bind-context.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-object.js"),j=o("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),b=o("./node_modules/core-js/internals/is-array-iterator-method.js"),w=o("./node_modules/core-js/internals/is-constructor.js"),B=o("./node_modules/core-js/internals/length-of-array-like.js"),U=o("./node_modules/core-js/internals/create-property.js"),Q=o("./node_modules/core-js/internals/get-iterator.js"),k=o("./node_modules/core-js/internals/get-iterator-method.js"),K=Array;d.exports=function(q){var G=p(q),W=w(this),he=arguments.length,Z=he>1?arguments[1]:void 0,ie=Z!==void 0;ie&&(Z=m(Z,he>2?arguments[2]:void 0));var ce=k(G),ae=0,de,se,re,te,be,He;if(ce&&!(this===K&&b(ce)))for(se=W?new this:[],te=Q(G,ce),be=te.next;!(re=y(be,te)).done;ae++)He=ie?j(te,Z,[re.value,ae],!0):re.value,U(se,ae,He);else for(de=B(G),se=W?new this(de):K(de);de>ae;ae++)He=ie?Z(G[ae],ae):G[ae],U(se,ae,He);return se.length=ae,se}}),"./node_modules/core-js/internals/array-includes.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-indexed-object.js"),y=o("./node_modules/core-js/internals/to-absolute-index.js"),p=o("./node_modules/core-js/internals/length-of-array-like.js"),j=function(b){return function(w,B,U){var Q=m(w),k=p(Q);if(k===0)return!b&&-1;var K=y(U,k),ee;if(b&&B!==B){for(;k>K;)if(ee=Q[K++],ee!==ee)return!0}else for(;k>K;K++)if((b||K in Q)&&Q[K]===B)return b||K||0;return!b&&-1}};d.exports={includes:j(!0),indexOf:j(!1)}}),"./node_modules/core-js/internals/array-iteration.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-bind-context.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/indexed-object.js"),j=o("./node_modules/core-js/internals/to-object.js"),b=o("./node_modules/core-js/internals/length-of-array-like.js"),w=o("./node_modules/core-js/internals/array-species-create.js"),B=y([].push),U=function(Q){var k=Q===1,K=Q===2,ee=Q===3,q=Q===4,G=Q===6,W=Q===7,he=Q===5||G;return function(Z,ie,ce,ae){for(var de=j(Z),se=p(de),re=b(se),te=m(ie,ce),be=0,He=ae||w,pe=k?He(Z,re):K||W?He(Z,0):void 0,Y,me;re>be;be++)if((he||be in se)&&(Y=se[be],me=te(Y,be,de),Q))if(k)pe[be]=me;else if(me)switch(Q){case 3:return!0;case 5:return Y;case 6:return be;case 2:B(pe,Y)}else switch(Q){case 4:return!1;case 7:B(pe,Y)}return G?-1:ee||q?q:pe}};d.exports={forEach:U(0),map:U(1),filter:U(2),some:U(3),every:U(4),find:U(5),findIndex:U(6),filterReject:U(7)}}),"./node_modules/core-js/internals/array-method-has-species-support.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/well-known-symbol.js"),p=o("./node_modules/core-js/internals/environment-v8-version.js"),j=y("species");d.exports=function(b){return p>=51||!m(function(){var w=[],B=w.constructor={};return B[j]=function(){return{foo:1}},w[b](Boolean).foo!==1})}}),"./node_modules/core-js/internals/array-method-is-strict.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=function(y,p){var j=[][y];return!!j&&m(function(){j.call(null,p||function(){return 1},1)})}}),"./node_modules/core-js/internals/array-slice.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js");d.exports=m([].slice)}),"./node_modules/core-js/internals/array-species-constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-array.js"),y=o("./node_modules/core-js/internals/is-constructor.js"),p=o("./node_modules/core-js/internals/is-object.js"),j=o("./node_modules/core-js/internals/well-known-symbol.js"),b=j("species"),w=Array;d.exports=function(B){var U;return m(B)&&(U=B.constructor,y(U)&&(U===w||m(U.prototype))?U=void 0:p(U)&&(U=U[b],U===null&&(U=void 0))),U===void 0?w:U}}),"./node_modules/core-js/internals/array-species-create.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/array-species-constructor.js");d.exports=function(y,p){return new(m(y))(p===0?0:p)}}),"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/an-object.js"),y=o("./node_modules/core-js/internals/iterator-close.js");d.exports=function(p,j,b,w){try{return w?j(m(b)[0],b[1]):j(b)}catch(B){y(p,"throw",B)}}}),"./node_modules/core-js/internals/check-correctness-of-iteration.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/well-known-symbol.js"),y=m("iterator"),p=!1;try{var j=0,b={next:function(){return{done:!!j++}},return:function(){p=!0}};b[y]=function(){return this},Array.from(b,function(){throw 2})}catch{}d.exports=function(w,B){try{if(!B&&!p)return!1}catch{return!1}var U=!1;try{var Q={};Q[y]=function(){return{next:function(){return{done:U=!0}}}},w(Q)}catch{}return U}}),"./node_modules/core-js/internals/classof-raw.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=m({}.toString),p=m("".slice);d.exports=function(j){return p(y(j),8,-1)}}),"./node_modules/core-js/internals/classof.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-string-tag-support.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/classof-raw.js"),j=o("./node_modules/core-js/internals/well-known-symbol.js"),b=j("toStringTag"),w=Object,B=p((function(){return arguments})())==="Arguments",U=function(Q,k){try{return Q[k]}catch{}};d.exports=m?p:function(Q){var k,K,ee;return Q===void 0?"Undefined":Q===null?"Null":typeof(K=U(k=w(Q),b))=="string"?K:B?p(k):(ee=p(k))==="Object"&&y(k.callee)?"Arguments":ee}}),"./node_modules/core-js/internals/collection-strong.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/object-create.js"),y=o("./node_modules/core-js/internals/define-built-in-accessor.js"),p=o("./node_modules/core-js/internals/define-built-ins.js"),j=o("./node_modules/core-js/internals/function-bind-context.js"),b=o("./node_modules/core-js/internals/an-instance.js"),w=o("./node_modules/core-js/internals/is-null-or-undefined.js"),B=o("./node_modules/core-js/internals/iterate.js"),U=o("./node_modules/core-js/internals/iterator-define.js"),Q=o("./node_modules/core-js/internals/create-iter-result-object.js"),k=o("./node_modules/core-js/internals/set-species.js"),K=o("./node_modules/core-js/internals/descriptors.js"),ee=o("./node_modules/core-js/internals/internal-metadata.js").fastKey,q=o("./node_modules/core-js/internals/internal-state.js"),G=q.set,W=q.getterFor;d.exports={getConstructor:function(he,Z,ie,ce){var ae=he(function(be,He){b(be,de),G(be,{type:Z,index:m(null),first:null,last:null,size:0}),K||(be.size=0),w(He)||B(He,be[ce],{that:be,AS_ENTRIES:ie})}),de=ae.prototype,se=W(Z),re=function(be,He,pe){var Y=se(be),me=te(be,He),Se,je;return me?me.value=pe:(Y.last=me={index:je=ee(He,!0),key:He,value:pe,previous:Se=Y.last,next:null,removed:!1},Y.first||(Y.first=me),Se&&(Se.next=me),K?Y.size++:be.size++,je!=="F"&&(Y.index[je]=me)),be},te=function(be,He){var pe=se(be),Y=ee(He),me;if(Y!=="F")return pe.index[Y];for(me=pe.first;me;me=me.next)if(me.key===He)return me};return p(de,{clear:function(){for(var He=this,pe=se(He),Y=pe.first;Y;)Y.removed=!0,Y.previous&&(Y.previous=Y.previous.next=null),Y=Y.next;pe.first=pe.last=null,pe.index=m(null),K?pe.size=0:He.size=0},delete:function(be){var He=this,pe=se(He),Y=te(He,be);if(Y){var me=Y.next,Se=Y.previous;delete pe.index[Y.index],Y.removed=!0,Se&&(Se.next=me),me&&(me.previous=Se),pe.first===Y&&(pe.first=me),pe.last===Y&&(pe.last=Se),K?pe.size--:He.size--}return!!Y},forEach:function(He){for(var pe=se(this),Y=j(He,arguments.length>1?arguments[1]:void 0),me;me=me?me.next:pe.first;)for(Y(me.value,me.key,this);me&&me.removed;)me=me.previous},has:function(He){return!!te(this,He)}}),p(de,ie?{get:function(He){var pe=te(this,He);return pe&&pe.value},set:function(He,pe){return re(this,He===0?0:He,pe)}}:{add:function(He){return re(this,He=He===0?0:He,He)}}),K&&y(de,"size",{configurable:!0,get:function(){return se(this).size}}),ae},setStrong:function(he,Z,ie){var ce=Z+" Iterator",ae=W(Z),de=W(ce);U(he,Z,function(se,re){G(this,{type:ce,target:se,state:ae(se),kind:re,last:null})},function(){for(var se=de(this),re=se.kind,te=se.last;te&&te.removed;)te=te.previous;return!se.target||!(se.last=te=te?te.next:se.state.first)?(se.target=null,Q(void 0,!0)):Q(re==="keys"?te.key:re==="values"?te.value:[te.key,te.value],!1)},ie?"entries":"values",!ie,!0),k(Z)}}}),"./node_modules/core-js/internals/collection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/function-uncurry-this.js"),j=o("./node_modules/core-js/internals/is-forced.js"),b=o("./node_modules/core-js/internals/define-built-in.js"),w=o("./node_modules/core-js/internals/internal-metadata.js"),B=o("./node_modules/core-js/internals/iterate.js"),U=o("./node_modules/core-js/internals/an-instance.js"),Q=o("./node_modules/core-js/internals/is-callable.js"),k=o("./node_modules/core-js/internals/is-null-or-undefined.js"),K=o("./node_modules/core-js/internals/is-object.js"),ee=o("./node_modules/core-js/internals/fails.js"),q=o("./node_modules/core-js/internals/check-correctness-of-iteration.js"),G=o("./node_modules/core-js/internals/set-to-string-tag.js"),W=o("./node_modules/core-js/internals/inherit-if-required.js");d.exports=function(he,Z,ie){var ce=he.indexOf("Map")!==-1,ae=he.indexOf("Weak")!==-1,de=ce?"set":"add",se=y[he],re=se&&se.prototype,te=se,be={},He=function(ge){var ye=p(re[ge]);b(re,ge,ge==="add"?function(Ne){return ye(this,Ne===0?0:Ne),this}:ge==="delete"?function(we){return ae&&!K(we)?!1:ye(this,we===0?0:we)}:ge==="get"?function(Ne){return ae&&!K(Ne)?void 0:ye(this,Ne===0?0:Ne)}:ge==="has"?function(Ne){return ae&&!K(Ne)?!1:ye(this,Ne===0?0:Ne)}:function(Ne,ke){return ye(this,Ne===0?0:Ne,ke),this})},pe=j(he,!Q(se)||!(ae||re.forEach&&!ee(function(){new se().entries().next()})));if(pe)te=ie.getConstructor(Z,he,ce,de),w.enable();else if(j(he,!0)){var Y=new te,me=Y[de](ae?{}:-0,1)!==Y,Se=ee(function(){Y.has(1)}),je=q(function(ge){new se(ge)}),Le=!ae&&ee(function(){for(var ge=new se,ye=5;ye--;)ge[de](ye,ye);return!ge.has(-0)});je||(te=Z(function(ge,ye){U(ge,re);var we=W(new se,ge,te);return k(ye)||B(ye,we[de],{that:we,AS_ENTRIES:ce}),we}),te.prototype=re,re.constructor=te),(Se||Le)&&(He("delete"),He("has"),ce&&He("get")),(Le||me)&&He(de),ae&&re.clear&&delete re.clear}return be[he]=te,m({global:!0,constructor:!0,forced:te!==se},be),G(te,he),ae||ie.setStrong(te,he,ce),te}}),"./node_modules/core-js/internals/copy-constructor-properties.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/has-own-property.js"),y=o("./node_modules/core-js/internals/own-keys.js"),p=o("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),j=o("./node_modules/core-js/internals/object-define-property.js");d.exports=function(b,w,B){for(var U=y(w),Q=j.f,k=p.f,K=0;K<U.length;K++){var ee=U[K];!m(b,ee)&&!(B&&m(B,ee))&&Q(b,ee,k(w,ee))}}}),"./node_modules/core-js/internals/correct-prototype-getter.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=!m(function(){function y(){}return y.prototype.constructor=null,Object.getPrototypeOf(new y)!==y.prototype})}),"./node_modules/core-js/internals/create-html.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/require-object-coercible.js"),p=o("./node_modules/core-js/internals/to-string.js"),j=/"/g,b=m("".replace);d.exports=function(w,B,U,Q){var k=p(y(w)),K="<"+B;return U!==""&&(K+=" "+U+'="'+b(p(Q),j,"&quot;")+'"'),K+">"+k+"</"+B+">"}}),"./node_modules/core-js/internals/create-iter-result-object.js":(function(d){d.exports=function(h,o){return{value:h,done:o}}}),"./node_modules/core-js/internals/create-non-enumerable-property.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/object-define-property.js"),p=o("./node_modules/core-js/internals/create-property-descriptor.js");d.exports=m?function(j,b,w){return y.f(j,b,p(1,w))}:function(j,b,w){return j[b]=w,j}}),"./node_modules/core-js/internals/create-property-descriptor.js":(function(d){d.exports=function(h,o){return{enumerable:!(h&1),configurable:!(h&2),writable:!(h&4),value:o}}}),"./node_modules/core-js/internals/create-property.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/object-define-property.js"),p=o("./node_modules/core-js/internals/create-property-descriptor.js");d.exports=function(j,b,w){m?y.f(j,b,p(0,w)):j[b]=w}}),"./node_modules/core-js/internals/define-built-in-accessor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/make-built-in.js"),y=o("./node_modules/core-js/internals/object-define-property.js");d.exports=function(p,j,b){return b.get&&m(b.get,j,{getter:!0}),b.set&&m(b.set,j,{setter:!0}),y.f(p,j,b)}}),"./node_modules/core-js/internals/define-built-in.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-callable.js"),y=o("./node_modules/core-js/internals/object-define-property.js"),p=o("./node_modules/core-js/internals/make-built-in.js"),j=o("./node_modules/core-js/internals/define-global-property.js");d.exports=function(b,w,B,U){U||(U={});var Q=U.enumerable,k=U.name!==void 0?U.name:w;if(m(B)&&p(B,k,U),U.global)Q?b[w]=B:j(w,B);else{try{U.unsafe?b[w]&&(Q=!0):delete b[w]}catch{}Q?b[w]=B:y.f(b,w,{value:B,enumerable:!1,configurable:!U.nonConfigurable,writable:!U.nonWritable})}return b}}),"./node_modules/core-js/internals/define-built-ins.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/define-built-in.js");d.exports=function(y,p,j){for(var b in p)m(y,b,p[b],j);return y}}),"./node_modules/core-js/internals/define-global-property.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=Object.defineProperty;d.exports=function(p,j){try{y(m,p,{value:j,configurable:!0,writable:!0})}catch{m[p]=j}return j}}),"./node_modules/core-js/internals/descriptors.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=!m(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})}),"./node_modules/core-js/internals/document-create-element.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/is-object.js"),p=m.document,j=y(p)&&y(p.createElement);d.exports=function(b){return j?p.createElement(b):{}}}),"./node_modules/core-js/internals/does-not-exceed-safe-integer.js":(function(d){var h=TypeError,o=9007199254740991;d.exports=function(m){if(m>o)throw h("Maximum allowed index exceeded");return m}}),"./node_modules/core-js/internals/dom-iterables.js":(function(d){d.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}),"./node_modules/core-js/internals/dom-token-list-prototype.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/document-create-element.js"),y=m("span").classList,p=y&&y.constructor&&y.constructor.prototype;d.exports=p===Object.prototype?void 0:p}),"./node_modules/core-js/internals/enum-bug-keys.js":(function(d){d.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),"./node_modules/core-js/internals/environment-is-ios-pebble.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/environment-user-agent.js");d.exports=/ipad|iphone|ipod/i.test(m)&&typeof Pebble<"u"}),"./node_modules/core-js/internals/environment-is-ios.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/environment-user-agent.js");d.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(m)}),"./node_modules/core-js/internals/environment-is-node.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/environment.js");d.exports=m==="NODE"}),"./node_modules/core-js/internals/environment-is-webos-webkit.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/environment-user-agent.js");d.exports=/web0s(?!.*chrome)/i.test(m)}),"./node_modules/core-js/internals/environment-user-agent.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=m.navigator,p=y&&y.userAgent;d.exports=p?String(p):""}),"./node_modules/core-js/internals/environment-v8-version.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/environment-user-agent.js"),p=m.process,j=m.Deno,b=p&&p.versions||j&&j.version,w=b&&b.v8,B,U;w&&(B=w.split("."),U=B[0]>0&&B[0]<4?1:+(B[0]+B[1])),!U&&y&&(B=y.match(/Edge\/(\d+)/),(!B||B[1]>=74)&&(B=y.match(/Chrome\/(\d+)/),B&&(U=+B[1]))),d.exports=U}),"./node_modules/core-js/internals/environment.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/environment-user-agent.js"),p=o("./node_modules/core-js/internals/classof-raw.js"),j=function(b){return y.slice(0,b.length)===b};d.exports=(function(){return j("Bun/")?"BUN":j("Cloudflare-Workers")?"CLOUDFLARE":j("Deno/")?"DENO":j("Node.js/")?"NODE":m.Bun&&typeof Bun.version=="string"?"BUN":m.Deno&&typeof Deno.version=="object"?"DENO":p(m.process)==="process"?"NODE":m.window&&m.document?"BROWSER":"REST"})()}),"./node_modules/core-js/internals/export.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,p=o("./node_modules/core-js/internals/create-non-enumerable-property.js"),j=o("./node_modules/core-js/internals/define-built-in.js"),b=o("./node_modules/core-js/internals/define-global-property.js"),w=o("./node_modules/core-js/internals/copy-constructor-properties.js"),B=o("./node_modules/core-js/internals/is-forced.js");d.exports=function(U,Q){var k=U.target,K=U.global,ee=U.stat,q,G,W,he,Z,ie;if(K?G=m:ee?G=m[k]||b(k,{}):G=m[k]&&m[k].prototype,G)for(W in Q){if(Z=Q[W],U.dontCallGetSet?(ie=y(G,W),he=ie&&ie.value):he=G[W],q=B(K?W:k+(ee?".":"#")+W,U.forced),!q&&he!==void 0){if(typeof Z==typeof he)continue;w(Z,he)}(U.sham||he&&he.sham)&&p(Z,"sham",!0),j(G,W,Z,U)}}}),"./node_modules/core-js/internals/fails.js":(function(d){d.exports=function(h){try{return!!h()}catch{return!0}}}),"./node_modules/core-js/internals/freezing.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=!m(function(){return Object.isExtensible(Object.preventExtensions({}))})}),"./node_modules/core-js/internals/function-apply.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-bind-native.js"),y=Function.prototype,p=y.apply,j=y.call;d.exports=typeof Reflect=="object"&&Reflect.apply||(m?j.bind(p):function(){return j.apply(p,arguments)})}),"./node_modules/core-js/internals/function-bind-context.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this-clause.js"),y=o("./node_modules/core-js/internals/a-callable.js"),p=o("./node_modules/core-js/internals/function-bind-native.js"),j=m(m.bind);d.exports=function(b,w){return y(b),w===void 0?b:p?j(b,w):function(){return b.apply(w,arguments)}}}),"./node_modules/core-js/internals/function-bind-native.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=!m(function(){var y=(function(){}).bind();return typeof y!="function"||y.hasOwnProperty("prototype")})}),"./node_modules/core-js/internals/function-call.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-bind-native.js"),y=Function.prototype.call;d.exports=m?y.bind(y):function(){return y.apply(y,arguments)}}),"./node_modules/core-js/internals/function-name.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/has-own-property.js"),p=Function.prototype,j=m&&Object.getOwnPropertyDescriptor,b=y(p,"name"),w=b&&(function(){}).name==="something",B=b&&(!m||m&&j(p,"name").configurable);d.exports={EXISTS:b,PROPER:w,CONFIGURABLE:B}}),"./node_modules/core-js/internals/function-uncurry-this-accessor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/a-callable.js");d.exports=function(p,j,b){try{return m(y(Object.getOwnPropertyDescriptor(p,j)[b]))}catch{}}}),"./node_modules/core-js/internals/function-uncurry-this-clause.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/classof-raw.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js");d.exports=function(p){if(m(p)==="Function")return y(p)}}),"./node_modules/core-js/internals/function-uncurry-this.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-bind-native.js"),y=Function.prototype,p=y.call,j=m&&y.bind.bind(p,p);d.exports=m?j:function(b){return function(){return p.apply(b,arguments)}}}),"./node_modules/core-js/internals/get-built-in.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=function(j){return y(j)?j:void 0};d.exports=function(j,b){return arguments.length<2?p(m[j]):m[j]&&m[j][b]}}),"./node_modules/core-js/internals/get-iterator-direct.js":(function(d){d.exports=function(h){return{iterator:h,next:h.next,done:!1}}}),"./node_modules/core-js/internals/get-iterator-method.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/classof.js"),y=o("./node_modules/core-js/internals/get-method.js"),p=o("./node_modules/core-js/internals/is-null-or-undefined.js"),j=o("./node_modules/core-js/internals/iterators.js"),b=o("./node_modules/core-js/internals/well-known-symbol.js"),w=b("iterator");d.exports=function(B){if(!p(B))return y(B,w)||y(B,"@@iterator")||j[m(B)]}}),"./node_modules/core-js/internals/get-iterator.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/a-callable.js"),p=o("./node_modules/core-js/internals/an-object.js"),j=o("./node_modules/core-js/internals/try-to-string.js"),b=o("./node_modules/core-js/internals/get-iterator-method.js"),w=TypeError;d.exports=function(B,U){var Q=arguments.length<2?b(B):U;if(y(Q))return p(m(Q,B));throw new w(j(B)+" is not iterable")}}),"./node_modules/core-js/internals/get-json-replacer-function.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/is-array.js"),p=o("./node_modules/core-js/internals/is-callable.js"),j=o("./node_modules/core-js/internals/classof-raw.js"),b=o("./node_modules/core-js/internals/to-string.js"),w=m([].push);d.exports=function(B){if(p(B))return B;if(y(B)){for(var U=B.length,Q=[],k=0;k<U;k++){var K=B[k];typeof K=="string"?w(Q,K):(typeof K=="number"||j(K)==="Number"||j(K)==="String")&&w(Q,b(K))}var ee=Q.length,q=!0;return function(G,W){if(q)return q=!1,W;if(y(this))return W;for(var he=0;he<ee;he++)if(Q[he]===G)return W}}}}),"./node_modules/core-js/internals/get-method.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-callable.js"),y=o("./node_modules/core-js/internals/is-null-or-undefined.js");d.exports=function(p,j){var b=p[j];return y(b)?void 0:m(b)}}),"./node_modules/core-js/internals/get-set-record.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-callable.js"),y=o("./node_modules/core-js/internals/an-object.js"),p=o("./node_modules/core-js/internals/function-call.js"),j=o("./node_modules/core-js/internals/to-integer-or-infinity.js"),b=o("./node_modules/core-js/internals/get-iterator-direct.js"),w="Invalid size",B=RangeError,U=TypeError,Q=Math.max,k=function(K,ee){this.set=K,this.size=Q(ee,0),this.has=m(K.has),this.keys=m(K.keys)};k.prototype={getIterator:function(){return b(y(p(this.keys,this.set)))},includes:function(K){return p(this.has,this.set,K)}},d.exports=function(K){y(K);var ee=+K.size;if(ee!==ee)throw new U(w);var q=j(ee);if(q<0)throw new B(w);return new k(K,q)}}),"./node_modules/core-js/internals/global-this.js":(function(d){var h=function(o){return o&&o.Math===Math&&o};d.exports=h(typeof globalThis=="object"&&globalThis)||h(typeof window=="object"&&window)||h(typeof self=="object"&&self)||h(typeof Dw=="object"&&Dw)||h(typeof this=="object"&&this)||(function(){return this})()||Function("return this")()}),"./node_modules/core-js/internals/has-own-property.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/to-object.js"),p=m({}.hasOwnProperty);d.exports=Object.hasOwn||function(b,w){return p(y(b),w)}}),"./node_modules/core-js/internals/hidden-keys.js":(function(d){d.exports={}}),"./node_modules/core-js/internals/host-report-errors.js":(function(d){d.exports=function(h,o){try{arguments.length===1?console.error(h):console.error(h,o)}catch{}}}),"./node_modules/core-js/internals/html.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/get-built-in.js");d.exports=m("document","documentElement")}),"./node_modules/core-js/internals/ie8-dom-define.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/fails.js"),p=o("./node_modules/core-js/internals/document-create-element.js");d.exports=!m&&!y(function(){return Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a!==7})}),"./node_modules/core-js/internals/indexed-object.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/fails.js"),p=o("./node_modules/core-js/internals/classof-raw.js"),j=Object,b=m("".split);d.exports=y(function(){return!j("z").propertyIsEnumerable(0)})?function(w){return p(w)==="String"?b(w,""):j(w)}:j}),"./node_modules/core-js/internals/inherit-if-required.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-callable.js"),y=o("./node_modules/core-js/internals/is-object.js"),p=o("./node_modules/core-js/internals/object-set-prototype-of.js");d.exports=function(j,b,w){var B,U;return p&&m(B=b.constructor)&&B!==w&&y(U=B.prototype)&&U!==w.prototype&&p(j,U),j}}),"./node_modules/core-js/internals/inspect-source.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/shared-store.js"),j=m(Function.toString);y(p.inspectSource)||(p.inspectSource=function(b){return j(b)}),d.exports=p.inspectSource}),"./node_modules/core-js/internals/internal-metadata.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/hidden-keys.js"),j=o("./node_modules/core-js/internals/is-object.js"),b=o("./node_modules/core-js/internals/has-own-property.js"),w=o("./node_modules/core-js/internals/object-define-property.js").f,B=o("./node_modules/core-js/internals/object-get-own-property-names.js"),U=o("./node_modules/core-js/internals/object-get-own-property-names-external.js"),Q=o("./node_modules/core-js/internals/object-is-extensible.js"),k=o("./node_modules/core-js/internals/uid.js"),K=o("./node_modules/core-js/internals/freezing.js"),ee=!1,q=k("meta"),G=0,W=function(de){w(de,q,{value:{objectID:"O"+G++,weakData:{}}})},he=function(de,se){if(!j(de))return typeof de=="symbol"?de:(typeof de=="string"?"S":"P")+de;if(!b(de,q)){if(!Q(de))return"F";if(!se)return"E";W(de)}return de[q].objectID},Z=function(de,se){if(!b(de,q)){if(!Q(de))return!0;if(!se)return!1;W(de)}return de[q].weakData},ie=function(de){return K&&ee&&Q(de)&&!b(de,q)&&W(de),de},ce=function(){ae.enable=function(){},ee=!0;var de=B.f,se=y([].splice),re={};re[q]=1,de(re).length&&(B.f=function(te){for(var be=de(te),He=0,pe=be.length;He<pe;He++)if(be[He]===q){se(be,He,1);break}return be},m({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:U.f}))},ae=d.exports={enable:ce,fastKey:he,getWeakData:Z,onFreeze:ie};p[q]=!0}),"./node_modules/core-js/internals/internal-state.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/weak-map-basic-detection.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/is-object.js"),j=o("./node_modules/core-js/internals/create-non-enumerable-property.js"),b=o("./node_modules/core-js/internals/has-own-property.js"),w=o("./node_modules/core-js/internals/shared-store.js"),B=o("./node_modules/core-js/internals/shared-key.js"),U=o("./node_modules/core-js/internals/hidden-keys.js"),Q="Object already initialized",k=y.TypeError,K=y.WeakMap,ee,q,G,W=function(ce){return G(ce)?q(ce):ee(ce,{})},he=function(ce){return function(ae){var de;if(!p(ae)||(de=q(ae)).type!==ce)throw new k("Incompatible receiver, "+ce+" required");return de}};if(m||w.state){var Z=w.state||(w.state=new K);Z.get=Z.get,Z.has=Z.has,Z.set=Z.set,ee=function(ce,ae){if(Z.has(ce))throw new k(Q);return ae.facade=ce,Z.set(ce,ae),ae},q=function(ce){return Z.get(ce)||{}},G=function(ce){return Z.has(ce)}}else{var ie=B("state");U[ie]=!0,ee=function(ce,ae){if(b(ce,ie))throw new k(Q);return ae.facade=ce,j(ce,ie,ae),ae},q=function(ce){return b(ce,ie)?ce[ie]:{}},G=function(ce){return b(ce,ie)}}d.exports={set:ee,get:q,has:G,enforce:W,getterFor:he}}),"./node_modules/core-js/internals/is-array-iterator-method.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/well-known-symbol.js"),y=o("./node_modules/core-js/internals/iterators.js"),p=m("iterator"),j=Array.prototype;d.exports=function(b){return b!==void 0&&(y.Array===b||j[p]===b)}}),"./node_modules/core-js/internals/is-array.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/classof-raw.js");d.exports=Array.isArray||function(p){return m(p)==="Array"}}),"./node_modules/core-js/internals/is-callable.js":(function(d){var h=typeof document=="object"&&document.all;d.exports=typeof h>"u"&&h!==void 0?function(o){return typeof o=="function"||o===h}:function(o){return typeof o=="function"}}),"./node_modules/core-js/internals/is-constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/fails.js"),p=o("./node_modules/core-js/internals/is-callable.js"),j=o("./node_modules/core-js/internals/classof.js"),b=o("./node_modules/core-js/internals/get-built-in.js"),w=o("./node_modules/core-js/internals/inspect-source.js"),B=function(){},U=b("Reflect","construct"),Q=/^\s*(?:class|function)\b/,k=m(Q.exec),K=!Q.test(B),ee=function(W){if(!p(W))return!1;try{return U(B,[],W),!0}catch{return!1}},q=function(W){if(!p(W))return!1;switch(j(W)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return K||!!k(Q,w(W))}catch{return!0}};q.sham=!0,d.exports=!U||y(function(){var G;return ee(ee.call)||!ee(Object)||!ee(function(){G=!0})||G})?q:ee}),"./node_modules/core-js/internals/is-forced.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=/#|\.prototype\./,j=function(Q,k){var K=w[b(Q)];return K===U?!0:K===B?!1:y(k)?m(k):!!k},b=j.normalize=function(Q){return String(Q).replace(p,".").toLowerCase()},w=j.data={},B=j.NATIVE="N",U=j.POLYFILL="P";d.exports=j}),"./node_modules/core-js/internals/is-iterable.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/classof.js"),y=o("./node_modules/core-js/internals/has-own-property.js"),p=o("./node_modules/core-js/internals/is-null-or-undefined.js"),j=o("./node_modules/core-js/internals/well-known-symbol.js"),b=o("./node_modules/core-js/internals/iterators.js"),w=j("iterator"),B=Object;d.exports=function(U){if(p(U))return!1;var Q=B(U);return Q[w]!==void 0||"@@iterator"in Q||y(b,m(Q))}}),"./node_modules/core-js/internals/is-null-or-undefined.js":(function(d){d.exports=function(h){return h==null}}),"./node_modules/core-js/internals/is-object.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-callable.js");d.exports=function(y){return typeof y=="object"?y!==null:m(y)}}),"./node_modules/core-js/internals/is-possible-prototype.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-object.js");d.exports=function(y){return m(y)||y===null}}),"./node_modules/core-js/internals/is-pure.js":(function(d){d.exports=!1}),"./node_modules/core-js/internals/is-symbol.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/get-built-in.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/object-is-prototype-of.js"),j=o("./node_modules/core-js/internals/use-symbol-as-uid.js"),b=Object;d.exports=j?function(w){return typeof w=="symbol"}:function(w){var B=m("Symbol");return y(B)&&p(B.prototype,b(w))}}),"./node_modules/core-js/internals/iterate-simple.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js");d.exports=function(y,p,j){for(var b=j?y:y.iterator,w=y.next,B,U;!(B=m(w,b)).done;)if(U=p(B.value),U!==void 0)return U}}),"./node_modules/core-js/internals/iterate.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-bind-context.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/an-object.js"),j=o("./node_modules/core-js/internals/try-to-string.js"),b=o("./node_modules/core-js/internals/is-array-iterator-method.js"),w=o("./node_modules/core-js/internals/length-of-array-like.js"),B=o("./node_modules/core-js/internals/object-is-prototype-of.js"),U=o("./node_modules/core-js/internals/get-iterator.js"),Q=o("./node_modules/core-js/internals/get-iterator-method.js"),k=o("./node_modules/core-js/internals/iterator-close.js"),K=TypeError,ee=function(G,W){this.stopped=G,this.result=W},q=ee.prototype;d.exports=function(G,W,he){var Z=he&&he.that,ie=!!(he&&he.AS_ENTRIES),ce=!!(he&&he.IS_RECORD),ae=!!(he&&he.IS_ITERATOR),de=!!(he&&he.INTERRUPTED),se=m(W,Z),re,te,be,He,pe,Y,me,Se=function(Le){return re&&k(re,"normal"),new ee(!0,Le)},je=function(Le){return ie?(p(Le),de?se(Le[0],Le[1],Se):se(Le[0],Le[1])):de?se(Le,Se):se(Le)};if(ce)re=G.iterator;else if(ae)re=G;else{if(te=Q(G),!te)throw new K(j(G)+" is not iterable");if(b(te)){for(be=0,He=w(G);He>be;be++)if(pe=je(G[be]),pe&&B(q,pe))return pe;return new ee(!1)}re=U(G,te)}for(Y=ce?G.next:re.next;!(me=y(Y,re)).done;){try{pe=je(me.value)}catch(Le){k(re,"throw",Le)}if(typeof pe=="object"&&pe&&B(q,pe))return pe}return new ee(!1)}}),"./node_modules/core-js/internals/iterator-close-all.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/iterator-close.js");d.exports=function(y,p,j){for(var b=y.length-1;b>=0;b--)if(y[b]!==void 0)try{j=m(y[b].iterator,p,j)}catch(w){p="throw",j=w}if(p==="throw")throw j;return j}}),"./node_modules/core-js/internals/iterator-close.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/an-object.js"),p=o("./node_modules/core-js/internals/get-method.js");d.exports=function(j,b,w){var B,U;y(j);try{if(B=p(j,"return"),!B){if(b==="throw")throw w;return w}B=m(B,j)}catch(Q){U=!0,B=Q}if(b==="throw")throw w;if(U)throw B;return y(B),w}}),"./node_modules/core-js/internals/iterator-create-constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,y=o("./node_modules/core-js/internals/object-create.js"),p=o("./node_modules/core-js/internals/create-property-descriptor.js"),j=o("./node_modules/core-js/internals/set-to-string-tag.js"),b=o("./node_modules/core-js/internals/iterators.js"),w=function(){return this};d.exports=function(B,U,Q,k){var K=U+" Iterator";return B.prototype=y(m,{next:p(+!k,Q)}),j(B,K,!1,!0),b[K]=w,B}}),"./node_modules/core-js/internals/iterator-create-proxy.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/object-create.js"),p=o("./node_modules/core-js/internals/create-non-enumerable-property.js"),j=o("./node_modules/core-js/internals/define-built-ins.js"),b=o("./node_modules/core-js/internals/well-known-symbol.js"),w=o("./node_modules/core-js/internals/internal-state.js"),B=o("./node_modules/core-js/internals/get-method.js"),U=o("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,Q=o("./node_modules/core-js/internals/create-iter-result-object.js"),k=o("./node_modules/core-js/internals/iterator-close.js"),K=o("./node_modules/core-js/internals/iterator-close-all.js"),ee=b("toStringTag"),q="IteratorHelper",G="WrapForValidIterator",W="normal",he="throw",Z=w.set,ie=function(de){var se=w.getterFor(de?G:q);return j(y(U),{next:function(){var te=se(this);if(de)return te.nextHandler();if(te.done)return Q(void 0,!0);try{var be=te.nextHandler();return te.returnHandlerResult?be:Q(be,te.done)}catch(He){throw te.done=!0,He}},return:function(){var re=se(this),te=re.iterator;if(re.done=!0,de){var be=B(te,"return");return be?m(be,te):Q(void 0,!0)}if(re.inner)try{k(re.inner.iterator,W)}catch(He){return k(te,he,He)}if(re.openIters)try{K(re.openIters,W)}catch(He){return k(te,he,He)}return te&&k(te,W),Q(void 0,!0)}})},ce=ie(!0),ae=ie(!1);p(ae,ee,"Iterator Helper"),d.exports=function(de,se,re){var te=function(He,pe){pe?(pe.iterator=He.iterator,pe.next=He.next):pe=He,pe.type=se?G:q,pe.returnHandlerResult=!!re,pe.nextHandler=de,pe.counter=0,pe.done=!1,Z(this,pe)};return te.prototype=se?ce:ae,te}}),"./node_modules/core-js/internals/iterator-define.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/is-pure.js"),j=o("./node_modules/core-js/internals/function-name.js"),b=o("./node_modules/core-js/internals/is-callable.js"),w=o("./node_modules/core-js/internals/iterator-create-constructor.js"),B=o("./node_modules/core-js/internals/object-get-prototype-of.js"),U=o("./node_modules/core-js/internals/object-set-prototype-of.js"),Q=o("./node_modules/core-js/internals/set-to-string-tag.js"),k=o("./node_modules/core-js/internals/create-non-enumerable-property.js"),K=o("./node_modules/core-js/internals/define-built-in.js"),ee=o("./node_modules/core-js/internals/well-known-symbol.js"),q=o("./node_modules/core-js/internals/iterators.js"),G=o("./node_modules/core-js/internals/iterators-core.js"),W=j.PROPER,he=j.CONFIGURABLE,Z=G.IteratorPrototype,ie=G.BUGGY_SAFARI_ITERATORS,ce=ee("iterator"),ae="keys",de="values",se="entries",re=function(){return this};d.exports=function(te,be,He,pe,Y,me,Se){w(He,be,pe);var je=function(le){if(le===Y&&Ne)return Ne;if(!ie&&le&&le in ye)return ye[le];switch(le){case ae:return function(){return new He(this,le)};case de:return function(){return new He(this,le)};case se:return function(){return new He(this,le)}}return function(){return new He(this)}},Le=be+" Iterator",ge=!1,ye=te.prototype,we=ye[ce]||ye["@@iterator"]||Y&&ye[Y],Ne=!ie&&we||je(Y),ke=be==="Array"&&ye.entries||we,Be,Ae,Qe;if(ke&&(Be=B(ke.call(new te)),Be!==Object.prototype&&Be.next&&(!p&&B(Be)!==Z&&(U?U(Be,Z):b(Be[ce])||K(Be,ce,re)),Q(Be,Le,!0,!0),p&&(q[Le]=re))),W&&Y===de&&we&&we.name!==de&&(!p&&he?k(ye,"name",de):(ge=!0,Ne=function(){return y(we,this)})),Y)if(Ae={values:je(de),keys:me?Ne:je(ae),entries:je(se)},Se)for(Qe in Ae)(ie||ge||!(Qe in ye))&&K(ye,Qe,Ae[Qe]);else m({target:be,proto:!0,forced:ie||ge},Ae);return(!p||Se)&&ye[ce]!==Ne&&K(ye,ce,Ne,{name:Y}),q[be]=Ne,Ae}}),"./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js":(function(d){d.exports=function(h,o){var m=typeof Iterator=="function"&&Iterator.prototype[h];if(m)try{m.call({next:null},o).next()}catch{return!0}}}),"./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js");d.exports=function(y,p){var j=m.Iterator,b=j&&j.prototype,w=b&&b[y],B=!1;if(w)try{w.call({next:function(){return{done:!0}},return:function(){B=!0}},-1)}catch(U){U instanceof p||(B=!1)}if(!B)return w}}),"./node_modules/core-js/internals/iterators-core.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/is-object.js"),j=o("./node_modules/core-js/internals/object-create.js"),b=o("./node_modules/core-js/internals/object-get-prototype-of.js"),w=o("./node_modules/core-js/internals/define-built-in.js"),B=o("./node_modules/core-js/internals/well-known-symbol.js"),U=o("./node_modules/core-js/internals/is-pure.js"),Q=B("iterator"),k=!1,K,ee,q;[].keys&&(q=[].keys(),"next"in q?(ee=b(b(q)),ee!==Object.prototype&&(K=ee)):k=!0);var G=!p(K)||m(function(){var W={};return K[Q].call(W)!==W});G?K={}:U&&(K=j(K)),y(K[Q])||w(K,Q,function(){return this}),d.exports={IteratorPrototype:K,BUGGY_SAFARI_ITERATORS:k}}),"./node_modules/core-js/internals/iterators.js":(function(d){d.exports={}}),"./node_modules/core-js/internals/length-of-array-like.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-length.js");d.exports=function(y){return m(y.length)}}),"./node_modules/core-js/internals/make-built-in.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/fails.js"),p=o("./node_modules/core-js/internals/is-callable.js"),j=o("./node_modules/core-js/internals/has-own-property.js"),b=o("./node_modules/core-js/internals/descriptors.js"),w=o("./node_modules/core-js/internals/function-name.js").CONFIGURABLE,B=o("./node_modules/core-js/internals/inspect-source.js"),U=o("./node_modules/core-js/internals/internal-state.js"),Q=U.enforce,k=U.get,K=String,ee=Object.defineProperty,q=m("".slice),G=m("".replace),W=m([].join),he=b&&!y(function(){return ee(function(){},"length",{value:8}).length!==8}),Z=String(String).split("String"),ie=d.exports=function(ce,ae,de){q(K(ae),0,7)==="Symbol("&&(ae="["+G(K(ae),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),de&&de.getter&&(ae="get "+ae),de&&de.setter&&(ae="set "+ae),(!j(ce,"name")||w&&ce.name!==ae)&&(b?ee(ce,"name",{value:ae,configurable:!0}):ce.name=ae),he&&de&&j(de,"arity")&&ce.length!==de.arity&&ee(ce,"length",{value:de.arity});try{de&&j(de,"constructor")&&de.constructor?b&&ee(ce,"prototype",{writable:!1}):ce.prototype&&(ce.prototype=void 0)}catch{}var se=Q(ce);return j(se,"source")||(se.source=W(Z,typeof ae=="string"?ae:"")),ce};Function.prototype.toString=ie(function(){return p(this)&&k(this).source||B(this)},"toString")}),"./node_modules/core-js/internals/math-trunc.js":(function(d){var h=Math.ceil,o=Math.floor;d.exports=Math.trunc||function(y){var p=+y;return(p>0?o:h)(p)}}),"./node_modules/core-js/internals/microtask.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/safe-get-built-in.js"),p=o("./node_modules/core-js/internals/function-bind-context.js"),j=o("./node_modules/core-js/internals/task.js").set,b=o("./node_modules/core-js/internals/queue.js"),w=o("./node_modules/core-js/internals/environment-is-ios.js"),B=o("./node_modules/core-js/internals/environment-is-ios-pebble.js"),U=o("./node_modules/core-js/internals/environment-is-webos-webkit.js"),Q=o("./node_modules/core-js/internals/environment-is-node.js"),k=m.MutationObserver||m.WebKitMutationObserver,K=m.document,ee=m.process,q=m.Promise,G=y("queueMicrotask"),W,he,Z,ie,ce;if(!G){var ae=new b,de=function(){var se,re;for(Q&&(se=ee.domain)&&se.exit();re=ae.get();)try{re()}catch(te){throw ae.head&&W(),te}se&&se.enter()};!w&&!Q&&!U&&k&&K?(he=!0,Z=K.createTextNode(""),new k(de).observe(Z,{characterData:!0}),W=function(){Z.data=he=!he}):!B&&q&&q.resolve?(ie=q.resolve(void 0),ie.constructor=q,ce=p(ie.then,ie),W=function(){ce(de)}):Q?W=function(){ee.nextTick(de)}:(j=p(j,m),W=function(){j(de)}),G=function(se){ae.head||W(),ae.add(se)}}d.exports=G}),"./node_modules/core-js/internals/new-promise-capability.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-callable.js"),y=TypeError,p=function(j){var b,w;this.promise=new j(function(B,U){if(b!==void 0||w!==void 0)throw new y("Bad Promise constructor");b=B,w=U}),this.resolve=m(b),this.reject=m(w)};d.exports.f=function(j){return new p(j)}}),"./node_modules/core-js/internals/object-assign.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/function-call.js"),j=o("./node_modules/core-js/internals/fails.js"),b=o("./node_modules/core-js/internals/object-keys.js"),w=o("./node_modules/core-js/internals/object-get-own-property-symbols.js"),B=o("./node_modules/core-js/internals/object-property-is-enumerable.js"),U=o("./node_modules/core-js/internals/to-object.js"),Q=o("./node_modules/core-js/internals/indexed-object.js"),k=Object.assign,K=Object.defineProperty,ee=y([].concat);d.exports=!k||j(function(){if(m&&k({b:1},k(K({},"a",{enumerable:!0,get:function(){K(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var q={},G={},W=Symbol("assign detection"),he="abcdefghijklmnopqrst";return q[W]=7,he.split("").forEach(function(Z){G[Z]=Z}),k({},q)[W]!==7||b(k({},G)).join("")!==he})?function(G,W){for(var he=U(G),Z=arguments.length,ie=1,ce=w.f,ae=B.f;Z>ie;)for(var de=Q(arguments[ie++]),se=ce?ee(b(de),ce(de)):b(de),re=se.length,te=0,be;re>te;)be=se[te++],(!m||p(ae,de,be))&&(he[be]=de[be]);return he}:k}),"./node_modules/core-js/internals/object-create.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/an-object.js"),y=o("./node_modules/core-js/internals/object-define-properties.js"),p=o("./node_modules/core-js/internals/enum-bug-keys.js"),j=o("./node_modules/core-js/internals/hidden-keys.js"),b=o("./node_modules/core-js/internals/html.js"),w=o("./node_modules/core-js/internals/document-create-element.js"),B=o("./node_modules/core-js/internals/shared-key.js"),U=">",Q="<",k="prototype",K="script",ee=B("IE_PROTO"),q=function(){},G=function(ce){return Q+K+U+ce+Q+"/"+K+U},W=function(ce){ce.write(G("")),ce.close();var ae=ce.parentWindow.Object;return ce=null,ae},he=function(){var ce=w("iframe"),ae="java"+K+":",de;return ce.style.display="none",b.appendChild(ce),ce.src=String(ae),de=ce.contentWindow.document,de.open(),de.write(G("document.F=Object")),de.close(),de.F},Z,ie=function(){try{Z=new ActiveXObject("htmlfile")}catch{}ie=typeof document<"u"?document.domain&&Z?W(Z):he():W(Z);for(var ce=p.length;ce--;)delete ie[k][p[ce]];return ie()};j[ee]=!0,d.exports=Object.create||function(ae,de){var se;return ae!==null?(q[k]=m(ae),se=new q,q[k]=null,se[ee]=ae):se=ie(),de===void 0?se:y.f(se,de)}}),"./node_modules/core-js/internals/object-define-properties.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/v8-prototype-define-bug.js"),p=o("./node_modules/core-js/internals/object-define-property.js"),j=o("./node_modules/core-js/internals/an-object.js"),b=o("./node_modules/core-js/internals/to-indexed-object.js"),w=o("./node_modules/core-js/internals/object-keys.js");h.f=m&&!y?Object.defineProperties:function(U,Q){j(U);for(var k=b(Q),K=w(Q),ee=K.length,q=0,G;ee>q;)p.f(U,G=K[q++],k[G]);return U}}),"./node_modules/core-js/internals/object-define-property.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/ie8-dom-define.js"),p=o("./node_modules/core-js/internals/v8-prototype-define-bug.js"),j=o("./node_modules/core-js/internals/an-object.js"),b=o("./node_modules/core-js/internals/to-property-key.js"),w=TypeError,B=Object.defineProperty,U=Object.getOwnPropertyDescriptor,Q="enumerable",k="configurable",K="writable";h.f=m?p?function(q,G,W){if(j(q),G=b(G),j(W),typeof q=="function"&&G==="prototype"&&"value"in W&&K in W&&!W[K]){var he=U(q,G);he&&he[K]&&(q[G]=W.value,W={configurable:k in W?W[k]:he[k],enumerable:Q in W?W[Q]:he[Q],writable:!1})}return B(q,G,W)}:B:function(q,G,W){if(j(q),G=b(G),j(W),y)try{return B(q,G,W)}catch{}if("get"in W||"set"in W)throw new w("Accessors not supported");return"value"in W&&(q[G]=W.value),q}}),"./node_modules/core-js/internals/object-get-own-property-descriptor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/object-property-is-enumerable.js"),j=o("./node_modules/core-js/internals/create-property-descriptor.js"),b=o("./node_modules/core-js/internals/to-indexed-object.js"),w=o("./node_modules/core-js/internals/to-property-key.js"),B=o("./node_modules/core-js/internals/has-own-property.js"),U=o("./node_modules/core-js/internals/ie8-dom-define.js"),Q=Object.getOwnPropertyDescriptor;h.f=m?Q:function(K,ee){if(K=b(K),ee=w(ee),U)try{return Q(K,ee)}catch{}if(B(K,ee))return j(!y(p.f,K,ee),K[ee])}}),"./node_modules/core-js/internals/object-get-own-property-names-external.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/classof-raw.js"),y=o("./node_modules/core-js/internals/to-indexed-object.js"),p=o("./node_modules/core-js/internals/object-get-own-property-names.js").f,j=o("./node_modules/core-js/internals/array-slice.js"),b=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],w=function(B){try{return p(B)}catch{return j(b)}};d.exports.f=function(U){return b&&m(U)==="Window"?w(U):p(y(U))}}),"./node_modules/core-js/internals/object-get-own-property-names.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/object-keys-internal.js"),y=o("./node_modules/core-js/internals/enum-bug-keys.js"),p=y.concat("length","prototype");h.f=Object.getOwnPropertyNames||function(b){return m(b,p)}}),"./node_modules/core-js/internals/object-get-own-property-symbols.js":(function(d,h){h.f=Object.getOwnPropertySymbols}),"./node_modules/core-js/internals/object-get-prototype-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/has-own-property.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/to-object.js"),j=o("./node_modules/core-js/internals/shared-key.js"),b=o("./node_modules/core-js/internals/correct-prototype-getter.js"),w=j("IE_PROTO"),B=Object,U=B.prototype;d.exports=b?B.getPrototypeOf:function(Q){var k=p(Q);if(m(k,w))return k[w];var K=k.constructor;return y(K)&&k instanceof K?K.prototype:k instanceof B?U:null}}),"./node_modules/core-js/internals/object-is-extensible.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/is-object.js"),p=o("./node_modules/core-js/internals/classof-raw.js"),j=o("./node_modules/core-js/internals/array-buffer-non-extensible.js"),b=Object.isExtensible,w=m(function(){});d.exports=w||j?function(U){return!y(U)||j&&p(U)==="ArrayBuffer"?!1:b?b(U):!0}:b}),"./node_modules/core-js/internals/object-is-prototype-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js");d.exports=m({}.isPrototypeOf)}),"./node_modules/core-js/internals/object-keys-internal.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/has-own-property.js"),p=o("./node_modules/core-js/internals/to-indexed-object.js"),j=o("./node_modules/core-js/internals/array-includes.js").indexOf,b=o("./node_modules/core-js/internals/hidden-keys.js"),w=m([].push);d.exports=function(B,U){var Q=p(B),k=0,K=[],ee;for(ee in Q)!y(b,ee)&&y(Q,ee)&&w(K,ee);for(;U.length>k;)y(Q,ee=U[k++])&&(~j(K,ee)||w(K,ee));return K}}),"./node_modules/core-js/internals/object-keys.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/object-keys-internal.js"),y=o("./node_modules/core-js/internals/enum-bug-keys.js");d.exports=Object.keys||function(j){return m(j,y)}}),"./node_modules/core-js/internals/object-property-is-enumerable.js":(function(d,h){var o={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,y=m&&!o.call({1:2},1);h.f=y?function(j){var b=m(this,j);return!!b&&b.enumerable}:o}),"./node_modules/core-js/internals/object-set-prototype-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),y=o("./node_modules/core-js/internals/is-object.js"),p=o("./node_modules/core-js/internals/require-object-coercible.js"),j=o("./node_modules/core-js/internals/a-possible-prototype.js");d.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var b=!1,w={},B;try{B=m(Object.prototype,"__proto__","set"),B(w,[]),b=w instanceof Array}catch{}return function(Q,k){return p(Q),j(k),y(Q)&&(b?B(Q,k):Q.__proto__=k),Q}})():void 0)}),"./node_modules/core-js/internals/object-to-string.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-string-tag-support.js"),y=o("./node_modules/core-js/internals/classof.js");d.exports=m?{}.toString:function(){return"[object "+y(this)+"]"}}),"./node_modules/core-js/internals/ordinary-to-primitive.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/is-object.js"),j=TypeError;d.exports=function(b,w){var B,U;if(w==="string"&&y(B=b.toString)&&!p(U=m(B,b))||y(B=b.valueOf)&&!p(U=m(B,b))||w!=="string"&&y(B=b.toString)&&!p(U=m(B,b)))return U;throw new j("Can't convert object to primitive value")}}),"./node_modules/core-js/internals/own-keys.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/get-built-in.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/object-get-own-property-names.js"),j=o("./node_modules/core-js/internals/object-get-own-property-symbols.js"),b=o("./node_modules/core-js/internals/an-object.js"),w=y([].concat);d.exports=m("Reflect","ownKeys")||function(U){var Q=p.f(b(U)),k=j.f;return k?w(Q,k(U)):Q}}),"./node_modules/core-js/internals/path.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js");d.exports=m}),"./node_modules/core-js/internals/perform.js":(function(d){d.exports=function(h){try{return{error:!1,value:h()}}catch(o){return{error:!0,value:o}}}}),"./node_modules/core-js/internals/promise-constructor-detection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/promise-native-constructor.js"),p=o("./node_modules/core-js/internals/is-callable.js"),j=o("./node_modules/core-js/internals/is-forced.js"),b=o("./node_modules/core-js/internals/inspect-source.js"),w=o("./node_modules/core-js/internals/well-known-symbol.js"),B=o("./node_modules/core-js/internals/environment.js"),U=o("./node_modules/core-js/internals/is-pure.js"),Q=o("./node_modules/core-js/internals/environment-v8-version.js"),k=y&&y.prototype,K=w("species"),ee=!1,q=p(m.PromiseRejectionEvent),G=j("Promise",function(){var W=b(y),he=W!==String(y);if(!he&&Q===66||U&&!(k.catch&&k.finally))return!0;if(!Q||Q<51||!/native code/.test(W)){var Z=new y(function(ae){ae(1)}),ie=function(ae){ae(function(){},function(){})},ce=Z.constructor={};if(ce[K]=ie,ee=Z.then(function(){})instanceof ie,!ee)return!0}return!he&&(B==="BROWSER"||B==="DENO")&&!q});d.exports={CONSTRUCTOR:G,REJECTION_EVENT:q,SUBCLASSING:ee}}),"./node_modules/core-js/internals/promise-native-constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js");d.exports=m.Promise}),"./node_modules/core-js/internals/promise-resolve.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/an-object.js"),y=o("./node_modules/core-js/internals/is-object.js"),p=o("./node_modules/core-js/internals/new-promise-capability.js");d.exports=function(j,b){if(m(j),y(b)&&b.constructor===j)return b;var w=p.f(j),B=w.resolve;return B(b),w.promise}}),"./node_modules/core-js/internals/promise-statics-incorrect-iteration.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/promise-native-constructor.js"),y=o("./node_modules/core-js/internals/check-correctness-of-iteration.js"),p=o("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;d.exports=p||!y(function(j){m.all(j).then(void 0,function(){})})}),"./node_modules/core-js/internals/queue.js":(function(d){var h=function(){this.head=null,this.tail=null};h.prototype={add:function(o){var m={item:o,next:null},y=this.tail;y?y.next=m:this.head=m,this.tail=m},get:function(){var o=this.head;if(o){var m=this.head=o.next;return m===null&&(this.tail=null),o.item}}},d.exports=h}),"./node_modules/core-js/internals/regexp-exec.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/to-string.js"),j=o("./node_modules/core-js/internals/regexp-flags.js"),b=o("./node_modules/core-js/internals/regexp-sticky-helpers.js"),w=o("./node_modules/core-js/internals/shared.js"),B=o("./node_modules/core-js/internals/object-create.js"),U=o("./node_modules/core-js/internals/internal-state.js").get,Q=o("./node_modules/core-js/internals/regexp-unsupported-dot-all.js"),k=o("./node_modules/core-js/internals/regexp-unsupported-ncg.js"),K=w("native-string-replace",String.prototype.replace),ee=RegExp.prototype.exec,q=ee,G=y("".charAt),W=y("".indexOf),he=y("".replace),Z=y("".slice),ie=(function(){var se=/a/,re=/b*/g;return m(ee,se,"a"),m(ee,re,"a"),se.lastIndex!==0||re.lastIndex!==0})(),ce=b.BROKEN_CARET,ae=/()??/.exec("")[1]!==void 0,de=ie||ae||ce||Q||k;de&&(q=function(re){var te=this,be=U(te),He=p(re),pe=be.raw,Y,me,Se,je,Le,ge,ye;if(pe)return pe.lastIndex=te.lastIndex,Y=m(q,pe,He),te.lastIndex=pe.lastIndex,Y;var we=be.groups,Ne=ce&&te.sticky,ke=m(j,te),Be=te.source,Ae=0,Qe=He;if(Ne&&(ke=he(ke,"y",""),W(ke,"g")===-1&&(ke+="g"),Qe=Z(He,te.lastIndex),te.lastIndex>0&&(!te.multiline||te.multiline&&G(He,te.lastIndex-1)!==`
`)&&(Be="(?: "+Be+")",Qe=" "+Qe,Ae++),me=new RegExp("^(?:"+Be+")",ke)),ae&&(me=new RegExp("^"+Be+"$(?!\\s)",ke)),ie&&(Se=te.lastIndex),je=m(ee,Ne?me:te,Qe),Ne?je?(je.input=Z(je.input,Ae),je[0]=Z(je[0],Ae),je.index=te.lastIndex,te.lastIndex+=je[0].length):te.lastIndex=0:ie&&je&&(te.lastIndex=te.global?je.index+je[0].length:Se),ae&&je&&je.length>1&&m(K,je[0],me,function(){for(Le=1;Le<arguments.length-2;Le++)arguments[Le]===void 0&&(je[Le]=void 0)}),je&&we)for(je.groups=ge=B(null),Le=0;Le<we.length;Le++)ye=we[Le],ge[ye[0]]=je[ye[1]];return je}),d.exports=q}),"./node_modules/core-js/internals/regexp-flags-detection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/fails.js"),p=m.RegExp,j=!y(function(){var b=!0;try{p(".","d")}catch{b=!1}var w={},B="",U=b?"dgimsy":"gimsy",Q=function(q,G){Object.defineProperty(w,q,{get:function(){return B+=G,!0}})},k={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};b&&(k.hasIndices="d");for(var K in k)Q(K,k[K]);var ee=Object.getOwnPropertyDescriptor(p.prototype,"flags").get.call(w);return ee!==U||B!==U});d.exports={correct:j}}),"./node_modules/core-js/internals/regexp-flags.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/an-object.js");d.exports=function(){var y=m(this),p="";return y.hasIndices&&(p+="d"),y.global&&(p+="g"),y.ignoreCase&&(p+="i"),y.multiline&&(p+="m"),y.dotAll&&(p+="s"),y.unicode&&(p+="u"),y.unicodeSets&&(p+="v"),y.sticky&&(p+="y"),p}}),"./node_modules/core-js/internals/regexp-get-flags.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/has-own-property.js"),p=o("./node_modules/core-js/internals/object-is-prototype-of.js"),j=o("./node_modules/core-js/internals/regexp-flags-detection.js"),b=o("./node_modules/core-js/internals/regexp-flags.js"),w=RegExp.prototype;d.exports=j.correct?function(B){return B.flags}:function(B){return!j.correct&&p(w,B)&&!y(B,"flags")?m(b,B):B.flags}}),"./node_modules/core-js/internals/regexp-sticky-helpers.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=y.RegExp,j=m(function(){var B=p("a","y");return B.lastIndex=2,B.exec("abcd")!==null}),b=j||m(function(){return!p("a","y").sticky}),w=j||m(function(){var B=p("^r","gy");return B.lastIndex=2,B.exec("str")!==null});d.exports={BROKEN_CARET:w,MISSED_STICKY:b,UNSUPPORTED_Y:j}}),"./node_modules/core-js/internals/regexp-unsupported-dot-all.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=y.RegExp;d.exports=m(function(){var j=p(".","s");return!(j.dotAll&&j.test(`
`)&&j.flags==="s")})}),"./node_modules/core-js/internals/regexp-unsupported-ncg.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=y.RegExp;d.exports=m(function(){var j=p("(?<a>b)","g");return j.exec("b").groups.a!=="b"||"b".replace(j,"$<a>c")!=="bc"})}),"./node_modules/core-js/internals/require-object-coercible.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-null-or-undefined.js"),y=TypeError;d.exports=function(p){if(m(p))throw new y("Can't call method on "+p);return p}}),"./node_modules/core-js/internals/safe-get-built-in.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/descriptors.js"),p=Object.getOwnPropertyDescriptor;d.exports=function(j){if(!y)return m[j];var b=p(m,j);return b&&b.value}}),"./node_modules/core-js/internals/schedulers-fix.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/function-apply.js"),p=o("./node_modules/core-js/internals/is-callable.js"),j=o("./node_modules/core-js/internals/environment.js"),b=o("./node_modules/core-js/internals/environment-user-agent.js"),w=o("./node_modules/core-js/internals/array-slice.js"),B=o("./node_modules/core-js/internals/validate-arguments-length.js"),U=m.Function,Q=/MSIE .\./.test(b)||j==="BUN"&&(function(){var k=m.Bun.version.split(".");return k.length<3||k[0]==="0"&&(k[1]<3||k[1]==="3"&&k[2]==="0")})();d.exports=function(k,K){var ee=K?2:1;return Q?function(q,G){var W=B(arguments.length,1)>ee,he=p(q)?q:U(q),Z=W?w(arguments,ee):[],ie=W?function(){y(he,this,Z)}:he;return K?k(ie,G):k(ie)}:k}}),"./node_modules/core-js/internals/set-clone.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/set-helpers.js"),y=o("./node_modules/core-js/internals/set-iterate.js"),p=m.Set,j=m.add;d.exports=function(b){var w=new p;return y(b,function(B){j(w,B)}),w}}),"./node_modules/core-js/internals/set-difference.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-helpers.js"),p=o("./node_modules/core-js/internals/set-clone.js"),j=o("./node_modules/core-js/internals/set-size.js"),b=o("./node_modules/core-js/internals/get-set-record.js"),w=o("./node_modules/core-js/internals/set-iterate.js"),B=o("./node_modules/core-js/internals/iterate-simple.js"),U=y.has,Q=y.remove;d.exports=function(K){var ee=m(this),q=b(K),G=p(ee);return j(ee)<=q.size?w(ee,function(W){q.includes(W)&&Q(G,W)}):B(q.getIterator(),function(W){U(G,W)&&Q(G,W)}),G}}),"./node_modules/core-js/internals/set-helpers.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=Set.prototype;d.exports={Set,add:m(y.add),has:m(y.has),remove:m(y.delete),proto:y}}),"./node_modules/core-js/internals/set-intersection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-helpers.js"),p=o("./node_modules/core-js/internals/set-size.js"),j=o("./node_modules/core-js/internals/get-set-record.js"),b=o("./node_modules/core-js/internals/set-iterate.js"),w=o("./node_modules/core-js/internals/iterate-simple.js"),B=y.Set,U=y.add,Q=y.has;d.exports=function(K){var ee=m(this),q=j(K),G=new B;return p(ee)>q.size?w(q.getIterator(),function(W){Q(ee,W)&&U(G,W)}):b(ee,function(W){q.includes(W)&&U(G,W)}),G}}),"./node_modules/core-js/internals/set-is-disjoint-from.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-helpers.js").has,p=o("./node_modules/core-js/internals/set-size.js"),j=o("./node_modules/core-js/internals/get-set-record.js"),b=o("./node_modules/core-js/internals/set-iterate.js"),w=o("./node_modules/core-js/internals/iterate-simple.js"),B=o("./node_modules/core-js/internals/iterator-close.js");d.exports=function(Q){var k=m(this),K=j(Q);if(p(k)<=K.size)return b(k,function(q){if(K.includes(q))return!1},!0)!==!1;var ee=K.getIterator();return w(ee,function(q){if(y(k,q))return B(ee,"normal",!1)})!==!1}}),"./node_modules/core-js/internals/set-is-subset-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-size.js"),p=o("./node_modules/core-js/internals/set-iterate.js"),j=o("./node_modules/core-js/internals/get-set-record.js");d.exports=function(w){var B=m(this),U=j(w);return y(B)>U.size?!1:p(B,function(Q){if(!U.includes(Q))return!1},!0)!==!1}}),"./node_modules/core-js/internals/set-is-superset-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-helpers.js").has,p=o("./node_modules/core-js/internals/set-size.js"),j=o("./node_modules/core-js/internals/get-set-record.js"),b=o("./node_modules/core-js/internals/iterate-simple.js"),w=o("./node_modules/core-js/internals/iterator-close.js");d.exports=function(U){var Q=m(this),k=j(U);if(p(Q)<k.size)return!1;var K=k.getIterator();return b(K,function(ee){if(!y(Q,ee))return w(K,"normal",!1)})!==!1}}),"./node_modules/core-js/internals/set-iterate.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/iterate-simple.js"),p=o("./node_modules/core-js/internals/set-helpers.js"),j=p.Set,b=p.proto,w=m(b.forEach),B=m(b.keys),U=B(new j).next;d.exports=function(Q,k,K){return K?y({iterator:B(Q),next:U},k):w(Q,k)}}),"./node_modules/core-js/internals/set-size.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),y=o("./node_modules/core-js/internals/set-helpers.js");d.exports=m(y.proto,"size","get")||function(p){return p.size}}),"./node_modules/core-js/internals/set-species.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/get-built-in.js"),y=o("./node_modules/core-js/internals/define-built-in-accessor.js"),p=o("./node_modules/core-js/internals/well-known-symbol.js"),j=o("./node_modules/core-js/internals/descriptors.js"),b=p("species");d.exports=function(w){var B=m(w);j&&B&&!B[b]&&y(B,b,{configurable:!0,get:function(){return this}})}}),"./node_modules/core-js/internals/set-symmetric-difference.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-helpers.js"),p=o("./node_modules/core-js/internals/set-clone.js"),j=o("./node_modules/core-js/internals/get-set-record.js"),b=o("./node_modules/core-js/internals/iterate-simple.js"),w=y.add,B=y.has,U=y.remove;d.exports=function(k){var K=m(this),ee=j(k).getIterator(),q=p(K);return b(ee,function(G){B(K,G)?U(q,G):w(q,G)}),q}}),"./node_modules/core-js/internals/set-to-string-tag.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/object-define-property.js").f,y=o("./node_modules/core-js/internals/has-own-property.js"),p=o("./node_modules/core-js/internals/well-known-symbol.js"),j=p("toStringTag");d.exports=function(b,w,B){b&&!B&&(b=b.prototype),b&&!y(b,j)&&m(b,j,{configurable:!0,value:w})}}),"./node_modules/core-js/internals/set-union.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/a-set.js"),y=o("./node_modules/core-js/internals/set-helpers.js").add,p=o("./node_modules/core-js/internals/set-clone.js"),j=o("./node_modules/core-js/internals/get-set-record.js"),b=o("./node_modules/core-js/internals/iterate-simple.js");d.exports=function(B){var U=m(this),Q=j(B).getIterator(),k=p(U);return b(Q,function(K){y(k,K)}),k}}),"./node_modules/core-js/internals/shared-key.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/shared.js"),y=o("./node_modules/core-js/internals/uid.js"),p=m("keys");d.exports=function(j){return p[j]||(p[j]=y(j))}}),"./node_modules/core-js/internals/shared-store.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/is-pure.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/define-global-property.js"),j="__core-js_shared__",b=d.exports=y[j]||p(j,{});(b.versions||(b.versions=[])).push({version:"3.45.1",mode:m?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"})}),"./node_modules/core-js/internals/shared.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/shared-store.js");d.exports=function(y,p){return m[y]||(m[y]=p||{})}}),"./node_modules/core-js/internals/species-constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/an-object.js"),y=o("./node_modules/core-js/internals/a-constructor.js"),p=o("./node_modules/core-js/internals/is-null-or-undefined.js"),j=o("./node_modules/core-js/internals/well-known-symbol.js"),b=j("species");d.exports=function(w,B){var U=m(w).constructor,Q;return U===void 0||p(Q=m(U)[b])?B:y(Q)}}),"./node_modules/core-js/internals/string-html-forced.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/fails.js");d.exports=function(y){return m(function(){var p=""[y]('"');return p!==p.toLowerCase()||p.split('"').length>3})}}),"./node_modules/core-js/internals/string-multibyte.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/to-integer-or-infinity.js"),p=o("./node_modules/core-js/internals/to-string.js"),j=o("./node_modules/core-js/internals/require-object-coercible.js"),b=m("".charAt),w=m("".charCodeAt),B=m("".slice),U=function(Q){return function(k,K){var ee=p(j(k)),q=y(K),G=ee.length,W,he;return q<0||q>=G?Q?"":void 0:(W=w(ee,q),W<55296||W>56319||q+1===G||(he=w(ee,q+1))<56320||he>57343?Q?b(ee,q):W:Q?B(ee,q,q+2):(W-55296<<10)+(he-56320)+65536)}};d.exports={codeAt:U(!1),charAt:U(!0)}}),"./node_modules/core-js/internals/string-trim.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=o("./node_modules/core-js/internals/require-object-coercible.js"),p=o("./node_modules/core-js/internals/to-string.js"),j=o("./node_modules/core-js/internals/whitespaces.js"),b=m("".replace),w=RegExp("^["+j+"]+"),B=RegExp("(^|[^"+j+"])["+j+"]+$"),U=function(Q){return function(k){var K=p(y(k));return Q&1&&(K=b(K,w,"")),Q&2&&(K=b(K,B,"$1")),K}};d.exports={start:U(1),end:U(2),trim:U(3)}}),"./node_modules/core-js/internals/symbol-constructor-detection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/environment-v8-version.js"),y=o("./node_modules/core-js/internals/fails.js"),p=o("./node_modules/core-js/internals/global-this.js"),j=p.String;d.exports=!!Object.getOwnPropertySymbols&&!y(function(){var b=Symbol("symbol detection");return!j(b)||!(Object(b)instanceof Symbol)||!Symbol.sham&&m&&m<41})}),"./node_modules/core-js/internals/symbol-define-to-primitive.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/get-built-in.js"),p=o("./node_modules/core-js/internals/well-known-symbol.js"),j=o("./node_modules/core-js/internals/define-built-in.js");d.exports=function(){var b=y("Symbol"),w=b&&b.prototype,B=w&&w.valueOf,U=p("toPrimitive");w&&!w[U]&&j(w,U,function(Q){return m(B,this)},{arity:1})}}),"./node_modules/core-js/internals/symbol-registry-detection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/symbol-constructor-detection.js");d.exports=m&&!!Symbol.for&&!!Symbol.keyFor}),"./node_modules/core-js/internals/task.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/function-apply.js"),p=o("./node_modules/core-js/internals/function-bind-context.js"),j=o("./node_modules/core-js/internals/is-callable.js"),b=o("./node_modules/core-js/internals/has-own-property.js"),w=o("./node_modules/core-js/internals/fails.js"),B=o("./node_modules/core-js/internals/html.js"),U=o("./node_modules/core-js/internals/array-slice.js"),Q=o("./node_modules/core-js/internals/document-create-element.js"),k=o("./node_modules/core-js/internals/validate-arguments-length.js"),K=o("./node_modules/core-js/internals/environment-is-ios.js"),ee=o("./node_modules/core-js/internals/environment-is-node.js"),q=m.setImmediate,G=m.clearImmediate,W=m.process,he=m.Dispatch,Z=m.Function,ie=m.MessageChannel,ce=m.String,ae=0,de={},se="onreadystatechange",re,te,be,He;w(function(){re=m.location});var pe=function(je){if(b(de,je)){var Le=de[je];delete de[je],Le()}},Y=function(je){return function(){pe(je)}},me=function(je){pe(je.data)},Se=function(je){m.postMessage(ce(je),re.protocol+"//"+re.host)};(!q||!G)&&(q=function(Le){k(arguments.length,1);var ge=j(Le)?Le:Z(Le),ye=U(arguments,1);return de[++ae]=function(){y(ge,void 0,ye)},te(ae),ae},G=function(Le){delete de[Le]},ee?te=function(je){W.nextTick(Y(je))}:he&&he.now?te=function(je){he.now(Y(je))}:ie&&!K?(be=new ie,He=be.port2,be.port1.onmessage=me,te=p(He.postMessage,He)):m.addEventListener&&j(m.postMessage)&&!m.importScripts&&re&&re.protocol!=="file:"&&!w(Se)?(te=Se,m.addEventListener("message",me,!1)):se in Q("script")?te=function(je){B.appendChild(Q("script"))[se]=function(){B.removeChild(this),pe(je)}}:te=function(je){setTimeout(Y(je),0)}),d.exports={set:q,clear:G}}),"./node_modules/core-js/internals/this-number-value.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js");d.exports=m(1.1.valueOf)}),"./node_modules/core-js/internals/to-absolute-index.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-integer-or-infinity.js"),y=Math.max,p=Math.min;d.exports=function(j,b){var w=m(j);return w<0?y(w+b,0):p(w,b)}}),"./node_modules/core-js/internals/to-indexed-object.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/indexed-object.js"),y=o("./node_modules/core-js/internals/require-object-coercible.js");d.exports=function(p){return m(y(p))}}),"./node_modules/core-js/internals/to-integer-or-infinity.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/math-trunc.js");d.exports=function(y){var p=+y;return p!==p||p===0?0:m(p)}}),"./node_modules/core-js/internals/to-length.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-integer-or-infinity.js"),y=Math.min;d.exports=function(p){var j=m(p);return j>0?y(j,9007199254740991):0}}),"./node_modules/core-js/internals/to-object.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/require-object-coercible.js"),y=Object;d.exports=function(p){return y(m(p))}}),"./node_modules/core-js/internals/to-primitive.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-call.js"),y=o("./node_modules/core-js/internals/is-object.js"),p=o("./node_modules/core-js/internals/is-symbol.js"),j=o("./node_modules/core-js/internals/get-method.js"),b=o("./node_modules/core-js/internals/ordinary-to-primitive.js"),w=o("./node_modules/core-js/internals/well-known-symbol.js"),B=TypeError,U=w("toPrimitive");d.exports=function(Q,k){if(!y(Q)||p(Q))return Q;var K=j(Q,U),ee;if(K){if(k===void 0&&(k="default"),ee=m(K,Q,k),!y(ee)||p(ee))return ee;throw new B("Can't convert object to primitive value")}return k===void 0&&(k="number"),b(Q,k)}}),"./node_modules/core-js/internals/to-property-key.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-primitive.js"),y=o("./node_modules/core-js/internals/is-symbol.js");d.exports=function(p){var j=m(p,"string");return y(j)?j:j+""}}),"./node_modules/core-js/internals/to-set-like.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/get-built-in.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=o("./node_modules/core-js/internals/is-iterable.js"),j=o("./node_modules/core-js/internals/is-object.js"),b=m("Set"),w=function(B){return j(B)&&typeof B.size=="number"&&y(B.has)&&y(B.keys)};d.exports=function(B){return w(B)?B:p(B)?new b(B):B}}),"./node_modules/core-js/internals/to-string-tag-support.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/well-known-symbol.js"),y=m("toStringTag"),p={};p[y]="z",d.exports=String(p)==="[object z]"}),"./node_modules/core-js/internals/to-string.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/classof.js"),y=String;d.exports=function(p){if(m(p)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return y(p)}}),"./node_modules/core-js/internals/try-to-string.js":(function(d){var h=String;d.exports=function(o){try{return h(o)}catch{return"Object"}}}),"./node_modules/core-js/internals/uid.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-uncurry-this.js"),y=0,p=Math.random(),j=m(1.1.toString);d.exports=function(b){return"Symbol("+(b===void 0?"":b)+")_"+j(++y+p,36)}}),"./node_modules/core-js/internals/use-symbol-as-uid.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/symbol-constructor-detection.js");d.exports=m&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}),"./node_modules/core-js/internals/v8-prototype-define-bug.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/fails.js");d.exports=m&&y(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})}),"./node_modules/core-js/internals/validate-arguments-length.js":(function(d){var h=TypeError;d.exports=function(o,m){if(o<m)throw new h("Not enough arguments");return o}}),"./node_modules/core-js/internals/weak-map-basic-detection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/is-callable.js"),p=m.WeakMap;d.exports=y(p)&&/native code/.test(String(p))}),"./node_modules/core-js/internals/well-known-symbol-define.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/path.js"),y=o("./node_modules/core-js/internals/has-own-property.js"),p=o("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),j=o("./node_modules/core-js/internals/object-define-property.js").f;d.exports=function(b){var w=m.Symbol||(m.Symbol={});y(w,b)||j(w,b,{value:p.f(b)})}}),"./node_modules/core-js/internals/well-known-symbol-wrapped.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/well-known-symbol.js");h.f=m}),"./node_modules/core-js/internals/well-known-symbol.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/shared.js"),p=o("./node_modules/core-js/internals/has-own-property.js"),j=o("./node_modules/core-js/internals/uid.js"),b=o("./node_modules/core-js/internals/symbol-constructor-detection.js"),w=o("./node_modules/core-js/internals/use-symbol-as-uid.js"),B=m.Symbol,U=y("wks"),Q=w?B.for||B:B&&B.withoutSetter||j;d.exports=function(k){return p(U,k)||(U[k]=b&&p(B,k)?B[k]:Q("Symbol."+k)),U[k]}}),"./node_modules/core-js/internals/whitespaces.js":(function(d){d.exports=`	
\v\f\r \u2028\u2029\uFEFF`}),"./node_modules/core-js/modules/es.array.concat.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/fails.js"),p=o("./node_modules/core-js/internals/is-array.js"),j=o("./node_modules/core-js/internals/is-object.js"),b=o("./node_modules/core-js/internals/to-object.js"),w=o("./node_modules/core-js/internals/length-of-array-like.js"),B=o("./node_modules/core-js/internals/does-not-exceed-safe-integer.js"),U=o("./node_modules/core-js/internals/create-property.js"),Q=o("./node_modules/core-js/internals/array-species-create.js"),k=o("./node_modules/core-js/internals/array-method-has-species-support.js"),K=o("./node_modules/core-js/internals/well-known-symbol.js"),ee=o("./node_modules/core-js/internals/environment-v8-version.js"),q=K("isConcatSpreadable"),G=ee>=51||!y(function(){var Z=[];return Z[q]=!1,Z.concat()[0]!==Z}),W=function(Z){if(!j(Z))return!1;var ie=Z[q];return ie!==void 0?!!ie:p(Z)},he=!G||!k("concat");m({target:"Array",proto:!0,arity:1,forced:he},{concat:function(ie){var ce=b(this),ae=Q(ce,0),de=0,se,re,te,be,He;for(se=-1,te=arguments.length;se<te;se++)if(He=se===-1?ce:arguments[se],W(He))for(be=w(He),B(de+be),re=0;re<be;re++,de++)re in He&&U(ae,de,He[re]);else B(de+1),U(ae,de++,He);return ae.length=de,ae}})}),"./node_modules/core-js/modules/es.array.from.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/array-from.js"),p=o("./node_modules/core-js/internals/check-correctness-of-iteration.js"),j=!p(function(b){Array.from(b)});m({target:"Array",stat:!0,forced:j},{from:y})}),"./node_modules/core-js/modules/es.array.iterator.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-indexed-object.js"),y=o("./node_modules/core-js/internals/add-to-unscopables.js"),p=o("./node_modules/core-js/internals/iterators.js"),j=o("./node_modules/core-js/internals/internal-state.js"),b=o("./node_modules/core-js/internals/object-define-property.js").f,w=o("./node_modules/core-js/internals/iterator-define.js"),B=o("./node_modules/core-js/internals/create-iter-result-object.js"),U=o("./node_modules/core-js/internals/is-pure.js"),Q=o("./node_modules/core-js/internals/descriptors.js"),k="Array Iterator",K=j.set,ee=j.getterFor(k);d.exports=w(Array,"Array",function(G,W){K(this,{type:k,target:m(G),index:0,kind:W})},function(){var G=ee(this),W=G.target,he=G.index++;if(!W||he>=W.length)return G.target=null,B(void 0,!0);switch(G.kind){case"keys":return B(he,!1);case"values":return B(W[he],!1)}return B([he,W[he]],!1)},"values");var q=p.Arguments=p.Array;if(y("keys"),y("values"),y("entries"),!U&&Q&&q.name!=="values")try{b(q,"name",{value:"values"})}catch{}}),"./node_modules/core-js/modules/es.array.join.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/indexed-object.js"),j=o("./node_modules/core-js/internals/to-indexed-object.js"),b=o("./node_modules/core-js/internals/array-method-is-strict.js"),w=y([].join),B=p!==Object,U=B||!b("join",",");m({target:"Array",proto:!0,forced:U},{join:function(k){return w(j(this),k===void 0?",":k)}})}),"./node_modules/core-js/modules/es.array.map.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/array-iteration.js").map,p=o("./node_modules/core-js/internals/array-method-has-species-support.js"),j=p("map");m({target:"Array",proto:!0,forced:!j},{map:function(w){return y(this,w,arguments.length>1?arguments[1]:void 0)}})}),"./node_modules/core-js/modules/es.array.slice.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/is-array.js"),p=o("./node_modules/core-js/internals/is-constructor.js"),j=o("./node_modules/core-js/internals/is-object.js"),b=o("./node_modules/core-js/internals/to-absolute-index.js"),w=o("./node_modules/core-js/internals/length-of-array-like.js"),B=o("./node_modules/core-js/internals/to-indexed-object.js"),U=o("./node_modules/core-js/internals/create-property.js"),Q=o("./node_modules/core-js/internals/well-known-symbol.js"),k=o("./node_modules/core-js/internals/array-method-has-species-support.js"),K=o("./node_modules/core-js/internals/array-slice.js"),ee=k("slice"),q=Q("species"),G=Array,W=Math.max;m({target:"Array",proto:!0,forced:!ee},{slice:function(Z,ie){var ce=B(this),ae=w(ce),de=b(Z,ae),se=b(ie===void 0?ae:ie,ae),re,te,be;if(y(ce)&&(re=ce.constructor,p(re)&&(re===G||y(re.prototype))?re=void 0:j(re)&&(re=re[q],re===null&&(re=void 0)),re===G||re===void 0))return K(ce,de,se);for(te=new(re===void 0?G:re)(W(se-de,0)),be=0;de<se;de++,be++)de in ce&&U(te,be,ce[de]);return te.length=be,te}})}),"./node_modules/core-js/modules/es.function.name.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/descriptors.js"),y=o("./node_modules/core-js/internals/function-name.js").EXISTS,p=o("./node_modules/core-js/internals/function-uncurry-this.js"),j=o("./node_modules/core-js/internals/define-built-in-accessor.js"),b=Function.prototype,w=p(b.toString),B=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,U=p(B.exec),Q="name";m&&!y&&j(b,Q,{configurable:!0,get:function(){try{return U(B,w(this))[1]}catch{return""}}})}),"./node_modules/core-js/modules/es.iterator.constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/an-instance.js"),j=o("./node_modules/core-js/internals/an-object.js"),b=o("./node_modules/core-js/internals/is-callable.js"),w=o("./node_modules/core-js/internals/object-get-prototype-of.js"),B=o("./node_modules/core-js/internals/define-built-in-accessor.js"),U=o("./node_modules/core-js/internals/create-property.js"),Q=o("./node_modules/core-js/internals/fails.js"),k=o("./node_modules/core-js/internals/has-own-property.js"),K=o("./node_modules/core-js/internals/well-known-symbol.js"),ee=o("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,q=o("./node_modules/core-js/internals/descriptors.js"),G=o("./node_modules/core-js/internals/is-pure.js"),W="constructor",he="Iterator",Z=K("toStringTag"),ie=TypeError,ce=y[he],ae=G||!b(ce)||ce.prototype!==ee||!Q(function(){ce({})}),de=function(){if(p(this,ee),w(this)===ee)throw new ie("Abstract class Iterator not directly constructable")},se=function(re,te){q?B(ee,re,{configurable:!0,get:function(){return te},set:function(be){if(j(this),this===ee)throw new ie("You can't redefine this property");k(this,re)?this[re]=be:U(this,re,be)}}):ee[re]=te};k(ee,Z)||se(Z,he),(ae||!k(ee,W)||ee[W]===Object)&&se(W,de),de.prototype=ee,m({global:!0,constructor:!0,forced:ae},{Iterator:de})}),"./node_modules/core-js/modules/es.iterator.for-each.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/iterate.js"),j=o("./node_modules/core-js/internals/a-callable.js"),b=o("./node_modules/core-js/internals/an-object.js"),w=o("./node_modules/core-js/internals/get-iterator-direct.js"),B=o("./node_modules/core-js/internals/iterator-close.js"),U=o("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),Q=U("forEach",TypeError);m({target:"Iterator",proto:!0,real:!0,forced:Q},{forEach:function(K){b(this);try{j(K)}catch(G){B(this,"throw",G)}if(Q)return y(Q,this,K);var ee=w(this),q=0;p(ee,function(G){K(G,q++)},{IS_RECORD:!0})}})}),"./node_modules/core-js/modules/es.iterator.map.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/a-callable.js"),j=o("./node_modules/core-js/internals/an-object.js"),b=o("./node_modules/core-js/internals/get-iterator-direct.js"),w=o("./node_modules/core-js/internals/iterator-create-proxy.js"),B=o("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),U=o("./node_modules/core-js/internals/iterator-close.js"),Q=o("./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js"),k=o("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),K=o("./node_modules/core-js/internals/is-pure.js"),ee=!K&&!Q("map",function(){}),q=!K&&!ee&&k("map",TypeError),G=K||ee||q,W=w(function(){var he=this.iterator,Z=j(y(this.next,he)),ie=this.done=!!Z.done;if(!ie)return B(he,this.mapper,[Z.value,this.counter++],!0)});m({target:"Iterator",proto:!0,real:!0,forced:G},{map:function(Z){j(this);try{p(Z)}catch(ie){U(this,"throw",ie)}return q?y(q,this,Z):new W(b(this),{mapper:Z})}})}),"./node_modules/core-js/modules/es.json.stringify.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/get-built-in.js"),p=o("./node_modules/core-js/internals/function-apply.js"),j=o("./node_modules/core-js/internals/function-call.js"),b=o("./node_modules/core-js/internals/function-uncurry-this.js"),w=o("./node_modules/core-js/internals/fails.js"),B=o("./node_modules/core-js/internals/is-callable.js"),U=o("./node_modules/core-js/internals/is-symbol.js"),Q=o("./node_modules/core-js/internals/array-slice.js"),k=o("./node_modules/core-js/internals/get-json-replacer-function.js"),K=o("./node_modules/core-js/internals/symbol-constructor-detection.js"),ee=String,q=y("JSON","stringify"),G=b(/./.exec),W=b("".charAt),he=b("".charCodeAt),Z=b("".replace),ie=b(1.1.toString),ce=/[\uD800-\uDFFF]/g,ae=/^[\uD800-\uDBFF]$/,de=/^[\uDC00-\uDFFF]$/,se=!K||w(function(){var He=y("Symbol")("stringify detection");return q([He])!=="[null]"||q({a:He})!=="{}"||q(Object(He))!=="{}"}),re=w(function(){return q("\uDF06\uD834")!=='"\\udf06\\ud834"'||q("\uDEAD")!=='"\\udead"'}),te=function(He,pe){var Y=Q(arguments),me=k(pe);if(!(!B(me)&&(He===void 0||U(He))))return Y[1]=function(Se,je){if(B(me)&&(je=j(me,this,ee(Se),je)),!U(je))return je},p(q,null,Y)},be=function(He,pe,Y){var me=W(Y,pe-1),Se=W(Y,pe+1);return G(ae,He)&&!G(de,Se)||G(de,He)&&!G(ae,me)?"\\u"+ie(he(He,0),16):He};q&&m({target:"JSON",stat:!0,arity:3,forced:se||re},{stringify:function(pe,Y,me){var Se=Q(arguments),je=p(se?te:q,null,Se);return re&&typeof je=="string"?Z(je,ce,be):je}})}),"./node_modules/core-js/modules/es.number.constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/is-pure.js"),p=o("./node_modules/core-js/internals/descriptors.js"),j=o("./node_modules/core-js/internals/global-this.js"),b=o("./node_modules/core-js/internals/path.js"),w=o("./node_modules/core-js/internals/function-uncurry-this.js"),B=o("./node_modules/core-js/internals/is-forced.js"),U=o("./node_modules/core-js/internals/has-own-property.js"),Q=o("./node_modules/core-js/internals/inherit-if-required.js"),k=o("./node_modules/core-js/internals/object-is-prototype-of.js"),K=o("./node_modules/core-js/internals/is-symbol.js"),ee=o("./node_modules/core-js/internals/to-primitive.js"),q=o("./node_modules/core-js/internals/fails.js"),G=o("./node_modules/core-js/internals/object-get-own-property-names.js").f,W=o("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,he=o("./node_modules/core-js/internals/object-define-property.js").f,Z=o("./node_modules/core-js/internals/this-number-value.js"),ie=o("./node_modules/core-js/internals/string-trim.js").trim,ce="Number",ae=j[ce],de=b[ce],se=ae.prototype,re=j.TypeError,te=w("".slice),be=w("".charCodeAt),He=function(Le){var ge=ee(Le,"number");return typeof ge=="bigint"?ge:pe(ge)},pe=function(Le){var ge=ee(Le,"number"),ye,we,Ne,ke,Be,Ae,Qe,le;if(K(ge))throw new re("Cannot convert a Symbol value to a number");if(typeof ge=="string"&&ge.length>2){if(ge=ie(ge),ye=be(ge,0),ye===43||ye===45){if(we=be(ge,2),we===88||we===120)return NaN}else if(ye===48){switch(be(ge,1)){case 66:case 98:Ne=2,ke=49;break;case 79:case 111:Ne=8,ke=55;break;default:return+ge}for(Be=te(ge,2),Ae=Be.length,Qe=0;Qe<Ae;Qe++)if(le=be(Be,Qe),le<48||le>ke)return NaN;return parseInt(Be,Ne)}}return+ge},Y=B(ce,!ae(" 0o1")||!ae("0b1")||ae("+0x1")),me=function(Le){return k(se,Le)&&q(function(){Z(Le)})},Se=function(ge){var ye=arguments.length<1?0:ae(He(ge));return me(this)?Q(Object(ye),this,Se):ye};Se.prototype=se,Y&&!y&&(se.constructor=Se),m({global:!0,constructor:!0,wrap:!0,forced:Y},{Number:Se});var je=function(Le,ge){for(var ye=p?G(ge):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),we=0,Ne;ye.length>we;we++)U(ge,Ne=ye[we])&&!U(Le,Ne)&&he(Le,Ne,W(ge,Ne))};y&&de&&je(b[ce],de),(Y||y)&&je(b[ce],ae)}),"./node_modules/core-js/modules/es.object.assign.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/object-assign.js");m({target:"Object",stat:!0,arity:2,forced:Object.assign!==y},{assign:y})}),"./node_modules/core-js/modules/es.object.get-own-property-symbols.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/symbol-constructor-detection.js"),p=o("./node_modules/core-js/internals/fails.js"),j=o("./node_modules/core-js/internals/object-get-own-property-symbols.js"),b=o("./node_modules/core-js/internals/to-object.js"),w=!y||p(function(){j.f(1)});m({target:"Object",stat:!0,forced:w},{getOwnPropertySymbols:function(U){var Q=j.f;return Q?Q(b(U)):[]}})}),"./node_modules/core-js/modules/es.object.keys.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/to-object.js"),p=o("./node_modules/core-js/internals/object-keys.js"),j=o("./node_modules/core-js/internals/fails.js"),b=j(function(){p(1)});m({target:"Object",stat:!0,forced:b},{keys:function(B){return p(y(B))}})}),"./node_modules/core-js/modules/es.object.to-string.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/to-string-tag-support.js"),y=o("./node_modules/core-js/internals/define-built-in.js"),p=o("./node_modules/core-js/internals/object-to-string.js");m||y(Object.prototype,"toString",p,{unsafe:!0})}),"./node_modules/core-js/modules/es.promise.all.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/a-callable.js"),j=o("./node_modules/core-js/internals/new-promise-capability.js"),b=o("./node_modules/core-js/internals/perform.js"),w=o("./node_modules/core-js/internals/iterate.js"),B=o("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");m({target:"Promise",stat:!0,forced:B},{all:function(Q){var k=this,K=j.f(k),ee=K.resolve,q=K.reject,G=b(function(){var W=p(k.resolve),he=[],Z=0,ie=1;w(Q,function(ce){var ae=Z++,de=!1;ie++,y(W,k,ce).then(function(se){de||(de=!0,he[ae]=se,--ie||ee(he))},q)}),--ie||ee(he)});return G.error&&q(G.value),K.promise}})}),"./node_modules/core-js/modules/es.promise.catch.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/is-pure.js"),p=o("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,j=o("./node_modules/core-js/internals/promise-native-constructor.js"),b=o("./node_modules/core-js/internals/get-built-in.js"),w=o("./node_modules/core-js/internals/is-callable.js"),B=o("./node_modules/core-js/internals/define-built-in.js"),U=j&&j.prototype;if(m({target:"Promise",proto:!0,forced:p,real:!0},{catch:function(k){return this.then(void 0,k)}}),!y&&w(j)){var Q=b("Promise").prototype.catch;U.catch!==Q&&B(U,"catch",Q,{unsafe:!0})}}),"./node_modules/core-js/modules/es.promise.constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/is-pure.js"),p=o("./node_modules/core-js/internals/environment-is-node.js"),j=o("./node_modules/core-js/internals/global-this.js"),b=o("./node_modules/core-js/internals/path.js"),w=o("./node_modules/core-js/internals/function-call.js"),B=o("./node_modules/core-js/internals/define-built-in.js"),U=o("./node_modules/core-js/internals/object-set-prototype-of.js"),Q=o("./node_modules/core-js/internals/set-to-string-tag.js"),k=o("./node_modules/core-js/internals/set-species.js"),K=o("./node_modules/core-js/internals/a-callable.js"),ee=o("./node_modules/core-js/internals/is-callable.js"),q=o("./node_modules/core-js/internals/is-object.js"),G=o("./node_modules/core-js/internals/an-instance.js"),W=o("./node_modules/core-js/internals/species-constructor.js"),he=o("./node_modules/core-js/internals/task.js").set,Z=o("./node_modules/core-js/internals/microtask.js"),ie=o("./node_modules/core-js/internals/host-report-errors.js"),ce=o("./node_modules/core-js/internals/perform.js"),ae=o("./node_modules/core-js/internals/queue.js"),de=o("./node_modules/core-js/internals/internal-state.js"),se=o("./node_modules/core-js/internals/promise-native-constructor.js"),re=o("./node_modules/core-js/internals/promise-constructor-detection.js"),te=o("./node_modules/core-js/internals/new-promise-capability.js"),be="Promise",He=re.CONSTRUCTOR,pe=re.REJECTION_EVENT,Y=re.SUBCLASSING,me=de.getterFor(be),Se=de.set,je=se&&se.prototype,Le=se,ge=je,ye=j.TypeError,we=j.document,Ne=j.process,ke=te.f,Be=ke,Ae=!!(we&&we.createEvent&&j.dispatchEvent),Qe="unhandledrejection",le="rejectionhandled",ct=0,rt=1,ht=2,ft=1,Jt=2,gt,tt,Lt,qt,Fs=function($e){var St;return q($e)&&ee(St=$e.then)?St:!1},xs=function($e,St){var Rt=St.value,Zt=St.state===rt,bt=Zt?$e.ok:$e.fail,Vt=$e.resolve,vs=$e.reject,us=$e.domain,jt,kt,Ft;try{bt?(Zt||(St.rejection===Jt&&ze(St),St.rejection=ft),bt===!0?jt=Rt:(us&&us.enter(),jt=bt(Rt),us&&(us.exit(),Ft=!0)),jt===$e.promise?vs(new ye("Promise-chain cycle")):(kt=Fs(jt))?w(kt,jt,Vt,vs):Vt(jt)):vs(Rt)}catch(is){us&&!Ft&&us.exit(),vs(is)}},hs=function($e,St){$e.notified||($e.notified=!0,Z(function(){for(var Rt=$e.reactions,Zt;Zt=Rt.get();)xs(Zt,$e);$e.notified=!1,St&&!$e.rejection&&Pe($e)}))},it=function($e,St,Rt){var Zt,bt;Ae?(Zt=we.createEvent("Event"),Zt.promise=St,Zt.reason=Rt,Zt.initEvent($e,!1,!0),j.dispatchEvent(Zt)):Zt={promise:St,reason:Rt},!pe&&(bt=j["on"+$e])?bt(Zt):$e===Qe&&ie("Unhandled promise rejection",Rt)},Pe=function($e){w(he,j,function(){var St=$e.facade,Rt=$e.value,Zt=dt($e),bt;if(Zt&&(bt=ce(function(){p?Ne.emit("unhandledRejection",Rt,St):it(Qe,St,Rt)}),$e.rejection=p||dt($e)?Jt:ft,bt.error))throw bt.value})},dt=function($e){return $e.rejection!==ft&&!$e.parent},ze=function($e){w(he,j,function(){var St=$e.facade;p?Ne.emit("rejectionHandled",St):it(le,St,$e.value)})},Tt=function($e,St,Rt){return function(Zt){$e(St,Zt,Rt)}},Je=function($e,St,Rt){$e.done||($e.done=!0,Rt&&($e=Rt),$e.value=St,$e.state=ht,hs($e,!0))},vt=function($e,St,Rt){if(!$e.done){$e.done=!0,Rt&&($e=Rt);try{if($e.facade===St)throw new ye("Promise can't be resolved itself");var Zt=Fs(St);Zt?Z(function(){var bt={done:!1};try{w(Zt,St,Tt(vt,bt,$e),Tt(Je,bt,$e))}catch(Vt){Je(bt,Vt,$e)}}):($e.value=St,$e.state=rt,hs($e,!1))}catch(bt){Je({done:!1},bt,$e)}}};if(He&&(Le=function(St){G(this,ge),K(St),w(gt,this);var Rt=me(this);try{St(Tt(vt,Rt),Tt(Je,Rt))}catch(Zt){Je(Rt,Zt)}},ge=Le.prototype,gt=function(St){Se(this,{type:be,done:!1,notified:!1,parent:!1,reactions:new ae,rejection:!1,state:ct,value:null})},gt.prototype=B(ge,"then",function(St,Rt){var Zt=me(this),bt=ke(W(this,Le));return Zt.parent=!0,bt.ok=ee(St)?St:!0,bt.fail=ee(Rt)&&Rt,bt.domain=p?Ne.domain:void 0,Zt.state===ct?Zt.reactions.add(bt):Z(function(){xs(bt,Zt)}),bt.promise}),tt=function(){var $e=new gt,St=me($e);this.promise=$e,this.resolve=Tt(vt,St),this.reject=Tt(Je,St)},te.f=ke=function($e){return $e===Le||$e===Lt?new tt($e):Be($e)},!y&&ee(se)&&je!==Object.prototype)){qt=je.then,Y||B(je,"then",function(St,Rt){var Zt=this;return new Le(function(bt,Vt){w(qt,Zt,bt,Vt)}).then(St,Rt)},{unsafe:!0});try{delete je.constructor}catch{}U&&U(je,ge)}m({global:!0,constructor:!0,wrap:!0,forced:He},{Promise:Le}),Lt=b.Promise,Q(Le,be,!1,!0),k(be)}),"./node_modules/core-js/modules/es.promise.js":(function(d,h,o){o("./node_modules/core-js/modules/es.promise.constructor.js"),o("./node_modules/core-js/modules/es.promise.all.js"),o("./node_modules/core-js/modules/es.promise.catch.js"),o("./node_modules/core-js/modules/es.promise.race.js"),o("./node_modules/core-js/modules/es.promise.reject.js"),o("./node_modules/core-js/modules/es.promise.resolve.js")}),"./node_modules/core-js/modules/es.promise.race.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/a-callable.js"),j=o("./node_modules/core-js/internals/new-promise-capability.js"),b=o("./node_modules/core-js/internals/perform.js"),w=o("./node_modules/core-js/internals/iterate.js"),B=o("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");m({target:"Promise",stat:!0,forced:B},{race:function(Q){var k=this,K=j.f(k),ee=K.reject,q=b(function(){var G=p(k.resolve);w(Q,function(W){y(G,k,W).then(K.resolve,ee)})});return q.error&&ee(q.value),K.promise}})}),"./node_modules/core-js/modules/es.promise.reject.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/new-promise-capability.js"),p=o("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;m({target:"Promise",stat:!0,forced:p},{reject:function(b){var w=y.f(this),B=w.reject;return B(b),w.promise}})}),"./node_modules/core-js/modules/es.promise.resolve.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/get-built-in.js"),p=o("./node_modules/core-js/internals/is-pure.js"),j=o("./node_modules/core-js/internals/promise-native-constructor.js"),b=o("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,w=o("./node_modules/core-js/internals/promise-resolve.js"),B=y("Promise"),U=p&&!b;m({target:"Promise",stat:!0,forced:p||b},{resolve:function(k){return w(U&&this===B?j:this,k)}})}),"./node_modules/core-js/modules/es.regexp.exec.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/regexp-exec.js");m({target:"RegExp",proto:!0,forced:/./.exec!==y},{exec:y})}),"./node_modules/core-js/modules/es.regexp.test.js":(function(d,h,o){o("./node_modules/core-js/modules/es.regexp.exec.js");var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/is-callable.js"),j=o("./node_modules/core-js/internals/an-object.js"),b=o("./node_modules/core-js/internals/to-string.js"),w=(function(){var U=!1,Q=/[ac]/;return Q.exec=function(){return U=!0,/./.exec.apply(this,arguments)},Q.test("abc")===!0&&U})(),B=/./.test;m({target:"RegExp",proto:!0,forced:!w},{test:function(U){var Q=j(this),k=b(U),K=Q.exec;if(!p(K))return y(B,Q,k);var ee=y(K,Q,k);return ee===null?!1:(j(ee),!0)}})}),"./node_modules/core-js/modules/es.regexp.to-string.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/function-name.js").PROPER,y=o("./node_modules/core-js/internals/define-built-in.js"),p=o("./node_modules/core-js/internals/an-object.js"),j=o("./node_modules/core-js/internals/to-string.js"),b=o("./node_modules/core-js/internals/fails.js"),w=o("./node_modules/core-js/internals/regexp-get-flags.js"),B="toString",U=RegExp.prototype,Q=U[B],k=b(function(){return Q.call({source:"a",flags:"b"})!=="/a/b"}),K=m&&Q.name!==B;(k||K)&&y(U,B,function(){var q=p(this),G=j(q.source),W=j(w(q));return"/"+G+"/"+W},{unsafe:!0})}),"./node_modules/core-js/modules/es.set.constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/collection.js"),y=o("./node_modules/core-js/internals/collection-strong.js");m("Set",function(p){return function(){return p(this,arguments.length?arguments[0]:void 0)}},y)}),"./node_modules/core-js/modules/es.set.js":(function(d,h,o){o("./node_modules/core-js/modules/es.set.constructor.js")}),"./node_modules/core-js/modules/es.string.iterator.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/string-multibyte.js").charAt,y=o("./node_modules/core-js/internals/to-string.js"),p=o("./node_modules/core-js/internals/internal-state.js"),j=o("./node_modules/core-js/internals/iterator-define.js"),b=o("./node_modules/core-js/internals/create-iter-result-object.js"),w="String Iterator",B=p.set,U=p.getterFor(w);j(String,"String",function(Q){B(this,{type:w,string:y(Q),index:0})},function(){var k=U(this),K=k.string,ee=k.index,q;return ee>=K.length?b(void 0,!0):(q=m(K,ee),k.index+=q.length,b(q,!1))})}),"./node_modules/core-js/modules/es.string.link.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/create-html.js"),p=o("./node_modules/core-js/internals/string-html-forced.js");m({target:"String",proto:!0,forced:p("link")},{link:function(b){return y(this,"a","href",b)}})}),"./node_modules/core-js/modules/es.symbol.constructor.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/function-call.js"),j=o("./node_modules/core-js/internals/function-uncurry-this.js"),b=o("./node_modules/core-js/internals/is-pure.js"),w=o("./node_modules/core-js/internals/descriptors.js"),B=o("./node_modules/core-js/internals/symbol-constructor-detection.js"),U=o("./node_modules/core-js/internals/fails.js"),Q=o("./node_modules/core-js/internals/has-own-property.js"),k=o("./node_modules/core-js/internals/object-is-prototype-of.js"),K=o("./node_modules/core-js/internals/an-object.js"),ee=o("./node_modules/core-js/internals/to-indexed-object.js"),q=o("./node_modules/core-js/internals/to-property-key.js"),G=o("./node_modules/core-js/internals/to-string.js"),W=o("./node_modules/core-js/internals/create-property-descriptor.js"),he=o("./node_modules/core-js/internals/object-create.js"),Z=o("./node_modules/core-js/internals/object-keys.js"),ie=o("./node_modules/core-js/internals/object-get-own-property-names.js"),ce=o("./node_modules/core-js/internals/object-get-own-property-names-external.js"),ae=o("./node_modules/core-js/internals/object-get-own-property-symbols.js"),de=o("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),se=o("./node_modules/core-js/internals/object-define-property.js"),re=o("./node_modules/core-js/internals/object-define-properties.js"),te=o("./node_modules/core-js/internals/object-property-is-enumerable.js"),be=o("./node_modules/core-js/internals/define-built-in.js"),He=o("./node_modules/core-js/internals/define-built-in-accessor.js"),pe=o("./node_modules/core-js/internals/shared.js"),Y=o("./node_modules/core-js/internals/shared-key.js"),me=o("./node_modules/core-js/internals/hidden-keys.js"),Se=o("./node_modules/core-js/internals/uid.js"),je=o("./node_modules/core-js/internals/well-known-symbol.js"),Le=o("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),ge=o("./node_modules/core-js/internals/well-known-symbol-define.js"),ye=o("./node_modules/core-js/internals/symbol-define-to-primitive.js"),we=o("./node_modules/core-js/internals/set-to-string-tag.js"),Ne=o("./node_modules/core-js/internals/internal-state.js"),ke=o("./node_modules/core-js/internals/array-iteration.js").forEach,Be=Y("hidden"),Ae="Symbol",Qe="prototype",le=Ne.set,ct=Ne.getterFor(Ae),rt=Object[Qe],ht=y.Symbol,ft=ht&&ht[Qe],Jt=y.RangeError,gt=y.TypeError,tt=y.QObject,Lt=de.f,qt=se.f,Fs=ce.f,xs=te.f,hs=j([].push),it=pe("symbols"),Pe=pe("op-symbols"),dt=pe("wks"),ze=!tt||!tt[Qe]||!tt[Qe].findChild,Tt=function(us,jt,kt){var Ft=Lt(rt,jt);Ft&&delete rt[jt],qt(us,jt,kt),Ft&&us!==rt&&qt(rt,jt,Ft)},Je=w&&U(function(){return he(qt({},"a",{get:function(){return qt(this,"a",{value:7}).a}})).a!==7})?Tt:qt,vt=function(us,jt){var kt=it[us]=he(ft);return le(kt,{type:Ae,tag:us,description:jt}),w||(kt.description=jt),kt},$e=function(jt,kt,Ft){jt===rt&&$e(Pe,kt,Ft),K(jt);var is=q(kt);return K(Ft),Q(it,is)?(Ft.enumerable?(Q(jt,Be)&&jt[Be][is]&&(jt[Be][is]=!1),Ft=he(Ft,{enumerable:W(0,!1)})):(Q(jt,Be)||qt(jt,Be,W(1,he(null))),jt[Be][is]=!0),Je(jt,is,Ft)):qt(jt,is,Ft)},St=function(jt,kt){K(jt);var Ft=ee(kt),is=Z(Ft).concat(vs(Ft));return ke(is,function(Ss){(!w||p(Zt,Ft,Ss))&&$e(jt,Ss,Ft[Ss])}),jt},Rt=function(jt,kt){return kt===void 0?he(jt):St(he(jt),kt)},Zt=function(jt){var kt=q(jt),Ft=p(xs,this,kt);return this===rt&&Q(it,kt)&&!Q(Pe,kt)?!1:Ft||!Q(this,kt)||!Q(it,kt)||Q(this,Be)&&this[Be][kt]?Ft:!0},bt=function(jt,kt){var Ft=ee(jt),is=q(kt);if(!(Ft===rt&&Q(it,is)&&!Q(Pe,is))){var Ss=Lt(Ft,is);return Ss&&Q(it,is)&&!(Q(Ft,Be)&&Ft[Be][is])&&(Ss.enumerable=!0),Ss}},Vt=function(jt){var kt=Fs(ee(jt)),Ft=[];return ke(kt,function(is){!Q(it,is)&&!Q(me,is)&&hs(Ft,is)}),Ft},vs=function(us){var jt=us===rt,kt=Fs(jt?Pe:ee(us)),Ft=[];return ke(kt,function(is){Q(it,is)&&(!jt||Q(rt,is))&&hs(Ft,it[is])}),Ft};B||(ht=function(){if(k(ft,this))throw new gt("Symbol is not a constructor");var jt=!arguments.length||arguments[0]===void 0?void 0:G(arguments[0]),kt=Se(jt),Ft=function(is){var Ss=this===void 0?y:this;Ss===rt&&p(Ft,Pe,is),Q(Ss,Be)&&Q(Ss[Be],kt)&&(Ss[Be][kt]=!1);var nn=W(1,is);try{Je(Ss,kt,nn)}catch(es){if(!(es instanceof Jt))throw es;Tt(Ss,kt,nn)}};return w&&ze&&Je(rt,kt,{configurable:!0,set:Ft}),vt(kt,jt)},ft=ht[Qe],be(ft,"toString",function(){return ct(this).tag}),be(ht,"withoutSetter",function(us){return vt(Se(us),us)}),te.f=Zt,se.f=$e,re.f=St,de.f=bt,ie.f=ce.f=Vt,ae.f=vs,Le.f=function(us){return vt(je(us),us)},w&&(He(ft,"description",{configurable:!0,get:function(){return ct(this).description}}),b||be(rt,"propertyIsEnumerable",Zt,{unsafe:!0}))),m({global:!0,constructor:!0,wrap:!0,forced:!B,sham:!B},{Symbol:ht}),ke(Z(dt),function(us){ge(us)}),m({target:Ae,stat:!0,forced:!B},{useSetter:function(){ze=!0},useSimple:function(){ze=!1}}),m({target:"Object",stat:!0,forced:!B,sham:!w},{create:Rt,defineProperty:$e,defineProperties:St,getOwnPropertyDescriptor:bt}),m({target:"Object",stat:!0,forced:!B},{getOwnPropertyNames:Vt}),ye(),we(ht,Ae),me[Be]=!0}),"./node_modules/core-js/modules/es.symbol.description.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/descriptors.js"),p=o("./node_modules/core-js/internals/global-this.js"),j=o("./node_modules/core-js/internals/function-uncurry-this.js"),b=o("./node_modules/core-js/internals/has-own-property.js"),w=o("./node_modules/core-js/internals/is-callable.js"),B=o("./node_modules/core-js/internals/object-is-prototype-of.js"),U=o("./node_modules/core-js/internals/to-string.js"),Q=o("./node_modules/core-js/internals/define-built-in-accessor.js"),k=o("./node_modules/core-js/internals/copy-constructor-properties.js"),K=p.Symbol,ee=K&&K.prototype;if(y&&w(K)&&(!("description"in ee)||K().description!==void 0)){var q={},G=function(){var se=arguments.length<1||arguments[0]===void 0?void 0:U(arguments[0]),re=B(ee,this)?new K(se):se===void 0?K():K(se);return se===""&&(q[re]=!0),re};k(G,K),G.prototype=ee,ee.constructor=G;var W=String(K("description detection"))==="Symbol(description detection)",he=j(ee.valueOf),Z=j(ee.toString),ie=/^Symbol\((.*)\)[^)]+$/,ce=j("".replace),ae=j("".slice);Q(ee,"description",{configurable:!0,get:function(){var se=he(this);if(b(q,se))return"";var re=Z(se),te=W?ae(re,7,-1):ce(re,ie,"$1");return te===""?void 0:te}}),m({global:!0,constructor:!0,forced:!0},{Symbol:G})}}),"./node_modules/core-js/modules/es.symbol.for.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/get-built-in.js"),p=o("./node_modules/core-js/internals/has-own-property.js"),j=o("./node_modules/core-js/internals/to-string.js"),b=o("./node_modules/core-js/internals/shared.js"),w=o("./node_modules/core-js/internals/symbol-registry-detection.js"),B=b("string-to-symbol-registry"),U=b("symbol-to-string-registry");m({target:"Symbol",stat:!0,forced:!w},{for:function(Q){var k=j(Q);if(p(B,k))return B[k];var K=y("Symbol")(k);return B[k]=K,U[K]=k,K}})}),"./node_modules/core-js/modules/es.symbol.iterator.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/well-known-symbol-define.js");m("iterator")}),"./node_modules/core-js/modules/es.symbol.js":(function(d,h,o){o("./node_modules/core-js/modules/es.symbol.constructor.js"),o("./node_modules/core-js/modules/es.symbol.for.js"),o("./node_modules/core-js/modules/es.symbol.key-for.js"),o("./node_modules/core-js/modules/es.json.stringify.js"),o("./node_modules/core-js/modules/es.object.get-own-property-symbols.js")}),"./node_modules/core-js/modules/es.symbol.key-for.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/has-own-property.js"),p=o("./node_modules/core-js/internals/is-symbol.js"),j=o("./node_modules/core-js/internals/try-to-string.js"),b=o("./node_modules/core-js/internals/shared.js"),w=o("./node_modules/core-js/internals/symbol-registry-detection.js"),B=b("symbol-to-string-registry");m({target:"Symbol",stat:!0,forced:!w},{keyFor:function(Q){if(!p(Q))throw new TypeError(j(Q)+" is not a symbol");if(y(B,Q))return B[Q]}})}),"./node_modules/core-js/modules/esnext.iterator.constructor.js":(function(d,h,o){o("./node_modules/core-js/modules/es.iterator.constructor.js")}),"./node_modules/core-js/modules/esnext.iterator.for-each.js":(function(d,h,o){o("./node_modules/core-js/modules/es.iterator.for-each.js")}),"./node_modules/core-js/modules/esnext.iterator.map.js":(function(d,h,o){o("./node_modules/core-js/modules/es.iterator.map.js")}),"./node_modules/core-js/modules/esnext.set.add-all.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/a-set.js"),p=o("./node_modules/core-js/internals/set-helpers.js").add;m({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var b=y(this),w=0,B=arguments.length;w<B;w++)p(b,arguments[w]);return b}})}),"./node_modules/core-js/modules/esnext.set.delete-all.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/a-set.js"),p=o("./node_modules/core-js/internals/set-helpers.js").remove;m({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var b=y(this),w=!0,B,U=0,Q=arguments.length;U<Q;U++)B=p(b,arguments[U]),w=w&&B;return!!w}})}),"./node_modules/core-js/modules/esnext.set.difference.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-difference.js");m({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/esnext.set.every.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-bind-context.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-iterate.js");m({target:"Set",proto:!0,real:!0,forced:!0},{every:function(w){var B=p(this),U=y(w,arguments.length>1?arguments[1]:void 0);return j(B,function(Q){if(!U(Q,Q,B))return!1},!0)!==!1}})}),"./node_modules/core-js/modules/esnext.set.filter.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-bind-context.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-helpers.js"),b=o("./node_modules/core-js/internals/set-iterate.js"),w=j.Set,B=j.add;m({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(Q){var k=p(this),K=y(Q,arguments.length>1?arguments[1]:void 0),ee=new w;return b(k,function(q){K(q,q,k)&&B(ee,q)}),ee}})}),"./node_modules/core-js/modules/esnext.set.find.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-bind-context.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-iterate.js");m({target:"Set",proto:!0,real:!0,forced:!0},{find:function(w){var B=p(this),U=y(w,arguments.length>1?arguments[1]:void 0),Q=j(B,function(k){if(U(k,k,B))return{value:k}},!0);return Q&&Q.value}})}),"./node_modules/core-js/modules/esnext.set.intersection.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-intersection.js");m({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/esnext.set.is-disjoint-from.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-is-disjoint-from.js");m({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/esnext.set.is-subset-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-is-subset-of.js");m({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/esnext.set.is-superset-of.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-is-superset-of.js");m({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/esnext.set.join.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-uncurry-this.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-iterate.js"),b=o("./node_modules/core-js/internals/to-string.js"),w=y([].join),B=y([].push);m({target:"Set",proto:!0,real:!0,forced:!0},{join:function(Q){var k=p(this),K=Q===void 0?",":b(Q),ee=[];return j(k,function(q){B(ee,q)}),w(ee,K)}})}),"./node_modules/core-js/modules/esnext.set.map.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-bind-context.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-helpers.js"),b=o("./node_modules/core-js/internals/set-iterate.js"),w=j.Set,B=j.add;m({target:"Set",proto:!0,real:!0,forced:!0},{map:function(Q){var k=p(this),K=y(Q,arguments.length>1?arguments[1]:void 0),ee=new w;return b(k,function(q){B(ee,K(q,q,k))}),ee}})}),"./node_modules/core-js/modules/esnext.set.reduce.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/a-callable.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-iterate.js"),b=TypeError;m({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(B){var U=p(this),Q=arguments.length<2,k=Q?void 0:arguments[1];if(y(B),j(U,function(K){Q?(Q=!1,k=K):k=B(k,K,K,U)}),Q)throw new b("Reduce of empty set with no initial value");return k}})}),"./node_modules/core-js/modules/esnext.set.some.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-bind-context.js"),p=o("./node_modules/core-js/internals/a-set.js"),j=o("./node_modules/core-js/internals/set-iterate.js");m({target:"Set",proto:!0,real:!0,forced:!0},{some:function(w){var B=p(this),U=y(w,arguments.length>1?arguments[1]:void 0);return j(B,function(Q){if(U(Q,Q,B))return!0},!0)===!0}})}),"./node_modules/core-js/modules/esnext.set.symmetric-difference.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-symmetric-difference.js");m({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/esnext.set.union.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/function-call.js"),p=o("./node_modules/core-js/internals/to-set-like.js"),j=o("./node_modules/core-js/internals/set-union.js");m({target:"Set",proto:!0,real:!0,forced:!0},{union:function(w){return y(j,this,p(w))}})}),"./node_modules/core-js/modules/web.dom-collections.for-each.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/dom-iterables.js"),p=o("./node_modules/core-js/internals/dom-token-list-prototype.js"),j=o("./node_modules/core-js/internals/array-for-each.js"),b=o("./node_modules/core-js/internals/create-non-enumerable-property.js"),w=function(U){if(U&&U.forEach!==j)try{b(U,"forEach",j)}catch{U.forEach=j}};for(var B in y)y[B]&&w(m[B]&&m[B].prototype);w(p)}),"./node_modules/core-js/modules/web.dom-collections.iterator.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/global-this.js"),y=o("./node_modules/core-js/internals/dom-iterables.js"),p=o("./node_modules/core-js/internals/dom-token-list-prototype.js"),j=o("./node_modules/core-js/modules/es.array.iterator.js"),b=o("./node_modules/core-js/internals/create-non-enumerable-property.js"),w=o("./node_modules/core-js/internals/set-to-string-tag.js"),B=o("./node_modules/core-js/internals/well-known-symbol.js"),U=B("iterator"),Q=j.values,k=function(ee,q){if(ee){if(ee[U]!==Q)try{b(ee,U,Q)}catch{ee[U]=Q}if(w(ee,q,!0),y[q]){for(var G in j)if(ee[G]!==j[G])try{b(ee,G,j[G])}catch{ee[G]=j[G]}}}};for(var K in y)k(m[K]&&m[K].prototype,K);k(p,"DOMTokenList")}),"./node_modules/core-js/modules/web.set-interval.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/schedulers-fix.js"),j=p(y.setInterval,!0);m({global:!0,bind:!0,forced:y.setInterval!==j},{setInterval:j})}),"./node_modules/core-js/modules/web.set-timeout.js":(function(d,h,o){var m=o("./node_modules/core-js/internals/export.js"),y=o("./node_modules/core-js/internals/global-this.js"),p=o("./node_modules/core-js/internals/schedulers-fix.js"),j=p(y.setTimeout,!0);m({global:!0,bind:!0,forced:y.setTimeout!==j},{setTimeout:j})}),"./node_modules/core-js/modules/web.timers.js":(function(d,h,o){o("./node_modules/core-js/modules/web.set-interval.js"),o("./node_modules/core-js/modules/web.set-timeout.js")}),"./src/plugin/hyperlinks.js":(function(d,h,o){o.r(h),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.string.link.js"),o("./node_modules/core-js/modules/esnext.iterator.constructor.js"),o("./node_modules/core-js/modules/esnext.iterator.for-each.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js");var m=o("./src/worker.js"),y=o("./src/utils.js"),p=[],j={toContainer:m.default.prototype.toContainer,toPdf:m.default.prototype.toPdf};m.default.prototype.toContainer=function(){return j.toContainer.call(this).then(function(){if(this.opt.enableLinks){var B=this.prop.container,U=B.querySelectorAll("a"),Q=(0,y.unitConvert)(B.getBoundingClientRect(),this.prop.pageSize.k);p=[],Array.prototype.forEach.call(U,function(k){for(var K=k.getClientRects(),ee=0;ee<K.length;ee++){var q=(0,y.unitConvert)(K[ee],this.prop.pageSize.k);q.left-=Q.left,q.top-=Q.top;var G=Math.floor(q.top/this.prop.pageSize.inner.height)+1,W=this.opt.margin[0]+q.top%this.prop.pageSize.inner.height,he=this.opt.margin[1]+q.left;p.push({page:G,top:W,left:he,clientRect:q,link:k})}},this)}})},m.default.prototype.toPdf=function(){return j.toPdf.call(this).then(function(){if(this.opt.enableLinks){p.forEach(function(U){this.prop.pdf.setPage(U.page),this.prop.pdf.link(U.left,U.top,U.clientRect.width,U.clientRect.height,{url:U.link.href})},this);var B=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(B)}})}}),"./src/plugin/jspdf-plugin.js":(function(d,h,o){o.r(h),o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.symbol.description.js"),o("./node_modules/core-js/modules/es.symbol.iterator.js"),o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.string.iterator.js"),o("./node_modules/core-js/modules/web.dom-collections.iterator.js");var m=o("jspdf");function y(p){"@babel/helpers - typeof";return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},y(p)}m.jsPDF.getPageSize=function(p,j,b){if(y(p)==="object"){var w=p;p=w.orientation,j=w.unit||j,b=w.format||b}j=j||"mm",b=b||"a4",p=(""+(p||"P")).toLowerCase();var B=(""+b).toLowerCase(),U={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(j){case"pt":var Q=1;break;case"mm":var Q=72/25.4;break;case"cm":var Q=72/2.54;break;case"in":var Q=72;break;case"px":var Q=72/96;break;case"pc":var Q=12;break;case"em":var Q=12;break;case"ex":var Q=6;break;default:throw"Invalid unit: "+j}if(U.hasOwnProperty(B))var k=U[B][1]/Q,K=U[B][0]/Q;else try{var k=b[1],K=b[0]}catch{throw new Error("Invalid format: "+b)}if(p==="p"||p==="portrait"){if(p="p",K>k){var ee=K;K=k,k=ee}}else if(p==="l"||p==="landscape"){if(p="l",k>K){var ee=K;K=k,k=ee}}else throw"Invalid orientation: "+p;var q={width:K,height:k,unit:j,k:Q};return q},h.default=m.jsPDF}),"./src/plugin/pagebreaks.js":(function(d,h,o){o.r(h),o("./node_modules/core-js/modules/es.array.concat.js"),o("./node_modules/core-js/modules/es.array.join.js"),o("./node_modules/core-js/modules/es.array.slice.js"),o("./node_modules/core-js/modules/es.object.keys.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/esnext.iterator.constructor.js"),o("./node_modules/core-js/modules/esnext.iterator.for-each.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js");var m=o("./src/worker.js"),y=o("./src/utils.js"),p={toContainer:m.default.prototype.toContainer};m.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},m.default.prototype.toContainer=function(){return p.toContainer.call(this).then(function(){var w=this.prop.container,B=this.prop.pageSize.inner.px.height,U=[].concat(this.opt.pagebreak.mode),Q={avoidAll:U.indexOf("avoid-all")!==-1,css:U.indexOf("css")!==-1,legacy:U.indexOf("legacy")!==-1},k={},K=this;["before","after","avoid"].forEach(function(G){var W=Q.avoidAll&&G==="avoid";k[G]=W?[]:[].concat(K.opt.pagebreak[G]||[]),k[G].length>0&&(k[G]=Array.prototype.slice.call(w.querySelectorAll(k[G].join(", "))))});var ee=w.querySelectorAll(".html2pdf__page-break");ee=Array.prototype.slice.call(ee);var q=w.querySelectorAll("*");Array.prototype.forEach.call(q,function(W){var he={before:!1,after:Q.legacy&&ee.indexOf(W)!==-1,avoid:Q.avoidAll};if(Q.css){var Z=window.getComputedStyle(W),ie=["always","page","left","right"],ce=["avoid","avoid-page"];he={before:he.before||ie.indexOf(Z.breakBefore||Z.pageBreakBefore)!==-1,after:he.after||ie.indexOf(Z.breakAfter||Z.pageBreakAfter)!==-1,avoid:he.avoid||ce.indexOf(Z.breakInside||Z.pageBreakInside)!==-1}}Object.keys(he).forEach(function(be){he[be]=he[be]||k[be].indexOf(W)!==-1});var ae=W.getBoundingClientRect();if(he.avoid&&!he.before){var de=Math.floor(ae.top/B),se=Math.floor(ae.bottom/B),re=Math.abs(ae.bottom-ae.top)/B;se!==de&&re<=1&&(he.before=!0)}if(he.before){var te=(0,y.createElement)("div",{style:{display:"block",height:B-ae.top%B+"px"}});W.parentNode.insertBefore(te,W)}if(he.after){var te=(0,y.createElement)("div",{style:{display:"block",height:B-ae.bottom%B+"px"}});W.parentNode.insertBefore(te,W.nextSibling)}})})}}),"./src/snapdom/clone.js":(function(d,h,o){o.r(h),o.d(h,{deepCloneBasic:function(){return b}}),o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.symbol.description.js"),o("./node_modules/core-js/modules/es.symbol.iterator.js"),o("./node_modules/core-js/modules/es.array.concat.js"),o("./node_modules/core-js/modules/es.array.from.js"),o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/core-js/modules/es.array.slice.js"),o("./node_modules/core-js/modules/es.function.name.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.regexp.exec.js"),o("./node_modules/core-js/modules/es.regexp.test.js"),o("./node_modules/core-js/modules/es.regexp.to-string.js"),o("./node_modules/core-js/modules/es.set.js"),o("./node_modules/core-js/modules/es.string.iterator.js"),o("./node_modules/core-js/modules/esnext.set.add-all.js"),o("./node_modules/core-js/modules/esnext.set.delete-all.js"),o("./node_modules/core-js/modules/esnext.set.difference.js"),o("./node_modules/core-js/modules/esnext.set.every.js"),o("./node_modules/core-js/modules/esnext.set.filter.js"),o("./node_modules/core-js/modules/esnext.set.find.js"),o("./node_modules/core-js/modules/esnext.set.intersection.js"),o("./node_modules/core-js/modules/esnext.set.is-disjoint-from.js"),o("./node_modules/core-js/modules/esnext.set.is-subset-of.js"),o("./node_modules/core-js/modules/esnext.set.is-superset-of.js"),o("./node_modules/core-js/modules/esnext.set.join.js"),o("./node_modules/core-js/modules/esnext.set.map.js"),o("./node_modules/core-js/modules/esnext.set.reduce.js"),o("./node_modules/core-js/modules/esnext.set.some.js"),o("./node_modules/core-js/modules/esnext.set.symmetric-difference.js"),o("./node_modules/core-js/modules/esnext.set.union.js"),o("./node_modules/core-js/modules/web.dom-collections.iterator.js");function m(w,B){var U=typeof Symbol<"u"&&w[Symbol.iterator]||w["@@iterator"];if(!U){if(Array.isArray(w)||(U=y(w))||B){U&&(w=U);var Q=0,k=function(){};return{s:k,n:function(){return Q>=w.length?{done:!0}:{done:!1,value:w[Q++]}},e:function(W){throw W},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var K,ee=!0,q=!1;return{s:function(){U=U.call(w)},n:function(){var W=U.next();return ee=W.done,W},e:function(W){q=!0,K=W},f:function(){try{ee||U.return==null||U.return()}finally{if(q)throw K}}}}function y(w,B){if(w){if(typeof w=="string")return p(w,B);var U={}.toString.call(w).slice(8,-1);return U==="Object"&&w.constructor&&(U=w.constructor.name),U==="Map"||U==="Set"?Array.from(w):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?p(w,B):void 0}}function p(w,B){(B==null||B>w.length)&&(B=w.length);for(var U=0,Q=Array(B);U<B;U++)Q[U]=w[U];return Q}function j(w,B){try{var U=w.currentSrc||w.src||"";if(!U)return;B.setAttribute("src",U),B.removeAttribute("srcset"),B.removeAttribute("sizes"),B.loading="eager",B.decoding="sync"}catch{}}function b(w){if(!w)throw new Error("Invalid node");var B=new Set,U=null;if(w.nodeType===Node.TEXT_NODE||w.nodeType!==Node.ELEMENT_NODE)return w.cloneNode(!0);if(w.tagName==="IFRAME"){var Q=document.createElement("div");return Q.style.cssText="width:".concat(w.offsetWidth,"px;height:").concat(w.offsetHeight,"px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;"),Q}if(w.tagName==="CANVAS"){var k=w.toDataURL(),K=document.createElement("img");return K.src=k,K.width=w.width,K.height=w.height,K}var ee;try{ee=w.cloneNode(!1),w.tagName==="IMG"&&j(w,ee)}catch(Ae){throw console.error("[Snapdom] Failed to clone node:",w,Ae),Ae}if(w instanceof HTMLTextAreaElement){ee.textContent=w.value,ee.value=w.value;var q=w.getBoundingClientRect();return ee.style.boxSizing="border-box",ee.style.width="".concat(q.width,"px"),ee.style.height="".concat(q.height,"px"),ee}if(w instanceof HTMLInputElement&&(w.hasAttribute("value")&&(ee.value=w.value,ee.setAttribute("value",w.value)),w.checked!==void 0&&(ee.checked=w.checked,w.checked&&ee.setAttribute("checked",""),w.indeterminate&&(ee.indeterminate=w.indeterminate))),w instanceof HTMLSelectElement&&(U=w.value),w.shadowRoot){var G=Array.from(w.shadowRoot.querySelectorAll("slot")).length>0;if(!G){var W=document.createDocumentFragment(),he=m(w.shadowRoot.childNodes),Z;try{for(he.s();!(Z=he.n()).done;){var ie=Z.value;if(!(ie.nodeType===Node.ELEMENT_NODE&&ie.tagName==="STYLE")){var ce=b(ie);ce&&W.appendChild(ce)}}}catch(Ae){he.e(Ae)}finally{he.f()}ee.appendChild(W)}}if(w.tagName==="SLOT"){var ae,de=((ae=w.assignedNodes)===null||ae===void 0?void 0:ae.call(w,{flatten:!0}))||[],se=de.length>0?de:Array.from(w.childNodes),re=document.createDocumentFragment(),te=m(se),be;try{for(te.s();!(be=te.n()).done;){var He=be.value,pe=b(He);pe&&re.appendChild(pe)}}catch(Ae){te.e(Ae)}finally{te.f()}return re}var Y=m(w.childNodes),me;try{for(Y.s();!(me=Y.n()).done;){var Se=me.value;if(!B.has(Se)){var je=b(Se);je&&ee.appendChild(je)}}}catch(Ae){Y.e(Ae)}finally{Y.f()}if(U!==null&&ee instanceof HTMLSelectElement){ee.value=U;var Le=m(ee.options),ge;try{for(Le.s();!(ge=Le.n()).done;){var ye=ge.value;ye.value===U?ye.setAttribute("selected",""):ye.removeAttribute("selected")}}catch(Ae){Le.e(Ae)}finally{Le.f()}}var we=w.scrollLeft,Ne=w.scrollTop,ke=we||Ne;if(ke&&ee instanceof HTMLElement){ee.style.overflow="hidden",ee.style.scrollbarWidth="none",ee.style.msOverflowStyle="none";var Be=document.createElement("div");for(Be.style.transform="translate(".concat(-we,"px, ").concat(-Ne,"px)"),Be.style.willChange="transform",Be.style.display="inline-block",Be.style.width="100%";ee.firstChild;)Be.appendChild(ee.firstChild);ee.appendChild(Be)}return ee}}),"./src/utils.js":(function(d,h,o){o.r(h),o.d(h,{createElement:function(){return p},objType:function(){return y},toPx:function(){return b},unitConvert:function(){return j}}),o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.symbol.description.js"),o("./node_modules/core-js/modules/es.symbol.iterator.js"),o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/core-js/modules/es.number.constructor.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.string.iterator.js"),o("./node_modules/core-js/modules/web.dom-collections.iterator.js");function m(w){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},m(w)}var y=function(B){var U=m(B);return U==="undefined"?"undefined":U==="string"||B instanceof String?"string":U==="number"||B instanceof Number?"number":U==="function"||B instanceof Function?"function":B&&B.constructor===Array?"array":B&&B.nodeType===1?"element":U==="object"?"object":"unknown"},p=function(B,U){var Q=document.createElement(B);if(U.className&&(Q.className=U.className),U.innerHTML){Q.innerHTML=U.innerHTML;for(var k=Q.getElementsByTagName("script"),K=k.length;K-- >0;null)k[K].parentNode.removeChild(k[K])}for(var ee in U.style)Q.style[ee]=U.style[ee];return Q},j=function(B,U){if(y(B)==="number")return B*72/96/U;var Q={};for(var k in B)Q[k]=B[k]*72/96/U;return Q},b=function(B,U){return Math.floor(B*U/72*96)}}),"./src/worker.js":(function(d,h,o){o.r(h),o("./node_modules/core-js/modules/es.array.concat.js"),o("./node_modules/core-js/modules/es.array.map.js"),o("./node_modules/core-js/modules/es.function.name.js"),o("./node_modules/core-js/modules/es.json.stringify.js"),o("./node_modules/core-js/modules/es.object.assign.js"),o("./node_modules/core-js/modules/es.object.keys.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.promise.js"),o("./node_modules/core-js/modules/es.regexp.to-string.js"),o("./node_modules/core-js/modules/esnext.iterator.constructor.js"),o("./node_modules/core-js/modules/esnext.iterator.for-each.js"),o("./node_modules/core-js/modules/esnext.iterator.map.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js"),o("./node_modules/core-js/modules/web.timers.js");var m=o("jspdf"),y=o("html2canvas"),p=o.n(y),j=o("./src/snapdom/clone.js"),b=o("./src/utils.js"),w=function B(U){var Q=Object.assign(B.convert(Promise.resolve()),JSON.parse(JSON.stringify(B.template))),k=B.convert(Promise.resolve(),Q);return k=k.setProgress(1,B,1,[B]),k=k.set(U),k};w.prototype=Object.create(Promise.prototype),w.prototype.constructor=w,w.convert=function(U,Q){return U.__proto__=Q||w.prototype,U},w.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},w.prototype.from=function(U,Q){function k(K){switch((0,b.objType)(K)){case"string":return"string";case"element":return K.nodeName.toLowerCase&&K.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(Q=Q||k(U),Q){case"string":return this.set({src:(0,b.createElement)("div",{innerHTML:U})});case"element":return this.set({src:U});case"canvas":return this.set({canvas:U});case"img":return this.set({img:U});default:return this.error("Unknown source type.")}})},w.prototype.to=function(U){switch(U){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},w.prototype.toContainer=function(){var U=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(U).then(function(){var k={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},K={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};k.opacity=0;var ee=(0,j.deepCloneBasic)(this.prop.src);return this.prop.overlay=(0,b.createElement)("div",{className:"html2pdf__overlay",style:k}),this.prop.container=(0,b.createElement)("div",{className:"html2pdf__container",style:K}),this.prop.container.appendChild(ee),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),new Promise(function(q){return setTimeout(q,10)})})},w.prototype.toCanvas=function(){var U=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(U).then(function(){var k=Object.assign({},this.opt.html2canvas);return delete k.onrendered,p()(this.prop.container,k)}).then(function(k){var K=this.opt.html2canvas.onrendered||function(){};K(k),this.prop.canvas=k,document.body.removeChild(this.prop.overlay)})},w.prototype.toImg=function(){var U=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(U).then(function(){var k=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=k})},w.prototype.toPdf=function(){var U=[function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(U).then(function(){var k=this.prop.canvas,K=this.opt,ee=k.height,q=Math.floor(k.width*this.prop.pageSize.inner.ratio),G=Math.ceil(ee/q),W=this.prop.pageSize.inner.height,he=document.createElement("canvas"),Z=he.getContext("2d");he.width=k.width,he.height=q,this.prop.pdf=this.prop.pdf||new m.jsPDF(K.jsPDF);for(var ie=0;ie<G;ie++){ie===G-1&&ee%q!==0&&(he.height=ee%q,W=he.height*this.prop.pageSize.inner.width/he.width);var ce=he.width,ae=he.height;Z.fillStyle="white",Z.fillRect(0,0,ce,ae),Z.drawImage(k,0,ie*q,ce,ae,0,0,ce,ae),ie&&this.prop.pdf.addPage();var de=he.toDataURL("image/"+K.image.type,K.image.quality);this.prop.pdf.addImage(de,K.image.type,K.margin[1],K.margin[0],this.prop.pageSize.inner.width,W)}})},w.prototype.output=function(U,Q,k){return k=k||"pdf",k.toLowerCase()==="img"||k.toLowerCase()==="image"?this.outputImg(U,Q):this.outputPdf(U,Q)},w.prototype.outputPdf=function(U,Q){var k=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(k).then(function(){return this.prop.pdf.output(U,Q)})},w.prototype.outputImg=function(U,Q){var k=[function(){return this.prop.img||this.toImg()}];return this.thenList(k).then(function(){switch(U){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+U+'" is not supported.'}})},w.prototype.save=function(U){var Q=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(Q).set(U?{filename:U}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},w.prototype.set=function(U){if((0,b.objType)(U)!=="object")return this;var Q=Object.keys(U||{}).map(function(k){switch(k){case"margin":return this.setMargin.bind(this,U.margin);case"jsPDF":return function(){return this.opt.jsPDF=U.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,U.pageSize);default:return k in w.template.prop?function(){this.prop[k]=U[k]}:function(){this.opt[k]=U[k]}}},this);return this.then(function(){return this.thenList(Q)})},w.prototype.get=function(U,Q){return this.then(function(){var K=U in w.template.prop?this.prop[U]:this.opt[U];return Q?Q(K):K})},w.prototype.setMargin=function(U){return this.then(function(){switch((0,b.objType)(U)){case"number":U=[U,U,U,U];case"array":if(U.length===2&&(U=[U[0],U[1],U[0],U[1]]),U.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=U}).then(this.setPageSize)},w.prototype.setPageSize=function(U){return this.then(function(){U=U||m.jsPDF.getPageSize(this.opt.jsPDF),U.hasOwnProperty("inner")||(U.inner={width:U.width-this.opt.margin[1]-this.opt.margin[3],height:U.height-this.opt.margin[0]-this.opt.margin[2]},U.inner.px={width:(0,b.toPx)(U.inner.width,U.k),height:(0,b.toPx)(U.inner.height,U.k)},U.inner.ratio=U.inner.height/U.inner.width),this.prop.pageSize=U})},w.prototype.setProgress=function(U,Q,k,K){return U!=null&&(this.progress.val=U),Q!=null&&(this.progress.state=Q),k!=null&&(this.progress.n=k),K!=null&&(this.progress.stack=K),this.progress.ratio=this.progress.val/this.progress.state,this},w.prototype.updateProgress=function(U,Q,k,K){return this.setProgress(U?this.progress.val+U:null,Q||null,k?this.progress.n+k:null,K?this.progress.stack.concat(K):null)},w.prototype.then=function(U,Q){var k=this;return this.thenCore(U,Q,function(ee,q){return k.updateProgress(null,null,1,[ee]),Promise.prototype.then.call(this,function(W){return k.updateProgress(null,ee),W}).then(ee,q).then(function(W){return k.updateProgress(1),W})})},w.prototype.thenCore=function(U,Q,k){k=k||Promise.prototype.then;var K=this;U&&(U=U.bind(K)),Q&&(Q=Q.bind(K));var ee=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise",q=ee?K:w.convert(Object.assign({},K),Promise.prototype),G=k.call(q,U,Q);return w.convert(G,K.__proto__)},w.prototype.thenExternal=function(U,Q){return Promise.prototype.then.call(this,U,Q)},w.prototype.thenList=function(U){var Q=this;return U.forEach(function(K){Q=Q.thenCore(K)}),Q},w.prototype.catch=function(B){B&&(B=B.bind(this));var U=Promise.prototype.catch.call(this,B);return w.convert(U,this)},w.prototype.catchExternal=function(U){return Promise.prototype.catch.call(this,U)},w.prototype.error=function(U){return this.then(function(){throw new Error(U)})},w.prototype.using=w.prototype.set,w.prototype.saveAs=w.prototype.save,w.prototype.export=w.prototype.output,w.prototype.run=w.prototype.then,h.default=w}),html2canvas:(function(d){d.exports=r}),jspdf:(function(d){d.exports=n})},c={};function A(d){var h=c[d];if(h!==void 0)return h.exports;var o=c[d]={exports:{}};return i[d].call(o.exports,o,o.exports,A),o.exports}(function(){A.n=function(d){var h=d&&d.__esModule?function(){return d.default}:function(){return d};return A.d(h,{a:h}),h}})(),(function(){A.d=function(d,h){for(var o in h)A.o(h,o)&&!A.o(d,o)&&Object.defineProperty(d,o,{enumerable:!0,get:h[o]})}})(),(function(){A.o=function(d,h){return Object.prototype.hasOwnProperty.call(d,h)}})(),(function(){A.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}})();var u={};return(function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/A.r(u);var d=A("./src/worker.js");A("./src/plugin/jspdf-plugin.js"),A("./src/plugin/pagebreaks.js"),A("./src/plugin/hyperlinks.js");var h=function o(m,y){var p=new o.Worker(y);return m?p.from(m).save():p};h.Worker=d.default,u.default=h})(),u=u.default,u})()})})(mv)),mv.exports}var Qq=Dq();const _d=l1(Qq),wu=Object.freeze(Object.defineProperty({__proto__:null,default:_d},Symbol.toStringTag,{value:"Module"}));function Dm(t,s){return 2*t+s}function Qm(t,s){return t*s/9}const _v="/image.png",_q=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),Kr=t=>(t||"").toString().toUpperCase(),hR={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},Ty={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},Mq=(t,s)=>{const n=Kr(t.product),r=Kr(t.name),i=Kr(t.category),c=Kr(t.subCategory),u=(hR[s]||[s.toUpperCase()]).some(o=>n.includes(o)||r.includes(o)||i.includes(o)||c.includes(o)),d=Ty[s],h=d&&Kr(n).includes(Kr(d));return u||h},kp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function Pq(){const{shops:t,materials:s,products:n}=fi(),{toast:r}=ua(),[i,c]=S.useState(1),A=typeof window<"u"&&window.location.search.includes("step=11"),[u,d]=S.useState(""),[h,o]=S.useState(""),[m,y]=S.useState(null),[p,j]=S.useState(null),[b,w]=S.useState(null),[B,U]=S.useState(null),[Q,k]=S.useState(null),[K,ee]=S.useState(null),[q,G]=S.useState(1),[W,he]=S.useState(7),[Z,ie]=S.useState(3),[ce,ae]=S.useState(6),[de,se]=S.useState(2),[re,te]=S.useState([]),[be,He]=S.useState([]);S.useEffect(()=>{lt("/api/accumulated-products/doors",{headers:{}}).then(N=>N.json()).then(N=>{He(N.data||[])}).catch(N=>console.error("Failed to load accumulated products",N))},[]),S.useEffect(()=>{if(typeof window<"u"){const x=new URLSearchParams(window.location.search).get("step");if(x){const I=parseInt(x,10);I>=1&&I<=12&&c(I)}}},[]),S.useEffect(()=>{i===12&&lt("/api/accumulated-products/doors",{headers:{}}).then(N=>N.json()).then(N=>{const x=N.data||[];He(x),console.debug("Restored doors_accumulated_products for Step 12:",x.length)}).catch(N=>console.error("Failed to load accumulated products for Step 12",N))},[i]);const pe=N=>{const x=N?.doorType??b,I=N?.panelType??p,F=N?.subOption??B;if(!x)return null;const _=Le.find(ne=>ne.value===x);let L=_?_.label:Ty[x]||x;/door/i.test(L)||(L=`${L} Door`);const P=I==="panel"?"With Panel":"Without Panel",z=F?` - ${F}`:"";return`${P}  ${L}${z}`},Y=()=>{const N=(h||"").toString();if(!b&&!N)return null;const x=N||pe(),I=N||Ty[b]||b,F=b?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(b):Kr(x).includes("GLASS")||Kr(x).includes("STILE");return{label:x,productName:I,requiresGlazing:F}},me=()=>{const N=(h||"").toString();if(!b&&!N||!s.length)return[];const x=N||(b?Ty[b]:"");let I=[];if(x&&(I=s.filter(_=>{const L=(_.product||"").toString();if(!L||!x)return!1;const P=Kr(L),z=Kr(x);return P.includes(z)||z.includes(P)})),(!I||I.length===0)&&!N&&(I=b?s.filter(_=>Mq(_,b)):s.filter(_=>{const L=(_.product||"").toString();if(!x)return!1;const P=Kr(L),z=Kr(x);return P.includes(z)||z.includes(P)})),I.length===0)return[];const F=new Map;for(const _ of I){const L=`${Kr(_.product)}__${Kr(_.name)}__${_q(_.code)}`,P=F.get(L);(!P||(_.rate||0)<(P.rate||0))&&F.set(L,_)}return Array.from(F.values())},Se={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},je=["Single Glass","Double Glass"],Le=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],ge=(N,x)=>{const I=q||1,F=W||7,_=Z||3,L=ce||6,P=de||2,z=Dm(F,_),ne=N.toLowerCase();let Ie=0;return ne.includes("frame")||ne.includes("door frame")?Ie=z*I:ne.includes("door")&&(ne.includes("panel")||ne.includes("shutter")||ne.includes("flush")||ne.includes("wooden"))?Ie=I:ne.includes("hinge")?Ie=I*3:ne.includes("lock")||ne.includes("handle")||ne.includes("stopper")||ne.includes("bolt")?Ie=I:ne.includes("glass")?Ie=Qm(L,P)*I:Ie=I,Math.max(1,Math.ceil(Ie))},ye=(N,x)=>{const I=N||re,F=x||ht;return I.map(_=>{let L=Ne.find(Ns=>Ns.id===_.materialId);if(L||(L=s.find(Ns=>Ns.id===_.materialId)||null),!L)return null;const P=s.find(Ns=>{const Zs=Kr(Ns.product)===Kr(L.product),Rn=Kr(Ns.name)===Kr(L.name),$=Ns.shopId===_.selectedShopId,ve=kp(Ns)===(_.selectedBrand||"Generic");return Zs&&Rn&&$&&ve})||L,z=t.find(Ns=>Ns.id===_.selectedShopId),ne=_.rowId||(_.batchId?`${_.batchId}-${P.id}`:P.id),Ie=F[ne]||F[P.id]||F[L.id],st=ge(P.name,P.unit),ot=Ie?.quantity??st,Dt=Ie?.supplyRate??P.rate??0,rs=Ie?.installRate??0,cs=(dn||[]).find(Ns=>Ns.rowId===ne||`${Ns.batchId||""}-${Ns.id}`===ne);return{id:P.id,batchId:_.batchId,rowId:ne,name:P.name,quantity:ot,unit:P.unit,rate:Dt,shopId:_.selectedShopId,shopName:z?.name||"Unknown",installRate:rs,doorType:cs?.doorType||cs?.door_type||void 0,panelType:cs?.panelType||cs?.panel_type||void 0,subOption:cs?.subOption||cs?.sub_option||void 0,glazingType:cs?.glazingType||cs?.glazing_type||void 0,productLabel:cs?.productLabel||void 0}}).filter(_=>_!==null)},we=()=>ye().reduce((N,x)=>N+x.quantity*x.rate,0),Ne=me(),ke=N=>(N?.name||N?.title||N?.label||N?.productName||N?.product||"").toString(),Be=N=>(N?.category||N?.type||N?.group||N?.section||"").toString(),Qe=N=>Xc(N)==="civilwall",le=N=>{const x=Kr(N);return x.includes("FLUSH")?"flush":x.includes("WPC")?"wpc":x.includes("STILE")||x.includes("ALUMIN")?"stile":x.includes("GLASS PANEL")?"glasspanel":x.includes("GLASS")?"glassdoor":x.includes("WOOD")||x.includes("TEAK")?"wooden":null},ct=(n||[]).filter(Qe).slice().sort((N,x)=>{const I=ke(N),F=ke(x);return I.localeCompare(F)}),rt=N=>{const x=ke(N);d(N.id||x),o(x);const I=le(x);w(I||b),U(null),k(null),ee(null),te([]),ft({}),Ft({}),Ss({}),c(6)},[ht,ft]=S.useState({}),[Jt,gt]=S.useState([]),[tt,Lt]=S.useState({}),[qt,Fs]=S.useState("Concept Trunk Interiors"),[xs,hs]=S.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[it,Pe]=S.useState("33ASOPS5560M1Z1"),[dt,ze]=S.useState(""),[Tt,Je]=S.useState(new Date().toISOString().slice(0,10)),[vt,$e]=S.useState(""),[St,Rt]=S.useState("50% Advance and 50% on Completion"),[Zt,bt]=S.useState(""),[Vt,vs]=S.useState(""),[us,jt]=S.useState(""),[kt,Ft]=S.useState({}),[is,Ss]=S.useState({}),[nn,es]=S.useState({}),[zs,Us]=S.useState({}),[Vs,Ls]=S.useState({}),[js,Os]=S.useState({}),[Ds,ut]=S.useState([]),[Pt,Kt]=S.useState([]),[ws,Ts]=S.useState(""),[ys,Qs]=S.useState([]),[Gt,Ys]=S.useState([]),[Cn,na]=S.useState([]),[tr,Mt]=S.useState(!1);S.useEffect(()=>{(async()=>{if(dt)try{const x=await lt(`/api/estimator-step9-items?session_id=${dt}&estimator=civilwall`,{headers:{}});if(x.ok){const _=await x.json();Qs(_.items||[])}const I=await lt(`/api/estimator-step11-groups?session_id=${dt}&estimator=civilwall`,{headers:{}});if(I.ok){const _=await I.json();Ys(_.items||[])}const F=await lt(`/api/estimator-step12-qa-selection?session_id=${dt}&estimator=civilwall`,{headers:{}});if(F.ok){const _=await F.json();na(_.items||[])}}catch(x){console.warn("Failed to load data from DB:",x)}})()},[dt]),S.useEffect(()=>{if(i===7){const N=ye(),x={};N.forEach(I=>{x[I.id]={quantity:I.quantity||0,supplyRate:I.rate||0,installRate:0}}),ft(x)}},[i,re]),S.useEffect(()=>{if(i===9){const N=ye(Jt,tt);if(N.length>0){const x=N[0].shopId,I=t.find(F=>F.id===x);if(I){const F=[I.name||"",I.address||"",I.area||"",I.city||"",I.state||"",I.pincode||"",I.gstNo?`GSTIN: ${I.gstNo}`:"",I.phone||""].filter(Boolean);jt(F.join(`
`))}}}},[i,Jt,tt,re,t]),S.useEffect(()=>{if(i===9){Nn();const N=[],x={},I={},F={};if(dn&&dn.length>0)for(const _ of dn){const L=_.rowId||`${_.batchId||""}-${_.id}`;N.findIndex(z=>z.materialId===_.id&&z.rowId===L&&(z.batchId||"")===(_.batchId||""))===-1&&(N.push({materialId:_.id,selectedShopId:_.shopId||"",selectedBrand:_.brand||void 0,batchId:_.batchId,rowId:L}),x[L]={quantity:Number(_.quantity||0),supplyRate:Number(_.supplyRate??_.rate??0),installRate:Number(_.installRate||0)},_.description&&(I[L]=_.description),_.location&&(F[L]=_.location))}if(ys&&ys.length>0)for(const _ of ys){if(!s.find(ot=>ot.id===_.material_id))continue;const P=_.material_id,z=_.row_id||(_.batch_id?`${_.batch_id}-${P}`:P),ne=_.shop_id||"",Ie=_.brand||void 0;N.findIndex(ot=>ot.materialId===P&&(ot.batchId||"")===(_.batch_id||"")&&(ot.rowId||"")===z)===-1&&(N.push({materialId:P,selectedShopId:ne,selectedBrand:Ie,batchId:_.batch_id||(_.row_id?z.replace(`-${P}`,""):void 0)}),x[z]={quantity:Number(_.quantity||0),supplyRate:Number(_.supply_rate||_.rate||0),installRate:Number(_.install_rate||0)},_.description&&(I[z]=_.description),_.location&&(F[z]=_.location))}re&&re.length>0&&re.forEach(_=>{if(N.findIndex(P=>P.materialId===_.materialId&&P.batchId===_.batchId)===-1){N.push(_);const P=s.find(z=>z.id===_.materialId);if(P){const z=_.batchId?`${_.batchId}-${_.materialId}`:_.materialId;x[z]={quantity:ht[_.materialId]?.quantity??P.quantity??1,supplyRate:ht[_.materialId]?.supplyRate??P.rate??0,installRate:ht[_.materialId]?.installRate??0}}}}),N.length>0&&gt(N),Object.keys(x).length>0&&Lt(x),Object.keys(I).length>0&&Ft(_=>({..._,...I})),Object.keys(F).length>0&&Ss(_=>({..._,...F}))}},[i,re,ys]),S.useEffect(()=>{i===11&&(async()=>{if(dt)try{const x=await lt(`/api/estimator-step11-groups?session_id=${dt}&estimator=civilwall`,{headers:{}});if(x.ok){const F=(await x.json()).items||[],_={},L={},P={},z={};F.forEach(ne=>{const Ie=s.find(st=>st.name===ne.item);Ie&&(_[Ie.id]=Number(ne.supply_rate||0),L[Ie.id]=Number(ne.install_rate||0),P[Ie.id]=Number(ne.qty||0),z[Ie.id]=ne.unit||"")}),Os(ne=>({...ne,..._})),Ls(ne=>({...ne,...L})),es(ne=>({...ne,...P})),Us(ne=>({...ne,...z}))}}catch(x){console.warn("Failed to load step 11 data:",x)}})()},[i,dt,Gt]);const bn=S.useRef(null);S.useEffect(()=>{Nn().catch(()=>{})},[]),S.useEffect(()=>{(async()=>{if(dt)try{const x=await lt(`/api/estimator-step9-items?session_id=${dt}&estimator=civilwall`,{headers:{}});if(x.ok){const I=await x.json(),F=I.items.map(_=>({id:_.material_id,rowId:_.row_id,batchId:_.batch_id,name:_.name,unit:_.unit,quantity:_.quantity,supplyRate:_.supply_rate,installRate:_.install_rate,shopId:_.shop_id,shopName:_.shop_name,description:_.description,location:_.location,doorType:_.door_type,panelType:_.panel_type,subOption:_.sub_option,glazingType:_.glazing_type}));if(Hs(F),I.items.length>0){const _=I.items[0];ds({doorType:_.door_type,panelType:_.panel_type,subOption:_.sub_option,glazingType:_.glazing_type,count:_.qty,height:_.height,width:_.width,glassHeight:_.glass_height,glassWidth:_.glass_width,subtotal:_.subtotal,sgst:_.sgst,cgst:_.cgst,round_off:_.round_off,grand_total:_.grand_total})}}}catch(x){console.warn("Failed to load step 9 from DB",x)}})()},[dt]),S.useEffect(()=>(bn.current&&clearTimeout(bn.current),bn.current=setTimeout(async()=>{new Date().toISOString();try{if(!dt)return;const N=ye().map((x,I)=>{const F=x.rowId||(x.batchId?`${x.batchId}-${x.id}`:x.id);return{estimator:"civilwall",session_id:dt,s_no:I+1,row_id:String(F),batch_id:x.batchId||null,material_id:x.id,name:x.name,unit:x.unit,quantity:Number(ht[x.id]?.quantity??x.quantity??0),supply_rate:Number(ht[x.id]?.supplyRate??x.rate??0),install_rate:Number(ht[x.id]?.installRate??0),shop_id:x.shopId||"",shop_name:x.shopName||"",description:kt[x.id]||"",location:is[x.id]||"",door_type:b,panel_type:p,sub_option:B,glazing_type:K,qty:q,height:W,width:Z,glass_height:ce,glass_width:de}});await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"civilwall",session_id:dt,items:N})})}catch{}},800),()=>{bn.current&&clearTimeout(bn.current)}),[re,ht,kt,is,b,p,B,K,q,W,Z,ce,de,dt]);const Tr=N=>{const x=Ne.find(ne=>ne.id===N);if(!x)return;if(re.find(ne=>ne.materialId===N)){te(ne=>ne.filter(Ie=>Ie.materialId!==N));return}const F=s.filter(ne=>Kr(ne.product)===Kr(x.product)&&Kr(ne.name)===Kr(x.name)).map(ne=>({brand:kp(ne),shopId:ne.shopId,rate:ne.rate||0})),L=Array.from(new Set(F.map(ne=>ne.brand))).sort()[0]||"Generic",z=F.filter(ne=>ne.brand===L).sort((ne,Ie)=>ne.rate-Ie.rate)[0];z?.shopId&&te(ne=>[...ne,{materialId:N,selectedShopId:z.shopId,selectedBrand:L}])},lr=(N,x)=>{te(I=>I.map(F=>F.materialId===N?{...F,selectedShopId:x}:F))},Bs=(N,x)=>{const I=Ne.find(L=>L.id===N);if(!I)return;const _=s.filter(L=>Kr(L.product)===Kr(I.product)&&Kr(L.name)===Kr(I.name)).map(L=>({brand:kp(L),shopId:L.shopId,rate:L.rate||0})).filter(L=>L.brand===x).sort((L,P)=>L.rate-P.rate)[0]?.shopId||"";te(L=>L.map(P=>P.materialId===N?{...P,selectedBrand:x,selectedShopId:_||P.selectedShopId}:P))},[Js,Pn]=S.useState([]),kr=()=>{const N=(i===9?ye(Jt,tt):ye()).map(x=>x.rowId||x.id);Pn(x=>x.length===N.length?[]:N)},jr=async()=>{if(Js.length!==0){try{const N=[],x=[];for(const I of Js){const F=dn?.find(_=>`${_.batchId||""}-${_.id}`===I);if(F&&F.id){const _=ys.find(L=>L.id===F.id);_&&N.push(_)}else{const _=Jt.find(L=>`${L.batchId||""}-${L.materialId}`===I);_&&x.push(_)}}if(N.length>0&&dt&&(await lt("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:dt,estimator:"civilwall",items:N})}),Hs(I=>I?I.filter(F=>!N.some(_=>_.id===F.id)):null)),x.length>0&&gt(I=>I.filter(F=>!x.some(_=>`${_.batchId||""}-${_.materialId}`==`${F.batchId||""}-${F.materialId}`))),gt(I=>I.filter(F=>!Js.includes(`${F.batchId||""}-${F.materialId}`))),Lt(I=>{const F={...I};return Js.forEach(_=>delete F[_]),F}),dt){const F=await(await lt(`/api/estimator-step9-items?session_id=${dt}&estimator=civilwall`,{headers:{}})).json();Qs(F.items||[])}r({title:"Success",description:`${Js.length} item(s) deleted successfully!`})}catch(N){console.warn("Failed to delete items",N),r({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}Pn([])}},[Ur,hr]=S.useState([]),qs=S.useRef(""),[tn,Is]=S.useState(null),[dn,Hs]=S.useState(null),[wr,at]=S.useState({}),[ms,ds]=S.useState(null),Nn=async()=>{try{const N=await lt("/api/boq");if(N.status===401){hr([]),qs.current!=="401"&&(qs.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!N.ok){const F=await N.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${F||N.status}`)}if(!(N.headers.get("content-type")||"").includes("application/json")){const F=await N.text().catch(()=>"");console.warn("/api/boq returned non-json:",F),hr([]);return}const I=await N.json();hr(I.boqs||[]),qs.current=""}catch(N){console.error("fetchSavedBoqs",N);const x=String(N?.message||N||"");if(!x)return;qs.current!==x&&(qs.current=x,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},Yn=async()=>{try{if(!dt)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const N={estimator:"civilwall",billNo:dt,doorType:b,panelType:p,subOption:B,glazingType:K,qty:q,height:W,width:Z,glassHeight:ce,glassWidth:de,materials:dn&&dn.length>0?dn:ye(),subtotal:Te,sgst:Ye,cgst:Oe,roundOff:yt,grandTotal:Qt},x=await lt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!x.ok){const _=await x.text().catch(()=>"");throw new Error(_||"save failed")}const I=x.headers.get("content-type")||"";let F=null;if(I.includes("application/json"))F=await x.json();else{const _=await x.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",_),F={boq:null}}return await Nn(),Is(F?.boq||F?.boqs?.[0]||null),!0}catch(N){return console.error("handleSaveBOQ",N),!1}},sr=async N=>{try{if(!(await lt(`/api/boq/${N}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await Nn()}catch(x){console.error("handleDeleteSavedBoq",x)}},ha=()=>{c(1),w(null),j(null),U(null),k(null),G(1),he(7),ie(3),ae(0),se(0),ut([]),es({}),Ft({}),Ss({}),Us({}),Os({}),Ls({}),at({}),Is(null)},Ma=async()=>{Mt(!0);try{let N=Gt||[];if(dt)try{const L=await lt(`/api/estimator-step11-groups?session_id=${dt}&estimator=civilwall`);L.ok&&(N=(await L.json()).items||[],Ys(N))}catch(L){console.warn("Failed to refresh step11 items before save",L)}const x=Ps.map(L=>({estimator:"civilwall",session_id:dt,group_key:(L.groupKey||`${L.doorType||"door"}||${L.panelType||""}||${L.subOption||""}`)+"::"+(L.name||""),group_id:L.groupId||`group_${L.groupKey||""}`,item_name:L.name,unit:L.unit,quantity:L.quantity,location:L.location||"",description:L.description||"",supply_rate:js[L.id]||L.supplyRate||0,install_rate:Vs[L.id]||L.installRate||0,supply_amount:(L.quantity||0)*(js[L.id]||L.supplyRate||0),install_amount:(L.quantity||0)*(Vs[L.id]||L.installRate||0),supply_subtotal:Ps.reduce((P,z)=>P+(z.quantity||0)*(js[z.id]||z.supplyRate||0),0),install_subtotal:Ps.reduce((P,z)=>P+(z.quantity||0)*(Vs[z.id]||z.installRate||0),0),sgst:Ye,cgst:Oe,round_off:yt,grand_total:Ps.reduce((P,z)=>P+(z.quantity||0)*((js[z.id]||z.supplyRate||0)+(Vs[z.id]||z.installRate||0)),0)+Ye+Oe+yt})),I=new Set((N||[]).map(L=>L.group_key||L.groupKey)),F=x.filter(L=>!I.has(L.group_key));if(F.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),Mt(!1),!0;const _=await lt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:F})});if(!_.ok){const L=await _.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${L||_.statusText}`,variant:"destructive"}),Mt(!1),!1}try{const L=await lt(`/api/estimator-step11-groups?session_id=${dt}&estimator=civilwall`);if(L.ok){const P=await L.json();Ys(P.items||[])}}catch(L){console.warn("Failed to reload step11 items after save",L)}return He([]),r({title:"Success",description:"Step 11 saved to database."}),Mt(!1),!0}catch(N){return console.error("handleSaveAccumulatedBOQ",N),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),Mt(!1),!1}},Na=N=>{if(ze(N.bill_no||""),w(N.door_type||null),j(N.panel_type||null),U(N.sub_option||null),ee(N.glazing_type||null),G(N.qty||1),he(N.height||7),ie(N.width||3),ae(N.glass_height||6),se(N.glass_width||2),Array.isArray(N.materials)){const x=N.materials.map(I=>({materialId:I.id,selectedShopId:I.shopId||I.shop_id||I.shopId||"",selectedBrand:I.shopName||I.brand||I.selectedBrand||void 0}));te(x.filter(Boolean))}Is(N)},cr=(N,x)=>{if(i===9){Lt(I=>({...I,[N]:{...I[N]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(x))}}));return}ft(I=>({...I,[N]:{...I[N]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(x))}}))},Ka=(N,x)=>{if(i===9){Lt(I=>({...I,[N]:{...I[N]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(x)),installRate:I[N]?.installRate||0}}));return}ft(I=>({...I,[N]:{...I[N]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(x)),installRate:I[N]?.installRate||0}}))},pa=(N,x)=>{if(i===9){Lt(I=>({...I,[N]:{...I[N]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(x)),supplyRate:I[N]?.supplyRate||0}}));return}ft(I=>({...I,[N]:{...I[N]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(x)),supplyRate:I[N]?.supplyRate||0}}))},er=()=>{const N=document.getElementById("boq-pdf");if(!N){alert("BOQ content not found");return}setTimeout(()=>{_d().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:x=>x.className?.toString().includes("bg-")||x.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(N).save().catch(x=>{console.error("PDF Export Error:",x),alert("PDF export failed. Check console.")})},100)},oa=async()=>{const N=document.getElementById("boq-final-pdf");if(!N){alert("Final BOQ content not found");return}const x=(await Yc(async()=>{const{default:I}=await Promise.resolve().then(()=>wu);return{default:I}},void 0)).default;x().set({margin:10,filename:`BOQ-${dt||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(N).save()},pi=()=>{const N=ye(),x=Y(),I=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${p==="panel"?"With Panel":"Without Panel"} - ${x?.label}`,`Dimensions: ${W}ft  ${Z}ft (Count: ${q})`,...K?[`Glazing: ${K}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];N.forEach((z,ne)=>{const Ie=z.quantity*z.rate;I.push(`${ne+1},"${z.name}","${z.unit}",${z.quantity},${z.rate},"${z.shopName}",${Ie}`)}),I.push("",`TOTAL COST,,,${we().toFixed(2)}`);const F=I.join(`
`),_=new Blob([F],{type:"text/csv"}),L=window.URL.createObjectURL(_),P=document.createElement("a");P.href=L,P.download=`BOQ-Doors-${new Date().getTime()}.csv`,P.click(),URL.revokeObjectURL(L)},$a=()=>{const N=Ps||[],x=[];x.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),N.forEach((P,z)=>{const ne=Number(P.supplyRate??P.rate??0),Ie=Number(P.installRate??0),st=Number(P.quantity||0),ot=st*ne,Dt=st*Ie,rs=(P.location||is[P.id]||"").toString().replace(/"/g,'""'),cs=(P.description||kt[P.id]||P.name||"").toString().replace(/"/g,'""'),Rn=(pe({doorType:P.doorType||P.door_type,panelType:P.panelType||P.panel_type,subOption:P.subOption||P.sub_option,glazingType:P.glazingType||P.glazing_type})||P.name||"").replace(/"/g,'""');x.push(`${z+1},"${Rn}","${rs}","${cs}",${P.unit},${st},${ne.toFixed(2)},${Ie.toFixed(2)},${ot.toFixed(2)},${Dt.toFixed(2)}`)});const I=x.join(`
`),F=new Blob([I],{type:"text/csv"}),_=window.URL.createObjectURL(F),L=document.createElement("a");L.href=_,L.download=`BOQ-Doors-Step11-${new Date().getTime()}.csv`,L.click(),URL.revokeObjectURL(_)},Va=async()=>{const N=ye(Jt,tt).map(P=>{const z=P.rowId||`${P.batchId}-${P.id}`;return{id:P.id,rowId:z,batchId:P.batchId||null,name:P.name,productLabel:P.productLabel||null,product_label:P.productLabel||null,unit:P.unit,quantity:tt[z]?.quantity??tt[P.id]?.quantity??P.quantity,supplyRate:tt[z]?.supplyRate??tt[P.id]?.supplyRate??P.rate,installRate:tt[z]?.installRate??tt[P.id]?.installRate??P.installRate??0,shopId:P.shopId,shopName:P.shopName,description:kt[z]||kt[P.id]||"",location:is[z]||is[P.id]||"",doorType:P.doorType,panelType:P.panelType,subOption:P.subOption,glazingType:P.glazingType,isSaved:P.isSaved||!1}}),x=N.filter(P=>!P.isSaved);if(x.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let I=dt;(!I||I.trim()==="")&&(I=`DOOR-${Date.now()}`,ze(I));const F=ms||(()=>{const P=N.reduce((ot,Dt)=>ot+Number(Dt.quantity||0)*(Number(Dt.supplyRate||0)+Number(Dt.installRate||0)),0),z=P*.09,ne=P*.09,Ie=Math.round(P+z+ne)-(P+z+ne),st=P+z+ne+Ie;return{subtotal:P,sgst:z,cgst:ne,round_off:Ie,grand_total:st}})(),_={id:`local-${Date.now()}`,estimator:"civilwall",bill_no:I,door_type:ms?.doorType||ms?.door_type||b,panel_type:ms?.panelType||ms?.panel_type||p,sub_option:ms?.subOption||ms?.sub_option||B,glazing_type:ms?.glazingType||ms?.glazing_type||K,qty:ms?.count||ms?.qty||q,height:ms?.height||W,width:ms?.width||Z,glass_height:ms?.glassHeight||ms?.glass_height||ce,glass_width:ms?.glassWidth||ms?.glass_width||de,materials:N,subtotal:F.subtotal,sgst:F.sgst,cgst:F.cgst,round_off:F.round_off,grand_total:F.grand_total,created_at:new Date().toISOString()};Is(_),Hs(N);try{ds(P=>({...P||{},...F}))}catch{}const L=x.map((P,z)=>({estimator:"civilwall",session_id:I,s_no:z+1,row_id:String(P.rowId||`${P.batchId||""}-${P.id}`),batch_id:P.batchId||null,material_id:P.id,name:P.name,unit:P.unit,quantity:Number(P.quantity||0),supply_rate:Number(P.supplyRate||0),install_rate:Number(P.installRate||0),shop_id:P.shopId||"",shop_name:P.shopName||"",description:P.description||"",location:P.location||"",door_type:P.doorType||ms?.doorType||ms?.door_type||b||null,panel_type:P.panelType||ms?.panelType||ms?.panel_type||p||null,sub_option:P.subOption||ms?.subOption||ms?.sub_option||B||null,glazing_type:P.glazingType||ms?.glazingType||ms?.glazing_type||K||null,qty:ms?.count||ms?.qty||q,height:ms?.height||W,width:ms?.width||Z,glass_height:ms?.glassHeight||ms?.glass_height||ce,glass_width:ms?.glassWidth||ms?.glass_width||de,subtotal:F.subtotal,sgst:F.sgst,cgst:F.cgst,round_off:F.round_off,grand_total:F.grand_total}));try{await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"civilwall",session_id:I,items:L})});const z=await(await lt(`/api/estimator-step9-items?session_id=${I}&estimator=civilwall`,{headers:{}})).json();Qs(z.items||[]);const ne=(dn||[]).map(Ie=>x.some(ot=>Ie.rowId===ot.rowId||`${Ie.batchId||""}-${Ie.id}`==`${ot.batchId||""}-${ot.id}`)?{...Ie,isSaved:!0}:Ie);Hs(ne),r({title:"Success",description:`${x.length} new material(s) saved successfully to database!`})}catch(P){console.warn("Failed to save step 9 to DB",P),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},ti=N=>{let x=5381;for(let I=0;I<N.length;I+=1)x=(x<<5)+x^N.charCodeAt(I);return Math.abs(x>>>0).toString(36)},xe=()=>{const N=JSON.stringify({doorType:b,panelType:p,subOption:B,glazingType:K,count:q,height:W,width:Z,glassHeight:ce,glassWidth:de,selectedMaterials:(re||[]).map(x=>({materialId:x.materialId,selectedShopId:x.selectedShopId,selectedBrand:x.selectedBrand})),editable:Object.keys(ht||{}).sort().map(x=>({id:x,...ht[x]}))});return`batch-${ti(N)}`},_e=()=>{const N=xe(),x=ye(re,ht).map(P=>({id:P.id,rowId:`${N}-${P.id}`,batchId:N,name:P.name,unit:P.unit,quantity:ht[P.id]?.quantity??P.quantity,supplyRate:ht[P.id]?.supplyRate??P.rate,installRate:ht[P.id]?.installRate??0,shopId:P.shopId,shopName:P.shopName,description:kt[P.id]||"",location:is[P.id]||"",doorType:b,productLabel:h||pe(),panelType:p,subOption:B,glazingType:K,isSaved:!1}));if(x.length===0){c(9);return}const _=[...(dn||[]||[]).filter(P=>P.batchId!==N),...x];Hs(_),gt((re||[]).map(P=>({materialId:P.materialId,selectedShopId:P.selectedShopId,selectedBrand:P.selectedBrand,batchId:N})));const L={};_.forEach(P=>{const z=P.rowId||`${P.batchId}-${P.id}`;L[z]={quantity:Number(P.quantity||0),supplyRate:Number(P.supplyRate||P.rate||0),installRate:Number(P.installRate||0)}}),Lt(L);try{const P=we(),z=P*.09,ne=P*.09,Ie=Math.round(P+z+ne)-(P+z+ne),st=P+z+ne+Ie;ds({doorType:b,panelType:p,subOption:B,glazingType:K,count:q,height:W,width:Z,glassHeight:ce,glassWidth:de,subtotal:P,sgst:z,cgst:ne,round_off:Ie,grand_total:st})}catch{}c(9)},nt=i===9||i===11?dn||[]:ye(),V=i===9?tt:ht,Te=nt.reduce((N,x)=>N+x.quantity*((V[x.id]?.supplyRate??x.rate)+(V[x.id]?.installRate??x.installRate??0)),0),Ye=Te*.09,Oe=Te*.09,yt=Math.round(Te+Ye+Oe)-(Te+Ye+Oe),Qt=Te+Ye+Oe+yt,ln=be.length>0?be.flatMap(N=>N.materials||[]):dn&&dn.length>0?dn:nt&&nt.length>0?nt:tn&&tn.materials&&tn.materials.length>0?Array.isArray(tn.materials)?tn.materials:JSON.parse(tn.materials||"[]"):nt,Ln=(()=>{const N=new Map;for(const I of ln||[]){const F=I.productLabel||I.doorType||I.door_type||ms?.doorType||ms?.door_type||b||"door",_=I.panelType||I.panel_type||ms?.panelType||ms?.panel_type||p||"",L=I.subOption||I.sub_option||ms?.subOption||ms?.sub_option||"",P=`${F}||${_}||${L}`;N.has(P)||N.set(P,[]),N.get(P).push(I)}const x=[];for(const[I,F]of N.entries()){const[_,L,P]=I.split("||"),z=`group_${I}`,ne=kt[z]||"",Ie=is[z]||"";let st=Number(wr[z]??ms?.count??ms?.qty??q??1);const ot=String(ne).match(/Qty:\s*(\d+(?:\.\d+)?)/);ot&&(wr[z]===void 0||wr[z]===null)&&(st=Number(ot[1]));const Dt=F.reduce(($,ve)=>$+Number(ve.quantity||0)*Number(ve.supplyRate??ve.rate??0),0),rs=st>0?Dt/st:Dt,cs=F.reduce(($,ve)=>$+Number(ve.quantity||0)*Number(ve.installRate??0),0),Ns=st>0?cs/st:cs,Zs=F[0]&&F[0].productLabel||pe({doorType:_,panelType:L,subOption:P})||_,Rn=String(ne).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();x.push({id:z,groupKey:I,name:Zs,location:Ie||"",description:Rn||"",unit:"pcs",quantity:st,supplyRate:Number(rs||0),installRate:Number(Vs[z]??Ns??0),supplyAmount:Number(rs*st||0),installAmount:Number((Vs[z]??Ns)*st||0)})}return x})();(Gt||[]).filter(N=>N.item||N.item_name).map((N,x)=>{const I=N.group_key||N.groupKey||`${N.door_type||N.doorType||"door"}||${N.panel_type||N.panelType||""}||${N.sub_option||N.subOption||""}`;return{id:N.id,groupKey:I,name:N.productLabel||N.item_name||N.item||N.name||N.door_label||N.doorType||N.door_type||"Door",location:N.location||"",description:N.description||"",unit:N.unit||"pcs",quantity:Number(N.quantity??N.qty??1),supplyRate:Number(N.supply_rate??N.supplyRate??0),installRate:Number(N.install_rate??N.installRate??0),supplyAmount:Number(N.supply_amount??0),installAmount:Number(N.install_amount??0),doorType:N.door_type||N.doorType,panelType:N.panel_type||N.panelType,subOption:N.sub_option||N.subOption}});const Ps=(be.length===0?Ln.filter(N=>!(Gt||[]).some(I=>(I.group_key||I.groupKey||`${I.door_type||""}||${I.panel_type||""}||${I.sub_option||""}`)===N.groupKey)):be.map((N,x)=>({id:`accumulated_${x}`,groupKey:`${N.doorType||"door"}||${N.panelType||""}||${N.subOption||""}`,name:N.productLabel||N.materials?.[0]?.productLabel||N.doorLabel||pe({doorType:N.doorType,panelType:N.panelType,subOption:N.subOption})||N.doorType,location:N.location||"",description:N.description||"",unit:"pcs",quantity:N.count||1,supplyRate:N.materials?.reduce((I,F)=>I+Number(F.quantity||0)*Number(F.supplyRate??F.rate??0),0)||0,installRate:N.materials?.reduce((I,F)=>I+Number(F.quantity||0)*Number(F.installRate??0),0)||0,supplyAmount:N.materials?.reduce((I,F)=>I+Number(F.quantity||0)*Number(F.supplyRate??F.rate??0),0)||0,installAmount:N.materials?.reduce((I,F)=>I+Number(F.quantity||0)*Number(F.installRate??0),0)||0})))||[],Dn=Ps.filter(N=>Pt.includes(N.id)),Hn=Ps.reduce((N,x)=>{const I=Number(nn[x.id]??(x.quantity||0)),F=Number(js[x.id]??x.supplyRate??x.rate??0);return N+I*F},0);Ps.reduce((N,x)=>{const I=Number(nn[x.id]??(x.quantity||0));return N+I*Number(x.installRate||0)},0);const qn=Dn.reduce((N,x)=>{const I=Number(nn[x.id]??(x.quantity||0)),F=Number(js[x.id]??x.supplyRate??x.rate??0);return N+I*F},0);tn&&tn.bill_no;const Yr=tn&&tn.created_at?new Date(tn.created_at).toISOString().slice(0,10):Tt,v=N=>{if(!N)return!1;const x=(N.name||"").toString().trim(),I=Number(N.quantity||0),F=Number(N.supplyRate??N.rate??0),_=Number(N.installRate??0),L=(N.description||"").toString().trim(),P=(N.location||"").toString().trim();return!!x||I>0||F>0||_>0||!!L||!!P};return(be||[]).map(N=>{const x=(N.materials||[]).filter(v),I=x.reduce((_,L)=>_+Number(L.quantity||0)*Number(L.supplyRate??L.rate??0),0),F=x.reduce((_,L)=>_+Number(L.quantity||0)*Number(L.installRate??0),0);return{...N,materials:x,supplySubtotal:I,installSubtotal:F,subtotal:I+F}}).filter(N=>(N.materials||[]).length>0),e.jsx(Sa,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Civil Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(Ms,{className:"border-border/50",children:e.jsx(Ws,{className:"pt-8 min-h-96",children:e.jsxs(Fl,{mode:"wait",children:[i===1&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Civil Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:ct.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No products found under Electrical sub-category in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Door."})]}):e.jsx("div",{className:"grid gap-3",children:ct.map(N=>{const x=ke(N),I=(N?.id||x).toString(),F=u===I;return e.jsx(Ce,{variant:F?"default":"outline",onClick:()=>rt(N),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:x||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Be(N)})]})},I)})})})]},"step-select-product"),i===11&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:_v,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Yr})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all-groups",checked:(()=>{const N=(Ps||[]).map(x=>x.id);return N.length>0&&N.every(x=>Ds.includes(x))})(),onCheckedChange:N=>{ut(N?(Ps||[]).map(x=>x.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Ps||[]).map((N,x)=>{const I=Number(js[N.id]??N.supplyRate??N.rate??0),F=Number(Vs[N.id]??N.installRate??0);let _=Number(nn[N.id]??(N.quantity||0));const L=_*I,P=_*F;return is[N.id]??N.location,kt[N.id]??N.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{checked:Ds.includes(N.id),onCheckedChange:()=>{ut(z=>z.includes(N.id)?z.filter(ne=>ne!==N.id):[...z,N.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:x+1}),e.jsx("td",{className:"border px-2 py-1",children:N.productLabel||N.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx(Xe,{value:is[N.id]??N.location??"",onChange:z=>Ss(ne=>({...ne,[N.id]:z.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:kt[N.id]??N.description??"",onChange:z=>Ft(ne=>({...ne,[N.id]:z.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{value:zs[N.id]??N.unit??"",onChange:z=>Us(ne=>({...ne,[N.id]:z.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",value:_,onChange:z=>es(ne=>({...ne,[N.id]:Number(z.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:I,onChange:z=>Os(ne=>({...ne,[N.id]:Number(z.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:F,onChange:z=>Ls(ne=>({...ne,[N.id]:Number(z.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",L.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",P.toFixed(2)]})]},N.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Hn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!A&&e.jsx(Ce,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Ce,{variant:"destructive",disabled:Ds.length===0,onClick:async()=>{if(console.log("Delete selected:",Ds),Gt.length>0&&dt)try{await lt("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Ds,estimator:"civilwall"})});const N=await lt(`/api/estimator-step11-groups?session_id=${dt}&estimator=civilwall`,{headers:{}});if(N.ok){const x=await N.json();Ys(x.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(N){console.warn("Failed to delete step 11 from DB",N),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(be.length===0)if(tn){console.log("Deleting from saved BOQ");const N=Ds.map(_=>_.replace("group_","")),x=Array.isArray(tn.materials)?tn.materials:JSON.parse(tn.materials||"[]");console.log("Current materials:",x.length);const I=x.filter(_=>{const L=_.doorType||_.door_type||ms?.doorType||ms?.door_type||b||"door",P=_.panelType||_.panel_type||ms?.panelType||ms?.panel_type||p||"",z=_.subOption||_.sub_option||ms?.subOption||ms?.sub_option||B||"",ne=`${L}||${P}||${z}`,Ie=N.includes(ne);return console.log("Checking material:",_.id||_.name,ne,"match:",Ie),!Ie});console.log("Filtered materials:",I.length);const F={...tn,materials:I};Is(F),lt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)}).then(()=>console.log("Saved updated BOQ")).catch(_=>console.error("Error saving BOQ:",_))}else{console.log("Deleting from Step 11 saved materials");const N=Ds.map(F=>F.replace("group_","")),I=((dn&&dn.length>0?dn:nt)||[]).filter(F=>{const _=F.doorType||F.door_type||ms?.doorType||ms?.door_type||b||"door",L=F.panelType||F.panel_type||ms?.panelType||ms?.panel_type||p||"",P=F.subOption||F.sub_option||ms?.subOption||ms?.sub_option||B||"",z=`${_}||${L}||${P}`;return!N.includes(z)});Hs(I)}else if(be.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",be.length);let N;if(Ds.some(x=>x.startsWith("accumulated_"))){const x=Ds.filter(I=>I.startsWith("accumulated_")).map(I=>parseInt(I.replace("accumulated_",""))).sort((I,F)=>F-I);N=[...be],x.forEach(I=>{I>=0&&I<N.length&&N.splice(I,1)})}else{const x=Ds.map(I=>I.replace("group_",""));N=be.filter(I=>{const F=`${I.doorType||"door"}||${I.panelType||""}||${I.subOption||""}`,_=x.includes(F);return console.log("Checking product:",I.id,F,"match:",_),!_})}console.log("Accumulated products after:",N.length),He(N),lt("/api/accumulated-products/doors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:N})}).catch(x=>console.error("Failed to save accumulated products after delete",x))}ut([])},children:"Delete Selected"}),e.jsx(Ce,{onClick:ha,children:"Add Product"}),e.jsx(Ce,{onClick:Ma,disabled:tr,children:"Save"}),e.jsx(Ce,{onClick:async()=>{Kt(Ds);const N=(Dn||[]).map((x,I)=>{const F=Number(js[x.id]??x.supplyRate??x.rate??0),_=Number(Vs[x.id]??x.installRate??0);let L=Number(nn[x.id]??(x.quantity||0));return{s_no:I+1,item:x.name,location:is[x.id]??x.location??"",description:kt[x.id]??x.description??"",unit:zs[x.id]??x.unit??"",qty:L,supply_rate:F,install_rate:_,supply_amount:L*F,install_amount:L*_}});try{const x=await lt(`/api/estimator-step12-qa-selection?session_id=${dt}&estimator=civilwall`,{headers:{}});let I=[];x.ok&&(I=(await x.json()).items||[]);const F=N.filter(P=>!I.some(z=>z.item===P.item&&z.description===P.description&&z.unit===P.unit));if(F.length===0){c(12);return}await lt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"civilwall",session_id:dt,items:F})});const L=await(await lt(`/api/estimator-step12-qa-selection?session_id=${dt}&estimator=civilwall`,{headers:{}})).json();na(L.items||[]),r({title:"Success",description:`${F.length} new material(s) saved successfully to database!`}),c(12)}catch(x){console.warn("Failed to save step 12 to DB",x),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),i===4&&b&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(Se[b]||[]).map(N=>e.jsx(Ce,{onClick:()=>{U(N),k(null)},className:`w-full text-black ${B===N?"bg-cyan-500":"bg-white"}`,children:N},N))}),b==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:je.map(N=>e.jsx(Ce,{onClick:()=>k(N),className:`w-full text-black ${Q===N?"bg-cyan-500":"bg-white"}`,children:N},N))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(3),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{onClick:()=>c(5),disabled:!B||b==="flush"&&B==="With Vision Panel"&&!Q,children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),i===5&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"count",children:"Count"}),e.jsx(Xe,{id:"count",type:"number",placeholder:"1",value:q||"",onChange:N=>G(N.target.value?parseFloat(N.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"height",children:"Height"}),e.jsx(Xe,{id:"height",type:"number",placeholder:"7",value:W||"",onChange:N=>he(N.target.value?parseFloat(N.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"width",children:"Width"}),e.jsx(Xe,{id:"width",type:"number",placeholder:"3",value:Z||"",onChange:N=>ie(N.target.value?parseFloat(N.target.value):null)})]})]}),Y()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(We,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx(Xe,{id:"glassHeight",type:"number",placeholder:"72",value:ce||"",onChange:N=>ae(N.target.value?parseFloat(N.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx(Xe,{id:"glassWidth",type:"number",placeholder:"24",value:de||"",onChange:N=>se(N.target.value?parseFloat(N.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(Y()?.requiresGlazing?4:3),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{disabled:!q||!W||!Z||Y()?.requiresGlazing&&(!ce||!de),onClick:()=>c(6),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),i===6&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Y()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Tn,{id:"select-all-materials",checked:re.length===Ne.length&&Ne.length>0,onCheckedChange:N=>{if(N){const x=Ne.map(I=>{const F=s.filter(z=>Kr(z.product)===Kr(I.product)&&Kr(z.name)===Kr(I.name)).map(z=>({id:z.id,brand:kp(z),shopId:z.shopId,rate:z.rate,unit:z.unit,shopName:t.find(ne=>ne.id===z.shopId)?.name||"Unknown"})),L=Array.from(new Set(F.map(z=>z.brand))).sort()[0]||"Generic",P=F.filter(z=>z.brand===L).sort((z,ne)=>(z.rate||0)-(ne.rate||0));return{materialId:I.id,selectedBrand:L,selectedShopId:P[0]?.shopId||""}});te(x)}else te([])}}),e.jsx(We,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Ne.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",b||h||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(b?hR[b]||[b]:[h||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(N=>N.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Ne.map(N=>{const x=re.some(ne=>ne.materialId===N.id),I=re.find(ne=>ne.materialId===N.id),F=s.filter(ne=>Kr(ne.product)===Kr(N.product)&&Kr(ne.name)===Kr(N.name)).map(ne=>({id:ne.id,brand:kp(ne),shopId:ne.shopId,rate:ne.rate,unit:ne.unit,shopName:t.find(Ie=>Ie.id===ne.shopId)?.name||"Unknown"})),_=Array.from(new Set(F.map(ne=>ne.brand))).sort(),P=re.find(ne=>ne.materialId===N.id)?.selectedBrand||_[0]||"Generic",z=F.filter(ne=>ne.brand===P).sort((ne,Ie)=>(ne.rate||0)-(Ie.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Tn,{id:N.id,checked:x,onCheckedChange:()=>Tr(N.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:N.id,className:"font-medium cursor-pointer",children:N.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:N.code}),x&&_.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(We,{className:"text-xs",children:"Select Brand:"}),e.jsxs(mn,{value:P,onValueChange:ne=>Bs(N.id,ne),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:_.map(ne=>e.jsx(Ks,{value:ne,children:ne},ne))})]})]}),x&&z.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(We,{className:"text-xs",children:"Select Shop:"}),e.jsxs(mn,{value:I?.selectedShopId||z[0].shopId,onValueChange:ne=>lr(N.id,ne),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:z.map(ne=>e.jsxs(Ks,{value:ne.shopId||"",children:[ne.shopName," - ",ne.rate,"/",N.unit,ne.rate===z[0].rate&&" (Best)"]},ne.shopId))})]})]})]})]})},N.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(1),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{disabled:re.length===0,onClick:()=>c(7),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),i===7&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:ye().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),ye().map(N=>{const x=re.find(F=>F.materialId===N.id),I=s.find(F=>F.id===N.id);return e.jsxs("div",{className:$s("p-3 border rounded grid grid-cols-8 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:N.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:x?.selectedBrand||I?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Xe,{type:"number",value:ht[N.id]?.quantity??N.quantity,onChange:F=>cr(N.id,parseInt(F.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:N.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:N.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Xe,{type:"number",value:ht[N.id]?.supplyRate??N.rate,onChange:F=>Ka(N.id,parseFloat(F.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((ht[N.id]?.quantity??N.quantity)*((ht[N.id]?.supplyRate??N.rate)+(ht[N.id]?.installRate??0))).toFixed(2)]})]},N.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(6),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{onClick:()=>c(8),disabled:ye().length===0,children:["Next: Generate BOM"," ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),i===8&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(lo,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||pe()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[W," ft  ",Z," ft (Qty: ",q,")"]})]}),K&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:K})]}),Y()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[ce,'"  ',de,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(N=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:N==="Qty"||N.includes("Rate")||N.includes("Amount")?"right":"left"},children:N},N))})}),e.jsx("tbody",{children:ye().map((N,x)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:x+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:N.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:N.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:N.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:N.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:N.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(N.quantity*N.rate).toFixed(2)})]},N.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:re.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:ye().reduce((N,x)=>N+x.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",we().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Ce,{onClick:()=>c(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:pi,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(hi,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:er,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ce,{onClick:()=>_e(),disabled:ye().length===0,children:["Add to BOM ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{c(1),d(""),o(""),j(null),w(null),ee(null),G(1),he(7),ie(3),ae(6),se(2),te([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(Jn,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),i===12&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:_v,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Yr})})]}),!Dn||Dn.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Dn||[]).map((N,x)=>{const I=Number(js[N.id]??N.supplyRate??N.rate??0),F=Number(Vs[N.id]??N.installRate??0);let _=Number(nn[N.id]??(N.quantity||0));const L=_*I,P=_*F,z=is[N.id]??N.location??"",ne=kt[N.id]??N.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:x+1}),e.jsx("td",{className:"border px-2 py-1",children:N.productLabel||N.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:z||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:ne||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:zs[N.id]??N.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:_}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",I.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",F.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",L.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",P.toFixed(2)]})]},N.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(qn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Ce,{onClick:async()=>{if(Cn.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const N=await lt(`/api/estimator-step12-qa-selection?session_id=${dt}&estimator=civilwall`,{headers:{}});let x=[];N.ok&&(x=(await N.json()).items||[]);const F=(Dn||[]).map((P,z)=>{const ne=Number(js[P.id]??P.supplyRate??P.rate??0),Ie=Number(Vs[P.id]??P.installRate??0),st=Number(nn[P.id]??(P.quantity||0));return{s_no:z+1,item:P.name,location:is[P.id]??P.location??"",description:kt[P.id]??P.description??"",unit:zs[P.id]??P.unit??"",qty:st,supply_rate:ne,install_rate:Ie,supply_amount:st*ne,install_amount:st*Ie}}).filter(P=>!x.some(z=>z.item===P.item&&z.description===P.description&&z.unit===P.unit));if(F.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await lt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"civilwall",session_id:dt,items:F})});const L=await(await lt(`/api/estimator-step12-qa-selection?session_id=${dt}&estimator=civilwall`,{headers:{}})).json();na(L.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(N){console.warn("Failed to save step 12 to DB",N),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Ce,{onClick:()=>c(1),children:"Add More Products"}),e.jsx(Ce,{onClick:$a,children:"Export Excel"})]})]},"step-qa-boq"),i===10&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Bill No"}),e.jsx(Xe,{value:dt,onChange:N=>ze(N.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Bill Date"}),e.jsx(Xe,{type:"date",value:Tt,onChange:N=>Je(N.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Due Date"}),e.jsx(Xe,{type:"date",value:vt,onChange:N=>$e(N.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Customer Name"}),e.jsx(Xe,{value:Zt,onChange:N=>bt(N.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Customer Address"}),e.jsx(Xe,{value:Vt,onChange:N=>vs(N.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Terms & Conditions"}),e.jsx(Xe,{value:St,onChange:N=>Rt(N.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(We,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:ws,onChange:N=>Ts(N.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),ye().map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))]}),ws&&e.jsx(Xe,{placeholder:"Enter description for selected material",value:kt[ws]||"",onChange:N=>Ft(x=>({...x,[ws]:N.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:_v,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",dt]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:us})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",Tt]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",vt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",St]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",Zt]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(N=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:N},N))})}),e.jsx("tbody",{children:nt.map((N,x)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N.id&&kt[N.id]||N.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(N.quantity||0)*Number(N.rate||0)||0).toFixed(2)})]},N.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:Te.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Ye.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Oe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:yt.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Qt.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Qt.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Ce,{onClick:oa,children:"Export PDF"})]})]}),i===9&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{variant:"destructive",onClick:jr,disabled:Js.length===0,children:"Delete Selected"}),e.jsx(Ce,{type:"button",onClick:Va,disabled:nt.length===0,children:"Save"}),e.jsx(Ce,{onClick:async()=>{const N=ye(Jt,tt),x=Js.length>0?N.filter(L=>Js.includes(L.rowId||`${L.batchId}-${L.id}`)):N,I=x.map(L=>{const P=L.rowId||`${L.batchId||""}-${L.id}`;return{id:L.id,rowId:P,batchId:L.batchId,name:L.name,unit:L.unit,quantity:tt[P]?.quantity??tt[L.id]?.quantity??L.quantity,supplyRate:tt[P]?.supplyRate??tt[L.id]?.supplyRate??L.rate,installRate:tt[P]?.installRate??tt[L.id]?.installRate??L.installRate??0,shopId:L.shopId,shopName:L.shopName,description:kt[P]||kt[L.id]||"",location:is[P]||is[L.id]||"",doorType:L.doorType,panelType:L.panelType,subOption:L.subOption,glazingType:L.glazingType}});if(I.length===0)return;const F=x[0],_={id:`local-${Date.now()}`,estimator:"civilwall",bill_no:dt,door_type:F?.doorType||ms?.doorType||ms?.door_type||b,panel_type:F?.panelType||ms?.panelType||ms?.panel_type||p,sub_option:F?.subOption||ms?.subOption||ms?.sub_option||B,glazing_type:F?.glazingType||ms?.glazingType||ms?.glazing_type||K,qty:ms?.count||ms?.qty||q,height:ms?.height||W,width:ms?.width||Z,glass_height:ms?.glassHeight||ms?.glass_height||ce,glass_width:ms?.glassWidth||ms?.glass_width||de,materials:I,subtotal:I.reduce((L,P)=>L+Number(P.quantity||0)*(Number(P.supplyRate||0)+Number(P.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};Is(_);try{await Yn()}catch{}Pn([]),c(11)},disabled:nt.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{className:"text-sm font-semibold",children:"Saved BOQs"}),Ur.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:Ur.map(N=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:N.bill_no||`${N.estimator} - ${N.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(N.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{onClick:()=>Na(N),size:"sm",children:"Load"}),e.jsx(Ce,{variant:"destructive",onClick:()=>sr(N.id),size:"sm",children:"Delete"})]})]},N.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all",checked:(()=>{const N=(i===9?ye(Jt,tt):ye()).map(x=>x.rowId||x.id);return Js.length===N.length&&N.length>0})(),onCheckedChange:kr})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const N=new Map,x=new Map;nt.forEach(_=>{const L=_.doorType||_.door_type||ms?.doorType||ms?.door_type||b||"door",P=_.panelType||_.panel_type||ms?.panelType||ms?.panel_type||p||"",z=_.subOption||_.sub_option||ms?.subOption||ms?.sub_option||"",ne=`${L}||${P}||${z}`;if(N.has(ne)||N.set(ne,[]),N.get(ne).push(_),!x.has(ne)){const st=(N.get(ne)||[])[0]?.productLabel||`${P==="panel"?"With Panel":"Without Panel"}  ${L}${z?" ("+z+")":""}`;x.set(ne,{label:st})}});const I=[];let F=0;for(const[_,L]of N.entries()){const P=L.map(ot=>ot.rowId||`${ot.batchId||""}-${ot.id}`),z=P.every(ot=>Js.includes(ot)),ne=`group_${_}`,Ie=kt[ne]||"",st=Number(wr[ne]??ms?.count??ms?.qty??q??1);I.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{id:`group-${_}`,checked:z,onCheckedChange:()=>{Pn(z?ot=>ot.filter(Dt=>!P.includes(Dt)):ot=>Array.from(new Set([...ot,...P])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:x.get(_)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Xe,{placeholder:"Group description",value:Ie?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:ot=>Ft(Dt=>({...Dt,[ne]:ot.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",className:"h-8 text-center",value:wr[ne]??st,onChange:ot=>{const Dt=ot.target.value?parseFloat(ot.target.value):0;at(rs=>({...rs,[ne]:Dt})),Ft(rs=>{const cs=(rs[ne]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...rs,[ne]:cs?cs+`
Qty: `+Dt:"Qty: "+Dt}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${_}`));for(const ot of L){F+=1;const Dt=ot.rowId||`${ot.batchId}-${ot.id}`,rs=Number(V[Dt]?.supplyRate??V[ot.id]?.supplyRate??ot.rate??0),cs=Number(V[Dt]?.installRate??V[ot.id]?.installRate??ot.installRate??0),Ns=rs+cs,Zs=Number(V[Dt]?.quantity??V[ot.id]?.quantity??ot.quantity??0),Rn=Zs*Ns,$=kt[Dt]??kt[ot.id]??ot.description??"",ve=String($).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();I.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:F}),e.jsx("td",{className:"border px-2 py-1",children:ot.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:kt[Dt]??kt[ot.id]??ve,onChange:Ve=>Ft(At=>({...At,[Dt]:Ve.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:zs[Dt]??zs[ot.id]??ot.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",className:"h-8 text-center",value:Zs,onChange:Ve=>cr(Dt,Ve.target.value?parseFloat(Ve.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:Ns,onChange:Ve=>{const At=parseFloat(Ve.target.value||"0"),Bt=Number(V[Dt]?.supplyRate??V[ot.id]?.supplyRate??rs),as=Math.max(0,At-Bt);Ka(Dt,Bt),pa(Dt,as)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Rn.toFixed(2)]})]},Dt))}}return I})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(8),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ce,{onClick:()=>c(10),children:"Finalize PO"}),e.jsxs(Ce,{onClick:er,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const Mv="/image.png",kq=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),$r=t=>(t||"").toString().toUpperCase(),fR={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},Fy={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},Hq=(t,s)=>{const n=$r(t.product),r=$r(t.name),i=$r(t.category),c=$r(t.subCategory),u=(fR[s]||[s.toUpperCase()]).some(o=>n.includes(o)||r.includes(o)||i.includes(o)||c.includes(o)),d=Fy[s],h=d&&$r(n).includes($r(d));return u||h},Hp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function zq(){const{shops:t,materials:s,products:n}=fi(),{toast:r}=ua(),[i,c]=S.useState(1),A=typeof window<"u"&&window.location.search.includes("step=11"),[u,d]=S.useState(""),[h,o]=S.useState(""),[m,y]=S.useState(null),[p,j]=S.useState(null),[b,w]=S.useState(null),[B,U]=S.useState(null),[Q,k]=S.useState(null),[K,ee]=S.useState(null),[q,G]=S.useState(1),[W,he]=S.useState(7),[Z,ie]=S.useState(3),[ce,ae]=S.useState(6),[de,se]=S.useState(2),[re,te]=S.useState([]),[be,He]=S.useState([]);S.useEffect(()=>{lt("/api/accumulated-products/flooring",{headers:{}}).then(v=>v.json()).then(v=>{He(v.data||[])}).catch(v=>console.error("Failed to load accumulated products",v))},[]),S.useEffect(()=>{if(typeof window<"u"){const N=new URLSearchParams(window.location.search).get("step");if(N){const x=parseInt(N,10);x>=1&&x<=12&&c(x)}}},[]),S.useEffect(()=>{i===12&&lt("/api/accumulated-products/flooring",{headers:{}}).then(v=>v.json()).then(v=>{const N=v.data||[];He(N),console.debug("Restored flooring_accumulated_products for Step 12:",N.length)}).catch(v=>console.error("Failed to load accumulated products for Step 12",v))},[i]);const pe=v=>{const N=v?.doorType??b,x=v?.panelType??p,I=v?.subOption??B;if(!N)return null;const F=Le.find(z=>z.value===N);let _=F?F.label:Fy[N]||N;/door/i.test(_)||(_=`${_} Door`);const L=x==="panel"?"With Panel":"Without Panel",P=I?` - ${I}`:"";return`${L}  ${_}${P}`},Y=()=>{const v=(h||"").toString();if(!b&&!v)return null;const N=v||pe(),x=v||Fy[b]||b,I=b?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(b):$r(N).includes("GLASS")||$r(N).includes("STILE");return{label:N,productName:x,requiresGlazing:I}},me=()=>{const v=(h||"").toString();if(!b&&!v||!s.length)return[];const N=v||(b?Fy[b]:"");let x=[];if(N&&(x=s.filter(F=>{const _=(F.product||"").toString();if(!_||!N)return!1;const L=$r(_),P=$r(N);return L.includes(P)||P.includes(L)})),(!x||x.length===0)&&!v&&(x=b?s.filter(F=>Hq(F,b)):s.filter(F=>{const _=(F.product||"").toString();if(!N)return!1;const L=$r(_),P=$r(N);return L.includes(P)||P.includes(L)})),x.length===0)return[];const I=new Map;for(const F of x){const _=`${$r(F.product)}__${$r(F.name)}__${kq(F.code)}`,L=I.get(_);(!L||(F.rate||0)<(L.rate||0))&&I.set(_,F)}return Array.from(I.values())},Se={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},je=["Single Glass","Double Glass"],Le=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],ge=(v,N)=>{const x=q||1,I=W||7,F=Z||3,_=ce||6,L=de||2,P=Dm(I,F),z=v.toLowerCase();let ne=0;return z.includes("frame")||z.includes("door frame")?ne=P*x:z.includes("door")&&(z.includes("panel")||z.includes("shutter")||z.includes("flush")||z.includes("wooden"))?ne=x:z.includes("hinge")?ne=x*3:z.includes("lock")||z.includes("handle")||z.includes("stopper")||z.includes("bolt")?ne=x:z.includes("glass")?ne=Qm(_,L)*x:ne=x,Math.max(1,Math.ceil(ne))},ye=(v,N)=>{const x=v||re,I=Array.from(new Map((x||[]).map(_=>[_.rowId||`${_.batchId||""}|${_.materialId}|${_.selectedShopId||""}|${_.selectedBrand||""}`,_])).values()),F=N||rt;return I.map(_=>{let L=Ne.find(Ns=>Ns.id===_.materialId);if(L||(L=s.find(Ns=>Ns.id===_.materialId)||null),!L)return null;const P=s.find(Ns=>{const Zs=$r(Ns.product)===$r(L.product),Rn=$r(Ns.name)===$r(L.name),$=Ns.shopId===_.selectedShopId,ve=Hp(Ns)===(_.selectedBrand||"Generic");return Zs&&Rn&&$&&ve})||L,z=t.find(Ns=>Ns.id===_.selectedShopId),ne=_.rowId||(_.batchId?`${_.batchId}-${P.id}`:P.id),Ie=F[ne]||F[P.id]||F[L.id],st=ge(P.name,P.unit),ot=Ie?.quantity??st,Dt=Ie?.supplyRate??P.rate??0,rs=Ie?.installRate??0,cs=(Is||[]).find(Ns=>Ns.rowId===ne||`${Ns.batchId||""}-${Ns.id}`===ne);return{id:P.id,batchId:_.batchId,rowId:ne,name:P.name,quantity:ot,unit:P.unit,rate:Dt,shopId:_.selectedShopId,shopName:z?.name||"Unknown",installRate:rs,doorType:cs?.doorType||cs?.door_type||void 0,panelType:cs?.panelType||cs?.panel_type||void 0,subOption:cs?.subOption||cs?.sub_option||void 0,glazingType:cs?.glazingType||cs?.glazing_type||void 0,productLabel:cs?.productLabel||void 0}}).filter(_=>_!==null)},we=()=>ye().reduce((v,N)=>v+N.quantity*N.rate,0),Ne=me(),ke=v=>(v?.name||v?.title||v?.label||v?.productName||v?.product||"").toString(),Be=v=>(v?.category||v?.type||v?.group||v?.section||"").toString(),Ae=v=>Xc(v)==="flooring",Qe=v=>{const N=$r(v);return N.includes("FLUSH")?"flush":N.includes("WPC")?"wpc":N.includes("STILE")||N.includes("ALUMIN")?"stile":N.includes("GLASS PANEL")?"glasspanel":N.includes("GLASS")?"glassdoor":N.includes("WOOD")||N.includes("TEAK")?"wooden":null},le=(n||[]).filter(Ae).slice().sort((v,N)=>{const x=ke(v),I=ke(N);return x.localeCompare(I)}),ct=v=>{const N=ke(v);d(v.id||N),o(N);const x=Qe(N);w(x||b),U(null),k(null),ee(null),te([]),ht({}),kt({}),is({}),c(6)},[rt,ht]=S.useState({}),[ft,Jt]=S.useState([]),[gt,tt]=S.useState({}),[Lt,qt]=S.useState("Concept Trunk Interiors"),[Fs,xs]=S.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[hs,it]=S.useState("33ASOPS5560M1Z1"),[Pe,dt]=S.useState(""),[ze,Tt]=S.useState(new Date().toISOString().slice(0,10)),[Je,vt]=S.useState(""),[$e,St]=S.useState("50% Advance and 50% on Completion"),[Rt,Zt]=S.useState(""),[bt,Vt]=S.useState(""),[vs,us]=S.useState(""),[jt,kt]=S.useState({}),[Ft,is]=S.useState({}),[Ss,nn]=S.useState({}),[es,zs]=S.useState({}),[Us,Vs]=S.useState({}),[Ls,js]=S.useState({}),[Os,Ds]=S.useState([]),[ut,Pt]=S.useState([]),[Kt,ws]=S.useState(""),[Ts,ys]=S.useState([]),[Qs,Gt]=S.useState([]),[Ys,Cn]=S.useState([]),[na,tr]=S.useState(!1);S.useEffect(()=>{(async()=>{if(Pe)try{const N=await lt(`/api/estimator-step9-items?session_id=${Pe}&estimator=flooring`,{headers:{}});if(N.ok){const F=await N.json();ys(F.items||[])}const x=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=flooring`,{headers:{}});if(x.ok){const F=await x.json();Gt(F.items||[])}const I=await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=flooring`,{headers:{}});if(I.ok){const F=await I.json();Cn(F.items||[])}}catch(N){console.warn("Failed to load data from DB:",N)}})()},[Pe]),S.useEffect(()=>{if(i===7){const v=ye(),N={};v.forEach(x=>{N[x.id]={quantity:x.quantity||0,supplyRate:x.rate||0,installRate:0}}),ht(N)}},[i,re]),S.useEffect(()=>{if(i===9){const v=ye(ft,gt);if(v.length>0){const N=v[0].shopId,x=t.find(I=>I.id===N);if(x){const I=[x.name||"",x.address||"",x.area||"",x.city||"",x.state||"",x.pincode||"",x.gstNo?`GSTIN: ${x.gstNo}`:"",x.phone||""].filter(Boolean);us(I.join(`
`))}}}},[i,ft,gt,re,t]),S.useEffect(()=>{if(i===9){ds();const v=[],N={},x={},I={};if(Is&&Is.length>0)for(const F of Is){const _=F.rowId||`${F.batchId||""}-${F.id}`;v.findIndex(P=>P.materialId===F.id&&P.rowId===_&&(P.batchId||"")===(F.batchId||""))===-1&&(v.push({materialId:F.id,selectedShopId:F.shopId||"",selectedBrand:F.brand||void 0,batchId:F.batchId,rowId:_}),N[_]={quantity:Number(F.quantity||0),supplyRate:Number(F.supplyRate??F.rate??0),installRate:Number(F.installRate||0)},F.description&&(x[_]=F.description),F.location&&(I[_]=F.location))}if(Ts&&Ts.length>0)for(const F of Ts){if(!s.find(st=>st.id===F.material_id))continue;const L=F.material_id,P=F.row_id||(F.batch_id?`${F.batch_id}-${L}`:L),z=F.shop_id||"",ne=F.brand||void 0;v.findIndex(st=>st.materialId===L&&(st.batchId||"")===(F.batch_id||"")&&(st.rowId||"")===P)===-1&&(v.push({materialId:L,selectedShopId:z,selectedBrand:ne,batchId:F.batch_id||(F.row_id?P.replace(`-${L}`,""):void 0)}),N[P]={quantity:Number(F.quantity||0),supplyRate:Number(F.supply_rate||F.rate||0),installRate:Number(F.install_rate||0)},F.description&&(x[P]=F.description),F.location&&(I[P]=F.location))}re&&re.length>0&&re.forEach(F=>{if(v.findIndex(L=>L.materialId===F.materialId&&L.batchId===F.batchId)===-1){v.push(F);const L=s.find(P=>P.id===F.materialId);if(L){const P=F.batchId?`${F.batchId}-${F.materialId}`:F.materialId;N[P]={quantity:rt[F.materialId]?.quantity??L.quantity??1,supplyRate:rt[F.materialId]?.supplyRate??L.rate??0,installRate:rt[F.materialId]?.installRate??0}}}}),v.length>0&&Jt(v),Object.keys(N).length>0&&tt(N),Object.keys(x).length>0&&kt(F=>({...F,...x})),Object.keys(I).length>0&&is(F=>({...F,...I}))}},[i,re,Ts]),S.useEffect(()=>{i===11&&(async()=>{if(Pe)try{const N=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=flooring`,{headers:{}});if(N.ok){const I=(await N.json()).items||[],F={},_={},L={},P={};I.forEach(z=>{const ne=s.find(Ie=>Ie.name===z.item);ne&&(F[ne.id]=Number(z.supply_rate||0),_[ne.id]=Number(z.install_rate||0),L[ne.id]=Number(z.qty||0),P[ne.id]=z.unit||"")}),js(z=>({...z,...F})),Vs(z=>({...z,..._})),nn(z=>({...z,...L})),zs(z=>({...z,...P}))}}catch(N){console.warn("Failed to load step 11 data:",N)}})()},[i,Pe,Qs]);const Mt=S.useRef(null);S.useEffect(()=>{ds().catch(()=>{})},[]),S.useEffect(()=>{(async()=>{if(Pe)try{const N=await lt(`/api/estimator-step9-items?session_id=${Pe}&estimator=flooring`,{headers:{}});if(N.ok){const x=await N.json(),I=x.items.map(F=>({id:F.material_id,rowId:F.row_id,batchId:F.batch_id,name:F.name,unit:F.unit,quantity:F.quantity,supplyRate:F.supply_rate,installRate:F.install_rate,shopId:F.shop_id,shopName:F.shop_name,description:F.description,location:F.location,doorType:F.door_type,panelType:F.panel_type,subOption:F.sub_option,glazingType:F.glazing_type}));if(dn(I),x.items.length>0){const F=x.items[0];ms({doorType:F.door_type,panelType:F.panel_type,subOption:F.sub_option,glazingType:F.glazing_type,count:F.qty,height:F.height,width:F.width,glassHeight:F.glass_height,glassWidth:F.glass_width,subtotal:F.subtotal,sgst:F.sgst,cgst:F.cgst,round_off:F.round_off,grand_total:F.grand_total})}}}catch(N){console.warn("Failed to load step 9 from DB",N)}})()},[Pe]),S.useEffect(()=>(Mt.current&&clearTimeout(Mt.current),Mt.current=setTimeout(async()=>{new Date().toISOString();try{if(!Pe)return;const v=ye().map((N,x)=>{const I=N.rowId||(N.batchId?`${N.batchId}-${N.id}`:N.id);return{estimator:"flooring",session_id:Pe,s_no:x+1,row_id:String(I),batch_id:N.batchId||null,material_id:N.id,name:N.name,unit:N.unit,quantity:Number(rt[N.id]?.quantity??N.quantity??0),supply_rate:Number(rt[N.id]?.supplyRate??N.rate??0),install_rate:Number(rt[N.id]?.installRate??0),shop_id:N.shopId||"",shop_name:N.shopName||"",description:jt[N.id]||"",location:Ft[N.id]||"",door_type:b,panel_type:p,sub_option:B,glazing_type:K,qty:q,height:W,width:Z,glass_height:ce,glass_width:de}});await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"flooring",session_id:Pe,items:v})})}catch{}},800),()=>{Mt.current&&clearTimeout(Mt.current)}),[re,rt,jt,Ft,b,p,B,K,q,W,Z,ce,de,Pe]);const bn=v=>{const N=Ne.find(z=>z.id===v);if(!N)return;if(re.find(z=>z.materialId===v)){te(z=>z.filter(ne=>ne.materialId!==v));return}const I=s.filter(z=>$r(z.product)===$r(N.product)&&$r(z.name)===$r(N.name)).map(z=>({brand:Hp(z),shopId:z.shopId,rate:z.rate||0})),_=Array.from(new Set(I.map(z=>z.brand))).sort()[0]||"Generic",P=I.filter(z=>z.brand===_).sort((z,ne)=>z.rate-ne.rate)[0];P?.shopId&&te(z=>[...z,{materialId:v,selectedShopId:P.shopId,selectedBrand:_}])},Tr=(v,N)=>{te(x=>x.map(I=>I.materialId===v?{...I,selectedShopId:N}:I))},lr=(v,N)=>{const x=Ne.find(_=>_.id===v);if(!x)return;const F=s.filter(_=>$r(_.product)===$r(x.product)&&$r(_.name)===$r(x.name)).map(_=>({brand:Hp(_),shopId:_.shopId,rate:_.rate||0})).filter(_=>_.brand===N).sort((_,L)=>_.rate-L.rate)[0]?.shopId||"";te(_=>_.map(L=>L.materialId===v?{...L,selectedBrand:N,selectedShopId:F||L.selectedShopId}:L))},[Bs,Js]=S.useState([]),Pn=()=>{const v=(i===9?ye(ft,gt):ye()).map(N=>N.rowId||N.id);Js(N=>N.length===v.length?[]:v)},kr=async()=>{if(Bs.length!==0){try{const v=[],N=[];for(const x of Bs){const I=Is?.find(F=>`${F.batchId||""}-${F.id}`===x);if(I&&I.id){const F=Ts.find(_=>_.id===I.id);F&&v.push(F)}else{const F=ft.find(_=>`${_.batchId||""}-${_.materialId}`===x);F&&N.push(F)}}if(v.length>0&&Pe&&(await lt("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:Pe,estimator:"flooring",items:v})}),dn(x=>x?x.filter(I=>!v.some(F=>F.id===I.id)):null)),N.length>0&&Jt(x=>x.filter(I=>!N.some(F=>`${F.batchId||""}-${F.materialId}`==`${I.batchId||""}-${I.materialId}`))),Jt(x=>x.filter(I=>!Bs.includes(`${I.batchId||""}-${I.materialId}`))),tt(x=>{const I={...x};return Bs.forEach(F=>delete I[F]),I}),Pe){const I=await(await lt(`/api/estimator-step9-items?session_id=${Pe}&estimator=flooring`,{headers:{}})).json();ys(I.items||[])}r({title:"Success",description:`${Bs.length} item(s) deleted successfully!`})}catch(v){console.warn("Failed to delete items",v),r({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}Js([])}},[jr,Ur]=S.useState([]),hr=S.useRef(""),[qs,tn]=S.useState(null),[Is,dn]=S.useState(null),[Hs,wr]=S.useState({}),[at,ms]=S.useState(null),ds=async()=>{try{const v=await lt("/api/boq");if(v.status===401){Ur([]),hr.current!=="401"&&(hr.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!v.ok){const I=await v.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${I||v.status}`)}if(!(v.headers.get("content-type")||"").includes("application/json")){const I=await v.text().catch(()=>"");console.warn("/api/boq returned non-json:",I),Ur([]);return}const x=await v.json();Ur(x.boqs||[]),hr.current=""}catch(v){console.error("fetchSavedBoqs",v);const N=String(v?.message||v||"");if(!N)return;hr.current!==N&&(hr.current=N,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},Nn=async()=>{try{if(!Pe)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const v={estimator:"flooring",billNo:Pe,doorType:b,panelType:p,subOption:B,glazingType:K,qty:q,height:W,width:Z,glassHeight:ce,glassWidth:de,materials:Is&&Is.length>0?Is:ye(),subtotal:V,sgst:Te,cgst:Ye,roundOff:Oe,grandTotal:yt},N=await lt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!N.ok){const F=await N.text().catch(()=>"");throw new Error(F||"save failed")}const x=N.headers.get("content-type")||"";let I=null;if(x.includes("application/json"))I=await N.json();else{const F=await N.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",F),I={boq:null}}return await ds(),tn(I?.boq||I?.boqs?.[0]||null),!0}catch(v){return console.error("handleSaveBOQ",v),!1}},Yn=async v=>{try{if(!(await lt(`/api/boq/${v}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await ds()}catch(N){console.error("handleDeleteSavedBoq",N)}},sr=()=>{c(1),w(null),j(null),U(null),k(null),G(1),he(7),ie(3),ae(0),se(0),Ds([]),nn({}),kt({}),is({}),zs({}),js({}),Vs({}),wr({}),tn(null)},ha=async()=>{tr(!0);try{let v=Qs||[];if(Pe)try{const _=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=flooring`);_.ok&&(v=(await _.json()).items||[],Gt(v))}catch(_){console.warn("Failed to refresh step11 items before save",_)}const N=bs.map(_=>({estimator:"flooring",session_id:Pe,group_key:(_.groupKey||`${_.doorType||"door"}||${_.panelType||""}||${_.subOption||""}`)+"::"+(_.name||""),group_id:_.groupId||`group_${_.groupKey||""}`,item_name:_.name,unit:_.unit,quantity:_.quantity,location:_.location||"",description:_.description||"",supply_rate:Ls[_.id]||_.supplyRate||0,install_rate:Us[_.id]||_.installRate||0,supply_amount:(_.quantity||0)*(Ls[_.id]||_.supplyRate||0),install_amount:(_.quantity||0)*(Us[_.id]||_.installRate||0),supply_subtotal:bs.reduce((L,P)=>L+(P.quantity||0)*(Ls[P.id]||P.supplyRate||0),0),install_subtotal:bs.reduce((L,P)=>L+(P.quantity||0)*(Us[P.id]||P.installRate||0),0),sgst:Te,cgst:Ye,round_off:Oe,grand_total:bs.reduce((L,P)=>L+(P.quantity||0)*((Ls[P.id]||P.supplyRate||0)+(Us[P.id]||P.installRate||0)),0)+Te+Ye+Oe})),x=new Set((v||[]).map(_=>_.group_key||_.groupKey)),I=N.filter(_=>!x.has(_.group_key));if(I.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),tr(!1),!0;const F=await lt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:I})});if(!F.ok){const _=await F.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${_||F.statusText}`,variant:"destructive"}),tr(!1),!1}try{const _=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=flooring`);if(_.ok){const L=await _.json();Gt(L.items||[])}}catch(_){console.warn("Failed to reload step11 items after save",_)}return He([]),r({title:"Success",description:"Step 11 saved to database."}),tr(!1),!0}catch(v){return console.error("handleSaveAccumulatedBOQ",v),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),tr(!1),!1}},Ma=v=>{if(dt(v.bill_no||""),w(v.door_type||null),j(v.panel_type||null),U(v.sub_option||null),ee(v.glazing_type||null),G(v.qty||1),he(v.height||7),ie(v.width||3),ae(v.glass_height||6),se(v.glass_width||2),Array.isArray(v.materials)){const N=v.materials.map(x=>({materialId:x.id,selectedShopId:x.shopId||x.shop_id||x.shopId||"",selectedBrand:x.shopName||x.brand||x.selectedBrand||void 0}));te(N.filter(Boolean))}tn(v)},Na=(v,N)=>{if(i===9){tt(x=>({...x,[v]:{...x[v]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(N))}}));return}ht(x=>({...x,[v]:{...x[v]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(N))}}))},cr=(v,N)=>{if(i===9){tt(x=>({...x,[v]:{...x[v]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(N)),installRate:x[v]?.installRate||0}}));return}ht(x=>({...x,[v]:{...x[v]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(N)),installRate:x[v]?.installRate||0}}))},Ka=(v,N)=>{if(i===9){tt(x=>({...x,[v]:{...x[v]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(N)),supplyRate:x[v]?.supplyRate||0}}));return}ht(x=>({...x,[v]:{...x[v]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(N)),supplyRate:x[v]?.supplyRate||0}}))},pa=()=>{const v=document.getElementById("boq-pdf");if(!v){alert("BOQ content not found");return}setTimeout(()=>{_d().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:N=>N.className?.toString().includes("bg-")||N.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(v).save().catch(N=>{console.error("PDF Export Error:",N),alert("PDF export failed. Check console.")})},100)},er=async()=>{const v=document.getElementById("boq-final-pdf");if(!v){alert("Final BOQ content not found");return}const N=(await Yc(async()=>{const{default:x}=await Promise.resolve().then(()=>wu);return{default:x}},void 0)).default;N().set({margin:10,filename:`BOQ-${Pe||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(v).save()},oa=()=>{const v=ye(),N=Y(),x=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${p==="panel"?"With Panel":"Without Panel"} - ${N?.label}`,`Dimensions: ${W}ft  ${Z}ft (Count: ${q})`,...K?[`Glazing: ${K}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];v.forEach((P,z)=>{const ne=P.quantity*P.rate;x.push(`${z+1},"${P.name}","${P.unit}",${P.quantity},${P.rate},"${P.shopName}",${ne}`)}),x.push("",`TOTAL COST,,,${we().toFixed(2)}`);const I=x.join(`
`),F=new Blob([I],{type:"text/csv"}),_=window.URL.createObjectURL(F),L=document.createElement("a");L.href=_,L.download=`BOQ-Doors-${new Date().getTime()}.csv`,L.click(),URL.revokeObjectURL(_)},pi=()=>{const v=bs||[],N=[];N.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),v.forEach((L,P)=>{const z=Number(L.supplyRate??L.rate??0),ne=Number(L.installRate??0),Ie=Number(L.quantity||0),st=Ie*z,ot=Ie*ne,Dt=(L.location||Ft[L.id]||"").toString().replace(/"/g,'""'),rs=(L.description||jt[L.id]||L.name||"").toString().replace(/"/g,'""'),Zs=(pe({doorType:L.doorType||L.door_type,panelType:L.panelType||L.panel_type,subOption:L.subOption||L.sub_option,glazingType:L.glazingType||L.glazing_type})||L.name||"").replace(/"/g,'""');N.push(`${P+1},"${Zs}","${Dt}","${rs}",${L.unit},${Ie},${z.toFixed(2)},${ne.toFixed(2)},${st.toFixed(2)},${ot.toFixed(2)}`)});const x=N.join(`
`),I=new Blob([x],{type:"text/csv"}),F=window.URL.createObjectURL(I),_=document.createElement("a");_.href=F,_.download=`BOQ-Doors-Step11-${new Date().getTime()}.csv`,_.click(),URL.revokeObjectURL(F)},$a=async()=>{const v=ye(ft,gt).map(L=>{const P=L.rowId||`${L.batchId}-${L.id}`;return{id:L.id,rowId:P,batchId:L.batchId||null,name:L.name,productLabel:L.productLabel||null,product_label:L.productLabel||null,unit:L.unit,quantity:gt[P]?.quantity??gt[L.id]?.quantity??L.quantity,supplyRate:gt[P]?.supplyRate??gt[L.id]?.supplyRate??L.rate,installRate:gt[P]?.installRate??gt[L.id]?.installRate??L.installRate??0,shopId:L.shopId,shopName:L.shopName,description:jt[P]||jt[L.id]||"",location:Ft[P]||Ft[L.id]||"",doorType:L.doorType,panelType:L.panelType,subOption:L.subOption,glazingType:L.glazingType,isSaved:L.isSaved||!1}}),N=v.filter(L=>!L.isSaved);if(N.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let x=Pe;(!x||x.trim()==="")&&(x=`DOOR-${Date.now()}`,dt(x));const I=at||(()=>{const L=v.reduce((st,ot)=>st+Number(ot.quantity||0)*(Number(ot.supplyRate||0)+Number(ot.installRate||0)),0),P=L*.09,z=L*.09,ne=Math.round(L+P+z)-(L+P+z),Ie=L+P+z+ne;return{subtotal:L,sgst:P,cgst:z,round_off:ne,grand_total:Ie}})(),F={id:`local-${Date.now()}`,estimator:"flooring",bill_no:x,door_type:at?.doorType||at?.door_type||b,panel_type:at?.panelType||at?.panel_type||p,sub_option:at?.subOption||at?.sub_option||B,glazing_type:at?.glazingType||at?.glazing_type||K,qty:at?.count||at?.qty||q,height:at?.height||W,width:at?.width||Z,glass_height:at?.glassHeight||at?.glass_height||ce,glass_width:at?.glassWidth||at?.glass_width||de,materials:v,subtotal:I.subtotal,sgst:I.sgst,cgst:I.cgst,round_off:I.round_off,grand_total:I.grand_total,created_at:new Date().toISOString()};tn(F),dn(v);try{ms(L=>({...L||{},...I}))}catch{}const _=N.map((L,P)=>({estimator:"flooring",session_id:x,s_no:P+1,row_id:String(L.rowId||`${L.batchId||""}-${L.id}`),batch_id:L.batchId||null,material_id:L.id,name:L.name,unit:L.unit,quantity:Number(L.quantity||0),supply_rate:Number(L.supplyRate||0),install_rate:Number(L.installRate||0),shop_id:L.shopId||"",shop_name:L.shopName||"",description:L.description||"",location:L.location||"",door_type:L.doorType||at?.doorType||at?.door_type||b||null,panel_type:L.panelType||at?.panelType||at?.panel_type||p||null,sub_option:L.subOption||at?.subOption||at?.sub_option||B||null,glazing_type:L.glazingType||at?.glazingType||at?.glazing_type||K||null,qty:at?.count||at?.qty||q,height:at?.height||W,width:at?.width||Z,glass_height:at?.glassHeight||at?.glass_height||ce,glass_width:at?.glassWidth||at?.glass_width||de,subtotal:I.subtotal,sgst:I.sgst,cgst:I.cgst,round_off:I.round_off,grand_total:I.grand_total}));try{await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"flooring",session_id:x,items:_})});const P=await(await lt(`/api/estimator-step9-items?session_id=${x}&estimator=flooring`,{headers:{}})).json();ys(P.items||[]);const z=(Is||[]).map(ne=>N.some(st=>ne.rowId===st.rowId||`${ne.batchId||""}-${ne.id}`==`${st.batchId||""}-${st.id}`)?{...ne,isSaved:!0}:ne);dn(z),r({title:"Success",description:`${N.length} new material(s) saved successfully to database!`})}catch(L){console.warn("Failed to save step 9 to DB",L),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},Va=v=>{let N=5381;for(let x=0;x<v.length;x+=1)N=(N<<5)+N^v.charCodeAt(x);return Math.abs(N>>>0).toString(36)},ti=()=>{const v=JSON.stringify({doorType:b,panelType:p,subOption:B,glazingType:K,count:q,height:W,width:Z,glassHeight:ce,glassWidth:de,selectedMaterials:(re||[]).map(N=>({materialId:N.materialId,selectedShopId:N.selectedShopId,selectedBrand:N.selectedBrand})),editable:Object.keys(rt||{}).sort().map(N=>({id:N,...rt[N]}))});return`batch-${Va(v)}`},xe=()=>{const v=ti(),N=ye(re,rt).map(P=>({id:P.id,rowId:`${v}-${P.id}`,batchId:v,name:P.name,unit:P.unit,quantity:rt[P.id]?.quantity??P.quantity,supplyRate:rt[P.id]?.supplyRate??P.rate,installRate:rt[P.id]?.installRate??0,shopId:P.shopId,shopName:P.shopName,description:jt[P.id]||"",location:Ft[P.id]||"",doorType:b,productLabel:h||pe(),panelType:p,subOption:B,glazingType:K,isSaved:!1}));if(N.length===0){c(9);return}const F=[...(Is||[]||[]).filter(P=>P.batchId!==v),...N],_=Array.from(new Map((F||[]).map(P=>[P.rowId||`${P.batchId||""}-${P.id}`,P])).values());dn(_),Jt((re||[]).map(P=>({materialId:P.materialId,selectedShopId:P.selectedShopId,selectedBrand:P.selectedBrand,batchId:v})));const L={};_.forEach(P=>{const z=P.rowId||`${P.batchId}-${P.id}`;L[z]={quantity:Number(P.quantity||0),supplyRate:Number(P.supplyRate||P.rate||0),installRate:Number(P.installRate||0)}}),tt(L);try{const P=we(),z=P*.09,ne=P*.09,Ie=Math.round(P+z+ne)-(P+z+ne),st=P+z+ne+Ie;ms({doorType:b,panelType:p,subOption:B,glazingType:K,count:q,height:W,width:Z,glassHeight:ce,glassWidth:de,subtotal:P,sgst:z,cgst:ne,round_off:Ie,grand_total:st})}catch{}c(9)},_e=i===9||i===11?Is||[]:ye(),nt=i===9?gt:rt,V=_e.reduce((v,N)=>v+N.quantity*((nt[N.id]?.supplyRate??N.rate)+(nt[N.id]?.installRate??N.installRate??0)),0),Te=V*.09,Ye=V*.09,Oe=Math.round(V+Te+Ye)-(V+Te+Ye),yt=V+Te+Ye+Oe,Qt=be.length>0?be.flatMap(v=>v.materials||[]):Is&&Is.length>0?Is:_e&&_e.length>0?_e:qs&&qs.materials&&qs.materials.length>0?Array.isArray(qs.materials)?qs.materials:JSON.parse(qs.materials||"[]"):_e,ln=(()=>{const v=new Map;for(const x of Qt||[]){const I=x.productLabel||x.doorType||x.door_type||at?.doorType||at?.door_type||b||"door",F=x.panelType||x.panel_type||at?.panelType||at?.panel_type||p||"",_=x.subOption||x.sub_option||at?.subOption||at?.sub_option||"",L=`${I}||${F}||${_}`;v.has(L)||v.set(L,[]),v.get(L).push(x)}const N=[];for(const[x,I]of v.entries()){const[F,_,L]=x.split("||"),P=`group_${x}`,z=jt[P]||"",ne=Ft[P]||"";let Ie=Number(Hs[P]??at?.count??at?.qty??q??1);const st=String(z).match(/Qty:\s*(\d+(?:\.\d+)?)/);st&&(Hs[P]===void 0||Hs[P]===null)&&(Ie=Number(st[1]));const ot=I.reduce((Rn,$)=>Rn+Number($.quantity||0)*Number($.supplyRate??$.rate??0),0),Dt=Ie>0?ot/Ie:ot,rs=I.reduce((Rn,$)=>Rn+Number($.quantity||0)*Number($.installRate??0),0),cs=Ie>0?rs/Ie:rs,Ns=I[0]&&I[0].productLabel||pe({doorType:F,panelType:_,subOption:L})||F,Zs=String(z).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();N.push({id:P,groupKey:x,name:Ns,location:ne||"",description:Zs||"",unit:"pcs",quantity:Ie,supplyRate:Number(Dt||0),installRate:Number(Us[P]??cs??0),supplyAmount:Number(Dt*Ie||0),installAmount:Number((Us[P]??cs)*Ie||0)})}return N})();(Qs||[]).filter(v=>v.item||v.item_name).map((v,N)=>{const x=v.group_key||v.groupKey||`${v.door_type||v.doorType||"door"}||${v.panel_type||v.panelType||""}||${v.sub_option||v.subOption||""}`;return{id:v.id,groupKey:x,name:v.productLabel||v.item_name||v.item||v.name||v.door_label||v.doorType||v.door_type||"Door",location:v.location||"",description:v.description||"",unit:v.unit||"pcs",quantity:Number(v.quantity??v.qty??1),supplyRate:Number(v.supply_rate??v.supplyRate??0),installRate:Number(v.install_rate??v.installRate??0),supplyAmount:Number(v.supply_amount??0),installAmount:Number(v.install_amount??0),doorType:v.door_type||v.doorType,panelType:v.panel_type||v.panelType,subOption:v.sub_option||v.subOption}});const bs=(be.length===0?ln.filter(v=>!(Qs||[]).some(x=>(x.group_key||x.groupKey||`${x.door_type||""}||${x.panel_type||""}||${x.sub_option||""}`)===v.groupKey)):be.map((v,N)=>({id:`accumulated_${N}`,groupKey:`${v.doorType||"door"}||${v.panelType||""}||${v.subOption||""}`,name:v.productLabel||v.materials?.[0]?.productLabel||v.doorLabel||pe({doorType:v.doorType,panelType:v.panelType,subOption:v.subOption})||v.doorType,location:v.location||"",description:v.description||"",unit:"pcs",quantity:v.count||1,supplyRate:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.supplyRate??I.rate??0),0)||0,installRate:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.installRate??0),0)||0,supplyAmount:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.supplyRate??I.rate??0),0)||0,installAmount:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.installRate??0),0)||0})))||[],Ps=bs.filter(v=>ut.includes(v.id)),Dn=bs.reduce((v,N)=>{const x=Number(Ss[N.id]??(N.quantity||0)),I=Number(Ls[N.id]??N.supplyRate??N.rate??0);return v+x*I},0);bs.reduce((v,N)=>{const x=Number(Ss[N.id]??(N.quantity||0));return v+x*Number(N.installRate||0)},0);const Hn=Ps.reduce((v,N)=>{const x=Number(Ss[N.id]??(N.quantity||0)),I=Number(Ls[N.id]??N.supplyRate??N.rate??0);return v+x*I},0);qs&&qs.bill_no;const qn=qs&&qs.created_at?new Date(qs.created_at).toISOString().slice(0,10):ze,Yr=v=>{if(!v)return!1;const N=(v.name||"").toString().trim(),x=Number(v.quantity||0),I=Number(v.supplyRate??v.rate??0),F=Number(v.installRate??0),_=(v.description||"").toString().trim(),L=(v.location||"").toString().trim();return!!N||x>0||I>0||F>0||!!_||!!L};return(be||[]).map(v=>{const N=(v.materials||[]).filter(Yr),x=N.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.supplyRate??_.rate??0),0),I=N.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.installRate??0),0);return{...v,materials:N,supplySubtotal:x,installSubtotal:I,subtotal:x+I}}).filter(v=>(v.materials||[]).length>0),e.jsx(Sa,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Flooring Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(Ms,{className:"border-border/50",children:e.jsx(Ws,{className:"pt-8 min-h-96",children:e.jsxs(Fl,{mode:"wait",children:[i===1&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Flooring Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:le.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No electrical products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have subCategory set to Electrical (or contains Electrical)."})]}):e.jsx("div",{className:"grid gap-3",children:le.map(v=>{const N=ke(v),x=(v?.id||N).toString(),I=u===x;return e.jsx(Ce,{variant:I?"default":"outline",onClick:()=>ct(v),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:N||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Be(v)})]})},x)})})})]},"step-select-product"),i===11&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Mv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:qn})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all-groups",checked:(()=>{const v=(bs||[]).map(N=>N.id);return v.length>0&&v.every(N=>Os.includes(N))})(),onCheckedChange:v=>{Ds(v?(bs||[]).map(N=>N.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(bs||[]).map((v,N)=>{const x=Number(Ls[v.id]??v.supplyRate??v.rate??0),I=Number(Us[v.id]??v.installRate??0);let F=Number(Ss[v.id]??(v.quantity||0));const _=F*x,L=F*I;return Ft[v.id]??v.location,jt[v.id]??v.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{checked:Os.includes(v.id),onCheckedChange:()=>{Ds(P=>P.includes(v.id)?P.filter(z=>z!==v.id):[...P,v.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:N+1}),e.jsx("td",{className:"border px-2 py-1",children:v.productLabel||v.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx(Xe,{value:Ft[v.id]??v.location??"",onChange:P=>is(z=>({...z,[v.id]:P.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:jt[v.id]??v.description??"",onChange:P=>kt(z=>({...z,[v.id]:P.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{value:es[v.id]??v.unit??"",onChange:P=>zs(z=>({...z,[v.id]:P.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",value:F,onChange:P=>nn(z=>({...z,[v.id]:Number(P.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:x,onChange:P=>js(z=>({...z,[v.id]:Number(P.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:I,onChange:P=>Vs(z=>({...z,[v.id]:Number(P.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",L.toFixed(2)]})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Dn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!A&&e.jsx(Ce,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Ce,{variant:"destructive",disabled:Os.length===0,onClick:async()=>{if(console.log("Delete selected:",Os),Qs.length>0&&Pe)try{await lt("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Os,estimator:"flooring"})});const v=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=flooring`,{headers:{}});if(v.ok){const N=await v.json();Gt(N.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(v){console.warn("Failed to delete step 11 from DB",v),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(be.length===0)if(qs){console.log("Deleting from saved BOQ");const v=Os.map(F=>F.replace("group_","")),N=Array.isArray(qs.materials)?qs.materials:JSON.parse(qs.materials||"[]");console.log("Current materials:",N.length);const x=N.filter(F=>{const _=F.doorType||F.door_type||at?.doorType||at?.door_type||b||"door",L=F.panelType||F.panel_type||at?.panelType||at?.panel_type||p||"",P=F.subOption||F.sub_option||at?.subOption||at?.sub_option||B||"",z=`${_}||${L}||${P}`,ne=v.includes(z);return console.log("Checking material:",F.id||F.name,z,"match:",ne),!ne});console.log("Filtered materials:",x.length);const I={...qs,materials:x};tn(I),lt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}).then(()=>console.log("Saved updated BOQ")).catch(F=>console.error("Error saving BOQ:",F))}else{console.log("Deleting from Step 11 saved materials");const v=Os.map(I=>I.replace("group_","")),x=((Is&&Is.length>0?Is:_e)||[]).filter(I=>{const F=I.doorType||I.door_type||at?.doorType||at?.door_type||b||"door",_=I.panelType||I.panel_type||at?.panelType||at?.panel_type||p||"",L=I.subOption||I.sub_option||at?.subOption||at?.sub_option||B||"",P=`${F}||${_}||${L}`;return!v.includes(P)});dn(x)}else if(be.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",be.length);let v;if(Os.some(N=>N.startsWith("accumulated_"))){const N=Os.filter(x=>x.startsWith("accumulated_")).map(x=>parseInt(x.replace("accumulated_",""))).sort((x,I)=>I-x);v=[...be],N.forEach(x=>{x>=0&&x<v.length&&v.splice(x,1)})}else{const N=Os.map(x=>x.replace("group_",""));v=be.filter(x=>{const I=`${x.doorType||"door"}||${x.panelType||""}||${x.subOption||""}`,F=N.includes(I);return console.log("Checking product:",x.id,I,"match:",F),!F})}console.log("Accumulated products after:",v.length),He(v),lt("/api/accumulated-products/flooring",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:v})}).catch(N=>console.error("Failed to save accumulated products after delete",N))}Ds([])},children:"Delete Selected"}),e.jsx(Ce,{onClick:sr,children:"Add Product"}),e.jsx(Ce,{onClick:ha,disabled:na,children:"Save"}),e.jsx(Ce,{onClick:async()=>{Pt(Os);const v=(Ps||[]).map((N,x)=>{const I=Number(Ls[N.id]??N.supplyRate??N.rate??0),F=Number(Us[N.id]??N.installRate??0);let _=Number(Ss[N.id]??(N.quantity||0));return{s_no:x+1,item:N.name,location:Ft[N.id]??N.location??"",description:jt[N.id]??N.description??"",unit:es[N.id]??N.unit??"",qty:_,supply_rate:I,install_rate:F,supply_amount:_*I,install_amount:_*F}});try{const N=await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=flooring`,{headers:{}});let x=[];N.ok&&(x=(await N.json()).items||[]);const I=v.filter(L=>!x.some(P=>P.item===L.item&&P.description===L.description&&P.unit===L.unit));if(I.length===0){c(12);return}await lt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"flooring",session_id:Pe,items:I})});const _=await(await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=flooring`,{headers:{}})).json();Cn(_.items||[]),r({title:"Success",description:`${I.length} new material(s) saved successfully to database!`}),c(12)}catch(N){console.warn("Failed to save step 12 to DB",N),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),i===4&&b&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(Se[b]||[]).map(v=>e.jsx(Ce,{onClick:()=>{U(v),k(null)},className:`w-full text-black ${B===v?"bg-cyan-500":"bg-white"}`,children:v},v))}),b==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:je.map(v=>e.jsx(Ce,{onClick:()=>k(v),className:`w-full text-black ${Q===v?"bg-cyan-500":"bg-white"}`,children:v},v))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(3),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{onClick:()=>c(5),disabled:!B||b==="flush"&&B==="With Vision Panel"&&!Q,children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),i===5&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"count",children:"Count"}),e.jsx(Xe,{id:"count",type:"number",placeholder:"1",value:q||"",onChange:v=>G(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"height",children:"Height"}),e.jsx(Xe,{id:"height",type:"number",placeholder:"7",value:W||"",onChange:v=>he(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"width",children:"Width"}),e.jsx(Xe,{id:"width",type:"number",placeholder:"3",value:Z||"",onChange:v=>ie(v.target.value?parseFloat(v.target.value):null)})]})]}),Y()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(We,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx(Xe,{id:"glassHeight",type:"number",placeholder:"72",value:ce||"",onChange:v=>ae(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx(Xe,{id:"glassWidth",type:"number",placeholder:"24",value:de||"",onChange:v=>se(v.target.value?parseFloat(v.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(Y()?.requiresGlazing?4:3),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{disabled:!q||!W||!Z||Y()?.requiresGlazing&&(!ce||!de),onClick:()=>c(6),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),i===6&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Y()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Tn,{id:"select-all-materials",checked:re.length===Ne.length&&Ne.length>0,onCheckedChange:v=>{if(v){const N=Ne.map(x=>{const I=s.filter(P=>$r(P.product)===$r(x.product)&&$r(P.name)===$r(x.name)).map(P=>({id:P.id,brand:Hp(P),shopId:P.shopId,rate:P.rate,unit:P.unit,shopName:t.find(z=>z.id===P.shopId)?.name||"Unknown"})),_=Array.from(new Set(I.map(P=>P.brand))).sort()[0]||"Generic",L=I.filter(P=>P.brand===_).sort((P,z)=>(P.rate||0)-(z.rate||0));return{materialId:x.id,selectedBrand:_,selectedShopId:L[0]?.shopId||""}});te(N)}else te([])}}),e.jsx(We,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Ne.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",b||h||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(b?fR[b]||[b]:[h||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(v=>v.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Ne.map(v=>{const N=re.some(z=>z.materialId===v.id),x=re.find(z=>z.materialId===v.id),I=s.filter(z=>$r(z.product)===$r(v.product)&&$r(z.name)===$r(v.name)).map(z=>({id:z.id,brand:Hp(z),shopId:z.shopId,rate:z.rate,unit:z.unit,shopName:t.find(ne=>ne.id===z.shopId)?.name||"Unknown"})),F=Array.from(new Set(I.map(z=>z.brand))).sort(),L=re.find(z=>z.materialId===v.id)?.selectedBrand||F[0]||"Generic",P=I.filter(z=>z.brand===L).sort((z,ne)=>(z.rate||0)-(ne.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Tn,{id:v.id,checked:N,onCheckedChange:()=>bn(v.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:v.id,className:"font-medium cursor-pointer",children:v.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.code}),N&&F.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(We,{className:"text-xs",children:"Select Brand:"}),e.jsxs(mn,{value:L,onValueChange:z=>lr(v.id,z),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:F.map(z=>e.jsx(Ks,{value:z,children:z},z))})]})]}),N&&P.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(We,{className:"text-xs",children:"Select Shop:"}),e.jsxs(mn,{value:x?.selectedShopId||P[0].shopId,onValueChange:z=>Tr(v.id,z),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:P.map(z=>e.jsxs(Ks,{value:z.shopId||"",children:[z.shopName," - ",z.rate,"/",v.unit,z.rate===P[0].rate&&" (Best)"]},z.shopId))})]})]})]})]})},v.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(1),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{disabled:re.length===0,onClick:()=>c(7),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),i===7&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:ye().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),ye().map(v=>{const N=re.find(I=>I.materialId===v.id),x=s.find(I=>I.id===v.id);return e.jsxs("div",{className:$s("p-3 border rounded grid grid-cols-8 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:v.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:N?.selectedBrand||x?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Xe,{type:"number",value:rt[v.id]?.quantity??v.quantity,onChange:I=>Na(v.id,parseInt(I.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:v.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:v.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Xe,{type:"number",value:rt[v.id]?.supplyRate??v.rate,onChange:I=>cr(v.id,parseFloat(I.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((rt[v.id]?.quantity??v.quantity)*((rt[v.id]?.supplyRate??v.rate)+(rt[v.id]?.installRate??0))).toFixed(2)]})]},v.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(6),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{onClick:()=>c(8),disabled:ye().length===0,children:["Next: Generate BOM"," ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),i===8&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(lo,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||pe()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[W," ft  ",Z," ft (Qty: ",q,")"]})]}),K&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:K})]}),Y()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[ce,'"  ',de,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(v=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:v==="Qty"||v.includes("Rate")||v.includes("Amount")?"right":"left"},children:v},v))})}),e.jsx("tbody",{children:ye().map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:N+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:v.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:v.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:v.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:v.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:v.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(v.quantity*v.rate).toFixed(2)})]},v.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:re.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:ye().reduce((v,N)=>v+N.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",we().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Ce,{onClick:()=>c(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:oa,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(hi,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:pa,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ce,{onClick:()=>xe(),disabled:ye().length===0,children:["Add to BOM ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{c(1),d(""),o(""),j(null),w(null),ee(null),G(1),he(7),ie(3),ae(6),se(2),te([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(Jn,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),i===12&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Mv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:qn})})]}),!Ps||Ps.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Ps||[]).map((v,N)=>{const x=Number(Ls[v.id]??v.supplyRate??v.rate??0),I=Number(Us[v.id]??v.installRate??0);let F=Number(Ss[v.id]??(v.quantity||0));const _=F*x,L=F*I,P=Ft[v.id]??v.location??"",z=jt[v.id]??v.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:N+1}),e.jsx("td",{className:"border px-2 py-1",children:v.productLabel||v.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:P||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:z||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:es[v.id]??v.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:F}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",x.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",I.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",L.toFixed(2)]})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Hn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Ce,{onClick:async()=>{if(Ys.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const v=await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=flooring`,{headers:{}});let N=[];v.ok&&(N=(await v.json()).items||[]);const I=(Ps||[]).map((L,P)=>{const z=Number(Ls[L.id]??L.supplyRate??L.rate??0),ne=Number(Us[L.id]??L.installRate??0),Ie=Number(Ss[L.id]??(L.quantity||0));return{s_no:P+1,item:L.name,location:Ft[L.id]??L.location??"",description:jt[L.id]??L.description??"",unit:es[L.id]??L.unit??"",qty:Ie,supply_rate:z,install_rate:ne,supply_amount:Ie*z,install_amount:Ie*ne}}).filter(L=>!N.some(P=>P.item===L.item&&P.description===L.description&&P.unit===L.unit));if(I.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await lt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"flooring",session_id:Pe,items:I})});const _=await(await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=flooring`,{headers:{}})).json();Cn(_.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(v){console.warn("Failed to save step 12 to DB",v),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Ce,{onClick:()=>c(1),children:"Add More Products"}),e.jsx(Ce,{onClick:pi,children:"Export Excel"})]})]},"step-qa-boq"),i===10&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Bill No"}),e.jsx(Xe,{value:Pe,onChange:v=>dt(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Bill Date"}),e.jsx(Xe,{type:"date",value:ze,onChange:v=>Tt(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Due Date"}),e.jsx(Xe,{type:"date",value:Je,onChange:v=>vt(v.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Customer Name"}),e.jsx(Xe,{value:Rt,onChange:v=>Zt(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Customer Address"}),e.jsx(Xe,{value:bt,onChange:v=>Vt(v.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Terms & Conditions"}),e.jsx(Xe,{value:$e,onChange:v=>St(v.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(We,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Kt,onChange:v=>ws(v.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),ye().map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]}),Kt&&e.jsx(Xe,{placeholder:"Enter description for selected material",value:jt[Kt]||"",onChange:v=>kt(N=>({...N,[Kt]:v.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:Mv,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",Pe]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:vs})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",ze]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",Je]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",$e]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",Rt]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(v=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:v},v))})}),e.jsx("tbody",{children:_e.map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.id&&jt[v.id]||v.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(v.quantity||0)*Number(v.rate||0)||0).toFixed(2)})]},v.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:V.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Te.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Ye.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:Oe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",yt.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",yt.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Ce,{onClick:er,children:"Export PDF"})]})]}),i===9&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{variant:"destructive",onClick:kr,disabled:Bs.length===0,children:"Delete Selected"}),e.jsx(Ce,{type:"button",onClick:$a,disabled:_e.length===0,children:"Save"}),e.jsx(Ce,{onClick:async()=>{const v=ye(ft,gt),N=Bs.length>0?v.filter(_=>Bs.includes(_.rowId||`${_.batchId}-${_.id}`)):v,x=N.map(_=>{const L=_.rowId||`${_.batchId||""}-${_.id}`;return{id:_.id,rowId:L,batchId:_.batchId,name:_.name,unit:_.unit,quantity:gt[L]?.quantity??gt[_.id]?.quantity??_.quantity,supplyRate:gt[L]?.supplyRate??gt[_.id]?.supplyRate??_.rate,installRate:gt[L]?.installRate??gt[_.id]?.installRate??_.installRate??0,shopId:_.shopId,shopName:_.shopName,description:jt[L]||jt[_.id]||"",location:Ft[L]||Ft[_.id]||"",doorType:_.doorType,panelType:_.panelType,subOption:_.subOption,glazingType:_.glazingType}});if(x.length===0)return;const I=N[0],F={id:`local-${Date.now()}`,estimator:"flooring",bill_no:Pe,door_type:I?.doorType||at?.doorType||at?.door_type||b,panel_type:I?.panelType||at?.panelType||at?.panel_type||p,sub_option:I?.subOption||at?.subOption||at?.sub_option||B,glazing_type:I?.glazingType||at?.glazingType||at?.glazing_type||K,qty:at?.count||at?.qty||q,height:at?.height||W,width:at?.width||Z,glass_height:at?.glassHeight||at?.glass_height||ce,glass_width:at?.glassWidth||at?.glass_width||de,materials:x,subtotal:x.reduce((_,L)=>_+Number(L.quantity||0)*(Number(L.supplyRate||0)+Number(L.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};tn(F);try{await Nn()}catch{}Js([]),c(11)},disabled:_e.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{className:"text-sm font-semibold",children:"Saved BOQs"}),jr.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:jr.map(v=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:v.bill_no||`${v.estimator} - ${v.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(v.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{onClick:()=>Ma(v),size:"sm",children:"Load"}),e.jsx(Ce,{variant:"destructive",onClick:()=>Yn(v.id),size:"sm",children:"Delete"})]})]},v.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all",checked:(()=>{const v=(i===9?ye(ft,gt):ye()).map(N=>N.rowId||N.id);return Bs.length===v.length&&v.length>0})(),onCheckedChange:Pn})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const v=new Map,N=new Map;_e.forEach(F=>{const _=F.doorType||F.door_type||at?.doorType||at?.door_type||b||"door",L=F.panelType||F.panel_type||at?.panelType||at?.panel_type||p||"",P=F.subOption||F.sub_option||at?.subOption||at?.sub_option||"",z=`${_}||${L}||${P}`;if(v.has(z)||v.set(z,[]),v.get(z).push(F),!N.has(z)){const Ie=(v.get(z)||[])[0]?.productLabel||`${L==="panel"?"With Panel":"Without Panel"}  ${_}${P?" ("+P+")":""}`;N.set(z,{label:Ie})}});const x=[];let I=0;for(const[F,_]of v.entries()){const L=_.map(st=>st.rowId||`${st.batchId||""}-${st.id}`),P=L.every(st=>Bs.includes(st)),z=`group_${F}`,ne=jt[z]||"",Ie=Number(Hs[z]??at?.count??at?.qty??q??1);x.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{id:`group-${F}`,checked:P,onCheckedChange:()=>{Js(P?st=>st.filter(ot=>!L.includes(ot)):st=>Array.from(new Set([...st,...L])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:N.get(F)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Xe,{placeholder:"Group description",value:ne?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:st=>kt(ot=>({...ot,[z]:st.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",className:"h-8 text-center",value:Hs[z]??Ie,onChange:st=>{const ot=st.target.value?parseFloat(st.target.value):0;wr(Dt=>({...Dt,[z]:ot})),kt(Dt=>{const rs=(Dt[z]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...Dt,[z]:rs?rs+`
Qty: `+ot:"Qty: "+ot}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${F}`));for(const st of _){I+=1;const ot=st.rowId||`${st.batchId}-${st.id}`,Dt=Number(nt[ot]?.supplyRate??nt[st.id]?.supplyRate??st.rate??0),rs=Number(nt[ot]?.installRate??nt[st.id]?.installRate??st.installRate??0),cs=Dt+rs,Ns=Number(nt[ot]?.quantity??nt[st.id]?.quantity??st.quantity??0),Zs=Ns*cs,Rn=jt[ot]??jt[st.id]??st.description??"",$=String(Rn).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();x.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:I}),e.jsx("td",{className:"border px-2 py-1",children:st.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:jt[ot]??jt[st.id]??$,onChange:ve=>kt(Ve=>({...Ve,[ot]:ve.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:es[ot]??es[st.id]??st.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",className:"h-8 text-center",value:Ns,onChange:ve=>Na(ot,ve.target.value?parseFloat(ve.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:cs,onChange:ve=>{const Ve=parseFloat(ve.target.value||"0"),At=Number(nt[ot]?.supplyRate??nt[st.id]?.supplyRate??Dt),Bt=Math.max(0,Ve-At);cr(ot,At),Ka(ot,Bt)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Zs.toFixed(2)]})]},ot))}}return x})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(8),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ce,{onClick:()=>c(10),children:"Finalize PO"}),e.jsxs(Ce,{onClick:pa,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const Pv="/image.png",Kq=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),Vr=t=>(t||"").toString().toUpperCase(),pR={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},Iy={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},$q=(t,s)=>{const n=Vr(t.product),r=Vr(t.name),i=Vr(t.category),c=Vr(t.subCategory),u=(pR[s]||[s.toUpperCase()]).some(o=>n.includes(o)||r.includes(o)||i.includes(o)||c.includes(o)),d=Iy[s],h=d&&Vr(n).includes(Vr(d));return u||h},zp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function Vq(){const{shops:t,materials:s,products:n}=fi(),{toast:r}=ua(),[i,c]=S.useState(1),A=typeof window<"u"&&window.location.search.includes("step=11"),[u,d]=S.useState(""),[h,o]=S.useState(""),[m,y]=S.useState(null),[p,j]=S.useState(null),[b,w]=S.useState(null),[B,U]=S.useState(null),[Q,k]=S.useState(null),[K,ee]=S.useState(null),[q,G]=S.useState(1),[W,he]=S.useState(7),[Z,ie]=S.useState(3),[ce,ae]=S.useState(6),[de,se]=S.useState(2),[re,te]=S.useState([]),[be,He]=S.useState([]);S.useEffect(()=>{lt("/api/accumulated-products/doors",{headers:{}}).then(v=>v.json()).then(v=>{He(v.data||[])}).catch(v=>console.error("Failed to load accumulated products",v))},[]),S.useEffect(()=>{if(typeof window<"u"){const N=new URLSearchParams(window.location.search).get("step");if(N){const x=parseInt(N,10);x>=1&&x<=12&&c(x)}}},[]),S.useEffect(()=>{i===12&&lt("/api/accumulated-products/doors",{headers:{}}).then(v=>v.json()).then(v=>{const N=v.data||[];He(N),console.debug("Restored doors_accumulated_products for Step 12:",N.length)}).catch(v=>console.error("Failed to load accumulated products for Step 12",v))},[i]);const pe=v=>{const N=v?.doorType??b,x=v?.panelType??p,I=v?.subOption??B;if(!N)return null;const F=Le.find(z=>z.value===N);let _=F?F.label:Iy[N]||N;/door/i.test(_)||(_=`${_} Door`);const L=x==="panel"?"With Panel":"Without Panel",P=I?` - ${I}`:"";return`${L}  ${_}${P}`},Y=()=>{const v=(h||"").toString();if(!b&&!v)return null;const N=v||pe(),x=v||Iy[b]||b,I=b?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(b):Vr(N).includes("GLASS")||Vr(N).includes("STILE");return{label:N,productName:x,requiresGlazing:I}},me=()=>{const v=(h||"").toString();if(!b&&!v||!s.length)return[];const N=v||(b?Iy[b]:"");let x=[];if(N&&(x=s.filter(F=>{const _=(F.product||"").toString();if(!_||!N)return!1;const L=Vr(_),P=Vr(N);return L.includes(P)||P.includes(L)})),(!x||x.length===0)&&!v&&(x=b?s.filter(F=>$q(F,b)):s.filter(F=>{const _=(F.product||"").toString();if(!N)return!1;const L=Vr(_),P=Vr(N);return L.includes(P)||P.includes(L)})),x.length===0)return[];const I=new Map;for(const F of x){const _=`${Vr(F.product)}__${Vr(F.name)}__${Kq(F.code)}`,L=I.get(_);(!L||(F.rate||0)<(L.rate||0))&&I.set(_,F)}return Array.from(I.values())},Se={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},je=["Single Glass","Double Glass"],Le=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],ge=(v,N)=>{const x=q||1,I=W||7,F=Z||3,_=ce||6,L=de||2,P=Dm(I,F),z=v.toLowerCase();let ne=0;return z.includes("frame")||z.includes("door frame")?ne=P*x:z.includes("door")&&(z.includes("panel")||z.includes("shutter")||z.includes("flush")||z.includes("wooden"))?ne=x:z.includes("hinge")?ne=x*3:z.includes("lock")||z.includes("handle")||z.includes("stopper")||z.includes("bolt")?ne=x:z.includes("glass")?ne=Qm(_,L)*x:ne=x,Math.max(1,Math.ceil(ne))},ye=(v,N)=>{const x=v||re,I=N||rt;return x.map(F=>{let _=Ne.find(cs=>cs.id===F.materialId);if(_||(_=s.find(cs=>cs.id===F.materialId)||null),!_)return null;const L=s.find(cs=>{const Ns=Vr(cs.product)===Vr(_.product),Zs=Vr(cs.name)===Vr(_.name),Rn=cs.shopId===F.selectedShopId,$=zp(cs)===(F.selectedBrand||"Generic");return Ns&&Zs&&Rn&&$})||_,P=t.find(cs=>cs.id===F.selectedShopId),z=F.rowId||(F.batchId?`${F.batchId}-${L.id}`:L.id),ne=I[z]||I[L.id]||I[_.id],Ie=ge(L.name,L.unit),st=ne?.quantity??Ie,ot=ne?.supplyRate??L.rate??0,Dt=ne?.installRate??0,rs=(Is||[]).find(cs=>cs.rowId===z||`${cs.batchId||""}-${cs.id}`===z);return{id:L.id,batchId:F.batchId,rowId:z,name:L.name,quantity:st,unit:L.unit,rate:ot,shopId:F.selectedShopId,shopName:P?.name||"Unknown",installRate:Dt,doorType:rs?.doorType||rs?.door_type||void 0,panelType:rs?.panelType||rs?.panel_type||void 0,subOption:rs?.subOption||rs?.sub_option||void 0,glazingType:rs?.glazingType||rs?.glazing_type||void 0,productLabel:rs?.productLabel||void 0}}).filter(F=>F!==null)},we=()=>ye().reduce((v,N)=>v+N.quantity*N.rate,0),Ne=me(),ke=v=>(v?.name||v?.title||v?.label||v?.productName||v?.product||"").toString(),Be=v=>(v?.category||v?.type||v?.group||v?.section||"").toString(),Ae=v=>Xc(v)==="falseceiling",Qe=v=>{const N=Vr(v);return N.includes("FLUSH")?"flush":N.includes("WPC")?"wpc":N.includes("STILE")||N.includes("ALUMIN")?"stile":N.includes("GLASS PANEL")?"glasspanel":N.includes("GLASS")?"glassdoor":N.includes("WOOD")||N.includes("TEAK")?"wooden":null},le=(n||[]).filter(Ae).slice().sort((v,N)=>{const x=ke(v),I=ke(N);return x.localeCompare(I)}),ct=v=>{const N=ke(v);d(v.id||N),o(N);const x=Qe(N);w(x||b),U(null),k(null),ee(null),te([]),ht({}),kt({}),is({}),c(6)},[rt,ht]=S.useState({}),[ft,Jt]=S.useState([]),[gt,tt]=S.useState({}),[Lt,qt]=S.useState("Concept Trunk Interiors"),[Fs,xs]=S.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[hs,it]=S.useState("33ASOPS5560M1Z1"),[Pe,dt]=S.useState(""),[ze,Tt]=S.useState(new Date().toISOString().slice(0,10)),[Je,vt]=S.useState(""),[$e,St]=S.useState("50% Advance and 50% on Completion"),[Rt,Zt]=S.useState(""),[bt,Vt]=S.useState(""),[vs,us]=S.useState(""),[jt,kt]=S.useState({}),[Ft,is]=S.useState({}),[Ss,nn]=S.useState({}),[es,zs]=S.useState({}),[Us,Vs]=S.useState({}),[Ls,js]=S.useState({}),[Os,Ds]=S.useState([]),[ut,Pt]=S.useState([]),[Kt,ws]=S.useState(""),[Ts,ys]=S.useState([]),[Qs,Gt]=S.useState([]),[Ys,Cn]=S.useState([]),[na,tr]=S.useState(!1);S.useEffect(()=>{(async()=>{if(Pe)try{const N=await lt(`/api/estimator-step9-items?session_id=${Pe}&estimator=falseceiling`,{headers:{}});if(N.ok){const F=await N.json();ys(F.items||[])}const x=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=falseceiling`,{headers:{}});if(x.ok){const F=await x.json();Gt(F.items||[])}const I=await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=falseceiling`,{headers:{}});if(I.ok){const F=await I.json();Cn(F.items||[])}}catch(N){console.warn("Failed to load data from DB:",N)}})()},[Pe]),S.useEffect(()=>{if(i===7){const v=ye(),N={};v.forEach(x=>{N[x.id]={quantity:x.quantity||0,supplyRate:x.rate||0,installRate:0}}),ht(N)}},[i,re]),S.useEffect(()=>{if(i===9){const v=ye(ft,gt);if(v.length>0){const N=v[0].shopId,x=t.find(I=>I.id===N);if(x){const I=[x.name||"",x.address||"",x.area||"",x.city||"",x.state||"",x.pincode||"",x.gstNo?`GSTIN: ${x.gstNo}`:"",x.phone||""].filter(Boolean);us(I.join(`
`))}}}},[i,ft,gt,re,t]),S.useEffect(()=>{if(i===9){ds();const v=[],N={},x={},I={};if(Is&&Is.length>0)for(const F of Is){const _=F.rowId||`${F.batchId||""}-${F.id}`;v.findIndex(P=>P.materialId===F.id&&P.rowId===_&&(P.batchId||"")===(F.batchId||""))===-1&&(v.push({materialId:F.id,selectedShopId:F.shopId||"",selectedBrand:F.brand||void 0,batchId:F.batchId,rowId:_}),N[_]={quantity:Number(F.quantity||0),supplyRate:Number(F.supplyRate??F.rate??0),installRate:Number(F.installRate||0)},F.description&&(x[_]=F.description),F.location&&(I[_]=F.location))}if(Ts&&Ts.length>0)for(const F of Ts){if(!s.find(st=>st.id===F.material_id))continue;const L=F.material_id,P=F.row_id||(F.batch_id?`${F.batch_id}-${L}`:L),z=F.shop_id||"",ne=F.brand||void 0;v.findIndex(st=>st.materialId===L&&(st.batchId||"")===(F.batch_id||"")&&(st.rowId||"")===P)===-1&&(v.push({materialId:L,selectedShopId:z,selectedBrand:ne,batchId:F.batch_id||(F.row_id?P.replace(`-${L}`,""):void 0)}),N[P]={quantity:Number(F.quantity||0),supplyRate:Number(F.supply_rate||F.rate||0),installRate:Number(F.install_rate||0)},F.description&&(x[P]=F.description),F.location&&(I[P]=F.location))}re&&re.length>0&&re.forEach(F=>{if(v.findIndex(L=>L.materialId===F.materialId&&L.batchId===F.batchId)===-1){v.push(F);const L=s.find(P=>P.id===F.materialId);if(L){const P=F.batchId?`${F.batchId}-${F.materialId}`:F.materialId;N[P]={quantity:rt[F.materialId]?.quantity??L.quantity??1,supplyRate:rt[F.materialId]?.supplyRate??L.rate??0,installRate:rt[F.materialId]?.installRate??0}}}}),v.length>0&&Jt(v),Object.keys(N).length>0&&tt(N),Object.keys(x).length>0&&kt(F=>({...F,...x})),Object.keys(I).length>0&&is(F=>({...F,...I}))}},[i,re,Ts]),S.useEffect(()=>{i===11&&(async()=>{if(Pe)try{const N=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=falseceiling`,{headers:{}});if(N.ok){const I=(await N.json()).items||[],F={},_={},L={},P={};I.forEach(z=>{const ne=s.find(Ie=>Ie.name===z.item);ne&&(F[ne.id]=Number(z.supply_rate||0),_[ne.id]=Number(z.install_rate||0),L[ne.id]=Number(z.qty||0),P[ne.id]=z.unit||"")}),js(z=>({...z,...F})),Vs(z=>({...z,..._})),nn(z=>({...z,...L})),zs(z=>({...z,...P}))}}catch(N){console.warn("Failed to load step 11 data:",N)}})()},[i,Pe,Qs]);const Mt=S.useRef(null);S.useEffect(()=>{ds().catch(()=>{})},[]),S.useEffect(()=>{(async()=>{if(Pe)try{const N=await lt(`/api/estimator-step9-items?session_id=${Pe}&estimator=falseceiling`,{headers:{}});if(N.ok){const x=await N.json(),I=x.items.map(F=>({id:F.material_id,rowId:F.row_id,batchId:F.batch_id,name:F.name,unit:F.unit,quantity:F.quantity,supplyRate:F.supply_rate,installRate:F.install_rate,shopId:F.shop_id,shopName:F.shop_name,description:F.description,location:F.location,doorType:F.door_type,panelType:F.panel_type,subOption:F.sub_option,glazingType:F.glazing_type}));if(dn(I),x.items.length>0){const F=x.items[0];ms({doorType:F.door_type,panelType:F.panel_type,subOption:F.sub_option,glazingType:F.glazing_type,count:F.qty,height:F.height,width:F.width,glassHeight:F.glass_height,glassWidth:F.glass_width,subtotal:F.subtotal,sgst:F.sgst,cgst:F.cgst,round_off:F.round_off,grand_total:F.grand_total})}}}catch(N){console.warn("Failed to load step 9 from DB",N)}})()},[Pe]),S.useEffect(()=>(Mt.current&&clearTimeout(Mt.current),Mt.current=setTimeout(async()=>{new Date().toISOString();try{if(!Pe)return;const v=ye().map((N,x)=>{const I=N.rowId||(N.batchId?`${N.batchId}-${N.id}`:N.id);return{estimator:"falseceiling",session_id:Pe,s_no:x+1,row_id:String(I),batch_id:N.batchId||null,material_id:N.id,name:N.name,unit:N.unit,quantity:Number(rt[N.id]?.quantity??N.quantity??0),supply_rate:Number(rt[N.id]?.supplyRate??N.rate??0),install_rate:Number(rt[N.id]?.installRate??0),shop_id:N.shopId||"",shop_name:N.shopName||"",description:jt[N.id]||"",location:Ft[N.id]||"",door_type:b,panel_type:p,sub_option:B,glazing_type:K,qty:q,height:W,width:Z,glass_height:ce,glass_width:de}});await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"falseceiling",session_id:Pe,items:v})})}catch{}},800),()=>{Mt.current&&clearTimeout(Mt.current)}),[re,rt,jt,Ft,b,p,B,K,q,W,Z,ce,de,Pe]);const bn=v=>{const N=Ne.find(z=>z.id===v);if(!N)return;if(re.find(z=>z.materialId===v)){te(z=>z.filter(ne=>ne.materialId!==v));return}const I=s.filter(z=>Vr(z.product)===Vr(N.product)&&Vr(z.name)===Vr(N.name)).map(z=>({brand:zp(z),shopId:z.shopId,rate:z.rate||0})),_=Array.from(new Set(I.map(z=>z.brand))).sort()[0]||"Generic",P=I.filter(z=>z.brand===_).sort((z,ne)=>z.rate-ne.rate)[0];P?.shopId&&te(z=>[...z,{materialId:v,selectedShopId:P.shopId,selectedBrand:_}])},Tr=(v,N)=>{te(x=>x.map(I=>I.materialId===v?{...I,selectedShopId:N}:I))},lr=(v,N)=>{const x=Ne.find(_=>_.id===v);if(!x)return;const F=s.filter(_=>Vr(_.product)===Vr(x.product)&&Vr(_.name)===Vr(x.name)).map(_=>({brand:zp(_),shopId:_.shopId,rate:_.rate||0})).filter(_=>_.brand===N).sort((_,L)=>_.rate-L.rate)[0]?.shopId||"";te(_=>_.map(L=>L.materialId===v?{...L,selectedBrand:N,selectedShopId:F||L.selectedShopId}:L))},[Bs,Js]=S.useState([]),Pn=()=>{const v=(i===9?ye(ft,gt):ye()).map(N=>N.rowId||N.id);Js(N=>N.length===v.length?[]:v)},kr=async()=>{if(Bs.length!==0){try{const v=[],N=[];for(const x of Bs){const I=Is?.find(F=>`${F.batchId||""}-${F.id}`===x);if(I&&I.id){const F=Ts.find(_=>_.id===I.id);F&&v.push(F)}else{const F=ft.find(_=>`${_.batchId||""}-${_.materialId}`===x);F&&N.push(F)}}if(v.length>0&&Pe&&(await lt("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:Pe,estimator:"falseceiling",items:v})}),dn(x=>x?x.filter(I=>!v.some(F=>F.id===I.id)):null)),N.length>0&&Jt(x=>x.filter(I=>!N.some(F=>`${F.batchId||""}-${F.materialId}`==`${I.batchId||""}-${I.materialId}`))),Jt(x=>x.filter(I=>!Bs.includes(`${I.batchId||""}-${I.materialId}`))),tt(x=>{const I={...x};return Bs.forEach(F=>delete I[F]),I}),Pe){const I=await(await lt(`/api/estimator-step9-items?session_id=${Pe}&estimator=falseceiling`,{headers:{}})).json();ys(I.items||[])}r({title:"Success",description:`${Bs.length} item(s) deleted successfully!`})}catch(v){console.warn("Failed to delete items",v),r({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}Js([])}},[jr,Ur]=S.useState([]),hr=S.useRef(""),[qs,tn]=S.useState(null),[Is,dn]=S.useState(null),[Hs,wr]=S.useState({}),[at,ms]=S.useState(null),ds=async()=>{try{const v=await lt("/api/boq");if(v.status===401){Ur([]),hr.current!=="401"&&(hr.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!v.ok){const I=await v.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${I||v.status}`)}if(!(v.headers.get("content-type")||"").includes("application/json")){const I=await v.text().catch(()=>"");console.warn("/api/boq returned non-json:",I),Ur([]);return}const x=await v.json();Ur(x.boqs||[]),hr.current=""}catch(v){console.error("fetchSavedBoqs",v);const N=String(v?.message||v||"");if(!N)return;hr.current!==N&&(hr.current=N,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},Nn=async()=>{try{if(!Pe)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const v={estimator:"falseceiling",billNo:Pe,doorType:b,panelType:p,subOption:B,glazingType:K,qty:q,height:W,width:Z,glassHeight:ce,glassWidth:de,materials:Is&&Is.length>0?Is:ye(),subtotal:V,sgst:Te,cgst:Ye,roundOff:Oe,grandTotal:yt},N=await lt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!N.ok){const F=await N.text().catch(()=>"");throw new Error(F||"save failed")}const x=N.headers.get("content-type")||"";let I=null;if(x.includes("application/json"))I=await N.json();else{const F=await N.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",F),I={boq:null}}return await ds(),tn(I?.boq||I?.boqs?.[0]||null),!0}catch(v){return console.error("handleSaveBOQ",v),!1}},Yn=async v=>{try{if(!(await lt(`/api/boq/${v}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await ds()}catch(N){console.error("handleDeleteSavedBoq",N)}},sr=()=>{c(1),w(null),j(null),U(null),k(null),G(1),he(7),ie(3),ae(0),se(0),Ds([]),nn({}),kt({}),is({}),zs({}),js({}),Vs({}),wr({}),tn(null)},ha=async()=>{tr(!0);try{let v=Qs||[];if(Pe)try{const _=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=falseceiling`);_.ok&&(v=(await _.json()).items||[],Gt(v))}catch(_){console.warn("Failed to refresh step11 items before save",_)}const N=bs.map(_=>({estimator:"falseceiling",session_id:Pe,group_key:(_.groupKey||`${_.doorType||"door"}||${_.panelType||""}||${_.subOption||""}`)+"::"+(_.name||""),group_id:_.groupId||`group_${_.groupKey||""}`,item_name:_.name,unit:_.unit,quantity:_.quantity,location:_.location||"",description:_.description||"",supply_rate:Ls[_.id]||_.supplyRate||0,install_rate:Us[_.id]||_.installRate||0,supply_amount:(_.quantity||0)*(Ls[_.id]||_.supplyRate||0),install_amount:(_.quantity||0)*(Us[_.id]||_.installRate||0),supply_subtotal:bs.reduce((L,P)=>L+(P.quantity||0)*(Ls[P.id]||P.supplyRate||0),0),install_subtotal:bs.reduce((L,P)=>L+(P.quantity||0)*(Us[P.id]||P.installRate||0),0),sgst:Te,cgst:Ye,round_off:Oe,grand_total:bs.reduce((L,P)=>L+(P.quantity||0)*((Ls[P.id]||P.supplyRate||0)+(Us[P.id]||P.installRate||0)),0)+Te+Ye+Oe})),x=new Set((v||[]).map(_=>_.group_key||_.groupKey)),I=N.filter(_=>!x.has(_.group_key));if(I.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),tr(!1),!0;const F=await lt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:I})});if(!F.ok){const _=await F.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${_||F.statusText}`,variant:"destructive"}),tr(!1),!1}try{const _=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=falseceiling`);if(_.ok){const L=await _.json();Gt(L.items||[])}}catch(_){console.warn("Failed to reload step11 items after save",_)}return He([]),r({title:"Success",description:"Step 11 saved to database."}),tr(!1),!0}catch(v){return console.error("handleSaveAccumulatedBOQ",v),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),tr(!1),!1}},Ma=v=>{if(dt(v.bill_no||""),w(v.door_type||null),j(v.panel_type||null),U(v.sub_option||null),ee(v.glazing_type||null),G(v.qty||1),he(v.height||7),ie(v.width||3),ae(v.glass_height||6),se(v.glass_width||2),Array.isArray(v.materials)){const N=v.materials.map(x=>({materialId:x.id,selectedShopId:x.shopId||x.shop_id||x.shopId||"",selectedBrand:x.shopName||x.brand||x.selectedBrand||void 0}));te(N.filter(Boolean))}tn(v)},Na=(v,N)=>{if(i===9){tt(x=>({...x,[v]:{...x[v]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(N))}}));return}ht(x=>({...x,[v]:{...x[v]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(N))}}))},cr=(v,N)=>{if(i===9){tt(x=>({...x,[v]:{...x[v]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(N)),installRate:x[v]?.installRate||0}}));return}ht(x=>({...x,[v]:{...x[v]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(N)),installRate:x[v]?.installRate||0}}))},Ka=(v,N)=>{if(i===9){tt(x=>({...x,[v]:{...x[v]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(N)),supplyRate:x[v]?.supplyRate||0}}));return}ht(x=>({...x,[v]:{...x[v]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(N)),supplyRate:x[v]?.supplyRate||0}}))},pa=()=>{const v=document.getElementById("boq-pdf");if(!v){alert("BOQ content not found");return}setTimeout(()=>{_d().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:N=>N.className?.toString().includes("bg-")||N.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(v).save().catch(N=>{console.error("PDF Export Error:",N),alert("PDF export failed. Check console.")})},100)},er=async()=>{const v=document.getElementById("boq-final-pdf");if(!v){alert("Final BOQ content not found");return}const N=(await Yc(async()=>{const{default:x}=await Promise.resolve().then(()=>wu);return{default:x}},void 0)).default;N().set({margin:10,filename:`BOQ-${Pe||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(v).save()},oa=()=>{const v=ye(),N=Y(),x=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${p==="panel"?"With Panel":"Without Panel"} - ${N?.label}`,`Dimensions: ${W}ft  ${Z}ft (Count: ${q})`,...K?[`Glazing: ${K}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];v.forEach((P,z)=>{const ne=P.quantity*P.rate;x.push(`${z+1},"${P.name}","${P.unit}",${P.quantity},${P.rate},"${P.shopName}",${ne}`)}),x.push("",`TOTAL COST,,,${we().toFixed(2)}`);const I=x.join(`
`),F=new Blob([I],{type:"text/csv"}),_=window.URL.createObjectURL(F),L=document.createElement("a");L.href=_,L.download=`BOQ-FalseCeiling-${new Date().getTime()}.csv`,L.click(),URL.revokeObjectURL(_)},pi=()=>{const v=bs||[],N=[];N.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),v.forEach((L,P)=>{const z=Number(L.supplyRate??L.rate??0),ne=Number(L.installRate??0),Ie=Number(L.quantity||0),st=Ie*z,ot=Ie*ne,Dt=(L.location||Ft[L.id]||"").toString().replace(/"/g,'""'),rs=(L.description||jt[L.id]||L.name||"").toString().replace(/"/g,'""'),Zs=(pe({doorType:L.doorType||L.door_type,panelType:L.panelType||L.panel_type,subOption:L.subOption||L.sub_option,glazingType:L.glazingType||L.glazing_type})||L.name||"").replace(/"/g,'""');N.push(`${P+1},"${Zs}","${Dt}","${rs}",${L.unit},${Ie},${z.toFixed(2)},${ne.toFixed(2)},${st.toFixed(2)},${ot.toFixed(2)}`)});const x=N.join(`
`),I=new Blob([x],{type:"text/csv"}),F=window.URL.createObjectURL(I),_=document.createElement("a");_.href=F,_.download=`BOQ-FalseCeiling-Step11-${new Date().getTime()}.csv`,_.click(),URL.revokeObjectURL(F)},$a=async()=>{const v=ye(ft,gt).map(L=>{const P=L.rowId||`${L.batchId}-${L.id}`;return{id:L.id,rowId:P,batchId:L.batchId||null,name:L.name,productLabel:L.productLabel||null,product_label:L.productLabel||null,unit:L.unit,quantity:gt[P]?.quantity??gt[L.id]?.quantity??L.quantity,supplyRate:gt[P]?.supplyRate??gt[L.id]?.supplyRate??L.rate,installRate:gt[P]?.installRate??gt[L.id]?.installRate??L.installRate??0,shopId:L.shopId,shopName:L.shopName,description:jt[P]||jt[L.id]||"",location:Ft[P]||Ft[L.id]||"",doorType:L.doorType,panelType:L.panelType,subOption:L.subOption,glazingType:L.glazingType,isSaved:L.isSaved||!1}}),N=v.filter(L=>!L.isSaved);if(N.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let x=Pe;(!x||x.trim()==="")&&(x=`DOOR-${Date.now()}`,dt(x));const I=at||(()=>{const L=v.reduce((st,ot)=>st+Number(ot.quantity||0)*(Number(ot.supplyRate||0)+Number(ot.installRate||0)),0),P=L*.09,z=L*.09,ne=Math.round(L+P+z)-(L+P+z),Ie=L+P+z+ne;return{subtotal:L,sgst:P,cgst:z,round_off:ne,grand_total:Ie}})(),F={id:`local-${Date.now()}`,estimator:"falseceiling",bill_no:x,door_type:at?.doorType||at?.door_type||b,panel_type:at?.panelType||at?.panel_type||p,sub_option:at?.subOption||at?.sub_option||B,glazing_type:at?.glazingType||at?.glazing_type||K,qty:at?.count||at?.qty||q,height:at?.height||W,width:at?.width||Z,glass_height:at?.glassHeight||at?.glass_height||ce,glass_width:at?.glassWidth||at?.glass_width||de,materials:v,subtotal:I.subtotal,sgst:I.sgst,cgst:I.cgst,round_off:I.round_off,grand_total:I.grand_total,created_at:new Date().toISOString()};tn(F),dn(v);try{ms(L=>({...L||{},...I}))}catch{}const _=N.map((L,P)=>({estimator:"falseceiling",session_id:x,s_no:P+1,row_id:String(L.rowId||`${L.batchId||""}-${L.id}`),batch_id:L.batchId||null,material_id:L.id,name:L.name,unit:L.unit,quantity:Number(L.quantity||0),supply_rate:Number(L.supplyRate||0),install_rate:Number(L.installRate||0),shop_id:L.shopId||"",shop_name:L.shopName||"",description:L.description||"",location:L.location||"",door_type:L.doorType||at?.doorType||at?.door_type||b||null,panel_type:L.panelType||at?.panelType||at?.panel_type||p||null,sub_option:L.subOption||at?.subOption||at?.sub_option||B||null,glazing_type:L.glazingType||at?.glazingType||at?.glazing_type||K||null,qty:at?.count||at?.qty||q,height:at?.height||W,width:at?.width||Z,glass_height:at?.glassHeight||at?.glass_height||ce,glass_width:at?.glassWidth||at?.glass_width||de,subtotal:I.subtotal,sgst:I.sgst,cgst:I.cgst,round_off:I.round_off,grand_total:I.grand_total}));try{await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"falseceiling",session_id:x,items:_})});const P=await(await lt(`/api/estimator-step9-items?session_id=${x}&estimator=falseceiling`,{headers:{}})).json();ys(P.items||[]);const z=(Is||[]).map(ne=>N.some(st=>ne.rowId===st.rowId||`${ne.batchId||""}-${ne.id}`==`${st.batchId||""}-${st.id}`)?{...ne,isSaved:!0}:ne);dn(z),r({title:"Success",description:`${N.length} new material(s) saved successfully to database!`})}catch(L){console.warn("Failed to save step 9 to DB",L),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},Va=v=>{let N=5381;for(let x=0;x<v.length;x+=1)N=(N<<5)+N^v.charCodeAt(x);return Math.abs(N>>>0).toString(36)},ti=()=>{const v=JSON.stringify({doorType:b,panelType:p,subOption:B,glazingType:K,count:q,height:W,width:Z,glassHeight:ce,glassWidth:de,selectedMaterials:(re||[]).map(N=>({materialId:N.materialId,selectedShopId:N.selectedShopId,selectedBrand:N.selectedBrand})),editable:Object.keys(rt||{}).sort().map(N=>({id:N,...rt[N]}))});return`batch-${Va(v)}`},xe=()=>{const v=ti(),N=Array.from(new Map((re||[]).map(ne=>[ne.materialId,ne])).values()),x=ye(N,rt).map(ne=>({id:ne.id,rowId:`${v}-${ne.id}`,batchId:v,name:ne.name,unit:ne.unit,quantity:rt[ne.id]?.quantity??ne.quantity,supplyRate:rt[ne.id]?.supplyRate??ne.rate,installRate:rt[ne.id]?.installRate??0,shopId:ne.shopId,shopName:ne.shopName,description:jt[ne.id]||"",location:Ft[ne.id]||"",doorType:b,productLabel:h||pe(),panelType:p,subOption:B,glazingType:K,isSaved:!1})),I=Array.from(new Map(x.map(ne=>[ne.id,ne])).values());if(I.length===0){c(9);return}const L=[...(Is||[]||[]).filter(ne=>ne.batchId!==v),...I],P=Array.from(new Map(L.map(ne=>[ne.rowId||`${ne.batchId}-${ne.id}`,ne])).values());dn(P),Jt(N.map(ne=>({materialId:ne.materialId,selectedShopId:ne.selectedShopId,selectedBrand:ne.selectedBrand,batchId:v})));const z={};P.forEach(ne=>{const Ie=ne.rowId||`${ne.batchId}-${ne.id}`;z[Ie]={quantity:Number(ne.quantity||0),supplyRate:Number(ne.supplyRate||ne.rate||0),installRate:Number(ne.installRate||0)}}),tt(z);try{const ne=we(),Ie=ne*.09,st=ne*.09,ot=Math.round(ne+Ie+st)-(ne+Ie+st),Dt=ne+Ie+st+ot;ms({doorType:b,panelType:p,subOption:B,glazingType:K,count:q,height:W,width:Z,glassHeight:ce,glassWidth:de,subtotal:ne,sgst:Ie,cgst:st,round_off:ot,grand_total:Dt})}catch{}c(9)},_e=i===9||i===11?Is||[]:ye(),nt=i===9?gt:rt,V=_e.reduce((v,N)=>v+N.quantity*((nt[N.id]?.supplyRate??N.rate)+(nt[N.id]?.installRate??N.installRate??0)),0),Te=V*.09,Ye=V*.09,Oe=Math.round(V+Te+Ye)-(V+Te+Ye),yt=V+Te+Ye+Oe,Qt=be.length>0?be.flatMap(v=>v.materials||[]):Is&&Is.length>0?Is:_e&&_e.length>0?_e:qs&&qs.materials&&qs.materials.length>0?Array.isArray(qs.materials)?qs.materials:JSON.parse(qs.materials||"[]"):_e,ln=(()=>{const v=new Map;for(const x of Qt||[]){const I=x.productLabel||x.doorType||x.door_type||at?.doorType||at?.door_type||b||"door",F=x.panelType||x.panel_type||at?.panelType||at?.panel_type||p||"",_=x.subOption||x.sub_option||at?.subOption||at?.sub_option||"",L=`${I}||${F}||${_}`;v.has(L)||v.set(L,[]),v.get(L).push(x)}const N=[];for(const[x,I]of v.entries()){const[F,_,L]=x.split("||"),P=`group_${x}`,z=jt[P]||"",ne=Ft[P]||"";let Ie=Number(Hs[P]??at?.count??at?.qty??q??1);const st=String(z).match(/Qty:\s*(\d+(?:\.\d+)?)/);st&&(Hs[P]===void 0||Hs[P]===null)&&(Ie=Number(st[1]));const ot=I.reduce((Rn,$)=>Rn+Number($.quantity||0)*Number($.supplyRate??$.rate??0),0),Dt=Ie>0?ot/Ie:ot,rs=I.reduce((Rn,$)=>Rn+Number($.quantity||0)*Number($.installRate??0),0),cs=Ie>0?rs/Ie:rs,Ns=I[0]&&I[0].productLabel||pe({doorType:F,panelType:_,subOption:L})||F,Zs=String(z).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();N.push({id:P,groupKey:x,name:Ns,location:ne||"",description:Zs||"",unit:"pcs",quantity:Ie,supplyRate:Number(Dt||0),installRate:Number(Us[P]??cs??0),supplyAmount:Number(Dt*Ie||0),installAmount:Number((Us[P]??cs)*Ie||0)})}return N})();(Qs||[]).filter(v=>v.item||v.item_name).map((v,N)=>{const x=v.group_key||v.groupKey||`${v.door_type||v.doorType||"door"}||${v.panel_type||v.panelType||""}||${v.sub_option||v.subOption||""}`;return{id:v.id,groupKey:x,name:v.productLabel||v.item_name||v.item||v.name||v.door_label||v.doorType||v.door_type||"Door",location:v.location||"",description:v.description||"",unit:v.unit||"pcs",quantity:Number(v.quantity??v.qty??1),supplyRate:Number(v.supply_rate??v.supplyRate??0),installRate:Number(v.install_rate??v.installRate??0),supplyAmount:Number(v.supply_amount??0),installAmount:Number(v.install_amount??0),doorType:v.door_type||v.doorType,panelType:v.panel_type||v.panelType,subOption:v.sub_option||v.subOption}});const bs=(be.length===0?ln.filter(v=>!(Qs||[]).some(x=>(x.group_key||x.groupKey||`${x.door_type||""}||${x.panel_type||""}||${x.sub_option||""}`)===v.groupKey)):be.map((v,N)=>({id:`accumulated_${N}`,groupKey:`${v.doorType||"door"}||${v.panelType||""}||${v.subOption||""}`,name:v.productLabel||v.materials?.[0]?.productLabel||v.doorLabel||pe({doorType:v.doorType,panelType:v.panelType,subOption:v.subOption})||v.doorType,location:v.location||"",description:v.description||"",unit:"pcs",quantity:v.count||1,supplyRate:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.supplyRate??I.rate??0),0)||0,installRate:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.installRate??0),0)||0,supplyAmount:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.supplyRate??I.rate??0),0)||0,installAmount:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.installRate??0),0)||0})))||[],Ps=bs.filter(v=>ut.includes(v.id)),Dn=bs.reduce((v,N)=>{const x=Number(Ss[N.id]??(N.quantity||0)),I=Number(Ls[N.id]??N.supplyRate??N.rate??0);return v+x*I},0);bs.reduce((v,N)=>{const x=Number(Ss[N.id]??(N.quantity||0));return v+x*Number(N.installRate||0)},0);const Hn=Ps.reduce((v,N)=>{const x=Number(Ss[N.id]??(N.quantity||0)),I=Number(Ls[N.id]??N.supplyRate??N.rate??0);return v+x*I},0);qs&&qs.bill_no;const qn=qs&&qs.created_at?new Date(qs.created_at).toISOString().slice(0,10):ze,Yr=v=>{if(!v)return!1;const N=(v.name||"").toString().trim(),x=Number(v.quantity||0),I=Number(v.supplyRate??v.rate??0),F=Number(v.installRate??0),_=(v.description||"").toString().trim(),L=(v.location||"").toString().trim();return!!N||x>0||I>0||F>0||!!_||!!L};return(be||[]).map(v=>{const N=(v.materials||[]).filter(Yr),x=N.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.supplyRate??_.rate??0),0),I=N.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.installRate??0),0);return{...v,materials:N,supplySubtotal:x,installSubtotal:I,subtotal:x+I}}).filter(v=>(v.materials||[]).length>0),e.jsx(Sa,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"False Ceiling Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(Ms,{className:"border-border/50",children:e.jsx(Ws,{className:"pt-8 min-h-96",children:e.jsxs(Fl,{mode:"wait",children:[i===1&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select False Ceiling Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:le.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No false ceiling products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Door."})]}):e.jsx("div",{className:"grid gap-3",children:le.map(v=>{const N=ke(v),x=(v?.id||N).toString(),I=u===x;return e.jsx(Ce,{variant:I?"default":"outline",onClick:()=>ct(v),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:N||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Be(v)})]})},x)})})})]},"step-select-product"),i===11&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Pv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:qn})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all-groups",checked:(()=>{const v=(bs||[]).map(N=>N.id);return v.length>0&&v.every(N=>Os.includes(N))})(),onCheckedChange:v=>{Ds(v?(bs||[]).map(N=>N.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(bs||[]).map((v,N)=>{const x=Number(Ls[v.id]??v.supplyRate??v.rate??0),I=Number(Us[v.id]??v.installRate??0);let F=Number(Ss[v.id]??(v.quantity||0));const _=F*x,L=F*I;return Ft[v.id]??v.location,jt[v.id]??v.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{checked:Os.includes(v.id),onCheckedChange:()=>{Ds(P=>P.includes(v.id)?P.filter(z=>z!==v.id):[...P,v.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:N+1}),e.jsx("td",{className:"border px-2 py-1",children:v.productLabel||v.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx(Xe,{value:Ft[v.id]??v.location??"",onChange:P=>is(z=>({...z,[v.id]:P.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:jt[v.id]??v.description??"",onChange:P=>kt(z=>({...z,[v.id]:P.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{value:es[v.id]??v.unit??"",onChange:P=>zs(z=>({...z,[v.id]:P.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",value:F,onChange:P=>nn(z=>({...z,[v.id]:Number(P.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:x,onChange:P=>js(z=>({...z,[v.id]:Number(P.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:I,onChange:P=>Vs(z=>({...z,[v.id]:Number(P.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",L.toFixed(2)]})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Dn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!A&&e.jsx(Ce,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Ce,{variant:"destructive",disabled:Os.length===0,onClick:async()=>{if(console.log("Delete selected:",Os),Qs.length>0&&Pe)try{await lt("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Os,estimator:"falseceiling"})});const v=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=falseceiling`,{headers:{}});if(v.ok){const N=await v.json();Gt(N.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(v){console.warn("Failed to delete step 11 from DB",v),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(be.length===0)if(qs){console.log("Deleting from saved BOQ");const v=Os.map(F=>F.replace("group_","")),N=Array.isArray(qs.materials)?qs.materials:JSON.parse(qs.materials||"[]");console.log("Current materials:",N.length);const x=N.filter(F=>{const _=F.doorType||F.door_type||at?.doorType||at?.door_type||b||"door",L=F.panelType||F.panel_type||at?.panelType||at?.panel_type||p||"",P=F.subOption||F.sub_option||at?.subOption||at?.sub_option||B||"",z=`${_}||${L}||${P}`,ne=v.includes(z);return console.log("Checking material:",F.id||F.name,z,"match:",ne),!ne});console.log("Filtered materials:",x.length);const I={...qs,materials:x};tn(I),lt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}).then(()=>console.log("Saved updated BOQ")).catch(F=>console.error("Error saving BOQ:",F))}else{console.log("Deleting from Step 11 saved materials");const v=Os.map(I=>I.replace("group_","")),x=((Is&&Is.length>0?Is:_e)||[]).filter(I=>{const F=I.doorType||I.door_type||at?.doorType||at?.door_type||b||"door",_=I.panelType||I.panel_type||at?.panelType||at?.panel_type||p||"",L=I.subOption||I.sub_option||at?.subOption||at?.sub_option||B||"",P=`${F}||${_}||${L}`;return!v.includes(P)});dn(x)}else if(be.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",be.length);let v;if(Os.some(N=>N.startsWith("accumulated_"))){const N=Os.filter(x=>x.startsWith("accumulated_")).map(x=>parseInt(x.replace("accumulated_",""))).sort((x,I)=>I-x);v=[...be],N.forEach(x=>{x>=0&&x<v.length&&v.splice(x,1)})}else{const N=Os.map(x=>x.replace("group_",""));v=be.filter(x=>{const I=`${x.doorType||"door"}||${x.panelType||""}||${x.subOption||""}`,F=N.includes(I);return console.log("Checking product:",x.id,I,"match:",F),!F})}console.log("Accumulated products after:",v.length),He(v),lt("/api/accumulated-products/doors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:v})}).catch(N=>console.error("Failed to save accumulated products after delete",N))}Ds([])},children:"Delete Selected"}),e.jsx(Ce,{onClick:sr,children:"Add Product"}),e.jsx(Ce,{onClick:ha,disabled:na,children:"Save"}),e.jsx(Ce,{onClick:async()=>{Pt(Os);const v=(Ps||[]).map((N,x)=>{const I=Number(Ls[N.id]??N.supplyRate??N.rate??0),F=Number(Us[N.id]??N.installRate??0);let _=Number(Ss[N.id]??(N.quantity||0));return{s_no:x+1,item:N.name,location:Ft[N.id]??N.location??"",description:jt[N.id]??N.description??"",unit:es[N.id]??N.unit??"",qty:_,supply_rate:I,install_rate:F,supply_amount:_*I,install_amount:_*F}});try{const N=await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=falseceiling`,{headers:{}});let x=[];N.ok&&(x=(await N.json()).items||[]);const I=v.filter(L=>!x.some(P=>P.item===L.item&&P.description===L.description&&P.unit===L.unit));if(I.length===0){c(12);return}await lt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"falseceiling",session_id:Pe,items:I})});const _=await(await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=falseceiling`,{headers:{}})).json();Cn(_.items||[]),r({title:"Success",description:`${I.length} new material(s) saved successfully to database!`}),c(12)}catch(N){console.warn("Failed to save step 12 to DB",N),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),i===4&&b&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(Se[b]||[]).map(v=>e.jsx(Ce,{onClick:()=>{U(v),k(null)},className:`w-full text-black ${B===v?"bg-cyan-500":"bg-white"}`,children:v},v))}),b==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:je.map(v=>e.jsx(Ce,{onClick:()=>k(v),className:`w-full text-black ${Q===v?"bg-cyan-500":"bg-white"}`,children:v},v))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(3),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{onClick:()=>c(5),disabled:!B||b==="flush"&&B==="With Vision Panel"&&!Q,children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),i===5&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"count",children:"Count"}),e.jsx(Xe,{id:"count",type:"number",placeholder:"1",value:q||"",onChange:v=>G(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"height",children:"Height"}),e.jsx(Xe,{id:"height",type:"number",placeholder:"7",value:W||"",onChange:v=>he(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"width",children:"Width"}),e.jsx(Xe,{id:"width",type:"number",placeholder:"3",value:Z||"",onChange:v=>ie(v.target.value?parseFloat(v.target.value):null)})]})]}),Y()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(We,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx(Xe,{id:"glassHeight",type:"number",placeholder:"72",value:ce||"",onChange:v=>ae(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx(Xe,{id:"glassWidth",type:"number",placeholder:"24",value:de||"",onChange:v=>se(v.target.value?parseFloat(v.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(Y()?.requiresGlazing?4:3),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{disabled:!q||!W||!Z||Y()?.requiresGlazing&&(!ce||!de),onClick:()=>c(6),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),i===6&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Y()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Tn,{id:"select-all-materials",checked:re.length===Ne.length&&Ne.length>0,onCheckedChange:v=>{if(v){const N=Ne.map(x=>{const I=s.filter(P=>Vr(P.product)===Vr(x.product)&&Vr(P.name)===Vr(x.name)).map(P=>({id:P.id,brand:zp(P),shopId:P.shopId,rate:P.rate,unit:P.unit,shopName:t.find(z=>z.id===P.shopId)?.name||"Unknown"})),_=Array.from(new Set(I.map(P=>P.brand))).sort()[0]||"Generic",L=I.filter(P=>P.brand===_).sort((P,z)=>(P.rate||0)-(z.rate||0));return{materialId:x.id,selectedBrand:_,selectedShopId:L[0]?.shopId||""}});te(N)}else te([])}}),e.jsx(We,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Ne.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",b||h||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(b?pR[b]||[b]:[h||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(v=>v.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Ne.map(v=>{const N=re.some(z=>z.materialId===v.id),x=re.find(z=>z.materialId===v.id),I=s.filter(z=>Vr(z.product)===Vr(v.product)&&Vr(z.name)===Vr(v.name)).map(z=>({id:z.id,brand:zp(z),shopId:z.shopId,rate:z.rate,unit:z.unit,shopName:t.find(ne=>ne.id===z.shopId)?.name||"Unknown"})),F=Array.from(new Set(I.map(z=>z.brand))).sort(),L=re.find(z=>z.materialId===v.id)?.selectedBrand||F[0]||"Generic",P=I.filter(z=>z.brand===L).sort((z,ne)=>(z.rate||0)-(ne.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Tn,{id:v.id,checked:N,onCheckedChange:()=>bn(v.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:v.id,className:"font-medium cursor-pointer",children:v.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.code}),N&&F.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(We,{className:"text-xs",children:"Select Brand:"}),e.jsxs(mn,{value:L,onValueChange:z=>lr(v.id,z),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:F.map(z=>e.jsx(Ks,{value:z,children:z},z))})]})]}),N&&P.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(We,{className:"text-xs",children:"Select Shop:"}),e.jsxs(mn,{value:x?.selectedShopId||P[0].shopId,onValueChange:z=>Tr(v.id,z),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:P.map(z=>e.jsxs(Ks,{value:z.shopId||"",children:[z.shopName," - ",z.rate,"/",v.unit,z.rate===P[0].rate&&" (Best)"]},z.shopId))})]})]})]})]})},v.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(1),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{disabled:re.length===0,onClick:()=>c(7),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),i===7&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:ye().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),ye().map(v=>{const N=re.find(I=>I.materialId===v.id),x=s.find(I=>I.id===v.id);return e.jsxs("div",{className:$s("p-3 border rounded grid grid-cols-8 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:v.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:N?.selectedBrand||x?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Xe,{type:"number",value:rt[v.id]?.quantity??v.quantity,onChange:I=>Na(v.id,parseInt(I.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:v.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:v.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Xe,{type:"number",value:rt[v.id]?.supplyRate??v.rate,onChange:I=>cr(v.id,parseFloat(I.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((rt[v.id]?.quantity??v.quantity)*((rt[v.id]?.supplyRate??v.rate)+(rt[v.id]?.installRate??0))).toFixed(2)]})]},v.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(6),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{onClick:()=>c(8),disabled:ye().length===0,children:["Next: Generate BOM"," ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),i===8&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(lo,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||pe()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[W," ft  ",Z," ft (Qty: ",q,")"]})]}),K&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:K})]}),Y()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[ce,'"  ',de,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(v=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:v==="Qty"||v.includes("Rate")||v.includes("Amount")?"right":"left"},children:v},v))})}),e.jsx("tbody",{children:ye().map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:N+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:v.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:v.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:v.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:v.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:v.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(v.quantity*v.rate).toFixed(2)})]},v.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:re.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:ye().reduce((v,N)=>v+N.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",we().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Ce,{onClick:()=>c(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:oa,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(hi,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:pa,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ce,{onClick:()=>xe(),disabled:ye().length===0,children:["Add to BOM ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{c(1),d(""),o(""),j(null),w(null),ee(null),G(1),he(7),ie(3),ae(6),se(2),te([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(Jn,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),i===12&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Pv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:qn})})]}),!Ps||Ps.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Ps||[]).map((v,N)=>{const x=Number(Ls[v.id]??v.supplyRate??v.rate??0),I=Number(Us[v.id]??v.installRate??0);let F=Number(Ss[v.id]??(v.quantity||0));const _=F*x,L=F*I,P=Ft[v.id]??v.location??"",z=jt[v.id]??v.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:N+1}),e.jsx("td",{className:"border px-2 py-1",children:v.productLabel||v.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:P||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:z||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:es[v.id]??v.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:F}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",x.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",I.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",L.toFixed(2)]})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Hn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Ce,{onClick:async()=>{if(Ys.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const v=await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=falseceiling`,{headers:{}});let N=[];v.ok&&(N=(await v.json()).items||[]);const I=(Ps||[]).map((L,P)=>{const z=Number(Ls[L.id]??L.supplyRate??L.rate??0),ne=Number(Us[L.id]??L.installRate??0),Ie=Number(Ss[L.id]??(L.quantity||0));return{s_no:P+1,item:L.name,location:Ft[L.id]??L.location??"",description:jt[L.id]??L.description??"",unit:es[L.id]??L.unit??"",qty:Ie,supply_rate:z,install_rate:ne,supply_amount:Ie*z,install_amount:Ie*ne}}).filter(L=>!N.some(P=>P.item===L.item&&P.description===L.description&&P.unit===L.unit));if(I.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await lt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"falseceiling",session_id:Pe,items:I})});const _=await(await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=falseceiling`,{headers:{}})).json();Cn(_.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(v){console.warn("Failed to save step 12 to DB",v),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Ce,{onClick:()=>c(1),children:"Add More Products"}),e.jsx(Ce,{onClick:pi,children:"Export Excel"})]})]},"step-qa-boq"),i===10&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Bill No"}),e.jsx(Xe,{value:Pe,onChange:v=>dt(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Bill Date"}),e.jsx(Xe,{type:"date",value:ze,onChange:v=>Tt(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Due Date"}),e.jsx(Xe,{type:"date",value:Je,onChange:v=>vt(v.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Customer Name"}),e.jsx(Xe,{value:Rt,onChange:v=>Zt(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Customer Address"}),e.jsx(Xe,{value:bt,onChange:v=>Vt(v.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Terms & Conditions"}),e.jsx(Xe,{value:$e,onChange:v=>St(v.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(We,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Kt,onChange:v=>ws(v.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),ye().map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]}),Kt&&e.jsx(Xe,{placeholder:"Enter description for selected material",value:jt[Kt]||"",onChange:v=>kt(N=>({...N,[Kt]:v.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:Pv,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",Pe]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:vs})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",ze]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",Je]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",$e]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",Rt]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(v=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:v},v))})}),e.jsx("tbody",{children:_e.map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.id&&jt[v.id]||v.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(v.quantity||0)*Number(v.rate||0)||0).toFixed(2)})]},v.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:V.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Te.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Ye.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:Oe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",yt.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",yt.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Ce,{onClick:er,children:"Export PDF"})]})]}),i===9&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{variant:"destructive",onClick:kr,disabled:Bs.length===0,children:"Delete Selected"}),e.jsx(Ce,{type:"button",onClick:$a,disabled:_e.length===0,children:"Save"}),e.jsx(Ce,{onClick:async()=>{const v=ye(ft,gt),N=Bs.length>0?v.filter(_=>Bs.includes(_.rowId||`${_.batchId}-${_.id}`)):v,x=N.map(_=>{const L=_.rowId||`${_.batchId||""}-${_.id}`;return{id:_.id,rowId:L,batchId:_.batchId,name:_.name,unit:_.unit,quantity:gt[L]?.quantity??gt[_.id]?.quantity??_.quantity,supplyRate:gt[L]?.supplyRate??gt[_.id]?.supplyRate??_.rate,installRate:gt[L]?.installRate??gt[_.id]?.installRate??_.installRate??0,shopId:_.shopId,shopName:_.shopName,description:jt[L]||jt[_.id]||"",location:Ft[L]||Ft[_.id]||"",doorType:_.doorType,panelType:_.panelType,subOption:_.subOption,glazingType:_.glazingType}});if(x.length===0)return;const I=N[0],F={id:`local-${Date.now()}`,estimator:"falseceiling",bill_no:Pe,door_type:I?.doorType||at?.doorType||at?.door_type||b,panel_type:I?.panelType||at?.panelType||at?.panel_type||p,sub_option:I?.subOption||at?.subOption||at?.sub_option||B,glazing_type:I?.glazingType||at?.glazingType||at?.glazing_type||K,qty:at?.count||at?.qty||q,height:at?.height||W,width:at?.width||Z,glass_height:at?.glassHeight||at?.glass_height||ce,glass_width:at?.glassWidth||at?.glass_width||de,materials:x,subtotal:x.reduce((_,L)=>_+Number(L.quantity||0)*(Number(L.supplyRate||0)+Number(L.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};tn(F);try{await Nn()}catch{}Js([]),c(11)},disabled:_e.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{className:"text-sm font-semibold",children:"Saved BOQs"}),jr.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:jr.map(v=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:v.bill_no||`${v.estimator} - ${v.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(v.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{onClick:()=>Ma(v),size:"sm",children:"Load"}),e.jsx(Ce,{variant:"destructive",onClick:()=>Yn(v.id),size:"sm",children:"Delete"})]})]},v.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all",checked:(()=>{const v=(i===9?ye(ft,gt):ye()).map(N=>N.rowId||N.id);return Bs.length===v.length&&v.length>0})(),onCheckedChange:Pn})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const v=new Map,N=new Map;_e.forEach(F=>{const _=F.doorType||F.door_type||at?.doorType||at?.door_type||b||"door",L=F.panelType||F.panel_type||at?.panelType||at?.panel_type||p||"",P=F.subOption||F.sub_option||at?.subOption||at?.sub_option||"",z=`${_}||${L}||${P}`;if(v.has(z)||v.set(z,[]),v.get(z).push(F),!N.has(z)){const Ie=(v.get(z)||[])[0]?.productLabel||`${L==="panel"?"With Panel":"Without Panel"}  ${_}${P?" ("+P+")":""}`;N.set(z,{label:Ie})}});const x=[];let I=0;for(const[F,_]of v.entries()){const L=_.map(st=>st.rowId||`${st.batchId||""}-${st.id}`),P=L.every(st=>Bs.includes(st)),z=`group_${F}`,ne=jt[z]||"",Ie=Number(Hs[z]??at?.count??at?.qty??q??1);x.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{id:`group-${F}`,checked:P,onCheckedChange:()=>{Js(P?st=>st.filter(ot=>!L.includes(ot)):st=>Array.from(new Set([...st,...L])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:N.get(F)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Xe,{placeholder:"Group description",value:ne?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:st=>kt(ot=>({...ot,[z]:st.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",className:"h-8 text-center",value:Hs[z]??Ie,onChange:st=>{const ot=st.target.value?parseFloat(st.target.value):0;wr(Dt=>({...Dt,[z]:ot})),kt(Dt=>{const rs=(Dt[z]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...Dt,[z]:rs?rs+`
Qty: `+ot:"Qty: "+ot}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${F}`));for(const st of _){I+=1;const ot=st.rowId||`${st.batchId}-${st.id}`,Dt=Number(nt[ot]?.supplyRate??nt[st.id]?.supplyRate??st.rate??0),rs=Number(nt[ot]?.installRate??nt[st.id]?.installRate??st.installRate??0),cs=Dt+rs,Ns=Number(nt[ot]?.quantity??nt[st.id]?.quantity??st.quantity??0),Zs=Ns*cs,Rn=jt[ot]??jt[st.id]??st.description??"",$=String(Rn).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();x.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:I}),e.jsx("td",{className:"border px-2 py-1",children:st.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:jt[ot]??jt[st.id]??$,onChange:ve=>kt(Ve=>({...Ve,[ot]:ve.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:es[ot]??es[st.id]??st.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",className:"h-8 text-center",value:Ns,onChange:ve=>Na(ot,ve.target.value?parseFloat(ve.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:cs,onChange:ve=>{const Ve=parseFloat(ve.target.value||"0"),At=Number(nt[ot]?.supplyRate??nt[st.id]?.supplyRate??Dt),Bt=Math.max(0,Ve-At);cr(ot,At),Ka(ot,Bt)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Zs.toFixed(2)]})]},ot))}}return x})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(8),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ce,{onClick:()=>c(10),children:"Finalize PO"}),e.jsxs(Ce,{onClick:pa,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const oy="/image.png";function qq(){const{shops:t,materials:s,products:n}=fi(),{toast:r}=ua();S.useMemo(()=>n?n.filter(ut=>Xc(ut)==="painting").map(ut=>ut.id):[],[n]);const[i,c]=S.useState(1),[A,u]=S.useState(null),[d,h]=S.useState(""),[o,m]=S.useState(20),[y,p]=S.useState(10),[j,b]=S.useState([]),[w,B]=S.useState({}),[U,Q]=S.useState(`PNT-${Math.floor(Math.random()*1e4)}`),[k,K]=S.useState(new Date().toISOString().split("T")[0]),[ee,q]=S.useState(""),[G,W]=S.useState(""),[he,Z]=S.useState(""),[ie,ce]=S.useState("Payment: 50% Advance, 50% on Completion"),[ae,de]=S.useState(`Main Showroom
Chennai`),[se,re]=S.useState({}),[te,be]=S.useState(""),[He,pe]=S.useState([]),[Y,me]=S.useState(!1),Se=S.useMemo(()=>{if(!s||!A||!n)return[];const ut=n.find(Pt=>Pt.id===A);return ut?s.filter(Pt=>{const Kt=ut.name?.toLowerCase()||"",ws=(Pt.product||"").toLowerCase();return(Pt.subCategory||"").toLowerCase()==="painting"&&(ws.includes(Kt)||ws===A)}):[]},[s,A,n]),je=ut=>{const Pt=o*y;return ut.code?.includes("PAINT")?Math.ceil(Pt/100):ut.code?.includes("PUTTY")?Math.ceil(Pt/50):1},Le=()=>j.map(ut=>{const Pt=s.find(ys=>ys.id===ut.materialId),Kt=t.find(ys=>ys.id===ut.selectedShopId),ws=Pt?.id?w[Pt.id]?.quantity??je(Pt):je(Pt),Ts=Pt?.id?w[Pt.id]?.rate??(Pt?.rate||0):Pt?.rate||0;return{...Pt,quantity:ws,rate:Ts,shopName:Kt?.name||"Market",amount:ws*Ts}}),ge=Le(),ye=ge.reduce((ut,Pt)=>ut+Pt.amount,0),we=ye*.09,Ne=ye*.09,ke=ye+we+Ne,Be=Math.round(ke)-ke,Ae=()=>{const ut=Ys=>{try{const Cn=document.createElement("canvas").getContext("2d");return Cn?(Cn.fillStyle=Ys,Cn.fillStyle):Ys}catch{return"#000"}},Pt=document.createElement("div");Pt.style.width="210mm",Pt.style.minHeight="297mm",Pt.style.padding="20mm",Pt.style.background=ut("#fff"),Pt.style.color=ut("#000"),Pt.style.fontFamily="Arial, sans-serif",Pt.style.fontSize="12px";const Kt=document.createElement("div");Kt.style.display="flex",Kt.style.justifyContent="space-between",Kt.style.alignItems="center";const ws=document.createElement("img");ws.src=oy,ws.style.height="60px";const Ts=document.createElement("div");Ts.innerHTML='<h2 style="margin:0">Concept Trunk Interiors</h2><div>12/36A, Indira Nagar, Medavakkam, Chennai  600100</div>',Ts.style.textAlign="center",Ts.style.flex="1",Ts.style.marginLeft="20px",Kt.appendChild(ws),Kt.appendChild(Ts),Pt.appendChild(Kt),Pt.appendChild(document.createElement("hr"));const ys=document.getElementById("boq-add-table-pdf");if(!ys)return alert("Table not found for PDF export");const Qs=ys.cloneNode(!0),Gt=Ys=>{const Cn=getComputedStyle(Ys);return Ys.style.backgroundColor=ut(Cn.backgroundColor),Ys.style.color=ut(Cn.color),Ys.style.fontFamily=Cn.fontFamily,Ys.style.fontSize=Cn.fontSize,Ys.style.fontWeight=Cn.fontWeight,Ys.style.border=Cn.border,Ys.style.padding=Cn.padding,Ys.style.margin=Cn.margin,Ys.style.textAlign=Cn.textAlign,Ys.style.lineHeight=Cn.lineHeight,Array.from(Ys.children).forEach(na=>Gt(na)),Ys};Gt(Qs),Qs.style.marginTop="20px",Pt.appendChild(Qs),_d().from(Pt).set({margin:0,filename:`BOQ_${U}.pdf`,html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).save()},Qe=()=>{const ut=document.getElementById("boq-final-pdf");ut&&_d().from(ut).set({margin:0,filename:`Painting_Invoice_${U}.pdf`}).save()},le=S.useMemo(()=>!A||!n?"":n.find(Pt=>Pt.id===A)?.name||"",[A,n]),ct=S.useMemo(()=>o*y,[o,y]),rt=2,ht="wall",ft=()=>Le().reduce((ut,Pt)=>ut+Pt.amount,0),Jt=()=>{alert("Export to Excel feature coming soon")},gt=()=>{Ae()},tt=()=>{c(9)},[Lt,qt]=S.useState([]),Fs=Le(),xs=ct,hs=()=>{const ut=j.filter(Pt=>!Lt.includes(Pt.materialId));b(ut),qt([])},it=async()=>{const ut=Le().map(Kt=>({id:Kt.id,name:Kt.name,productLabel:Kt.productLabel||null,product_label:Kt.productLabel||null,unit:Kt.unit,quantity:Rt[Kt.id]??Kt.quantity,rate:bt[Kt.id]??Kt.rate,shopId:Kt.shopId,shopName:Kt.shopName,description:se[Kt.id]||""}));if(ut.length===0){alert("No materials to save");return}const Pt={id:`paint-${Date.now()}`,estimator:"painting",bill_no:U,area:xs,coats:rt,materials:ut,subtotal:ut.reduce((Kt,ws)=>Kt+Number(ws.quantity||0)*Number(ws.rate||0),0),created_at:new Date().toISOString()};try{const Kt=await fetch("/api/estimator/step9-cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Pt})});if(!Kt.ok){const Ts=await Kt.text();throw new Error(Ts||"Failed to save")}const ws=await Kt.json();vt(Pt),alert("Saved to cart successfully")}catch(Kt){console.error("Save step9 error",Kt),alert("Save failed: "+(Kt?.message||Kt))}},Pe=()=>{},dt=()=>{Lt.length===Fs.length?qt([]):qt(Fs.map(ut=>ut.id||""))},ze=ut=>{Lt.includes(ut)?qt(Pt=>Pt.filter(Kt=>Kt!==ut)):qt(Pt=>[...Pt,ut])},Tt=(ut,Pt)=>{B(Kt=>({...Kt,[ut]:{...Kt[ut],quantity:Pt}}))},Je=(ut,Pt)=>{B(Kt=>({...Kt,[ut]:{...Kt[ut],rate:Pt}}))},vt=ut=>{console.log("BOQ saved:",ut)},[$e,St]=S.useState([]),[Rt,Zt]=S.useState({}),[bt,Vt]=S.useState({}),[vs,us]=S.useState({}),[jt,kt]=S.useState({}),Ft=Le(),is=S.useMemo(()=>{if(!Ft||Ft.length===0)return[];const ut=d||Ft[0]?.product||"Painting Project",Pt=Ft.reduce((ws,Ts)=>{const ys=bt[Ts.id]??Ts.rate??0;return ws+Number(Ts.quantity||0)*Number(ys)},0),Kt=Ft.reduce((ws,Ts)=>{const ys=vs[Ts.id]??0;return ws+Number(Ts.quantity||0)*Number(ys)},0);return[{id:"painting_product",name:ut,location:"",description:se.product||"",unit:"project",quantity:1,supplyRate:Pt,installRate:Kt,supplyAmount:Pt,installAmount:Kt}]},[Ft,bt,vs,se,d]),Ss=k,nn=()=>{const ut=j.filter(Pt=>!$e.includes(Pt.materialId));b(ut),St([])},es=async()=>{me(!0);try{let ut=He||[];if(U)try{const ys=await lt(`/api/estimator-step11-groups?session_id=${U}&estimator=painting`);ys.ok&&(ut=(await ys.json()).items||[],pe(ut))}catch(ys){console.warn("Failed to refresh step11 items before save",ys)}const Pt=is.map(ys=>({estimator:"painting",session_id:U,group_key:ys.name,group_id:`group_${ys.id}`,item_name:ys.name,unit:ys.unit,quantity:ys.quantity,location:ys.location||"",description:se.product||"",supply_rate:ys.supplyRate,install_rate:ys.installRate,supply_amount:ys.supplyAmount,install_amount:ys.installAmount,supply_subtotal:ys.supplyAmount,install_subtotal:ys.installAmount,sgst:we,cgst:Ne,round_off:Be,grand_total:ys.supplyAmount+ys.installAmount+we+Ne+Be})),Kt=new Set((ut||[]).map(ys=>ys.group_key||ys.groupKey)),ws=Pt.filter(ys=>!Kt.has(ys.group_key));if(ws.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),me(!1),!0;const Ts=await lt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:ws})});if(!Ts.ok){const ys=await Ts.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${ys||Ts.statusText}`,variant:"destructive"}),me(!1),!1}try{const ys=await lt(`/api/estimator-step11-groups?session_id=${U}&estimator=painting`);if(ys.ok){const Qs=await ys.json();pe(Qs.items||[])}}catch(ys){console.warn("Failed to reload step11 items after save",ys)}return r({title:"Success",description:"Step 11 saved to database."}),me(!1),!0}catch(ut){return console.error("handleSavePaintingBOQ",ut),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),me(!1),!1}},zs=Ft,Us=zs.reduce((ut,Pt)=>{const Kt=Number(Rt[Pt.id]??Pt.quantity??0),ws=Number(bt[Pt.id]??Pt.supplyRate??Pt.rate??0);return ut+Kt*ws},0),Vs=()=>{alert("Export to Excel coming soon")},[Ls,js]=S.useState({}),Os=(ut,Pt)=>{b(Kt=>Kt.map(ws=>ws.materialId===ut?{...ws,selectedBrand:Pt}:ws))},Ds=(ut,Pt)=>{b(Kt=>Kt.map(ws=>ws.materialId===ut?{...ws,selectedShopId:Pt}:ws))};return e.jsx(Sa,{children:e.jsx("div",{className:"max-w-6xl mx-auto space-y-8 pb-20",children:e.jsxs(Fl,{mode:"wait",children:[i===1&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Painting Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a painting product to continue"}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n?.filter(ut=>ut.subcategory?.toLowerCase()==="painting").map(ut=>{const Pt=A===ut.id;return e.jsx(Ms,{onClick:()=>{u(ut.id),h(ut.name||ut.label||"Painting"),c(6)},className:$s("cursor-pointer border-2 transition-all",Pt?"border-primary bg-primary/10":"border-border bg-white"),children:e.jsxs(Ws,{className:"p-6 flex items-center gap-4",children:[e.jsx(EL,{className:$s("h-6 w-6",Pt?"text-primary":"text-muted-foreground")}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:ut.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:ut.subcategory})]})]})},ut.id)}),(!n||n.filter(ut=>ut.subcategory?.toLowerCase()==="painting").length===0)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No painting products found"})]})]},"step-1-painting"),i===6&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Available materials for painting. Best price shop is pre-selected."}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Tn,{checked:j.length===Se.length&&Se.length>0,onCheckedChange:ut=>{b(ut?Se.map(Pt=>{const ws=s.filter(Ts=>Ts.name===Pt.name&&Ts.product===Pt.product).map(Ts=>({id:Ts.id,brand:Ts.product,shopId:Ts.shopId,rate:Ts.rate})).sort((Ts,ys)=>(Ts.rate||0)-(ys.rate||0))[0];return{materialId:Pt.id,selectedShopId:ws?.shopId||"",selectedBrand:ws?.brand||"Generic"}}):[])}}),e.jsx("span",{className:"font-semibold",children:"Select All Materials"})]}),e.jsx("div",{className:"space-y-3 max-h-500 overflow-y-auto border rounded-lg p-4 bg-white",children:Se.map(ut=>{const Pt=j.some(Gt=>Gt.materialId===ut.id),Kt=j.find(Gt=>Gt.materialId===ut.id),ws=s.filter(Gt=>Gt.name===ut.name&&Gt.product===ut.product).map(Gt=>({id:Gt.id,brand:Gt.brandName||"Generic",shopId:Gt.shopId||"",rate:Gt.rate,unit:Gt.unit,shopName:t.find(Ys=>Ys.id===Gt.shopId)?.name||"Unknown"})),Ts=Array.from(new Set(ws.map(Gt=>Gt.brand))).sort(),ys=Kt?.selectedBrand||Ts[0]||"Generic",Qs=ws.filter(Gt=>Gt.brand===ys).sort((Gt,Ys)=>(Gt.rate||0)-(Ys.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Tn,{id:ut.id,checked:Pt,onCheckedChange:()=>{b(Pt?Gt=>Gt.filter(Ys=>Ys.materialId!==ut.id):Gt=>[...Gt,{materialId:ut.id,selectedShopId:Qs[0]?.shopId||"",selectedBrand:ys}])}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:ut.id,className:"font-medium cursor-pointer",children:ut.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[ut.code,"  ",ut.unit]}),Pt&&Ts.length>0&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(We,{className:"text-xs",children:"Brand:"}),e.jsxs(mn,{value:ys,onValueChange:Gt=>Os(ut.id,Gt),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:Ts.map(Gt=>e.jsx(Ks,{value:Gt,children:Gt},Gt))})]})]}),Qs.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(We,{className:"text-xs",children:"Shop:"}),e.jsxs(mn,{value:Kt?.selectedShopId||Qs[0].shopId,onValueChange:Gt=>Ds(ut.id,Gt),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:Qs.map(Gt=>e.jsxs(Ks,{value:Gt.shopId||"",children:[Gt.shopName," - ",Gt.rate,"/",Gt.unit,Gt.rate===Qs[0].rate&&" (Best)"]},Gt.shopId))})]})]})]})]})]})},ut.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(1),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{disabled:j.length===0,onClick:()=>c(7),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step6"),i===7&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Review and edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:j.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-xs font-semibold text-muted-foreground uppercase",children:[e.jsx("div",{className:"col-span-2",children:"Material"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),j.map(ut=>{const Pt=s.find(Qs=>Qs.id===ut.materialId);if(!Pt)return null;const Kt=t.find(Qs=>Qs.id===ut.selectedShopId),ws=w[Pt.id]?.quantity??je(Pt)??1,Ts=w[Pt.id]?.rate??Pt.rate??0,ys=ws*Ts;return e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-3 border rounded items-center",children:[e.jsx("span",{className:"col-span-2 font-medium",children:Pt.name}),e.jsx("div",{className:"text-center font-semibold",children:ut.selectedBrand||"-"}),e.jsx("div",{className:"text-center",children:e.jsx(Xe,{type:"number",className:"w-20 mx-auto h-8",value:ws,onChange:Qs=>B(Gt=>({...Gt,[Pt.id]:{...Gt[Pt.id],quantity:Number(Qs.target.value||0)}}))})}),e.jsx("span",{className:"text-center text-muted-foreground",children:Pt.unit}),e.jsx("div",{className:"text-center font-semibold",children:Kt?.name||"-"}),e.jsx("div",{className:"text-center",children:e.jsx(Xe,{type:"number",className:"w-20 mx-auto h-8",value:Ts,onChange:Qs=>B(Gt=>({...Gt,[Pt.id]:{...Gt[Pt.id],rate:Number(Qs.target.value||0)}}))})}),e.jsxs("div",{className:"text-right font-semibold",children:["",ys.toFixed(2)]})]},Pt.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(6),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{onClick:()=>c(8),disabled:j.length===0,children:["Generate BOM ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"painting-step7"),i===8&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:64,height:64,backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(lo,{size:32})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Bill of Materials(BOM)"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:16},children:[e.jsx("div",{className:"border rounded-lg mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"PAINT TYPE"}),e.jsx("p",{className:"font-semibold",children:le})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"AREA"}),e.jsxs("p",{className:"font-semibold",children:[ct," sq.ft"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"COATS"}),e.jsx("p",{className:"font-semibold",children:rt})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"SURFACE"}),e.jsx("p",{className:"font-semibold capitalize",children:ht})]})]})}),e.jsx("div",{className:"border rounded-lg overflow-hidden mb-4",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Materials Schedule"}),e.jsxs("table",{className:"w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsx("tr",{children:["S.No","Material","Brand","Unit","Qty","Rate ()","Shop","Amount ()"].map(ut=>e.jsx("th",{className:"border px-2 py-2 text-left",children:ut},ut))})}),e.jsx("tbody",{children:Le().map((ut,Pt)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",children:Pt+1}),e.jsx("td",{className:"border px-2 py-2 font-medium",children:ut.name}),e.jsx("td",{className:"border px-2 py-2",children:ut.brandName||"-"}),e.jsx("td",{className:"border px-2 py-2 text-center",children:ut.unit}),e.jsx("td",{className:"border px-2 py-2 text-center",children:ut.quantity}),e.jsx("td",{className:"border px-2 py-2 text-right",children:ut.rate}),e.jsx("td",{className:"border px-2 py-2",children:ut.shopName||"-"}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",(ut.quantity*ut.rate).toFixed(2)]})]},ut.id))})]})]})}),e.jsxs("div",{className:"border rounded-lg p-4 flex justify-between bg-blue-50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Materials"}),e.jsx("p",{className:"font-semibold",children:Le().length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Quantity"}),e.jsx("p",{className:"font-semibold",children:Le().reduce((ut,Pt)=>ut+Pt.quantity,0)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Grand Total"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:["",ft().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-end pt-4",children:[e.jsx(Ce,{variant:"outline",onClick:()=>c(7),children:"Back"}),e.jsxs("button",{onClick:Jt,className:"flex items-center gap-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600",children:[e.jsx(hi,{className:"w-4 h-4"}),"Export Excel"]}),e.jsxs("button",{onClick:gt,className:"flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600",children:[e.jsx(hi,{className:"w-4 h-4"}),"Export PDF"]}),e.jsxs(Ce,{onClick:()=>tt(),children:["Add to BOM ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"painting-step8"),i===9&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-widest text-muted-foreground",children:"Painting Estimator"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Add to BOQ"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Review selected painting materials before finalizing BOQ"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{variant:"destructive",onClick:hs,disabled:Lt.length===0,children:"Delete Selected"}),e.jsx(Ce,{onClick:it,disabled:Le().length===0,children:"Save"}),e.jsx(Ce,{onClick:async()=>{const ut=Le().map(Kt=>({id:Kt.id,name:Kt.name,unit:Kt.unit,quantity:Rt[Kt.id]??Kt.quantity,supplyRate:bt[Kt.id]??Kt.rate,shopId:Kt.shopId,shopName:Kt.shopName,description:se[Kt.id]||""}));if(ut.length===0)return;const Pt={id:`paint-${Date.now()}`,estimator:"painting",bill_no:U,area:xs,coats:rt,materials:ut,subtotal:ut.reduce((Kt,ws)=>Kt+Number(ws.quantity||0)*Number(ws.supplyRate||0),0),created_at:new Date().toISOString()};vt(Pt);try{await Pe()}catch{}qt([]),c(11)},disabled:Le().length===0,children:"Add to BOQ"})]})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Tn,{checked:(()=>{const ut=Le().map(Pt=>Pt.id);return ut.length>0&&ut.every(Pt=>Lt.includes(Pt))})(),onCheckedChange:dt})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2 text-center",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2 text-center",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const ut=Le(),Pt=new Map,Kt=new Map;ut.forEach(Qs=>{const Gt=Qs.product||le||"Painting";Pt.has(Gt)||Pt.set(Gt,[]),Pt.get(Gt).push(Qs),Kt.has(Gt)||Kt.set(Gt,{label:Gt})});const ws=[];let Ts=0;const ys=Array.from(Pt.entries());for(const[Qs,Gt]of ys){const Ys=Gt.map(Mt=>Mt.id),Cn=Ys.length>0&&Ys.every(Mt=>Lt.includes(Mt)),na=`group_${Qs}`,tr=se[na]||"";ws.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{id:`group-${Qs}`,checked:Cn,onCheckedChange:()=>{qt(Cn?Mt=>Mt.filter(bn=>!Ys.includes(bn)):Mt=>Array.from(new Set([...Mt,...Ys])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:Kt.get(Qs)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Xe,{placeholder:"Group description",value:tr?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:Mt=>re(bn=>({...bn,[na]:Mt.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${Qs}`)),Gt.forEach(Mt=>{Ts+=1;const bn=Rt[Mt.id]??Mt.quantity,Tr=bt[Mt.id]??Mt.rate,lr=Number(bn||0)*Number(Tr||0);ws.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{checked:Lt.includes(Mt.id),onCheckedChange:()=>ze(Mt.id)})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Ts}),e.jsx("td",{className:"border px-2 py-1 font-medium",children:Mt.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450},children:e.jsx("textarea",{className:"h-20 w-full p-2 border rounded",placeholder:"Description",value:se[Mt.id]??"",onChange:Bs=>re(Js=>({...Js,[Mt.id]:Bs.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Mt.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",className:"h-8 text-center",value:bn,onChange:Bs=>Tt(Mt.id,Number(Bs.target.value||0))})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",className:"h-8 text-right",value:Tr,onChange:Bs=>Je(Mt.id,Number(Bs.target.value||0))})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-semibold",children:["",lr.toFixed(2)]})]},Mt.id))})}return ws})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(8),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ce,{onClick:()=>c(11),disabled:Le().length===0,children:"Finalize PO"}),e.jsxs(Ce,{onClick:gt,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"painting-step-add-to-boq"),i===11&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:oy,alt:"logo",className:"h-14"}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("h1",{className:"text-lg font-bold",children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"BILL OF QUANTITIES (PAINTING)"})]}),e.jsx("div",{className:"text-right text-xs",children:Ss})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-slate-100",children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2 text-center",children:e.jsx(Tn,{checked:is.length>0&&is.every(ut=>$e.includes(ut.id)),onCheckedChange:ut=>St(ut?is.map(Pt=>Pt.id):[])})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{className:"bg-slate-50",children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Install"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Install"})]})]}),e.jsx("tbody",{children:is.map((ut,Pt)=>{const Kt=Number(ut.quantity??1),ws=Number(ut.supplyRate??0),Ts=Number(ut.installRate??0);return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{checked:$e.includes(ut.id),onCheckedChange:()=>St(ys=>ys.includes(ut.id)?ys.filter(Qs=>Qs!==ut.id):[...ys,ut.id])})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Pt+1}),e.jsx("td",{className:"border px-2 py-1 font-medium",children:ut.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{value:ut.location??"",onChange:ys=>re(Qs=>({...Qs,location:ys.target.value})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{value:se.product??ut.description??"",onChange:ys=>re(Qs=>({...Qs,product:ys.target.value})),className:"w-full min-h-16 border rounded p-2"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:ut.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Kt}),e.jsx("td",{className:"border px-2 py-1",children:e.jsxs("div",{className:"text-right",children:["",ws.toFixed(2)]})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsxs("div",{className:"text-right",children:["",Ts.toFixed(2)]})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-semibold",children:["",(Kt*ws).toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-semibold",children:["",(Kt*Ts).toFixed(2)]})]},ut.id)})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Ce,{variant:"destructive",disabled:!$e.length,onClick:nn,children:"Delete Selected"}),e.jsx(Ce,{onClick:es,children:"Save"}),e.jsx(Ce,{onClick:()=>c(1),children:"Add Product"}),e.jsx(Ce,{onClick:()=>c(12),children:"Create BOQ"})]})]},"step11-painting-finalize-boq"),i===12&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:oy,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES  PAINTING"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Ss})})]}),!zs||zs.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No finalized painting BOQ lines found. Complete Step 11 first."}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Material"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:zs.map((ut,Pt)=>{const Kt=Number(bt[ut.id]??ut.supplyRate??ut.rate??0),ws=Number(vs[ut.id]??ut.installRate??0),Ts=Number(Rt[ut.id]??ut.quantity??0),ys=Ts*Kt,Qs=Ts*ws,Gt=Ls[ut.id]??ut.location??"",Ys=se[ut.id]??ut.description??"",Cn=jt[ut.id]??ut.unit??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:Pt+1}),e.jsx("td",{className:"border px-2 py-1 font-medium",children:ut.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Gt}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"whitespace-pre-wrap",children:Ys})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Cn}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Ts}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",Kt.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",ws.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",ys.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Qs.toFixed(2)]})]},ut.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Us||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Ce,{onClick:()=>c(1),children:"Add More Painting Items"}),e.jsx(Ce,{onClick:Vs,children:"Export Excel"})]})]},"step-12-qa-boq-painting"),i===10&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Bill No"}),e.jsx(Xe,{value:U,onChange:ut=>Q(ut.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Bill Date"}),e.jsx(Xe,{type:"date",value:k,onChange:ut=>K(ut.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Due Date"}),e.jsx(Xe,{type:"date",value:ee,onChange:ut=>q(ut.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Customer Name"}),e.jsx(Xe,{value:G,onChange:ut=>W(ut.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Customer Address"}),e.jsx(Xe,{value:he,onChange:ut=>Z(ut.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Terms & Conditions"}),e.jsx(Xe,{value:ie,onChange:ut=>ce(ut.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(We,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:te,onChange:ut=>be(ut.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),ge.map(ut=>e.jsx("option",{value:ut.id,children:ut.name},ut.id))]}),te&&e.jsx(Xe,{placeholder:"Enter description for selected material",value:se[te]||"",onChange:ut=>re(Pt=>({...Pt,[te]:ut.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:oy,alt:"Logo",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",U]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar, Medavakkam, Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:ae})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",k]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",ee]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",ie]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer"})," : ",G]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(ut=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:ut},ut))})}),e.jsx("tbody",{children:ge.map((ut,Pt)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:Pt+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:ut.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:ut.id&&se[ut.id]||ut.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"3208"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:ut.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:ut.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:ut.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:ut.amount.toFixed(2)})]},Pt))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:250},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:ye.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:we.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Ne.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:Be.toFixed(2)})]}),e.jsxs("tr",{style:{borderTop:"1px solid #000"},children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Math.round(ke).toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Ce,{onClick:Qe,children:"Export PDF"})]})]})]})})})}function Gq(t){const s=t.subcategory?.toLowerCase()||"",n=t.name?.toLowerCase()||"";return n.includes("flush")||s.includes("flush")?"flush-door":n.includes("wpc")||s.includes("wpc")?"wpc-door":n.includes("glass")||s.includes("glass")?"glass-door":n.includes("wood")||s.includes("wood")?"wooden-door":n.includes("stile")||s.includes("stile")?"stile-door":"flush-door"}const kv="/image.png",Wq=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),qr=t=>(t||"").toString().toUpperCase(),mR={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},mf={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},Yq=(t,s)=>{const n=qr(t.product),r=qr(t.name),i=qr(t.category),c=qr(t.subCategory),u=(mR[s]||[s.toUpperCase()]).some(o=>n.includes(o)||r.includes(o)||i.includes(o)||c.includes(o)),d=mf[s],h=d&&qr(n).includes(qr(d));return u||h},Kp=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function Xq(){const[,t]=co(),{shops:s,materials:n,products:r}=fi(),{toast:i}=ua(),[c,A]=S.useState(1),u=typeof window<"u"&&window.location.search.includes("step=11"),[d,h]=S.useState(""),[o,m]=S.useState(""),[y,p]=S.useState(null),[j,b]=S.useState(null),[w,B]=S.useState(null),[U,Q]=S.useState(null),[k,K]=S.useState(null),[ee,q]=S.useState(null),[G,W]=S.useState(1),[he,Z]=S.useState(7),[ie,ce]=S.useState(3),[ae,de]=S.useState(6),[se,re]=S.useState(2),[te,be]=S.useState([]),[He,pe]=S.useState([]);S.useEffect(()=>{lt("/api/accumulated-products/doors",{headers:{}}).then(x=>x.json()).then(x=>{pe(x.data||[])}).catch(x=>console.error("Failed to load accumulated products",x))},[]),S.useEffect(()=>{if(typeof window<"u"){const I=new URLSearchParams(window.location.search).get("step");if(I){const F=parseInt(I,10);F>=1&&F<=12&&A(F)}}},[]),S.useEffect(()=>{if(typeof window<"u"&&c===11){const I=new URLSearchParams(window.location.search).get("product");I&&(async()=>{try{const _=await lt(`/api/products/${I}`,{headers:{}});if(_.ok){const P=(await _.json()).product,z=Gq(P);z&&(B(z),m(P.name),h(P.id))}}catch(_){console.error("Failed to load product data:",_)}})()}},[c]),S.useEffect(()=>{c===12&&lt("/api/accumulated-products/doors",{headers:{}}).then(x=>x.json()).then(x=>{const I=x.data||[];pe(I),console.debug("Restored doors_accumulated_products for Step 12:",I.length)}).catch(x=>console.error("Failed to load accumulated products for Step 12",x))},[c]);const Y=x=>{const I=x?.doorType??w;if(!I)return null;const F=ye.find(L=>L.value===I);let _=F?F.label:mf[I]||I;return/door/i.test(_)||(_=`${_} Door`),_},me=x=>{const I=x?.doorType??w,F=x?.panelType??j,_=x?.subOption??U;if(!I)return null;const L=ye.find(Ie=>Ie.value===I);let P=L?L.label:mf[I]||I;/door/i.test(P)||(P=`${P} Door`);const z=F==="panel"?"With Panel":"Without Panel",ne=_?` - ${_}`:"";return`${z}  ${P}${ne}`},Se=()=>{const x=(o||"").toString();if(!w&&!x)return null;const I=x||me(),F=x||mf[w]||w,_=w?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(w):qr(I).includes("GLASS")||qr(I).includes("STILE");return{label:I,productName:F,requiresGlazing:_}},je=()=>{const x=(o||"").toString();if(!w&&!x||!n.length)return[];const I=x||(w?mf[w]:"");let F=[];if(I&&(F=n.filter(L=>{const P=(L.product||"").toString();if(!P||!I)return!1;const z=qr(P),ne=qr(I);return z.includes(ne)||ne.includes(z)})),(!F||F.length===0)&&!x&&(F=w?n.filter(L=>Yq(L,w)):n.filter(L=>{const P=(L.product||"").toString();if(!I)return!1;const z=qr(P),ne=qr(I);return z.includes(ne)||ne.includes(z)})),F.length===0)return[];const _=new Map;for(const L of F){const P=`${qr(L.product)}__${qr(L.name)}__${Wq(L.code)}`,z=_.get(P);(!z||(L.rate||0)<(z.rate||0))&&_.set(P,L)}return Array.from(_.values())},Le={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},ge=["Single Glass","Double Glass"],ye=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],we=(x,I)=>{const F=G||1,_=he||7,L=ie||3,P=ae||6,z=se||2,ne=Dm(_,L),Ie=x.toLowerCase();let st=0;return Ie.includes("frame")||Ie.includes("door frame")?st=ne*F:Ie.includes("door")&&(Ie.includes("panel")||Ie.includes("shutter")||Ie.includes("flush")||Ie.includes("wooden"))?st=F:Ie.includes("hinge")?st=F*3:Ie.includes("lock")||Ie.includes("handle")||Ie.includes("stopper")||Ie.includes("bolt")?st=F:Ie.includes("glass")?st=Qm(P,z)*F:st=F,Math.max(1,Math.ceil(st))},Ne=(x,I)=>{const F=x||te,_=I||ft;return F.map(L=>{let P=Be.find(Zs=>Zs.id===L.materialId);if(P||(P=n.find(Zs=>Zs.id===L.materialId)||null),!P)return null;const z=n.find(Zs=>{const Rn=qr(Zs.product)===qr(P.product),$=qr(Zs.name)===qr(P.name),ve=Zs.shopId===L.selectedShopId,Ve=Kp(Zs)===(L.selectedBrand||"Generic");return Rn&&$&&ve&&Ve})||P,ne=s.find(Zs=>Zs.id===L.selectedShopId),Ie=L.rowId||(L.batchId?`${L.batchId}-${z.id}`:z.id),st=_[Ie]||_[z.id]||_[P.id],ot=we(z.name,z.unit),Dt=st?.quantity??ot,rs=st?.supplyRate??z.rate??0,cs=st?.installRate??0,Ns=(Hs||[]).find(Zs=>Zs.rowId===Ie||`${Zs.batchId||""}-${Zs.id}`===Ie);return{id:z.id,batchId:L.batchId,rowId:Ie,name:z.name,quantity:Dt,unit:z.unit,rate:rs,shopId:L.selectedShopId,shopName:ne?.name||"Unknown",installRate:cs,doorType:Ns?.doorType||Ns?.door_type||void 0,panelType:Ns?.panelType||Ns?.panel_type||void 0,subOption:Ns?.subOption||Ns?.sub_option||void 0,glazingType:Ns?.glazingType||Ns?.glazing_type||void 0,productLabel:Ns?.productLabel||void 0}}).filter(L=>L!==null)},ke=()=>Ne().reduce((x,I)=>x+I.quantity*I.rate,0),Be=je(),Ae=x=>(x?.name||x?.title||x?.label||x?.productName||x?.product||"").toString(),Qe=x=>(x?.category||x?.type||x?.group||x?.section||"").toString(),le=x=>Xc(x)==="doors",ct=x=>{const I=qr(x);return I.includes("FLUSH")?"flush":I.includes("WPC")?"wpc":I.includes("STILE")||I.includes("ALUMIN")?"stile":I.includes("GLASS PANEL")?"glasspanel":I.includes("GLASS")?"glassdoor":I.includes("WOOD")||I.includes("TEAK")?"wooden":null},rt=(r||[]).filter(le).slice().sort((x,I)=>{const F=Ae(x),_=Ae(I);return F.localeCompare(_)}),ht=x=>{const I=Ae(x);h(x.id||I),m(I);const F=ct(I);B(F||w),Q(null),K(null),q(null),be([]),Jt({}),is({}),nn({}),A(6)},[ft,Jt]=S.useState({}),[gt,tt]=S.useState([]),[Lt,qt]=S.useState({}),[Fs,xs]=S.useState("Concept Trunk Interiors"),[hs,it]=S.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[Pe,dt]=S.useState("33ASOPS5560M1Z1"),[ze,Tt]=S.useState(""),[Je,vt]=S.useState(new Date().toISOString().slice(0,10)),[$e,St]=S.useState(""),[Rt,Zt]=S.useState("50% Advance and 50% on Completion"),[bt,Vt]=S.useState(""),[vs,us]=S.useState(""),[jt,kt]=S.useState(""),[Ft,is]=S.useState({}),[Ss,nn]=S.useState({}),[es,zs]=S.useState({}),[Us,Vs]=S.useState({}),[Ls,js]=S.useState({}),[Os,Ds]=S.useState({}),[ut,Pt]=S.useState([]),[Kt,ws]=S.useState([]),[Ts,ys]=S.useState(""),[Qs,Gt]=S.useState([]),[Ys,Cn]=S.useState([]),[na,tr]=S.useState([]),[Mt,bn]=S.useState(!1);S.useEffect(()=>{(async()=>{if(ze)try{const I=await lt(`/api/estimator-step9-items?session_id=${ze}&estimator=doors`,{headers:{}});if(I.ok){const L=await I.json();Gt(L.items||[])}const F=await lt(`/api/estimator-step11-groups?session_id=${ze}&estimator=doors`,{headers:{}});if(F.ok){const L=await F.json();Cn(L.items||[])}const _=await lt(`/api/estimator-step12-qa-selection?session_id=${ze}&estimator=doors`,{headers:{}});if(_.ok){const L=await _.json();tr(L.items||[])}}catch(I){console.warn("Failed to load data from DB:",I)}})()},[ze]),S.useEffect(()=>{if(c===7){const x=Ne(),I={};x.forEach(F=>{I[F.id]={quantity:F.quantity||0,supplyRate:F.rate||0,installRate:0}}),Jt(I)}},[c,te]),S.useEffect(()=>{if(c===9){const x=Ne(gt,Lt);if(x.length>0){const I=x[0].shopId,F=s.find(_=>_.id===I);if(F){const _=[F.name||"",F.address||"",F.area||"",F.city||"",F.state||"",F.pincode||"",F.gstNo?`GSTIN: ${F.gstNo}`:"",F.phone||""].filter(Boolean);kt(_.join(`
`))}}}},[c,gt,Lt,te,s]),S.useEffect(()=>{if(c===9){Yn();const x=[],I={},F={},_={};if(Hs&&Hs.length>0)for(const L of Hs){const P=L.rowId||`${L.batchId||""}-${L.id}`;x.findIndex(ne=>ne.materialId===L.id&&ne.rowId===P&&(ne.batchId||"")===(L.batchId||""))===-1&&(x.push({materialId:L.id,selectedShopId:L.shopId||"",selectedBrand:L.brand||void 0,batchId:L.batchId,rowId:P}),I[P]={quantity:Number(L.quantity||0),supplyRate:Number(L.supplyRate??L.rate??0),installRate:Number(L.installRate||0)},L.description&&(F[P]=L.description),L.location&&(_[P]=L.location))}if(Qs&&Qs.length>0)for(const L of Qs){if(!n.find(Dt=>Dt.id===L.material_id))continue;const z=L.material_id,ne=L.row_id||(L.batch_id?`${L.batch_id}-${z}`:z),Ie=L.shop_id||"",st=L.brand||void 0;x.findIndex(Dt=>Dt.materialId===z&&(Dt.batchId||"")===(L.batch_id||"")&&(Dt.rowId||"")===ne)===-1&&(x.push({materialId:z,selectedShopId:Ie,selectedBrand:st,batchId:L.batch_id||(L.row_id?ne.replace(`-${z}`,""):void 0)}),I[ne]={quantity:Number(L.quantity||0),supplyRate:Number(L.supply_rate||L.rate||0),installRate:Number(L.install_rate||0)},L.description&&(F[ne]=L.description),L.location&&(_[ne]=L.location))}te&&te.length>0&&te.forEach(L=>{if(x.findIndex(z=>z.materialId===L.materialId&&z.batchId===L.batchId)===-1){x.push(L);const z=n.find(ne=>ne.id===L.materialId);if(z){const ne=L.batchId?`${L.batchId}-${L.materialId}`:L.materialId;I[ne]={quantity:ft[L.materialId]?.quantity??z.quantity??1,supplyRate:ft[L.materialId]?.supplyRate??z.rate??0,installRate:ft[L.materialId]?.installRate??0}}}}),x.length>0&&tt(x),Object.keys(I).length>0&&qt(I),Object.keys(F).length>0&&is(L=>({...L,...F})),Object.keys(_).length>0&&nn(L=>({...L,..._}))}},[c,te,Qs]),S.useEffect(()=>{c===11&&(async()=>{if(ze)try{const I=await lt(`/api/estimator-step11-groups?session_id=${ze}&estimator=doors`,{headers:{}});if(I.ok){const _=(await I.json()).items||[],L={},P={},z={},ne={};_.forEach(Ie=>{const st=n.find(ot=>ot.name===Ie.item);st&&(L[st.id]=Number(Ie.supply_rate||0),P[st.id]=Number(Ie.install_rate||0),z[st.id]=Number(Ie.qty||0),ne[st.id]=Ie.unit||"")}),Ds(Ie=>({...Ie,...L})),js(Ie=>({...Ie,...P})),zs(Ie=>({...Ie,...z})),Vs(Ie=>({...Ie,...ne}))}}catch(I){console.warn("Failed to load step 11 data:",I)}})()},[c,ze,Ys]);const Tr=S.useRef(null);S.useEffect(()=>{Yn().catch(()=>{})},[]),S.useEffect(()=>{(async()=>{if(ze)try{const I=await lt(`/api/estimator-step9-items?session_id=${ze}&estimator=doors`,{headers:{}});if(I.ok){const F=await I.json(),_=F.items.map(L=>({id:L.material_id,rowId:L.row_id,batchId:L.batch_id,name:L.name,unit:L.unit,quantity:L.quantity,supplyRate:L.supply_rate,installRate:L.install_rate,shopId:L.shop_id,shopName:L.shop_name,description:L.description,location:L.location,doorType:L.door_type,panelType:L.panel_type,subOption:L.sub_option,glazingType:L.glazing_type}));if(wr(_),F.items.length>0){const L=F.items[0];Nn({doorType:L.door_type,panelType:L.panel_type,subOption:L.sub_option,glazingType:L.glazing_type,count:L.qty,height:L.height,width:L.width,glassHeight:L.glass_height,glassWidth:L.glass_width,subtotal:L.subtotal,sgst:L.sgst,cgst:L.cgst,round_off:L.round_off,grand_total:L.grand_total})}}}catch(I){console.warn("Failed to load step 9 from DB",I)}})()},[ze]),S.useEffect(()=>(Tr.current&&clearTimeout(Tr.current),Tr.current=setTimeout(async()=>{new Date().toISOString();try{if(!ze)return;const x=Ne().map((I,F)=>{const _=I.rowId||(I.batchId?`${I.batchId}-${I.id}`:I.id);return{estimator:"doors",session_id:ze,s_no:F+1,row_id:String(_),batch_id:I.batchId||null,material_id:I.id,name:I.name,unit:I.unit,quantity:Number(ft[I.id]?.quantity??I.quantity??0),supply_rate:Number(ft[I.id]?.supplyRate??I.rate??0),install_rate:Number(ft[I.id]?.installRate??0),shop_id:I.shopId||"",shop_name:I.shopName||"",description:Ft[I.id]||"",location:Ss[I.id]||"",door_type:w,panel_type:j,sub_option:U,glazing_type:ee,qty:G,height:he,width:ie,glass_height:ae,glass_width:se}});await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"doors",session_id:ze,items:x})})}catch{}},800),()=>{Tr.current&&clearTimeout(Tr.current)}),[te,ft,Ft,Ss,w,j,U,ee,G,he,ie,ae,se,ze]);const lr=x=>{const I=Be.find(Ie=>Ie.id===x);if(!I)return;if(te.find(Ie=>Ie.materialId===x)){be(Ie=>Ie.filter(st=>st.materialId!==x));return}const _=n.filter(Ie=>qr(Ie.product)===qr(I.product)&&qr(Ie.name)===qr(I.name)).map(Ie=>({brand:Kp(Ie),shopId:Ie.shopId,rate:Ie.rate||0})),P=Array.from(new Set(_.map(Ie=>Ie.brand))).sort()[0]||"Generic",ne=_.filter(Ie=>Ie.brand===P).sort((Ie,st)=>Ie.rate-st.rate)[0];ne?.shopId&&be(Ie=>[...Ie,{materialId:x,selectedShopId:ne.shopId,selectedBrand:P}])},Bs=(x,I)=>{be(F=>F.map(_=>_.materialId===x?{..._,selectedShopId:I}:_))},Js=(x,I)=>{const F=Be.find(P=>P.id===x);if(!F)return;const L=n.filter(P=>qr(P.product)===qr(F.product)&&qr(P.name)===qr(F.name)).map(P=>({brand:Kp(P),shopId:P.shopId,rate:P.rate||0})).filter(P=>P.brand===I).sort((P,z)=>P.rate-z.rate)[0]?.shopId||"";be(P=>P.map(z=>z.materialId===x?{...z,selectedBrand:I,selectedShopId:L||z.selectedShopId}:z))},[Pn,kr]=S.useState([]),jr=()=>{const x=(c===9?Ne(gt,Lt):Ne()).map(I=>I.rowId||I.id);kr(I=>I.length===x.length?[]:x)},Ur=async()=>{if(Pn.length!==0){try{const x=[],I=[];for(const F of Pn){const _=Hs?.find(L=>`${L.batchId||""}-${L.id}`===F);if(_&&_.id){const L=Qs.find(P=>P.id===_.id);L&&x.push(L)}else{const L=gt.find(P=>`${P.batchId||""}-${P.materialId}`===F);L&&I.push(L)}}if(x.length>0&&ze&&(await lt("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:ze,estimator:"doors",items:x})}),wr(F=>F?F.filter(_=>!x.some(L=>L.id===_.id)):null)),I.length>0&&tt(F=>F.filter(_=>!I.some(L=>`${L.batchId||""}-${L.materialId}`==`${_.batchId||""}-${_.materialId}`))),tt(F=>F.filter(_=>!Pn.includes(`${_.batchId||""}-${_.materialId}`))),qt(F=>{const _={...F};return Pn.forEach(L=>delete _[L]),_}),ze){const _=await(await lt(`/api/estimator-step9-items?session_id=${ze}&estimator=doors`,{headers:{}})).json();Gt(_.items||[])}i({title:"Success",description:`${Pn.length} item(s) deleted successfully!`})}catch(x){console.warn("Failed to delete items",x),i({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}kr([])}},[hr,qs]=S.useState([]),tn=S.useRef(""),[Is,dn]=S.useState(null),[Hs,wr]=S.useState(null),[at,ms]=S.useState({}),[ds,Nn]=S.useState(null),Yn=async()=>{try{const x=await lt("/api/boq");if(x.status===401){qs([]),tn.current!=="401"&&(tn.current="401",i({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!x.ok){const _=await x.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${_||x.status}`)}if(!(x.headers.get("content-type")||"").includes("application/json")){const _=await x.text().catch(()=>"");console.warn("/api/boq returned non-json:",_),qs([]);return}const F=await x.json();qs(F.boqs||[]),tn.current=""}catch(x){console.error("fetchSavedBoqs",x);const I=String(x?.message||x||"");if(!I)return;tn.current!==I&&(tn.current=I,i({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},sr=async()=>{try{if(!ze)return i({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const x={estimator:"doors",billNo:ze,doorType:w,panelType:j,subOption:U,glazingType:ee,qty:G,height:he,width:ie,glassHeight:ae,glassWidth:se,materials:Hs&&Hs.length>0?Hs:Ne(),subtotal:Ye,sgst:Oe,cgst:yt,roundOff:Qt,grandTotal:ln},I=await lt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!I.ok){const L=await I.text().catch(()=>"");throw new Error(L||"save failed")}const F=I.headers.get("content-type")||"";let _=null;if(F.includes("application/json"))_=await I.json();else{const L=await I.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",L),_={boq:null}}return await Yn(),dn(_?.boq||_?.boqs?.[0]||null),!0}catch(x){return console.error("handleSaveBOQ",x),!1}},ha=async x=>{try{if(!(await lt(`/api/boq/${x}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await Yn()}catch(I){console.error("handleDeleteSavedBoq",I)}},Ma=()=>{A(1),B(null),b(null),Q(null),K(null),W(1),Z(7),ce(3),de(0),re(0),Pt([]),zs({}),is({}),nn({}),Vs({}),Ds({}),js({}),ms({}),dn(null)},Na=async()=>{bn(!0);try{let x=Ys||[];if(ze)try{const P=await lt(`/api/estimator-step11-groups?session_id=${ze}&estimator=doors`);P.ok&&(x=(await P.json()).items||[],Cn(x))}catch(P){console.warn("Failed to refresh step11 items before save",P)}const I=Dn.map(P=>({estimator:"doors",session_id:ze,group_key:(P.groupKey||`${P.doorType||"door"}||${P.panelType||""}||${P.subOption||""}`)+"::"+(P.name||""),group_id:P.groupId||`group_${P.groupKey||""}`,item_name:P.name,unit:P.unit,quantity:P.quantity,location:P.location||"",description:P.description||"",supply_rate:Os[P.id]||P.supplyRate||0,install_rate:Ls[P.id]||P.installRate||0,supply_amount:(P.quantity||0)*(Os[P.id]||P.supplyRate||0),install_amount:(P.quantity||0)*(Ls[P.id]||P.installRate||0),supply_subtotal:Dn.reduce((z,ne)=>z+(ne.quantity||0)*(Os[ne.id]||ne.supplyRate||0),0),install_subtotal:Dn.reduce((z,ne)=>z+(ne.quantity||0)*(Ls[ne.id]||ne.installRate||0),0),sgst:Oe,cgst:yt,round_off:Qt,grand_total:Dn.reduce((z,ne)=>z+(ne.quantity||0)*((Os[ne.id]||ne.supplyRate||0)+(Ls[ne.id]||ne.installRate||0)),0)+Oe+yt+Qt})),F=new Set((x||[]).map(P=>P.group_key||P.groupKey)),_=I.filter(P=>!F.has(P.group_key));if(_.length===0)return i({title:"No changes",description:"No new Step 11 items to save."}),bn(!1),!0;const L=await lt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:_})});if(!L.ok){const P=await L.text().catch(()=>"");return i({title:"Error",description:`Failed saving Step 11: ${P||L.statusText}`,variant:"destructive"}),bn(!1),!1}try{const P=await lt(`/api/estimator-step11-groups?session_id=${ze}&estimator=doors`);if(P.ok){const z=await P.json();Cn(z.items||[])}}catch(P){console.warn("Failed to reload step11 items after save",P)}return pe([]),i({title:"Success",description:"Step 11 saved to database."}),bn(!1),!0}catch(x){return console.error("handleSaveAccumulatedBOQ",x),i({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),bn(!1),!1}},cr=x=>{if(Tt(x.bill_no||""),B(x.door_type||null),b(x.panel_type||null),Q(x.sub_option||null),q(x.glazing_type||null),W(x.qty||1),Z(x.height||7),ce(x.width||3),de(x.glass_height||6),re(x.glass_width||2),Array.isArray(x.materials)){const I=x.materials.map(F=>({materialId:F.id,selectedShopId:F.shopId||F.shop_id||F.shopId||"",selectedBrand:F.shopName||F.brand||F.selectedBrand||void 0}));be(I.filter(Boolean))}dn(x)},Ka=(x,I)=>{if(c===9){qt(F=>({...F,[x]:{...F[x]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(I))}}));return}Jt(F=>({...F,[x]:{...F[x]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(I))}}))},pa=(x,I)=>{if(c===9){qt(F=>({...F,[x]:{...F[x]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(I)),installRate:F[x]?.installRate||0}}));return}Jt(F=>({...F,[x]:{...F[x]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(I)),installRate:F[x]?.installRate||0}}))},er=(x,I)=>{if(c===9){qt(F=>({...F,[x]:{...F[x]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(I)),supplyRate:F[x]?.supplyRate||0}}));return}Jt(F=>({...F,[x]:{...F[x]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(I)),supplyRate:F[x]?.supplyRate||0}}))},oa=()=>{const x=document.getElementById("boq-pdf");if(!x){alert("BOQ content not found");return}setTimeout(()=>{_d().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:I=>I.className?.toString().includes("bg-")||I.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(x).save().catch(I=>{console.error("PDF Export Error:",I),alert("PDF export failed. Check console.")})},100)},pi=async()=>{const x=document.getElementById("boq-final-pdf");if(!x){alert("Final BOQ content not found");return}const I=(await Yc(async()=>{const{default:F}=await Promise.resolve().then(()=>wu);return{default:F}},void 0)).default;I().set({margin:10,filename:`BOQ-${ze||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(x).save()},$a=()=>{const x=Ne(),I=Se(),F=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${j==="panel"?"With Panel":"Without Panel"} - ${I?.label}`,`Dimensions: ${he}ft  ${ie}ft (Count: ${G})`,...ee?[`Glazing: ${ee}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];x.forEach((ne,Ie)=>{const st=ne.quantity*ne.rate;F.push(`${Ie+1},"${ne.name}","${ne.unit}",${ne.quantity},${ne.rate},"${ne.shopName}",${st}`)}),F.push("",`TOTAL COST,,,${ke().toFixed(2)}`);const _=F.join(`
`),L=new Blob([_],{type:"text/csv"}),P=window.URL.createObjectURL(L),z=document.createElement("a");z.href=P,z.download=`BOQ-Doors-${new Date().getTime()}.csv`,z.click(),URL.revokeObjectURL(P)},Va=()=>{const x=Dn||[],I=[];I.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),x.forEach((z,ne)=>{const Ie=Number(z.supplyRate??z.rate??0),st=Number(z.installRate??0),ot=Number(z.quantity||0),Dt=ot*Ie,rs=ot*st,cs=(z.location||Ss[z.id]||"").toString().replace(/"/g,'""'),Ns=(z.description||Ft[z.id]||z.name||"").toString().replace(/"/g,'""'),$=(me({doorType:z.doorType||z.door_type,panelType:z.panelType||z.panel_type,subOption:z.subOption||z.sub_option,glazingType:z.glazingType||z.glazing_type})||z.name||"").replace(/"/g,'""');I.push(`${ne+1},"${$}","${cs}","${Ns}",${z.unit},${ot},${Ie.toFixed(2)},${st.toFixed(2)},${Dt.toFixed(2)},${rs.toFixed(2)}`)});const F=I.join(`
`),_=new Blob([F],{type:"text/csv"}),L=window.URL.createObjectURL(_),P=document.createElement("a");P.href=L,P.download=`BOQ-Doors-Step11-${new Date().getTime()}.csv`,P.click(),URL.revokeObjectURL(L)},ti=async()=>{const x=Ne(gt,Lt).map(Ie=>{const st=Ie.rowId||`${Ie.batchId}-${Ie.id}`;return{id:Ie.id,rowId:st,batchId:Ie.batchId||null,name:Ie.name,unit:Ie.unit,quantity:Lt[st]?.quantity??Lt[Ie.id]?.quantity??Ie.quantity,supplyRate:Lt[st]?.supplyRate??Lt[Ie.id]?.supplyRate??Ie.rate,installRate:Lt[st]?.installRate??Lt[Ie.id]?.installRate??Ie.installRate??0,shopId:Ie.shopId,shopName:Ie.shopName,description:Ft[st]||Ft[Ie.id]||"",location:Ss[st]||Ss[Ie.id]||"",doorType:Ie.doorType,panelType:Ie.panelType,subOption:Ie.subOption,glazingType:Ie.glazingType,isSaved:Ie.isSaved||!1}}),I=x.filter(Ie=>!Ie.isSaved);if(I.length===0){i({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let F=ze;const L=(typeof window<"u"?new URLSearchParams(window.location.search):new URLSearchParams).get("project");L&&L.trim()!==""?(F=L,Tt(F)):(!F||F.trim()==="")&&(F=`DOOR-${Date.now()}`,Tt(F));const P=ds||(()=>{const Ie=x.reduce((cs,Ns)=>cs+Number(Ns.quantity||0)*(Number(Ns.supplyRate||0)+Number(Ns.installRate||0)),0),st=Ie*.09,ot=Ie*.09,Dt=Math.round(Ie+st+ot)-(Ie+st+ot),rs=Ie+st+ot+Dt;return{subtotal:Ie,sgst:st,cgst:ot,round_off:Dt,grand_total:rs}})(),z={id:`local-${Date.now()}`,estimator:"doors",bill_no:F,door_type:ds?.doorType||ds?.door_type||w,panel_type:ds?.panelType||ds?.panel_type||j,sub_option:ds?.subOption||ds?.sub_option||U,glazing_type:ds?.glazingType||ds?.glazing_type||ee,qty:ds?.count||ds?.qty||G,height:ds?.height||he,width:ds?.width||ie,glass_height:ds?.glassHeight||ds?.glass_height||ae,glass_width:ds?.glassWidth||ds?.glass_width||se,materials:x,subtotal:P.subtotal,sgst:P.sgst,cgst:P.cgst,round_off:P.round_off,grand_total:P.grand_total,created_at:new Date().toISOString()};dn(z),wr(x);try{Nn(Ie=>({...Ie||{},...P}))}catch{}const ne=I.map((Ie,st)=>({estimator:"doors",session_id:F,s_no:st+1,row_id:String(Ie.rowId||`${Ie.batchId||""}-${Ie.id}`),batch_id:Ie.batchId||null,material_id:Ie.id,name:Ie.name,unit:Ie.unit,quantity:Number(Ie.quantity||0),supply_rate:Number(Ie.supplyRate||0),install_rate:Number(Ie.installRate||0),shop_id:Ie.shopId||"",shop_name:Ie.shopName||"",description:Ie.description||"",location:Ie.location||"",door_type:Ie.doorType||ds?.doorType||ds?.door_type||w||null,panel_type:Ie.panelType||ds?.panelType||ds?.panel_type||j||null,sub_option:Ie.subOption||ds?.subOption||ds?.sub_option||U||null,glazing_type:Ie.glazingType||ds?.glazingType||ds?.glazing_type||ee||null,qty:ds?.count||ds?.qty||G,height:ds?.height||he,width:ds?.width||ie,glass_height:ds?.glassHeight||ds?.glass_height||ae,glass_width:ds?.glassWidth||ds?.glass_width||se,subtotal:P.subtotal,sgst:P.sgst,cgst:P.cgst,round_off:P.round_off,grand_total:P.grand_total}));try{await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"doors",session_id:F,items:ne})});const st=await(await lt(`/api/estimator-step9-items?session_id=${F}&estimator=doors`,{headers:{}})).json();Gt(st.items||[]);const ot=(Hs||[]).map(Dt=>I.some(cs=>Dt.rowId===cs.rowId||`${Dt.batchId||""}-${Dt.id}`==`${cs.batchId||""}-${cs.id}`)?{...Dt,isSaved:!0}:Dt);wr(ot),i({title:"Success",description:`${I.length} new material(s) saved successfully to database!`})}catch(Ie){console.warn("Failed to save step 9 to DB",Ie),i({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},xe=x=>{let I=5381;for(let F=0;F<x.length;F+=1)I=(I<<5)+I^x.charCodeAt(F);return Math.abs(I>>>0).toString(36)},_e=()=>{const x=JSON.stringify({doorType:w,panelType:j,subOption:U,glazingType:ee,count:G,height:he,width:ie,glassHeight:ae,glassWidth:se,selectedMaterials:(te||[]).map(I=>({materialId:I.materialId,selectedShopId:I.selectedShopId,selectedBrand:I.selectedBrand})),editable:Object.keys(ft||{}).sort().map(I=>({id:I,...ft[I]}))});return`batch-${xe(x)}`},nt=()=>{const I=`${_e()}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,F=Ne(te,ft).map(ot=>({id:ot.id,rowId:`${I}-${ot.id}`,batchId:I,name:ot.name,unit:ot.unit,quantity:ft[ot.id]?.quantity??ot.quantity,supplyRate:ft[ot.id]?.supplyRate??ot.rate,installRate:ft[ot.id]?.installRate??0,shopId:ot.shopId,shopName:ot.shopName,description:Ft[ot.id]||"",location:Ss[ot.id]||"",doorType:w,panelType:j,subOption:U,glazingType:ee,isSaved:!1}));if(F.length===0){A(9);return}const _=new Set((Hs||[]).map(ot=>ot.id)),L=F.filter(ot=>!_.has(ot.id));if(L.length===0){A(9);return}const z=[...Hs||[],...L],ne=new Map;for(const ot of z){const Dt=`${ot.id}`;ne.has(Dt)||ne.set(Dt,ot)}const Ie=Array.from(ne.values());wr(Ie),tt(Ie.map(ot=>({materialId:ot.id,selectedShopId:ot.shopId||"",selectedBrand:ot.brand||void 0,batchId:ot.batchId,rowId:ot.rowId})));const st={};Ie.forEach(ot=>{const Dt=ot.rowId||`${ot.batchId}-${ot.id}`;st[Dt]={quantity:Number(ot.quantity||0),supplyRate:Number(ot.supplyRate||ot.rate||0),installRate:Number(ot.installRate||0)}}),qt(st);try{const ot=ke(),Dt=ot*.09,rs=ot*.09,cs=Math.round(ot+Dt+rs)-(ot+Dt+rs),Ns=ot+Dt+rs+cs;Nn({doorType:w,panelType:j,subOption:U,glazingType:ee,count:G,height:he,width:ie,glassHeight:ae,glassWidth:se,subtotal:ot,sgst:Dt,cgst:rs,round_off:cs,grand_total:Ns})}catch{}be([]),Jt({}),is(ot=>{const Dt={...ot};return Object.keys(Dt).forEach(rs=>{rs.startsWith("group_")||delete Dt[rs]}),Dt}),nn(ot=>{const Dt={...ot};return Object.keys(Dt).forEach(rs=>{rs.startsWith("group_")||delete Dt[rs]}),Dt}),A(9)},V=c===9||c===11?Ne(gt,Lt):Ne(),Te=c===9?Lt:ft,Ye=V.reduce((x,I)=>x+I.quantity*((Te[I.id]?.supplyRate??I.rate)+(Te[I.id]?.installRate??I.installRate??0)),0),Oe=Ye*.09,yt=Ye*.09,Qt=Math.round(Ye+Oe+yt)-(Ye+Oe+yt),ln=Ye+Oe+yt+Qt,Ln=He.length>0?He.flatMap(x=>x.materials||[]):Hs&&Hs.length>0?Hs:V&&V.length>0?V:Is&&Is.materials&&Is.materials.length>0?Array.isArray(Is.materials)?Is.materials:JSON.parse(Is.materials||"[]"):V,bs=(()=>{const x=new Map;for(const F of Ln||[]){const _=F.doorType||F.door_type||ds?.doorType||ds?.door_type||w||"door",L=F.panelType||F.panel_type||ds?.panelType||ds?.panel_type||j||"",P=F.subOption||F.sub_option||ds?.subOption||ds?.sub_option||"",z=`${_}||${L}||${P}`;x.has(z)||x.set(z,[]),x.get(z).push(F)}const I=[];for(const[F,_]of x.entries()){const[L,P,z]=F.split("||"),ne=`group_${F}`,Ie=Ft[ne]||"",st=Ss[ne]||"";let ot=Number(at[ne]??ds?.count??ds?.qty??G??1);const Dt=String(Ie).match(/Qty:\s*(\d+(?:\.\d+)?)/);Dt&&(at[ne]===void 0||at[ne]===null)&&(ot=Number(Dt[1]));const rs=_.reduce((ve,Ve)=>ve+Number(Ve.quantity||0)*Number(Ve.supplyRate??Ve.rate??0),0),cs=ot>0?rs/ot:rs,Ns=_.reduce((ve,Ve)=>ve+Number(Ve.quantity||0)*Number(Ve.installRate??0),0),Zs=ot>0?Ns/ot:Ns,Rn=Y({doorType:L})||L,$=String(Ie).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();I.push({id:ne,groupKey:F,name:Rn,location:st||"",description:$||"",unit:"pcs",quantity:ot,supplyRate:Number(cs||0),installRate:Number(Ls[ne]??Zs??0),supplyAmount:Number(cs*ot||0),installAmount:Number((Ls[ne]??Zs)*ot||0)})}return I})();(Ys||[]).filter(x=>x.item||x.item_name).map((x,I)=>{const F=x.group_key||x.groupKey||`${x.door_type||x.doorType||"door"}||${x.panel_type||x.panelType||""}||${x.sub_option||x.subOption||""}`;return{id:x.id,groupKey:F,name:x.item_name||x.item||x.name||x.door_label||x.doorType||x.door_type||"Door",location:x.location||"",description:x.description||"",unit:x.unit||"pcs",quantity:Number(x.quantity??x.qty??1),supplyRate:Number(x.supply_rate??x.supplyRate??0),installRate:Number(x.install_rate??x.installRate??0),supplyAmount:Number(x.supply_amount??0),installAmount:Number(x.install_amount??0),doorType:x.door_type||x.doorType,panelType:x.panel_type||x.panelType,subOption:x.sub_option||x.subOption}});const Dn=(He.length===0?bs.filter(x=>!(Ys||[]).some(F=>(F.group_key||F.groupKey||`${F.door_type||""}||${F.panel_type||""}||${F.sub_option||""}`)===x.groupKey)):He.map((x,I)=>({id:`accumulated_${I}`,groupKey:`${x.doorType||"door"}||${x.panelType||""}||${x.subOption||""}`,name:x.doorLabel||me({doorType:x.doorType,panelType:x.panelType,subOption:x.subOption})||x.doorType,location:x.location||"",description:x.description||"",unit:"pcs",quantity:x.count||1,supplyRate:x.materials?.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.supplyRate??_.rate??0),0)||0,installRate:x.materials?.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.installRate??0),0)||0,supplyAmount:x.materials?.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.supplyRate??_.rate??0),0)||0,installAmount:x.materials?.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.installRate??0),0)||0})))||[],Hn=Dn.filter(x=>Kt.includes(x.id)),qn=Dn.reduce((x,I)=>{const F=Number(es[I.id]??(I.quantity||0)),_=Number(Os[I.id]??I.supplyRate??I.rate??0);return x+F*_},0);Dn.reduce((x,I)=>{const F=Number(es[I.id]??(I.quantity||0));return x+F*Number(I.installRate||0)},0);const Yr=Hn.reduce((x,I)=>{const F=Number(es[I.id]??(I.quantity||0)),_=Number(Os[I.id]??I.supplyRate??I.rate??0);return x+F*_},0);Is&&Is.bill_no;const v=Is&&Is.created_at?new Date(Is.created_at).toISOString().slice(0,10):Je,N=x=>{if(!x)return!1;const I=(x.name||"").toString().trim(),F=Number(x.quantity||0),_=Number(x.supplyRate??x.rate??0),L=Number(x.installRate??0),P=(x.description||"").toString().trim(),z=(x.location||"").toString().trim();return!!I||F>0||_>0||L>0||!!P||!!z};return(He||[]).map(x=>{const I=(x.materials||[]).filter(N),F=I.reduce((L,P)=>L+Number(P.quantity||0)*Number(P.supplyRate??P.rate??0),0),_=I.reduce((L,P)=>L+Number(P.quantity||0)*Number(P.installRate??0),0);return{...x,materials:I,supplySubtotal:F,installSubtotal:_,subtotal:F+_}}).filter(x=>(x.materials||[]).length>0),e.jsx(Sa,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Door Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(Ms,{className:"border-border/50",children:e.jsx(Ws,{className:"pt-8 min-h-96",children:e.jsxs(Fl,{mode:"wait",children:[c===1&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Door Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:rt.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No door products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Door."})]}):e.jsx("div",{className:"grid gap-3",children:rt.map(x=>{const I=Ae(x),F=(x?.id||I).toString(),_=d===F;return e.jsx(Ce,{variant:_?"default":"outline",onClick:()=>ht(x),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:I||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Qe(x)})]})},F)})})})]},"step-select-product"),c===11&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:kv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:v})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all-groups",checked:(()=>{const x=(Dn||[]).map(I=>I.id);return x.length>0&&x.every(I=>ut.includes(I))})(),onCheckedChange:x=>{Pt(x?(Dn||[]).map(I=>I.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Dn||[]).map((x,I)=>{const F=Number(Os[x.id]??x.supplyRate??x.rate??0),_=Number(Ls[x.id]??x.installRate??0);let L=Number(es[x.id]??(x.quantity||0));const P=L*F,z=L*_;return Ss[x.id]??x.location,Ft[x.id]??x.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{checked:ut.includes(x.id),onCheckedChange:()=>{Pt(ne=>ne.includes(x.id)?ne.filter(Ie=>Ie!==x.id):[...ne,x.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:I+1}),e.jsx("td",{className:"border px-2 py-1",children:x.productLabel||x.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx(Xe,{value:Ss[x.id]??x.location??"",onChange:ne=>nn(Ie=>({...Ie,[x.id]:ne.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:Ft[x.id]??x.description??"",onChange:ne=>is(Ie=>({...Ie,[x.id]:ne.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{value:Us[x.id]??x.unit??"",onChange:ne=>Vs(Ie=>({...Ie,[x.id]:ne.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",value:L,onChange:ne=>zs(Ie=>({...Ie,[x.id]:Number(ne.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:F,onChange:ne=>Ds(Ie=>({...Ie,[x.id]:Number(ne.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:_,onChange:ne=>js(Ie=>({...Ie,[x.id]:Number(ne.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",P.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",z.toFixed(2)]})]},x.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(qn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!u&&e.jsx(Ce,{variant:"outline",onClick:()=>A(9),children:"Back"}),e.jsx(Ce,{variant:"destructive",disabled:ut.length===0,onClick:async()=>{if(console.log("Delete selected:",ut),Ys.length>0&&ze)try{await lt("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:ut,estimator:"doors"})});const x=await lt(`/api/estimator-step11-groups?session_id=${ze}&estimator=doors`,{headers:{}});if(x.ok){const I=await x.json();Cn(I.items||[])}i({title:"Success",description:"Step 11 data deleted from database!"})}catch(x){console.warn("Failed to delete step 11 from DB",x),i({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(He.length===0)if(Is){console.log("Deleting from saved BOQ");const x=ut.map(L=>L.replace("group_","")),I=Array.isArray(Is.materials)?Is.materials:JSON.parse(Is.materials||"[]");console.log("Current materials:",I.length);const F=I.filter(L=>{const P=L.doorType||L.door_type||ds?.doorType||ds?.door_type||w||"door",z=L.panelType||L.panel_type||ds?.panelType||ds?.panel_type||j||"",ne=L.subOption||L.sub_option||ds?.subOption||ds?.sub_option||U||"",Ie=`${P}||${z}||${ne}`,st=x.includes(Ie);return console.log("Checking material:",L.id||L.name,Ie,"match:",st),!st});console.log("Filtered materials:",F.length);const _={...Is,materials:F};dn(_),lt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}).then(()=>console.log("Saved updated BOQ")).catch(L=>console.error("Error saving BOQ:",L))}else{console.log("Deleting from Step 11 saved materials");const x=ut.map(_=>_.replace("group_","")),F=((Hs&&Hs.length>0?Hs:V)||[]).filter(_=>{const L=_.doorType||_.door_type||ds?.doorType||ds?.door_type||w||"door",P=_.panelType||_.panel_type||ds?.panelType||ds?.panel_type||j||"",z=_.subOption||_.sub_option||ds?.subOption||ds?.sub_option||U||"",ne=`${L}||${P}||${z}`;return!x.includes(ne)});wr(F)}else if(He.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",He.length);let x;if(ut.some(I=>I.startsWith("accumulated_"))){const I=ut.filter(F=>F.startsWith("accumulated_")).map(F=>parseInt(F.replace("accumulated_",""))).sort((F,_)=>_-F);x=[...He],I.forEach(F=>{F>=0&&F<x.length&&x.splice(F,1)})}else{const I=ut.map(F=>F.replace("group_",""));x=He.filter(F=>{const _=`${F.doorType||"door"}||${F.panelType||""}||${F.subOption||""}`,L=I.includes(_);return console.log("Checking product:",F.id,_,"match:",L),!L})}console.log("Accumulated products after:",x.length),pe(x),lt("/api/accumulated-products/doors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:x})}).catch(I=>console.error("Failed to save accumulated products after delete",I))}Pt([])},children:"Delete Selected"}),e.jsx(Ce,{onClick:Ma,children:"Add Product"}),e.jsx(Ce,{onClick:Na,disabled:Mt,children:"Save"}),e.jsx(Ce,{onClick:async()=>{ws(ut);const x=(Hn||[]).map((I,F)=>{const _=Number(Os[I.id]??I.supplyRate??I.rate??0),L=Number(Ls[I.id]??I.installRate??0);let P=Number(es[I.id]??(I.quantity||0));return{s_no:F+1,item:I.name,location:Ss[I.id]??I.location??"",description:Ft[I.id]??I.description??"",unit:Us[I.id]??I.unit??"",qty:P,supply_rate:_,install_rate:L,supply_amount:P*_,install_amount:P*L}});try{const I=await lt(`/api/estimator-step12-qa-selection?session_id=${ze}&estimator=doors`,{headers:{}});let F=[];I.ok&&(F=(await I.json()).items||[]);const _=x.filter(z=>!F.some(ne=>ne.item===z.item&&ne.description===z.description&&ne.unit===z.unit));if(_.length===0){A(12);return}await lt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"doors",session_id:ze,items:_})});const P=await(await lt(`/api/estimator-step12-qa-selection?session_id=${ze}&estimator=doors`,{headers:{}})).json();tr(P.items||[]),i({title:"Success",description:`${_.length} new material(s) saved successfully to database!`}),A(12)}catch(I){console.warn("Failed to save step 12 to DB",I),i({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),c===4&&w&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(Le[w]||[]).map(x=>e.jsx(Ce,{onClick:()=>{Q(x),K(null)},className:`w-full text-black ${U===x?"bg-cyan-500":"bg-white"}`,children:x},x))}),w==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:ge.map(x=>e.jsx(Ce,{onClick:()=>K(x),className:`w-full text-black ${k===x?"bg-cyan-500":"bg-white"}`,children:x},x))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>A(3),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{onClick:()=>A(5),disabled:!U||w==="flush"&&U==="With Vision Panel"&&!k,children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),c===5&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"count",children:"Count"}),e.jsx(Xe,{id:"count",type:"number",placeholder:"1",value:G||"",onChange:x=>W(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"height",children:"Height"}),e.jsx(Xe,{id:"height",type:"number",placeholder:"7",value:he||"",onChange:x=>Z(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"width",children:"Width"}),e.jsx(Xe,{id:"width",type:"number",placeholder:"3",value:ie||"",onChange:x=>ce(x.target.value?parseFloat(x.target.value):null)})]})]}),Se()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(We,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx(Xe,{id:"glassHeight",type:"number",placeholder:"72",value:ae||"",onChange:x=>de(x.target.value?parseFloat(x.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx(Xe,{id:"glassWidth",type:"number",placeholder:"24",value:se||"",onChange:x=>re(x.target.value?parseFloat(x.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>A(Se()?.requiresGlazing?4:3),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{disabled:!G||!he||!ie||Se()?.requiresGlazing&&(!ae||!se),onClick:()=>A(6),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),c===6&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Se()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Tn,{id:"select-all-materials",checked:te.length===Be.length&&Be.length>0,onCheckedChange:x=>{if(x){const I=Be.map(F=>{const _=n.filter(ne=>qr(ne.product)===qr(F.product)&&qr(ne.name)===qr(F.name)).map(ne=>({id:ne.id,brand:Kp(ne),shopId:ne.shopId,rate:ne.rate,unit:ne.unit,shopName:s.find(Ie=>Ie.id===ne.shopId)?.name||"Unknown"})),P=Array.from(new Set(_.map(ne=>ne.brand))).sort()[0]||"Generic",z=_.filter(ne=>ne.brand===P).sort((ne,Ie)=>(ne.rate||0)-(Ie.rate||0));return{materialId:F.id,selectedBrand:P,selectedShopId:z[0]?.shopId||""}});be(I)}else be([])}}),e.jsx(We,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Be.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",w||o||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(w?mR[w]||[w]:[o||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",n.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(n.map(x=>x.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Be.map(x=>{const I=te.some(Ie=>Ie.materialId===x.id),F=te.find(Ie=>Ie.materialId===x.id),_=n.filter(Ie=>qr(Ie.product)===qr(x.product)&&qr(Ie.name)===qr(x.name)).map(Ie=>({id:Ie.id,brand:Kp(Ie),shopId:Ie.shopId,rate:Ie.rate,unit:Ie.unit,shopName:s.find(st=>st.id===Ie.shopId)?.name||"Unknown"})),L=Array.from(new Set(_.map(Ie=>Ie.brand))).sort(),z=te.find(Ie=>Ie.materialId===x.id)?.selectedBrand||L[0]||"Generic",ne=_.filter(Ie=>Ie.brand===z).sort((Ie,st)=>(Ie.rate||0)-(st.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Tn,{id:x.id,checked:I,onCheckedChange:()=>lr(x.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:x.id,className:"font-medium cursor-pointer",children:x.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x.code}),I&&L.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(We,{className:"text-xs",children:"Select Brand:"}),e.jsxs(mn,{value:z,onValueChange:Ie=>Js(x.id,Ie),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:L.map(Ie=>e.jsx(Ks,{value:Ie,children:Ie},Ie))})]})]}),I&&ne.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(We,{className:"text-xs",children:"Select Shop:"}),e.jsxs(mn,{value:F?.selectedShopId||ne[0].shopId,onValueChange:Ie=>Bs(x.id,Ie),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:ne.map(Ie=>e.jsxs(Ks,{value:Ie.shopId||"",children:[Ie.shopName," - ",Ie.rate,"/",x.unit,Ie.rate===ne[0].rate&&" (Best)"]},Ie.shopId))})]})]})]})]})},x.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>A(1),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{disabled:te.length===0,onClick:()=>A(7),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),c===7&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:Ne().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),Ne().map(x=>{const I=te.find(_=>_.materialId===x.id),F=n.find(_=>_.id===x.id);return e.jsxs("div",{className:$s("p-3 border rounded grid grid-cols-8 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:x.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:I?.selectedBrand||F?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Xe,{type:"number",value:ft[x.id]?.quantity??x.quantity,onChange:_=>Ka(x.id,parseInt(_.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:x.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:x.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Xe,{type:"number",value:ft[x.id]?.supplyRate??x.rate,onChange:_=>pa(x.id,parseFloat(_.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((ft[x.id]?.quantity??x.quantity)*((ft[x.id]?.supplyRate??x.rate)+(ft[x.id]?.installRate??0))).toFixed(2)]})]},x.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>A(6),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{onClick:()=>A(8),disabled:Ne().length===0,children:["Next: Generate BOM"," ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),c===8&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(lo,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:Y()||"Door"})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[he," ft  ",ie," ft (Qty: ",G,")"]})]}),ee&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:ee})]}),Se()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[ae,'"  ',se,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(x=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:x==="Qty"||x.includes("Rate")||x.includes("Amount")?"right":"left"},children:x},x))})}),e.jsx("tbody",{children:Ne().map((x,I)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:I+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:x.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:x.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:x.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:x.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:x.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(x.quantity*x.rate).toFixed(2)})]},x.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:te.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:Ne().reduce((x,I)=>x+I.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",ke().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Ce,{onClick:()=>A(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:$a,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(hi,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:oa,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ce,{onClick:()=>nt(),disabled:Ne().length===0,children:["Add to BOM ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{A(1),h(""),m(""),b(null),B(null),q(null),W(1),Z(7),ce(3),de(6),re(2),be([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(Jn,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),c===12&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:kv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:v})})]}),!Hn||Hn.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Hn||[]).map((x,I)=>{const F=Number(Os[x.id]??x.supplyRate??x.rate??0),_=Number(Ls[x.id]??x.installRate??0);let L=Number(es[x.id]??(x.quantity||0));const P=L*F,z=L*_,ne=Ss[x.id]??x.location??"",Ie=Ft[x.id]??x.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:I+1}),e.jsx("td",{className:"border px-2 py-1",children:x.productLabel||x.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:ne||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:Ie||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Us[x.id]??x.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:L}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",F.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",P.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",z.toFixed(2)]})]},x.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Yr||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{variant:"outline",onClick:()=>A(11),children:"Back"}),e.jsx(Ce,{onClick:async()=>{if(na.length>0){i({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const x=await lt(`/api/estimator-step12-qa-selection?session_id=${ze}&estimator=doors`,{headers:{}});let I=[];x.ok&&(I=(await x.json()).items||[]);const _=(Hn||[]).map((z,ne)=>{const Ie=Number(Os[z.id]??z.supplyRate??z.rate??0),st=Number(Ls[z.id]??z.installRate??0),ot=Number(es[z.id]??(z.quantity||0));return{s_no:ne+1,item:z.name,location:Ss[z.id]??z.location??"",description:Ft[z.id]??z.description??"",unit:Us[z.id]??z.unit??"",qty:ot,supply_rate:Ie,install_rate:st,supply_amount:ot*Ie,install_amount:ot*st}}).filter(z=>!I.some(ne=>ne.item===z.item&&ne.description===z.description&&ne.unit===z.unit));if(_.length===0){i({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await lt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"doors",session_id:ze,items:_})});const P=await(await lt(`/api/estimator-step12-qa-selection?session_id=${ze}&estimator=doors`,{headers:{}})).json();tr(P.items||[]),i({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(x){console.warn("Failed to save step 12 to DB",x),i({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Ce,{onClick:()=>A(1),children:"Add More Products"}),e.jsx(Ce,{onClick:Va,children:"Export Excel"})]})]},"step-qa-boq"),c===10&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Bill No"}),e.jsx(Xe,{value:ze,onChange:x=>Tt(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Bill Date"}),e.jsx(Xe,{type:"date",value:Je,onChange:x=>vt(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Due Date"}),e.jsx(Xe,{type:"date",value:$e,onChange:x=>St(x.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Customer Name"}),e.jsx(Xe,{value:bt,onChange:x=>Vt(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Customer Address"}),e.jsx(Xe,{value:vs,onChange:x=>us(x.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Terms & Conditions"}),e.jsx(Xe,{value:Rt,onChange:x=>Zt(x.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(We,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Ts,onChange:x=>ys(x.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),Ne().map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]}),Ts&&e.jsx(Xe,{placeholder:"Enter description for selected material",value:Ft[Ts]||"",onChange:x=>is(I=>({...I,[Ts]:x.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:kv,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",ze]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:jt})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",Je]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",$e]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",Rt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",bt]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(x=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:x},x))})}),e.jsx("tbody",{children:V.map((x,I)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:I+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.id&&Ft[x.id]||x.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:x.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(x.quantity||0)*Number(x.rate||0)||0).toFixed(2)})]},x.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:Ye.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Oe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:yt.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:Qt.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",ln.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",ln.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{onClick:()=>A(8),variant:"outline",children:"Back"}),e.jsx(Ce,{onClick:pi,children:"Export PDF"})]})]}),c===9&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{variant:"destructive",onClick:Ur,disabled:Pn.length===0,children:"Delete Selected"}),e.jsx(Ce,{type:"button",onClick:ti,disabled:V.length===0,children:"Save"}),e.jsx(Ce,{onClick:async()=>{const x=Ne(gt,Lt),I=Pn.length>0?x.filter(z=>Pn.includes(z.rowId||`${z.batchId}-${z.id}`)):x,F=I.map(z=>{const ne=z.rowId||`${z.batchId||""}-${z.id}`;return{id:z.id,rowId:ne,batchId:z.batchId,name:z.name,unit:z.unit,quantity:Lt[ne]?.quantity??Lt[z.id]?.quantity??z.quantity,supplyRate:Lt[ne]?.supplyRate??Lt[z.id]?.supplyRate??z.rate,installRate:Lt[ne]?.installRate??Lt[z.id]?.installRate??z.installRate??0,shopId:z.shopId,shopName:z.shopName,description:Ft[ne]||Ft[z.id]||"",location:Ss[ne]||Ss[z.id]||"",doorType:z.doorType,panelType:z.panelType,subOption:z.subOption,glazingType:z.glazingType}});if(F.length===0)return;const _=I[0],L={id:`local-${Date.now()}`,estimator:"doors",bill_no:ze,door_type:_?.doorType||ds?.doorType||ds?.door_type||w,panel_type:_?.panelType||ds?.panelType||ds?.panel_type||j,sub_option:_?.subOption||ds?.subOption||ds?.sub_option||U,glazing_type:_?.glazingType||ds?.glazingType||ds?.glazing_type||ee,qty:ds?.count||ds?.qty||G,height:ds?.height||he,width:ds?.width||ie,glass_height:ds?.glassHeight||ds?.glass_height||ae,glass_width:ds?.glassWidth||ds?.glass_width||se,materials:F,subtotal:F.reduce((z,ne)=>z+Number(ne.quantity||0)*(Number(ne.supplyRate||0)+Number(ne.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};dn(L);try{await sr()}catch{}const P=typeof window<"u"?new URLSearchParams(window.location.search).get("project"):null;if(P)try{const z=F.map((Ns,Zs)=>({s_no:Zs+1,item:Ns.name,description:Ns.description,unit:Ns.unit,qty:Ns.quantity,supply_rate:Number(Ns.supplyRate||0),install_rate:Number(Ns.installRate||0)})),ne=z.reduce((Ns,Zs)=>Ns+Number(Zs.qty||0)*(Number(Zs.supply_rate||0)+Number(Zs.install_rate||0)),0),Ie=+(+ne*.09).toFixed(2),st=+(+ne*.09).toFixed(2),ot=+(ne+Ie+st).toFixed(2),Dt=`${L.sub_option||""}${L.sub_option?"  ":""}${L.door_type||""}`.trim(),rs={groups:[{id:`g-${Date.now()}`,title:Dt||"Item Group",description:"",unit:"",qty:1,supply_rate:Number(ds?.grand_total??ot),install_rate:0,rows:z,totals:{subtotal:ne,sgst:Ie,cgst:st,grand_total:ot}}]};(await lt("/api/boq-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:P,estimator:"doors",table_data:rs})})).ok&&(i({title:"Success",description:"Added to BOQ"}),t(`/create-boq?project=${encodeURIComponent(P)}`))}catch(z){console.error("Failed to save BOQ item:",z),i({title:"Error",description:"Failed to add to BOQ",variant:"destructive"})}kr([]),A(11)},disabled:V.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{className:"text-sm font-semibold",children:"Saved BOQs"}),hr.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:hr.map(x=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.bill_no||`${x.estimator} - ${x.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(x.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{onClick:()=>cr(x),size:"sm",children:"Load"}),e.jsx(Ce,{variant:"destructive",onClick:()=>ha(x.id),size:"sm",children:"Delete"})]})]},x.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all",checked:(()=>{const x=(c===9?Ne(gt,Lt):Ne()).map(I=>I.rowId||I.id);return Pn.length===x.length&&x.length>0})(),onCheckedChange:jr})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const x=new Map,I=new Map;V.forEach(L=>{const P=L.doorType||L.door_type||ds?.doorType||ds?.door_type||w||"door",z=L.panelType||L.panel_type||ds?.panelType||ds?.panel_type||j||"",ne=L.subOption||L.sub_option||ds?.subOption||ds?.sub_option||"",Ie=`${P}||${z}||${ne}`;if(x.has(Ie)||x.set(Ie,[]),x.get(Ie).push(L),!I.has(Ie)){const st=ye.find(rs=>rs.value===P);let ot=st?st.label:mf[P]||P;/door/i.test(ot)||(ot=`${ot} Door`);const Dt=`${ot}${ne?" ("+ne+")":""}`;I.set(Ie,{label:Dt})}});const F=[];let _=0;for(const[L,P]of x.entries()){const z=P.map(Dt=>Dt.rowId||`${Dt.batchId||""}-${Dt.id}`),ne=z.every(Dt=>Pn.includes(Dt)),Ie=`group_${L}`,st=Ft[Ie]||"",ot=Number(at[Ie]??ds?.count??ds?.qty??G??1);F.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{id:`group-${L}`,checked:ne,onCheckedChange:()=>{kr(ne?Dt=>Dt.filter(rs=>!z.includes(rs)):Dt=>Array.from(new Set([...Dt,...z])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:I.get(L)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Xe,{placeholder:"Group description",value:st?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:Dt=>is(rs=>({...rs,[Ie]:Dt.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",className:"h-8 text-center",value:at[Ie]??ot,onChange:Dt=>{const rs=Dt.target.value?parseFloat(Dt.target.value):0;ms(cs=>({...cs,[Ie]:rs})),is(cs=>{const Ns=(cs[Ie]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...cs,[Ie]:Ns?Ns+`
Qty: `+rs:"Qty: "+rs}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${L}`));for(const Dt of P){_+=1;const rs=Dt.rowId||`${Dt.batchId}-${Dt.id}`,cs=Number(Te[rs]?.supplyRate??Te[Dt.id]?.supplyRate??Dt.rate??0),Ns=Number(Te[rs]?.installRate??Te[Dt.id]?.installRate??Dt.installRate??0),Zs=cs+Ns,Rn=Number(Te[rs]?.quantity??Te[Dt.id]?.quantity??Dt.quantity??0),$=Rn*Zs,ve=Ft[rs]??Ft[Dt.id]??Dt.description??"",Ve=String(ve).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();F.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:_}),e.jsx("td",{className:"border px-2 py-1",children:Dt.productLabel||Dt.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:Ft[rs]??Ft[Dt.id]??Ve,onChange:At=>is(Bt=>({...Bt,[rs]:At.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Us[rs]??Us[Dt.id]??Dt.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",className:"h-8 text-center",value:Rn,onChange:At=>Ka(rs,At.target.value?parseFloat(At.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:Zs,onChange:At=>{const Bt=parseFloat(At.target.value||"0"),as=Number(Te[rs]?.supplyRate??Te[Dt.id]?.supplyRate??cs),gs=Math.max(0,Bt-as);pa(rs,as),er(rs,gs)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",$.toFixed(2)]})]},rs))}}return F})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>A(8),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ce,{onClick:()=>A(10),children:"Finalize PO"}),e.jsxs(Ce,{onClick:oa,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const Hv="/image.png",Jq=(t,s,n,r,i)=>{const c=(s||"").toLowerCase(),A=n*r*i;return c==="sqft"?Math.ceil(A):i||1},Zq={roller:["Manual - Translucent","Manual - Blackout","Motorized - Translucent","Motorized - Blackout"],zebra:["Manual - Blackout","Motorized - Blackout"],roman:["Manual - Translucent","Manual - Blackout"],venetian:["Aluminium 25mm","Aluminium 50mm","Faux Wood"],vertical:["Standard Fabric","Dim-out Fabric"],wooden:["Natural Wood 35mm","Natural Wood 50mm","Bamboo"]},eG=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),Mr=t=>(t||"").toString().toUpperCase(),tG={roller:["ROLLER","ROLLER BLIND","ROLLER BLINDS","CHAIN","TUBE"],zebra:["ZEBRA","DAY NIGHT","DAY-NIGHT","SHEER","D/N"],roman:["ROMAN","ROMAN BLIND","ROMAN BLINDS","PLEATED"],venetian:["VENETIAN","SLAT","ALUMINIUM SLAT","WOOD SLAT"],vertical:["VERTICAL","LOUVER","VERTICAL BLIND","VERTICAL BLINDS"],wooden:["WOOD","BAMBOO","WOODEN","WOODEN BLIND","WOODEN BLINDS"]},Ry={roller:"Roller Blind",zebra:"Zebra Blind",roman:"Roman Blind",venetian:"Venetian Blind",vertical:"Vertical Blind",wooden:"Wooden Blind"},sG=[{value:"roller",label:"Roller Blinds"},{value:"zebra",label:"Zebra Blinds"},{value:"roman",label:"Roman Blinds"},{value:"venetian",label:"Venetian Blinds"},{value:"vertical",label:"Vertical Blinds"},{value:"wooden",label:"Wooden Blinds"}],nG=(t,s)=>{const n=Mr(t.product),r=Mr(t.name),i=Mr(t.category),c=Mr(t.subCategory),u=(tG[s]||[s.toUpperCase()]).some(o=>n.includes(o)||r.includes(o)||i.includes(o)||c.includes(o)),d=Ry[s],h=d&&Mr(n).includes(Mr(d));return u||h},hf=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function rG(){const{shops:t,materials:s,products:n}=fi(),{toast:r}=ua(),i=S.useRef(""),c=S.useRef(null),[A,u]=S.useState(1),d=typeof window<"u"&&window.location.search.includes("step=11"),[h,o]=S.useState(""),[m,y]=S.useState(""),[p,j]=S.useState(null),[b,w]=S.useState(null),[B,U]=S.useState(1),[Q,k]=S.useState(4),[K,ee]=S.useState(4),[q,G]=S.useState([]),[W,he]=S.useState([]),[Z,ie]=S.useState([]),[ce,ae]=S.useState([]),[de,se]=S.useState(null),[re,te]=S.useState(null),[be,He]=S.useState(null),[pe,Y]=S.useState({}),[me,Se]=S.useState([]),[je,Le]=S.useState({}),[ge,ye]=S.useState("Concept Trunk Interiors"),[we,Ne]=S.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[ke,Be]=S.useState("33ASOPS5560M1Z1"),[Ae,Qe]=S.useState(""),[le,ct]=S.useState(new Date().toISOString().slice(0,10)),[rt,ht]=S.useState(""),[ft,Jt]=S.useState("50% Advance and 50% on Completion"),[gt,tt]=S.useState(""),[Lt,qt]=S.useState(""),[Fs,xs]=S.useState(""),[hs,it]=S.useState({}),[Pe,dt]=S.useState({}),[ze,Tt]=S.useState({}),[Je,vt]=S.useState({}),[$e,St]=S.useState({}),[Rt,Zt]=S.useState({}),[bt,Vt]=S.useState([]),[vs,us]=S.useState([]),[jt,kt]=S.useState(""),[Ft,is]=S.useState([]),[Ss,nn]=S.useState([]),[es,zs]=S.useState([]),[Us,Vs]=S.useState(!1);S.useEffect(()=>{lt("/api/accumulated-products/blinds",{headers:{}}).then(xe=>xe.json()).then(xe=>{he(xe.data||[])}).catch(xe=>console.error("Failed to load accumulated products",xe))},[]),S.useEffect(()=>{if(typeof window<"u"){const _e=new URLSearchParams(window.location.search).get("step");if(_e){const nt=parseInt(_e,10);nt>=1&&nt<=12&&u(nt)}}},[]),S.useEffect(()=>{A===12&&lt("/api/accumulated-products/blinds",{headers:{}}).then(xe=>xe.json()).then(xe=>{const _e=xe.data||[];he(_e),console.debug("Restored blinds_accumulated_products for Step 12:",_e.length)}).catch(xe=>console.error("Failed to load accumulated products for Step 12",xe))},[A]);const Ls=xe=>{const _e=xe?.blindType??p,nt=xe?.subOption??b;if(!_e)return null;const V=sG.find(Oe=>Oe.value===_e);let Te=V?V.label:Ry[_e]||_e;/blind/i.test(Te)||(Te=`${Te} Blind`);const Ye=nt?` - ${nt}`:"";return`${Te}${Ye}`},js=()=>{const xe=(m||"").toString();if(!p&&!xe)return null;const _e=xe||Ls(),nt=xe||Ry[p]||p;return{label:_e,productName:nt}},Os=()=>{const xe=(m||"").toString();if(!p&&!xe||!s.length)return[];const _e=xe||(p?Ry[p]:"");let nt=[];if(_e&&(nt=s.filter(Te=>{const Ye=(Te.product||"").toString();if(!Ye||!_e)return!1;const Oe=Mr(Ye),yt=Mr(_e);return Oe.includes(yt)||yt.includes(Oe)})),(!nt||nt.length===0)&&!xe&&(nt=p?s.filter(Te=>nG(Te,p)):s.filter(Te=>{const Ye=(Te.product||"").toString();if(!_e)return!1;const Oe=Mr(Ye),yt=Mr(_e);return Oe.includes(yt)||yt.includes(Oe)})),nt.length===0)return[];const V=new Map;for(const Te of nt){const Ye=`${Mr(Te.product)}__${Mr(Te.name)}__${eG(Te.code)}`,Oe=V.get(Ye);(!Oe||(Te.rate||0)<(Oe.rate||0))&&V.set(Ye,Te)}return Array.from(V.values())},Ds=(xe,_e)=>{const nt=xe||q,V=_e||pe;return nt.map(Te=>{let Ye=Kt.find(qn=>qn.id===Te.materialId);if(Ye||(Ye=s.find(qn=>qn.id===Te.materialId)),!Ye)return null;const Oe=s.find(qn=>{const Yr=Mr(qn.product)===Mr(Ye.product),v=Mr(qn.name)===Mr(Ye.name),N=qn.shopId===Te.selectedShopId,x=hf(qn)===(Te.selectedBrand||"Generic");return Yr&&v&&N&&x})||Ye,yt=t.find(qn=>qn.id===Te.selectedShopId),Qt=Te.rowId||(Te.batchId?`${Te.batchId}-${Oe.id}`:Oe.id),ln=V[Qt]||V[Oe.id]||V[Ye.id],Ln=Jq(Oe.name,Oe.unit,K||4,Q||4,B||1),bs=ln?.quantity??Ln,Ps=ln?.supplyRate??Oe.rate??0,Dn=ln?.installRate??0,Hn=(re||[]).find(qn=>qn.rowId===Qt||`${qn.batchId||""}-${qn.id}`===Qt);return{id:Oe.id,batchId:Te.batchId,rowId:Qt,name:Oe.name,quantity:bs,unit:Oe.unit,rate:Ps,shopId:Te.selectedShopId,shopName:yt?.name||"Unknown",installRate:Dn,blindType:Hn?.blindType||Hn?.blind_type||void 0,subOption:Hn?.subOption||Hn?.sub_option||void 0,productLabel:Hn?.productLabel||void 0}}).filter(Te=>Te!==null)},ut=()=>Ds().reduce((xe,_e)=>xe+_e.quantity*(_e.rate+(_e.installRate||0)),0),Pt=xe=>{G(xe?Kt.map(_e=>({materialId:_e.id,selectedShopId:_e.shopId,selectedBrand:hf(_e)||"Generic"})):[])},Kt=Os(),ws=xe=>(xe?.name||xe?.title||xe?.label||xe?.productName||xe?.product||"").toString(),Ts=xe=>(xe?.category_name||xe?.category||xe?.type||xe?.group||xe?.section||"").toString(),ys=xe=>{const _e=Mr(ws(xe)),nt=Mr(Ts(xe)),V=Mr(xe?.subcategory_name||xe?.subCategory?.name||xe?.subcategory||xe?.subCategory||""),Te=_e.includes("BLIND")||_e.includes("BLINDS")||_e.includes("ROLLER")||_e.includes("ZEBRA")||_e.includes("ROMAN")||_e.includes("VENETIAN")||_e.includes("VERTICAL")||_e.includes("CHICK")||nt.includes("BLIND")||nt.includes("BLINDS")||V.includes("BLIND")||V.includes("BLINDS"),Oe=!(_e.includes("BLIND")||_e.includes("BLINDS")||nt.includes("BLIND")||nt.includes("BLINDS")||V.includes("BLIND")||V.includes("BLINDS"))&&(_e.includes("DOOR")||_e.includes("PIPE")||_e.includes("PLUMB")||_e.includes("ELECTRICAL")||_e.includes("SWITCH")||_e.includes("SOCKET")||_e.includes("CEILING")||_e.includes("GYPSUM")||_e.includes("FLOORING")||_e.includes("PAINT")||_e.includes("CIVIL")||_e.includes("WALL")||nt.includes("DOOR")||nt.includes("PIPE")||nt.includes("PLUMB")||nt.includes("ELECTRICAL")||nt.includes("CEILING")||nt.includes("FLOORING")||nt.includes("PAINT")||nt.includes("CIVIL")||V.includes("DOOR")||V.includes("PIPE")||V.includes("PLUMB")||V.includes("ELECTRICAL")||V.includes("CEILING")||V.includes("FLOORING")||V.includes("PAINT"));return Te&&!Oe},Qs=xe=>{const _e=Mr(xe);return _e.includes("ROLLER")?"roller":_e.includes("ZEBRA")||_e.includes("DAY")||_e.includes("NIGHT")?"zebra":_e.includes("ROMAN")?"roman":_e.includes("VENETIAN")?"venetian":_e.includes("VERTICAL")?"vertical":_e.includes("WOOD")||_e.includes("BAMBOO")?"wooden":null},Gt=(n||[]).filter(ys).slice().sort((xe,_e)=>{const nt=ws(xe),V=ws(_e);return nt.localeCompare(V)}),Ys=xe=>{const _e=ws(xe);o(xe.id||_e),y(_e);const nt=Qs(_e);j(nt||p),w(null),G([]),Y({}),it({}),dt({}),u(6)};S.useEffect(()=>{A===9&&Tr()},[A]),S.useEffect(()=>{(async()=>{if(Ae)try{const _e=await lt(`/api/estimator-step9-items?session_id=${Ae}&estimator=blinds`,{headers:{}});if(_e.ok){const Ye=(await _e.json()).items||[];if(is(Ye),Ye.length>0){const Oe=Ye[0];te(Ye.map(yt=>({id:yt.material_id,rowId:yt.row_id,batchId:yt.batch_id,name:yt.name,unit:yt.unit,quantity:yt.quantity,supplyRate:yt.supply_rate,installRate:yt.install_rate,shopId:yt.shop_id,shopName:yt.shop_name,description:yt.description,location:yt.location,blindType:yt.blind_type||yt.door_type,subOption:yt.sub_option}))),He({blindType:Oe.blind_type||Oe.door_type,subOption:Oe.sub_option,count:Oe.qty,height:Oe.height,width:Oe.width,subtotal:Oe.subtotal,sgst:Oe.sgst,cgst:Oe.cgst,round_off:Oe.round_off,grand_total:Oe.grand_total})}}const nt=await lt(`/api/estimator-step11-groups?session_id=${Ae}&estimator=blinds`,{headers:{}});if(nt.ok){const Te=await nt.json();nn(Te.items||[])}const V=await lt(`/api/estimator-step12-qa-selection?session_id=${Ae}&estimator=blinds`,{headers:{}});if(V.ok){const Te=await V.json();zs(Te.items||[])}}catch(_e){console.warn("Failed to load data from DB:",_e)}})()},[Ae]),S.useEffect(()=>(c.current&&clearTimeout(c.current),c.current=setTimeout(async()=>{try{if(!Ae)return;const xe=Ds().map((_e,nt)=>{const V=_e.rowId||(_e.batchId?`${_e.batchId}-${_e.id}`:_e.id);return{estimator:"blinds",session_id:Ae,s_no:nt+1,row_id:String(V),batch_id:_e.batchId||null,material_id:_e.id,name:_e.name,unit:_e.unit,quantity:Number(pe[_e.id]?.quantity??_e.quantity??0),supply_rate:Number(pe[_e.id]?.supplyRate??_e.rate??0),install_rate:Number(pe[_e.id]?.installRate??0),shop_id:_e.shopId||"",shop_name:_e.shopName||"",description:hs[_e.id]||"",location:Pe[_e.id]||"",blind_type:p,sub_option:b,qty:B,height:Q,width:K}});await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"blinds",session_id:Ae,items:xe})})}catch{}},800),()=>{c.current&&clearTimeout(c.current)}),[q,pe,hs,Pe,p,b,B,Q,K,Ae]);const Cn=xe=>{const _e=Kt.find(Qt=>Qt.id===xe);if(!_e)return;if(q.find(Qt=>Qt.materialId===xe)){G(Qt=>Qt.filter(ln=>ln.materialId!==xe));return}const V=s.filter(Qt=>Mr(Qt.product)===Mr(_e.product)&&Mr(Qt.name)===Mr(_e.name)).map(Qt=>({brand:hf(Qt),shopId:Qt.shopId,rate:Qt.rate||0})),Ye=Array.from(new Set(V.map(Qt=>Qt.brand))).sort()[0]||"Generic",yt=V.filter(Qt=>Qt.brand===Ye).sort((Qt,ln)=>Qt.rate-ln.rate)[0];yt?.shopId&&G(Qt=>[...Qt,{materialId:xe,selectedShopId:yt.shopId,selectedBrand:Ye}])},na=(xe,_e)=>{G(nt=>nt.map(V=>V.materialId===xe?{...V,selectedShopId:_e}:V))},tr=(xe,_e)=>{const nt=Kt.find(Ye=>Ye.id===xe);if(!nt)return;const Te=s.filter(Ye=>Mr(Ye.product)===Mr(nt.product)&&Mr(Ye.name)===Mr(nt.name)).map(Ye=>({brand:hf(Ye),shopId:Ye.shopId,rate:Ye.rate||0})).filter(Ye=>Ye.brand===_e).sort((Ye,Oe)=>Ye.rate-Oe.rate)[0]?.shopId||"";G(Ye=>Ye.map(Oe=>Oe.materialId===xe?{...Oe,selectedBrand:_e,selectedShopId:Te||Oe.selectedShopId}:Oe))},[Mt,bn]=S.useState({}),Tr=async()=>{try{const xe=await lt("/api/boq");if(xe.status===401){ae([]),i.current!=="401"&&(i.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!xe.ok){const V=await xe.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${V||xe.status}`)}if(!(xe.headers.get("content-type")||"").includes("application/json")){const V=await xe.text().catch(()=>"");console.warn("/api/boq returned non-json:",V),ae([]);return}const nt=await xe.json();ae(nt.boqs||[]),i.current=""}catch(xe){console.error("fetchSavedBoqs",xe);const _e=String(xe?.message||xe||"");if(!_e)return;i.current!==_e&&(i.current=_e,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},lr=async()=>{try{if(!Ae)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const xe={estimator:"blinds",blindType:p,subOption:b,qty:B,height:Q,width:K,materials:re&&re.length>0?re:Ds(),subtotal:Yn,sgst:sr,cgst:ha,roundOff:Ma,grandTotal:Na},_e=await lt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)});if(!_e.ok){const Te=await _e.text().catch(()=>"");throw new Error(Te||"save failed")}const nt=_e.headers.get("content-type")||"";let V=null;if(nt.includes("application/json"))V=await _e.json();else{const Te=await _e.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",Te),V={boq:null}}return await Tr(),se(V?.boq||V?.boqs?.[0]||null),!0}catch(xe){return console.error("handleSaveBOQ",xe),!1}},Bs=async xe=>{try{if(!(await lt(`/api/boq/${xe}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await Tr()}catch(_e){console.error("handleDeleteSavedBoq",_e)}},Js=()=>{u(1),j(null),w(null),U(1),k(4),ee(4),Vt([]),Tt({}),it({}),dt({}),vt({}),Zt({}),St({}),bn({}),se(null)},Pn=async()=>{Vs(!0);try{let xe=Ss||[];if(Ae)try{const Ye=await lt(`/api/estimator-step11-groups?session_id=${Ae}&estimator=blinds`);Ye.ok&&(xe=(await Ye.json()).items||[],nn(xe))}catch(Ye){console.warn("Failed to refresh step11 items before save",Ye)}const _e=(er||[]).map(Ye=>({estimator:"blinds",session_id:Ae,group_key:(Ye.groupKey||`${Ye.blindType||"blind"}||${Ye.subOption||""}`)+"::"+(Ye.name||""),group_id:Ye.groupId||`group_${Ye.groupKey||""}`,item_name:Ye.name,unit:Ye.unit,quantity:Ye.quantity,location:Ye.location||"",description:Ye.description||"",supply_rate:Rt[Ye.id]||Ye.supplyRate||0,install_rate:$e[Ye.id]||Ye.installRate||0,supply_amount:(Ye.quantity||0)*(Rt[Ye.id]||Ye.supplyRate||0),install_amount:(Ye.quantity||0)*($e[Ye.id]||Ye.installRate||0),supply_subtotal:(er||[]).reduce((Oe,yt)=>Oe+(yt.quantity||0)*(Rt[yt.id]||yt.supplyRate||0),0),install_subtotal:(er||[]).reduce((Oe,yt)=>Oe+(yt.quantity||0)*($e[yt.id]||yt.installRate||0),0),sgst:sr,cgst:ha,round_off:Ma,grand_total:(er||[]).reduce((Oe,yt)=>Oe+(yt.quantity||0)*((Rt[yt.id]||yt.supplyRate||0)+($e[yt.id]||yt.installRate||0)),0)+sr+ha+Ma})),nt=new Set((xe||[]).map(Ye=>Ye.group_key||Ye.groupKey)),V=_e.filter(Ye=>!nt.has(Ye.group_key));if(V.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),Vs(!1),!0;const Te=await lt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:V})});if(!Te.ok){const Ye=await Te.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${Ye||Te.statusText}`,variant:"destructive"}),Vs(!1),!1}try{const Ye=await lt(`/api/estimator-step11-groups?session_id=${Ae}&estimator=blinds`);if(Ye.ok){const Oe=await Ye.json();nn(Oe.items||[])}}catch(Ye){console.warn("Failed to reload step11 items after save",Ye)}return he([]),r({title:"Success",description:"Step 11 saved to database."}),Vs(!1),!0}catch(xe){return console.error("handleSaveAccumulatedBOQ",xe),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),Vs(!1),!1}},kr=xe=>{if(Qe(xe.bill_no||""),j(xe.blind_type||xe.door_type||null),w(xe.sub_option||null),U(xe.qty||1),k(xe.height||4),ee(xe.width||4),Array.isArray(xe.materials)){const _e=xe.materials.map(nt=>({materialId:nt.id,selectedShopId:nt.shopId||nt.shop_id||"",selectedBrand:nt.shopName||nt.brand||nt.selectedBrand||void 0}));G(_e)}se(xe)},jr=(xe,_e)=>{if(A===9){Le(nt=>({...nt,[xe]:{...nt[xe]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(_e))}}));return}Y(nt=>({...nt,[xe]:{...nt[xe]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(_e))}}))},Ur=(xe,_e)=>{if(A===9){Le(nt=>({...nt,[xe]:{...nt[xe]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(_e)),installRate:nt[xe]?.installRate||0}}));return}Y(nt=>({...nt,[xe]:{...nt[xe]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(_e)),installRate:nt[xe]?.installRate||0}}))},hr=(xe,_e)=>{if(A===9){Le(nt=>({...nt,[xe]:{...nt[xe]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(_e)),supplyRate:nt[xe]?.supplyRate||0}}));return}Y(nt=>({...nt,[xe]:{...nt[xe]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(_e)),supplyRate:nt[xe]?.supplyRate||0}}))},qs=()=>{const xe=document.getElementById("boq-pdf");if(!xe){alert("BOQ content not found");return}setTimeout(()=>{_d().set({margin:[10,10,10,10],filename:"Blinds_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:_e=>_e.className?.toString().includes("bg-")||_e.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(xe).save().catch(_e=>{console.error("PDF Export Error:",_e),alert("PDF export failed. Check console.")})},100)},tn=async()=>{const xe=document.getElementById("boq-final-pdf");if(!xe){alert("Final BOQ content not found");return}const _e=(await Yc(async()=>{const{default:nt}=await Promise.resolve().then(()=>wu);return{default:nt}},void 0)).default;_e().set({margin:10,filename:`BOQ-${Ae||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(xe).save()},Is=()=>{const xe=Ds(),_e=js(),nt=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Blind Type: ${_e?.label}`,`Dimensions: ${Q}ft  ${K}ft (Count: ${B})`,"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];xe.forEach((yt,Qt)=>{const ln=yt.quantity*yt.rate;nt.push(`${Qt+1},"${yt.name}","${yt.unit}",${yt.quantity},${yt.rate},"${yt.shopName}",${ln}`)}),nt.push("",`TOTAL COST,,,${ut().toFixed(2)}`);const V=nt.join(`
`),Te=new Blob([V],{type:"text/csv"}),Ye=window.URL.createObjectURL(Te),Oe=document.createElement("a");Oe.href=Ye,Oe.download=`BOQ-Blinds-${new Date().getTime()}.csv`,Oe.click(),URL.revokeObjectURL(Ye)},dn=()=>{const xe=er||[],_e=[];_e.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),xe.forEach((Oe,yt)=>{const Qt=Number(Oe.supplyRate??Oe.rate??0),ln=Number(Oe.installRate??0),Ln=Number(Oe.quantity||0),bs=Ln*Qt,Ps=Ln*ln,Dn=(Oe.location||Pe[Oe.id]||"").toString().replace(/"/g,'""'),Hn=(Oe.description||hs[Oe.id]||Oe.name||"").toString().replace(/"/g,'""'),v=(Ls({blindType:Oe.blindType||Oe.blind_type||Oe.door_type,subOption:Oe.subOption||Oe.sub_option})||Oe.name||"").replace(/"/g,'""');_e.push(`${yt+1},"${v}","${Dn}","${Hn}",${Oe.unit},${Ln},${Qt.toFixed(2)},${ln.toFixed(2)},${bs.toFixed(2)},${Ps.toFixed(2)}`)});const nt=_e.join(`
`),V=new Blob([nt],{type:"text/csv"}),Te=window.URL.createObjectURL(V),Ye=document.createElement("a");Ye.href=Te,Ye.download=`BOQ-Blinds-Step11-${new Date().getTime()}.csv`,Ye.click(),URL.revokeObjectURL(Te)},Hs=async()=>{const xe=Ds(me,je).map(Oe=>{const yt=Oe.rowId||`${Oe.batchId}-${Oe.id}`;return{id:Oe.id,rowId:yt,batchId:Oe.batchId||null,name:Oe.name,productLabel:Oe.productLabel||null,product_label:Oe.productLabel||null,unit:Oe.unit,quantity:je[yt]?.quantity??je[Oe.id]?.quantity??Oe.quantity,supplyRate:je[yt]?.supplyRate??je[Oe.id]?.supplyRate??Oe.rate,installRate:je[yt]?.installRate??je[Oe.id]?.installRate??Oe.installRate??0,shopId:Oe.shopId,shopName:Oe.shopName,description:hs[yt]||hs[Oe.id]||"",location:Pe[yt]||Pe[Oe.id]||"",blindType:Oe.blindType||Oe.blind_type||Oe.door_type,subOption:Oe.subOption||Oe.sub_option,isSaved:Oe.isSaved||!1}}),_e=xe.filter(Oe=>!Oe.isSaved);if(_e.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let nt=Ae;(!nt||nt.trim()==="")&&(nt=`BLINDS-${Date.now()}`,Qe(nt));const V=be||(()=>{const Oe=xe.reduce((bs,Ps)=>bs+Number(Ps.quantity||0)*(Number(Ps.supplyRate||0)+Number(Ps.installRate||0)),0),yt=Oe*.09,Qt=Oe*.09,ln=Math.round(Oe+yt+Qt)-(Oe+yt+Qt),Ln=Oe+yt+Qt+ln;return{subtotal:Oe,sgst:yt,cgst:Qt,round_off:ln,grand_total:Ln}})(),Te={id:`local-${Date.now()}`,estimator:"blinds",bill_no:nt,blind_type:be?.blindType||be?.blind_type||p,sub_option:be?.subOption||be?.sub_option||b,qty:be?.count||be?.qty||B,height:be?.height||Q,width:be?.width||K,materials:xe,subtotal:V.subtotal,sgst:V.sgst,cgst:V.cgst,round_off:V.round_off,grand_total:V.grand_total,created_at:new Date().toISOString()};se(Te),te(xe);try{He(Oe=>({...Oe||{},...V}))}catch{}const Ye=_e.map((Oe,yt)=>({estimator:"blinds",session_id:nt,s_no:yt+1,row_id:String(Oe.rowId||`${Oe.batchId||""}-${Oe.id}`),batch_id:Oe.batchId||null,material_id:Oe.id,name:Oe.name,unit:Oe.unit,quantity:Number(Oe.quantity||0),supply_rate:Number(Oe.supplyRate||0),install_rate:Number(Oe.installRate||0),shop_id:Oe.shopId||"",shop_name:Oe.shopName||"",description:Oe.description||"",location:Oe.location||"",blind_type:Oe.blindType||Oe.blind_type||Oe.door_type||be?.blindType||be?.blind_type||be?.door_type||p||null,sub_option:Oe.subOption||be?.subOption||be?.sub_option||b||null,qty:be?.count||be?.qty||B,height:be?.height||Q,width:be?.width||K,subtotal:V.subtotal,sgst:V.sgst,cgst:V.cgst,round_off:V.round_off,grand_total:V.grand_total}));try{await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"blinds",session_id:nt,items:Ye})});const yt=await(await lt(`/api/estimator-step9-items?session_id=${nt}&estimator=blinds`,{headers:{}})).json();is(yt.items||[]);const Qt=(re||[]).map(ln=>_e.some(bs=>ln.rowId===bs.rowId||`${ln.batchId||""}-${ln.id}`==`${bs.batchId||""}-${bs.id}`)?{...ln,isSaved:!0}:ln);te(Qt),r({title:"Success",description:`${_e.length} new material(s) saved successfully to database!`})}catch(Oe){console.warn("Failed to save step 9 to DB",Oe),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},wr=xe=>{let _e=5381;for(let nt=0;nt<xe.length;nt+=1)_e=(_e<<5)+_e^xe.charCodeAt(nt);return Math.abs(_e>>>0).toString(36)},at=()=>{const xe=JSON.stringify({blindType:p,subOption:b,count:B,height:Q,width:K,selectedMaterials:(q||[]).map(_e=>({materialId:_e.materialId,selectedShopId:_e.selectedShopId,selectedBrand:_e.selectedBrand})),editable:Object.keys(pe||{}).sort().map(_e=>({id:_e,...pe[_e]}))});return`batch-${wr(xe)}`},ms=()=>{const xe=at(),_e=Ds(q,pe).map(Oe=>({id:Oe.id,rowId:`${xe}-${Oe.id}`,batchId:xe,name:Oe.name,unit:Oe.unit,quantity:pe[Oe.id]?.quantity??Oe.quantity,supplyRate:pe[Oe.id]?.supplyRate??Oe.rate,installRate:pe[Oe.id]?.installRate??0,shopId:Oe.shopId,shopName:Oe.shopName,description:hs[Oe.id]||"",location:Pe[Oe.id]||"",blindType:p,productLabel:m||Ls(),subOption:b,isSaved:!1}));if(_e.length===0){u(9);return}const Te=[...(re||[]||[]).filter(Oe=>Oe.batchId!==xe),..._e];te(Te),Se((q||[]).map(Oe=>({materialId:Oe.materialId,selectedShopId:Oe.selectedShopId,selectedBrand:Oe.selectedBrand,batchId:xe})));const Ye={};Te.forEach(Oe=>{const yt=Oe.rowId||`${Oe.batchId}-${Oe.id}`;Ye[yt]={quantity:Number(Oe.quantity||0),supplyRate:Number(Oe.supplyRate||Oe.rate||0),installRate:Number(Oe.installRate||0)}}),Le(Ye);try{const Oe=ut(),yt=Oe*.09,Qt=Oe*.09,ln=Math.round(Oe+yt+Qt)-(Oe+yt+Qt),Ln=Oe+yt+Qt+ln;He({blindType:p,subOption:b,count:B,height:Q,width:K,subtotal:Oe,sgst:yt,cgst:Qt,round_off:ln,grand_total:Ln})}catch{}u(9)},ds=A===9||A===11?re||[]:Ds(),Nn=A===9?je:pe,Yn=ds.reduce((xe,_e)=>xe+_e.quantity*((Nn[_e.id]?.supplyRate??_e.rate)+(Nn[_e.id]?.installRate??_e.installRate??0)),0),sr=Yn*.09,ha=Yn*.09,Ma=Math.round(Yn+sr+ha)-(Yn+sr+ha),Na=Yn+sr+ha+Ma,cr=W.length>0?W.flatMap(xe=>xe.materials||[]):re&&re.length>0?re:ds&&ds.length>0?ds:de&&de.materials&&de.materials.length>0?Array.isArray(de.materials)?de.materials:JSON.parse(de.materials||"[]"):ds,Ka=(()=>{const xe=new Map;for(const nt of cr||[]){const V=nt.productLabel||nt.blindType||nt.blind_type||nt.door_type||be?.blindType||be?.blind_type||p||"blind",Te=nt.subOption||nt.sub_option||be?.subOption||be?.sub_option||"",Ye=`${V}||${Te}`;xe.has(Ye)||xe.set(Ye,[]),xe.get(Ye).push(nt)}const _e=[];for(const[nt,V]of xe.entries()){const[Te,Ye,Oe]=nt.split("||"),yt=`group_${nt}`,Qt=hs[yt]||"",ln=Pe[yt]||"";let Ln=Number(Mt[yt]??be?.count??be?.qty??B??1);const bs=String(Qt).match(/Qty:\s*(\d+(?:\.\d+)?)/);bs&&(Mt[yt]===void 0||Mt[yt]===null)&&(Ln=Number(bs[1]));const Ps=V.reduce((N,x)=>N+Number(x.quantity||0)*Number(x.supplyRate??x.rate??0),0),Dn=Ln>0?Ps/Ln:Ps,Hn=V.reduce((N,x)=>N+Number(x.quantity||0)*Number(x.installRate??0),0),qn=Ln>0?Hn/Ln:Hn,Yr=V[0]&&V[0].productLabel||Ls({blindType:Te,subOption:Oe})||Te,v=String(Qt).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();_e.push({id:yt,groupKey:nt,name:Yr,location:ln||"",description:v||"",unit:"pcs",quantity:Ln,supplyRate:Number(Dn||0),installRate:Number($e[yt]??qn??0),supplyAmount:Number(Dn*Ln||0),installAmount:Number(($e[yt]??qn)*Ln||0)})}return _e})();(Ss||[]).filter(xe=>xe.item||xe.item_name).map((xe,_e)=>{const nt=xe.group_key||xe.groupKey||`${xe.door_type||xe.blindType||"door"}||${xe.panel_type||xe.panelType||""}||${xe.sub_option||xe.subOption||""}`;return{id:xe.id,groupKey:nt,name:xe.productLabel||xe.item_name||xe.item||xe.name||xe.door_label||xe.blindType||xe.door_type||"Door",location:xe.location||"",description:xe.description||"",unit:xe.unit||"pcs",quantity:Number(xe.quantity??xe.qty??1),supplyRate:Number(xe.supply_rate??xe.supplyRate??0),installRate:Number(xe.install_rate??xe.installRate??0),supplyAmount:Number(xe.supply_amount??0),installAmount:Number(xe.install_amount??0),blindType:xe.door_type||xe.blindType,panelType:xe.panel_type||xe.panelType,subOption:xe.sub_option||xe.subOption}});const er=(W.length===0?Ka.filter(xe=>!(Ss||[]).some(nt=>(nt.group_key||nt.groupKey||`${nt.door_type||""}||${nt.panel_type||""}||${nt.sub_option||""}`)===xe.groupKey)):W.map((xe,_e)=>({id:`accumulated_${_e}`,groupKey:`${xe.blindType||"door"}||${xe.panelType||""}||${xe.subOption||""}`,name:xe.productLabel||xe.materials?.[0]?.productLabel||xe.doorLabel||Ls({blindType:xe.blindType,panelType:xe.panelType,subOption:xe.subOption})||xe.blindType,location:xe.location||"",description:xe.description||"",unit:"pcs",quantity:xe.count||1,supplyRate:xe.materials?.reduce((nt,V)=>nt+Number(V.quantity||0)*Number(V.supplyRate??V.rate??0),0)||0,installRate:xe.materials?.reduce((nt,V)=>nt+Number(V.quantity||0)*Number(V.installRate??0),0)||0,supplyAmount:xe.materials?.reduce((nt,V)=>nt+Number(V.quantity||0)*Number(V.supplyRate??V.rate??0),0)||0,installAmount:xe.materials?.reduce((nt,V)=>nt+Number(V.quantity||0)*Number(V.installRate??0),0)||0})))||[],oa=er.filter(xe=>vs.includes(xe.id)),pi=er.reduce((xe,_e)=>{const nt=Number(ze[_e.id]??(_e.quantity||0)),V=Number(Rt[_e.id]??_e.supplyRate??_e.rate??0);return xe+nt*V},0);er.reduce((xe,_e)=>{const nt=Number(ze[_e.id]??(_e.quantity||0));return xe+nt*Number(_e.installRate||0)},0);const $a=oa.reduce((xe,_e)=>{const nt=Number(ze[_e.id]??(_e.quantity||0)),V=Number(Rt[_e.id]??_e.supplyRate??_e.rate??0);return xe+nt*V},0);de&&de.bill_no;const Va=de&&de.created_at?new Date(de.created_at).toISOString().slice(0,10):le,ti=xe=>{if(!xe)return!1;const _e=(xe.name||"").toString().trim(),nt=Number(xe.quantity||0),V=Number(xe.supplyRate??xe.rate??0),Te=Number(xe.installRate??0),Ye=(xe.description||"").toString().trim(),Oe=(xe.location||"").toString().trim();return!!_e||nt>0||V>0||Te>0||!!Ye||!!Oe};return(W||[]).map(xe=>{const _e=(xe.materials||[]).filter(ti),nt=_e.reduce((Te,Ye)=>Te+Number(Ye.quantity||0)*Number(Ye.supplyRate??Ye.rate??0),0),V=_e.reduce((Te,Ye)=>Te+Number(Ye.quantity||0)*Number(Ye.installRate??0),0);return{...xe,materials:_e,supplySubtotal:nt,installSubtotal:V,subtotal:nt+V}}).filter(xe=>(xe.materials||[]).length>0),e.jsx(Sa,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Blinds Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(Ms,{className:"border-border/50",children:e.jsx(Ws,{className:"pt-8 min-h-96",children:e.jsxs(Fl,{mode:"wait",children:[A===1&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Blind Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:Gt.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No blinds products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Blind."})]}):e.jsx("div",{className:"grid gap-3",children:Gt.map(xe=>{const _e=ws(xe),nt=(xe?.id||_e).toString(),V=h===nt;return e.jsx(Ce,{variant:V?"default":"outline",onClick:()=>Ys(xe),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:_e||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Ts(xe)})]})},nt)})})})]},"step-select-product"),A===11&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Hv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Va})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all-groups",checked:(()=>{const xe=(er||[]).map(_e=>_e.id);return xe.length>0&&xe.every(_e=>bt.includes(_e))})(),onCheckedChange:xe=>{Vt(xe?(er||[]).map(_e=>_e.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(er||[]).map((xe,_e)=>{const nt=Number(Rt[xe.id]??xe.supplyRate??xe.rate??0),V=Number($e[xe.id]??xe.installRate??0);let Te=Number(ze[xe.id]??(xe.quantity||0));const Ye=Te*nt,Oe=Te*V;return Pe[xe.id]??xe.location,hs[xe.id]??xe.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{checked:bt.includes(xe.id),onCheckedChange:()=>{Vt(yt=>yt.includes(xe.id)?yt.filter(Qt=>Qt!==xe.id):[...yt,xe.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:_e+1}),e.jsx("td",{className:"border px-2 py-1",children:xe.productLabel||xe.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx(Xe,{value:Pe[xe.id]??xe.location??"",onChange:yt=>dt(Qt=>({...Qt,[xe.id]:yt.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:hs[xe.id]??xe.description??"",onChange:yt=>it(Qt=>({...Qt,[xe.id]:yt.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{value:Je[xe.id]??xe.unit??"",onChange:yt=>vt(Qt=>({...Qt,[xe.id]:yt.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",value:Te,onChange:yt=>Tt(Qt=>({...Qt,[xe.id]:Number(yt.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:nt,onChange:yt=>Zt(Qt=>({...Qt,[xe.id]:Number(yt.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:V,onChange:yt=>St(Qt=>({...Qt,[xe.id]:Number(yt.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Ye.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Oe.toFixed(2)]})]},xe.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(pi||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!d&&e.jsx(Ce,{variant:"outline",onClick:()=>u(9),children:"Back"}),e.jsx(Ce,{variant:"destructive",disabled:bt.length===0,onClick:async()=>{if(console.log("Delete selected:",bt),Ss.length>0&&Ae)try{await lt("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:bt,estimator:"blinds"})});const xe=await lt(`/api/estimator-step11-groups?session_id=${Ae}&estimator=blinds`,{headers:{}});if(xe.ok){const _e=await xe.json();nn(_e.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(xe){console.warn("Failed to delete step 11 from DB",xe),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(W.length===0)if(de){console.log("Deleting from saved BOQ");const xe=bt.map(Te=>Te.replace("group_","")),_e=Array.isArray(de.materials)?de.materials:JSON.parse(de.materials||"[]");console.log("Current materials:",_e.length);const nt=_e.filter(Te=>{const Ye=Te.blindType||Te.door_type||be?.blindType||be?.door_type||p||"door",Oe=Te.panelType||Te.panel_type||be?.panelType||be?.panel_type||panelType||"",yt=Te.subOption||Te.sub_option||be?.subOption||be?.sub_option||b||"",Qt=`${Ye}||${Oe}||${yt}`,ln=xe.includes(Qt);return console.log("Checking material:",Te.id||Te.name,Qt,"match:",ln),!ln});console.log("Filtered materials:",nt.length);const V={...de,materials:nt};se(V),lt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)}).then(()=>console.log("Saved updated BOQ")).catch(Te=>console.error("Error saving BOQ:",Te))}else{console.log("Deleting from Step 11 saved materials");const xe=bt.map(V=>V.replace("group_","")),nt=((re&&re.length>0?re:ds)||[]).filter(V=>{const Te=V.blindType||V.door_type||be?.blindType||be?.door_type||p||"door",Ye=V.panelType||V.panel_type||be?.panelType||be?.panel_type||panelType||"",Oe=V.subOption||V.sub_option||be?.subOption||be?.sub_option||b||"",yt=`${Te}||${Ye}||${Oe}`;return!xe.includes(yt)});te(nt)}else if(W.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",W.length);let xe;if(bt.some(_e=>_e.startsWith("accumulated_"))){const _e=bt.filter(nt=>nt.startsWith("accumulated_")).map(nt=>parseInt(nt.replace("accumulated_",""))).sort((nt,V)=>V-nt);xe=[...W],_e.forEach(nt=>{nt>=0&&nt<xe.length&&xe.splice(nt,1)})}else{const _e=bt.map(nt=>nt.replace("group_",""));xe=W.filter(nt=>{const V=`${nt.blindType||"door"}||${nt.panelType||""}||${nt.subOption||""}`,Te=_e.includes(V);return console.log("Checking product:",nt.id,V,"match:",Te),!Te})}console.log("Accumulated products after:",xe.length),he(xe),lt("/api/accumulated-products/doors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:xe})}).catch(_e=>console.error("Failed to save accumulated products after delete",_e))}Vt([])},children:"Delete Selected"}),e.jsx(Ce,{onClick:Js,children:"Add Product"}),e.jsx(Ce,{onClick:Pn,disabled:Us,children:"Save"}),e.jsx(Ce,{onClick:async()=>{us(bt);const xe=(oa||[]).map((_e,nt)=>{const V=Number(Rt[_e.id]??_e.supplyRate??_e.rate??0),Te=Number($e[_e.id]??_e.installRate??0);let Ye=Number(ze[_e.id]??(_e.quantity||0));return{s_no:nt+1,item:_e.name,location:Pe[_e.id]??_e.location??"",description:hs[_e.id]??_e.description??"",unit:Je[_e.id]??_e.unit??"",qty:Ye,supply_rate:V,install_rate:Te,supply_amount:Ye*V,install_amount:Ye*Te}});try{const _e=await lt(`/api/estimator-step12-qa-selection?session_id=${Ae}&estimator=blinds`,{headers:{}});let nt=[];_e.ok&&(nt=(await _e.json()).items||[]);const V=xe.filter(Oe=>!nt.some(yt=>yt.item===Oe.item&&yt.description===Oe.description&&yt.unit===Oe.unit));if(V.length===0){u(12);return}await lt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"blinds",session_id:Ae,items:V})});const Ye=await(await lt(`/api/estimator-step12-qa-selection?session_id=${Ae}&estimator=blinds`,{headers:{}})).json();zs(Ye.items||[]),r({title:"Success",description:`${V.length} new material(s) saved successfully to database!`}),u(12)}catch(_e){console.warn("Failed to save step 12 to DB",_e),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),A===4&&p&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(Zq[p]||[]).map(xe=>e.jsx(Ce,{onClick:()=>{w(xe)},className:`w-full text-black ${b===xe?"bg-cyan-500":"bg-white"}`,children:xe},xe))}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>u(3),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{onClick:()=>u(5),disabled:!b,children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),A===5&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Blind Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"count",children:"Count"}),e.jsx(Xe,{id:"count",type:"number",placeholder:"1",value:B||"",onChange:xe=>U(xe.target.value?parseFloat(xe.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"height",children:"Height"}),e.jsx(Xe,{id:"height",type:"number",placeholder:"4",value:Q||"",onChange:xe=>k(xe.target.value?parseFloat(xe.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"width",children:"Width"}),e.jsx(Xe,{id:"width",type:"number",placeholder:"4",value:K||"",onChange:xe=>ee(xe.target.value?parseFloat(xe.target.value):null)})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>u(4),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{disabled:!B||!Q||!K,onClick:()=>u(6),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),A===6&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",js()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Tn,{id:"select-all-materials",checked:q.length===Kt.length&&Kt.length>0,onCheckedChange:xe=>{if(xe){const _e=Kt.map(nt=>{const V=s.filter(yt=>Mr(yt.product)===Mr(nt.product)&&Mr(yt.name)===Mr(nt.name)).map(yt=>({id:yt.id,brand:hf(yt),shopId:yt.shopId,rate:yt.rate,unit:yt.unit,shopName:t.find(Qt=>Qt.id===yt.shopId)?.name||"Unknown"})),Ye=Array.from(new Set(V.map(yt=>yt.brand))).sort()[0]||"Generic",Oe=V.filter(yt=>yt.brand===Ye).sort((yt,Qt)=>(yt.rate||0)-(Qt.rate||0));return{materialId:nt.id,selectedBrand:Ye,selectedShopId:Oe[0]?.shopId||""}});G(_e)}else G([])}}),e.jsx(We,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Kt.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this blind type."}),e.jsxs("div",{children:["Door:"," ",p||m||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(p?doorKeywordsByType[p]||[p]:[m||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(xe=>xe.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Kt.map(xe=>{const _e=q.some(Qt=>Qt.materialId===xe.id),nt=q.find(Qt=>Qt.materialId===xe.id),V=s.filter(Qt=>Mr(Qt.product)===Mr(xe.product)&&Mr(Qt.name)===Mr(xe.name)).map(Qt=>({id:Qt.id,brand:hf(Qt),shopId:Qt.shopId,rate:Qt.rate,unit:Qt.unit,shopName:t.find(ln=>ln.id===Qt.shopId)?.name||"Unknown"})),Te=Array.from(new Set(V.map(Qt=>Qt.brand))).sort(),Oe=q.find(Qt=>Qt.materialId===xe.id)?.selectedBrand||Te[0]||"Generic",yt=V.filter(Qt=>Qt.brand===Oe).sort((Qt,ln)=>(Qt.rate||0)-(ln.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Tn,{id:xe.id,checked:_e,onCheckedChange:()=>Cn(xe.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:xe.id,className:"font-medium cursor-pointer",children:xe.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:xe.code}),_e&&Te.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(We,{className:"text-xs",children:"Select Brand:"}),e.jsxs(mn,{value:Oe,onValueChange:Qt=>tr(xe.id,Qt),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:Te.map(Qt=>e.jsx(Ks,{value:Qt,children:Qt},Qt))})]})]}),_e&&yt.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(We,{className:"text-xs",children:"Select Shop:"}),e.jsxs(mn,{value:nt?.selectedShopId||yt[0].shopId,onValueChange:Qt=>na(xe.id,Qt),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:yt.map(Qt=>e.jsxs(Ks,{value:Qt.shopId||"",children:[Qt.shopName," - ",Qt.rate,"/",xe.unit,Qt.rate===yt[0].rate&&" (Best)"]},Qt.shopId))})]})]})]})]})},xe.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>u(1),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{disabled:q.length===0,onClick:()=>u(7),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),A===7&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:Ds().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),Ds().map(xe=>{const _e=q.find(V=>V.materialId===xe.id),nt=s.find(V=>V.id===xe.id);return e.jsxs("div",{className:$s("p-3 border rounded grid grid-cols-8 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:xe.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:_e?.selectedBrand||nt?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Xe,{type:"number",value:pe[xe.id]?.quantity??xe.quantity,onChange:V=>jr(xe.id,parseInt(V.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:xe.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:xe.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Xe,{type:"number",value:pe[xe.id]?.supplyRate??xe.rate,onChange:V=>Ur(xe.id,parseFloat(V.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((pe[xe.id]?.quantity??xe.quantity)*((pe[xe.id]?.supplyRate??xe.rate)+(pe[xe.id]?.installRate??0))).toFixed(2)]})]},xe.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>u(6),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{onClick:()=>u(8),disabled:Ds().length===0,children:["Next: Generate BOM"," ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),A===8&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(lo,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:m||Ls()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[Q," ft  ",K," ft (Qty: ",B,")"]})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(xe=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:xe==="Qty"||xe.includes("Rate")||xe.includes("Amount")?"right":"left"},children:xe},xe))})}),e.jsx("tbody",{children:Ds().map((xe,_e)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:_e+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:xe.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:xe.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:xe.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:xe.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:xe.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(xe.quantity*xe.rate).toFixed(2)})]},xe.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:q.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:Ds().reduce((xe,_e)=>xe+_e.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",ut().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Ce,{onClick:()=>u(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:Is,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(hi,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:qs,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ce,{onClick:()=>ms(),disabled:Ds().length===0,children:["Add to BOM ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{u(1),o(""),y(""),setPanelType(null),j(null),setGlazingType(null),U(1),k(7),ee(3),setGlassHeight(6),setGlassWidth(2),G([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(Jn,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),A===12&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:Hv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:Va})})]}),!oa||oa.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(oa||[]).map((xe,_e)=>{const nt=Number(Rt[xe.id]??xe.supplyRate??xe.rate??0),V=Number($e[xe.id]??xe.installRate??0);let Te=Number(ze[xe.id]??(xe.quantity||0));const Ye=Te*nt,Oe=Te*V,yt=Pe[xe.id]??xe.location??"",Qt=hs[xe.id]??xe.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:_e+1}),e.jsx("td",{className:"border px-2 py-1",children:xe.productLabel||xe.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:yt||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:Qt||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Je[xe.id]??xe.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Te}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",nt.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",V.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Ye.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Oe.toFixed(2)]})]},xe.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",($a||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{variant:"outline",onClick:()=>u(11),children:"Back"}),e.jsx(Ce,{onClick:async()=>{if(es.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const xe=await lt(`/api/estimator-step12-qa-selection?session_id=${Ae}&estimator=blinds`,{headers:{}});let _e=[];xe.ok&&(_e=(await xe.json()).items||[]);const V=(oa||[]).map((Oe,yt)=>{const Qt=Number(Rt[Oe.id]??Oe.supplyRate??Oe.rate??0),ln=Number($e[Oe.id]??Oe.installRate??0),Ln=Number(ze[Oe.id]??(Oe.quantity||0));return{s_no:yt+1,item:Oe.name,location:Pe[Oe.id]??Oe.location??"",description:hs[Oe.id]??Oe.description??"",unit:Je[Oe.id]??Oe.unit??"",qty:Ln,supply_rate:Qt,install_rate:ln,supply_amount:Ln*Qt,install_amount:Ln*ln}}).filter(Oe=>!_e.some(yt=>yt.item===Oe.item&&yt.description===Oe.description&&yt.unit===Oe.unit));if(V.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await lt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"blinds",session_id:Ae,items:V})});const Ye=await(await lt(`/api/estimator-step12-qa-selection?session_id=${Ae}&estimator=blinds`,{headers:{}})).json();zs(Ye.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(xe){console.warn("Failed to save step 12 to DB",xe),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Ce,{onClick:()=>u(1),children:"Add More Products"}),e.jsx(Ce,{onClick:dn,children:"Export Excel"})]})]},"step-qa-boq"),A===10&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Bill No"}),e.jsx(Xe,{value:Ae,onChange:xe=>Qe(xe.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Bill Date"}),e.jsx(Xe,{type:"date",value:le,onChange:xe=>ct(xe.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Due Date"}),e.jsx(Xe,{type:"date",value:rt,onChange:xe=>ht(xe.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Customer Name"}),e.jsx(Xe,{value:gt,onChange:xe=>tt(xe.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Customer Address"}),e.jsx(Xe,{value:Lt,onChange:xe=>qt(xe.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Terms & Conditions"}),e.jsx(Xe,{value:ft,onChange:xe=>Jt(xe.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(We,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:jt,onChange:xe=>kt(xe.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),Ds().map(xe=>e.jsx("option",{value:xe.id,children:xe.name},xe.id))]}),jt&&e.jsx(Xe,{placeholder:"Enter description for selected material",value:hs[jt]||"",onChange:xe=>it(_e=>({..._e,[jt]:xe.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:Hv,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",Ae]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:Fs})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",le]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",rt]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",ft]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",gt]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(xe=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:xe},xe))})}),e.jsx("tbody",{children:ds.map((xe,_e)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:_e+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:xe.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:xe.id&&hs[xe.id]||xe.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:xe.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:xe.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:xe.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(xe.quantity||0)*Number(xe.rate||0)||0).toFixed(2)})]},xe.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:Yn.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:sr.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:ha.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:Ma.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Na.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",Na.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{onClick:()=>u(8),variant:"outline",children:"Back"}),e.jsx(Ce,{onClick:tn,children:"Export PDF"})]})]}),A===9&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{variant:"destructive",onClick:()=>{Se(xe=>xe.filter(_e=>{const nt=_e.batchId?`${_e.batchId}-${_e.materialId}`:_e.materialId;return!Z.includes(nt)})),ie([])},disabled:Z.length===0,children:"Delete Selected"}),e.jsx(Ce,{type:"button",onClick:Hs,disabled:ds.length===0,children:"Save"}),e.jsx(Ce,{onClick:async()=>{const xe=Ds(me,je),_e=Z.length>0?xe.filter(Ye=>Z.includes(Ye.rowId||`${Ye.batchId}-${Ye.id}`)):xe,nt=_e.map(Ye=>{const Oe=Ye.rowId||`${Ye.batchId||""}-${Ye.id}`;return{id:Ye.id,rowId:Oe,batchId:Ye.batchId,name:Ye.name,unit:Ye.unit,quantity:je[Oe]?.quantity??je[Ye.id]?.quantity??Ye.quantity,supplyRate:je[Oe]?.supplyRate??je[Ye.id]?.supplyRate??Ye.rate,installRate:je[Oe]?.installRate??je[Ye.id]?.installRate??Ye.installRate??0,shopId:Ye.shopId,shopName:Ye.shopName,description:hs[Oe]||hs[Ye.id]||"",location:Pe[Oe]||Pe[Ye.id]||"",subOption:Ye.subOption}});if(nt.length===0)return;const V=_e[0],Te={id:`local-${Date.now()}`,estimator:"blinds",bill_no:Ae,blind_type:V?.blindType||be?.blindType||p,sub_option:V?.subOption||be?.subOption||b,qty:nt.length,materials:nt,subtotal:nt.reduce((Ye,Oe)=>Ye+Number(Oe.quantity||0)*(Number(Oe.supplyRate||0)+Number(Oe.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};se(Te);try{await lr()}catch{}ie([]),u(11)},disabled:ds.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{className:"text-sm font-semibold",children:"Saved BOQs"}),ce.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:ce.map(xe=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:xe.bill_no||`${xe.estimator} - ${xe.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(xe.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{onClick:()=>kr(xe),size:"sm",children:"Load"}),e.jsx(Ce,{variant:"destructive",onClick:()=>Bs(xe.id),size:"sm",children:"Delete"})]})]},xe.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all",checked:(()=>{const xe=(A===9?Ds(me,je):Ds()).map(_e=>_e.rowId||_e.id);return Z.length===xe.length&&xe.length>0})(),onCheckedChange:Pt})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const xe=new Map,_e=new Map;ds.forEach(Te=>{const Ye=Te.blindType||Te.door_type||be?.blindType||be?.door_type||p||"door",Oe=Te.panelType||Te.panel_type||be?.panelType||be?.panel_type||panelType||"",yt=Te.subOption||Te.sub_option||be?.subOption||be?.sub_option||"",Qt=`${Ye}||${Oe}||${yt}`;if(xe.has(Qt)||xe.set(Qt,[]),xe.get(Qt).push(Te),!_e.has(Qt)){const Ln=(xe.get(Qt)||[])[0]?.productLabel||`${Oe==="panel"?"With Panel":"Without Panel"}  ${Ye}${yt?" ("+yt+")":""}`;_e.set(Qt,{label:Ln})}});const nt=[];let V=0;for(const[Te,Ye]of xe.entries()){const Oe=Ye.map(bs=>bs.rowId||`${bs.batchId||""}-${bs.id}`),yt=Oe.every(bs=>Z.includes(bs)),Qt=`group_${Te}`,ln=hs[Qt]||"",Ln=Number(Mt[Qt]??be?.count??be?.qty??B??1);nt.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{id:`group-${Te}`,checked:yt,onCheckedChange:()=>{ie(yt?bs=>bs.filter(Ps=>!Oe.includes(Ps)):bs=>Array.from(new Set([...bs,...Oe])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:_e.get(Te)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Xe,{placeholder:"Group description",value:ln?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:bs=>it(Ps=>({...Ps,[Qt]:bs.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",className:"h-8 text-center",value:Mt[Qt]??Ln,onChange:bs=>{const Ps=bs.target.value?parseFloat(bs.target.value):0;bn(Dn=>({...Dn,[Qt]:Ps})),it(Dn=>{const Hn=(Dn[Qt]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...Dn,[Qt]:Hn?Hn+`
Qty: `+Ps:"Qty: "+Ps}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${Te}`));for(const bs of Ye){V+=1;const Ps=bs.rowId||`${bs.batchId}-${bs.id}`,Dn=Number(Nn[Ps]?.supplyRate??Nn[bs.id]?.supplyRate??bs.rate??0),Hn=Number(Nn[Ps]?.installRate??Nn[bs.id]?.installRate??bs.installRate??0),qn=Dn+Hn,Yr=Number(Nn[Ps]?.quantity??Nn[bs.id]?.quantity??bs.quantity??0),v=Yr*qn,N=hs[Ps]??hs[bs.id]??bs.description??"",x=String(N).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();nt.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:V}),e.jsx("td",{className:"border px-2 py-1",children:bs.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:hs[Ps]??hs[bs.id]??x,onChange:I=>it(F=>({...F,[Ps]:I.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Je[Ps]??Je[bs.id]??bs.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",className:"h-8 text-center",value:Yr,onChange:I=>jr(Ps,I.target.value?parseFloat(I.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:qn,onChange:I=>{const F=parseFloat(I.target.value||"0"),_=Number(Nn[Ps]?.supplyRate??Nn[bs.id]?.supplyRate??Dn),L=Math.max(0,F-_);Ur(Ps,_),hr(Ps,L)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",v.toFixed(2)]})]},Ps))}}return nt})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>u(8),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ce,{onClick:()=>u(10),children:"Finalize PO"}),e.jsxs(Ce,{onClick:qs,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}const zv="/image.png",aG=t=>(t||"").toString().toUpperCase().replace(/[^A-Z0-9]/g,"").trim(),Gr=t=>(t||"").toString().toUpperCase(),gR={flush:["FLUSH","FLUSH DOOR","FLUSH DOORS","BWR"],teak:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wooden:["WOOD","TEAK","WOODEN","WOODEN DOOR","TEAK WOOD"],wpc:["WPC","UPVC","PVC","WPC DOOR","WPC DOORS","COMPOSITE"],glassdoor:["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],"glass-door":["GLASS","GLASS DOOR","GLASS DOORS","FRAMELESS","TEMPERED"],glasspanel:["GLASS","GLASS PANEL"],stile:["STILE","ALUMINIUM","ALUMINUM","STILE DOOR","ALU"]},Oy={flush:"Flush door","flush-door":"Flush door",wooden:"Wooden door","wooden-door":"Wooden door",teak:"Wooden door",wpc:"WPC door","wpc-door":"WPC door",glassdoor:"Glass door","glass-door":"Glass door",stile:"Stile door","stile-door":"Stile door",glasspanel:"Glass panel"},iG=(t,s)=>{const n=Gr(t.product),r=Gr(t.name),i=Gr(t.category),c=Gr(t.subCategory),u=(gR[s]||[s.toUpperCase()]).some(o=>n.includes(o)||r.includes(o)||i.includes(o)||c.includes(o)),d=Oy[s],h=d&&Gr(n).includes(Gr(d));return u||h},$p=t=>(t.brandName||t.brand||t.make||t.manufacturer||t.company||"Generic").toString();function oG(){const{shops:t,materials:s,products:n}=fi(),{toast:r}=ua(),[i,c]=S.useState(1),A=typeof window<"u"&&window.location.search.includes("step=11"),[u,d]=S.useState(""),[h,o]=S.useState(""),[m,y]=S.useState(null),[p,j]=S.useState(null),[b,w]=S.useState(null),[B,U]=S.useState(null),[Q,k]=S.useState(null),[K,ee]=S.useState(null),[q,G]=S.useState(1),[W,he]=S.useState(7),[Z,ie]=S.useState(3),[ce,ae]=S.useState(6),[de,se]=S.useState(2),[re,te]=S.useState([]),[be,He]=S.useState([]);S.useEffect(()=>{lt("/api/accumulated-products/electrical",{headers:{}}).then(v=>v.json()).then(v=>{He(v.data||[])}).catch(v=>console.error("Failed to load accumulated products",v))},[]),S.useEffect(()=>{if(typeof window<"u"){const N=new URLSearchParams(window.location.search).get("step");if(N){const x=parseInt(N,10);x>=1&&x<=12&&c(x)}}},[]),S.useEffect(()=>{i===12&&lt("/api/accumulated-products/electrical",{headers:{}}).then(v=>v.json()).then(v=>{const N=v.data||[];He(N),console.debug("Restored electrical_accumulated_products for Step 12:",N.length)}).catch(v=>console.error("Failed to load accumulated products for Step 12",v))},[i]);const pe=v=>{const N=v?.doorType??b,x=v?.panelType??p,I=v?.subOption??B;if(!N)return null;const F=Le.find(z=>z.value===N);let _=F?F.label:Oy[N]||N;/door/i.test(_)||(_=`${_} Door`);const L=x==="panel"?"With Panel":"Without Panel",P=I?` - ${I}`:"";return`${L}  ${_}${P}`},Y=()=>{const v=(h||"").toString();if(!b&&!v)return null;const N=v||pe(),x=v||Oy[b]||b,I=b?["glassdoor","glass-door","stile","stile-door","glasspanel"].includes(b):Gr(N).includes("GLASS")||Gr(N).includes("STILE");return{label:N,productName:x,requiresGlazing:I}},me=()=>{const v=(h||"").toString();if(!b&&!v||!s.length)return[];const N=v||(b?Oy[b]:"");let x=[];if(N&&(x=s.filter(F=>{const _=(F.product||"").toString();if(!_||!N)return!1;const L=Gr(_),P=Gr(N);return L.includes(P)||P.includes(L)})),(!x||x.length===0)&&!v&&(x=b?s.filter(F=>iG(F,b)):s.filter(F=>{const _=(F.product||"").toString();if(!N)return!1;const L=Gr(_),P=Gr(N);return L.includes(P)||P.includes(L)})),x.length===0)return[];const I=new Map;for(const F of x){const _=`${Gr(F.product)}__${Gr(F.name)}__${aG(F.code)}`,L=I.get(_);(!L||(F.rate||0)<(L.rate||0))&&I.set(_,F)}return Array.from(I.values())},Se={flush:["With Vision Panel","Without Vision Panel"],teak:["Solid Wood","Engineered Wood"],wpc:["Solid Core","Hollow Core"],glassdoor:["Frameless","Framed"],glasspanel:["Frameless","Framed"],stile:["Single Glazing","Double Glazing"]},je=["Single Glass","Double Glass"],Le=[{value:"flush",label:"Flush Doors"},{value:"wpc",label:"WPC Doors"},{value:"glassdoor",label:"Glass Door"},{value:"teak",label:"Wooden Door"},{value:"stile",label:"Stile Door"}],ge=(v,N)=>{const x=q||1,I=W||7,F=Z||3,_=ce||6,L=de||2,P=Dm(I,F),z=v.toLowerCase();let ne=0;return z.includes("frame")||z.includes("door frame")?ne=P*x:z.includes("door")&&(z.includes("panel")||z.includes("shutter")||z.includes("flush")||z.includes("wooden"))?ne=x:z.includes("hinge")?ne=x*3:z.includes("lock")||z.includes("handle")||z.includes("stopper")||z.includes("bolt")?ne=x:z.includes("glass")?ne=Qm(_,L)*x:ne=x,Math.max(1,Math.ceil(ne))},ye=(v,N)=>{const x=v||re,I=N||rt;return x.map(F=>{let _=Ne.find(cs=>cs.id===F.materialId);if(_||(_=s.find(cs=>cs.id===F.materialId)||null),!_)return null;const L=s.find(cs=>{const Ns=Gr(cs.product)===Gr(_.product),Zs=Gr(cs.name)===Gr(_.name),Rn=cs.shopId===F.selectedShopId,$=$p(cs)===(F.selectedBrand||"Generic");return Ns&&Zs&&Rn&&$})||_,P=t.find(cs=>cs.id===F.selectedShopId),z=F.rowId||(F.batchId?`${F.batchId}-${L.id}`:L.id),ne=I[z]||I[L.id]||I[_.id],Ie=ge(L.name,L.unit),st=ne?.quantity??Ie,ot=ne?.supplyRate??L.rate??0,Dt=ne?.installRate??0,rs=(Is||[]).find(cs=>cs.rowId===z||`${cs.batchId||""}-${cs.id}`===z);return{id:L.id,batchId:F.batchId,rowId:z,name:L.name,quantity:st,unit:L.unit,rate:ot,shopId:F.selectedShopId,shopName:P?.name||"Unknown",installRate:Dt,doorType:rs?.doorType||rs?.door_type||void 0,panelType:rs?.panelType||rs?.panel_type||void 0,subOption:rs?.subOption||rs?.sub_option||void 0,glazingType:rs?.glazingType||rs?.glazing_type||void 0,productLabel:rs?.productLabel||void 0}}).filter(F=>F!==null)},we=()=>ye().reduce((v,N)=>v+N.quantity*N.rate,0),Ne=me(),ke=v=>(v?.name||v?.title||v?.label||v?.productName||v?.product||"").toString(),Be=v=>(v?.category||v?.type||v?.group||v?.section||"").toString(),Ae=v=>Xc(v)==="electrical",Qe=v=>{const N=Gr(v);return N.includes("FLUSH")?"flush":N.includes("WPC")?"wpc":N.includes("STILE")||N.includes("ALUMIN")?"stile":N.includes("GLASS PANEL")?"glasspanel":N.includes("GLASS")?"glassdoor":N.includes("WOOD")||N.includes("TEAK")?"wooden":null},le=(n||[]).filter(Ae).slice().sort((v,N)=>{const x=ke(v),I=ke(N);return x.localeCompare(I)}),ct=v=>{const N=ke(v);d(v.id||N),o(N);const x=Qe(N);w(x||b),U(null),k(null),ee(null),te([]),ht({}),kt({}),is({}),c(6)},[rt,ht]=S.useState({}),[ft,Jt]=S.useState([]),[gt,tt]=S.useState({}),[Lt,qt]=S.useState("Concept Trunk Interiors"),[Fs,xs]=S.useState(`12/36A, Indira Nagar
Medavakkam
Chennai Tamil Nadu 600100
India`),[hs,it]=S.useState("33ASOPS5560M1Z1"),[Pe,dt]=S.useState(""),[ze,Tt]=S.useState(new Date().toISOString().slice(0,10)),[Je,vt]=S.useState(""),[$e,St]=S.useState("50% Advance and 50% on Completion"),[Rt,Zt]=S.useState(""),[bt,Vt]=S.useState(""),[vs,us]=S.useState(""),[jt,kt]=S.useState({}),[Ft,is]=S.useState({}),[Ss,nn]=S.useState({}),[es,zs]=S.useState({}),[Us,Vs]=S.useState({}),[Ls,js]=S.useState({}),[Os,Ds]=S.useState([]),[ut,Pt]=S.useState([]),[Kt,ws]=S.useState(""),[Ts,ys]=S.useState([]),[Qs,Gt]=S.useState([]),[Ys,Cn]=S.useState([]),[na,tr]=S.useState(!1);S.useEffect(()=>{(async()=>{if(Pe)try{const N=await lt(`/api/estimator-step9-items?session_id=${Pe}&estimator=electrical`,{headers:{}});if(N.ok){const F=await N.json();ys(F.items||[])}const x=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=electrical`,{headers:{}});if(x.ok){const F=await x.json();Gt(F.items||[])}const I=await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=electrical`,{headers:{}});if(I.ok){const F=await I.json();Cn(F.items||[])}}catch(N){console.warn("Failed to load data from DB:",N)}})()},[Pe]),S.useEffect(()=>{if(i===7){const v=ye(),N={};v.forEach(x=>{N[x.id]={quantity:x.quantity||0,supplyRate:x.rate||0,installRate:0}}),ht(N)}},[i,re]),S.useEffect(()=>{if(i===9){const v=ye(ft,gt);if(v.length>0){const N=v[0].shopId,x=t.find(I=>I.id===N);if(x){const I=[x.name||"",x.address||"",x.area||"",x.city||"",x.state||"",x.pincode||"",x.gstNo?`GSTIN: ${x.gstNo}`:"",x.phone||""].filter(Boolean);us(I.join(`
`))}}}},[i,ft,gt,re,t]),S.useEffect(()=>{if(i===9){ds();const v=[],N={},x={},I={};if(Is&&Is.length>0)for(const F of Is){const _=F.rowId||`${F.batchId||""}-${F.id}`;v.findIndex(P=>P.materialId===F.id&&P.rowId===_&&(P.batchId||"")===(F.batchId||""))===-1&&(v.push({materialId:F.id,selectedShopId:F.shopId||"",selectedBrand:F.brand||void 0,batchId:F.batchId,rowId:_}),N[_]={quantity:Number(F.quantity||0),supplyRate:Number(F.supplyRate??F.rate??0),installRate:Number(F.installRate||0)},F.description&&(x[_]=F.description),F.location&&(I[_]=F.location))}if(Ts&&Ts.length>0)for(const F of Ts){if(!s.find(st=>st.id===F.material_id))continue;const L=F.material_id,P=F.row_id||(F.batch_id?`${F.batch_id}-${L}`:L),z=F.shop_id||"",ne=F.brand||void 0;v.findIndex(st=>st.materialId===L&&(st.batchId||"")===(F.batch_id||"")&&(st.rowId||"")===P)===-1&&(v.push({materialId:L,selectedShopId:z,selectedBrand:ne,batchId:F.batch_id||(F.row_id?P.replace(`-${L}`,""):void 0)}),N[P]={quantity:Number(F.quantity||0),supplyRate:Number(F.supply_rate||F.rate||0),installRate:Number(F.install_rate||0)},F.description&&(x[P]=F.description),F.location&&(I[P]=F.location))}re&&re.length>0&&re.forEach(F=>{if(v.findIndex(L=>L.materialId===F.materialId&&L.batchId===F.batchId)===-1){v.push(F);const L=s.find(P=>P.id===F.materialId);if(L){const P=F.batchId?`${F.batchId}-${F.materialId}`:F.materialId;N[P]={quantity:rt[F.materialId]?.quantity??L.quantity??1,supplyRate:rt[F.materialId]?.supplyRate??L.rate??0,installRate:rt[F.materialId]?.installRate??0}}}}),v.length>0&&Jt(v),Object.keys(N).length>0&&tt(N),Object.keys(x).length>0&&kt(F=>({...F,...x})),Object.keys(I).length>0&&is(F=>({...F,...I}))}},[i,re,Ts]),S.useEffect(()=>{i===11&&(async()=>{if(Pe)try{const N=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=electrical`,{headers:{}});if(N.ok){const I=(await N.json()).items||[],F={},_={},L={},P={};I.forEach(z=>{const ne=s.find(Ie=>Ie.name===z.item);ne&&(F[ne.id]=Number(z.supply_rate||0),_[ne.id]=Number(z.install_rate||0),L[ne.id]=Number(z.qty||0),P[ne.id]=z.unit||"")}),js(z=>({...z,...F})),Vs(z=>({...z,..._})),nn(z=>({...z,...L})),zs(z=>({...z,...P}))}}catch(N){console.warn("Failed to load step 11 data:",N)}})()},[i,Pe,Qs]);const Mt=S.useRef(null);S.useEffect(()=>{ds().catch(()=>{})},[]),S.useEffect(()=>{(async()=>{if(Pe)try{const N=await lt(`/api/estimator-step9-items?session_id=${Pe}&estimator=electrical`,{headers:{}});if(N.ok){const x=await N.json(),I=x.items.map(F=>({id:F.material_id,rowId:F.row_id,batchId:F.batch_id,name:F.name,unit:F.unit,quantity:F.quantity,supplyRate:F.supply_rate,installRate:F.install_rate,shopId:F.shop_id,shopName:F.shop_name,description:F.description,location:F.location,doorType:F.door_type,panelType:F.panel_type,subOption:F.sub_option,glazingType:F.glazing_type}));if(dn(I),x.items.length>0){const F=x.items[0];ms({doorType:F.door_type,panelType:F.panel_type,subOption:F.sub_option,glazingType:F.glazing_type,count:F.qty,height:F.height,width:F.width,glassHeight:F.glass_height,glassWidth:F.glass_width,subtotal:F.subtotal,sgst:F.sgst,cgst:F.cgst,round_off:F.round_off,grand_total:F.grand_total})}}}catch(N){console.warn("Failed to load step 9 from DB",N)}})()},[Pe]),S.useEffect(()=>(Mt.current&&clearTimeout(Mt.current),Mt.current=setTimeout(async()=>{new Date().toISOString();try{if(!Pe)return;const v=ye().map((N,x)=>{const I=N.rowId||(N.batchId?`${N.batchId}-${N.id}`:N.id);return{estimator:"electrical",session_id:Pe,s_no:x+1,row_id:String(I),batch_id:N.batchId||null,material_id:N.id,name:N.name,unit:N.unit,quantity:Number(rt[N.id]?.quantity??N.quantity??0),supply_rate:Number(rt[N.id]?.supplyRate??N.rate??0),install_rate:Number(rt[N.id]?.installRate??0),shop_id:N.shopId||"",shop_name:N.shopName||"",description:jt[N.id]||"",location:Ft[N.id]||"",door_type:b,panel_type:p,sub_option:B,glazing_type:K,qty:q,height:W,width:Z,glass_height:ce,glass_width:de}});await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"electrical",session_id:Pe,items:v})})}catch{}},800),()=>{Mt.current&&clearTimeout(Mt.current)}),[re,rt,jt,Ft,b,p,B,K,q,W,Z,ce,de,Pe]);const bn=v=>{const N=Ne.find(z=>z.id===v);if(!N)return;if(re.find(z=>z.materialId===v)){te(z=>z.filter(ne=>ne.materialId!==v));return}const I=s.filter(z=>Gr(z.product)===Gr(N.product)&&Gr(z.name)===Gr(N.name)).map(z=>({brand:$p(z),shopId:z.shopId,rate:z.rate||0})),_=Array.from(new Set(I.map(z=>z.brand))).sort()[0]||"Generic",P=I.filter(z=>z.brand===_).sort((z,ne)=>z.rate-ne.rate)[0];P?.shopId&&te(z=>[...z,{materialId:v,selectedShopId:P.shopId,selectedBrand:_}])},Tr=(v,N)=>{te(x=>x.map(I=>I.materialId===v?{...I,selectedShopId:N}:I))},lr=(v,N)=>{const x=Ne.find(_=>_.id===v);if(!x)return;const F=s.filter(_=>Gr(_.product)===Gr(x.product)&&Gr(_.name)===Gr(x.name)).map(_=>({brand:$p(_),shopId:_.shopId,rate:_.rate||0})).filter(_=>_.brand===N).sort((_,L)=>_.rate-L.rate)[0]?.shopId||"";te(_=>_.map(L=>L.materialId===v?{...L,selectedBrand:N,selectedShopId:F||L.selectedShopId}:L))},[Bs,Js]=S.useState([]),Pn=()=>{const v=(i===9?ye(ft,gt):ye()).map(N=>N.rowId||N.id);Js(N=>N.length===v.length?[]:v)},kr=async()=>{if(Bs.length!==0){try{const v=[],N=[];for(const x of Bs){const I=Is?.find(F=>`${F.batchId||""}-${F.id}`===x);if(I&&I.id){const F=Ts.find(_=>_.id===I.id);F&&v.push(F)}else{const F=ft.find(_=>`${_.batchId||""}-${_.materialId}`===x);F&&N.push(F)}}if(v.length>0&&Pe&&(await lt("/api/estimator-step9-items",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:Pe,estimator:"electrical",items:v})}),dn(x=>x?x.filter(I=>!v.some(F=>F.id===I.id)):null)),N.length>0&&Jt(x=>x.filter(I=>!N.some(F=>`${F.batchId||""}-${F.materialId}`==`${I.batchId||""}-${I.materialId}`))),Jt(x=>x.filter(I=>!Bs.includes(`${I.batchId||""}-${I.materialId}`))),tt(x=>{const I={...x};return Bs.forEach(F=>delete I[F]),I}),Pe){const I=await(await lt(`/api/estimator-step9-items?session_id=${Pe}&estimator=electrical`,{headers:{}})).json();ys(I.items||[])}r({title:"Success",description:`${Bs.length} item(s) deleted successfully!`})}catch(v){console.warn("Failed to delete items",v),r({title:"Error",description:"Failed to delete items. Please try again.",variant:"destructive"})}Js([])}},[jr,Ur]=S.useState([]),hr=S.useRef(""),[qs,tn]=S.useState(null),[Is,dn]=S.useState(null),[Hs,wr]=S.useState({}),[at,ms]=S.useState(null),ds=async()=>{try{const v=await lt("/api/boq");if(v.status===401){Ur([]),hr.current!=="401"&&(hr.current="401",r({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!v.ok){const I=await v.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${I||v.status}`)}if(!(v.headers.get("content-type")||"").includes("application/json")){const I=await v.text().catch(()=>"");console.warn("/api/boq returned non-json:",I),Ur([]);return}const x=await v.json();Ur(x.boqs||[]),hr.current=""}catch(v){console.error("fetchSavedBoqs",v);const N=String(v?.message||v||"");if(!N)return;hr.current!==N&&(hr.current=N,r({title:"API not reachable",description:"Cannot connect to the server. Please make sure the backend API is running and reachable.",variant:"destructive"}))}},Nn=async()=>{try{if(!Pe)return r({title:"Bill No required",description:"Please enter Bill No in Step 9 before saving BOQ.",variant:"destructive"}),!1;const v={estimator:"electrical",billNo:Pe,doorType:b,panelType:p,subOption:B,glazingType:K,qty:q,height:W,width:Z,glassHeight:ce,glassWidth:de,materials:Is&&Is.length>0?Is:ye(),subtotal:V,sgst:Te,cgst:Ye,roundOff:Oe,grandTotal:yt},N=await lt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!N.ok){const F=await N.text().catch(()=>"");throw new Error(F||"save failed")}const x=N.headers.get("content-type")||"";let I=null;if(x.includes("application/json"))I=await N.json();else{const F=await N.text().catch(()=>"");console.warn("POST /api/boq returned non-json:",F),I={boq:null}}return await ds(),tn(I?.boq||I?.boqs?.[0]||null),!0}catch(v){return console.error("handleSaveBOQ",v),!1}},Yn=async v=>{try{if(!(await lt(`/api/boq/${v}`,{method:"DELETE",headers:{}})).ok)throw new Error("delete failed");await ds()}catch(N){console.error("handleDeleteSavedBoq",N)}},sr=()=>{c(1),w(null),j(null),U(null),k(null),G(1),he(7),ie(3),ae(0),se(0),Ds([]),nn({}),kt({}),is({}),zs({}),js({}),Vs({}),wr({}),tn(null)},ha=async()=>{tr(!0);try{let v=Qs||[];if(Pe)try{const _=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=electrical`);_.ok&&(v=(await _.json()).items||[],Gt(v))}catch(_){console.warn("Failed to refresh step11 items before save",_)}const N=bs.map(_=>({estimator:"electrical",session_id:Pe,group_key:(_.groupKey||`${_.doorType||"door"}||${_.panelType||""}||${_.subOption||""}`)+"::"+(_.name||""),group_id:_.groupId||`group_${_.groupKey||""}`,item_name:_.name,unit:_.unit,quantity:_.quantity,location:_.location||"",description:_.description||"",supply_rate:Ls[_.id]||_.supplyRate||0,install_rate:Us[_.id]||_.installRate||0,supply_amount:(_.quantity||0)*(Ls[_.id]||_.supplyRate||0),install_amount:(_.quantity||0)*(Us[_.id]||_.installRate||0),supply_subtotal:bs.reduce((L,P)=>L+(P.quantity||0)*(Ls[P.id]||P.supplyRate||0),0),install_subtotal:bs.reduce((L,P)=>L+(P.quantity||0)*(Us[P.id]||P.installRate||0),0),sgst:Te,cgst:Ye,round_off:Oe,grand_total:bs.reduce((L,P)=>L+(P.quantity||0)*((Ls[P.id]||P.supplyRate||0)+(Us[P.id]||P.installRate||0)),0)+Te+Ye+Oe})),x=new Set((v||[]).map(_=>_.group_key||_.groupKey)),I=N.filter(_=>!x.has(_.group_key));if(I.length===0)return r({title:"No changes",description:"No new Step 11 items to save."}),tr(!1),!0;const F=await lt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:I})});if(!F.ok){const _=await F.text().catch(()=>"");return r({title:"Error",description:`Failed saving Step 11: ${_||F.statusText}`,variant:"destructive"}),tr(!1),!1}try{const _=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=electrical`);if(_.ok){const L=await _.json();Gt(L.items||[])}}catch(_){console.warn("Failed to reload step11 items after save",_)}return He([]),r({title:"Success",description:"Step 11 saved to database."}),tr(!1),!0}catch(v){return console.error("handleSaveAccumulatedBOQ",v),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),tr(!1),!1}},Ma=v=>{if(dt(v.bill_no||""),w(v.door_type||null),j(v.panel_type||null),U(v.sub_option||null),ee(v.glazing_type||null),G(v.qty||1),he(v.height||7),ie(v.width||3),ae(v.glass_height||6),se(v.glass_width||2),Array.isArray(v.materials)){const N=v.materials.map(x=>({materialId:x.id,selectedShopId:x.shopId||x.shop_id||x.shopId||"",selectedBrand:x.shopName||x.brand||x.selectedBrand||void 0}));te(N.filter(Boolean))}tn(v)},Na=(v,N)=>{if(i===9){tt(x=>({...x,[v]:{...x[v]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(N))}}));return}ht(x=>({...x,[v]:{...x[v]||{supplyRate:0,installRate:0},quantity:Math.max(0,Math.ceil(N))}}))},cr=(v,N)=>{if(i===9){tt(x=>({...x,[v]:{...x[v]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(N)),installRate:x[v]?.installRate||0}}));return}ht(x=>({...x,[v]:{...x[v]||{quantity:0,installRate:0},supplyRate:Math.max(0,Number(N)),installRate:x[v]?.installRate||0}}))},Ka=(v,N)=>{if(i===9){tt(x=>({...x,[v]:{...x[v]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(N)),supplyRate:x[v]?.supplyRate||0}}));return}ht(x=>({...x,[v]:{...x[v]||{quantity:0,supplyRate:0},installRate:Math.max(0,Number(N)),supplyRate:x[v]?.supplyRate||0}}))},pa=()=>{const v=document.getElementById("boq-pdf");if(!v){alert("BOQ content not found");return}setTimeout(()=>{_d().set({margin:[10,10,10,10],filename:"Door_BOQ.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:N=>N.className?.toString().includes("bg-")||N.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(v).save().catch(N=>{console.error("PDF Export Error:",N),alert("PDF export failed. Check console.")})},100)},er=async()=>{const v=document.getElementById("boq-final-pdf");if(!v){alert("Final BOQ content not found");return}const N=(await Yc(async()=>{const{default:x}=await Promise.resolve().then(()=>wu);return{default:x}},void 0)).default;N().set({margin:10,filename:`BOQ-${Pe||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(v).save()},oa=()=>{const v=ye(),N=Y(),x=["BILL OF QUANTITIES (BOQ)",`Generated: ${new Date().toLocaleString()}`,`Door Type: ${p==="panel"?"With Panel":"Without Panel"} - ${N?.label}`,`Dimensions: ${W}ft  ${Z}ft (Count: ${q})`,...K?[`Glazing: ${K}`]:[],"","MATERIALS SCHEDULE","S.No,Item,Unit,Quantity,Unit Rate,Shop,Total"];v.forEach((P,z)=>{const ne=P.quantity*P.rate;x.push(`${z+1},"${P.name}","${P.unit}",${P.quantity},${P.rate},"${P.shopName}",${ne}`)}),x.push("",`TOTAL COST,,,${we().toFixed(2)}`);const I=x.join(`
`),F=new Blob([I],{type:"text/csv"}),_=window.URL.createObjectURL(F),L=document.createElement("a");L.href=_,L.download=`BOQ-Doors-${new Date().getTime()}.csv`,L.click(),URL.revokeObjectURL(_)},pi=()=>{const v=bs||[],N=[];N.push("S.No,Item,Location,Description,Unit,Qty,Supply Rate,Install Rate,Supply Amount,Install Amount"),v.forEach((L,P)=>{const z=Number(L.supplyRate??L.rate??0),ne=Number(L.installRate??0),Ie=Number(L.quantity||0),st=Ie*z,ot=Ie*ne,Dt=(L.location||Ft[L.id]||"").toString().replace(/"/g,'""'),rs=(L.description||jt[L.id]||L.name||"").toString().replace(/"/g,'""'),Zs=(pe({doorType:L.doorType||L.door_type,panelType:L.panelType||L.panel_type,subOption:L.subOption||L.sub_option,glazingType:L.glazingType||L.glazing_type})||L.name||"").replace(/"/g,'""');N.push(`${P+1},"${Zs}","${Dt}","${rs}",${L.unit},${Ie},${z.toFixed(2)},${ne.toFixed(2)},${st.toFixed(2)},${ot.toFixed(2)}`)});const x=N.join(`
`),I=new Blob([x],{type:"text/csv"}),F=window.URL.createObjectURL(I),_=document.createElement("a");_.href=F,_.download=`BOQ-Doors-Step11-${new Date().getTime()}.csv`,_.click(),URL.revokeObjectURL(F)},$a=async()=>{const v=ye(ft,gt).map(L=>{const P=L.rowId||`${L.batchId}-${L.id}`;return{id:L.id,rowId:P,batchId:L.batchId||null,name:L.name,productLabel:L.productLabel||null,product_label:L.productLabel||null,unit:L.unit,quantity:gt[P]?.quantity??gt[L.id]?.quantity??L.quantity,supplyRate:gt[P]?.supplyRate??gt[L.id]?.supplyRate??L.rate,installRate:gt[P]?.installRate??gt[L.id]?.installRate??L.installRate??0,shopId:L.shopId,shopName:L.shopName,description:jt[P]||jt[L.id]||"",location:Ft[P]||Ft[L.id]||"",doorType:L.doorType,panelType:L.panelType,subOption:L.subOption,glazingType:L.glazingType,isSaved:L.isSaved||!1}}),N=v.filter(L=>!L.isSaved);if(N.length===0){r({title:"No New Items",description:"All materials are already saved. No new items to save.",variant:"destructive"});return}let x=Pe;(!x||x.trim()==="")&&(x=`DOOR-${Date.now()}`,dt(x));const I=at||(()=>{const L=v.reduce((st,ot)=>st+Number(ot.quantity||0)*(Number(ot.supplyRate||0)+Number(ot.installRate||0)),0),P=L*.09,z=L*.09,ne=Math.round(L+P+z)-(L+P+z),Ie=L+P+z+ne;return{subtotal:L,sgst:P,cgst:z,round_off:ne,grand_total:Ie}})(),F={id:`local-${Date.now()}`,estimator:"electrical",bill_no:x,door_type:at?.doorType||at?.door_type||b,panel_type:at?.panelType||at?.panel_type||p,sub_option:at?.subOption||at?.sub_option||B,glazing_type:at?.glazingType||at?.glazing_type||K,qty:at?.count||at?.qty||q,height:at?.height||W,width:at?.width||Z,glass_height:at?.glassHeight||at?.glass_height||ce,glass_width:at?.glassWidth||at?.glass_width||de,materials:v,subtotal:I.subtotal,sgst:I.sgst,cgst:I.cgst,round_off:I.round_off,grand_total:I.grand_total,created_at:new Date().toISOString()};tn(F),dn(v);try{ms(L=>({...L||{},...I}))}catch{}const _=N.map((L,P)=>({estimator:"electrical",session_id:x,s_no:P+1,row_id:String(L.rowId||`${L.batchId||""}-${L.id}`),batch_id:L.batchId||null,material_id:L.id,name:L.name,unit:L.unit,quantity:Number(L.quantity||0),supply_rate:Number(L.supplyRate||0),install_rate:Number(L.installRate||0),shop_id:L.shopId||"",shop_name:L.shopName||"",description:L.description||"",location:L.location||"",door_type:L.doorType||at?.doorType||at?.door_type||b||null,panel_type:L.panelType||at?.panelType||at?.panel_type||p||null,sub_option:L.subOption||at?.subOption||at?.sub_option||B||null,glazing_type:L.glazingType||at?.glazingType||at?.glazing_type||K||null,qty:at?.count||at?.qty||q,height:at?.height||W,width:at?.width||Z,glass_height:at?.glassHeight||at?.glass_height||ce,glass_width:at?.glassWidth||at?.glass_width||de,subtotal:I.subtotal,sgst:I.sgst,cgst:I.cgst,round_off:I.round_off,grand_total:I.grand_total}));try{await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"electrical",session_id:x,items:_})});const P=await(await lt(`/api/estimator-step9-items?session_id=${x}&estimator=electrical`,{headers:{}})).json();ys(P.items||[]);const z=(Is||[]).map(ne=>N.some(st=>ne.rowId===st.rowId||`${ne.batchId||""}-${ne.id}`==`${st.batchId||""}-${st.id}`)?{...ne,isSaved:!0}:ne);dn(z),r({title:"Success",description:`${N.length} new material(s) saved successfully to database!`})}catch(L){console.warn("Failed to save step 9 to DB",L),r({title:"Error",description:"Failed to save Step 9 data. Please check your connection and try again.",variant:"destructive"})}},Va=v=>{let N=5381;for(let x=0;x<v.length;x+=1)N=(N<<5)+N^v.charCodeAt(x);return Math.abs(N>>>0).toString(36)},ti=()=>{const v=JSON.stringify({doorType:b,panelType:p,subOption:B,glazingType:K,count:q,height:W,width:Z,glassHeight:ce,glassWidth:de,selectedMaterials:(re||[]).map(N=>({materialId:N.materialId,selectedShopId:N.selectedShopId,selectedBrand:N.selectedBrand})),editable:Object.keys(rt||{}).sort().map(N=>({id:N,...rt[N]}))});return`batch-${Va(v)}`},xe=()=>{const v=ti(),N=Array.from(new Map((re||[]).map(ne=>[ne.materialId,ne])).values()),x=ye(N,rt).map(ne=>({id:ne.id,rowId:`${v}-${ne.id}`,batchId:v,name:ne.name,unit:ne.unit,quantity:rt[ne.id]?.quantity??ne.quantity,supplyRate:rt[ne.id]?.supplyRate??ne.rate,installRate:rt[ne.id]?.installRate??0,shopId:ne.shopId,shopName:ne.shopName,description:jt[ne.id]||"",location:Ft[ne.id]||"",doorType:b,productLabel:h||pe(),panelType:p,subOption:B,glazingType:K,isSaved:!1})),I=Array.from(new Map(x.map(ne=>[ne.id,ne])).values());if(I.length===0){c(9);return}const L=[...(Is||[]||[]).filter(ne=>ne.batchId!==v),...I],P=Array.from(new Map(L.map(ne=>[ne.rowId||`${ne.batchId}-${ne.id}`,ne])).values());dn(P),Jt(N.map(ne=>({materialId:ne.materialId,selectedShopId:ne.selectedShopId,selectedBrand:ne.selectedBrand,batchId:v})));const z={};P.forEach(ne=>{const Ie=ne.rowId||`${ne.batchId}-${ne.id}`;z[Ie]={quantity:Number(ne.quantity||0),supplyRate:Number(ne.supplyRate||ne.rate||0),installRate:Number(ne.installRate||0)}}),tt(z);try{const ne=we(),Ie=ne*.09,st=ne*.09,ot=Math.round(ne+Ie+st)-(ne+Ie+st),Dt=ne+Ie+st+ot;ms({doorType:b,panelType:p,subOption:B,glazingType:K,count:q,height:W,width:Z,glassHeight:ce,glassWidth:de,subtotal:ne,sgst:Ie,cgst:st,round_off:ot,grand_total:Dt})}catch{}c(9)},_e=i===9||i===11?Is||[]:ye(),nt=i===9?gt:rt,V=_e.reduce((v,N)=>v+N.quantity*((nt[N.id]?.supplyRate??N.rate)+(nt[N.id]?.installRate??N.installRate??0)),0),Te=V*.09,Ye=V*.09,Oe=Math.round(V+Te+Ye)-(V+Te+Ye),yt=V+Te+Ye+Oe,Qt=be.length>0?be.flatMap(v=>v.materials||[]):Is&&Is.length>0?Is:_e&&_e.length>0?_e:qs&&qs.materials&&qs.materials.length>0?Array.isArray(qs.materials)?qs.materials:JSON.parse(qs.materials||"[]"):_e,ln=(()=>{const v=new Map;for(const x of Qt||[]){const I=x.productLabel||x.doorType||x.door_type||at?.doorType||at?.door_type||b||"door",F=x.panelType||x.panel_type||at?.panelType||at?.panel_type||p||"",_=x.subOption||x.sub_option||at?.subOption||at?.sub_option||"",L=`${I}||${F}||${_}`;v.has(L)||v.set(L,[]),v.get(L).push(x)}const N=[];for(const[x,I]of v.entries()){const[F,_,L]=x.split("||"),P=`group_${x}`,z=jt[P]||"",ne=Ft[P]||"";let Ie=Number(Hs[P]??at?.count??at?.qty??q??1);const st=String(z).match(/Qty:\s*(\d+(?:\.\d+)?)/);st&&(Hs[P]===void 0||Hs[P]===null)&&(Ie=Number(st[1]));const ot=I.reduce((Rn,$)=>Rn+Number($.quantity||0)*Number($.supplyRate??$.rate??0),0),Dt=Ie>0?ot/Ie:ot,rs=I.reduce((Rn,$)=>Rn+Number($.quantity||0)*Number($.installRate??0),0),cs=Ie>0?rs/Ie:rs,Ns=I[0]&&I[0].productLabel||pe({doorType:F,panelType:_,subOption:L})||F,Zs=String(z).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();N.push({id:P,groupKey:x,name:Ns,location:ne||"",description:Zs||"",unit:"pcs",quantity:Ie,supplyRate:Number(Dt||0),installRate:Number(Us[P]??cs??0),supplyAmount:Number(Dt*Ie||0),installAmount:Number((Us[P]??cs)*Ie||0)})}return N})();(Qs||[]).filter(v=>v.item||v.item_name).map((v,N)=>{const x=v.group_key||v.groupKey||`${v.door_type||v.doorType||"door"}||${v.panel_type||v.panelType||""}||${v.sub_option||v.subOption||""}`;return{id:v.id,groupKey:x,name:v.productLabel||v.item_name||v.item||v.name||v.door_label||v.doorType||v.door_type||"Door",location:v.location||"",description:v.description||"",unit:v.unit||"pcs",quantity:Number(v.quantity??v.qty??1),supplyRate:Number(v.supply_rate??v.supplyRate??0),installRate:Number(v.install_rate??v.installRate??0),supplyAmount:Number(v.supply_amount??0),installAmount:Number(v.install_amount??0),doorType:v.door_type||v.doorType,panelType:v.panel_type||v.panelType,subOption:v.sub_option||v.subOption}});const bs=(be.length===0?ln.filter(v=>!(Qs||[]).some(x=>(x.group_key||x.groupKey||`${x.door_type||""}||${x.panel_type||""}||${x.sub_option||""}`)===v.groupKey)):be.map((v,N)=>({id:`accumulated_${N}`,groupKey:`${v.doorType||"door"}||${v.panelType||""}||${v.subOption||""}`,name:v.productLabel||v.materials?.[0]?.productLabel||v.doorLabel||pe({doorType:v.doorType,panelType:v.panelType,subOption:v.subOption})||v.doorType,location:v.location||"",description:v.description||"",unit:"pcs",quantity:v.count||1,supplyRate:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.supplyRate??I.rate??0),0)||0,installRate:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.installRate??0),0)||0,supplyAmount:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.supplyRate??I.rate??0),0)||0,installAmount:v.materials?.reduce((x,I)=>x+Number(I.quantity||0)*Number(I.installRate??0),0)||0})))||[],Ps=bs.filter(v=>ut.includes(v.id)),Dn=bs.reduce((v,N)=>{const x=Number(Ss[N.id]??(N.quantity||0)),I=Number(Ls[N.id]??N.supplyRate??N.rate??0);return v+x*I},0);bs.reduce((v,N)=>{const x=Number(Ss[N.id]??(N.quantity||0));return v+x*Number(N.installRate||0)},0);const Hn=Ps.reduce((v,N)=>{const x=Number(Ss[N.id]??(N.quantity||0)),I=Number(Ls[N.id]??N.supplyRate??N.rate??0);return v+x*I},0);qs&&qs.bill_no;const qn=qs&&qs.created_at?new Date(qs.created_at).toISOString().slice(0,10):ze,Yr=v=>{if(!v)return!1;const N=(v.name||"").toString().trim(),x=Number(v.quantity||0),I=Number(v.supplyRate??v.rate??0),F=Number(v.installRate??0),_=(v.description||"").toString().trim(),L=(v.location||"").toString().trim();return!!N||x>0||I>0||F>0||!!_||!!L};return(be||[]).map(v=>{const N=(v.materials||[]).filter(Yr),x=N.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.supplyRate??_.rate??0),0),I=N.reduce((F,_)=>F+Number(_.quantity||0)*Number(_.installRate??0),0);return{...v,materials:N,supplySubtotal:x,installSubtotal:I,subtotal:x+I}}).filter(v=>(v.materials||[]).length>0),e.jsx(Sa,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Electrical Estimator"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the process to generate your Bill of Quantities with precise calculations"})]}),e.jsx(Ms,{className:"border-border/50",children:e.jsx(Ws,{className:"pt-8 min-h-96",children:e.jsxs(Fl,{mode:"wait",children:[i===1&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Electrical Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a product from your database. After selecting, youll pick the available materials."}),e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto border rounded-lg p-4",children:le.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No door products found in DB."}),e.jsx("div",{className:"text-xs",children:"Tip: Ensure your products have a category/type/name that includes Door."})]}):e.jsx("div",{className:"grid gap-3",children:le.map(v=>{const N=ke(v),x=(v?.id||N).toString(),I=u===x;return e.jsx(Ce,{variant:I?"default":"outline",onClick:()=>ct(v),className:"justify-start h-auto py-4 text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:N||"Unnamed Product"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Be(v)})]})},x)})})})]},"step-select-product"),i===11&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:zv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:qn})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all-groups",checked:(()=>{const v=(bs||[]).map(N=>N.id);return v.length>0&&v.every(N=>Os.includes(N))})(),onCheckedChange:v=>{Ds(v?(bs||[]).map(N=>N.id):[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(bs||[]).map((v,N)=>{const x=Number(Ls[v.id]??v.supplyRate??v.rate??0),I=Number(Us[v.id]??v.installRate??0);let F=Number(Ss[v.id]??(v.quantity||0));const _=F*x,L=F*I;return Ft[v.id]??v.location,jt[v.id]??v.description,e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{checked:Os.includes(v.id),onCheckedChange:()=>{Ds(P=>P.includes(v.id)?P.filter(z=>z!==v.id):[...P,v.id])}})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:N+1}),e.jsx("td",{className:"border px-2 py-1",children:v.productLabel||v.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:e.jsx(Xe,{value:Ft[v.id]??v.location??"",onChange:P=>is(z=>({...z,[v.id]:P.target.value})),placeholder:"Location",className:"w-32 mx-auto"})})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm",children:e.jsx("textarea",{value:jt[v.id]??v.description??"",onChange:P=>kt(z=>({...z,[v.id]:P.target.value})),placeholder:"Group description",className:"w-full min-h-20 p-2 rounded border"})})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{value:es[v.id]??v.unit??"",onChange:P=>zs(z=>({...z,[v.id]:P.target.value})),placeholder:"Unit",className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",value:F,onChange:P=>nn(z=>({...z,[v.id]:Number(P.target.value||0)})),className:"w-20 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:x,onChange:P=>js(z=>({...z,[v.id]:Number(P.target.value||0)})),className:"w-28 mx-auto"})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:I,onChange:P=>Vs(z=>({...z,[v.id]:Number(P.target.value||0)})),className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",L.toFixed(2)]})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #000"},children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:10,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Dn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[!A&&e.jsx(Ce,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Ce,{variant:"destructive",disabled:Os.length===0,onClick:async()=>{if(console.log("Delete selected:",Os),Qs.length>0&&Pe)try{await lt("/api/estimator-step11-groups",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:Os,estimator:"electrical"})});const v=await lt(`/api/estimator-step11-groups?session_id=${Pe}&estimator=electrical`,{headers:{}});if(v.ok){const N=await v.json();Gt(N.items||[])}r({title:"Success",description:"Step 11 data deleted from database!"})}catch(v){console.warn("Failed to delete step 11 from DB",v),r({title:"Error",description:"Failed to delete Step 11 data from database.",variant:"destructive"})}if(be.length===0)if(qs){console.log("Deleting from saved BOQ");const v=Os.map(F=>F.replace("group_","")),N=Array.isArray(qs.materials)?qs.materials:JSON.parse(qs.materials||"[]");console.log("Current materials:",N.length);const x=N.filter(F=>{const _=F.doorType||F.door_type||at?.doorType||at?.door_type||b||"door",L=F.panelType||F.panel_type||at?.panelType||at?.panel_type||p||"",P=F.subOption||F.sub_option||at?.subOption||at?.sub_option||B||"",z=`${_}||${L}||${P}`,ne=v.includes(z);return console.log("Checking material:",F.id||F.name,z,"match:",ne),!ne});console.log("Filtered materials:",x.length);const I={...qs,materials:x};tn(I),lt("/api/boq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}).then(()=>console.log("Saved updated BOQ")).catch(F=>console.error("Error saving BOQ:",F))}else{console.log("Deleting from Step 11 saved materials");const v=Os.map(I=>I.replace("group_","")),x=((Is&&Is.length>0?Is:_e)||[]).filter(I=>{const F=I.doorType||I.door_type||at?.doorType||at?.door_type||b||"door",_=I.panelType||I.panel_type||at?.panelType||at?.panel_type||p||"",L=I.subOption||I.sub_option||at?.subOption||at?.sub_option||B||"",P=`${F}||${_}||${L}`;return!v.includes(P)});dn(x)}else if(be.length>0){console.log("Deleting from accumulated products"),console.log("Accumulated products before:",be.length);let v;if(Os.some(N=>N.startsWith("accumulated_"))){const N=Os.filter(x=>x.startsWith("accumulated_")).map(x=>parseInt(x.replace("accumulated_",""))).sort((x,I)=>I-x);v=[...be],N.forEach(x=>{x>=0&&x<v.length&&v.splice(x,1)})}else{const N=Os.map(x=>x.replace("group_",""));v=be.filter(x=>{const I=`${x.doorType||"door"}||${x.panelType||""}||${x.subOption||""}`,F=N.includes(I);return console.log("Checking product:",x.id,I,"match:",F),!F})}console.log("Accumulated products after:",v.length),He(v),lt("/api/accumulated-products/electrical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:v})}).catch(N=>console.error("Failed to save accumulated products after delete",N))}Ds([])},children:"Delete Selected"}),e.jsx(Ce,{onClick:sr,children:"Add Product"}),e.jsx(Ce,{onClick:ha,disabled:na,children:"Save"}),e.jsx(Ce,{onClick:async()=>{Pt(Os);const v=(Ps||[]).map((N,x)=>{const I=Number(Ls[N.id]??N.supplyRate??N.rate??0),F=Number(Us[N.id]??N.installRate??0);let _=Number(Ss[N.id]??(N.quantity||0));return{s_no:x+1,item:N.name,location:Ft[N.id]??N.location??"",description:jt[N.id]??N.description??"",unit:es[N.id]??N.unit??"",qty:_,supply_rate:I,install_rate:F,supply_amount:_*I,install_amount:_*F}});try{const N=await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=electrical`,{headers:{}});let x=[];N.ok&&(x=(await N.json()).items||[]);const I=v.filter(L=>!x.some(P=>P.item===L.item&&P.description===L.description&&P.unit===L.unit));if(I.length===0){c(12);return}await lt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"electrical",session_id:Pe,items:I})});const _=await(await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=electrical`,{headers:{}})).json();Cn(_.items||[]),r({title:"Success",description:`${I.length} new material(s) saved successfully to database!`}),c(12)}catch(N){console.warn("Failed to save step 12 to DB",N),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Create BOQ"})]})]},"step-finalize-boq"),i===4&&b&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Sub Option:"}),e.jsx("div",{className:"flex flex-col gap-2",children:(Se[b]||[]).map(v=>e.jsx(Ce,{onClick:()=>{U(v),k(null)},className:`w-full text-black ${B===v?"bg-cyan-500":"bg-white"}`,children:v},v))}),b==="flush"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"font-semibold text-white mb-2",children:"Vision Panel Type:"}),e.jsx("div",{className:"flex flex-col gap-2",children:je.map(v=>e.jsx(Ce,{onClick:()=>k(v),className:`w-full text-black ${Q===v?"bg-cyan-500":"bg-white"}`,children:v},v))})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(3),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{onClick:()=>c(5),disabled:!B||b==="flush"&&B==="With Vision Panel"&&!Q,children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step-suboption"),i===5&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Door Dimensions (in feet)"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"count",children:"Count"}),e.jsx(Xe,{id:"count",type:"number",placeholder:"1",value:q||"",onChange:v=>G(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"height",children:"Height"}),e.jsx(Xe,{id:"height",type:"number",placeholder:"7",value:W||"",onChange:v=>he(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"width",children:"Width"}),e.jsx(Xe,{id:"width",type:"number",placeholder:"3",value:Z||"",onChange:v=>ie(v.target.value?parseFloat(v.target.value):null)})]})]}),Y()?.requiresGlazing&&e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx(We,{className:"text-lg font-semibold block mb-4",children:"Glass Dimensions (in inches)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"glassHeight",children:"Glass Height"}),e.jsx(Xe,{id:"glassHeight",type:"number",placeholder:"72",value:ce||"",onChange:v=>ae(v.target.value?parseFloat(v.target.value):null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{htmlFor:"glassWidth",children:"Glass Width"}),e.jsx(Xe,{id:"glassWidth",type:"number",placeholder:"24",value:de||"",onChange:v=>se(v.target.value?parseFloat(v.target.value):null)})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(Y()?.requiresGlazing?4:3),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{disabled:!q||!W||!Z||Y()?.requiresGlazing&&(!ce||!de),onClick:()=>c(6),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step4"),i===6&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Available materials for ",Y()?.label,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Tn,{id:"select-all-materials",checked:re.length===Ne.length&&Ne.length>0,onCheckedChange:v=>{if(v){const N=Ne.map(x=>{const I=s.filter(P=>Gr(P.product)===Gr(x.product)&&Gr(P.name)===Gr(x.name)).map(P=>({id:P.id,brand:$p(P),shopId:P.shopId,rate:P.rate,unit:P.unit,shopName:t.find(z=>z.id===P.shopId)?.name||"Unknown"})),_=Array.from(new Set(I.map(P=>P.brand))).sort()[0]||"Generic",L=I.filter(P=>P.brand===_).sort((P,z)=>(P.rate||0)-(z.rate||0));return{materialId:x.id,selectedBrand:_,selectedShopId:L[0]?.shopId||""}});te(N)}else te([])}}),e.jsx(We,{htmlFor:"select-all-materials",children:"Select All"})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4",children:Ne.length===0?e.jsxs("div",{className:"p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"No materials found for this door type."}),e.jsxs("div",{children:["Door:"," ",b||h||"(not set)"]}),e.jsxs("div",{children:["Searching for keywords:"," ",e.jsx("strong",{children:(b?gR[b]||[b]:[h||""]).join(", ")})]}),e.jsxs("div",{children:["Total materials in store: ",s.length]}),e.jsxs("div",{className:"mt-2",children:["Available products in DB:"," ",Array.from(new Set(s.map(v=>v.product).filter(Boolean))).sort().join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs",children:[e.jsxs("div",{className:"font-medium mb-1",children:["Tip: Check that your materials have the correct"," ",e.jsx("code",{children:"product"})," field in the database."]}),e.jsx("div",{children:'Example for Flush Door: "Flush door", "Flush Door", "BWR", etc.'})]})]}):Ne.map(v=>{const N=re.some(z=>z.materialId===v.id),x=re.find(z=>z.materialId===v.id),I=s.filter(z=>Gr(z.product)===Gr(v.product)&&Gr(z.name)===Gr(v.name)).map(z=>({id:z.id,brand:$p(z),shopId:z.shopId,rate:z.rate,unit:z.unit,shopName:t.find(ne=>ne.id===z.shopId)?.name||"Unknown"})),F=Array.from(new Set(I.map(z=>z.brand))).sort(),L=re.find(z=>z.materialId===v.id)?.selectedBrand||F[0]||"Generic",P=I.filter(z=>z.brand===L).sort((z,ne)=>(z.rate||0)-(ne.rate||0));return e.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Tn,{id:v.id,checked:N,onCheckedChange:()=>bn(v.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:v.id,className:"font-medium cursor-pointer",children:v.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.code}),N&&F.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(We,{className:"text-xs",children:"Select Brand:"}),e.jsxs(mn,{value:L,onValueChange:z=>lr(v.id,z),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:F.map(z=>e.jsx(Ks,{value:z,children:z},z))})]})]}),N&&P.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(We,{className:"text-xs",children:"Select Shop:"}),e.jsxs(mn,{value:x?.selectedShopId||P[0].shopId,onValueChange:z=>Tr(v.id,z),children:[e.jsx(un,{className:"h-8 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:P.map(z=>e.jsxs(Ks,{value:z.shopId||"",children:[z.shopName," - ",z.rate,"/",v.unit,z.rate===P[0].rate&&" (Best)"]},z.shopId))})]})]})]})]})},v.id)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(1),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{disabled:re.length===0,onClick:()=>c(7),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step5"),i===7&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(We,{className:"text-lg font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"space-y-2",children:ye().length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 p-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"col-span-2 font-medium",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),ye().map(v=>{const N=re.find(I=>I.materialId===v.id),x=s.find(I=>I.id===v.id);return e.jsxs("div",{className:$s("p-3 border rounded grid grid-cols-8 items-center"),children:[e.jsx("span",{className:"col-span-2 font-medium",children:v.name}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:N?.selectedBrand||x?.brandName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Xe,{type:"number",value:rt[v.id]?.quantity??v.quantity,onChange:I=>Na(v.id,parseInt(I.target.value||"0",10)),className:"w-20 mx-auto"})}),e.jsx("span",{className:"col-span-1 text-center text-muted-foreground",children:v.unit}),e.jsx("div",{className:"col-span-1 text-center font-semibold",children:v.shopName||"-"}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx(Xe,{type:"number",value:rt[v.id]?.supplyRate??v.rate,onChange:I=>cr(v.id,parseFloat(I.target.value||"0")),className:"w-20 mx-auto"})}),e.jsxs("div",{className:"col-span-1 text-right font-semibold",children:["",((rt[v.id]?.quantity??v.quantity)*((rt[v.id]?.supplyRate??v.rate)+(rt[v.id]?.installRate??0))).toFixed(2)]})]},v.id)})]}):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No materials selected"})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(6),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs(Ce,{onClick:()=>c(8),disabled:ye().length===0,children:["Next: Generate BOM"," ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step6-selected"),i===8&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(lo,{style:{width:"32px",height:"32px"}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||pe()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"DIMENSIONS"}),e.jsxs("p",{style:{fontWeight:600},children:[W," ft  ",Z," ft (Qty: ",q,")"]})]}),K&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLAZING"}),e.jsx("p",{style:{fontWeight:600,textTransform:"capitalize"},children:K})]}),Y()?.requiresGlazing&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"GLASS SIZE"}),e.jsxs("p",{style:{fontWeight:600},children:[ce,'"  ',de,'"']})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",marginBottom:"16px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:"8px"},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(v=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:v==="Qty"||v.includes("Rate")||v.includes("Amount")?"right":"left"},children:v},v))})}),e.jsx("tbody",{children:ye().map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:N+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",fontWeight:500},children:v.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:v.unit}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"center"},children:v.quantity}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right"},children:v.rate}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px"},children:v.shopName}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:"8px",textAlign:"right",fontWeight:600},children:(v.quantity*v.rate).toFixed(2)})]},v.id))})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:"8px",padding:"16px",display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:re.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:ye().reduce((v,N)=>v+N.quantity,0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",we().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end pt-4",children:[e.jsx(Ce,{onClick:()=>c(7),variant:"outline",children:"Back"}),e.jsxs("button",{onClick:oa,className:"flex items-center gap-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[e.jsx(hi,{className:"w-5 h-5"}),"Export Excel"]}),e.jsxs("button",{onClick:pa,className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ce,{onClick:()=>xe(),disabled:ye().length===0,children:["Add to BOM ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]}),e.jsxs("button",{onClick:()=>{c(1),d(""),o(""),j(null),w(null),ee(null),G(1),he(7),ie(3),ae(6),se(2),te([])},className:"flex items-center gap-2 bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg shadow hover:bg-gray-300 transition",children:[e.jsx(Jn,{className:"w-5 h-5"}),"New Estimate"]})]})]},"step7"),i===12&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("img",{src:zv,alt:"logo",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:12},children:qn})})]}),!Ps||Ps.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No finalized BOQ lines found. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:(Ps||[]).map((v,N)=>{const x=Number(Ls[v.id]??v.supplyRate??v.rate??0),I=Number(Us[v.id]??v.installRate??0);let F=Number(Ss[v.id]??(v.quantity||0));const _=F*x,L=F*I,P=Ft[v.id]??v.location??"",z=jt[v.id]??v.description??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:N+1}),e.jsx("td",{className:"border px-2 py-1",children:v.productLabel||v.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:P||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:z||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:es[v.id]??v.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:F}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",x.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",I.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",_.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",L.toFixed(2)]})]},v.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",(Hn||0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Ce,{onClick:async()=>{if(Ys.length>0){r({title:"Data Already Exists",description:"Step 12 data is already saved. Use update if needed.",variant:"destructive"});return}try{const v=await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=electrical`,{headers:{}});let N=[];v.ok&&(N=(await v.json()).items||[]);const I=(Ps||[]).map((L,P)=>{const z=Number(Ls[L.id]??L.supplyRate??L.rate??0),ne=Number(Us[L.id]??L.installRate??0),Ie=Number(Ss[L.id]??(L.quantity||0));return{s_no:P+1,item:L.name,location:Ft[L.id]??L.location??"",description:jt[L.id]??L.description??"",unit:es[L.id]??L.unit??"",qty:Ie,supply_rate:z,install_rate:ne,supply_amount:Ie*z,install_amount:Ie*ne}}).filter(L=>!N.some(P=>P.item===L.item&&P.description===L.description&&P.unit===L.unit));if(I.length===0){r({title:"No New Items",description:"Step 12 data is already saved. No new items to save.",variant:"destructive"});return}await lt("/api/estimator-step12-qa-selection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"electrical",session_id:Pe,items:I})});const _=await(await lt(`/api/estimator-step12-qa-selection?session_id=${Pe}&estimator=electrical`,{headers:{}})).json();Cn(_.items||[]),r({title:"Success",description:"Step 12 QA data saved successfully to database!"})}catch(v){console.warn("Failed to save step 12 to DB",v),r({title:"Error",description:"Failed to save Step 12 data. Please try again.",variant:"destructive"})}},children:"Save Step 12"}),e.jsx(Ce,{onClick:()=>c(1),children:"Add More Products"}),e.jsx(Ce,{onClick:pi,children:"Export Excel"})]})]},"step-qa-boq"),i===10&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Bill No"}),e.jsx(Xe,{value:Pe,onChange:v=>dt(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Bill Date"}),e.jsx(Xe,{type:"date",value:ze,onChange:v=>Tt(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Due Date"}),e.jsx(Xe,{type:"date",value:Je,onChange:v=>vt(v.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Customer Name"}),e.jsx(Xe,{value:Rt,onChange:v=>Zt(v.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Customer Address"}),e.jsx(Xe,{value:bt,onChange:v=>Vt(v.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Terms & Conditions"}),e.jsx(Xe,{value:$e,onChange:v=>St(v.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(We,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Kt,onChange:v=>ws(v.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),ye().map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]}),Kt&&e.jsx(Xe,{placeholder:"Enter description for selected material",value:jt[Kt]||"",onChange:v=>kt(N=>({...N,[Kt]:v.target.value}))})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx("img",{src:zv,alt:"Concept Trunk Interiors",style:{height:60}}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("h2",{style:{margin:0},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",Pe]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{width:"55%",lineHeight:1.5},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap"},children:vs})]}),e.jsxs("div",{style:{width:"40%",lineHeight:1.6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bill Date"})," : ",ze]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Due Date"})," : ",Je]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Terms"})," : ",$e]}),e.jsxs("div",{style:{marginTop:6},children:[e.jsx("strong",{children:"Customer Name"})," : ",Rt]})]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","HSN","Qty","Rate","Supplier","Amount"].map(v=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11},children:v},v))})}),e.jsx("tbody",{children:_e.map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6},children:N+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.id&&jt[v.id]||v.name||"-"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:"7308"}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.quantity}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.rate}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:v.shopName}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:(Number(v.quantity||0)*Number(v.rate||0)||0).toFixed(2)})]},v.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Sub Total"}),e.jsx("td",{style:{textAlign:"right"},children:V.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"SGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Te.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"CGST 9%"}),e.jsx("td",{style:{textAlign:"right"},children:Ye.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Round Off"}),e.jsx("td",{style:{textAlign:"right"},children:Oe.toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",yt.toFixed(2)]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Balance Due"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("strong",{children:["",yt.toFixed(2)]})})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{onClick:()=>c(8),variant:"outline",children:"Back"}),e.jsx(Ce,{onClick:er,children:"Export PDF"})]})]}),i===9&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{variant:"destructive",onClick:kr,disabled:Bs.length===0,children:"Delete Selected"}),e.jsx(Ce,{type:"button",onClick:$a,disabled:_e.length===0,children:"Save"}),e.jsx(Ce,{onClick:async()=>{const v=ye(ft,gt),N=Bs.length>0?v.filter(_=>Bs.includes(_.rowId||`${_.batchId}-${_.id}`)):v,x=N.map(_=>{const L=_.rowId||`${_.batchId||""}-${_.id}`;return{id:_.id,rowId:L,batchId:_.batchId,name:_.name,unit:_.unit,quantity:gt[L]?.quantity??gt[_.id]?.quantity??_.quantity,supplyRate:gt[L]?.supplyRate??gt[_.id]?.supplyRate??_.rate,installRate:gt[L]?.installRate??gt[_.id]?.installRate??_.installRate??0,shopId:_.shopId,shopName:_.shopName,description:jt[L]||jt[_.id]||"",location:Ft[L]||Ft[_.id]||"",doorType:_.doorType,panelType:_.panelType,subOption:_.subOption,glazingType:_.glazingType}});if(x.length===0)return;const I=N[0],F={id:`local-${Date.now()}`,estimator:"electrical",bill_no:Pe,door_type:I?.doorType||at?.doorType||at?.door_type||b,panel_type:I?.panelType||at?.panelType||at?.panel_type||p,sub_option:I?.subOption||at?.subOption||at?.sub_option||B,glazing_type:I?.glazingType||at?.glazingType||at?.glazing_type||K,qty:at?.count||at?.qty||q,height:at?.height||W,width:at?.width||Z,glass_height:at?.glassHeight||at?.glass_height||ce,glass_width:at?.glassWidth||at?.glass_width||de,materials:x,subtotal:x.reduce((_,L)=>_+Number(L.quantity||0)*(Number(L.supplyRate||0)+Number(L.installRate||0)),0),sgst:0,cgst:0,round_off:0,grand_total:0,created_at:new Date().toISOString()};tn(F);try{await Nn()}catch{}Js([]),c(11)},disabled:_e.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{className:"text-sm font-semibold",children:"Saved BOQs"}),jr.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No saved BOQs"}):e.jsx("div",{className:"grid gap-2",children:jr.map(v=>e.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:v.bill_no||`${v.estimator} - ${v.door_type||"Door"}`}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(v.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{onClick:()=>Ma(v),size:"sm",children:"Load"}),e.jsx(Ce,{variant:"destructive",onClick:()=>Yn(v.id),size:"sm",children:"Delete"})]})]},v.id))})]}),e.jsx("div",{id:"boq-pdf",className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all",checked:(()=>{const v=(i===9?ye(ft,gt):ye()).map(N=>N.rowId||N.id);return Bs.length===v.length&&v.length>0})(),onCheckedChange:Pn})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:(()=>{const v=new Map,N=new Map;_e.forEach(F=>{const _=F.doorType||F.door_type||at?.doorType||at?.door_type||b||"door",L=F.panelType||F.panel_type||at?.panelType||at?.panel_type||p||"",P=F.subOption||F.sub_option||at?.subOption||at?.sub_option||"",z=`${_}||${L}||${P}`;if(v.has(z)||v.set(z,[]),v.get(z).push(F),!N.has(z)){const Ie=(v.get(z)||[])[0]?.productLabel||`${L==="panel"?"With Panel":"Without Panel"}  ${_}${P?" ("+P+")":""}`;N.set(z,{label:Ie})}});const x=[];let I=0;for(const[F,_]of v.entries()){const L=_.map(st=>st.rowId||`${st.batchId||""}-${st.id}`),P=L.every(st=>Bs.includes(st)),z=`group_${F}`,ne=jt[z]||"",Ie=Number(Hs[z]??at?.count??at?.qty??q??1);x.push(e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Tn,{id:`group-${F}`,checked:P,onCheckedChange:()=>{Js(P?st=>st.filter(ot=>!L.includes(ot)):st=>Array.from(new Set([...st,...L])))}})}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("strong",{children:N.get(F)?.label})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx(Xe,{placeholder:"Group description",value:ne?.replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"")||"",onChange:st=>kt(ot=>({...ot,[z]:st.target.value})),className:"w-full"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",className:"h-8 text-center",value:Hs[z]??Ie,onChange:st=>{const ot=st.target.value?parseFloat(st.target.value):0;wr(Dt=>({...Dt,[z]:ot})),kt(Dt=>{const rs=(Dt[z]||"").replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();return{...Dt,[z]:rs?rs+`
Qty: `+ot:"Qty: "+ot}})}})}),e.jsx("td",{className:"border px-2 py-1 text-right"}),e.jsx("td",{className:"border px-2 py-1 text-right"})]},`group-${F}`));for(const st of _){I+=1;const ot=st.rowId||`${st.batchId}-${st.id}`,Dt=Number(nt[ot]?.supplyRate??nt[st.id]?.supplyRate??st.rate??0),rs=Number(nt[ot]?.installRate??nt[st.id]?.installRate??st.installRate??0),cs=Dt+rs,Ns=Number(nt[ot]?.quantity??nt[st.id]?.quantity??st.quantity??0),Zs=Ns*cs,Rn=jt[ot]??jt[st.id]??st.description??"",$=String(Rn).replace(/\n?Qty:\s*\d+(?:\.\d+)?\s*$/,"").trim();x.push(e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:I}),e.jsx("td",{className:"border px-2 py-1",children:st.name}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:450,wordBreak:"break-word"},children:e.jsx("textarea",{placeholder:"Description",className:"h-20 w-full p-2 border rounded",value:jt[ot]??jt[st.id]??$,onChange:ve=>kt(Ve=>({...Ve,[ot]:ve.target.value}))})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:es[ot]??es[st.id]??st.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Xe,{type:"number",className:"h-8 text-center",value:Ns,onChange:ve=>Na(ot,ve.target.value?parseFloat(ve.target.value):0)})}),e.jsx("td",{className:"border px-2 py-1 text-right",children:e.jsx(Xe,{type:"number",value:cs,onChange:ve=>{const Ve=parseFloat(ve.target.value||"0"),At=Number(nt[ot]?.supplyRate??nt[st.id]?.supplyRate??Dt),Bt=Math.max(0,Ve-At);cr(ot,At),Ka(ot,Bt)},className:"w-28 mx-auto"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Zs.toFixed(2)]})]},ot))}}return x})()})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(8),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsx(Ce,{onClick:()=>c(10),children:"Finalize PO"}),e.jsxs(Ce,{onClick:pa,children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]},"step-add-to-boq")]})})})]})})}function lG(){const{shops:t,materials:s,products:n}=fi(),{toast:r}=ua(),[i,c]=S.useState(1),[A,u]=S.useState(""),[d,h]=S.useState(null),[o,m]=S.useState(`PLB-${Math.floor(1e3+Math.random()*9e3)}`),[y,p]=S.useState(new Date().toISOString().slice(0,10)),[j,b]=S.useState([]),[w,B]=S.useState({}),[U,Q]=S.useState({}),[k,K]=S.useState({}),[ee,q]=S.useState({}),[G,W]=S.useState({}),[he,Z]=S.useState([]),[ie,ce]=S.useState([]),[ae,de]=S.useState(!1);S.useEffect(()=>{(async()=>{if(o)try{const Ae=await lt(`/api/estimator-step9-items?session_id=${o}&estimator=plumbing`);if(Ae.ok){const le=await Ae.json();Z(le.items||[])}const Qe=await lt(`/api/estimator-step11-groups?session_id=${o}&estimator=plumbing`);if(Qe.ok){const le=await Qe.json();ce(le.items||[])}}catch(Ae){console.warn("Failed to load DB data:",Ae)}})()},[o]);const se=Be=>String(Be||"").toUpperCase(),re=S.useMemo(()=>(n||[]).filter(Be=>Xc(Be)==="plumbing").sort((Be,Ae)=>{const Qe=(Be.name||"").toString(),le=(Ae.name||"").toString();return Qe.localeCompare(le)}),[n]),te=Be=>{const Ae=typeof Be=="string"?Be:Be?.name||"";return Ae?s.filter(Qe=>{const le=se(Qe.product||""),ct=se(Qe.subCategory||""),rt=se(Ae);return!!(le&&rt&&(le.includes(rt)||rt.includes(le))||ct&&rt&&(ct.includes(rt)||rt.includes(ct)))}):[]},be=Be=>{const Ae=s.find(le=>le.id===Be);if(!Ae)return[];const Qe=s.filter(le=>le.name===Ae.name&&le.code===Ae.code);return Array.from(new Set(Qe.map(le=>le.brandName||"Generic"))).sort()},He=(Be,Ae)=>{const Qe=s.find(ct=>ct.id===Be);return Qe?s.filter(ct=>ct.name===Qe.name&&(Ae?(ct.brandName||"Generic")===Ae:!0)).filter((ct,rt,ht)=>ht.findIndex(ft=>ft.shopId===ct.shopId)===rt):[]},Y=j.map(Be=>{const Ae=s.find(ht=>ht.id===Be.materialId),Qe=t.find(ht=>ht.id===Be.selectedShopId),le=w[Ae?.id||""]?.quantity??1,ct=w[Ae?.id||""]?.supplyRate??Ae?.rate??0,rt=w[Ae?.id||""]?.installRate??0;return{...Ae,quantity:le,supplyRate:ct,installRate:rt,shopName:Qe?.name||"Market",supplyAmount:le*ct,installAmount:le*rt}}),me=Y.reduce((Be,Ae)=>Be+(Ae.quantity||0)*((Ae.supplyRate||0)+(Ae.installRate||0)),0),Se=me*.09,je=me*.09,Le=Math.round(me+Se+je)-(me+Se+je),ge=me+Se+je+Le,ye=Be=>{if(j.find(Qe=>Qe.materialId===Be))b(Qe=>Qe.filter(le=>le.materialId!==Be)),B(Qe=>{const le={...Qe};return delete le[Be],le});else{const Qe=te(A).find(le=>le.id===Be);if(Qe){const ct=be(Be)[0]||"Generic",ht=He(Be,ct).sort((ft,Jt)=>(ft.rate||0)-(Jt.rate||0))[0];b(ft=>[...ft,{materialId:Be,selectedShopId:ht?.shopId||"",selectedBrand:ct}]),B(ft=>({...ft,[Be]:{quantity:1,supplyRate:ht?.rate||Qe.rate||0,installRate:0}}))}}},we=async()=>{try{if(!o.trim()){r({title:"Error",description:"Please enter a Bill No.",variant:"destructive"});return}const Be=Y.map((le,ct)=>({session_id:o,estimator:"plumbing",s_no:ct+1,material_id:le.id,name:le.name,productLabel:le.productLabel||null,product_label:le.productLabel||null,unit:le.unit||"pcs",quantity:le.quantity,supply_rate:le.supplyRate,install_rate:le.installRate,shop_id:j.find(rt=>rt.materialId===le.id)?.selectedShopId||"",shop_name:le.shopName,description:U[le.id||""]||"",location:k[le.id||""]||""})),Ae=await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:"plumbing",session_id:o,items:Be})});if(!Ae.ok)throw new Error("Save failed");const Qe=await Ae.json();Z(Qe.items||[]),r({title:"Success",description:"Step 9 saved to database."}),c(11)}catch(Be){console.error("Failed to save step 9",Be),r({title:"Error",description:"Failed to save step 9.",variant:"destructive"})}},Ne=()=>{if(Y.length===0){r({title:"Error",description:"Please select materials first.",variant:"destructive"});return}c(12)},ke=async()=>{de(!0);try{let Be=ie||[];if(o)try{const ht=await lt(`/api/estimator-step11-groups?session_id=${o}&estimator=plumbing`);ht.ok&&(Be=(await ht.json()).items||[],ce(Be))}catch(ht){console.warn("Failed to refresh step11 items",ht)}const Ae=Y.map((ht,ft)=>({estimator:"plumbing",session_id:o,s_no:ft+1,group_key:`plumbing_${ht.id}`,group_id:`group_${ht.id}`,item_name:ht.name,unit:ht.unit||"pcs",quantity:ht.quantity,location:k[ht.id||""]||"",description:U[ht.id||""]||"",supply_rate:ee[ht.id||""]||ht.supplyRate||0,install_rate:G[ht.id||""]||ht.installRate||0,supply_amount:ht.quantity*(ee[ht.id||""]||ht.supplyRate||0),install_amount:ht.quantity*(G[ht.id||""]||ht.installRate||0),supply_subtotal:Y.reduce((Jt,gt)=>Jt+gt.quantity*(ee[gt.id||""]||gt.supplyRate||0),0),install_subtotal:Y.reduce((Jt,gt)=>Jt+gt.quantity*(G[gt.id||""]||gt.installRate||0),0),sgst:Se,cgst:je,round_off:Le,grand_total:ge})),Qe=new Set((Be||[]).map(ht=>ht.group_key)),le=Ae.filter(ht=>!Qe.has(ht.group_key));if(le.length===0){r({title:"No changes",description:"No new items to save."}),de(!1);return}if(!(await lt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:le})})).ok)throw new Error("Save failed");const rt=await lt(`/api/estimator-step11-groups?session_id=${o}&estimator=plumbing`);if(rt.ok){const ht=await rt.json();ce(ht.items||[])}r({title:"Success",description:"Step 11 saved to database."}),de(!1)}catch(Be){console.error("handleSaveStep11",Be),r({title:"Error",description:"Failed to save Step 11.",variant:"destructive"}),de(!1)}};return e.jsx(Sa,{children:e.jsxs("div",{className:"max-w-6xl mx-auto p-4 space-y-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Plumbing Estimator"}),e.jsxs(Fl,{mode:"wait",children:[i===1&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Select Products"}),re.length===0?e.jsx(Ms,{className:"p-6 bg-yellow-50 border-yellow-200",children:e.jsx("p",{className:"text-center text-yellow-800",children:"No plumbing materials available in database"})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:re.map(Be=>{const Ae=Be.name||Be.subcategory||Be.subcategory_name||"",Qe=te(Ae).length;return e.jsx(Ms,{className:"cursor-pointer border-2 hover:border-primary transition-all hover:shadow-lg",onClick:()=>{u(Ae),h(Be),b([]),B({}),c(2)},children:e.jsxs(Ws,{className:"p-6 text-center",children:[e.jsx("p",{className:"font-bold text-lg",children:Ae}),e.jsxs("p",{className:"text-sm text-slate-500",children:[Qe," items available"]})]})},Be.id||Ae)})})})]},"s1"),i===2&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Available materials for ",A,". Best price shop is pre-selected."]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-[600px] overflow-y-auto p-3 border rounded bg-slate-50",children:te(A).map(Be=>{const Ae=j.some(ht=>ht.materialId===Be.id),Qe=j.find(ht=>ht.materialId===Be.id),le=be(Be.id),ct=Qe?.selectedBrand||le[0]||"Generic",rt=He(Be.id,ct);return e.jsxs("div",{className:$s("p-4 border-2 rounded-lg transition-all",Ae?"border-primary bg-white":"border-slate-200 bg-white"),children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Tn,{checked:Ae,onCheckedChange:()=>ye(Be.id),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold",children:Be.name}),e.jsx("p",{className:"text-xs text-slate-500",children:Be.code})]})]}),Ae&&e.jsxs("div",{className:"mt-4 ml-8 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{className:"text-xs",children:"Select Brand"}),e.jsxs(mn,{value:ct,onValueChange:ht=>{b(gt=>gt.map(tt=>tt.materialId===Be.id?{...tt,selectedBrand:ht}:tt));const Jt=He(Be.id,ht).sort((gt,tt)=>(gt.rate||0)-(tt.rate||0))[0];Jt&&b(gt=>gt.map(tt=>tt.materialId===Be.id?{...tt,selectedShopId:Jt.shopId||""}:tt))},children:[e.jsx(un,{className:"h-8",children:e.jsx(gn,{})}),e.jsx(hn,{children:le.map(ht=>e.jsx(Ks,{value:ht,children:ht},ht))})]})]}),e.jsxs("div",{children:[e.jsx(We,{className:"text-xs",children:"Select Shop"}),e.jsxs(mn,{value:Qe?.selectedShopId||"",onValueChange:ht=>b(ft=>ft.map(Jt=>Jt.materialId===Be.id?{...Jt,selectedShopId:ht}:Jt)),children:[e.jsx(un,{className:"h-8",children:e.jsx(gn,{placeholder:"Choose shop"})}),e.jsx(hn,{children:rt.map(ht=>{const ft=t.find(Jt=>Jt.id===ht.shopId);return e.jsxs(Ks,{value:ht.shopId||"",children:[ft?.name||"Unknown","  ",ht.rate]},ht.id)})})]})]})]})]},Be.id)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(1),className:"flex-1",children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(Ce,{disabled:j.length===0,onClick:()=>c(3),className:"flex-1",children:["Review Materials ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"s2"),i===3&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Edit quantities or rates before generating BOQ."}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-900 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-3 text-left",children:"Item"}),e.jsx("th",{className:"border p-3",children:"Brand"}),e.jsx("th",{className:"border p-3",children:"Qty"}),e.jsx("th",{className:"border p-3",children:"Unit"}),e.jsx("th",{className:"border p-3",children:"Shop"}),e.jsx("th",{className:"border p-3 text-right",children:"Rate ()"}),e.jsx("th",{className:"border p-3 text-right",children:"Amount ()"})]})}),e.jsx("tbody",{children:Y.map(Be=>e.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[e.jsx("td",{className:"border p-3 font-bold",children:Be.name}),e.jsx("td",{className:"border p-3 text-center",children:j.find(Ae=>Ae.materialId===Be.id)?.selectedBrand||"Generic"}),e.jsx("td",{className:"border p-3",children:e.jsx(Xe,{type:"number",min:"1",value:w[Be.id||""]?.quantity??Be.quantity,onChange:Ae=>B(Qe=>({...Qe,[Be.id]:{...Qe[Be.id]||{supplyRate:Be.supplyRate,installRate:0},quantity:Number(Ae.target.value)}})),className:"h-8 w-20 text-center"})}),e.jsx("td",{className:"border p-3 text-center",children:Be.unit}),e.jsx("td",{className:"border p-3 text-sm",children:Be.shopName}),e.jsx("td",{className:"border p-3",children:e.jsx(Xe,{type:"number",value:w[Be.id||""]?.supplyRate??Be.supplyRate,onChange:Ae=>B(Qe=>({...Qe,[Be.id]:{...Qe[Be.id]||{quantity:1,installRate:0},supplyRate:Number(Ae.target.value)}})),className:"h-8 w-24 text-right"})}),e.jsxs("td",{className:"border p-3 text-right font-bold",children:["",(Number(w[Be.id||""]?.quantity??Be.quantity)*Number(w[Be.id||""]?.supplyRate??Be.supplyRate??0)).toFixed(2)]})]},Be.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-blue-50 rounded font-bold text-lg",children:[e.jsx("span",{children:"Total Cost"}),e.jsxs("span",{children:["",Y.reduce((Be,Ae)=>Be+Number(w[Ae.id||""]?.quantity??Ae.quantity)*Number(w[Ae.id||""]?.supplyRate??Ae.supplyRate??0),0).toFixed(2)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(2),className:"flex-1",children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(Ce,{onClick:()=>c(8),className:"flex-1",children:["Review BOM ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"s3"),i===8&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-green-600 text-3xl",children:""})}),e.jsx("h2",{className:"text-4xl font-bold",children:"Bill of Materials (BOM)"}),e.jsxs("p",{className:"text-slate-600 mt-2",children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsx(Ms,{className:"p-6 border-slate-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-semibold uppercase tracking-wide",children:"Product Type"}),e.jsx("p",{className:"text-xl font-bold text-slate-900 mt-1",children:A})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-semibold uppercase tracking-wide",children:"Quantities"}),e.jsxs("p",{className:"text-xl font-bold text-slate-900 mt-1",children:[Y.length," Items"]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Materials Schedule"}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-sm bg-white",children:[e.jsx("thead",{className:"bg-slate-100 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left font-semibold text-slate-700",children:"S.No"}),e.jsx("th",{className:"p-3 text-left font-semibold text-slate-700",children:"Description"}),e.jsx("th",{className:"p-3 text-center font-semibold text-slate-700",children:"Unit"}),e.jsx("th",{className:"p-3 text-center font-semibold text-slate-700",children:"Qty"}),e.jsx("th",{className:"p-3 text-right font-semibold text-slate-700",children:"Rate (#)"}),e.jsx("th",{className:"p-3 text-left font-semibold text-slate-700",children:"Supplier"}),e.jsx("th",{className:"p-3 text-right font-semibold text-slate-700",children:"Amount ()"})]})}),e.jsx("tbody",{children:Y.map((Be,Ae)=>e.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[e.jsx("td",{className:"p-3",children:Ae+1}),e.jsx("td",{className:"p-3 font-medium",children:Be.name}),e.jsx("td",{className:"p-3 text-center",children:Be.unit}),e.jsx("td",{className:"p-3 text-center",children:w[Be.id||""]?.quantity??Be.quantity}),e.jsx("td",{className:"p-3 text-right",children:Number(w[Be.id||""]?.supplyRate??Be.supplyRate??0).toFixed(2)}),e.jsx("td",{className:"p-3",children:Be.shopName||"Market"}),e.jsx("td",{className:"p-3 text-right font-bold",children:(Number(w[Be.id||""]?.quantity??Be.quantity)*Number(w[Be.id||""]?.supplyRate??Be.supplyRate??0)).toFixed(2)})]},Be.id))})]})})]}),e.jsx(Ms,{className:"p-6 bg-slate-50 border-slate-200",children:e.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-600 font-semibold uppercase",children:"Total Materials"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-2",children:Y.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-600 font-semibold uppercase",children:"Total Quantity"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-2",children:Y.reduce((Be,Ae)=>Be+(w[Ae.id||""]?.quantity??Ae.quantity),0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-600 font-semibold uppercase",children:"Grand Total"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:["",me.toFixed(2)]})]})]})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(Ce,{variant:"outline",onClick:()=>c(3),children:"Back"}),e.jsx(Ce,{className:"bg-green-600 hover:bg-green-700",children:"Export Excel"}),e.jsx(Ce,{className:"bg-blue-600 hover:bg-blue-700",children:"Export PDF"}),e.jsxs(Ce,{onClick:()=>c(9),className:"bg-blue-600 hover:bg-blue-700",children:["Add to BOM ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]}),e.jsx(Ce,{variant:"outline",onClick:()=>{c(1),b([]),B({}),Q({}),K({}),q({}),W({})},children:"New Estimate"})]})]},"s8"),i===9&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Add to BOQ"}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Plumbing Estimator"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(Ce,{variant:"destructive",children:"Delete Selected"}),e.jsx(Ce,{onClick:we,className:"bg-slate-600 hover:bg-slate-700",children:"Save"}),e.jsx(Ce,{onClick:()=>c(11),className:"bg-blue-600 hover:bg-blue-700",children:"Add to BOQ"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Saved BOQs"}),he.length===0?e.jsx("p",{className:"text-slate-500",children:"No saved BOQs"}):null,e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-sm bg-white",children:[e.jsx("thead",{className:"bg-slate-100 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:e.jsx(Tn,{})}),e.jsx("th",{className:"p-3 text-left font-semibold",children:"S.No"}),e.jsx("th",{className:"p-3 text-left font-semibold",children:"Item"}),e.jsx("th",{className:"p-3 text-left font-semibold",children:"Description"}),e.jsx("th",{className:"p-3 font-semibold",children:"Unit"}),e.jsx("th",{className:"p-3 font-semibold",children:"Qty"}),e.jsx("th",{className:"p-3 font-semibold",children:"Rate"}),e.jsx("th",{className:"p-3 font-semibold",children:"Amount"})]})}),e.jsx("tbody",{children:Y.map((Be,Ae)=>e.jsxs(Vo.Fragment,{children:[e.jsxs("tr",{className:"border-b bg-slate-50",children:[e.jsx("td",{className:"p-3",children:e.jsx(Tn,{})}),e.jsxs("td",{colSpan:7,className:"p-3",children:[e.jsxs("p",{className:"font-bold text-slate-900",children:[Ae+1,". ",Be.name]}),U[Be.id||""]&&e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Group description"})]})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{}),e.jsx("td",{className:"p-3 text-center",children:Ae+1}),e.jsx("td",{className:"p-3 font-medium",children:Be.name}),e.jsx("td",{className:"p-3",children:e.jsx("textarea",{value:U[Be.id||""]||"",onChange:Qe=>Q(le=>({...le,[Be.id]:Qe.target.value})),placeholder:"Description",className:"w-full h-12 p-2 rounded border text-xs"})}),e.jsx("td",{className:"p-3 text-center",children:Be.unit}),e.jsx("td",{className:"p-3",children:e.jsx(Xe,{type:"number",value:w[Be.id||""]?.quantity??Be.quantity,onChange:Qe=>B(le=>({...le,[Be.id]:{...le[Be.id]||{supplyRate:Be.supplyRate,installRate:0},quantity:Number(Qe.target.value)}})),className:"h-8 w-20 text-center"})}),e.jsx("td",{className:"p-3",children:e.jsx(Xe,{type:"number",value:w[Be.id||""]?.supplyRate??Be.supplyRate,onChange:Qe=>B(le=>({...le,[Be.id]:{...le[Be.id]||{quantity:1,installRate:0},supplyRate:Number(Qe.target.value)}})),className:"h-8 w-24 text-right"})}),e.jsxs("td",{className:"p-3 text-right font-bold",children:["",(Number(w[Be.id||""]?.quantity??Be.quantity)*Number(w[Be.id||""]?.supplyRate??Be.supplyRate??0)).toFixed(2)]})]})]},Be.id))})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>c(8),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsx(Ce,{onClick:()=>c(10),className:"bg-blue-600 hover:bg-blue-700",children:"Finalize PO"}),e.jsxs(Ce,{className:"bg-blue-600 hover:bg-blue-700",children:["Export PDF ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"s9"),i===10&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Finalize Bill"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-slate-50 rounded border",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Bill No"}),e.jsx(Xe,{value:o,onChange:Be=>m(Be.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Bill Date"}),e.jsx(Xe,{type:"date",value:y,onChange:Be=>p(Be.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Due Date"}),e.jsx(Xe,{type:"date",placeholder:"mm/dd/yyyy"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Customer Name"}),e.jsx(Xe,{placeholder:"Enter customer name"})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Customer Address"}),e.jsx(Xe,{placeholder:"Enter customer address"})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Terms & Conditions"}),e.jsx(Xe,{defaultValue:"50% Advance and 50% on Completion"})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Material Description Entry"}),e.jsxs(mn,{children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select Material"})}),e.jsx(hn,{children:Y.map(Be=>e.jsx(Ks,{value:Be.id||"",children:Be.name},Be.id))})]})]}),e.jsxs("div",{className:"border-t-2 pt-6 mt-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"w-32 h-20 bg-black rounded flex items-center justify-center text-white font-bold text-xs text-center",children:"PLUMBING"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"font-bold text-sm",children:"PLUMBING ESTIMATOR"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-600",children:"BILL"}),e.jsx("p",{className:"font-bold",children:o})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm mb-2",children:"Concept Trunk Interiors"}),e.jsx("p",{className:"text-xs",children:"12/36A, Indira Nagar"}),e.jsx("p",{className:"text-xs",children:"Medavakkam"}),e.jsx("p",{className:"text-xs",children:"Chennai  600100"}),e.jsx("p",{className:"text-xs",children:"GSTIN: 33ASOPS5560M1Z1"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-slate-600",children:["Bill Date: ",y]}),e.jsx("p",{className:"text-xs text-slate-600",children:"Due Date"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Terms: 50% Advance and 50% on Completion"}),e.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Customer Name"})]})]}),e.jsxs("div",{className:"border-t pt-4 mb-6 text-sm",children:[e.jsx("p",{className:"font-bold mb-2",children:"Bill From"}),e.jsx("p",{className:"font-bold",children:"New TamilNadu Steel"}),e.jsx("p",{className:"text-xs",children:"Chennai"}),e.jsx("p",{className:"text-xs",children:"Tamil Nadu"}),e.jsx("p",{className:"text-xs",children:"600100"})]}),e.jsx("div",{className:"overflow-x-auto border rounded mb-6",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-slate-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"S.No"}),e.jsx("th",{className:"p-2 text-left",children:"Item"}),e.jsx("th",{className:"p-2 text-left",children:"Description"}),e.jsx("th",{className:"p-2",children:"HSN"}),e.jsx("th",{className:"p-2",children:"Qty"}),e.jsx("th",{className:"p-2 text-right",children:"Rate"}),e.jsx("th",{className:"p-2 text-left",children:"Supplier"}),e.jsx("th",{className:"p-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:Y.map((Be,Ae)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:Ae+1}),e.jsx("td",{className:"p-2",children:Be.name}),e.jsx("td",{className:"p-2",children:U[Be.id||""]||Be.name}),e.jsx("td",{className:"p-2",children:"7308"}),e.jsx("td",{className:"p-2",children:w[Be.id||""]?.quantity??Be.quantity}),e.jsx("td",{className:"p-2 text-right",children:Number(w[Be.id||""]?.supplyRate??Be.supplyRate??0).toFixed(2)}),e.jsx("td",{className:"p-2",children:Be.shopName||"Market"}),e.jsx("td",{className:"p-2 text-right",children:(Number(w[Be.id||""]?.quantity??Be.quantity)*Number(w[Be.id||""]?.supplyRate??Be.supplyRate??0)).toFixed(2)})]},Be.id))})]})}),e.jsxs("div",{className:"flex justify-end gap-32 text-sm mb-6 font-bold",children:[e.jsxs("div",{children:[e.jsx("p",{children:"Sub Total"}),e.jsx("p",{children:"SGST 9%"}),e.jsx("p",{children:"CGST 9%"}),e.jsx("p",{children:"Round Off"}),e.jsx("p",{className:"border-t pt-1",children:"Total"}),e.jsx("p",{children:"Balance Due"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:["",me.toFixed(2)]}),e.jsxs("p",{children:["",Se.toFixed(2)]}),e.jsxs("p",{children:["",je.toFixed(2)]}),e.jsxs("p",{children:["",Le.toFixed(2)]}),e.jsxs("p",{className:"border-t pt-1",children:["",ge.toFixed(2)]}),e.jsxs("p",{children:["",ge.toFixed(2)]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-xs",children:"Authorized Signature"}),e.jsx("div",{className:"h-20"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsxs(Ce,{onClick:()=>c(11),className:"bg-blue-600 hover:bg-blue-700",children:["Continue ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]}),e.jsxs(Ce,{className:"bg-blue-600 hover:bg-blue-700",children:["Export PDF ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"s10"),i===11&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-24 h-24 bg-black rounded flex items-center justify-center text-white font-bold text-xs text-center",children:"PLUMBING"}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-wide",children:"PLUMBING ESTIMATOR"}),e.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:new Date().toISOString().slice(0,10)})})]}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-xs bg-white",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-slate-100 border-b",children:[e.jsx("th",{className:"p-2 text-left",children:"S.No"}),e.jsx("th",{className:"p-2 text-left",children:"Item"}),e.jsx("th",{className:"p-2 text-left",children:"Location"}),e.jsx("th",{className:"p-2 text-left",children:"Description"}),e.jsx("th",{className:"p-2",children:"Unit"}),e.jsx("th",{className:"p-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"p-2 text-center border-l",children:"Rate"}),e.jsx("th",{colSpan:2,className:"p-2 text-center border-l",children:"Amount"})]}),e.jsxs("tr",{className:"bg-slate-50 border-b",children:[e.jsx("th",{colSpan:6}),e.jsx("th",{className:"p-2 border-l text-center text-xs font-semibold",children:"Supply"}),e.jsx("th",{className:"p-2 text-center text-xs font-semibold",children:"Installation"}),e.jsx("th",{className:"p-2 border-l text-center text-xs font-semibold",children:"Supply"}),e.jsx("th",{className:"p-2 text-center text-xs font-semibold",children:"Installation"})]})]}),e.jsx("tbody",{children:Y.map((Be,Ae)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-bold",children:Ae+1}),e.jsx("td",{className:"p-2 font-bold",children:Be.name}),e.jsx("td",{className:"p-2",children:e.jsx(Xe,{value:k[Be.id||""]||"",onChange:Qe=>K(le=>({...le,[Be.id]:Qe.target.value})),placeholder:"Location",className:"h-7 text-xs p-1"})}),e.jsx("td",{className:"p-2",children:e.jsx("textarea",{value:U[Be.id||""]||"",onChange:Qe=>Q(le=>({...le,[Be.id]:Qe.target.value})),placeholder:"Description",className:"w-full h-12 p-1 rounded border text-xs"})}),e.jsx("td",{className:"p-2 text-center",children:Be.unit}),e.jsx("td",{className:"p-2 text-center",children:w[Be.id||""]?.quantity??Be.quantity}),e.jsx("td",{className:"p-2 border-l",children:e.jsx(Xe,{type:"number",value:ee[Be.id||""]||(w[Be.id||""]?.supplyRate??Be.supplyRate??0),onChange:Qe=>q(le=>({...le,[Be.id]:Number(Qe.target.value)})),className:"h-7 text-xs p-1 text-right w-20"})}),e.jsx("td",{className:"p-2",children:e.jsx(Xe,{type:"number",value:G[Be.id||""]||0,onChange:Qe=>W(le=>({...le,[Be.id]:Number(Qe.target.value)})),className:"h-7 text-xs p-1 text-right w-20"})}),e.jsxs("td",{className:"p-2 border-l text-right font-bold",children:["",(Number(w[Be.id||""]?.quantity??Be.quantity)*Number(ee[Be.id||""]||(w[Be.id||""]?.supplyRate??Be.supplyRate??0))).toFixed(2)]}),e.jsxs("td",{className:"p-2 text-right font-bold",children:["",(Number(w[Be.id||""]?.quantity??Be.quantity)*Number(G[Be.id||""]||0)).toFixed(2)]})]},Be.id))})]})}),e.jsx("div",{className:"text-right p-4 bg-slate-50 rounded border",children:e.jsxs("p",{className:"font-bold text-slate-900",children:["Subtotal ",e.jsxs("span",{className:"ml-8",children:["",me.toFixed(2)]})]})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(Ce,{variant:"outline",onClick:()=>c(9),children:"Back"}),e.jsx(Ce,{variant:"destructive",children:"Delete Selected"}),e.jsx(Ce,{className:"bg-blue-600 hover:bg-blue-700",children:"Add Product"}),e.jsx(Ce,{onClick:ke,disabled:ae,className:"bg-slate-600 hover:bg-slate-700",children:"Save"}),e.jsx(Ce,{onClick:Ne,className:"bg-blue-600 hover:bg-blue-700",children:"Create BOQ"})]})]},"s11"),i===12&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:24},children:[e.jsx("div",{style:{fontSize:20,fontWeight:700,width:56,height:56,backgroundColor:"#000",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:8},children:"PLB"}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:24,fontWeight:700},children:"PLUMBING ESTIMATOR"}),e.jsx("div",{style:{fontSize:13,color:"#666",marginTop:4},children:"QA BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:14,fontWeight:600},children:y})})]}),Y.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No materials selected. Complete Step 11 first."})}):e.jsx("div",{className:"overflow-x-auto border rounded-lg p-2",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm w-full",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Location"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsx("tbody",{children:Y.map((Be,Ae)=>{const Qe=Number(ee[Be.id||""]||(w[Be.id||""]?.supplyRate??Be.supplyRate??0)),le=Number(G[Be.id||""]||0),ct=Number(w[Be.id||""]?.quantity??Be.quantity??0),rt=ct*Qe,ht=ct*le,ft=k[Be.id||""]||"",Jt=U[Be.id||""]||"";return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:Ae+1}),e.jsx("td",{className:"border px-2 py-1",children:Be.productLabel||Be.name}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("div",{className:"text-sm",children:ft||""})}),e.jsx("td",{className:"border px-2 py-1",style:{maxWidth:650,wordBreak:"break-word"},children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:Jt||""})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Be.unit}),e.jsx("td",{className:"border px-2 py-1 text-center",children:ct}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",Qe.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",le.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",rt.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",ht.toFixed(2)]})]},Be.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-right",colSpan:9,children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{className:"border px-2 py-1 text-right font-medium",children:["",Y.reduce((Be,Ae)=>{const Qe=Number(w[Ae.id||""]?.quantity??Ae.quantity??0),le=Number(G[Ae.id||""]||0);return Be+Qe*le},0).toFixed(2)]})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(Ce,{variant:"outline",onClick:()=>c(11),children:"Back"}),e.jsx(Ce,{onClick:ke,disabled:ae,className:"bg-blue-600 hover:bg-blue-700",children:"Save to DB"}),e.jsx(Ce,{onClick:()=>{c(1),b([]),B({}),Q({}),K({}),q({}),W({})},className:"bg-blue-600 hover:bg-blue-700",children:"Add More Products"}),e.jsx(Ce,{className:"bg-blue-600 hover:bg-blue-700",children:"Export Excel"})]})]},"s12")]})]})})}const cG="/image.png";function Lj({materials:t,estimatorTitle:s,onBack:n,storeShops:r=[],selectedMaterials:i=[],materialDescriptions:c={},onMaterialDescriptionsChange:A}){const[u,d]=S.useState(""),[h,o]=S.useState(new Date().toISOString().slice(0,10)),[m,y]=S.useState(""),[p,j]=S.useState("50% Advance and 50% on Completion"),[b,w]=S.useState(""),[B,U]=S.useState(""),[Q,k]=S.useState(""),[K,ee]=S.useState(""),[q,G]=S.useState(c);S.useEffect(()=>{if(t.length>0&&r.length>0&&i.length>0){const de=i[0]?.selectedShopId,se=r.find(re=>re.id===de);if(se){const re=[se.name||"",se.address||"",se.area||"",se.city||"",se.state||"",se.pincode||"",se.gstin?`GSTIN: ${se.gstin}`:"",se.phone?`Ph: ${se.phone}`:""].filter(Boolean);k(re.join(`
`))}}},[t,r,i]);const W=t.reduce((de,se)=>de+se.quantity*se.rate,0),he=W*.09,Z=W*.09,ie=Math.round((W+he+Z)*100)/100-(W+he+Z),ce=W+he+Z+ie,ae=async()=>{const de=document.getElementById("boq-final-pdf");if(!de){alert("Final BOQ content not found");return}const se=(await Yc(async()=>{const{default:re}=await Promise.resolve().then(()=>wu);return{default:re}},void 0)).default;se().set({margin:10,filename:`BOQ-${u||new Date().getTime()}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(de).save()};return e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Bill No"}),e.jsx(Xe,{value:u,onChange:de=>d(de.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Bill Date"}),e.jsx(Xe,{type:"date",value:h,onChange:de=>o(de.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Due Date"}),e.jsx(Xe,{type:"date",value:m,onChange:de=>y(de.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(We,{children:"Customer Name"}),e.jsx(Xe,{value:b,onChange:de=>w(de.target.value)})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Customer Address"}),e.jsx(Xe,{value:B,onChange:de=>U(de.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(We,{children:"Terms & Conditions"}),e.jsx(Xe,{value:p,onChange:de=>j(de.target.value)})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md bg-slate-50",children:[e.jsx(We,{className:"font-semibold",children:"Material Description Entry"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:K,onChange:de=>ee(de.target.value),children:[e.jsx("option",{value:"",children:"Select Material"}),t.map(de=>e.jsx("option",{value:de.id,children:de.name},de.id))]}),K&&e.jsx(Xe,{placeholder:"Enter description for selected material",value:q[K]||"",onChange:de=>{const se={...q,[K]:de.target.value};G(se),A?.(se)}})]}),e.jsxs("div",{id:"boq-final-pdf",style:{width:"210mm",minHeight:"297mm",padding:"20mm",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{width:"55%",display:"flex",gap:12},children:[e.jsx("img",{src:cG,alt:"Concept Trunk Interiors",style:{height:60,flexShrink:0}}),e.jsxs("div",{style:{lineHeight:1.4},children:[e.jsx("strong",{children:"Concept Trunk Interiors"}),e.jsx("br",{}),"12/36A, Indira Nagar",e.jsx("br",{}),"Medavakkam",e.jsx("br",{}),"Chennai  600100",e.jsx("br",{}),"GSTIN: 33ASOPS5560M1Z1",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Bill From"}),e.jsx("br",{}),e.jsx("pre",{style:{margin:0,fontFamily:"Arial",whiteSpace:"pre-wrap",fontSize:11},children:Q})]})]}),e.jsxs("div",{style:{textAlign:"right",width:"40%"},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:16},children:"BILL"}),e.jsxs("div",{children:["Bill No: ",u||"-"]}),e.jsxs("div",{children:["Bill Date: ",h&&new Date(h).toLocaleDateString("en-GB")]}),e.jsxs("div",{children:["Due Date: ",m&&new Date(m).toLocaleDateString("en-GB")]}),e.jsxs("div",{style:{marginTop:6},children:["Terms: ",p]}),e.jsxs("div",{style:{marginTop:6},children:["Customer: ",b]})]})]}),e.jsx("hr",{style:{margin:"10px 0"}}),e.jsxs("div",{style:{marginBottom:12,lineHeight:1.5},children:[e.jsx("strong",{style:{fontSize:12},children:"Bill To:"}),e.jsxs("div",{style:{fontSize:11,marginTop:4},children:[b,e.jsx("br",{}),B]})]}),e.jsxs("table",{style:{width:"100%",marginTop:20,borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:["S.No","Item","Description","Unit","Qty","Rate","Amount"].map(de=>e.jsx("th",{style:{border:"1px solid #000",padding:6,background:"#000",color:"#fff",fontSize:11,textAlign:de==="Qty"||de==="Rate"||de==="Amount"?"right":"left"},children:de},de))})}),e.jsx("tbody",{children:t.map((de,se)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"center"},children:se+1}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:de.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6},children:q[de.id]||de.name}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"center"},children:de.unit}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:Number(de.quantity||0).toFixed(0)}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right"},children:Number(de.rate||0).toFixed(2)}),e.jsx("td",{style:{border:"1px solid #000",padding:6,textAlign:"right",fontWeight:600},children:(Number(de.quantity||0)*Number(de.rate||0)).toFixed(2)})]},de.id))})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16},children:e.jsx("table",{style:{width:300,borderCollapse:"collapse"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11},children:"Sub Total"}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:11},children:Number(W||0).toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11},children:"SGST 9%"}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:11},children:Number(he||0).toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11},children:"CGST 9%"}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:11},children:Number(Z||0).toFixed(2)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11},children:"Round Off"}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:11},children:Number(ie||0).toFixed(2)})]}),e.jsxs("tr",{style:{borderTop:"2px solid #000",borderBottom:"2px solid #000"},children:[e.jsx("td",{style:{padding:"6px 8px",textAlign:"left",fontSize:11,fontWeight:"bold"},children:"Total"}),e.jsxs("td",{style:{padding:"6px 8px",textAlign:"right",fontSize:12,fontWeight:"bold"},children:["",Number(ce||0).toFixed(2)]})]})]})})}),e.jsxs("div",{style:{marginTop:50},children:[e.jsx("div",{style:{width:200,borderTop:"1px solid #000"}}),e.jsx("div",{children:"Authorized Signature"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{onClick:n,variant:"outline",children:"Back"}),e.jsx(Ce,{onClick:ae,children:"Export PDF"})]})]})}function dG(){const[t,s]=S.useState(1),[n,r]=S.useState(""),[i,c]=S.useState([]),{shops:A}=fi(),[u,d]=S.useState({}),[h,o]=S.useState(""),m=()=>{const y=parseFloat(n)||0;let p=[];p.push({item:"MS Pipe/Tube",description:"Railing / Structural",quantity:y,unit:"rft"}),p.push({item:"Base Plates",description:"Mounting",quantity:Math.ceil(y/4),unit:"nos"}),p.push({item:"Fasteners / Bolts",description:"Fixing",quantity:Math.ceil(y/4)*4,unit:"nos"}),p.push({item:"Paint",description:"Protective coating",quantity:Math.ceil(y/20),unit:"liters"}),c(p),s(2)};return e.jsx(Sa,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading text-primary",children:"MS Work Estimator"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate Mild Steel work requirements."})]}),e.jsx(Ms,{className:"border-border/50 shadow-lg",children:e.jsx(Ws,{className:"p-6",children:e.jsxs(Fl,{mode:"wait",children:[t===1&&e.jsxs(Es.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Step 1: Dimensions"}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Total Running Feet"}),e.jsx(Xe,{type:"number",value:n,onChange:y=>r(y.target.value),placeholder:"e.g. 50"})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(Ce,{onClick:m,className:"w-40 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Tf,{className:"mr-2 h-4 w-4"})," Calculate"]})})]},"s1"),t===2&&e.jsxs(Es.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto text-blue-500",children:e.jsx(Tf,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-2xl font-bold",children:"Material Requirements"})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 bg-muted p-3 text-sm font-medium",children:[e.jsx("div",{className:"col-span-8",children:"Item Description"}),e.jsx("div",{className:"col-span-4 text-right",children:"Qty"})]}),i.map((y,p)=>e.jsxs("div",{className:"grid grid-cols-12 p-4 border-b border-border/50 text-sm items-center",children:[e.jsxs("div",{className:"col-span-8",children:[e.jsx("div",{className:"font-medium text-foreground",children:y.item}),e.jsx("div",{className:"text-xs text-muted-foreground",children:y.description})]}),e.jsxs("div",{className:"col-span-4 text-right font-mono text-lg",children:[y.quantity.toFixed(1)," ",e.jsx("span",{className:"text-xs text-muted-foreground",children:y.unit})]})]},p))]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsx(Ce,{variant:"outline",onClick:()=>s(1),className:"w-32",children:"Start Over"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ia,{href:"/item-master",children:e.jsxs(Ce,{className:"w-48 bg-primary text-primary-foreground",children:["Select Materials ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})}),e.jsx(Ce,{onClick:()=>s(3),className:"w-40",children:"Generate BOQ"})]})]})]},"s2"),t===3&&e.jsx(Lj,{materials:i.map((y,p)=>({id:String(p),name:y.item,quantity:y.quantity,unit:y.unit,rate:0,shopName:"Computed"})),estimatorTitle:"MS Work Estimator",onBack:()=>s(2),storeShops:A,selectedMaterials:[],materialDescriptions:u,onMaterialDescriptionsChange:d})]})})})]})})}function AG(){const[t,s]=S.useState(1),[n,r]=S.useState(""),[i,c]=S.useState([]),{shops:A}=fi(),[u,d]=S.useState({}),[h,o]=S.useState(""),m=()=>{const y=parseFloat(n)||0;let p=[];p.push({item:"SS 304 Pipe / Tube",description:"Railing / Balustrade",quantity:y,unit:"rft"}),p.push({item:"SS Base Plates",description:"Mounting",quantity:Math.ceil(y/4),unit:"nos"}),p.push({item:"SS Fasteners",description:"Fixing",quantity:Math.ceil(y/4)*4,unit:"nos"}),p.push({item:"Polishing",description:"Finishing",quantity:Math.ceil(y/20),unit:"set"}),c(p),s(2)};return e.jsx(Sa,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading text-primary",children:"SS Work Estimator"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate Stainless Steel work requirements."})]}),e.jsx(Ms,{className:"border-border/50 shadow-lg",children:e.jsx(Ws,{className:"p-6",children:e.jsxs(Fl,{mode:"wait",children:[t===1&&e.jsxs(Es.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Step 1: Dimensions"}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Total Running Feet of Railing"}),e.jsx(Xe,{type:"number",value:n,onChange:y=>r(y.target.value),placeholder:"e.g. 50"})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(Ce,{onClick:m,className:"w-40 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Tf,{className:"mr-2 h-4 w-4"})," Calculate"]})})]},"s1"),t===2&&e.jsxs(Es.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto text-blue-500",children:e.jsx(Tf,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-2xl font-bold",children:"Material Requirements"})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 bg-muted p-3 text-sm font-medium",children:[e.jsx("div",{className:"col-span-8",children:"Item Description"}),e.jsx("div",{className:"col-span-4 text-right",children:"Qty"})]}),i.map((y,p)=>e.jsxs("div",{className:"grid grid-cols-12 p-4 border-b border-border/50 text-sm items-center",children:[e.jsxs("div",{className:"col-span-8",children:[e.jsx("div",{className:"font-medium text-foreground",children:y.item}),e.jsx("div",{className:"text-xs text-muted-foreground",children:y.description})]}),e.jsxs("div",{className:"col-span-4 text-right font-mono text-lg",children:[y.quantity.toFixed(1)," ",e.jsx("span",{className:"text-xs text-muted-foreground",children:y.unit})]})]},p))]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsx(Ce,{variant:"outline",onClick:()=>s(1),className:"w-32",children:"Start Over"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ia,{href:"/item-master",children:e.jsxs(Ce,{className:"w-48 bg-primary text-primary-foreground",children:["Select Materials ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})}),e.jsx(Ce,{onClick:()=>s(3),className:"w-40",children:"Generate BOQ"})]})]})]},"s2"),t===3&&e.jsx(Lj,{materials:i.map((y,p)=>({id:String(p),name:y.item,quantity:y.quantity,unit:y.unit,rate:0,shopName:"Computed"})),estimatorTitle:"SS Work Estimator",onBack:()=>s(2),storeShops:A,selectedMaterials:[],materialDescriptions:u,onMaterialDescriptionsChange:d})]})})})]})})}function uG(){const[t,s]=S.useState(1),[n,r]=S.useState(""),[i,c]=S.useState([]),{shops:A}=fi(),[u,d]=S.useState({}),[h,o]=S.useState(""),m=()=>{const y=parseFloat(n)||0;let p=[];p.push({item:"Sprinkler Points",description:"1 per 100 sq.ft",quantity:Math.ceil(y/100),unit:"nos"}),p.push({item:"MS Pipe 25mm",description:"Distribution line",quantity:Math.ceil(y/100)*10,unit:"rft"}),p.push({item:"Fire Extinguishers",description:"1 per 1000 sq.ft",quantity:Math.ceil(y/1e3),unit:"nos"}),p.push({item:"Smoke Detectors",description:"1 per 400 sq.ft",quantity:Math.ceil(y/400),unit:"nos"}),c(p),s(2)};return e.jsx(Sa,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading text-primary",children:"Fire-Fighting Estimator"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate fire safety system requirements."})]}),e.jsx(Ms,{className:"border-border/50 shadow-lg",children:e.jsx(Ws,{className:"p-6",children:e.jsxs(Fl,{mode:"wait",children:[t===1&&e.jsxs(Es.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Step 1: Floor Area"}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Total Floor Area (sq.ft)"}),e.jsx(Xe,{type:"number",value:n,onChange:y=>r(y.target.value),placeholder:"e.g. 2000"})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(Ce,{onClick:m,className:"w-40 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Tf,{className:"mr-2 h-4 w-4"})," Calculate"]})})]},"s1"),t===2&&e.jsxs(Es.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto text-blue-500",children:e.jsx(Tf,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-2xl font-bold",children:"Material Requirements"})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 bg-muted p-3 text-sm font-medium",children:[e.jsx("div",{className:"col-span-8",children:"Item Description"}),e.jsx("div",{className:"col-span-4 text-right",children:"Qty"})]}),i.map((y,p)=>e.jsxs("div",{className:"grid grid-cols-12 p-4 border-b border-border/50 text-sm items-center",children:[e.jsxs("div",{className:"col-span-8",children:[e.jsx("div",{className:"font-medium text-foreground",children:y.item}),e.jsx("div",{className:"text-xs text-muted-foreground",children:y.description})]}),e.jsxs("div",{className:"col-span-4 text-right font-mono text-lg",children:[y.quantity.toFixed(1)," ",e.jsx("span",{className:"text-xs text-muted-foreground",children:y.unit})]})]},p))]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsx(Ce,{variant:"outline",onClick:()=>s(1),className:"w-32",children:"Start Over"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ia,{href:"/item-master",children:e.jsxs(Ce,{className:"w-48 bg-primary text-primary-foreground",children:["Select Materials ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})}),e.jsx(Ce,{onClick:()=>s(3),className:"w-40",children:"Generate BOQ"})]})]})]},"s2"),t===3&&e.jsx(Lj,{materials:i.map((y,p)=>({id:String(p),name:y.item,quantity:y.quantity,unit:y.unit,rate:0,shopName:"Computed"})),estimatorTitle:"Fire Fighting Estimator",onBack:()=>s(2),storeShops:A,selectedMaterials:[],materialDescriptions:u,onMaterialDescriptionsChange:d})]})})})]})})}const hG="/image.png";function fG(){const[,t]=tO("/estimators/:subcategory"),[,s]=co(),n=t?.subcategory?decodeURIComponent(t.subcategory):"",{shops:r,materials:i,products:c}=fi(),{toast:A}=ua(),[u,d]=S.useState(1),[h,o]=S.useState(""),[m,y]=S.useState(null),[p,j]=S.useState(`${n.toUpperCase().slice(0,3)}-${Math.floor(1e3+Math.random()*9e3)}`),[b,w]=S.useState(new Date().toISOString().slice(0,10)),[B,U]=S.useState(new Date(Date.now()+720*60*60*1e3).toISOString().slice(0,10)),[Q,k]=S.useState(""),[K,ee]=S.useState(""),[q,G]=S.useState("1. Payment Terms: 50% advance, 50% on completion"),[W,he]=S.useState([]),[Z,ie]=S.useState({}),[ce,ae]=S.useState({}),[de,se]=S.useState({}),[re,te]=S.useState([]),[be,He]=S.useState(""),[pe,Y]=S.useState([]),me=S.useRef(""),[Se,je]=S.useState([]),[Le,ge]=S.useState(!1),ye=n.toLowerCase(),we=ye.replace(/[-\s]/g,""),Ne=S.useMemo(()=>{const it=m?.id||m?.name||h||"product";return`group_${String(it).replace(/\s+/g,"_").toLowerCase()}`},[h,m]),ke=S.useMemo(()=>{const it=vt=>String(vt||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),Pe=vt=>String(vt||"").toUpperCase().replace(/[^A-Z0-9]+/g,"").trim(),dt=it(n),ze=Pe(n),Tt=(c||[]).filter(vt=>{const $e=it(vt.subcategory||vt.subcategory_name||""),St=Pe(vt.subcategory||vt.subcategory_name||"");return $e===dt||$e.includes(dt)||dt.includes($e)||St===ze||St.includes(ze)||ze.includes(St)}),Je=new Map;return Tt.forEach(vt=>{const $e=Pe(vt.name||vt.product||vt.title||"");Je.has($e)||Je.set($e,vt)}),Array.from(Je.values())},[c,n]),Be=it=>{if(!it)return[];const Pe=$e=>String($e||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),dt=$e=>String($e||"").toUpperCase().replace(/[^A-Z0-9]+/g,"").trim(),ze=Pe(it),Tt=dt(it),Je=(i||[]).filter($e=>{const St=Pe($e.product||""),Rt=dt($e.product||""),Zt=Pe($e.subCategory||""),bt=dt($e.subCategory||"");return St===ze||St.includes(ze)||Rt===Tt||Rt.includes(Tt)||Zt===ze||Zt.includes(ze)||bt===Tt||bt.includes(Tt)}),vt=new Map;return Je.forEach($e=>{const St=dt($e.name||$e.code||$e.product||$e.id);vt.has(St)||vt.set(St,$e)}),Array.from(vt.values())},Ae=S.useMemo(()=>h?Be(h).filter(it=>W.some(Pe=>Pe.materialId===it.id)).map(it=>{const Pe=W.find(Je=>Je.materialId===it.id),dt=(r||[]).find(Je=>Je.id===Pe?.selectedShopId),ze=Z[it.id]?.quantity??1,Tt=Z[it.id]?.supplyRate??it.rate??0;return{...it,quantity:ze,supplyRate:Tt,installRate:Z[it.id]?.installRate??0,shopName:dt?.name||"Market",shopId:Pe?.selectedShopId||"",brandName:Pe?.selectedBrand||it.brandName||"Generic"}}):[],[Z,W,h,i,r]),Qe=S.useMemo(()=>Ae.reduce((it,Pe)=>{const dt=Number(Z[Pe.id]?.quantity??Pe.quantity??0),ze=Number(Z[Pe.id]?.supplyRate??Pe.supplyRate??0);return it+dt*ze},0),[Z,Ae]),le=S.useMemo(()=>Ae.reduce((it,Pe)=>{const dt=Number(Z[Pe.id]?.quantity??Pe.quantity??0),ze=Number(Z[Pe.id]?.installRate??Pe.installRate??0);return it+dt*ze},0),[Z,Ae]),ct=Qe+le,rt=S.useMemo(()=>{const it=Z[Ne]?.quantity;return Number.isFinite(it)?Number(it):1},[Z,Ne]),ht=S.useMemo(()=>{const it=Math.max(1,rt||1);return Qe/it},[rt,Qe]),ft=S.useMemo(()=>{const it=Math.max(1,rt||1);return le/it},[rt,le]),Jt=async()=>{try{const it=await lt("/api/boq");if(it.status===401){Y([]),me.current!=="401"&&(me.current="401",A({title:"Unauthorized",description:"Your session has expired. Please login again.",variant:"destructive"}));return}if(!it.ok){const ze=await it.text().catch(()=>"");throw new Error(`failed to fetch boqs: ${ze||it.status}`)}if(!(it.headers.get("content-type")||"").includes("application/json")){Y([]);return}const dt=await it.json();Y(dt.boqs||[]),me.current=""}catch(it){const Pe=String(it?.message||it||"");Pe&&me.current!==Pe&&(me.current=Pe,console.warn("fetchSavedBoqs",it)),Y([])}};S.useEffect(()=>{u===9&&Jt()},[u]),S.useEffect(()=>{p&&u>=11&&gt()},[p,u]);const gt=async()=>{try{ge(!0);const it=await lt(`/api/estimator-step11-groups?session_id=${p}&estimator=${we}`,{headers:{}});if(it.ok){const Pe=await it.json();je(Pe.items||[])}}catch(it){console.warn("load step11 failed",it)}finally{ge(!1)}},tt=it=>{if(!it){te([]);return}const Pe=[Ne,...Ae.map(dt=>dt.id)];te(Pe)},Lt=()=>{if(re.length!==0){if(re.includes(Ne)){he([]),ie(it=>{const Pe={...it};return Object.keys(Pe).forEach(dt=>delete Pe[dt]),Pe}),ae({}),se({}),te([]);return}he(it=>it.filter(Pe=>!re.includes(Pe.materialId))),ie(it=>{const Pe={...it};return re.forEach(dt=>delete Pe[dt]),Pe}),ae(it=>{const Pe={...it};return re.forEach(dt=>delete Pe[dt]),Pe}),se(it=>{const Pe={...it};return re.forEach(dt=>delete Pe[dt]),Pe}),te([])}},qt=async()=>{try{if(!p.trim()){A({title:"Error",description:"Please enter a Bill No.",variant:"destructive"});return}const it=Ae.map((dt,ze)=>({session_id:p,estimator:ye,s_no:ze+1,material_id:dt.id,name:dt.name,unit:dt.unit||"pcs",quantity:Number(Z[dt.id]?.quantity??dt.quantity??0),supply_rate:Number(Z[dt.id]?.supplyRate??dt.supplyRate??0),install_rate:Number(Z[dt.id]?.installRate??dt.installRate??0),shop_id:dt.shopId||"",shop_name:dt.shopName||"",description:ce[dt.id]||"",location:de[dt.id]||"",group_id:Ne,group_name:h||m?.name||"",group_qty:rt,group_description:ce[Ne]||""}));if(!(await lt("/api/estimator-step9-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estimator:ye,session_id:p,items:it})})).ok)throw new Error("Save failed");A({title:"Success",description:"Saved."})}catch(it){A({title:"Error",description:it?.message||"Failed to save.",variant:"destructive"})}},Fs=async(it,Pe)=>{const dt=document.getElementById(it);if(!dt){A({title:"Error",description:"PDF content not found",variant:"destructive"});return}try{const ze=(await Yc(async()=>{const{default:Tt}=await Promise.resolve().then(()=>wu);return{default:Tt}},void 0)).default;ze().set({margin:[10,10,10,10],filename:Pe,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,backgroundColor:"#ffffff",ignoreElements:Tt=>Tt.className?.toString().includes("bg-")||Tt.className?.toString().includes("text-")},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(dt).save()}catch(ze){console.error("PDF Export Error:",ze),A({title:"Error",description:"PDF export failed. Check console.",variant:"destructive"})}},xs=async()=>{try{ge(!0);const it={estimator:we,session_id:p,s_no:1,group_key:`${ye}_${Ne}`,group_id:Ne,item_name:h||m?.name||"Product",unit:"pcs",quantity:rt,location:de[Ne]||"",description:ce[Ne]||"",supply_rate:ht,install_rate:ft,supply_amount:rt*ht,install_amount:rt*ft,supply_subtotal:Qe,install_subtotal:le,sgst:ct*.09,cgst:ct*.09,round_off:0,grand_total:ct};if(!(await lt("/api/estimator-step11-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:[it]})})).ok)throw new Error("Save failed");await gt(),A({title:"Success",description:"Saved."})}catch(it){A({title:"Error",description:it?.message||"Failed to save.",variant:"destructive"})}finally{ge(!1)}},hs=()=>{d(1),o(""),y(null),he([]),ie({}),ae({}),se({}),te([]),He(""),je([]),j(`${n.toUpperCase().slice(0,3)}-${Math.floor(1e3+Math.random()*9e3)}`),w(new Date().toISOString().slice(0,10))};return n?e.jsx(Sa,{children:e.jsxs("div",{className:"max-w-6xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold capitalize",children:[n," Estimator"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Complete workflow: Steps 1-11"})]}),e.jsxs(Fl,{mode:"wait",children:[u===1&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Step 1: Select Product"}),ke.length===0?e.jsx(Ms,{className:"p-6 bg-yellow-50 border-yellow-200",children:e.jsx("p",{className:"text-center text-yellow-800",children:"No products found for this sub-category in the database."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ke.map(it=>e.jsx(Ms,{className:$s("cursor-pointer border-2 hover:border-primary transition-all",h===it.name?"border-primary bg-blue-50":"border-gray-200"),onClick:()=>{o(it.name),y(it),he([]),ie({}),ae({}),se({}),te([]),He("")},children:e.jsxs(Ws,{className:"p-4",children:[e.jsx("p",{className:"font-semibold text-lg",children:it.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[Be(it.name).length," materials available"]})]})},it.id))}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(Ce,{onClick:()=>s("/estimators"),variant:"outline",children:"Cancel"}),e.jsxs(Ce,{disabled:!h,onClick:()=>d(2),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step1"),u===2&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Select Materials & Shops"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Available materials for ",h,". Best price shop is pre-selected."]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded bg-blue-50",children:[e.jsx(Tn,{checked:W.length===Be(h).length&&W.length>0,indeterminate:W.length>0&&W.length<Be(h).length,onCheckedChange:it=>{if(it){const Pe=Tt=>String(Tt||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),ze=Be(h).map(Tt=>{const vt=(i||[]).filter($e=>Pe($e.product||"")===Pe(Tt.product||"")&&Pe($e.name||"")===Pe(Tt.name||"")).sort(($e,St)=>($e.rate||0)-(St.rate||0))[0];return{materialId:Tt.id,selectedShopId:vt?.shopId||"",selectedBrand:Tt.brandName||"Generic"}});he(ze)}else he([])}}),e.jsx(We,{className:"text-sm font-medium",children:"Select All Materials"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-[600px] overflow-y-auto p-3 border rounded bg-gray-50",children:Be(h).map(it=>{const Pe=W.some(dt=>dt.materialId===it.id);return e.jsx("div",{className:$s("p-4 border-2 rounded-lg transition-all",Pe?"border-blue-500 bg-white":"border-gray-200 bg-white"),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Tn,{checked:Pe,onCheckedChange:()=>{if(Pe)he(dt=>dt.filter(ze=>ze.materialId!==it.id));else{const dt=Je=>String(Je||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),Tt=(i||[]).filter(Je=>dt(Je.product||"")===dt(it.product||"")&&dt(Je.name||"")===dt(it.name||"")).sort((Je,vt)=>(Je.rate||0)-(vt.rate||0))[0];he(Je=>[...Je,{materialId:it.id,selectedShopId:Tt?.shopId||"",selectedBrand:it.brandName||"Generic"}]),ie(Je=>({...Je,[it.id]:{quantity:1,supplyRate:it.rate||0,installRate:0},[Ne]:Je[Ne]||{quantity:1,supplyRate:0,installRate:0}}))}}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:it.name}),e.jsx("p",{className:"text-xs text-gray-600",children:it.code}),Pe&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx(We,{className:"text-xs",children:"Select Brand"}),e.jsxs(mn,{value:W.find(dt=>dt.materialId===it.id)?.selectedBrand||"Generic",onValueChange:dt=>{he(ze=>ze.map(Tt=>Tt.materialId===it.id?{...Tt,selectedBrand:dt}:Tt))},children:[e.jsx(un,{className:"h-9 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:(()=>{const dt=vt=>String(vt||"").trim(),ze=(i||[]).filter(vt=>dt(vt.product||"")===dt(it.product||"")&&dt(vt.name||"")===dt(it.name||"")),Tt=new Map;ze.forEach(vt=>{const $e=vt.brandName||"Generic",St=String($e).toUpperCase().trim();Tt.has(St)||Tt.set(St,$e)});const Je=Array.from(Tt.values());return Je.length===0&&Je.push("Generic"),Je.map(vt=>e.jsx(Ks,{value:vt,children:vt},vt))})()})]})]}),e.jsxs("div",{children:[e.jsx(We,{className:"text-xs",children:"Select Shop"}),e.jsxs(mn,{value:W.find(dt=>dt.materialId===it.id)?.selectedShopId||"",onValueChange:dt=>{he(ze=>ze.map(Tt=>Tt.materialId===it.id?{...Tt,selectedShopId:dt}:Tt))},children:[e.jsx(un,{className:"h-9 text-xs",children:e.jsx(gn,{})}),e.jsx(hn,{children:(()=>{const dt=$e=>String($e||"").toUpperCase().replace(/[^A-Z0-9]+/g," ").trim(),ze=(i||[]).filter($e=>dt($e.product||"")===dt(it.product||"")&&dt($e.name||"")===dt(it.name||"")),Tt=W.find($e=>$e.materialId===it.id)?.selectedBrand||"Generic",Je=ze.filter($e=>($e.brandName||"Generic")===Tt).map($e=>({shopId:$e.shopId,rate:$e.rate,shopName:(r||[]).find(St=>St.id===$e.shopId)?.name||"Unknown"})).filter($e=>$e.shopId);return Array.from(new Map(Je.map($e=>[$e.shopId,$e])).values()).map($e=>e.jsxs(Ks,{value:$e.shopId,children:[$e.shopName,"  ",$e.rate]},$e.shopId))})()})]})]})]})]})]})},it.id)})}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>d(1),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(Ce,{disabled:W.length===0,onClick:()=>d(7),children:["Next ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]},"step2"),u===7&&e.jsx(Es.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Selected Materials"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-8",children:"Edit quantities or rates before generating BOQ."}),e.jsxs("div",{className:"grid grid-cols-8 gap-4 text-sm text-muted-foreground mb-3",children:[e.jsx("div",{className:"col-span-2",children:"Item"}),e.jsx("div",{className:"text-center",children:"Brand"}),e.jsx("div",{className:"text-center",children:"Qty"}),e.jsx("div",{className:"text-center",children:"Unit"}),e.jsx("div",{className:"text-center",children:"Shop"}),e.jsx("div",{className:"text-center",children:"Rate ()"}),e.jsx("div",{className:"text-right",children:"Amount ()"})]}),e.jsx("div",{className:"space-y-4",children:Ae.map(it=>{const Pe=Number(Z[it.id]?.quantity??it.quantity??0),dt=Number(Z[it.id]?.supplyRate??it.supplyRate??0),ze=Pe*dt;return e.jsxs("div",{className:"grid grid-cols-8 gap-4 items-center border rounded-xl p-4",children:[e.jsx("div",{className:"col-span-2 font-medium",children:it.name}),e.jsx("div",{className:"text-center font-semibold",children:it.brandName||"Generic"}),e.jsx("div",{className:"text-center",children:e.jsx(Xe,{type:"number",value:Pe,onChange:Tt=>ie(Je=>({...Je,[it.id]:{...Je[it.id],quantity:Number(Tt.target.value||0)}})),className:"w-24 mx-auto"})}),e.jsx("div",{className:"text-center text-muted-foreground",children:it.unit||"pcs"}),e.jsx("div",{className:"text-center font-semibold",children:it.shopName||"-"}),e.jsx("div",{className:"text-center",children:e.jsx(Xe,{type:"number",value:dt,onChange:Tt=>ie(Je=>({...Je,[it.id]:{...Je[it.id],supplyRate:Number(Tt.target.value||0)}})),className:"w-28 mx-auto"})}),e.jsxs("div",{className:"text-right font-semibold",children:["",ze.toFixed(2)]})]},it.id)})}),e.jsxs("div",{className:"flex justify-between mt-10",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>d(2),children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs(Ce,{onClick:()=>d(8),disabled:Ae.length===0,className:"bg-blue-600 hover:bg-blue-700",children:["Next: Generate BOM ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]})]})]})},"step7"),u===8&&e.jsxs(Es.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{style:{width:64,height:64,backgroundColor:"rgba(34,197,94,0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",color:"#22c55e"},children:e.jsx(lo,{style:{width:32,height:32}})}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700},children:"Bill of Materials (BOM)"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Generated on ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{id:"boq-pdf",style:{backgroundColor:"#ffffff",color:"#000000",fontFamily:"Arial, sans-serif",padding:16},children:[e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:8,marginBottom:16},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:16,padding:16,fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"PRODUCT TYPE"}),e.jsx("p",{style:{fontWeight:600},children:h||"Product"})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"TOTAL ITEMS"}),e.jsxs("p",{style:{fontWeight:600},children:[Ae.length," Materials"]})]})]})}),e.jsx("div",{style:{border:"1px solid #d1d5db",borderRadius:8,marginBottom:16,overflow:"hidden"},children:e.jsxs("div",{style:{padding:16},children:[e.jsx("h3",{style:{fontWeight:600,marginBottom:8},children:"Materials Schedule"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{backgroundColor:"#f3f4f6"},children:e.jsx("tr",{children:["S.No","Description","Unit","Qty","Rate ()","Supplier","Amount ()"].map(it=>e.jsx("th",{style:{border:"1px solid #d1d5db",padding:8,textAlign:it==="Qty"||it.includes("Rate")||it.includes("Amount")?"right":"left"},children:it},it))})}),e.jsx("tbody",{children:Ae.map((it,Pe)=>{const dt=Number(Z[it.id]?.quantity??it.quantity??0),ze=Number(Z[it.id]?.supplyRate??it.supplyRate??0);return e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8},children:Pe+1}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8},children:it.name}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8,textAlign:"center"},children:it.unit||"pcs"}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8,textAlign:"right"},children:dt}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8,textAlign:"right"},children:ze.toFixed(2)}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8},children:it.shopName||"Market"}),e.jsx("td",{style:{border:"1px solid #d1d5db",padding:8,textAlign:"right",fontWeight:600},children:(dt*ze).toFixed(2)})]},it.id)})})]})]})}),e.jsxs("div",{style:{border:"1px solid #d1d5db",borderRadius:8,padding:16,display:"flex",justifyContent:"space-between",backgroundColor:"#eff6ff"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Materials"}),e.jsx("p",{style:{fontWeight:600},children:Ae.length})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Total Quantity"}),e.jsx("p",{style:{fontWeight:600},children:Ae.reduce((it,Pe)=>it+Number(Z[Pe.id]?.quantity??Pe.quantity??0),0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Grand Total"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1d4ed8"},children:["",ct.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center pt-4",children:[e.jsx(Ce,{onClick:()=>d(7),variant:"outline",className:"px-8",children:"Back"}),e.jsxs("button",{onClick:()=>Fs("boq-pdf",`BOM-${p}.pdf`),className:"flex items-center gap-2 bg-blue-500 text-white font-semibold px-6 py-2 rounded-lg shadow hover:bg-blue-600 transition",children:[e.jsx(hi,{className:"w-5 h-5 rotate-12"}),"Export PDF"]}),e.jsxs(Ce,{onClick:()=>d(9),className:"bg-blue-600 hover:bg-blue-700 px-8",children:["Add to BOM ",e.jsx(Zn,{className:"ml-2 h-4 w-4"})]}),e.jsxs(Ce,{variant:"secondary",className:"px-8",onClick:hs,children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"}),"New Estimate"]})]})]},"step8"),u===9&&e.jsx(Es.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Add to BOQ"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ce,{variant:"destructive",onClick:Lt,disabled:re.length===0,className:"bg-red-300 hover:bg-red-400 text-white",children:"Delete Selected"}),e.jsx(Ce,{onClick:qt,className:"bg-blue-600 hover:bg-blue-700",disabled:Ae.length===0,children:"Save"}),e.jsx(Ce,{onClick:()=>d(11),className:"bg-blue-600 hover:bg-blue-700",disabled:Ae.length===0,children:"Add to BOQ"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Saved BOQs"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:pe.length===0?"No saved BOQs":""})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all",checked:(()=>{const it=[Ne,...Ae.map(Pe=>Pe.id)];return it.length>0&&re.length===it.length})(),onCheckedChange:it=>tt(!!it)})}),e.jsx("th",{className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{className:"border px-2 py-2",children:"Item"}),e.jsx("th",{className:"border px-2 py-2",children:"Description"}),e.jsx("th",{className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-2 py-2 text-right",children:"Amount"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Tn,{checked:re.includes(Ne),onCheckedChange:it=>{const Pe=!!it;te(dt=>Pe?Array.from(new Set([...dt,Ne])):dt.filter(ze=>ze!==Ne))}})}),e.jsx("td",{className:"border px-2 py-2 text-center"}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx("strong",{children:h||m?.name||"Product"})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Xe,{placeholder:"Group description",value:ce[Ne]||"",onChange:it=>ae(Pe=>({...Pe,[Ne]:it.target.value}))})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Xe,{className:"w-20",value:"pcs",readOnly:!0})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Xe,{type:"number",className:"w-28",value:rt,onChange:it=>ie(Pe=>({...Pe,[Ne]:{...Pe[Ne]||{quantity:1,supplyRate:0,installRate:0},quantity:Math.max(0,Number(it.target.value||0))}}))})}),e.jsx("td",{className:"border px-2 py-2 text-right"}),e.jsx("td",{className:"border px-2 py-2 text-right"})]}),Ae.map((it,Pe)=>{const dt=it.id,ze=Number(Z[dt]?.quantity??it.quantity??0),Tt=Number(Z[dt]?.supplyRate??it.supplyRate??0),Je=ze*Tt;return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Tn,{checked:re.includes(dt),onCheckedChange:vt=>{const $e=!!vt;te(St=>$e?Array.from(new Set([...St,dt])):St.filter(Rt=>Rt!==dt))}})}),e.jsx("td",{className:"border px-2 py-2 text-center",children:Pe+1}),e.jsx("td",{className:"border px-2 py-2 font-medium",children:it.name}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Cl,{className:"min-h-[44px]",value:ce[dt]||"",onChange:vt=>ae($e=>({...$e,[dt]:vt.target.value})),placeholder:"Description"})}),e.jsx("td",{className:"border px-2 py-2",children:it.unit||"pcs"}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Xe,{type:"number",value:ze,onChange:vt=>ie($e=>({...$e,[dt]:{...$e[dt],quantity:Math.max(0,Number(vt.target.value||0))}}))})}),e.jsx("td",{className:"border px-2 py-2 text-right",children:e.jsx(Xe,{type:"number",className:"text-right",value:Tt,onChange:vt=>ie($e=>({...$e,[dt]:{...$e[dt],supplyRate:Math.max(0,Number(vt.target.value||0))}}))})}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",Je.toFixed(2)]})]},dt)})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>d(8),className:"px-8",children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsx(Ce,{onClick:()=>d(11),className:"bg-blue-600 hover:bg-blue-700 px-8",children:"Finalize PO"}),e.jsxs(Ce,{onClick:()=>Fs("boq-pdf",`BOQ-${p}.pdf`),className:"bg-blue-600 hover:bg-blue-700 px-8",children:["Export PDF ",e.jsx(hi,{className:"ml-2 h-4 w-4"})]})]})]})},"step-add-to-boq"),u===11&&e.jsx(Es.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl border p-8 space-y-6",children:[e.jsxs("div",{id:"boq-final-pdf",style:{width:"100%",background:"#fff",color:"#000",fontFamily:"Arial",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("img",{src:hG,alt:"Concept Trunk Interiors",style:{height:56}}),e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:700},children:"CONCEPT TRUNK INTERIORS"}),e.jsx("div",{style:{fontSize:12,color:"#555"},children:"BILL OF QUANTITIES (BOQ)"})]}),e.jsx("div",{style:{textAlign:"right",fontSize:12},children:b})]}),e.jsx("div",{className:"overflow-x-auto border rounded",children:e.jsxs("table",{className:"w-full text-sm bg-white",children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"#f3f4f6"},children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:e.jsx(Tn,{id:"select-all-groups",checked:re.includes(Ne),onCheckedChange:it=>{te(it?[Ne]:[])}})}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"S.No"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Item"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Location"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Description"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Unit"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-2",children:"Qty"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Rate"}),e.jsx("th",{colSpan:2,className:"border px-2 py-2 text-center",children:"Amount"})]}),e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Supply"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Installation"})]})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Tn,{checked:re.includes(Ne),onCheckedChange:it=>{te(it?[Ne]:[])}})}),e.jsx("td",{className:"border px-2 py-2 text-center",children:"1"}),e.jsx("td",{className:"border px-2 py-2 font-semibold",children:h||m?.name||"Product"}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Xe,{value:de[Ne]||"",onChange:it=>se(Pe=>({...Pe,[Ne]:it.target.value})),placeholder:"Location"})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Cl,{value:ce[Ne]||"",onChange:it=>ae(Pe=>({...Pe,[Ne]:it.target.value})),placeholder:"Group description",className:"min-h-[44px]"})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Xe,{value:"pcs",readOnly:!0})}),e.jsx("td",{className:"border px-2 py-2",children:e.jsx(Xe,{type:"number",value:rt,onChange:it=>ie(Pe=>({...Pe,[Ne]:{...Pe[Ne]||{quantity:1,supplyRate:0,installRate:0},quantity:Math.max(0,Number(it.target.value||0))}}))})}),e.jsx("td",{className:"border px-2 py-2 text-center",children:e.jsx(Xe,{type:"number",value:Number(ht||0).toFixed(2),readOnly:!0})}),e.jsx("td",{className:"border px-2 py-2 text-center",children:e.jsx(Xe,{type:"number",value:Number(ft||0).toFixed(2),readOnly:!0})}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",(rt*ht).toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",(rt*ft).toFixed(2)]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-2",colSpan:9}),e.jsx("td",{className:"border px-2 py-2 text-right font-semibold",children:"Subtotal"}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",Qe.toFixed(2)]}),e.jsxs("td",{className:"border px-2 py-2 text-right font-semibold",children:["",le.toFixed(2)]})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(Ce,{variant:"outline",onClick:()=>d(9),className:"px-8",children:"Back"}),e.jsx(Ce,{variant:"destructive",onClick:()=>{te([Ne]),Lt()},className:"bg-red-300 hover:bg-red-400 text-white px-8",children:"Delete Selected"}),e.jsx(Ce,{onClick:()=>d(1),className:"bg-blue-600 hover:bg-blue-700 px-8",children:"Add Product"}),e.jsx(Ce,{onClick:xs,disabled:Le||Ae.length===0,className:"bg-blue-600 hover:bg-blue-700 px-8",children:Le?"Saving...":"Save"}),e.jsx(Ce,{onClick:async()=>{await xs(),await Fs("boq-final-pdf",`BOQ-${p}.pdf`)},disabled:Le||Ae.length===0,className:"bg-blue-600 hover:bg-blue-700 px-8",children:"Create BOQ"})]}),Se.length>0&&e.jsx(Ms,{className:"p-4 bg-green-50 border-green-200",children:e.jsxs("p",{className:"text-green-800 font-semibold",children:[" Success! ",Se.length," item(s) saved to database"]})})]})},"step11")]})]})}):e.jsx(Sa,{children:e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:"text-red-600",children:"Subcategory not found"})})})}function pG(){const[,t]=co(),{shops:s}=fi();return e.jsx(Sa,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight font-heading text-primary",children:"Select Supplier"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose a supplier to source your materials from."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(n=>e.jsxs(Ms,{className:"group cursor-pointer hover:border-primary/50 transition-all hover:shadow-lg",onClick:()=>t(`/item-master/${n.id}`),children:[e.jsxs("div",{className:"aspect-video w-full overflow-hidden rounded-t-lg relative bg-muted",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center",children:e.jsx(v2,{className:"h-12 w-12 text-primary/30"})}),n.rating&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white px-2 py-1 rounded flex items-center gap-1 text-xs",children:[e.jsx(ML,{className:"h-3 w-3 text-yellow-500 fill-yellow-500"})," ",n.rating]})]}),e.jsxs(Ar,{className:"pb-3",children:[e.jsx(ur,{className:"flex justify-between items-start",children:e.jsx("span",{children:n.name})}),e.jsxs(sa,{className:"flex items-center gap-1",children:[e.jsx(jL,{className:"h-3 w-3"})," ",n.location]})]}),e.jsxs(Ws,{children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.categories?.map(r=>e.jsx(Bl,{variant:"secondary",className:"text-xs",children:r},r))}),e.jsxs(Ce,{className:"w-full group-hover:bg-primary group-hover:text-primary-foreground",children:[e.jsx(v2,{className:"mr-2 h-4 w-4"})," Visit Store"]})]})]},n.id))})]})})}function mG(){const t=[{name:"Free",price:"$0",description:"For personal use",features:["Access to all estimators","Save up to 3 projects","Basic support"]},{name:"Pro",price:"$29/mo",description:"For contractors & professionals",features:["Unlimited projects","Export to PDF/Excel","Priority support","Client management"],popular:!0},{name:"Enterprise",price:"Custom",description:"For large construction firms",features:["Custom integrations","Dedicated account manager","White-label reports","API access"]}];return e.jsx(Sa,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold font-heading",children:"Subscription Plans"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Choose the plan that fits your needs"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:t.map(s=>e.jsxs(Ms,{className:`flex flex-col ${s.popular?"border-primary shadow-lg scale-105":""}`,children:[e.jsxs(Ar,{children:[e.jsx(ur,{children:s.name}),e.jsx(sa,{children:s.description})]}),e.jsxs(Ws,{className:"flex-1",children:[e.jsx("div",{className:"text-3xl font-bold mb-4",children:s.price}),e.jsx("ul",{className:"space-y-2",children:s.features.map(n=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(v1,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:n})]},n))})]}),e.jsx(Eh,{children:e.jsx(Ce,{className:"w-full",variant:s.popular?"default":"outline",children:s.price==="Custom"?"Contact Sales":"Subscribe"})})]},s.name))})]})})}function gG(){const{toast:t}=ua(),[s,n]=S.useState([]),[r,i]=S.useState(new Set),[c,A]=S.useState(!0),[u,d]=S.useState("doors");S.useEffect(()=>{h()},[]);const h=async()=>{A(!0);try{const Q=await lt(`/api/estimator-step9-items?estimator=${u}`);if(!Q.ok)throw new Error("Failed to load data");const k=await Q.json();n(k.items||[]),i(new Set),!k.items||k.items.length===0?t({title:"Info",description:"No Step 9 data found."}):t({title:"Success",description:`Loaded ${k.items.length} materials from database.`})}catch(Q){console.error("Load error:",Q),t({title:"Error",description:"Failed to load Step 9 data.",variant:"destructive"})}finally{A(!1)}},o=()=>{const Q=s.reduce((q,G)=>q+(G.quantity*G.rate||0),0),k=Q*.09,K=Q*.09,ee=Q+k+K;return{subTotal:Q,sgst:k,cgst:K,grandTotal:ee}},{subTotal:m,sgst:y,cgst:p,grandTotal:j}=o(),b=Q=>{const k=new Set(r);k.has(Q)?k.delete(Q):k.add(Q),i(k)},w=()=>{r.size===s.length?i(new Set):i(new Set(s.map((Q,k)=>k)))},B=()=>{const Q=s.filter((k,K)=>!r.has(K));n(Q),i(new Set),t({title:"Success",description:`${r.size} item(s) deleted.`})},U=()=>{const Q=document.getElementById("boq-review-pdf");if(!Q)return;const k=s[0]?.session_id||"BOM";_d().set({margin:10,filename:`BOM_Review_${k}.pdf`,html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(Q).save()};return e.jsx(Sa,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"BOM Review - Step 9"}),e.jsx(Ms,{children:e.jsxs(Ws,{className:"pt-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Filter by Estimator Type"}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(We,{children:"Estimator Type"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:u,onChange:Q=>{d(Q.target.value),n([])},children:[e.jsx("option",{value:"doors",children:"Doors"}),e.jsx("option",{value:"flooring",children:"Flooring"})]})]}),e.jsx(Ce,{onClick:h,disabled:c,children:c?"Loading...":"Refresh Data"})]})]}),s.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Add to BOM"}),r.size>0&&e.jsx(e.Fragment,{children:e.jsxs(Ce,{variant:"destructive",size:"sm",onClick:B,children:[e.jsx(Gc,{className:"mr-2 h-4 w-4"}),"Delete Selected (",r.size,")"]})})]}),e.jsxs("div",{id:"boq-review-pdf",className:"space-y-4",children:[e.jsxs("table",{className:"w-full text-sm border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-100",children:[e.jsx("th",{className:"border px-4 py-2 text-center w-12",children:e.jsx("input",{type:"checkbox",checked:r.size===s.length&&s.length>0,onChange:w,className:"cursor-pointer"})}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"S.No"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Item"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Description"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Unit"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Qty"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Rate"}),e.jsx("th",{className:"border px-4 py-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:s.map((Q,k)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"border px-4 py-2 text-center",children:e.jsx("input",{type:"checkbox",checked:r.has(k),onChange:()=>b(k),className:"cursor-pointer"})}),e.jsx("td",{className:"border px-4 py-2",children:k+1}),e.jsx("td",{className:"border px-4 py-2 font-medium",children:Q.material_name||"N/A"}),e.jsx("td",{className:"border px-4 py-2 text-xs",children:Q.description||"-"}),e.jsx("td",{className:"border px-4 py-2 text-center",children:"pcs"}),e.jsx("td",{className:"border px-4 py-2 text-right",children:Q.quantity}),e.jsxs("td",{className:"border px-4 py-2 text-right",children:["",(Q.rate||0).toFixed(2)]}),e.jsxs("td",{className:"border px-4 py-2 text-right font-semibold",children:["",((Q.quantity||0)*(Q.rate||0)).toFixed(2)]})]},Q.id||k))})]}),e.jsxs("div",{className:"border-t pt-4 space-y-2 ml-auto w-96",children:[e.jsxs("div",{className:"flex justify-between px-4",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["",m.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between px-4",children:[e.jsx("span",{children:"SGST (9%):"}),e.jsxs("span",{children:["",y.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between px-4",children:[e.jsx("span",{children:"CGST (9%):"}),e.jsxs("span",{children:["",p.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2 font-bold px-4",children:[e.jsx("span",{children:"Grand Total:"}),e.jsxs("span",{children:["",j.toFixed(2)]})]})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs(Ce,{onClick:U,className:"flex-1",children:[e.jsx(hi,{className:"mr-2 h-4 w-4"})," Export as PDF"]})})]}),s.length===0&&!c&&e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No materials found. Loading data..."})]})})]})})}function yG({onSelectProduct:t,selectedProjectId:s,open:n,onOpenChange:r}){const[i,c]=S.useState([]),[A,u]=S.useState([]),[d,h]=S.useState(""),[o,m]=S.useState(!0),{toast:y}=ua();S.useEffect(()=>{(async()=>{try{const b=await lt("/api/products",{headers:{}});if(b.ok){const B=((await b.json()).products||[]).map(U=>({id:U.id,name:U.name,code:U.code||"",category:U.category,subcategory:U.subcategory,category_name:U.category_name,subcategory_name:U.subcategory_name,description:U.description}));c(B),u(B)}else y({title:"Error",description:"Failed to load products",variant:"destructive"})}catch(b){console.error("Failed to load products:",b),y({title:"Error",description:"Failed to load products",variant:"destructive"})}finally{m(!1)}})()},[y]),S.useEffect(()=>{if(!d.trim()){u(i);return}const j=d.toLowerCase(),b=i.filter(w=>{const B=w.name?.toLowerCase()||"",U=w.category?.toLowerCase()||"",Q=w.subcategory?.toLowerCase()||"",k=w.category_name?.toLowerCase()||"",K=w.subcategory_name?.toLowerCase()||"",ee=w.description?.toLowerCase()||"";return B.includes(j)||U.includes(j)||Q.includes(j)||k.includes(j)||K.includes(j)||ee.includes(j)});u(b)},[d,i]);const p=j=>{t(j),r(!1)};return e.jsx(du,{open:n,onOpenChange:r,children:e.jsxs(dA,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(AA,{children:e.jsx(uA,{children:"Select Product"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(We,{htmlFor:"product-search",children:"Search Products"}),e.jsx(Xe,{id:"product-search",placeholder:"Search by product name, category, or description...",value:d,onChange:j=>h(j.target.value),className:"mt-2"})]}),o?e.jsx("div",{className:"text-center py-8",children:"Loading products..."}):A.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:i.length===0?"No products available":"No products match your search"}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:A.map(j=>e.jsx(Ce,{variant:"outline",onClick:()=>p(j),className:"w-full justify-start h-auto py-3 px-4",children:e.jsxs("div",{className:"text-left space-y-1",children:[e.jsx("div",{className:"font-semibold",children:j.name}),e.jsx("div",{className:"text-xs text-gray-500",children:j.category_name&&j.subcategory_name?`${j.category_name}  ${j.subcategory_name}`:j.category?j.category:"No category"}),j.description&&e.jsx("div",{className:"text-xs text-gray-600",children:j.description})]})},j.id))}),A.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Showing ",A.length," of ",i.length," products"]})]})]})})}function xG({onSelectTemplate:t,open:s,onOpenChange:n}){const[r,i]=S.useState([]),[c,A]=S.useState([]),[u,d]=S.useState(""),[h,o]=S.useState(!0),{toast:m}=ua();S.useEffect(()=>{s&&(async()=>{try{const j=await lt("/api/material-templates",{headers:{}});if(j.ok){const w=(await j.json()).templates||[];i(w),A(w)}else m({title:"Error",description:"Failed to load material templates",variant:"destructive"})}catch(j){console.error("Failed to load material templates:",j),m({title:"Error",description:"Failed to load material templates",variant:"destructive"})}finally{o(!1)}})()},[s,m]),S.useEffect(()=>{if(!u.trim()){A(r);return}const p=u.toLowerCase(),j=r.filter(b=>{const w=b.name?.toLowerCase()||"",B=b.code?.toLowerCase()||"",U=b.category?.toLowerCase()||"",Q=b.subcategory?.toLowerCase()||"",k=b.vendor_category?.toLowerCase()||"";return w.includes(p)||B.includes(p)||U.includes(p)||Q.includes(p)||k.includes(p)});A(j)},[u,r]);const y=p=>{t(p),n(!1)};return e.jsx(du,{open:s,onOpenChange:n,children:e.jsxs(dA,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(AA,{children:[e.jsx(uA,{children:"Select Material Template"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a material template to add to your BOQ"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(We,{htmlFor:"template-search",children:"Search Material Templates"}),e.jsx(Xe,{id:"template-search",placeholder:"Search by template name, code, category...",value:u,onChange:p=>d(p.target.value),className:"mt-2"})]}),h?e.jsx("div",{className:"text-center py-8",children:"Loading material templates..."}):c.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:r.length===0?"No material templates available":"No material templates match your search"}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:c.map(p=>e.jsx(Ce,{variant:"outline",onClick:()=>y(p),className:"w-full justify-start h-auto py-3 px-4",children:e.jsxs("div",{className:"text-left space-y-1",children:[e.jsx("div",{className:"font-semibold",children:p.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Code: ",p.code,p.category&&`  ${p.category}`,p.subcategory&&`  ${p.subcategory}`]}),p.vendor_category&&e.jsxs("div",{className:"text-xs text-gray-600",children:["Vendor: ",p.vendor_category]}),(p.tax_code_type||p.tax_code_value)&&e.jsxs("div",{className:"text-xs text-gray-600",children:["Tax: ",p.tax_code_type," ",p.tax_code_value]})]})},p.id))}),c.length>0&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Showing ",c.length," of ",r.length," material templates"]})]})]})})}function vG({product:t,onClose:s,onAddToBoq:n,open:r}){const[i,c]=S.useState([]),[A,u]=S.useState([]),[d,h]=S.useState(null),[o,m]=S.useState(!0),[y,p]=S.useState(!1),{toast:j}=ua();S.useEffect(()=>{const w=async()=>{try{m(!0);const B=await $o(`/api/step11-products/${encodeURIComponent(t.id)}`);if(console.log("Step 11 Config Data:",B),B.configurations&&B.configurations.length>0){u(B.configurations);const U=B.configurations[0];h(U);const k=(U.items||[]).map((K,ee)=>({id:`${U.product.id}_${ee}`,bill_no:`TEMPLATE_${t.id}_${U.product.config_name||"default"}_${ee}`,estimator:Xc(t)||"generic",group_id:t.id,title:K.material_name||K.name||`Material ${ee+1}`,description:K.description||`${t.name} - ${K.material_name||K.name||`Material ${ee+1}`}`,unit:U.product.required_unit_type||"Sqft",qty:Number(K.qty||K.quantity||1),supply_rate:Number(K.supply_rate||K.rate||0),install_rate:Number(K.install_rate||0),config_id:U.product.id,material_id:K.material_id}));c(k)}else u([]),c([]),j({title:"Configuration Required",description:`No saved configuration found for ${t.name}. You need to create one in Manage Product first.`,action:e.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>{window.location.href="/admin/manage-product"},children:"Go to Manage Product"})})}catch(B){console.error("Failed to load product snapshot:",B),u([]),c([]),B.message?.includes("HTTP 404")?j({title:"Info",description:`No saved configuration found for ${t.name}. Please configure it in Manage Product first.`}):j({title:"Error",description:"Failed to load product configuration",variant:"destructive"})}finally{m(!1)}};r&&t?.id&&w()},[t,j,r]);const b=w=>{h(w);const U=(w.items||[]).map((Q,k)=>({id:`${w.product.id}_${k}`,bill_no:`TEMPLATE_${t.id}_${w.product.config_name||"default"}_${k}`,estimator:Xc(t)||"generic",group_id:t.id,title:Q.material_name||Q.name||`Material ${k+1}`,description:Q.description||`${t.name} - ${Q.material_name||Q.name||`Material ${k+1}`}`,unit:w.product.required_unit_type||"Sqft",qty:Number(Q.qty||Q.quantity||1),supply_rate:Number(Q.supply_rate||Q.rate||0),install_rate:Number(Q.install_rate||0),config_id:w.product.id,material_id:Q.material_id}));c(U)};return e.jsx(du,{open:r,onOpenChange:s,children:e.jsxs(dA,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(AA,{children:e.jsxs(uA,{children:[t.name," - Step 11 Configuration"]})}),e.jsxs("div",{className:"space-y-4",children:[t.category&&t.subcategory&&e.jsxs("p",{className:"text-sm text-gray-500",children:[t.category,"  ",t.subcategory]}),o?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading Step 11 data..."}):i.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 space-y-4",children:[e.jsx("div",{className:"text-lg font-medium",children:"No Configuration Found"}),e.jsxs("div",{className:"text-sm",children:["No saved configuration exists for ",e.jsx("strong",{children:t.name}),"."]}),e.jsx("div",{className:"text-sm text-gray-600",children:"You need to create a product configuration in Manage Product first before you can add it to a BOQ."}),e.jsx(Ce,{onClick:()=>window.location.href="/admin/manage-product",variant:"outline",className:"mt-4",children:"Go to Manage Product"})]}):e.jsxs(e.Fragment,{children:[A.length>1&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{className:"text-sm font-medium",children:"Select Configuration"}),e.jsxs(mn,{value:d?.product.id||"",onValueChange:w=>{const B=A.find(U=>U.product.id===w);B&&b(B)},children:[e.jsx(un,{children:e.jsx(gn,{placeholder:"Select a configuration"})}),e.jsx(hn,{children:A.map(w=>e.jsxs(Ks,{value:w.product.id,children:[w.product.config_name||"Unnamed Configuration","(Created: ",new Date(w.product.created_at).toLocaleDateString(),")"]},w.product.id))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"font-black text-[13px] uppercase tracking-widest mb-2 border-b-2 border-black pb-1",children:"Product Configuration Preview"}),e.jsx("div",{className:"border-2 border-black rounded-sm overflow-hidden shadow-md",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"bg-white border-b border-black",children:e.jsxs("tr",{className:"text-[10px] font-black uppercase tracking-wider",children:[e.jsx("th",{className:"border-r border-black p-2 text-center w-[40px]",children:"S.No"}),e.jsx("th",{className:"border-r border-black p-2 text-left",children:"Item"}),e.jsx("th",{className:"border-r border-black p-2 text-center w-[100px]",children:"Location"}),e.jsx("th",{className:"border-r border-black p-2 text-left",children:"Description"}),e.jsx("th",{className:"border-r border-black p-2 text-center w-[60px]",children:"Unit"}),e.jsx("th",{className:"border-r border-black p-2 text-center w-[60px]",children:"Qty"}),e.jsx("th",{className:"border-r border-black p-2 text-right w-[100px]",children:"Supply Rate"}),e.jsx("th",{className:"border-r border-black p-2 text-right w-[100px]",children:"Install Rate"}),e.jsx("th",{className:"p-2 text-right w-[110px]",children:"Total Amount"})]})}),e.jsx("tbody",{className:"bg-white",children:e.jsxs("tr",{className:"text-[11px] hover:bg-muted/5 transition-colors",children:[e.jsx("td",{className:"border-r border-black p-3 text-center font-bold",children:"1"}),e.jsx("td",{className:"border-r border-black p-3 font-black uppercase text-xs",children:t.name}),e.jsx("td",{className:"border-r border-black p-3 text-center italic",children:"Main Area"}),e.jsxs("td",{className:"border-r border-black p-3 text-[10px] text-muted-foreground leading-tight",children:["Consolidated configuration for ",t.name]}),e.jsx("td",{className:"border-r border-black p-3 text-center font-bold",children:d?.product.required_unit_type||"Sqft"}),e.jsx("td",{className:"border-r border-black p-3 text-center font-black",children:"1"}),e.jsxs("td",{className:"border-r border-black p-3 text-right font-bold",children:["",i.reduce((w,B)=>w+(B.qty||1)*(B.supply_rate||0),0).toLocaleString()]}),e.jsxs("td",{className:"border-r border-black p-3 text-right font-bold",children:["",i.reduce((w,B)=>w+(B.qty||1)*(B.install_rate||0),0).toLocaleString()]}),e.jsxs("td",{className:"p-3 text-right font-black text-primary",children:["",i.reduce((w,B)=>w+(B.qty||1)*((B.supply_rate||0)+(B.install_rate||0)),0).toLocaleString()]})]})}),e.jsx("tfoot",{className:"bg-black/5 border-t border-black",children:e.jsxs("tr",{className:"font-black text-[12px]",children:[e.jsx("td",{colSpan:8,className:"p-3 text-right uppercase",children:"Grand Total Amount (INR)"}),e.jsxs("td",{className:"p-3 text-right text-primary text-sm font-black",children:["",i.reduce((w,B)=>w+(B.qty||1)*((B.supply_rate||0)+(B.install_rate||0)),0).toLocaleString()]})]})})]})}),e.jsxs("p",{className:"text-[10px] text-gray-500 italic mt-2",children:["* This is a consolidated view of ",i.length," materials."]})]}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t border-black/10",children:[e.jsx(Ce,{variant:"outline",onClick:s,className:"flex-1 font-bold uppercase tracking-wider py-6",disabled:y,children:"Cancel"}),e.jsx(Ce,{onClick:()=>{const w=i.reduce((Q,k)=>Q+(k.qty||1)*(k.supply_rate||0),0),B=i.reduce((Q,k)=>Q+(k.qty||1)*(k.install_rate||0),0),U={id:`CONSOLIDATED_${t.id}_${d?.product.id||"default"}`,bill_no:`PRODUCT_${t.id}`,estimator:Xc(t)||"generic",group_id:t.id,title:t.name,description:`Consolidated configuration for ${t.name}`,unit:d?.product.required_unit_type||"Sqft",qty:1,supply_rate:w,install_rate:B,config_id:d?.product.id,step11_items:i};n([U])},disabled:i.length===0||y,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold uppercase tracking-wider py-6 shadow-lg transition-all hover:scale-[1.02]",children:y?"Adding...":"Add to BOQ"})]})]})]})]})})}function yR(t,s,n,r,i){r=r||{};var c=1.15,A=i.internal.scaleFactor,u=i.internal.getFontSize()/A,d=i.getLineHeightFactor?i.getLineHeightFactor():c,h=u*d,o=/\r\n|\r|\n/g,m="",y=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(m=typeof t=="string"?t.split(o):t,y=m.length||1),n+=u*(2-c),r.valign==="middle"?n-=y/2*h:r.valign==="bottom"&&(n-=y*h),r.halign==="center"||r.halign==="right"){var p=u;if(r.halign==="center"&&(p*=.5),m&&y>=1){for(var j=0;j<m.length;j++)i.text(m[j],s-i.getStringUnitWidth(m[j])*p,n),n+=h;return i}s-=i.getStringUnitWidth(t)*p}return r.halign==="justify"?i.text(t,s,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(t,s,n),i}var WB={},Ef=(function(){function t(s){this.jsPDFDocument=s,this.userStyles={textColor:s.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:s.internal.getFontSize(),fontStyle:s.internal.getFont().fontStyle,font:s.internal.getFont().fontName,lineWidth:s.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:s.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(s,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=s:WB=s},t.unifyColor=function(s){return Array.isArray(s)?s:typeof s=="number"?[s,s,s]:typeof s=="string"?[s]:null},t.prototype.applyStyles=function(s,n){var r,i,c;n===void 0&&(n=!1),s.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(s.fontStyle);var A=this.jsPDFDocument.internal.getFont(),u=A.fontStyle,d=A.fontName;if(s.font&&(d=s.font),s.fontStyle){u=s.fontStyle;var h=this.getFontList()[d];h&&h.indexOf(u)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(h[0]),u=h[0])}if(this.jsPDFDocument.setFont(d,u),s.fontSize&&this.jsPDFDocument.setFontSize(s.fontSize),!n){var o=t.unifyColor(s.fillColor);o&&(r=this.jsPDFDocument).setFillColor.apply(r,o),o=t.unifyColor(s.textColor),o&&(i=this.jsPDFDocument).setTextColor.apply(i,o),o=t.unifyColor(s.lineColor),o&&(c=this.jsPDFDocument).setDrawColor.apply(c,o),typeof s.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(s.lineWidth)}},t.prototype.splitTextToSize=function(s,n,r){return this.jsPDFDocument.splitTextToSize(s,n,r)},t.prototype.rect=function(s,n,r,i,c){return this.jsPDFDocument.rect(s,n,r,i,c)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(s){return this.jsPDFDocument.getTextWidth(s)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(s){this.jsPDFDocument.setPage(s)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return WB||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var s=this.jsPDFDocument.internal.pageSize;return s.width==null&&(s={width:s.getWidth(),height:s.getHeight()}),s},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var s=this.jsPDFDocument;return s.getLineHeightFactor?s.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(s){return s/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var s=this.jsPDFDocument.internal.getCurrentPageInfo();return s?s.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t})(),a1=function(t,s){return a1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},a1(t,s)};function xR(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a1(t,s);function n(){this.constructor=t}t.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}var vR=(function(t){xR(s,t);function s(n){var r=t.call(this)||this;return r._element=n,r}return s})(Array);function bG(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function jG(t){var s={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return s[t]}function sx(t,s,n){n.applyStyles(s,!0);var r=Array.isArray(t)?t:[t],i=r.map(function(c){return n.getTextWidth(c)}).reduce(function(c,A){return Math.max(c,A)},0);return i}function bR(t,s,n,r){var i=s.settings.tableLineWidth,c=s.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:c});var A=jR(i,!1);A&&t.rect(n.x,n.y,s.getWidth(t.pageSize().width),r.y-n.y,A)}function jR(t,s){var n=t>0,r=s||s===0;return n&&r?"DF":n?"S":r?"F":null}function kx(t,s){var n,r,i,c;if(t=t||s,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=s}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:s,top:(r=t.top)!==null&&r!==void 0?r:s,right:(i=t.right)!==null&&i!==void 0?i:s,bottom:(c=t.bottom)!==null&&c!==void 0?c:s}):(typeof t!="number"&&(t=s),{top:t,right:t,bottom:t,left:t})}function wR(t,s){var n=kx(s.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function wG(t,s,n,r,i){var c={},A=1.3333333333333333,u=Kv(s,function(Q){return i.getComputedStyle(Q).backgroundColor});u!=null&&(c.fillColor=u);var d=Kv(s,function(Q){return i.getComputedStyle(Q).color});d!=null&&(c.textColor=d);var h=NG(r,n);h&&(c.cellPadding=h);var o="borderTopColor",m=A*n,y=r.borderTopWidth;if(r.borderBottomWidth===y&&r.borderRightWidth===y&&r.borderLeftWidth===y){var p=(parseFloat(y)||0)/m;p&&(c.lineWidth=p)}else c.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/m,right:(parseFloat(r.borderRightWidth)||0)/m,bottom:(parseFloat(r.borderBottomWidth)||0)/m,left:(parseFloat(r.borderLeftWidth)||0)/m},c.lineWidth.top||(c.lineWidth.right?o="borderRightColor":c.lineWidth.bottom?o="borderBottomColor":c.lineWidth.left&&(o="borderLeftColor"));var j=Kv(s,function(Q){return i.getComputedStyle(Q)[o]});j!=null&&(c.lineColor=j);var b=["left","right","center","justify"];b.indexOf(r.textAlign)!==-1&&(c.halign=r.textAlign),b=["middle","bottom","top"],b.indexOf(r.verticalAlign)!==-1&&(c.valign=r.verticalAlign);var w=parseInt(r.fontSize||"");isNaN(w)||(c.fontSize=w/A);var B=SG(r);B&&(c.fontStyle=B);var U=(r.fontFamily||"").toLowerCase();return t.indexOf(U)!==-1&&(c.font=U),c}function SG(t){var s="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(s="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(s+="italic"),s}function Kv(t,s){var n=SR(t,s);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],c=parseInt(r[4]);return c===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function SR(t,s){var n=s(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:SR(t.parentElement,s):n}function NG(t,s){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/s),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/s/2,c=n.map(function(u){return parseInt(u||"0")/r}),A=kx(c,0);return i>A.top&&(A.top=i),i>A.bottom&&(A.bottom=i),A}function NR(t,s,n,r,i){var c,A;r===void 0&&(r=!1),i===void 0&&(i=!1);var u;typeof s=="string"?u=n.document.querySelector(s):u=s;var d=Object.keys(t.getFontList()),h=t.scaleFactor(),o=[],m=[],y=[];if(!u)return console.error("Html table could not be found with input: ",s),{head:o,body:m,foot:y};for(var p=0;p<u.rows.length;p++){var j=u.rows[p],b=(A=(c=j?.parentElement)===null||c===void 0?void 0:c.tagName)===null||A===void 0?void 0:A.toLowerCase(),w=BG(d,h,n,j,r,i);w&&(b==="thead"?o.push(w):b==="tfoot"?y.push(w):m.push(w))}return{head:o,body:m,foot:y}}function BG(t,s,n,r,i,c){for(var A=new vR(r),u=0;u<r.cells.length;u++){var d=r.cells[u],h=n.getComputedStyle(d);if(i||h.display!=="none"){var o=void 0;c&&(o=wG(t,d,s,h,n)),A.push({rowSpan:d.rowSpan,colSpan:d.colSpan,styles:o,_element:d,content:CG(d)})}}var m=n.getComputedStyle(r);if(A.length>0&&(i||m.display!=="none"))return A}function CG(t){var s=t.cloneNode(!0);return s.innerHTML=s.innerHTML.replace(/\n/g,"").replace(/ +/g," "),s.innerHTML=s.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),s.innerText||s.textContent||""}function EG(t,s,n){for(var r=0,i=[t,s,n];r<i.length;r++){var c=i[r];c&&typeof c!="object"&&console.error("The options parameter should be of type object, is: "+typeof c),c.startY&&typeof c.startY!="number"&&(console.error("Invalid value for startY option",c.startY),delete c.startY)}}function hA(t,s,n,r,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(t),A=1;A<arguments.length;A++){var u=arguments[A];if(u!=null)for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])}return c}function BR(t,s){var n=new Ef(t),r=n.getDocumentOptions(),i=n.getGlobalOptions();EG(i,r,s);var c=hA({},i,r,s),A;typeof window<"u"&&(A=window);var u=TG(i,r,s),d=FG(i,r,s),h=IG(n,c),o=OG(n,c,A);return{id:s.tableId,content:o,hooks:d,styles:u,settings:h}}function TG(t,s,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(d){if(d==="columnStyles"){var h=t[d],o=s[d],m=n[d];r.columnStyles=hA({},h,o,m)}else{var y=[t,s,n],p=y.map(function(j){return j[d]||{}});r[d]=hA({},p[0],p[1],p[2])}},c=0,A=Object.keys(r);c<A.length;c++){var u=A[c];i(u)}return r}function FG(t,s,n){for(var r=[t,s,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},c=0,A=r;c<A.length;c++){var u=A[c];u.didParseCell&&i.didParseCell.push(u.didParseCell),u.willDrawCell&&i.willDrawCell.push(u.willDrawCell),u.didDrawCell&&i.didDrawCell.push(u.didDrawCell),u.willDrawPage&&i.willDrawPage.push(u.willDrawPage),u.didDrawPage&&i.didDrawPage.push(u.didDrawPage)}return i}function IG(t,s){var n,r,i,c,A,u,d,h,o,m,y,p,j=kx(s.margin,40/t.scaleFactor()),b=(n=RG(t,s.startY))!==null&&n!==void 0?n:j.top,w;s.showFoot===!0?w="everyPage":s.showFoot===!1?w="never":w=(r=s.showFoot)!==null&&r!==void 0?r:"everyPage";var B;s.showHead===!0?B="everyPage":s.showHead===!1?B="never":B=(i=s.showHead)!==null&&i!==void 0?i:"everyPage";var U=(c=s.useCss)!==null&&c!==void 0?c:!1,Q=s.theme||(U?"plain":"striped"),k=!!s.horizontalPageBreak,K=(A=s.horizontalPageBreakRepeat)!==null&&A!==void 0?A:null;return{includeHiddenHtml:(u=s.includeHiddenHtml)!==null&&u!==void 0?u:!1,useCss:U,theme:Q,startY:b,margin:j,pageBreak:(d=s.pageBreak)!==null&&d!==void 0?d:"auto",rowPageBreak:(h=s.rowPageBreak)!==null&&h!==void 0?h:"auto",tableWidth:(o=s.tableWidth)!==null&&o!==void 0?o:"auto",showHead:B,showFoot:w,tableLineWidth:(m=s.tableLineWidth)!==null&&m!==void 0?m:0,tableLineColor:(y=s.tableLineColor)!==null&&y!==void 0?y:200,horizontalPageBreak:k,horizontalPageBreakRepeat:K,horizontalPageBreakBehaviour:(p=s.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function RG(t,s){var n=t.getLastAutoTable(),r=t.scaleFactor(),i=t.pageNumber(),c=!1;if(n&&n.startPageNumber){var A=n.startPageNumber+n.pageNumber-1;c=A===i}return typeof s=="number"?s:(s==null||s===!1)&&c&&n?.finalY!=null?n.finalY+20/r:null}function OG(t,s,n){var r=s.head||[],i=s.body||[],c=s.foot||[];if(s.html){var A=s.includeHiddenHtml;if(n){var u=NR(t,s.html,n,A,s.useCss)||{};r=u.head||r,i=u.body||r,c=u.foot||r}else console.error("Cannot parse html in non browser environment")}var d=s.columns||UG(r,i,c);return{columns:d,head:r,body:i,foot:c}}function UG(t,s,n){var r=t[0]||s[0]||n[0]||[],i=[];return Object.keys(r).filter(function(c){return c!=="_element"}).forEach(function(c){var A=1,u;Array.isArray(r)?u=r[parseInt(c)]:u=r[c],typeof u=="object"&&!Array.isArray(u)&&(A=u?.colSpan||1);for(var d=0;d<A;d++){var h=void 0;Array.isArray(r)?h=i.length:h=c+(d>0?"_".concat(d):"");var o={dataKey:h};i.push(o)}}),i}var i1=(function(){function t(s,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=s.getDocument()}return t})(),LG=(function(t){xR(s,t);function s(n,r,i,c,A,u){var d=t.call(this,n,r,u)||this;return d.cell=i,d.row=c,d.column=A,d.section=c.section,d}return s})(i1),DG=(function(){function t(s,n){this.pageNumber=1,this.id=s.id,this.settings=s.settings,this.styles=s.styles,this.hooks=s.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(s){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(s)},0)},t.prototype.getFootHeight=function(s){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(s)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(s,n,r,i,c,A){for(var u=0,d=n;u<d.length;u++){var h=d[u],o=new LG(s,this,r,i,c,A),m=h(o)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],m)return!1}return!0},t.prototype.callEndPageHooks=function(s,n){s.applyStyles(s.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var c=i[r];c(new i1(s,this,n))}},t.prototype.callWillDrawPageHooks=function(s,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var c=i[r];c(new i1(s,this,n))}},t.prototype.getWidth=function(s){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,c){return i+c.wrappedWidth},0);return n}else{var r=this.settings.margin;return s-r.left-r.right}},t})(),CR=(function(){function t(s,n,r,i,c){c===void 0&&(c=!1),this.height=0,this.raw=s,s instanceof vR&&(this.raw=s._element,this.element=s._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=c}return t.prototype.getMaxCellHeight=function(s){var n=this;return s.reduce(function(r,i){var c;return Math.max(r,((c=n.cells[i.index])===null||c===void 0?void 0:c.height)||0)},0)},t.prototype.hasRowSpan=function(s){var n=this;return s.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(s,n){return this.getMaxCellHeight(n)<=s},t.prototype.getMinimumRowHeight=function(s,n){var r=this;return s.reduce(function(i,c){var A=r.cells[c.index];if(!A)return 0;var u=n.getLineHeight(A.styles.fontSize),d=A.padding("vertical"),h=d+u;return h>i?h:i},0)},t})(),ER=(function(){function t(s,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=s;var c=s;s!=null&&typeof s=="object"&&!Array.isArray(s)?(this.rowSpan=s.rowSpan||1,this.colSpan=s.colSpan||1,c=(i=s.content)!==null&&i!==void 0?i:s,s._element&&(this.raw=s._element)):(this.rowSpan=1,this.colSpan=1);var A=c!=null?""+c:"",u=/\r\n|\r|\n/g;this.text=A.split(u)}return t.prototype.getTextPos=function(){var s;if(this.styles.valign==="top")s=this.y+this.padding("top");else if(this.styles.valign==="bottom")s=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");s=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:s}},t.prototype.getContentHeight=function(s,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/s*n,c=r*i+this.padding("vertical");return Math.max(c,this.styles.minCellHeight)},t.prototype.padding=function(s){var n=kx(this.styles.cellPadding,0);return s==="vertical"?n.top+n.bottom:s==="horizontal"?n.left+n.right:n[s]},t})(),QG=(function(){function t(s,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=s,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(s){for(var n=0,r=0,i=s.allRows();r<i.length;r++){var c=i[r],A=c.cells[this.index];A&&typeof A.styles.cellWidth=="number"&&(n=Math.max(n,A.styles.cellWidth))}return n},t})();function _G(t,s){MG(t,s);var n=[],r=0;s.columns.forEach(function(c){var A=c.getMaxCustomCellWidth(s);A?c.width=A:(c.width=c.wrappedWidth,n.push(c)),r+=c.width});var i=s.getWidth(t.pageSize().width)-r;i&&(i=o1(n,i,function(c){return Math.max(c.minReadableWidth,c.minWidth)})),i&&(i=o1(n,i,function(c){return c.minWidth})),i=Math.abs(i),!s.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),kG(s),HG(s,t),PG(s)}function MG(t,s){var n=t.scaleFactor(),r=s.settings.horizontalPageBreak,i=wR(t,s);s.allRows().forEach(function(c){for(var A=0,u=s.columns;A<u.length;A++){var d=u[A],h=c.cells[d.index];if(h){var o=s.hooks.didParseCell;s.callCellHooks(t,o,h,c,d,null);var m=h.padding("horizontal");h.contentWidth=sx(h.text,h.styles,t)+m;var y=sx(h.text.join(" ").split(/[^\S\u00A0]+/),h.styles,t);if(h.minReadableWidth=y+h.padding("horizontal"),typeof h.styles.cellWidth=="number")h.minWidth=h.styles.cellWidth,h.wrappedWidth=h.styles.cellWidth;else if(h.styles.cellWidth==="wrap"||r===!0)h.contentWidth>i?(h.minWidth=i,h.wrappedWidth=i):(h.minWidth=h.contentWidth,h.wrappedWidth=h.contentWidth);else{var p=10/n;h.minWidth=h.styles.minCellWidth||p,h.wrappedWidth=h.contentWidth,h.minWidth>h.wrappedWidth&&(h.wrappedWidth=h.minWidth)}}}}),s.allRows().forEach(function(c){for(var A=0,u=s.columns;A<u.length;A++){var d=u[A],h=c.cells[d.index];if(h&&h.colSpan===1)d.wrappedWidth=Math.max(d.wrappedWidth,h.wrappedWidth),d.minWidth=Math.max(d.minWidth,h.minWidth),d.minReadableWidth=Math.max(d.minReadableWidth,h.minReadableWidth);else{var o=s.styles.columnStyles[d.dataKey]||s.styles.columnStyles[d.index]||{},m=o.cellWidth||o.minCellWidth;m&&typeof m=="number"&&(d.minWidth=m,d.wrappedWidth=m)}h&&(h.colSpan>1&&!d.minWidth&&(d.minWidth=h.minWidth),h.colSpan>1&&!d.wrappedWidth&&(d.wrappedWidth=h.minWidth))}})}function o1(t,s,n){for(var r=s,i=t.reduce(function(p,j){return p+j.wrappedWidth},0),c=0;c<t.length;c++){var A=t[c],u=A.wrappedWidth/i,d=r*u,h=A.width+d,o=n(A),m=h<o?o:h;s-=m-A.width,A.width=m}if(s=Math.round(s*1e10)/1e10,s){var y=t.filter(function(p){return s<0?p.width>n(p):!0});y.length&&(s=o1(y,s,n))}return s}function PG(t){for(var s={},n=1,r=t.allRows(),i=0;i<r.length;i++)for(var c=r[i],A=0,u=t.columns;A<u.length;A++){var d=u[A],h=s[d.index];if(n>1)n--,delete c.cells[d.index];else if(h)h.cell.height+=c.height,n=h.cell.colSpan,delete c.cells[d.index],h.left--,h.left<=1&&delete s[d.index];else{var o=c.cells[d.index];if(!o)continue;if(o.height=c.height,o.rowSpan>1){var m=r.length-i,y=o.rowSpan>m?m:o.rowSpan;s[d.index]={cell:o,left:y,row:c}}}}}function kG(t){for(var s=t.allRows(),n=0;n<s.length;n++)for(var r=s[n],i=null,c=0,A=0,u=0;u<t.columns.length;u++){var d=t.columns[u];if(A-=1,A>1&&t.columns[u+1])c+=d.width,delete r.cells[d.index];else if(i){var h=i;delete r.cells[d.index],i=null,h.width=d.width+c}else{var h=r.cells[d.index];if(!h)continue;if(A=h.colSpan,c=0,h.colSpan>1){i=h,c+=d.width;continue}h.width=d.width+c}}}function HG(t,s){for(var n={count:0,height:0},r=0,i=t.allRows();r<i.length;r++){for(var c=i[r],A=0,u=t.columns;A<u.length;A++){var d=u[A],h=c.cells[d.index];if(h){s.applyStyles(h.styles,!0);var o=h.width-h.padding("horizontal");if(h.styles.overflow==="linebreak")h.text=s.splitTextToSize(h.text,o+1/s.scaleFactor(),{fontSize:h.styles.fontSize});else if(h.styles.overflow==="ellipsize")h.text=YB(h.text,o,h.styles,s,"...");else if(h.styles.overflow==="hidden")h.text=YB(h.text,o,h.styles,s,"");else if(typeof h.styles.overflow=="function"){var m=h.styles.overflow(h.text,o);typeof m=="string"?h.text=[m]:h.text=m}h.contentHeight=h.getContentHeight(s.scaleFactor(),s.getLineHeightFactor());var y=h.contentHeight/h.rowSpan;h.rowSpan>1&&n.count*n.height<y*h.rowSpan?n={height:y,count:h.rowSpan}:n&&n.count>0&&n.height>y&&(y=n.height),y>c.height&&(c.height=y)}}n.count--}}function YB(t,s,n,r,i){return t.map(function(c){return zG(c,s,n,r,i)})}function zG(t,s,n,r,i){var c=1e4*r.scaleFactor();if(s=Math.ceil(s*c)/c,s>=sx(t,n,r))return t;for(;s<sx(t+i,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function TR(t,s){var n=new Ef(t),r=KG(s,n.scaleFactor()),i=new DG(s,r);return _G(n,i),n.applyStyles(n.userStyles),i}function KG(t,s){var n=t.content,r=VG(n.columns);if(n.head.length===0){var i=XB(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=XB(r,"foot");i&&n.foot.push(i)}var c=t.settings.theme,A=t.styles;return{columns:r,head:$v("head",n.head,r,A,c,s),body:$v("body",n.body,r,A,c,s),foot:$v("foot",n.foot,r,A,c,s)}}function $v(t,s,n,r,i,c){var A={},u=s.map(function(d,h){for(var o=0,m={},y=0,p=0,j=0,b=n;j<b.length;j++){var w=b[j];if(A[w.index]==null||A[w.index].left===0)if(p===0){var B=void 0;Array.isArray(d)?B=d[w.index-y-o]:B=d[w.dataKey];var U={};typeof B=="object"&&!Array.isArray(B)&&(U=B?.styles||{});var Q=qG(t,w,h,i,r,c,U),k=new ER(B,Q,t);m[w.dataKey]=k,m[w.index]=k,p=k.colSpan-1,A[w.index]={left:k.rowSpan-1,times:p}}else p--,y++;else A[w.index].left--,p=A[w.index].times,o++}return new CR(d,h,t,m)});return u}function XB(t,s){var n={};return t.forEach(function(r){if(r.raw!=null){var i=$G(s,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function $G(t,s){if(t==="head"){if(typeof s=="object")return s.header||null;if(typeof s=="string"||typeof s=="number")return s}else if(t==="foot"&&typeof s=="object")return s.footer;return null}function VG(t){return t.map(function(s,n){var r,i;return typeof s=="object"?i=(r=s.dataKey)!==null&&r!==void 0?r:n:i=n,new QG(i,s,n)})}function qG(t,s,n,r,i,c,A){var u=jG(r),d;t==="head"?d=i.headStyles:t==="body"?d=i.bodyStyles:t==="foot"&&(d=i.footStyles);var h=hA({},u.table,u[t],i.styles,d),o=i.columnStyles[s.dataKey]||i.columnStyles[s.index]||{},m=t==="body"?o:{},y=t==="body"&&n%2===0?hA({},u.alternateRow,i.alternateRowStyles):{},p=bG(c),j=hA({},p,h,y,m);return hA(j,A)}function GG(t,s,n){var r;n===void 0&&(n={});var i=wR(t,s),c=new Map,A=[],u=[],d=[];Array.isArray(s.settings.horizontalPageBreakRepeat)?d=s.settings.horizontalPageBreakRepeat:(typeof s.settings.horizontalPageBreakRepeat=="string"||typeof s.settings.horizontalPageBreakRepeat=="number")&&(d=[s.settings.horizontalPageBreakRepeat]),d.forEach(function(y){var p=s.columns.find(function(j){return j.dataKey===y||j.index===y});p&&!c.has(p.index)&&(c.set(p.index,!0),A.push(p.index),u.push(s.columns[p.index]),i-=p.wrappedWidth)});for(var h=!0,o=(r=n?.start)!==null&&r!==void 0?r:0;o<s.columns.length;){if(c.has(o)){o++;continue}var m=s.columns[o].wrappedWidth;if(h||i>=m)h=!1,A.push(o),u.push(s.columns[o]),i-=m;else break;o++}return{colIndexes:A,columns:u,lastIndex:o-1}}function WG(t,s){for(var n=[],r=0;r<s.columns.length;r++){var i=GG(t,s,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function FR(t,s){var n=s.settings,r=n.startY,i=n.margin,c={x:i.left,y:r},A=s.getHeadHeight(s.columns)+s.getFootHeight(s.columns),u=r+i.bottom+A;if(n.pageBreak==="avoid"){var d=s.body,h=d.reduce(function(y,p){return y+p.height},0);u+=h}var o=new Ef(t);(n.pageBreak==="always"||n.startY!=null&&u>o.pageSize().height)&&(RR(o),c.y=i.top),s.callWillDrawPageHooks(o,c);var m=hA({},c);s.startPageNumber=o.pageNumber(),n.horizontalPageBreak?YG(o,s,m,c):(o.applyStyles(o.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&s.head.forEach(function(y){return yA(o,s,y,c,s.columns)}),o.applyStyles(o.userStyles),s.body.forEach(function(y,p){var j=p===s.body.length-1;nx(o,s,y,j,m,c,s.columns)}),o.applyStyles(o.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&s.foot.forEach(function(y){return yA(o,s,y,c,s.columns)})),bR(o,s,m,c),s.callEndPageHooks(o,c),s.finalY=c.y,t.lastAutoTable=s,o.applyStyles(o.userStyles)}function YG(t,s,n,r){var i=WG(t,s),c=s.settings;if(c.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(h,o){t.applyStyles(t.userStyles),o>0?om(t,s,n,r,h.columns,!0):JB(t,s,r,h.columns),XG(t,s,n,r,h.columns),Vv(t,s,r,h.columns)});else for(var A=-1,u=i[0],d=function(){var h=A;if(u){t.applyStyles(t.userStyles);var o=u.columns;A>=0?om(t,s,n,r,o,!0):JB(t,s,r,o),h=ZB(t,s,A+1,r,o),Vv(t,s,r,o)}var m=h-A;i.slice(1).forEach(function(y){t.applyStyles(t.userStyles),om(t,s,n,r,y.columns,!0),ZB(t,s,A+1,r,y.columns,m),Vv(t,s,r,y.columns)}),A=h};A<s.body.length-1;)d()}function JB(t,s,n,r){var i=s.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&s.head.forEach(function(c){return yA(t,s,c,n,r)})}function XG(t,s,n,r,i){t.applyStyles(t.userStyles),s.body.forEach(function(c,A){var u=A===s.body.length-1;nx(t,s,c,u,n,r,i)})}function ZB(t,s,n,r,i,c){t.applyStyles(t.userStyles),c=c??s.body.length;var A=Math.min(n+c,s.body.length),u=-1;return s.body.slice(n,A).forEach(function(d,h){var o=n+h===s.body.length-1,m=IR(t,s,o,r);d.canEntireRowFit(m,i)&&(yA(t,s,d,r,i),u=n+h)}),u}function Vv(t,s,n,r){var i=s.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&s.foot.forEach(function(c){return yA(t,s,c,n,r)})}function JG(t,s,n){var r=n.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),c=Math.floor((s-i)/r);return Math.max(0,c)}function ZG(t,s,n,r){var i={};t.spansMultiplePages=!0,t.height=0;for(var c=0,A=0,u=n.columns;A<u.length;A++){var d=u[A],h=t.cells[d.index];if(h){Array.isArray(h.text)||(h.text=[h.text]);var o=new ER(h.raw,h.styles,h.section);o=hA(o,h),o.text=[];var m=JG(h,s,r);h.text.length>m&&(o.text=h.text.splice(m,h.text.length));var y=r.scaleFactor(),p=r.getLineHeightFactor();h.contentHeight=h.getContentHeight(y,p),h.contentHeight>=s&&(h.contentHeight=s,o.styles.minCellHeight-=s),h.contentHeight>t.height&&(t.height=h.contentHeight),o.contentHeight=o.getContentHeight(y,p),o.contentHeight>c&&(c=o.contentHeight),i[d.index]=o}}var j=new CR(t.raw,-1,t.section,i,!0);j.height=c;for(var b=0,w=n.columns;b<w.length;b++){var d=w[b],o=j.cells[d.index];o&&(o.height=j.height);var h=t.cells[d.index];h&&(h.height=t.height)}return j}function eW(t,s,n,r){var i=t.pageSize().height,c=r.settings.margin,A=c.top+c.bottom,u=i-A;s.section==="body"&&(u-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var d=s.getMinimumRowHeight(r.columns,t),h=d<n;if(d>u)return console.error("Will not be able to print row ".concat(s.index," correctly since it's minimum height is larger than page height")),!0;if(!h)return!1;var o=s.hasRowSpan(r.columns),m=s.getMaxCellHeight(r.columns)>u;return m?(o&&console.error("The content of row ".concat(s.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(o||r.settings.rowPageBreak==="avoid")}function nx(t,s,n,r,i,c,A){var u=IR(t,s,r,c);if(n.canEntireRowFit(u,A))yA(t,s,n,c,A);else if(eW(t,n,u,s)){var d=ZG(n,u,s,t);yA(t,s,n,c,A),om(t,s,i,c,A),nx(t,s,d,r,i,c,A)}else om(t,s,i,c,A),nx(t,s,n,r,i,c,A)}function yA(t,s,n,r,i){r.x=s.settings.margin.left;for(var c=0,A=i;c<A.length;c++){var u=A[c],d=n.cells[u.index];if(!d){r.x+=u.width;continue}t.applyStyles(d.styles),d.x=r.x,d.y=r.y;var h=s.callCellHooks(t,s.hooks.willDrawCell,d,n,u,r);if(h===!1){r.x+=u.width;continue}tW(t,d,r);var o=d.getTextPos();yR(d.text,o.x,o.y,{halign:d.styles.halign,valign:d.styles.valign,maxWidth:Math.ceil(d.width-d.padding("left")-d.padding("right"))},t.getDocument()),s.callCellHooks(t,s.hooks.didDrawCell,d,n,u,r),r.x+=u.width}r.y+=n.height}function tW(t,s,n){var r=s.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=jR(r.lineWidth,r.fillColor);i&&t.rect(s.x,n.y,s.width,s.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(s.x,n.y,s.width,s.height,"F"),sW(t,s,n,r.lineWidth))}function sW(t,s,n,r){var i,c,A,u;r.top&&(i=n.x,c=n.y,A=n.x+s.width,u=n.y,r.right&&(A+=.5*r.right),r.left&&(i-=.5*r.left),d(r.top,i,c,A,u)),r.bottom&&(i=n.x,c=n.y+s.height,A=n.x+s.width,u=n.y+s.height,r.right&&(A+=.5*r.right),r.left&&(i-=.5*r.left),d(r.bottom,i,c,A,u)),r.left&&(i=n.x,c=n.y,A=n.x,u=n.y+s.height,r.top&&(c-=.5*r.top),r.bottom&&(u+=.5*r.bottom),d(r.left,i,c,A,u)),r.right&&(i=n.x+s.width,c=n.y,A=n.x+s.width,u=n.y+s.height,r.top&&(c-=.5*r.top),r.bottom&&(u+=.5*r.bottom),d(r.right,i,c,A,u));function d(h,o,m,y,p){t.getDocument().setLineWidth(h),t.getDocument().line(o,m,y,p,"S")}}function IR(t,s,n,r){var i=s.settings.margin.bottom,c=s.settings.showFoot;return(c==="everyPage"||c==="lastPage"&&n)&&(i+=s.getFootHeight(s.columns)),t.pageSize().height-r.y-i}function om(t,s,n,r,i,c){i===void 0&&(i=[]),c===void 0&&(c=!1),t.applyStyles(t.userStyles),s.settings.showFoot==="everyPage"&&!c&&s.foot.forEach(function(u){return yA(t,s,u,r,i)}),s.callEndPageHooks(t,r);var A=s.settings.margin;bR(t,s,n,r),RR(t),s.pageNumber++,r.x=A.left,r.y=A.top,n.y=A.top,s.callWillDrawPageHooks(t,r),s.settings.showHead==="everyPage"&&(s.head.forEach(function(u){return yA(t,s,u,r,i)}),t.applyStyles(t.userStyles))}function RR(t){var s=t.pageNumber();t.setPage(s+1);var n=t.pageNumber();return n===s?(t.addPage(),!0):!1}function nW(t){t.API.autoTable=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];var r=s[0],i=BR(this,r),c=TR(this,i);return FR(this,c),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(s,n,r,i){yR(s,n,r,i,this)},t.API.autoTableSetDefaults=function(s){return Ef.setDefaults(s,this),this},t.autoTableSetDefaults=function(s,n){Ef.setDefaults(s,n)},t.API.autoTableHtmlToJson=function(s,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Ef(this),c=NR(i,s,window,n,!1),A=c.head,u=c.body,d=((r=A[0])===null||r===void 0?void 0:r.map(function(h){return h.content}))||[];return{columns:d,rows:u,data:u}}}var qv;function OR(t,s){var n=BR(t,s),r=TR(t,n);FR(t,r)}try{if(typeof window<"u"&&window){var eC=window,tC=eC.jsPDF||((qv=eC.jspdf)===null||qv===void 0?void 0:qv.jsPDF);tC&&nW(tC)}}catch(t){console.error("Could not apply autoTable plugin",t)}function rW(){const[t,s]=S.useState([]),[n,r]=S.useState([]),[i,c]=S.useState([]),[A,u]=S.useState(""),[d,h]=S.useState(""),[o,m]=S.useState(""),[y,p]=S.useState(""),[j,b]=S.useState(null),[w,B]=S.useState(null),[U,Q]=S.useState(!1),[k,K]=S.useState(null),[ee,q]=S.useState(!1),[G,W]=S.useState(!1),[he,Z]=S.useState(null),[ie,ce]=S.useState(!1),[ae,de]=S.useState(1),[se,re]=S.useState([]),[te,be]=S.useState(new Set),[He,pe]=S.useState(null),[Y,me]=S.useState(!0),[Se]=co(),{toast:je}=ua(),[Le,ge]=S.useState(null),[ye,we]=S.useState({}),Ne=S.useRef(ye);S.useEffect(()=>{Ne.current=ye},[ye]),S.useEffect(()=>{(async()=>{try{const Tt=await lt("/api/boq-projects",{headers:{}});if(Tt.ok){const Je=await Tt.json();s(Je.projects||[])}}catch(Tt){console.error("Failed to load projects:",Tt)}finally{me(!1)}})()},[]),S.useEffect(()=>{if(!j){c([]),B(null),r([]);return}(async()=>{try{const Tt=await lt(`/api/boq-versions/${encodeURIComponent(j)}`,{headers:{}});if(Tt.ok){const vt=(await Tt.json()).versions||[];if(c(vt),!(w&&vt.some($e=>$e.id===w))){const $e=vt.find(St=>St.status==="draft");$e?B($e.id):vt.length>0?B(vt[0].id):B(null)}}}catch(Tt){console.error("Failed to load versions:",Tt)}})()},[j]);const ke=async()=>{if(w)try{const ze=async Je=>{const vt=(Je.headers.get("content-type")||"").toLowerCase(),$e=await Je.text();if(Je.status===204||$e.trim()==="")return{};if(vt.includes("application/json"))try{return JSON.parse($e)}catch(bt){throw console.error("safeParseJson: JSON parse failed",{url:Je.url,status:Je.status,bodySnippet:$e.slice(0,300),error:bt}),new Error("Invalid JSON response from server")}const St=$e.trim();if(St.startsWith("{")||St.startsWith("["))try{return JSON.parse(St)}catch(bt){throw console.error("safeParseJson: body looks like JSON but parse failed",{url:Je.url,status:Je.status,bodySnippet:St.slice(0,300),error:bt}),new Error("Invalid JSON response from server")}console.error("safeParseJson: server returned non-JSON response",{url:Je.url,status:Je.status,contentType:vt,bodySnippet:$e.slice(0,200)});const Rt=St.startsWith("<!DOCTYPE html")?"Looks like the request hit the frontend dev server (index.html) instead of the backend API. Check VITE_API_BASE_URL and dev server ports.":void 0,Zt=`Server returned non-JSON response (status=${Je.status})${Rt?" - "+Rt:""}`;throw new Error(Zt)},Tt=await lt(`/api/boq-items/version/${encodeURIComponent(w)}`,{headers:{}});if(Tt.ok)try{const Je=await ze(Tt);r(Je.items||[])}catch(Je){je({title:"Error",description:"Failed to parse BOQ items response",variant:"destructive"}),console.error("BOQ items parse error:",Je)}else{const Je=await Tt.text();console.error("Failed to fetch BOQ items:",Tt.status,Je),je({title:"Error",description:`Failed to load BOQ items (${Tt.status})`,variant:"destructive"})}}catch(ze){console.error("Failed to load BOQ items:",ze),je({title:"Error",description:"Failed to load BOQ items",variant:"destructive"})}};S.useEffect(()=>{if(!w){r([]),we({}),Ne.current={};return}ke()},[w]),S.useEffect(()=>{try{const ze=typeof Se=="string"&&Se.split("?")[1]||"",Je=new URLSearchParams(ze).get("project");Je&&Je!==j&&t.find($e=>$e.id===Je)&&b(Je)}catch{}},[Se,t]);const Be=()=>{j&&Q(!0)},Ae=ze=>{j&&(ge(ze||null),W(!0))},Qe=ze=>{K(ze),Q(!1),q(!0)},le=ze=>{Z(ze),W(!1),Le?rt(Le,ze):ct(ze),ge(null)},ct=async ze=>{if(!j||!w){je({title:"Error",description:"Please select a project and version",variant:"destructive"});return}try{const Tt={title:ze.name,description:ze.name,unit:"pcs",qty:1,supply_rate:0,install_rate:0,location:"Main Area",s_no:1},Je=await lt("/api/boq-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:j,version_id:w,estimator:`material_${ze.id}`,table_data:{product_name:ze.name,step11_items:[Tt]}})});if(!Je.ok){const St=await Je.text();throw console.error("API response error:",Je.status,St),new Error(`Failed to add material to BOM: ${Je.status} ${St}`)}const vt=await Je.json();console.log("Material added successfully:",vt),r(St=>[...St,vt]),je({title:"Success",description:`Added ${ze.name} to BOM`});const $e=await lt(`/api/boq-items/version/${encodeURIComponent(w)}`,{headers:{}});if($e.ok){const St=await $e.text();if(!($e.headers.get("content-type")||"").toLowerCase().includes("application/json"))console.error("Reload BOQ items: non-JSON response",{url:$e.url,status:$e.status,bodySnippet:St.slice(0,300)});else try{const Zt=JSON.parse(St);console.log("Reloaded BOQ items:",Zt),r(Zt.items||[])}catch(Zt){console.error("Reload BOQ items: JSON parse failed",{url:$e.url,status:$e.status,error:Zt,bodySnippet:St.slice(0,300)})}}}catch(Tt){console.error("Failed to add material to BOQ:",Tt),je({title:"Error",description:Tt instanceof Error?Tt.message:"Failed to add material to BOQ",variant:"destructive"})}},rt=async(ze,Tt)=>{try{const Je=n.find(Vt=>Vt.id===ze);if(!Je)throw new Error("Target Product group not found");let vt=Je.table_data;if(typeof vt=="string")try{vt=JSON.parse(vt)}catch(Vt){console.error("Failed to parse table_data",Vt),vt={}}const $e=Array.isArray(vt.step11_items)?vt.step11_items:[],St={title:Tt.name,description:Tt.name,unit:"pcs",qty:1,supply_rate:0,install_rate:0,location:"Main Area",s_no:$e.length+1},Rt=[...$e,St],Zt={...vt,step11_items:Rt};if(r(Vt=>Vt.map(vs=>vs.id===ze?{...vs,table_data:Zt}:vs)),!(await lt(`/api/boq-items/${encodeURIComponent(ze)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({table_data:Zt})})).ok)throw new Error("Failed to update product items");je({title:"Success",description:`Added ${Tt.name} to ${vt.product_name||"Product"}`}),ke()}catch(Je){console.error("Failed to add item to product:",Je),je({title:"Error",description:"Failed to add item to product",variant:"destructive"})}},ht=async ze=>{try{if(!confirm("This will consolidate all items into a single row with the total amount. Continue?"))return;const Tt=n.find(Vt=>Vt.id===ze);if(!Tt)return;let Je=Tt.table_data;if(typeof Je=="string")try{Je=JSON.parse(Je)}catch{Je={}}const vt=Array.isArray(Je.step11_items)?Je.step11_items:[];if(vt.length===0){je({title:"Info",description:"No items to finalize"});return}let $e=0,St=0;if(Je.materialLines&&Je.targetRequiredQty!==void 0){const Vt=lu(Je.configBasis,Je.materialLines,Je.targetRequiredQty);$e=Vt.totalSupply,St=Vt.totalInstall}else for(let Vt=0;Vt<vt.length;Vt++){const vs=vt[Vt],us=`${ze}-${Vt}`,jt=tt(us,"qty",vs.qty||0),kt=tt(us,"supply_rate",vs.supply_rate||0),Ft=tt(us,"install_rate",vs.install_rate||0);$e+=jt*kt,St+=jt*Ft}const Rt={title:Je.product_name||"Consolidated Product",description:`Consolidated configuration for ${Je.product_name||"Product"}`,unit:Je.configBasis?.requiredUnitType||"Sqft",qty:1,supply_rate:$e,install_rate:St,location:"Main Area",s_no:1},Zt=[];for(const Vt of vt)Array.isArray(Vt.step11_items)&&Vt.step11_items.length>0&&Zt.push(...Vt.step11_items);const bt={...Je,step11_items:[Rt],is_finalized:!0,original_items:vt,product_materials:Zt.length>0?Zt:void 0};r(Vt=>Vt.map(vs=>vs.id===ze?{...vs,table_data:bt}:vs)),we(Vt=>{const vs={...Vt};return Object.keys(vs).forEach(us=>{us.startsWith(`${ze}-`)&&delete vs[us]}),vs}),await lt(`/api/boq-items/${encodeURIComponent(ze)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({table_data:bt})}),je({title:"Success",description:"Product finalized"}),ke()}catch(Tt){console.error("Failed to finalize product:",Tt),je({title:"Error",description:"Failed to finalize product",variant:"destructive"})}},ft=async ze=>{if(!j||!k||!w){je({title:"Error",description:"Please select a project, version, and product",variant:"destructive"});return}de(100),re(ze),ce(!0)},Jt=async()=>{if(!(!k||!j||!w))try{ce(!1);const ze=await lt(`/api/product-step3-config/${k.id}`);let Tt=null,Je=[];if(ze.ok){const Zt=await ze.json();Zt.config&&(Tt={requiredUnitType:Zt.config.required_unit_type,baseRequiredQty:Math.max(.001,Number(Zt.config.base_required_qty||100)),wastagePctDefault:Number(Zt.config.wastage_pct_default||0)},Je=(Zt.items||[]).map(bt=>({id:bt.material_id,name:bt.material_name,unit:bt.unit,baseQty:Number(bt.base_qty??bt.qty??0),wastagePct:bt.wastage_pct!==null?Number(bt.wastage_pct):void 0,supplyRate:Number(bt.supply_rate),installRate:Number(bt.install_rate)})))}Tt||(Tt={requiredUnitType:"Sqft",baseRequiredQty:1,wastagePctDefault:0},Je=se.map(Zt=>({materialId:Zt.id||Math.random().toString(),materialName:Zt.title||"Item",unit:Zt.unit||"nos",baseQty:Zt.qty||1,supplyRate:Zt.supply_rate||0,installRate:Zt.install_rate||0})));const vt=Xc(k),$e={product_name:k.name,product_id:k.id,category:k.category,subcategory:k.subcategory,targetRequiredQty:ae,configBasis:Tt,materialLines:Je,step11_items:se,created_at:new Date().toISOString()},Rt=await lt("/api/boq-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:j,version_id:w,estimator:vt||"General",table_data:$e})});if(Rt.ok){const Zt=await Rt.json();r(bt=>[...bt,Zt]),je({title:"Success",description:`Added ${k.name} to BOM with target quantity ${ae}`}),q(!1),K(null),re([]),ke()}else throw new Error("Failed to save BOQ item")}catch(ze){console.error("Failed to add to BOQ:",ze),je({title:"Error",description:"Failed to add product to BOM",variant:"destructive"})}},gt=(ze,Tt,Je)=>{we(vt=>{const $e={...vt,[ze]:{...vt[ze],[Tt]:Je}};return Ne.current=$e,$e})},tt=(ze,Tt,Je)=>ye[ze]?.[Tt]??Je,Lt=async()=>{if(w){console.log("[CreateBoq] handleSaveProject START. editedFields (ref snapshot):",JSON.stringify(Ne.current));try{const ze=Ne.current||{},Tt=await lt(`/api/boq-versions/${encodeURIComponent(w)}/save-edits`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({editedFields:ze})});if(console.log("[CreateBoq] Save API response status:",Tt.status),Tt.ok){let Je=null;try{Je=await Tt.json()}catch{}if(Je?.updatedItems&&Je.updatedItems.length>0)r(vt=>{const $e=new Map(vt.map(St=>[St.id,St]));for(const St of Je.updatedItems){const Rt=typeof St.table_data=="string"?JSON.parse(St.table_data):St.table_data,Zt=$e.get(St.id)||{};$e.set(St.id,{...Zt,...St,table_data:Rt})}return vt.map(St=>{const Rt=$e.get(St.id);return Rt||St})}),we({}),Ne.current={};else{r(vt=>vt.map($e=>{const St=Object.keys(ye).filter(bt=>bt.startsWith(`${$e.id}-`));if(St.length===0)return $e;const Rt=typeof $e.table_data=="string"?JSON.parse($e.table_data):{...$e.table_data||{}},Zt=Array.isArray(Rt.step11_items)?[...Rt.step11_items]:[];for(const bt of St){const Vt=bt.substring(bt.lastIndexOf("-")+1),vs=parseInt(Vt,10),us=ye[bt]||{};Zt[vs]&&(Zt[vs]={...Zt[vs],...us})}return{...$e,table_data:{...Rt,step11_items:Zt}}}));try{const vt=await lt(`/api/boq-items/version/${encodeURIComponent(w)}`,{headers:{}});if(vt.ok){const $e=await vt.json();r($e.items||[]),we({}),Ne.current={}}else console.warn("[CreateBoq] Failed to reload BOQ items after save; keeping optimistic local state")}catch(vt){console.error("[CreateBoq] Failed to reload BOQ items after save:",vt)}}je({title:"Success",description:"Draft saved"})}else{const Je=await Tt.text().catch(()=>null);throw new Error("Failed to save edits"+(Je?`: ${Je}`:""))}}catch(ze){console.error("Failed to save project:",ze),je({title:"Error",description:"Failed to save BOQ version",variant:"destructive"})}}},qt=async()=>{if(w)try{await lt(`/api/boq-versions/${w}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"submitted"})});const ze=await lt(`/api/boq-versions/${encodeURIComponent(j)}`,{headers:{}});if(ze.ok){const Tt=await ze.json();c(Tt.versions||[])}je({title:"Success",description:"BOQ version submitted and locked"})}catch(ze){console.error("Failed to submit version:",ze),je({title:"Error",description:"Failed to submit version",variant:"destructive"})}},Fs=async ze=>{if(j)try{const Tt=i.length>0?i[0].id:null,Je=await lt("/api/boq-versions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:j,copy_from_version:ze?Tt:null})});if(Je.ok){const vt=await Je.json();c($e=>[vt,...$e]),B(vt.id),je({title:"Success",description:`Created Version ${vt.version_number}`})}}catch(Tt){console.error("Failed to create version:",Tt),je({title:"Error",description:"Failed to create version",variant:"destructive"})}},xs=()=>{if(!j||n.length===0){je({title:"Info",description:"No BOQ items to download",variant:"default"});return}try{const ze=["S.No","Item","Description","Unit","Qty","Supply Rate","Install Rate","Supply Amount","Install Amount"],Tt=[];let Je=1,vt=0,$e=0,St=1;n.forEach(kt=>{const Ft=kt.table_data||{},is=Ft.step11_items||[],Ss=Ft.product_name||kt.estimator;let nn=is;Ft.materialLines&&Ft.targetRequiredQty!==void 0&&(nn=lu(Ft.configBasis,Ft.materialLines,Ft.targetRequiredQty).computed.map(zs=>({title:zs.name,description:zs.name,unit:zs.unit,qty:zs.scaledQty,supply_rate:zs.supplyRate,install_rate:zs.installRate,supply_amount:zs.supplyAmount,install_amount:zs.installAmount}))),nn.forEach((es,zs)=>{const Us=`${kt.id}-${zs}`,Vs=!!Ft.materialLines,Ls=Vs?es.qty:tt(Us,"qty",es.qty||0),js=Vs?es.supply_rate:tt(Us,"supply_rate",es.supply_rate||0),Os=Vs?es.install_rate:tt(Us,"install_rate",es.install_rate||0),Ds=Vs?es.description:tt(Us,"description",es.description||""),ut=Vs?es.unit:tt(Us,"unit",es.unit||"pcs"),Pt=Vs?es.supply_amount:Ls*js,Kt=Vs?es.install_amount:Ls*Os;vt+=Pt,$e+=Kt,Tt.push([St.toString(),es.title||Ss,Ds,ut,Ls.toString(),js.toString(),Os.toString(),Pt.toFixed(2),Kt.toFixed(2)]),St++})}),Tt.push(["","","","","","","Total",vt.toFixed(2),$e.toFixed(2)]);const Rt=[ze.join(","),...Tt.map(kt=>kt.map(Ft=>Ft.includes(",")||Ft.includes('"')||Ft.includes(`
`)?`"${Ft.replace(/"/g,'""')}"`:Ft).join(","))].join(`
`),Zt=new Blob([Rt],{type:"text/csv;charset=utf-8;"}),bt=document.createElement("a"),Vt=URL.createObjectURL(Zt),vs=it?.name||"BOQ",us=Pe?`V${Pe.version_number}`:"draft",jt=`${vs}_${us}_BOQ.csv`;bt.setAttribute("href",Vt),bt.setAttribute("download",jt),bt.style.visibility="hidden",document.body.appendChild(bt),bt.click(),document.body.removeChild(bt),je({title:"Success",description:`Downloaded ${jt}`})}catch(ze){console.error("Download failed:",ze),je({title:"Error",description:"Failed to download BOQ",variant:"destructive"})}},hs=async()=>{if(!j||n.length===0){je({title:"Info",description:"No BOQ items to download",variant:"default"});return}try{const ze=[];let Tt=1;n.forEach(Ft=>{const is=Ft.table_data||{},Ss=is.step11_items||[],nn=is.product_name||Ft.estimator;let es=Ss;is.materialLines&&is.targetRequiredQty!==void 0&&(es=lu(is.configBasis,is.materialLines,is.targetRequiredQty).computed.map(Us=>({title:Us.name,description:Us.name,unit:Us.unit,qty:Us.scaledQty,supply_rate:Us.supplyRate,install_rate:Us.installRate,supply_amount:Us.supplyAmount,install_amount:Us.installAmount}))),es.forEach((zs,Us)=>{const Vs=`${Ft.id}-${Us}`,Ls=!!is.materialLines,js=Ls?zs.qty:tt(Vs,"qty",zs.qty||0),Os=Ls?zs.supply_rate:tt(Vs,"supply_rate",zs.supply_rate||0),Ds=Ls?zs.install_rate:tt(Vs,"install_rate",zs.install_rate||0),ut=Ls?zs.description:tt(Vs,"description",zs.description||""),Pt=Ls?zs.unit:tt(Vs,"unit",zs.unit||"pcs"),Kt=Ls?zs.supply_amount:js*Os,ws=Ls?zs.install_amount:js*Ds;ze.push({sno:Tt,item:zs.title||nn,description:ut,unit:Pt,qty:js,supply_rate:Os,install_rate:Ds,supply_amount:Kt,install_amount:ws}),Tt++})});const Je="/image.png";let vt=null;try{const is=await(await fetch(Je)).blob(),Ss=new FileReader;vt=await new Promise(nn=>{Ss.onloadend=()=>nn(Ss.result),Ss.onerror=()=>nn(null),Ss.readAsDataURL(is)})}catch(Ft){console.warn("Could not load logo for PDF header",Ft)}const $e=new Sn({orientation:"landscape"}),St=$e.internal.pageSize.getWidth(),Rt=10;if(vt){const Ft=$e.getImageProperties(vt),is=24,Ss=Ft.width/Ft.height*is;$e.addImage(vt,"PNG",10,Rt,Ss,is)}const Zt=St-10;$e.setFontSize(10),$e.setFont("helvetica","bold");const bt=it?.name||"BOQ",Vt=it?.client||"-",vs=it?.budget||"-";$e.text(bt,Zt,Rt+6,{align:"right"}),$e.setFontSize(9),$e.setFont("helvetica","normal"),$e.text(`Client: ${Vt}`,Zt,Rt+12,{align:"right"}),$e.text(`Budget: ${vs}`,Zt,Rt+18,{align:"right"});const us=[{header:"S.No",dataKey:"sno"},{header:"Item",dataKey:"item"},{header:"Description",dataKey:"description"},{header:"Unit",dataKey:"unit"},{header:"Qty",dataKey:"qty"},{header:"Supply Rate",dataKey:"supply_rate"},{header:"Install Rate",dataKey:"install_rate"},{header:"Supply Amount",dataKey:"supply_amount"},{header:"Install Amount",dataKey:"install_amount"}];OR($e,{head:[us.map(Ft=>Ft.header)],body:ze.map(Ft=>us.map(is=>Ft[is.dataKey])),startY:Rt+30,styles:{fontSize:8},headStyles:{fillColor:[64,64,64],textColor:[255,255,255],fontStyle:"bold"},theme:"grid",didDrawPage:Ft=>{}});const jt=Pe?`V${Pe.version_number}`:"draft",kt=`${bt}_${jt}_BOQ.pdf`;$e.save(kt),je({title:"Success",description:`Downloaded ${kt}`})}catch(ze){console.error("Failed to generate PDF",ze),je({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}},it=t.find(ze=>ze.id===j),Pe=i.find(ze=>ze.id===w),dt=Pe?.status==="submitted";return Y?e.jsx(Sa,{children:e.jsx("div",{className:"text-center py-8",children:"Loading projects..."})}):e.jsxs(e.Fragment,{children:[e.jsx(Sa,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold"}),e.jsx(Ms,{children:e.jsxs(Ws,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Select Project"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(We,{children:"Projects"}),e.jsxs(mn,{onValueChange:ze=>b(ze||null),children:[e.jsx(un,{className:"w-full",children:e.jsx(gn,{placeholder:t.length===0?"No projects":"Select project"})}),e.jsx(hn,{children:t.map(ze=>e.jsxs(Ks,{value:ze.id,children:[ze.name,"  ",ze.client||"(No client)","  ",ze.location||"(No location)"]},ze.id))})]})]}),it&&e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Budget:"})," ",it.budget||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",it.status||"draft"]})]}),j&&e.jsxs("div",{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"BOQ Versions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(mn,{value:w||"",onValueChange:B,children:[e.jsx(un,{className:"flex-1",children:e.jsx(gn,{placeholder:"Select version"})}),e.jsx(hn,{children:i.map(ze=>e.jsxs(Ks,{value:ze.id,children:[ze.project_name?`[${ze.project_name}] `:"","V",ze.version_number," (",ze.status==="submitted"?"Locked":"Draft",")"]},ze.id))})]}),w&&e.jsx(Ce,{onClick:async()=>{if(w&&confirm("Delete this version and all its BOQ items? This cannot be undone."))try{const ze=await lt(`/api/boq-versions/${encodeURIComponent(w)}`,{method:"DELETE"});if(ze.ok){const Tt=await lt(`/api/boq-versions/${encodeURIComponent(j)}`,{headers:{}});if(Tt.ok){const Je=await Tt.json();c(Je.versions||[]);const vt=(Je.versions||[]).find($e=>$e.status==="draft");vt?B(vt.id):(Je.versions||[]).length>0?B(Je.versions[0].id):B(null),r([]),je({title:"Deleted",description:"Version removed"})}}else{const Tt=await ze.text();throw new Error(Tt||"Failed to delete version")}}catch(ze){console.error("Failed to delete version",ze),je({title:"Error",description:"Failed to delete version",variant:"destructive"})}},variant:"destructive",children:"Delete Version"}),i.length>0&&e.jsx(Ce,{onClick:()=>{const ze=i[0];confirm(`Copy items from V${ze.version_number}?`)?Fs(!0):Fs(!1)},variant:"outline",children:"+ New Version"}),i.length===0&&j&&e.jsx(Ce,{onClick:()=>Fs(!1),variant:"outline",children:"Create V1"})]}),Pe&&e.jsxs("div",{className:"text-sm text-gray-600 space-y-1 bg-blue-50 p-3 rounded",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Project:"})," ",Pe.project_name||"Unknown"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Version:"})," V",Pe.version_number]}),Pe.project_client&&e.jsxs("div",{children:[e.jsx("strong",{children:"Client:"})," ",Pe.project_client]}),Pe.project_location&&e.jsxs("div",{children:[e.jsx("strong",{children:"Location:"})," ",Pe.project_location]}),dt&&e.jsx("span",{className:"inline-block bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs font-semibold",children:"Submitted (Locked)"}),!dt&&e.jsx("span",{className:"inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-semibold",children:"Draft (Editable)"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{onClick:Be,className:"flex-1",disabled:dt,size:"sm",children:"Add Product +"}),e.jsx(Ce,{onClick:()=>Ae(),className:"flex-1",disabled:dt,size:"sm",children:"Add Product (Manual)"})]}),e.jsx(yG,{open:U,onOpenChange:Q,onSelectProduct:Qe,selectedProjectId:j}),e.jsx(xG,{open:G,onOpenChange:W,onSelectTemplate:le}),k&&e.jsx(vG,{product:k,open:ee,onClose:()=>{q(!1),setTimeout(()=>{K(null)},300)},onAddToBoq:ft})]})]})}),j&&e.jsx(Ms,{children:e.jsxs(Ws,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"BOQ Items"}),n.length===0?e.jsx("div",{className:"text-gray-500 text-center py-4",children:"No products added yet. Click Add Product +"}):e.jsx("div",{className:"space-y-8",children:n.map((ze,Tt)=>{let Je=ze.table_data||{};if(typeof Je=="string")try{Je=JSON.parse(Je)}catch(bt){console.error("Failed to parse table_data for item",ze.id,bt),Je={}}const vt=Array.isArray(Je.step11_items)?Je.step11_items:[],$e=Je.product_name||ze.estimator;let St=vt,Rt=!1,Zt=null;return Je.materialLines&&Je.targetRequiredQty!==void 0&&(Rt=!0,Zt=lu(Je.configBasis,Je.materialLines,Je.targetRequiredQty),St=Zt.computed.map((bt,Vt)=>({title:bt.name,description:bt.name,unit:bt.unit,shop_name:bt.shop_name,qtyPerSqf:bt.perUnitQty,requiredQty:bt.scaledQty,roundOff:bt.roundOffQty,rateSqft:bt.supplyRate+bt.installRate,amount:bt.lineTotal,s_no:Vt+1}))),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-100 px-4 py-3 flex justify-between items-center border-b border-gray-200",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-sm text-gray-800",children:[Tt+1,". ",$e,Je.category&&e.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["(",Je.category,")"]}),Je.is_finalized&&e.jsx("span",{className:"inline-block bg-green-100 text-green-700 px-2 py-0.5 rounded text-xs font-semibold ml-2",children:"Finalized"}),Je.is_finalized&&e.jsx(Ce,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 ml-1",title:te.has(ze.id)?"Collapse items":"Expand to see items",onClick:()=>{be(bt=>{const Vt=new Set(bt);return Vt.has(ze.id)?Vt.delete(ze.id):Vt.add(ze.id),Vt})},children:te.has(ze.id)?e.jsx(Ly,{className:"h-4 w-4"}):e.jsx(dm,{className:"h-4 w-4"})})]}),Rt&&e.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-gray-600 font-medium",children:["Project Target: ",e.jsxs("span",{className:"text-blue-600 font-bold",children:[Je.targetRequiredQty," ",Je.configBasis?.requiredUnitType]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[!Je.is_finalized&&e.jsx(Ce,{variant:"outline",size:"sm",className:"h-7 text-xs",disabled:dt,onClick:()=>Ae(ze.id),children:"+ Add Item"}),e.jsx(Ce,{variant:"default",size:"sm",className:"h-7 text-xs bg-green-600 hover:bg-green-700 text-white",disabled:dt||Je.is_finalized,onClick:()=>ht(ze.id),children:"Finalize"}),e.jsx(Ce,{variant:"destructive",size:"sm",className:"h-7 text-xs",disabled:dt,onClick:async()=>{if(confirm("Delete this product and all its items?"))try{await lt(`/api/boq-items/${ze.id}`,{method:"DELETE"}),r(bt=>bt.filter(Vt=>Vt.id!==ze.id)),je({title:"Deleted",description:"Product removed"})}catch{je({title:"Error",description:"Failed to delete product",variant:"destructive"})}},children:"Delete Product"})]})]}),Je.is_finalized&&te.has(ze.id)&&(()=>{const bt=Je.original_items&&Je.original_items.length>0?Je.original_items:[],Vt=Je.product_materials&&Je.product_materials.length>0?Je.product_materials:[];let vs=[];if(Vt.length===0){for(const kt of vt)Array.isArray(kt.step11_items)&&kt.step11_items.length>0&&vs.push(...kt.step11_items);vs.length===0&&bt.length===0&&(vs=vt)}const us=Vt.length>0?Vt:vs;return(bt.length>0?bt:us).length===0&&us.length===0?null:e.jsxs("div",{className:"bg-blue-50/50 border-b border-blue-200 px-4 py-3",children:[bt.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-blue-700 mb-2",children:["BOQ Items (",bt.length,")"]}),e.jsx("div",{className:"overflow-x-auto mb-3",children:e.jsxs("table",{className:"border-collapse text-xs min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-100/50 border-b border-blue-200",children:[e.jsx("th",{className:"border border-blue-200 px-2 py-1 text-left font-semibold w-10",children:"S.No"}),e.jsx("th",{className:"border border-blue-200 px-2 py-1 text-left font-semibold w-48",children:"Item"}),e.jsx("th",{className:"border border-blue-200 px-2 py-1 text-left font-semibold",children:"Description"}),e.jsx("th",{className:"border border-blue-200 px-2 py-1 text-center font-semibold w-16",children:"Unit"}),e.jsx("th",{className:"border border-blue-200 px-2 py-1 text-center font-semibold w-16",children:"Qty"}),e.jsx("th",{className:"border border-blue-200 px-2 py-1 text-right font-semibold w-24",children:"Supply Rate"}),e.jsx("th",{className:"border border-blue-200 px-2 py-1 text-right font-semibold w-24",children:"Install Rate"}),e.jsx("th",{className:"border border-blue-200 px-2 py-1 text-right font-semibold w-28",children:"Supply Amt"}),e.jsx("th",{className:"border border-blue-200 px-2 py-1 text-right font-semibold w-28",children:"Install Amt"})]})}),e.jsx("tbody",{children:bt.map((kt,Ft)=>{const is=kt.qty||0,Ss=kt.supply_rate||0,nn=kt.install_rate||0;return e.jsxs("tr",{className:"border-b border-blue-100 bg-white/70",children:[e.jsx("td",{className:"border border-blue-200 px-2 py-1 text-center",children:Ft+1}),e.jsx("td",{className:"border border-blue-200 px-2 py-1 font-medium",children:kt.title||"Item"}),e.jsx("td",{className:"border border-blue-200 px-2 py-1 text-gray-600",children:kt.description||"-"}),e.jsx("td",{className:"border border-blue-200 px-2 py-1 text-center",children:kt.unit||"pcs"}),e.jsx("td",{className:"border border-blue-200 px-2 py-1 text-center",children:is}),e.jsxs("td",{className:"border border-blue-200 px-2 py-1 text-right",children:["",Ss.toFixed(2)]}),e.jsxs("td",{className:"border border-blue-200 px-2 py-1 text-right",children:["",nn.toFixed(2)]}),e.jsxs("td",{className:"border border-blue-200 px-2 py-1 text-right bg-blue-50/30",children:["",(is*Ss).toFixed(2)]}),e.jsxs("td",{className:"border border-blue-200 px-2 py-1 text-right bg-blue-50/30",children:["",(is*nn).toFixed(2)]})]},Ft)})})]})})]}),us.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-green-700 mb-2 mt-2",children:["Product Materials (",us.length,")"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:"border-collapse text-xs min-w-full"})})]})]})})(),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border-collapse text-xs min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"border px-2 py-2 text-left font-semibold w-10",children:"Sl"}),e.jsx("th",{className:"border px-2 py-2 text-left font-semibold w-64",children:"Item"}),e.jsx("th",{className:"border px-2 py-2 text-left font-semibold w-32",children:"Shop"}),e.jsx("th",{className:"border px-2 py-2 text-left font-semibold w-[300px]",children:"Description"}),e.jsx("th",{className:"border px-2 py-2 text-center font-semibold w-16",children:"Unit"}),e.jsxs("th",{className:"border px-2 py-2 text-center font-semibold w-20",children:["Qty/",Je.configBasis?.requiredUnitType||"Sqf"]}),e.jsx("th",{className:"border px-2 py-2 text-center font-semibold w-24",children:"Required Q"}),e.jsx("th",{className:"border px-2 py-2 text-center font-semibold w-24",children:"Round off"}),e.jsxs("th",{className:"border px-2 py-2 text-center font-semibold w-24",children:["Rate/",Je.configBasis?.requiredUnitType||"Sqft"]}),e.jsx("th",{className:"border px-2 py-2 text-center font-semibold w-28 text-green-700",children:"Amount"}),e.jsx("th",{className:"border px-2 py-2 text-center font-semibold w-16",children:"Action"})]})}),e.jsx("tbody",{children:St.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:Rt?11:10,className:"text-center py-4 text-gray-500 italic",children:'No items in this product group. Click \\"+ Add Item\\" to add one.'})}):St.map((bt,Vt)=>{const vs=`${ze.id}-${Vt}`,us=Rt?bt.qty:tt(vs,"qty",bt.qty||0),jt=Rt?bt.supply_rate:tt(vs,"supply_rate",bt.supply_rate||0),kt=Rt?bt.install_rate:tt(vs,"install_rate",bt.install_rate||0),Ft=tt(vs,"description",bt.description||""),is=tt(vs,"unit",bt.unit||"pcs"),Ss=Rt?bt.supply_amount:us*jt,nn=Rt?bt.install_amount:us*kt;return Rt?e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-blue-50/50 text-xs",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:Vt+1}),e.jsx("td",{className:"border px-2 py-1 font-medium",children:bt.title}),e.jsx("td",{className:"border px-2 py-1 text-gray-600",children:bt.shop_name||"-"}),e.jsx("td",{className:"border px-2 py-1 text-gray-600 truncate max-w-[200px]",title:Ft,children:Ft}),e.jsx("td",{className:"border px-2 py-1 text-center",children:is}),e.jsx("td",{className:"border px-2 py-1 text-center",children:bt.qtyPerSqf.toFixed(3)}),e.jsx("td",{className:"border px-2 py-1 text-center text-blue-600",children:bt.requiredQty.toFixed(2)}),e.jsx("td",{className:"border px-2 py-1 text-center font-bold",children:bt.roundOff}),e.jsxs("td",{className:"border px-2 py-1 text-right",children:["",bt.rateSqft.toLocaleString()]}),e.jsxs("td",{className:"border px-2 py-1 text-right font-bold bg-green-50/30",children:["",bt.amount.toLocaleString()]}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ce,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:()=>{if(!confirm("Delete this item?"))return;const es=[...St];es.splice(Vt,1);const zs={...Je,materialLines:es};r(Us=>Us.map(Vs=>Vs.id===ze.id?{...Vs,table_data:zs}:Vs)),je({title:"Item Deleted",description:"Item removed from product.",variant:"default"});try{lt(`/api/boq-items/${ze.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({table_data:zs})})}catch(Us){console.error("Failed to delete item",Us),je({title:"Error",description:"Failed to delete item",variant:"destructive"})}},children:""})})]},vs):e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-blue-50/50",children:[e.jsx("td",{className:"border px-2 py-1 text-center text-xs",children:Vt+1}),e.jsx("td",{className:"border px-2 py-1 font-medium text-xs",children:bt.title||"Item"}),e.jsx("td",{className:"border px-2 py-1 text-gray-500",children:"-"}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{value:Ft,onChange:es=>gt(vs,"description",es.target.value),disabled:dt,className:"w-full border rounded px-1 py-0.5 text-xs min-h-[60px] resize-y focus:ring-1 ring-blue-500 outline-none",placeholder:"Description"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:is,onChange:es=>gt(vs,"unit",es.target.value),disabled:dt,className:"w-full border rounded px-1 py-0.5 text-xs text-center focus:ring-1 ring-blue-500 outline-none"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"-"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:"-"}),e.jsx("td",{className:"border px-2 py-1 font-bold text-center",children:e.jsx("input",{type:"number",value:us,onChange:es=>gt(vs,"qty",parseFloat(es.target.value)||0),disabled:dt,className:"w-full border rounded px-1 py-0.5 text-xs text-center font-medium focus:ring-1 ring-blue-500 outline-none"})}),e.jsx("td",{className:"border px-1 py-1",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("input",{type:"number",value:jt,onChange:es=>gt(vs,"supply_rate",parseFloat(es.target.value)||0),disabled:dt,className:"w-full border rounded px-1 py-0.5 text-xs text-right focus:ring-1 ring-blue-500 outline-none",placeholder:"S"}),e.jsx("input",{type:"number",value:kt,onChange:es=>gt(vs,"install_rate",parseFloat(es.target.value)||0),disabled:dt,className:"w-full border rounded px-1 py-0.5 text-xs text-right focus:ring-1 ring-blue-500 outline-none",placeholder:"I"})]})}),e.jsxs("td",{className:"border px-1 py-1 text-right text-xs bg-gray-50/50 font-bold",children:["",(Ss+nn).toFixed(2)]}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx(Ce,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",disabled:dt,onClick:async()=>{if(!confirm("Delete this item?"))return;const es=[...vt];es.splice(Vt,1);const zs={...Je,step11_items:es};r(Us=>Us.map(Vs=>Vs.id===ze.id?{...Vs,table_data:zs}:Vs));try{await lt(`/api/boq-items/${ze.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({table_data:zs})})}catch(Us){console.error("Failed to delete item",Us),je({title:"Error",description:"Failed to delete item",variant:"destructive"})}},children:""})})]},vs)})}),e.jsx("tfoot",{className:"bg-gray-50/50 font-bold border-t-2 border-gray-200",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:Rt?9:8,className:"border px-2 py-1.5 text-right uppercase tracking-wider text-[10px] text-gray-500",children:"Total"}),e.jsxs("td",{className:"border px-2 py-1.5 text-right text-green-700 bg-green-50/50",children:["",St.reduce((bt,Vt)=>bt+(Vt.amount||(Vt.qty||0)*((Vt.supply_rate||0)+(Vt.install_rate||0))),0).toLocaleString()]}),e.jsx("td",{className:"border px-2 py-1.5"})]})})]})}),Rt&&e.jsx("div",{className:"bg-gray-50 px-4 py-2 flex justify-end border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500 uppercase",children:["Rate per ",Je.configBasis?.requiredUnitType||"Unit",":"]}),e.jsxs("span",{className:"text-sm font-extrabold text-blue-700 border-b-2 border-blue-600",children:["",(St.reduce((bt,Vt)=>bt+Vt.amount,0)/(Je.targetRequiredQty||1)).toFixed(2)]})]})})]},ze.id)})}),n.length>0&&e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 w-72 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Supply:"}),e.jsxs("span",{className:"font-medium",children:["",n.reduce((ze,Tt)=>{let Je=Tt.table_data||{};if(typeof Je=="string")try{Je=JSON.parse(Je)}catch{Je={}}if(Je.materialLines&&Je.targetRequiredQty!==void 0){const $e=lu(Je.configBasis,Je.materialLines,Je.targetRequiredQty);return ze+$e.totalSupply}const vt=Je.step11_items||[];return ze+vt.reduce(($e,St)=>$e+(St.qty||0)*(St.supply_rate||0),0)},0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Install:"}),e.jsxs("span",{className:"font-medium",children:["",n.reduce((ze,Tt)=>{let Je=Tt.table_data||{};if(typeof Je=="string")try{Je=JSON.parse(Je)}catch{Je={}}if(Je.materialLines&&Je.targetRequiredQty!==void 0){const $e=lu(Je.configBasis,Je.materialLines,Je.targetRequiredQty);return ze+$e.totalInstall}const vt=Je.step11_items||[];return ze+vt.reduce(($e,St)=>$e+(St.qty||0)*(St.install_rate||0),0)},0).toFixed(2)]})]}),e.jsxs("div",{className:"border-t border-gray-300 my-2 pt-2 flex justify-between font-bold text-base",children:[e.jsx("span",{children:"Grand Total:"}),e.jsxs("span",{children:["",n.reduce((ze,Tt)=>{let Je=Tt.table_data||{};if(typeof Je=="string")try{Je=JSON.parse(Je)}catch{Je={}}if(Je.materialLines&&Je.targetRequiredQty!==void 0){const $e=lu(Je.configBasis,Je.materialLines,Je.targetRequiredQty);return ze+$e.grandTotal}const vt=Je.step11_items||[];return ze+vt.reduce(($e,St)=>$e+(St.qty||0)*((St.supply_rate||0)+(St.install_rate||0)),0)},0).toFixed(2)]})]})]})})]})}),j&&w&&e.jsx(Ms,{children:e.jsxs(Ws,{className:"space-y-3 pt-6",children:[dt?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-4 text-sm text-yellow-800",children:[e.jsx("strong",{children:"This version is locked."})," Submit a new version to make edits."]}):null,e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(Ce,{onClick:Lt,variant:"outline",disabled:dt||Object.keys(ye).length===0,children:"Save Draft"}),e.jsx(Ce,{onClick:qt,variant:"default",disabled:dt||n.length===0,children:"Submit & Lock Version"}),e.jsx(Ce,{onClick:xs,variant:"outline",disabled:n.length===0,children:"Download as Excel"}),e.jsx(Ce,{onClick:hs,variant:"outline",disabled:n.length===0,children:"Download as PDF"})]})]})})]})}),e.jsx(du,{open:ie,onOpenChange:ce,children:e.jsxs(dA,{className:"sm:max-w-md",children:[e.jsxs(AA,{children:[e.jsx(uA,{children:"Project Requirement"}),e.jsx(vI,{children:"Enter the required quantity for this product in your project."})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Please enter the required quantity for ",e.jsx("span",{className:"font-bold underline",children:k?.name})," in this project:"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xe,{type:"number",value:ae,onChange:ze=>de(Number(ze.target.value)),className:"text-lg font-bold"}),e.jsx("span",{className:"text-muted-foreground font-semibold",children:se[0]?.unit||"Sqft"})]}),e.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Quantity will be scaled according to product recipe."})]})}),e.jsxs(xI,{children:[e.jsx(Ce,{variant:"outline",onClick:()=>ce(!1),children:"Cancel"}),e.jsx(Ce,{onClick:Jt,className:"bg-primary text-white font-bold",children:"Add to BOM"})]})]})})]})}function aW(){const[t,s]=S.useState([]),[n,r]=S.useState([]),[i,c]=S.useState([]),[A,u]=S.useState(""),[d,h]=S.useState(""),[o,m]=S.useState(""),[y,p]=S.useState(""),[j,b]=S.useState(null),[w,B]=S.useState(null),[U,Q]=S.useState(!1),[k,K]=S.useState([]),[ee,q]=S.useState(!0),[G]=co(),{toast:W}=ua(),[he,Z]=S.useState({}),[ie,ce]=S.useState([{id:"sno",name:"S.No",key:"sno",type:"text",editable:!1},{id:"item",name:"Item",key:"item",type:"text",editable:!1},{id:"desc",name:"Description",key:"description",type:"text",editable:!0},{id:"unit",name:"Unit",key:"unit",type:"text",editable:!0},{id:"qty",name:"Qty",key:"qty",type:"number",editable:!0},{id:"supply_rate",name:"Supply Rate",key:"supply_rate",type:"number",editable:!0},{id:"install_rate",name:"Install Rate",key:"install_rate",type:"number",editable:!0},{id:"supply_amt",name:"Supply Amount",key:"supply_amount",type:"number",editable:!1},{id:"install_amt",name:"Install Amount",key:"install_amount",type:"number",editable:!1}]),[ae,de]=S.useState(!1),[se,re]=S.useState(""),[te,be]=S.useState(""),He=S.useRef(he);S.useEffect(()=>{He.current=he},[he]),S.useEffect(()=>{(async()=>{try{const Qe=await lt("/api/boq-projects",{headers:{}});if(Qe.ok){const le=await Qe.json();s(le.projects||[])}}catch(Qe){console.error("Failed to load projects:",Qe)}finally{q(!1)}})()},[]),S.useEffect(()=>{if(!j){c([]),B(null),r([]);return}(async()=>{try{const Qe=await lt(`/api/boq-versions/${encodeURIComponent(j)}`,{headers:{}});if(Qe.ok){const ct=(await Qe.json()).versions||[];if(c(ct),!(w&&ct.some(rt=>rt.id===w))){const rt=ct.find(ht=>ht.status==="draft");rt?B(rt.id):ct.length>0?B(ct[0].id):B(null)}}}catch(Qe){console.error("Failed to load versions:",Qe)}})()},[j]),S.useEffect(()=>{if(w){const Ae=i.find(Qe=>Qe.id===w);Ae&&Ae.column_config&&Array.isArray(Ae.column_config)&&Ae.column_config.length>0?ce(Ae.column_config):ce([{id:"sno",name:"S.No",key:"sno",type:"text",editable:!1},{id:"item",name:"Item",key:"item",type:"text",editable:!1},{id:"desc",name:"Description",key:"description",type:"text",editable:!0},{id:"unit",name:"Unit",key:"unit",type:"text",editable:!0},{id:"qty",name:"Qty",key:"qty",type:"number",editable:!0},{id:"supply_rate",name:"Supply Rate",key:"supply_rate",type:"number",editable:!0},{id:"install_rate",name:"Install Rate",key:"install_rate",type:"number",editable:!0},{id:"supply_amt",name:"Supply Amount",key:"supply_amount",type:"number",editable:!1},{id:"install_amt",name:"Install Amount",key:"install_amount",type:"number",editable:!1}])}},[w,i]),S.useEffect(()=>{if(!w){r([]),Z({}),He.current={};return}(async()=>{try{const Qe=async ct=>{const rt=(ct.headers.get("content-type")||"").toLowerCase(),ht=await ct.text();if(ct.status===204||ht.trim()==="")return{};if(rt.includes("application/json"))try{return JSON.parse(ht)}catch(tt){throw console.error("safeParseJson: JSON parse failed",{url:ct.url,status:ct.status,bodySnippet:ht.slice(0,300),error:tt}),new Error("Invalid JSON response from server")}const ft=ht.trim();if(ft.startsWith("{")||ft.startsWith("["))try{return JSON.parse(ft)}catch(tt){throw console.error("safeParseJson: body looks like JSON but parse failed",{url:ct.url,status:ct.status,bodySnippet:ft.slice(0,300),error:tt}),new Error("Invalid JSON response from server")}console.error("safeParseJson: server returned non-JSON response",{url:ct.url,status:ct.status,contentType:rt,bodySnippet:ht.slice(0,200)});const Jt=ft.startsWith("<!DOCTYPE html")?"Looks like the request hit the frontend dev server (index.html) instead of the backend API. Check VITE_API_BASE_URL and dev server ports.":void 0,gt=`Server returned non-JSON response (status=${ct.status})${Jt?" - "+Jt:""}`;throw new Error(gt)},le=await lt(`/api/boq-items/version/${encodeURIComponent(w)}`,{headers:{}});if(le.ok)try{const ct=await Qe(le);r(ct.items||[])}catch(ct){W({title:"Error",description:"Failed to parse BOM items response",variant:"destructive"}),console.error("BOM items parse error:",ct)}else{const ct=await le.text();console.error("Failed to fetch BOM items:",le.status,ct),W({title:"Error",description:`Failed to load BOM items (${le.status})`,variant:"destructive"})}}catch(Qe){console.error("Failed to load BOM items:",Qe),W({title:"Error",description:"Failed to load BOM items",variant:"destructive"})}})()},[w]),S.useEffect(()=>{try{const Ae=typeof G=="string"&&G.split("?")[1]||"",le=new URLSearchParams(Ae).get("project");le&&le!==j&&t.find(rt=>rt.id===le)&&b(le)}catch{}},[G,t]);const pe=(Ae,Qe,le)=>{Z(ct=>{const rt={...ct,[Ae]:{...ct[Ae],[Qe]:le}};return He.current=rt,rt})},Y=(Ae,Qe,le)=>he[Ae]?.[Qe]??le,me=async()=>{if(w){console.log("[CreateBoq] handleSaveProject START. editedFields (ref snapshot):",JSON.stringify(He.current));try{const Ae=He.current||{},Qe=await lt(`/api/boq-versions/${encodeURIComponent(w)}/save-edits`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({editedFields:Ae})});if(console.log("[CreateBoq] Save API response status:",Qe.status),Qe.ok){let le=null;try{le=await Qe.json()}catch{}if(le?.updatedItems&&le.updatedItems.length>0)r(ct=>{const rt=new Map(ct.map(ht=>[ht.id,ht]));for(const ht of le.updatedItems){const ft=typeof ht.table_data=="string"?JSON.parse(ht.table_data):ht.table_data,Jt=rt.get(ht.id)||{};rt.set(ht.id,{...Jt,...ht,table_data:ft})}return ct.map(ht=>{const ft=rt.get(ht.id);return ft||ht})}),Z({}),He.current={};else{r(ct=>ct.map(rt=>{const ht=Object.keys(he).filter(gt=>gt.startsWith(`${rt.id}-`));if(ht.length===0)return rt;const ft=typeof rt.table_data=="string"?JSON.parse(rt.table_data):{...rt.table_data||{}},Jt=Array.isArray(ft.step11_items)?[...ft.step11_items]:[];for(const gt of ht){const tt=gt.substring(gt.lastIndexOf("-")+1),Lt=parseInt(tt,10),qt=he[gt]||{};Jt[Lt]&&(Jt[Lt]={...Jt[Lt],...qt})}return{...rt,table_data:{...ft,step11_items:Jt}}}));try{const ct=await lt(`/api/boq-items/version/${encodeURIComponent(w)}`,{headers:{}});if(ct.ok){const rt=await ct.json();r(rt.items||[]),Z({}),He.current={}}else console.warn("[CreateBoq] Failed to reload BOM items after save; keeping optimistic local state")}catch(ct){console.error("[CreateBoq] Failed to reload BOM items after save:",ct)}}W({title:"Success",description:"Draft saved"})}else{const le=await Qe.text().catch(()=>null);throw new Error("Failed to save edits"+(le?`: ${le}`:""))}}catch(Ae){console.error("Failed to save project:",Ae),W({title:"Error",description:"Failed to save BOM version",variant:"destructive"})}}},Se=async()=>{if(w)try{await lt(`/api/boq-versions/${w}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"submitted"})});const Ae=await lt(`/api/boq-versions/${encodeURIComponent(j)}`,{headers:{}});if(Ae.ok){const Qe=await Ae.json();c(Qe.versions||[])}W({title:"Success",description:"BOM version submitted and locked"})}catch(Ae){console.error("Failed to submit version:",Ae),W({title:"Error",description:"Failed to submit version",variant:"destructive"})}},je=async()=>{if(!se.trim()){W({title:"Error",description:"Column name required",variant:"destructive"});return}const Ae=`col_${Date.now()}`,Qe={id:Ae,name:se.trim(),key:`custom_${Ae}`,type:"text",editable:!0};let le=[...ie];if(te){const ct=le.findIndex(rt=>rt.id===te);ct!==-1?le.splice(ct+1,0,Qe):le.push(Qe)}else le.push(Qe);if(ce(le),re(""),de(!1),w)try{await lt(`/api/boq-versions/${w}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({column_config:le})}),W({title:"Success",description:"Column added"})}catch(ct){console.error("Failed to save column config",ct)}},Le=async Ae=>{const Qe=ie.filter(le=>le.id!==Ae);if(ce(Qe),w)try{await lt(`/api/boq-versions/${w}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({column_config:Qe})}),W({title:"Success",description:"Column deleted"})}catch(le){console.error("Failed to save column config",le)}},ge=async Ae=>{if(j)try{const Qe=i.length>0?i[0].id:null,le=await lt("/api/boq-versions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:j,copy_from_version:Ae?Qe:null})});if(le.ok){const ct=await le.json();c(rt=>[ct,...rt]),B(ct.id),W({title:"Success",description:`Created Version ${ct.version_number}`})}}catch(Qe){console.error("Failed to create version:",Qe),W({title:"Error",description:"Failed to create version",variant:"destructive"})}},ye=()=>{if(!j||n.length===0){W({title:"Info",description:"No BOM items to download",variant:"default"});return}try{const Ae=["S.No","Item","Description","Unit","Qty","Supply Rate","Install Rate","Supply Amount","Install Amount"],Qe=[];let le=1,ct=0,rt=0,ht=1;n.forEach(xs=>{const hs=xs.table_data||{},it=hs.step11_items||[],Pe=hs.product_name||xs.estimator;it.forEach((dt,ze)=>{const Tt=`${xs.id}-${ze}`,Je=Y(Tt,"qty",dt.qty||0),vt=Y(Tt,"supply_rate",dt.supply_rate||0),$e=Y(Tt,"install_rate",dt.install_rate||0),St=Y(Tt,"description",dt.description||""),Rt=Y(Tt,"unit",dt.unit||"pcs"),Zt=Y(Tt,"location",dt.location||""),bt=Je*vt,Vt=Je*$e;ct+=bt,rt+=Vt,Qe.push([ht.toString(),dt.title||Pe,St,Rt,Je.toString(),vt.toString(),$e.toString(),bt.toFixed(2),Vt.toFixed(2)]),ht++})}),Qe.push(["","","","","","","Total",ct.toFixed(2),rt.toFixed(2)]);const ft=[Ae.join(","),...Qe.map(xs=>xs.map(hs=>hs.includes(",")||hs.includes('"')||hs.includes(`
`)?`"${hs.replace(/"/g,'""')}"`:hs).join(","))].join(`
`),Jt=new Blob([ft],{type:"text/csv;charset=utf-8;"}),gt=document.createElement("a"),tt=URL.createObjectURL(Jt),Lt=Ne?.name||"BOM",qt=ke?`V${ke.version_number}`:"draft",Fs=`${Lt}_${qt}_BOM.csv`;gt.setAttribute("href",tt),gt.setAttribute("download",Fs),gt.style.visibility="hidden",document.body.appendChild(gt),gt.click(),document.body.removeChild(gt),W({title:"Success",description:`Downloaded ${Fs}`})}catch(Ae){console.error("Download failed:",Ae),W({title:"Error",description:"Failed to download BOM",variant:"destructive"})}},we=async()=>{if(!j||n.length===0){W({title:"Info",description:"No BOM items to download",variant:"default"});return}try{const Ae=[];let Qe=1;n.forEach(hs=>{const it=hs.table_data||{},Pe=it.step11_items||[],dt=it.product_name||hs.estimator;Pe.forEach((ze,Tt)=>{const Je=`${hs.id}-${Tt}`,vt=Y(Je,"qty",ze.qty||0),$e=Y(Je,"supply_rate",ze.supply_rate||0),St=Y(Je,"install_rate",ze.install_rate||0),Rt=Y(Je,"description",ze.description||""),Zt=Y(Je,"unit",ze.unit||"pcs"),bt=Y(Je,"location",ze.location||""),Vt=vt*$e,vs=vt*St;Ae.push({sno:Qe,item:ze.title||dt,description:Rt,unit:Zt,qty:vt,supply_rate:$e,install_rate:St,supply_amount:Vt,install_amount:vs}),Qe++})});const le="/image.png";let ct=null;try{const it=await(await fetch(le)).blob(),Pe=new FileReader;ct=await new Promise(dt=>{Pe.onloadend=()=>dt(Pe.result),Pe.onerror=()=>dt(null),Pe.readAsDataURL(it)})}catch(hs){console.warn("Could not load logo for PDF header",hs)}const rt=new Sn({orientation:"landscape"}),ht=rt.internal.pageSize.getWidth(),ft=10;if(ct){const hs=rt.getImageProperties(ct),it=24,Pe=hs.width/hs.height*it;rt.addImage(ct,"PNG",10,ft,Pe,it)}const Jt=ht-10;rt.setFontSize(10),rt.setFont("helvetica","bold");const gt=Ne?.name||"BOM",tt=Ne?.client||"-",Lt=Ne?.budget||"-";rt.text(gt,Jt,ft+6,{align:"right"}),rt.setFontSize(9),rt.setFont("helvetica","normal"),rt.text(`Client: ${tt}`,Jt,ft+12,{align:"right"}),rt.text(`Budget: ${Lt}`,Jt,ft+18,{align:"right"});const qt=[{header:"S.No",dataKey:"sno"},{header:"Item",dataKey:"item"},{header:"Description",dataKey:"description"},{header:"Unit",dataKey:"unit"},{header:"Qty",dataKey:"qty"},{header:"Supply Rate",dataKey:"supply_rate"},{header:"Install Rate",dataKey:"install_rate"},{header:"Supply Amount",dataKey:"supply_amount"},{header:"Install Amount",dataKey:"install_amount"}];OR(rt,{head:[qt.map(hs=>hs.header)],body:Ae.map(hs=>qt.map(it=>hs[it.dataKey])),startY:ft+30,styles:{fontSize:8},headStyles:{fillColor:[64,64,64],textColor:[255,255,255],fontStyle:"bold"},theme:"grid",didDrawPage:hs=>{}});const Fs=ke?`V${ke.version_number}`:"draft",xs=`${gt}_${Fs}_BOM.pdf`;rt.save(xs),W({title:"Success",description:`Downloaded ${xs}`})}catch(Ae){console.error("Failed to generate PDF",Ae),W({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}},Ne=t.find(Ae=>Ae.id===j),ke=i.find(Ae=>Ae.id===w),Be=ke?.status==="submitted";return ee?e.jsx(Sa,{children:e.jsx("div",{className:"text-center py-8",children:"Loading projects..."})}):e.jsx(Sa,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Finalize BOM"}),e.jsx(Ms,{children:e.jsxs(Ws,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Select Project"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(We,{children:"Projects"}),e.jsxs(mn,{onValueChange:Ae=>b(Ae||null),children:[e.jsx(un,{className:"w-full",children:e.jsx(gn,{placeholder:t.length===0?"No projects":"Select project"})}),e.jsx(hn,{children:t.map(Ae=>e.jsxs(Ks,{value:Ae.id,children:[Ae.name,"  ",Ae.client||"(No client)","  ",Ae.location||"(No location)"]},Ae.id))})]})]}),Ne&&e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Budget:"})," ",Ne.budget||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",Ne.status||"draft"]})]}),j&&e.jsx("div",{className:"pt-4 space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"BOM Versions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(mn,{value:w||"",onValueChange:B,children:[e.jsx(un,{className:"flex-1",children:e.jsx(gn,{placeholder:"Select version"})}),e.jsx(hn,{children:i.map(Ae=>e.jsxs(Ks,{value:Ae.id,children:[Ae.project_name?`[${Ae.project_name}] `:"","V",Ae.version_number," (",Ae.status==="submitted"?"Locked":"Draft",")"]},Ae.id))})]}),w&&e.jsx(Ce,{onClick:async()=>{if(w&&confirm("Delete this version and all its BOM items? This cannot be undone."))try{const Ae=await lt(`/api/boq-versions/${encodeURIComponent(w)}`,{method:"DELETE"});if(Ae.ok){const Qe=await lt(`/api/boq-versions/${encodeURIComponent(j)}`,{headers:{}});if(Qe.ok){const le=await Qe.json();c(le.versions||[]);const ct=(le.versions||[]).find(rt=>rt.status==="draft");ct?B(ct.id):(le.versions||[]).length>0?B(le.versions[0].id):B(null),r([]),W({title:"Deleted",description:"Version removed"})}}else{const Qe=await Ae.text();throw new Error(Qe||"Failed to delete version")}}catch(Ae){console.error("Failed to delete version",Ae),W({title:"Error",description:"Failed to delete version",variant:"destructive"})}},variant:"destructive",children:"Delete Version"}),i.length>0&&e.jsx(Ce,{onClick:()=>{const Ae=i[0];confirm(`Copy items from V${Ae.version_number}?`)?ge(!0):ge(!1)},variant:"outline",children:"+ New Version"}),i.length===0&&j&&e.jsx(Ce,{onClick:()=>ge(!1),variant:"outline",children:"Create V1"})]}),e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(Ce,{variant:"outline",size:"sm",onClick:()=>de(!ae),children:ae?"Close Column Manager":"Manage Columns"})}),ae&&e.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 space-y-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Add New Column"}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(We,{children:"Column Name"}),e.jsx(Xe,{placeholder:"e.g. Remarks",value:se,onChange:Ae=>re(Ae.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(We,{children:"Insert After"}),e.jsxs(mn,{value:te,onValueChange:be,children:[e.jsx(un,{className:"w-[180px]",children:e.jsx(gn,{placeholder:"End of table"})}),e.jsxs(hn,{children:[e.jsx(Ks,{value:"",children:"End of table"}),ie.map(Ae=>e.jsx(Ks,{value:Ae.id,children:Ae.name},Ae.id))]})]})]}),e.jsx(Ce,{onClick:je,children:"Add Column"})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Current Columns"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ie.map(Ae=>e.jsxs("div",{className:"flex items-center gap-1 bg-white border px-2 py-1 rounded text-sm",children:[e.jsx("span",{children:Ae.name}),Ae.editable&&Ae.key.startsWith("custom_")&&e.jsx("button",{onClick:()=>Le(Ae.id),className:"text-red-500 hover:text-red-700 ml-1",children:""})]},Ae.id))})]})]}),ke&&e.jsxs("div",{className:"text-sm text-gray-600 space-y-1 bg-blue-50 p-3 rounded",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Project:"})," ",ke.project_name||"Unknown"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Version:"})," V",ke.version_number]}),ke.project_client&&e.jsxs("div",{children:[e.jsx("strong",{children:"Client:"})," ",ke.project_client]}),ke.project_location&&e.jsxs("div",{children:[e.jsx("strong",{children:"Location:"})," ",ke.project_location]}),Be&&e.jsx("span",{className:"inline-block bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs font-semibold",children:"Submitted (Locked)"}),!Be&&e.jsx("span",{className:"inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-semibold",children:"Draft (Editable)"})]})]})})]})}),j&&e.jsx(Ms,{children:e.jsxs(Ws,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"BOM Items"}),n.length===0?e.jsx("div",{className:"text-gray-500 text-center py-4",children:"No items added yet. Click Add Finalized +"}):e.jsx("div",{className:"space-y-8",children:n.map((Ae,Qe)=>{let le=Ae.table_data||{};if(typeof le=="string")try{le=JSON.parse(le)}catch(rt){console.error("Failed to parse table_data for item",Ae.id,rt),le={}}Array.isArray(le.step11_items)&&le.step11_items;const ct=le.product_name||Ae.estimator;return e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-100 px-4 py-3 flex justify-between items-center border-b border-gray-200",children:[e.jsxs("div",{className:"font-semibold text-sm text-gray-800",children:[Qe+1,". ",ct,le.category&&e.jsxs("span",{className:"ml-2 text-xs text-gray-500 font-normal",children:["(",le.category,")"]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(Ce,{variant:"destructive",size:"sm",className:"h-7 text-xs",disabled:Be,onClick:async()=>{if(confirm("Delete this product and all its items?"))try{await lt(`/api/boq-items/${Ae.id}`,{method:"DELETE"}),r(rt=>rt.filter(ht=>ht.id!==Ae.id)),W({title:"Deleted",description:"Product removed"})}catch{W({title:"Error",description:"Failed to delete product",variant:"destructive"})}},children:"Delete Product"})})]}),e.jsx("div",{className:"overflow-x-auto rounded-md border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsx("tr",{children:ie.map(rt=>e.jsx("th",{className:"h-10 px-4 text-left align-middle font-medium text-muted-foreground whitespace-nowrap",children:rt.name},rt.id))})}),e.jsx("tbody",{children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:ie.length,className:"p-4 text-center text-muted-foreground",children:"No items found. Add items from Create BOM or Calculator."})}):n.map(rt=>{let ht=rt.table_data||{};if(typeof ht=="string")try{ht=JSON.parse(ht)}catch{ht={}}const ft=ht.step11_items||[],Jt=ht.product_name||rt.estimator;return ft.map((gt,tt)=>{const Lt=`${rt.id}-${tt}`;return e.jsx("tr",{className:"border-b transition-colors hover:bg-muted/50",children:ie.map(qt=>{if(qt.key==="sno")return e.jsx("td",{className:"p-2 border-r",children:gt.s_no||"-"},qt.id);if(qt.key==="item")return e.jsx("td",{className:"p-2 font-medium border-r",children:gt.title||Jt},qt.id);if(qt.key==="supply_amount"){const Fs=Y(Lt,"qty",gt.qty||0),xs=Y(Lt,"supply_rate",gt.supply_rate||0);return e.jsx("td",{className:"p-2 border-r",children:(Fs*xs).toFixed(2)},qt.id)}if(qt.key==="install_amount"){const Fs=Y(Lt,"qty",gt.qty||0),xs=Y(Lt,"install_rate",gt.install_rate||0);return e.jsx("td",{className:"p-2 border-r",children:(Fs*xs).toFixed(2)},qt.id)}if(qt.editable){const Fs=Y(Lt,qt.key,gt[qt.key]??"");return e.jsx("td",{className:"p-2 border-r",children:e.jsx(Xe,{className:"h-8 w-full min-w-[80px]",value:Fs,type:qt.type,onChange:xs=>pe(Lt,qt.key,qt.type==="number"?parseFloat(xs.target.value):xs.target.value)})},qt.id)}return e.jsx("td",{className:"p-2 border-r",children:gt[qt.key]||""},qt.id)})},Lt)})})})]})})]},Ae.id)})}),n.length>0&&e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 w-72 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Supply:"}),e.jsxs("span",{className:"font-medium",children:["",n.flatMap(Ae=>(typeof Ae.table_data=="string"?JSON.parse(Ae.table_data):Ae.table_data||{}).step11_items||[]).reduce((Ae,Qe)=>{const le=Qe.qty||0,ct=Qe.supply_rate||0;return Ae+le*ct},0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Install:"}),e.jsxs("span",{className:"font-medium",children:["",n.flatMap(Ae=>(typeof Ae.table_data=="string"?JSON.parse(Ae.table_data):Ae.table_data||{}).step11_items||[]).reduce((Ae,Qe)=>{const le=Qe.qty||0,ct=Qe.install_rate||0;return Ae+le*ct},0).toFixed(2)]})]}),e.jsxs("div",{className:"border-t border-gray-300 my-2 pt-2 flex justify-between font-bold text-base",children:[e.jsx("span",{children:"Grand Total:"}),e.jsxs("span",{children:["",n.flatMap(Ae=>(typeof Ae.table_data=="string"?JSON.parse(Ae.table_data):Ae.table_data||{}).step11_items||[]).reduce((Ae,Qe)=>{const le=Qe.qty||0,ct=Qe.supply_rate||0,rt=Qe.install_rate||0;return Ae+le*ct+le*rt},0).toFixed(2)]})]})]})})]})}),j&&w&&e.jsx(Ms,{children:e.jsxs(Ws,{className:"space-y-3 pt-6",children:[Be?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-4 text-sm text-yellow-800",children:[e.jsx("strong",{children:"This version is locked."})," Submit a new version to make edits."]}):null,e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx(Ce,{onClick:me,variant:"outline",disabled:Be||Object.keys(he).length===0,children:"Save Draft"}),e.jsx(Ce,{onClick:Se,variant:"default",disabled:Be||n.length===0,children:"Submit & Lock Version"}),e.jsx(Ce,{onClick:ye,variant:"outline",disabled:n.length===0,children:"Download as Excel"}),e.jsx(Ce,{onClick:we,variant:"outline",disabled:n.length===0,children:"Download as PDF"})]})]})})]})})}function iW(){const[t,s]=S.useState(""),[n,r]=S.useState(""),[i,c]=S.useState(""),[A,u]=S.useState(""),{toast:d}=ua(),[h,o]=S.useState([]),[m,y]=S.useState({}),[p,j]=S.useState({}),[b,w]=S.useState({}),[B,U]=S.useState(new Set);S.useEffect(()=>{(async()=>{try{const G=await lt("/api/boq-projects",{headers:{}});if(G.ok){const W=await G.json();o(W.projects||[])}}catch(G){console.warn("Failed to load projects",G)}})()},[]);const Q=async()=>{if(!t.trim()){d({title:"Error",description:"Project name is required",variant:"destructive"});return}try{const q=await lt("/api/boq-projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.trim(),client:n.trim(),budget:i.trim(),location:A.trim()})});if(q.ok){const G=await q.json();s(""),r(""),c(""),u(""),o(W=>[G,...W]),d({title:"Success",description:"Project created"})}else d({title:"Error",description:"Failed to create project",variant:"destructive"})}catch(q){console.error("Failed to create project:",q),d({title:"Error",description:"Failed to create project",variant:"destructive"})}},k=async q=>{if(y(G=>({...G,[q]:!G[q]})),!m[q]&&!p[q])try{const G=await lt(`/api/boq-versions/${encodeURIComponent(q)}`,{headers:{}});if(G.ok){const W=await G.json();j(he=>({...he,[q]:W.versions||[]})),(W.versions||[]).forEach(async he=>{try{const Z=await lt(`/api/boq-items/version/${encodeURIComponent(he.id)}`,{headers:{}});if(Z.ok){const ie=await Z.json();w(ce=>({...ce,[he.id]:ie.items||[]}))}}catch(Z){console.warn("Failed to load items for version",he.id,Z)}})}}catch(G){console.warn("Failed to load versions",G)}},K=async q=>{if(confirm("Are you sure you want to delete this project? This cannot be undone."))try{(await lt(`/api/boq-projects/${q}`,{method:"DELETE"})).ok?(o(W=>W.filter(he=>he.id!==q)),d({title:"Success",description:"Project deleted"})):d({title:"Error",description:"Failed to delete project",variant:"destructive"})}catch(G){console.error("Failed to delete project:",G),d({title:"Error",description:"Failed to delete project",variant:"destructive"})}},ee=q=>{const G=q.flatMap(W=>(W.table_data?.step11_items||[]).map((he,Z)=>({...he,_sourceId:W.id,_idx:Z})));return G.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No Step 11 items"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 border-b",children:[e.jsx("th",{className:"border px-2 py-1",children:"S.No"}),e.jsx("th",{className:"border px-2 py-1",children:"Item"}),e.jsx("th",{className:"border px-2 py-1",children:"Description"}),e.jsx("th",{className:"border px-2 py-1",children:"Unit"}),e.jsx("th",{className:"border px-2 py-1",children:"Qty"}),e.jsx("th",{className:"border px-2 py-1",children:"Supply Rate"}),e.jsx("th",{className:"border px-2 py-1",children:"Install Rate"})]})}),e.jsx("tbody",{children:G.map((W,he)=>e.jsxs("tr",{className:"border-b hover:bg-blue-50",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:he+1}),e.jsx("td",{className:"border px-2 py-1",children:W.title||W.bill_no||""}),e.jsx("td",{className:"border px-2 py-1",children:W.description||""}),e.jsx("td",{className:"border px-2 py-1 text-center",children:W.unit||"pcs"}),e.jsx("td",{className:"border px-2 py-1 text-right",children:W.qty??"0"}),e.jsx("td",{className:"border px-2 py-1 text-right",children:W.supply_rate??"0"}),e.jsx("td",{className:"border px-2 py-1 text-right",children:W.install_rate??"0"})]},`${W._sourceId}-${W._idx}`))})]})})};return e.jsx(Sa,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Create Project"}),e.jsx(Ms,{children:e.jsxs(Ws,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Create New Project"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Project Name"}),e.jsx(Xe,{value:t,onChange:q=>s(q.target.value),placeholder:"Project name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Client Name"}),e.jsx(Xe,{value:n,onChange:q=>r(q.target.value),placeholder:"Client"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Location"}),e.jsx(Xe,{value:A,onChange:q=>u(q.target.value),placeholder:"Location"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Budget"}),e.jsx(Xe,{value:i,onChange:q=>c(q.target.value),placeholder:"Budget"})]})]}),e.jsx(Ce,{onClick:Q,children:"Create Project"})]})}),e.jsx(Ms,{children:e.jsxs(Ws,{className:"space-y-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Existing Projects"}),h.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No projects yet."}):e.jsx("ul",{className:"space-y-2",children:h.map(q=>e.jsxs("li",{className:"border rounded",children:[e.jsxs("div",{className:"flex items-center justify-between p-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"text-sm px-2",onClick:()=>k(q.id),"aria-expanded":!!m[q.id],children:m[q.id]?"":""}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:q.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[q.client||"","  ",q.location||"","  ",q.budget||""]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["V",q.current_version||""]}),e.jsx(Ce,{variant:"destructive",size:"sm",onClick:()=>K(q.id),children:"Delete"})]})]}),m[q.id]&&e.jsx("div",{className:"p-3 border-t",children:p[q.id]?p[q.id].length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No versions for this project."}):e.jsx("div",{className:"space-y-4",children:p[q.id].map(G=>e.jsxs("div",{className:"border rounded p-3 bg-gray-50 flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:B.has(G.id),onChange:W=>{const he=new Set(B);W.target.checked?he.add(G.id):he.delete(G.id),U(he)},className:"mt-1 w-4 h-4 cursor-pointer"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"font-medium",children:["V",G.version_number]}),e.jsx("div",{className:`text-xs px-2 py-0.5 rounded ${G.status==="submitted"?"bg-green-100 text-green-800":"bg-gray-100 text-muted-foreground"}`,children:G.status})]}),G.status==="submitted"?e.jsx("div",{className:"mb-2",children:b[G.id]?b[G.id].length>0?ee(b[G.id]):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No items in this version"}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading items..."})}):e.jsx("div",{className:"mb-2",children:b[G.id]?b[G.id].length>0?ee(b[G.id]):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No items added yet"}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading items..."})})]})]},G.id))}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading versions..."})})]},q.id))})]})})]})})}const oW=[{code:"+91",country:"India"},{code:"+1",country:"USA"},{code:"+44",country:"UK"},{code:"+61",country:"Australia"},{code:"+971",country:"UAE"},{code:"+81",country:"Japan"},{code:"+49",country:"Germany"}],ly=()=>e.jsx("span",{className:"text-red-500 ml-1",children:"*"});function lW(){const{toast:t}=ua(),[s,n]=S.useState([]),[r,i]=S.useState(!0),[c,A]=S.useState(!1),[u,d]=S.useState(!1),[h,o]=S.useState({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:""});S.useEffect(()=>{m()},[]);const m=async()=>{try{const p=localStorage.getItem("authToken"),j=await fetch("/api/supplier/my-shops",{headers:p?{Authorization:`Bearer ${p}`}:{}});if(!j.ok){console.error("load shops failed",j.status),n([]);return}const b=await j.json();n(b.shops||[])}catch(p){console.error("Error loading shops:",p),n([])}finally{i(!1)}},y=async p=>{if(p.preventDefault(),!h.name.trim()){t({title:"Error",description:"Shop name is required",variant:"destructive"});return}if(!h.location.trim()||!h.city.trim()){t({title:"Error",description:"Location and city are required",variant:"destructive"});return}if(!h.contactNumber.trim()){t({title:"Error",description:"Contact number is required",variant:"destructive"});return}A(!0);try{const j=localStorage.getItem("authToken"),b=await fetch("/api/shops",{method:"POST",headers:{"Content-Type":"application/json",Authorization:j?`Bearer ${j}`:void 0},body:JSON.stringify(h)});if(!b.ok){const B=await b.text();throw console.error("submit shop failed",b.status,B),new Error(`Failed to submit shop (${b.status})`)}const w=await b.json();t({title:"Success",description:"Shop submitted for approval. Admin will review and approve it."}),o({name:"",location:"",city:"",phoneCountryCode:"+91",contactNumber:"",state:"",country:"",pincode:"",gstNo:""}),d(!1),m()}catch(j){console.error("Error submitting shop:",j),t({title:"Error",description:"Failed to submit shop",variant:"destructive"})}finally{A(!1)}};return e.jsx(Sa,{children:e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"My Shops"}),e.jsx("p",{className:"text-gray-600",children:"Add and manage your shops. Submit for approval to appear in the system."})]}),e.jsxs("div",{className:"grid gap-8",children:[!u&&e.jsxs(Ce,{onClick:()=>d(!0),className:"w-fit bg-blue-600 hover:bg-blue-700",children:[e.jsx(wc,{className:"mr-2 h-4 w-4"})," Add New Shop"]}),u&&e.jsxs(Ms,{className:"border-blue-200 bg-blue-50",children:[e.jsxs(Ar,{children:[e.jsxs(ur,{className:"text-blue-900 flex items-center gap-2",children:[e.jsx(wl,{className:"h-5 w-5"})," Add New Shop"]}),e.jsx(sa,{className:"text-blue-800",children:"Fill in your shop details and submit for approval"})]}),e.jsx(Ws,{children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Shop Name ",e.jsx(ly,{})]}),e.jsx(Xe,{placeholder:"Enter shop name",value:h.name,onChange:p=>o({...h,name:p.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Location ",e.jsx(ly,{})]}),e.jsx(Xe,{placeholder:"Enter location",value:h.location,onChange:p=>o({...h,location:p.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["City ",e.jsx(ly,{})]}),e.jsx(Xe,{placeholder:"Enter city",value:h.city,onChange:p=>o({...h,city:p.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"State"}),e.jsx(Xe,{placeholder:"Enter state",value:h.state,onChange:p=>o({...h,state:p.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Country"}),e.jsx(Xe,{placeholder:"Enter country",value:h.country,onChange:p=>o({...h,country:p.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"Pincode"}),e.jsx(Xe,{placeholder:"Enter pincode",value:h.pincode,onChange:p=>o({...h,pincode:p.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(We,{children:["Phone Number ",e.jsx(ly,{})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(mn,{value:h.phoneCountryCode,onValueChange:p=>o({...h,phoneCountryCode:p}),children:[e.jsx(un,{className:"w-28",children:e.jsx(gn,{placeholder:"+91"})}),e.jsx(hn,{children:oW.map(p=>e.jsx(Ks,{value:p.code,children:p.code},p.code))})]}),e.jsx(Xe,{placeholder:"Enter phone number",value:h.contactNumber,onChange:p=>o({...h,contactNumber:p.target.value}),type:"tel",className:"flex-1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(We,{children:"GST Number"}),e.jsx(Xe,{placeholder:"Enter GST number",value:h.gstNo,onChange:p=>o({...h,gstNo:p.target.value})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ce,{type:"submit",disabled:c,className:"bg-blue-600 hover:bg-blue-700",children:c?"Submitting...":"Submit for Approval"}),e.jsx(Ce,{type:"button",variant:"outline",onClick:()=>d(!1),disabled:c,children:"Cancel"})]})]})})]}),!r&&s.length>0&&e.jsxs(Ms,{children:[e.jsxs(Ar,{children:[e.jsxs(ur,{children:["My Shops (",s.length,")"]}),e.jsx(sa,{children:"List of your submitted and approved shops"})]}),e.jsx(Ws,{children:e.jsx("div",{className:"space-y-3",children:s.map(p=>e.jsxs("div",{className:"p-4 border rounded-lg flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",children:p.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.location,", ",p.city,p.state&&`, ${p.state}`]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p.phoneCountryCode," ",p.contactNumber]}),p.gstNo&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["GST: ",p.gstNo]})]}),e.jsx(Bl,{variant:p.approved?"default":"secondary",children:p.approved?"Approved":"Pending"})]},p.id))})})]}),!r&&s.length===0&&!u&&e.jsx(Ms,{children:e.jsx(Ws,{className:"pt-6",children:e.jsx("div",{className:"text-center text-gray-500",children:'No shops submitted yet. Click "Add New Shop" to get started.'})})})]})]})})}function cW({shopName:t="Shop",shopLocation:s=""}){const{toast:n}=ua(),{addSupportMessage:r,deleteMessage:i,supportMessages:c}=fi(),[A,u]=S.useState([]),[d,h]=S.useState(!0),[o,m]=S.useState(!1),[y,p]=S.useState(""),[j,b]=S.useState(""),[w,B]=S.useState("");S.useEffect(()=>{U()},[]);const U=async()=>{try{const K=localStorage.getItem("authToken"),ee=await fetch("/api/support-messages",{headers:K?{Authorization:`Bearer ${K}`}:{}});if(!ee.ok){console.error("Failed to load messages"),h(!1);return}const q=await ee.json();u(q.messages||[])}catch(K){console.error("Error loading messages:",K)}finally{h(!1)}},Q=async K=>{if(K.preventDefault(),!y.trim()){n({title:"Error",description:"Please enter your name",variant:"destructive"});return}if(!w.trim()){n({title:"Error",description:"Please enter your message",variant:"destructive"});return}m(!0);try{await r?.(y,w,j),n({title:"Success",description:"Your message has been submitted. Our team will respond shortly."}),p(""),b(""),B(""),await U()}catch{n({title:"Error",description:"Failed to submit message",variant:"destructive"})}finally{m(!1)}},k=async K=>{if(confirm("Are you sure you want to delete this message?"))try{await i?.(K),u(A.filter(ee=>ee.id!==K)),n({title:"Success",description:"Message deleted"})}catch{n({title:"Error",description:"Failed to delete message",variant:"destructive"})}};return e.jsx(Tj,{shopName:t,shopLocation:s,shopApproved:!0,children:e.jsxs("div",{className:"p-6 lg:p-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(yh,{size:24,className:"text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Messages & Support"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Get help from our technical support team. Submit your questions or issues below."})]}),e.jsxs(Ms,{className:"mb-8",children:[e.jsxs(Ar,{children:[e.jsx(ur,{children:"Submit a Message"}),e.jsx(sa,{children:"Tell us how we can help. Our team typically responds within 24 hours."})]}),e.jsx(Ws,{children:e.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(We,{htmlFor:"name",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Xe,{id:"name",type:"text",placeholder:"Your name",value:y,onChange:K=>p(K.target.value),required:!0,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(We,{htmlFor:"email",children:"Email (Optional)"}),e.jsx(Xe,{id:"email",type:"email",placeholder:"your.email@example.com",value:j,onChange:K=>b(K.target.value),className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsxs(We,{htmlFor:"message",children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Cl,{id:"message",placeholder:"Describe your issue or question in detail...",value:w,onChange:K=>B(K.target.value),required:!0,className:"mt-2 min-h-32"})]}),e.jsx(Ce,{type:"submit",disabled:o,className:"w-full bg-blue-600 hover:bg-blue-700",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Sl,{size:16,className:"mr-2 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(UL,{size:16,className:"mr-2"}),"Send Message"]})})]})})]}),e.jsxs(Ms,{children:[e.jsxs(Ar,{children:[e.jsx(ur,{children:"Your Messages"}),e.jsx(sa,{children:"Track your submitted messages and responses"})]}),e.jsx(Ws,{children:d?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Sl,{className:"w-6 h-6 text-blue-600 animate-spin mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Loading messages..."})]}):A.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(yh,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No messages yet. Submit one above to get started!"})]}):e.jsx("div",{className:"space-y-4",children:A.map(K=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:K.sender_name||"Anonymous"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(K.submitted_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsx("button",{onClick:()=>k(K.id),className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition",children:e.jsx(Gc,{size:16})})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:K.message}),K.additional_info&&e.jsxs("div",{className:"p-2 bg-blue-50 rounded border border-blue-200 text-xs text-blue-800",children:[e.jsx("strong",{children:"Additional Info:"})," ",K.additional_info]})]},K.id))})})]}),e.jsx(Ms,{className:"mt-6",children:e.jsx(Ws,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(gh,{className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:"Response Time"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Our technical support team typically responds to all messages within 24 business hours. For urgent issues, please mark them as priority in your message."})]})]})})})]})})}function dW(){return e.jsxs(rO,{children:[e.jsx(mr,{path:"/",component:k8}),e.jsx(mr,{path:"/signup",component:FH}),e.jsx(mr,{path:"/forgot-password",component:IH}),e.jsx(mr,{path:"/reset-password",component:o9}),e.jsx(mr,{path:"/pending-approval",component:mN}),e.jsx(mr,{path:"/supplier-pending",component:mN}),e.jsx(mr,{path:"/dashboard",component:BK}),e.jsx(mr,{path:"/software/dashboard",component:CK}),e.jsx(mr,{path:"/purchase/dashboard",component:EK}),e.jsx(mr,{path:"/supplier/dashboard",component:FN}),e.jsx(mr,{path:"/subscription",component:mG}),e.jsx(mr,{path:"/create-project",component:iW}),e.jsx(mr,{path:"/create-bom",component:rW}),e.jsx(mr,{path:"/finalize-bom",component:aW}),e.jsx(mr,{path:"/item-master",component:pG}),e.jsx(mr,{path:"/bom-review",component:gG}),e.jsx(mr,{path:"/estimators/civil-wall",component:Pq}),e.jsx(mr,{path:"/estimators/flooring",component:zq}),e.jsx(mr,{path:"/estimators/false-ceiling",component:Vq}),e.jsx(mr,{path:"/estimators/painting",component:qq}),e.jsx(mr,{path:"/estimators/doors",component:Xq}),e.jsx(mr,{path:"/estimators/blinds",component:rG}),e.jsx(mr,{path:"/estimators/electrical",component:oG}),e.jsx(mr,{path:"/estimators/plumbing",component:lG}),e.jsx(mr,{path:"/estimators/ms-work",component:dG}),e.jsx(mr,{path:"/estimators/ss-work",component:AG}),e.jsx(mr,{path:"/estimators/fire-fighting",component:uG}),e.jsx(mr,{path:"/estimators/:subcategory",component:fG}),e.jsx(mr,{path:"/admin/dashboard",component:qb}),e.jsx(mr,{path:"/admin/manage-materials",component:UK}),e.jsx(mr,{path:"/admin/manage-product",component:MK}),e.jsx(mr,{path:"/admin/vendor-categories",component:PK}),e.jsx(mr,{path:"/admin/supplier-approval",component:IN}),e.jsx(mr,{path:"/admin/suppliers",component:IN}),e.jsx(mr,{path:"/admin/material-submissions",component:DK}),e.jsx(mr,{path:"/supplier/shops",component:lW}),e.jsx(mr,{path:"/supplier/materials",component:bI}),e.jsx(mr,{path:"/supplier/support",component:()=>e.jsx(cW,{})}),e.jsx(mr,{path:"/supplier/dashboard",component:FN}),e.jsx(mr,{component:q6})]})}function AW(){return e.jsx(NO,{client:PO,children:e.jsx(KO,{children:e.jsx($O,{children:e.jsxs($6,{children:[e.jsx(DD,{}),e.jsx(dW,{})]})})})})}U3.createRoot(document.getElementById("root")).render(e.jsx(AW,{}));export{wa as _,Dw as c,l1 as g};
